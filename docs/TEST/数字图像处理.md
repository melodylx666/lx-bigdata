# 数字图像处理

## 第一章 导论

1. 图像分类
   1. 模拟图像：又称为光学图像，空间坐标和明暗程度是连续的，计算机无法直接处理
   2. 数字图像：空间坐标和灰度不连续，可以使用计算机处理
2. 数字图像定义
   1. 图像可以定义为二维函数$f(x,y)$,其中x,y是空间坐标，而在x,y处的幅值为该点的强度或者灰度。如果离散，则为灰度图像
   2. 图像的基本组成是像素，每个像素都有位置和幅值
3. 数字图像处理
   1. 定义：借助于数字计算机来处理数字图像
   2. 方式：图像到图像，图像到非图像
   3. 组成：图像获取设备，专用图像处理设备或者有相应配置的计算机，图形输出设备
   4. 目的
      1. 提高图像的视感质量
      2. 提取图像中包含的特征和信息
      3. 图像数据的变化，编码和压缩，便于存储于传输
   5. 意义
      1. 扩大人的视觉
      2. 代替人的视觉
      3. 打动人的视觉

## 第二章 基础知识

> 主要分为图像获取和图像数字化，主要为数字化

1. 数字化
   1. 定义：所谓图像数字化，是将模拟图像经过离散化之后，得到用数字表示的图像。
      包括了空间离散化(**采样**)和明暗表示数据的离散化(**量化**)
   2. 采样
      1. 间隔是关键，太小了则数据量太大。太大了则无法识别细节
      2. 原理是对连续图像生成扫描线，对每个线进行取样和量化
      3. 方式：有缝，无缝，重叠
   3. 数字化处理规则
      1. 对缓慢变化的图像，细量化，粗采样
      2. 细节丰富的图像， 细采样，粗量化
   4. 数字图像表示
      1. 如果原图像是f(s,t) 连续函数，则通过取样和量化，得到二维阵列 f(x,y).
      2. 方式
         1. 函数图
         2. 灰度图
         3. 矩阵
      3. 注意:**x轴向下，y轴向右**
      4. 描述术语
         1. 动态范围：最大灰度和最小灰度的**比值**
         2. 饱和度：指超过该值的灰度值将被剪切掉
         3. 对比度：最大灰度和最小灰度的**差值**
      5. 分辨率
         1. 定义：描述图像中物体的细节程度
         2. 分类
            1. 空间分辨率：采样决定，是图像可辨别的最小细节的度量
            2. 灰度分辨率：量化决定，是图像灰度级的可分辨的最小变化
         3. 空间分辨率因素
            1. 是由采样点数决定
            2. 灰度一定，则点数和分辨率成正比
      6. 图像内插
         1. 定义：使用已知数据估计未知数据的一种数值处理。属于**图像重采样**
         2. 分类：**计算题**
            1. 最临近内插法：将原图像中最近邻的灰度赋给每个新位置
            2. 双线性内插法：$v(x,y) = ax + by +cxy + d$,其中**系数由四个最邻近元素**决定
            3. 三次内插法
   5. 图像运算
      1. 实质：是对应位置像素之间的运算
      2. 要求：图像大小相同
      3. 作用
         1. 相加：做平滑噪声处理
         2. 相减：增强差别
         3. 相乘、相除：可以用于矫正阴影和模板操作
   6. 几何空间变换
      1. 组成要素
         1. 坐标的空间变换
         2. 灰度内插，就是对变换后的像素赋予灰度值
      2. 坐标变换
         1. 公式：$(x,y) = T(v,w)$
         2. 正向映射：直接对每个位置应用公式
         3. 反向映射：扫描输出位置，对每个图像使用$(v,w) = T^{-1}（x,y)$得到输入图像的位置，然后使用决定输出像素的灰度值
      3. 类型
         1. 位置变换
            1. 平移变换
            2. 镜像变换：水平或者垂直
            3. 旋转变换
         2. 形状变换
            1. 比例变换
            2. 错切变换
         3. 复合变换
   7. 图像放大
      1. 实质：对信息的估计
      2. 方式：最近邻域法和线性插值法
      3. 最近邻域法
         1. 思想：如果需要将原图像放大k倍，则将原图像中的每个像素，放入$k*k$的子块中。会出现**马赛克**效应
      4. 线性内插法
         1. 思想：当求出的分数地址和像素点不一致的时候，求出周围像素点的距离比值，由四个邻域的像素灰度值进行线性插值
         2. 对于$(x,y)$,则周围四个像素点是$([x],[y]),([x]+1,[y]),([x],[y]+1),([x]+1,[y]+1)$.这里的坐标是y向下，x向右
         3. 计算公式：如果图像四个角分别是a,b,c,d，则结果为q(p*d + (1-p)*c) + (1-q)(p*b + (1-p)*a)
         4. 其中横向为p,1-p.竖向为q,-1q
         5. 复合旋转，等于乘以两次的旋转的矩阵的乘积。单次旋转的矩阵是左上角四个位置是
            cos, sin,-sin,cos



## 第三章 灰度变换和空间滤波

> 拍雾中的照片，或者黑夜的照片，因为亮暗差别不是很大，则画面效果不好
>
> 改正方法：图像增强与图像复原


### 常见的描述术语

* 图像动态范围：图像中最大灰度和最小灰度的**比值**
* 对比度：图像中最大灰度和最小灰度的**差值**
* 空间分辨率：图像可辨别的最小细节的度量
* 灰度分辨率：灰度级中可分辨的最小变化

### 图像增强

定义：图像增强采用一系列技术改善图像的视觉效果，或者转换为需要的便于处理的形式。

分类：从增强的作用域出发，分为空间域增强和频率域增强。**空间域增强**是直接对图像各像素进行处理。而**频率域增强**是将图像经过傅里叶变换之后，**从空域转换为频域**(其中每个点表示图像中不同频率成分的幅度和相位信息)，从而可以对不同的频域进行操作或者过滤，最后再转换为空域即可。


#### 空间域增强

分类：主要分为灰度变换和空间滤波两部分。其中**灰度变换**在图像的单个像素上操作，主要以对比度和阈值的处理为目的。而**空间滤波**涉及改善性能的操作，比如通过图像中的每个像素的邻域来锐化图像。

统一公式：$g(x,y) = T(f(x,y)))$，则其中T是对点$(x,y)$的邻域进行处理的算子。如为降低噪声而对图像序列执行每个像素求和的操作。对边界，需要进行pedding或者其他操作，这就是**空间滤波**的定义。

灰度变换：

* 线性灰度变换：输入图像的灰度范围[a,b]，输出图像的灰度范围为[c,d]。超出原范围的值全部变为边界值，中间的部分使用线性变换。


对数变换：通用形式为s = $c * log(1 + r)$,其中c是常数，假设$r >= 0$.**该变换可以扩展暗像素的值，同时压缩更高灰度级的值**。反对数变换的作用相反。可以查看前后的频谱。

伽马变换：$s = c  r^{z}$，其中如果 z<1，提升灰度，图像变亮。z>1，则降低灰度级，图像变暗


#### 直方图均衡

定义：灰度直方图是表达图像灰度分布情况的统计图像，横坐标是灰度值，纵坐标是概率密度(可用比值计算)。如果要归一化，就是需要除以总像素数量MN。

灰度值集中偏小，则原图像变暗。灰度值集中偏大，则原图像变量。如果跨度太大，则动态范围合适
