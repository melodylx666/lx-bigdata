{"config":{"lang":["zh","en","ja"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"\u4f60\u597d","text":""},{"location":"#self-intro","title":"self-intro","text":"<p>\u8fd9\u91cc\u662fxiao\u7684\u4e2a\u4eba\u4e3b\u9875</p>"},{"location":"#experience","title":"experience","text":"<ul> <li>2023-07 - 2023-12 \u592a\u539f\u7406\u5de5\u8d85\u7b97\u57fa\u5730\uff0c\u5b66\u4e60\u548c\u7814\u7a76\u5e76\u884c\u8ba1\u7b97</li> <li>2023-12 - 2024-01 ASC\u4e16\u754c\u5927\u5b66\u751f\u8d85\u7ea7\u8ba1\u7b97\u673a\u5927\u8d5b\u5168\u56fd\u4e8c\u7b49\u5956</li> <li>2025-03 - 2025-05 Momenta-CDI\uff0c\u8d1f\u8d23\u5f00\u53d1\u6570\u636e\u6316\u6398\u548c\u81ea\u52a8\u6807\u6ce8\u5e73\u53f0</li> <li>2025-07 - 2025-09 \u5f00\u6e90\u4e4b\u590f(ospp) \u5f00\u53d1,\u505a\u56fd\u4ea7\u56fe\u6570\u636e\u5e93\u751f\u6001\u589e\u5f3a</li> </ul>"},{"location":"#education","title":"education","text":"<ul> <li><code>GPA Rank</code> \u524d20%</li> <li>\u6821\u7ea7\u4e09\u7b49\u5956\u5b66\u91d1</li> <li><code>CET4</code> 579\u5206</li> <li><code>CET6</code> 458\u5206</li> </ul>"},{"location":"#other","title":"other","text":"<ul> <li>\u5f00\u6e90\u7ecf\u5386\uff1a\u4e3aapache-Doris\uff0cScala-doc\u9879\u76ee\u8d21\u732e\u8fc7\u6587\u6863pr\u5e76\u88ab\u5408\u5e76\u5230\u4e3b\u5206\u652f(2\u4e2atypo,1\u4e2a\u529f\u80fd\u6027)</li> <li>\u9879\u76ee\u7ecf\u5386(\u6570\u636e\u8ba1\u7b97)\uff1amelodylx666/Sparklet: mini impl for SparkCore (github.com)</li> </ul>"},{"location":"#output","title":"output","text":"<p>\u79cb\u62db\u590d\u4e60</p> <p>\u4ece\u8bba\u6587\u770b\u9694\u79bb\u7ea7\u522b</p> <p>GraphDB</p> <p>\u67e5\u7f3a\u8865\u6f0f</p> <p>Flink\u603b\u7ed3</p> <p>\u64cd\u4f5c\u7cfb\u7edf</p> <p>\u5927\u6570\u636eSQL\u5256\u6790</p> <p>\u7b2c\u4e00\u6bb5\u5b9e\u4e60\u603b\u7ed3</p> <p>LevelDB\u6e90\u7801\u5b66\u4e60</p>"},{"location":"BaseSkill/design-pattern/","title":"\u8bbe\u8ba1\u6a21\u5f0f\u603b\u7ed3","text":"<p>\u7cfb\u7edf\u603b\u7ed3\u4e00\u4e0b</p>"},{"location":"BaseSkill/design-pattern/#_2","title":"\u521b\u5efa\u578b\u6a21\u5f0f","text":""},{"location":"BaseSkill/design-pattern/#_3","title":"\u5355\u4f8b\u6a21\u5f0f","text":"<p>\u5b9a\u4e49\uff1a\u8fd9\u4e2a\u987e\u540d\u601d\u4e49\uff0c\u5c31\u662f\u5168\u5c40\u53ea\u4f7f\u7528\u4e00\u4e2a\u5b9e\u4f8b\uff0c\u4e00\u822c\u4f7f\u7528\u5728\u9700\u8981\u8d44\u6e90\u590d\u7528\u7684\u60c5\u51b5\uff0c\u6bd4\u5982\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u7ebf\u7a0b\u6c60\u7b49\u7b49\u3002</p> <p>\u5b9e\u73b0\uff1a\u5e38\u89c1\u7684\u6784\u5efa\u65b9\u5f0f\uff0c\u6709\u61d2\u6c49\u5f0f\u548c\u997f\u6c49\u5f0f\u4e24\u79cd\u3002</p> <p>\u5355\u4f8b\u548c\u5168\u5c40\u9759\u6001\u53d8\u91cf\u7684\u533a\u522b\uff1f * \u5982\u679c\u7b80\u5355\u4f7f\u7528\u4e14\u751f\u547d\u5468\u671f\u90fd\u662f\u7b49\u540c\u4e8e\u6574\u4e2a\u7a0b\u5e8f\uff0c\u5219\u6ca1\u6709\u533a\u522b * \u5982\u679c\u60f3\u66f4\u7ec6\u7c92\u5ea6\u7684\u7ef4\u62a4\u5b9e\u4f8b\u7684\u751f\u547d\u5468\u671f\uff0c\u66f4\u597d\u7684\u5c01\u88c5\u5b9e\u4f8b\u7684\u4f7f\u7528\u65b9\u5f0f\uff0c\u5219\u4f7f\u7528\u5355\u4f8b\u6a21\u5f0f</p>"},{"location":"BaseSkill/design-pattern/#_4","title":"\u5de5\u5382\u6a21\u5f0f","text":"<p>\u5176\u6ce8\u91cd\u7684\u662f\u5265\u79bb\u521b\u5efa\u5b9e\u4f8b\u7684\u903b\u8f91\uff0c\u5c06\u521b\u5efa\u5b9e\u4f8b\u7684\u903b\u8f91\u4ece\u4e1a\u52a1\u903b\u8f91\u4e2d\u62bd\u79bb\u51fa\u6765\uff0c\u901a\u8fc7\u5de5\u5382\u7c7b\u6765\u521b\u5efa\u5b9e\u4f8b\u3002</p> <p>\u5b9a\u4e49\uff1a\u4e00\u79cd\u5c01\u88c5\u5bf9\u8c61\u521b\u5efa\u8fc7\u7a0b\u7684\u65b9\u5f0f\uff0c\u4f7f\u5f97\u5ba2\u6237\u7aef\u4ee3\u7801\u65e0\u9700\u5173\u5fc3\u5177\u4f53\u5bf9\u8c61\u7684\u521b\u5efa\u903b\u8f91\uff0c\u53ea\u9700\u8981\u901a\u8fc7\u7edf\u4e00\u7684\u63a5\u53e3\u6765\u83b7\u53d6\u5bf9\u8c61\u3002\u6838\u5fc3\u5c31\u662f\u5c06\u5bf9\u8c61\u7684\u521b\u5efa\u903b\u8f91\u548c\u4f7f\u7528\u903b\u8f91\u5206\u79bb\u3002\u5176\u9075\u5faa\u5f00\u95ed\u539f\u5219\uff0c\u589e\u52a0\u65b0\u7684\u4ea7\u54c1\u7c7b\u7684\u65f6\u5019\uff0c\u4e0d\u9700\u8981\u4fee\u6539\u4f7f\u7528\u903b\u8f91\u7684\u4ee3\u7801\uff0c\u53ea\u9700\u8981\u6269\u5c55\u5de5\u5382\u903b\u8f91\u5c31\u53ef\u4ee5\u3002</p> <p>\u5e38\u89c1\u7c7b\u578b\uff1a</p> <ul> <li>\u7b80\u5355\u5de5\u5382\uff1a\u6839\u636e\u53c2\u6570\u6765\u6765\u51b3\u5b9a\u8fd4\u56de\u5bf9\u5e94\u5bf9\u8c61\u3002</li> <li>\u6807\u51c6\u5de5\u5382\uff1a\u5148\u5b9a\u4e49\u4e00\u4e2a\u521b\u5efa\u5bf9\u8c61\u7684\u63a5\u53e3\uff0c\u901a\u8fc7\u5b9e\u73b0\u7c7b\u6765\u51b3\u5b9a\u5982\u4f55\u521b\u5efa\u5bf9\u8c61\u3002\u4f7f\u7528\u903b\u8f91\u4e2d\u53ef\u4ee5\u901a\u8fc7\u53c2\u6570\u63a7\u5236\u5177\u4f53\u8981\u5f97\u5230\u54ea\u4e2a\u5de5\u5382\u7684\u5b9e\u73b0\u7c7b\uff0c\u7136\u540e\u901a\u8fc7\u5de5\u5382\u7684\u5b9e\u73b0\u7c7b\u6765\u521b\u5efa\u5bf9\u8c61\u3002</li> <li>\u62bd\u8c61\u5de5\u5382\uff1a\u7ef4\u62a4\u4e00\u4e2a\u6216\u591a\u4e2a\u5de5\u5382\uff0c\u6bcf\u4e2a\u5de5\u5382\u8d1f\u8d23\u521b\u5efa\u4e00\u4e2a\u4ea7\u54c1\u7cfb\u5217\u3002</li> </ul>"},{"location":"BaseSkill/design-pattern/#_5","title":"\u5efa\u9020\u8005\u6a21\u5f0f","text":"<p>\u5176\u6ce8\u91cd\u7684\u662f\u521b\u5efa\u4e00\u4e2a\u590d\u6742\u5bf9\u8c61\uff0c\u5c06\u591a\u4e2a\u90e8\u4ef6\u7684\u521b\u5efa\u8fc7\u7a0b\u548c\u88c5\u914d\u8fc7\u7a0b\u5206\u5f00\uff0c\u5c06\u590d\u6742\u5bf9\u8c61\u7684\u521b\u5efa\u548c\u5bf9\u8c61\u7684\u4f7f\u7528\u5206\u79bb\u3002</p> <p>\u5b9a\u4e49\uff1a\u5b83\u7528\u4e8e\u5c06\u590d\u6742\u5bf9\u8c61\u7684\u6784\u5efa\u8fc7\u7a0b\u4e0e\u5176\u8868\u793a\u5206\u79bb\uff0c\u4f7f\u5f97\u540c\u6837\u7684\u6784\u5efa\u903b\u8f91\u53ef\u4ee5\u521b\u5efa\u4e0d\u540c\u7684\u8868\u793a\u3002</p> <p>\u6838\u5fc3\u7ec4\u6210\uff1a</p> <ol> <li>Product\uff0c\u4e5f\u5c31\u662f\u5185\u90e8\u8981\u521b\u5efa\u7684\u5bf9\u8c61\u3002</li> <li>Builder\uff0c\u8d1f\u8d23\u521b\u5efaProduct\u7684\u5404\u4e2a\u90e8\u5206\uff0c\u5e76\u5b9a\u4e49\u8fd4\u56deProduct\u7684\u63a5\u53e3\u3002</li> <li>Director\uff0c\u8d1f\u8d23\u8c03\u7528Builder\u7684\u63a5\u53e3\uff0c\u5b8c\u6210\u4ea7\u54c1\u7684\u521b\u5efa\u3002</li> <li>Client\uff0c\u8d1f\u8d23\u521b\u5efaBuilder\uff0c\u5e76\u8c03\u7528Director\u7684\u63a5\u53e3\uff0c\u5b8c\u6210\u4ea7\u54c1\u7684\u521b\u5efa\u3002</li> </ol> <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u4f7f\u7528\u65b9\u5f0f\u5c31\u662fClient\u8c03\u7528Director\u5185\u90e8\u5c01\u88c5\u7684Builder\u4f7f\u7528\u903b\u8f91\uff0c\u4ece\u800c\u5b8c\u6210\u5185\u90e8\u5bf9\u8c61\u7684\u6784\u5efa\u8fc7\u7a0b\uff0c\u6700\u7ec8\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u6784\u5efa\u5b8c\u6574\u7684\u5bf9\u8c61\u5b9e\u4f8b\u3002</p>"},{"location":"BaseSkill/design-pattern/#_6","title":"\u7ed3\u6784\u578b\u6a21\u5f0f","text":""},{"location":"BaseSkill/design-pattern/#_7","title":"\u95e8\u9762\u6a21\u5f0f","text":"<p>\u7ecf\u5178\u4f8b\u5b50\u5c31\u662f\u65e5\u5fd7\u7cfb\u7edf</p> <p>\u5b9a\u4e49\uff1a\u5b83\u4e3a\u590d\u6742\u7684\u5b50\u7cfb\u7edf\u63d0\u4f9b\u4e00\u4e2a\u7edf\u4e00\u7684\u9ad8\u5c42\u63a5\u53e3\uff0c\u4f7f\u5f97\u5b50\u7cfb\u7edf\u7684\u4f7f\u7528\u53d8\u5f97\u66f4\u52a0\u7b80\u5355\u3002</p> <p>\u6838\u5fc3\u7ec4\u6210\uff1a</p> <ol> <li>Client\u7c7b\uff0c\u901a\u8fc7\u63a5\u53e3\u8c03\u7528Facade\u7c7b\u7684\u5ba2\u6237\u7aef\u4ee3\u7801\uff0c\u65e0\u9700\u4e86\u89e3\u5b50\u7cfb\u7edf\u7684\u5b9e\u73b0\u7ec6\u8282</li> <li>Facade\u7c7b\uff0c\u4e3a\u5b50\u7cfb\u7edf\u63d0\u4f9b\u63a5\u53e3\uff0c\u5e76\u5b9a\u4e49\u5b50\u7cfb\u7edf\u7684\u8bbf\u95ee\u65b9\u5f0f</li> <li>SubSystem\u7c7b\uff0c\u5b50\u7cfb\u7edf\u63a5\u53e3\u7684\u5177\u4f53\u5b9e\u73b0\u7c7b</li> </ol> <p>\u6269\u5c55\uff1a\u5982\u679c\u5b50\u7cfb\u7edf\u63a5\u53e3\u5b9e\u73b0\u7c7b\u9700\u8981\u52a8\u6001\u52a0\u8f7d\uff0c\u5219\u53ef\u4ee5\u548cSPI\u673a\u5236/\u76f4\u63a5\u53cd\u5c04\u7ed3\u5408\uff0c\u540e\u8005\u5c06\u7b26\u5408\u8981\u6c42\u7684\uff0c\u5b9e\u73b0Facade\u7c7b\u63a5\u53e3\u7684\u5b9e\u73b0\u7c7b\u52a0\u8f7d\u5230JVM\u4e2d\uff0c\u7136\u540e\u4f9bClient\u901a\u8fc7\u63a5\u53e3\u6765\u8c03\u7528\u3002 \u4e5f\u5c31\u662f\u8bf4\uff0c\u5f53\u6709\u52a8\u6001\u6269\u5c55\u9700\u6c42\u7684\u65f6\u5019\uff0c\u95e8\u9762\u6a21\u5f0f\u901a\u5e38\u548cSPI/\u53cd\u5c04\u4f7f\u7528\u3002</p>"},{"location":"BaseSkill/design-pattern/#_8","title":"\u88c5\u9970\u5668\u6a21\u5f0f","text":"<p>\u5b9a\u4e49\uff1a\u5141\u8bb8\u5411\u4e00\u4e2a\u73b0\u6709\u7684\u5bf9\u8c61\u6dfb\u52a0\u65b0\u7684\u529f\u80fd\uff0c\u540c\u65f6\u53c8\u4e0d\u6539\u53d8\u5176\u7ed3\u6784\u3002</p> <p>\u6838\u5fc3\u7ec4\u6210\uff1a</p> <ol> <li>Component\uff1a\u62bd\u8c61\u7ec4\u4ef6\u7c7b</li> <li>ConcreteComponent\uff1a\u5177\u4f53\u7ec4\u4ef6\u7c7b\uff0c\u8fd9\u4e2a\u5c31\u662f\u5c06\u8981\u88ab\u6dfb\u52a0\u529f\u80fd\u7684\u5bf9\u8c61</li> <li>Decorator\uff1a\u88c5\u9970\u5668\u57fa\u7c7b\u3002\u5fc5\u987b\u6301\u6709\u4e00\u4e2aComponent\u5bf9\u8c61 &amp; \u5fc5\u987b\u5b9e\u73b0Component\u63a5\u53e3</li> <li>ConcreteDecorator\uff1a\u5177\u4f53\u88c5\u9970\u5668\u7c7b\u3002 \u7ee7\u627fDecorator\u7c7b &amp; \u8986\u76d6Component\u63a5\u53e3\u65b9\u6cd5</li> <li>Client\uff1a\u5ba2\u6237\u7aef\uff0c\u60f3\u8981\u7ed9\u7ec4\u4ef6\u589e\u5f3a\u529f\u80fd\u7684\u65f6\u5019\uff0c\u53ea\u9700\u8981\u4e00\u884c\u4ee3\u7801\uff0c\u5c06\u7ec4\u4ef6\u5305\u4e00\u5c42\u4fee\u9970\u5668\u5373\u53ef\uff0c\u7531\u4e8e\u4fee\u9970\u5668\u7ee7\u627f\u4e86\u62bd\u8c61\u7ec4\u4ef6\u7c7b\uff0c\u6240\u4ee5Client\u8c03\u7528\u6b64\u65f6\u7684\u4fee\u9970\u5b9e\u4f8b\uff0c\u5185\u90e8\u5c31\u6267\u884c\u7684\u662f\u88ab\u589e\u5f3a(\u4fee\u9970)\u7684\u7ec4\u4ef6\u7684\u63a5\u53e3\u65b9\u6cd5\u3002</li> </ol>"},{"location":"BaseSkill/design-pattern/#_9","title":"\u9002\u914d\u5668\u6a21\u5f0f","text":"<p>\u5b9a\u4e49\uff1a\u5c06\u4e00\u4e2a\u7c7b\u7684\u63a5\u53e3\u8f6c\u6362\u6210\u5ba2\u6237\u5e0c\u671b\u7684\u53e6\u5916\u4e00\u4e2a\u63a5\u53e3\uff0c\u4f7f\u5f97\u539f\u672c\u7531\u4e8e\u63a5\u53e3\u4e0d\u517c\u5bb9\u800c\u4e0d\u80fd\u4e00\u8d77\u5de5\u4f5c\u7684\u90a3\u4e9b\u7c7b\u53ef\u4ee5\u4e00\u8d77\u5de5\u4f5c\u3002</p> <p>\u6838\u5fc3\u7ec4\u6210\uff1a</p> <ol> <li>Target\uff1a\u76ee\u6807\u63a5\u53e3\uff0c\u5b9a\u4e49\u5ba2\u6237\u6240\u671f\u5f85\u7684\u63a5\u53e3\u3002</li> <li>Adaptee\uff1a\u88ab\u9002\u914d\u8005\uff0c\u5b9a\u4e49\u88ab\u9002\u914d\u7684\u63a5\u53e3\u3002</li> <li>Adapter\uff1a\u9002\u914d\u5668\uff0c\u5c06Adaptee\u63a5\u53e3\u8f6c\u6362\u6210Target\u63a5\u53e3\u3002</li> <li>Client\uff1a\u5ba2\u6237\uff0c\u4f7f\u7528Target\u63a5\u53e3\uff0c\u65e0\u9700\u5173\u6ce8\u5b9e\u9645\u8c03\u7528\u7684\u662f\u9002\u914d\u5668\u8fd8\u662f\u539f\u59cb\u5b9e\u73b0\u3002</li> </ol> <p>\u6838\u5fc3\u601d\u60f3\uff1a\u5c31\u662f\u901a\u8fc7\u4e2d\u95f4\u5c42\u5c06\u4e0d\u517c\u5bb9\u7684\u63a5\u53e3\u8fdb\u884c\u517c\u5bb9\u3002</p>"},{"location":"BaseSkill/design-pattern/#_10","title":"\u4ee3\u7406\u6a21\u5f0f","text":"<p>\u5b9a\u4e49\uff1a\u4ee3\u7406\u6a21\u5f0f\uff0c\u4e5f\u53eb\u59d4\u6258\u6a21\u5f0f\uff0c\u4e3a\u4e00\u4e2a\u5bf9\u8c61\u63d0\u4f9b\u4e00\u4e2a\u66ff\u8eab\uff08\u4ee3\u7406\uff09\uff0c\u4ee5\u63a7\u5236\u5bf9\u8fd9\u4e2a\u5bf9\u8c61\u7684\u8bbf\u95ee\u3002</p> <p>\u6838\u5fc3\u7ec4\u6210\uff1a</p> <ol> <li>Subject\uff1a\u62bd\u8c61\u529f\u80fd\u7c7b\uff0c\u5b9a\u4e49\u63a5\u53e3</li> <li>RealSubject\uff1a\u5177\u4f53\u529f\u80fd\u7c7b\uff0c\u5b9e\u73b0\u63a5\u53e3\u3002</li> <li>Proxy\uff1a\u4ee3\u7406\u7c7b\uff0c\u6301\u6709\u88ab\u4ee3\u7406\u7684\u529f\u80fd\u5b9e\u4f8b\u3002</li> <li>Client:\u5ba2\u6237\u7aef\u5e94\u7528\u4ee3\u7801\uff0c\u901a\u8fc7\u4ee3\u7406\u7c7b\u8c03\u7528\u88ab\u4ee3\u7406\u7684\u529f\u80fd\u5b9e\u4f8b\u3002</li> </ol> <p>\u5e38\u89c1\u573a\u666f</p> <ol> <li>\u8fdc\u7a0b\u4ee3\u7406\uff0c\u6bd4\u5982RPC\u4e2d\u7684\u8fdc\u7a0b\u5bf9\u8c61</li> <li>\u865a\u62df\u4ee3\u7406\uff0c\u5b9e\u73b0lazy\u6548\u679c</li> </ol>"},{"location":"BaseSkill/design-pattern/#_11","title":"\u4eab\u5143\u6a21\u5f0f","text":"<p>\u5b9a\u4e49\uff1a\u662f\u4e00\u79cd\u7ed3\u6784\u6027\u8bbe\u8ba1\u6a21\u5f0f\uff0c\u5b83\u7684\u6838\u5fc3\u76ee\u7684\u662f\u901a\u8fc7\u5171\u4eab\u6280\u672f\u6765\u51cf\u5c11\u521b\u5efa\u5bf9\u8c61\u7684\u6570\u91cf\uff0c\u4ece\u800c\u964d\u4f4e\u5185\u5b58\u4f7f\u7528\u548c\u63d0\u5347\u6027\u80fd\uff0c\u7279\u522b\u9002\u7528\u4e8e\u5927\u91cf\u7ec6\u7c92\u5ea6\u5bf9\u8c61\u7684\u573a\u666f\u3002</p> <p>\u6838\u5fc3\u7ec4\u6210\uff1a\u4eab\u5143\u6a21\u5f0f\u5c06\u5bf9\u8c61\u7684\u72b6\u6001\u5206\u4e3a\u5185\u90e8\u72b6\u6001\u548c\u5916\u90e8\u72b6\u6001\u3002\u5185\u90e8\u72b6\u6001\u53ef\u4ee5\u5171\u4eab\u72b6\u6001\uff0c\u72ec\u7acb\u4e8e\u5177\u4f53\u7684\u573a\u666f\u3002\u800c\u5916\u90e8\u72b6\u6001\u4f9d\u8d56\u5177\u4f53\u573a\u666f\uff0c\u4e0d\u53ef\u4ee5\u5171\u4eab\uff0c\u9700\u8981\u901a\u8fc7\u5ba2\u6237\u7aef\u4f20\u5165\u3002</p> <ul> <li>Flyweight: \u62bd\u8c61\u7c7b\u6216\u8005\u63a5\u53e3\uff0c\u5b9a\u4e49\u4e86\u5bf9\u8c61\u7684\u884c\u4e3a</li> <li>ConcreteFlyweight: \u5177\u4f53\u4eab\u5143\u7c7b\uff0c\u7ee7\u627f\u62bd\u8c61\u4eab\u5143\u7c7b\uff0c\u5b9e\u73b0\u62bd\u8c61\u4eab\u5143\u7c7b\u5b9a\u4e49\u7684\u63a5\u53e3</li> <li>FlyweightFactory: \u4eab\u5143\u5de5\u5382\u7c7b\uff0c\u521b\u5efa\u4eab\u5143\u5bf9\u8c61\uff0c\u5e76\u7ba1\u7406\u5bf9\u8c61\uff0c\u786e\u4fdd\u5bf9\u8c61\u552f\u4e00</li> <li>Client: \u4f7f\u7528\u4eab\u5143\u5bf9\u8c61\u7684\u5ba2\u6237\u7aef</li> </ul> <p>\u9002\u7528\u573a\u666f\uff1a\u5355\u4e2a\u5bf9\u8c61\u521b\u5efa\u6210\u672c\u9ad8\uff0c\u4e14\u53ef\u590d\u7528\u6027\u5f3a\uff0c\u4e8e\u662f\u5c06\u5185\u90e8\u72b6\u6001\u548c\u5916\u90e8\u72b6\u6001\u5206\u79bb\u5f00\uff0c\u6bd4\u5982\u8d77\u591a\u4e2aPOD(\u4e00\u7ec4worker)\uff0c\u7136\u540e\u6bcf\u4e2atask\u8fdb\u6765\uff0c\u90fd\u5e26\u6709\u81ea\u5df1\u7684\u5916\u90e8\u72b6\u6001\uff0c\u7ed9POD\u6ce8\u5165\u81ea\u5df1\u7684\u72b6\u6001\uff0c\u540c\u65f6\u590d\u7528\u955c\u50cf\u7684\u72b6\u6001\u4e3a\u81ea\u5df1\u5de5\u4f5c\u3002</p>"},{"location":"BaseSkill/design-pattern/#_12","title":"\u884c\u4e3a\u7c7b\u6a21\u5f0f","text":""},{"location":"BaseSkill/design-pattern/#_13","title":"\u7b56\u7565\u6a21\u5f0f","text":"<p>\u5b9a\u4e49\uff1a\u5b83\u5141\u8bb8\u4f60\u5b9a\u4e49\u4e00\u7cfb\u5217\u7b97\u6cd5\u6216\u884c\u4e3a\uff0c\u5e76\u5c06\u5b83\u4eec\u5c01\u88c5\u5728\u72ec\u7acb\u7684\u7c7b\u4e2d\uff0c\u4f7f\u5f97\u5b83\u4eec\u53ef\u4ee5\u4e92\u6362\u4f7f\u7528\uff0c\u4ece\u800c\u8ba9\u5bf9\u8c61\u5728\u8fd0\u884c\u65f6\u80fd\u591f\u52a8\u6001\u5730\u6539\u53d8\u5176\u884c\u4e3a\u3002</p> <p>\u6838\u5fc3\u7ec4\u6210\uff1a</p> <ol> <li>Strategy\uff1a\u7b56\u7565\u63a5\u53e3\uff0c\u5b9a\u4e49\u4e86\u7b97\u6cd5\u7684\u62bd\u8c61\u65b9\u6cd5\u3002</li> <li>ConcreteStrategy\uff1a\u5177\u4f53\u7b56\u7565\u7c7b\uff0c\u5b9e\u73b0\u4e86\u7b56\u7565\u63a5\u53e3\uff0c\u5b9a\u4e49\u4e86\u5177\u4f53\u7684\u7b97\u6cd5\u3002</li> <li>Context\uff1a\u4e0a\u4e0b\u6587\u7c7b\uff0c\u6301\u6709\u7b56\u7565\u5bf9\u8c61\uff0c\u901a\u8fc7\u7b56\u7565\u5bf9\u8c61\u6267\u884c\u7b97\u6cd5\u3002\u901a\u5e38\u8fd9\u91cc\u5c31\u53ef\u4ee5\u4f7f\u7528set\u65b9\u6cd5\u6765\u52a8\u6001\u8bbe\u7f6e\u7b56\u7565\u5bf9\u8c61,\u4e4b\u540e\u518d\u8c03\u7528execute\u65b9\u6cd5\u6765\u6267\u884c\u7b97\u6cd5\u3002</li> </ol> <p>\u548c\u95e8\u9762\u6a21\u5f0f\u7684\u533a\u522b\uff1f \u90fd\u662f\u63a5\u53e3\u7684\u4f7f\u7528\u65b9\u5f0f\uff0c\u4f46\u662f\u7b56\u7565\u6a21\u5f0f\u6ce8\u91cd\u884c\u4e3a\u7684\u5207\u6362\uff0c\u800c\u95e8\u9762\u6a21\u5f0f\u5219\u66f4\u6ce8\u91cd\u5bf9\u7ed3\u6784\u7684\u5c01\u88c5\u3002</p> <p>SPI/\u53cd\u5c04\u7b49\u52a8\u6001\u8c03\u7528\uff0c\u53ea\u8981\u662f\u63a5\u53e3\u5b9e\u73b0\u7c7b\u9700\u8981\u88ab\u52a0\u8f7d\uff0c\u90fd\u53ef\u4ee5\u88ab\u4f7f\u7528\uff0c\u5e76\u4e0d\u5173\u6ce8\u5230\u5e95\u662f\u95e8\u9762\u6a21\u5f0f\uff0c\u8fd8\u662f\u7b56\u7565\u6a21\u5f0f\u3002</p>"},{"location":"BaseSkill/design-pattern/#_14","title":"\u6a21\u7248\u6a21\u5f0f","text":"<p>\u5b9a\u4e49\uff1a\u5b9a\u4e49\u4e00\u4e2a\u7b97\u6cd5\u7684\u9aa8\u67b6\uff0c\u800c\u5c06\u4e00\u4e9b\u6b65\u9aa4\u5ef6\u8fdf\u5230\u5b50\u7c7b\u4e2d\u5b9e\u73b0\u3002\u6a21\u677f\u65b9\u6cd5\u4f7f\u5f97\u5b50\u7c7b\u53ef\u4ee5\u5728\u4e0d\u6539\u53d8\u7b97\u6cd5\u7ed3\u6784\u7684\u524d\u63d0\u4e0b\uff0c\u91cd\u65b0\u5b9a\u4e49\u7b97\u6cd5\u4e2d\u7684\u67d0\u4e9b\u6b65\u9aa4\u3002 </p> <p>\u6838\u5fc3\u7ec4\u6210\uff1a</p> <ol> <li>\u62bd\u8c61\u7c7b\uff1a\u5b9a\u4e49\u62bd\u8c61\u65b9\u6cd5\uff0c\u5b9a\u4e49\u7b97\u6cd5\u7684\u9aa8\u67b6\uff0c\u5c06\u4e00\u4e9b\u6b65\u9aa4\u7684\u5b9e\u73b0\u5ef6\u8fdf\u5230\u5b50\u7c7b\u4e2d\u3002</li> <li>\u5177\u4f53\u7c7b\uff1a\u5b9e\u73b0\u62bd\u8c61\u65b9\u6cd5\uff0c\u63d0\u4f9b\u7b97\u6cd5\u7684\u5b9e\u73b0\u3002</li> </ol> <p>\u8fd9\u4e2a\u662f\u6700\u7b80\u5355\uff0c\u6700\u5e38\u7528\u7684\u884c\u4e3a\u7c7b\u6a21\u5f0f\u4e86</p>"},{"location":"BaseSkill/design-pattern/#_15","title":"\u8fed\u4ee3\u5668\u6a21\u5f0f","text":"<p>\u5b9a\u4e49\uff1a\u8fed\u4ee3\u5668\u6a21\u5f0f\u5141\u8bb8\u5bf9\u8c61\u63a7\u5236\u5bf9\u96c6\u5408\u5bf9\u8c61\u4e2d\u5143\u7d20\u7684\u8bbf\u95ee\uff0c\u5e76\u63a7\u5236\u8bbf\u95ee\u7684\u987a\u5e8f\u3002</p> <p>\u6838\u5fc3\u7ec4\u6210\uff1a</p> <ol> <li>\u8fed\u4ee3\u5668\u63a5\u53e3\uff0c\u5b9a\u4e49\u5982\u4f55\u904d\u5386\u548c\u8bbf\u95ee\u96c6\u5408\u4e2d\u7684\u5143\u7d20\u3002</li> <li>\u96c6\u5408\u63a5\u53e3\uff0c\u5b9a\u4e49\u96c6\u5408\u5bf9\u8c61\u5982\u4f55\u521b\u5efa\u8fed\u4ee3\u5668\u3002</li> <li>\u5177\u4f53\u5b9e\u73b0\u7c7b\uff0c\u9996\u5148\u5728\u5185\u90e8\u901a\u5e38\u5b9a\u4e49\u5177\u4f53\u8fed\u4ee3\u5668\u7c7b\uff0c\u5b9e\u73b0\u8fed\u4ee3\u5668\u63a5\u53e3\uff0c\u5e76\u5b9e\u73b0\u5177\u4f53\u7684\u904d\u5386\u548c\u8bbf\u95ee\u903b\u8f91\u3002 \u7136\u540e\u5b9a\u4e49\u5982\u4f55\u521b\u5efa\u8fed\u4ee3\u5668\uff0c\u8fd4\u56de\u5177\u4f53\u8fed\u4ee3\u5668\u7c7b\u7684\u5b9e\u4f8b\u3002</li> </ol>"},{"location":"BaseSkill/design-pattern/#_16","title":"\u8d23\u4efb\u94fe\u6a21\u5f0f","text":"<p>\u8fd9\u4e2a\u5728Netty\u4e2d\u89c1\u5230\u8fc7\uff0c\u5927\u6570\u8ba1\u7b97\u5f15\u64ce\u4e2d\u7684\u5e95\u5c42RPC\u6846\u67b6\u5e38\u5e38\u4f7f\u7528Netty\u6765\u5b9e\u73b0\u3002</p> <p>\u5b9a\u4e49\uff1a\u5c06\u8bf7\u6c42\u7684\u53d1\u9001\u8005\u548c\u63a5\u6536\u8005\u89e3\u8026\uff0c\u5e76\u8ba9\u591a\u4e2a\u5bf9\u8c61\u90fd\u6709\u673a\u4f1a\u5904\u7406\u8fd9\u4e2a\u8bf7\u6c42\u3002\u8fd9\u4e9b\u5bf9\u8c61\u5f62\u6210\u4e00\u6761\u94fe\uff0c\u8bf7\u6c42\u6cbf\u7740\u8fd9\u6761\u94fe\u4f20\u9012\uff0c\u76f4\u5230\u88ab\u5904\u7406\u6216\u7ec8\u6b62\u3002</p> <p>\u6838\u5fc3\u7ec4\u6210\uff1a</p> <ol> <li>Handler\uff1a\u5904\u7406\u8005\uff0c\u5b9a\u4e49\u4e86\u5904\u7406\u8bf7\u6c42\u7684\u63a5\u53e3\u3002</li> <li>ConcreteHandler\uff1a\u5177\u4f53\u7684\u5904\u7406\u8005\uff0c\u7ee7\u627fHandler\uff0c\u5b9e\u73b0\u5904\u7406\u8bf7\u6c42\u7684\u63a5\u53e3\u3002\u8fd9\u91cc\u53ef\u4ee5\u81ea\u5df1\u5904\u7406\uff0c\u4e5f\u53ef\u4ee5\u4f20\u9012\u7ed9\u4e0b\u4e00\u4e2aHandler\u5904\u7406\u3002</li> <li>Client\uff1a\u5ba2\u6237\u7aef\u3002\u9996\u5148\u521b\u5efa\u8bf7\u6c42\uff0c\u7136\u540e\u521b\u5efaHandler Chain\uff0c\u6700\u540e\u5c06\u8bf7\u6c42\u53d1\u9001\u5230\u7b2c\u4e00\u4e2aHandler\u5373\u53ef\u3002</li> </ol> <p>\u5e38\u89c1\u573a\u666f\uff1a\u5c31\u662f\u521b\u5efa\u4e00\u4e2a\u5904\u7406\u94fe\uff0c\u5904\u7406\u8bf7\u6c42\u3002\u4e2d\u95f4\u505a\u591a\u7ea7\u8fc7\u6ee4\uff0c\u62e6\u622a\u7b49\u3002</p>"},{"location":"BaseSkill/design-pattern/#_17","title":"\u8bbf\u95ee\u8005\u6a21\u5f0f","text":"<p>\u8fd9\u4e2a\u53ea\u5728\u8bed\u6cd5\u89e3\u6790\u90e8\u5206\u770b\u5230\u8fc7\uff0c\u7528\u4e8e\u904d\u5386\u548c\u8bbf\u95eeAST\u6811\u8282\u70b9\u3002\u6bd4\u5982SparkSQL\u7684g4\u6587\u4ef6\u751f\u6210\u7684\u8bed\u6cd5\u6811\u7684\u904d\u5386\u3002</p> <p>\u5b9a\u4e49\uff1a\u5728\u4e0d\u4fee\u6539\u5df2\u6709\u7c7b\u7ed3\u6784\u7684\u524d\u63d0\u4e0b\uff0c\u4e3a\u5bf9\u8c61\u7ed3\u6784\u4e2d\u7684\u5143\u7d20\u589e\u52a0\u65b0\u7684\u64cd\u4f5c\u903b\u8f91\u3002</p> <p>\u6838\u5fc3\u7ec4\u6210\uff1a</p> <ol> <li>Visitor \u62bd\u8c61\u8bbf\u95ee\u8005\uff0c\u5b9a\u4e49\u5bf9\u6bcf\u4e00\u79cd\u8282\u70b9\u7684\u8bbf\u95ee\u65b9\u6cd5</li> <li>ConcreteVisitor \u5177\u4f53\u8bbf\u95ee\u8005\uff0c\u5b9e\u73b0\u5bf9\u6bcf\u79cd\u8282\u70b9\u7684\u8bbf\u95ee\u65b9\u6cd5</li> <li>Element \u62bd\u8c61\u5143\u7d20\uff0c\u5b9a\u4e49\u4e00\u4e2a\u63a5\u53e3\uff0c\u7528\u4e8e\u63a5\u53d7\u8bbf\u95ee\u8005\u8bbf\u95ee</li> <li>ConcreteElement \u5177\u4f53\u5143\u7d20\uff0c\u5b9e\u73b0\u62bd\u8c61\u5143\u7d20\u4e2d\u7684\u63a5\u53e3\uff0c\u63d0\u4f9b\u8bbf\u95ee\u8005\u8bbf\u95ee\u7684\u65b9\u6cd5</li> <li>ObjectStructure \u62bd\u8c61\u5bf9\u8c61\u7ed3\u6784\uff0c\u5b9a\u4e49\u4e00\u4e2a\u63a5\u53e3\uff0c\u7528\u4e8e\u7ba1\u7406\u5143\u7d20\uff0c\u5e76\u5b9a\u4e49\u4e00\u4e2a\u63a5\u53e3\uff0c\u7528\u4e8e\u63a5\u53d7\u8bbf\u95ee\u8005\u5f00\u59cb\u8bbf\u95ee</li> <li>Client,\u9996\u5148\u521b\u5efa\u5bf9\u8c61\u7ed3\u6784\uff0c\u901a\u5e38\u4e3a\u6811\u5f62\u3002\u7136\u540e\u521b\u5efa\u4e0d\u540c\u529f\u80fd\u7684\u8bbf\u95ee\u8005\uff0c\u5206\u522b\u8bbf\u95ee\u5bf9\u8c61\u6811\uff0c\u4ea7\u751f\u4e0d\u540c\u7684\u8bbf\u95ee\u6548\u679c\uff0c\u6536\u96c6\u5230\u4e0d\u540c\u7684\u4fe1\u606f\u3002\u4e3e\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\uff1a\u6bd4\u5982\u4e00\u4e2a\u6709\u4e09\u89d2\u5f62\u548c\u5706\u5f62\u7684\u6811\uff0c\u8bbf\u95ee\u8005\u6709\u6c42\u9762\u79ef\u548c\u6c42\u5468\u957f\u7684\u8bbf\u95ee\u8005\u3002\u5219\u8ba1\u7b97\u9762\u79ef\u7684\u8bbf\u95ee\u8005\uff0c\u8bbf\u95ee\u5230\u4e09\u89d2\u5f62\u7684\u65f6\u5019(\u88ab\u8be5\u8282\u70b9\u4f7f\u7528accept\u65b9\u6cd5\u63a5\u6536\u8fdb\u53bb\uff0c\u5141\u8bb8\u5176\u4f7f\u7528visit\u65b9\u6cd5\u6536\u96c6\u5f53\u524d\u8282\u70b9\u4fe1\u606f)\uff0c\u4f1a\u4f7f\u7528\u4e09\u89d2\u5f62\u7684\u9762\u79ef\u516c\u5f0f\uff0c\u8bbf\u95ee\u5706\u5f62\u7684\u65f6\u5019\uff0c\u4f1a\u4f7f\u7528\u5706\u5f62\u7684\u9762\u79ef\u516c\u5f0f\u3002</li> </ol>"},{"location":"BaseSkill/devops/","title":"ci/cd\u6d41\u7a0b","text":"<p>\u901a\u5e38\u7684ci/cd worflow\u5982\u4e0b\u3002</p> <p>\u901a\u5e38\uff0cCD\u6709\u4e24\u79cd\u542b\u4e49\uff0c\u7b2c\u4e00\u79cd\u662f\u6301\u7eed\u4ea4\u4ed8\uff0c\u4e5f\u5c31\u662f\u5c06\u955c\u50cf\u7248\u672c\u6784\u5efa\u597d\uff0c\u4f46\u662f\u4e0d\u7acb\u5373\u4e0a\u7ebf\uff0c\u6700\u7ec8\u4e0a\u7ebf\u7531\u4eba\u5de5\u51b3\u5b9a\u3002\u7b2c\u4e8c\u79cd\u5219\u662f\u6301\u7eed\u90e8\u7f72\uff0c\u4e5f\u5c31\u662f\u90e8\u7f72\u5230\u751f\u4ea7\u73af\u5883\u3002\u9700\u8981\u5177\u4f53\u533a\u5206\u4e0a\u4e0b\u6587\u8bed\u5883\uff0c\u4ee5\u53ca\u5230\u5e95\u662f\u7814\u53d1\u56e2\u961f\u8fd8\u662f\u90e8\u7f72\u5b9e\u65bd\u56e2\u961f\u3002</p> <p>\u6d45\u8c08\u6301\u7eed\u96c6\u6210(CI)\u3001\u6301\u7eed\u4ea4\u4ed8(CD)\u3001\u6301\u7eed\u90e8\u7f72(CD) - EdisonYao - \u535a\u5ba2\u56ed (cnblogs.com)\u3001</p> <p>\u901a\u8fc7server\u90e8\u7f72\u4e3a\u4f8b\u5b50\uff0c\u9700\u8981\u901a\u8fc7\u955c\u50cf\u6765\u90e8\u7f72\u5230\u96c6\u7fa4\uff0c\u5e76\u4e14\u9700\u8981\u548c\u5176\u4ed6\u670d\u52a1\u4e00\u8d77\u7edf\u4e00\u90e8\u7f72prod/dev\u73af\u5883\u3002</p>"},{"location":"BaseSkill/devops/#_1","title":"\u5177\u4f53\u6b65\u9aa4","text":"<p>\u6301\u7eed\u96c6\u6210 &amp; \u6301\u7eed\u4ea4\u4ed8(repo1)</p> <ul> <li>\u5f00\u53d1\u4ee3\u7801\u3002</li> <li>\u63d0\u4ea4pr\uff0c\u901a\u8fc7\u68c0\u6d4b &amp; code review,\u5408\u5e76\u5230master\u3002</li> <li>\u7531\u5f00\u53d1\u8005\u81ea\u5df1\u63a7\u5236\uff0c\u624b\u52a8\u89e6\u53d1pipeline, \u8fdb\u884c\u955c\u50cf\u7684\u6784\u5efa\u548c\u63a8\u9001\u3002\u8fd9\u91cc\u7684CD\u6307\u7684\u662f\u6301\u7eed\u4ea4\u4ed8\uff0c\u4e5f\u5c31\u662f\u955c\u50cf\u7248\u672c\u5df2\u7ecf\u51c6\u5907\u597d\u4e86\u3002</li> </ul> <p>\u6b64\u65f6\u955c\u50cf\u51c6\u5907\u597d\u4e86\uff0c\u53ef\u4ee5\u8fdb\u884cprod / dev\u73af\u5883\u90e8\u7f72</p> <p>\u6301\u7eed\u96c6\u6210 &amp; \u6301\u7eed\u90e8\u7f72(repo2)</p> <ul> <li>\u4fee\u6539\u8981\u4e0a\u7ebf\u7684\u8f6f\u4ef6\u7248\u672c</li> <li>\u63d0\u4ea4pr,\u901a\u8fc7\u68c0\u6d4b &amp; code review,\u5408\u5e76\u5230master</li> <li>\u5408\u5e76\u4e4b\u540e\u81ea\u52a8\u89e6\u53d1pipeline,\u5c06\u955c\u50cf\u5e76\u90e8\u7f72\u5230prod/dev\u96c6\u7fa4\u3002</li> </ul>"},{"location":"BaseSkill/docker/","title":"docker","text":"<p>\u624b\u518c_Docker\u4e2d\u6587\u7f51 (github.net.cn)</p> <p>docker\u4e2d\u6587\u793e\u533a,docker\u5e2e\u52a9,docker\u624b\u518c,docker\u6559\u7a0b,docker\u5b89\u88c5\u624b\u518c - docker\u4e2d\u6587\u793e\u533a</p>"},{"location":"BaseSkill/docker/#_1","title":"\u57fa\u7840\u4f7f\u7528","text":""},{"location":"BaseSkill/docker/#_2","title":"\u67b6\u6784","text":"<p>\u53ef\u4ee5\u770b\u5230\uff0cDocker\u7684\u4e3b\u8981\u67b6\u6784\u5982\u4e0b\uff1a</p> <ul> <li>\u5ba2\u6237\u7aef\uff0c\u7528\u4e8e\u53d1\u8d77\u5404\u79cd\u547d\u4ee4</li> <li>\u670d\u52a1\u7aef\uff0c\u8fd0\u884c\u7740\u4e00\u4e2a\u5b88\u62a4\u8fdb\u7a0b\uff0c\u66b4\u9732\u51fa\u4e00\u7ec4<code>restful-api</code>\uff0c\u7528\u4e8e\u76f8\u5e94\u5ba2\u6237\u7aef\u8bf7\u6c42\uff0c\u4ece\u800c\u5b8c\u6210docker\u7684\u6838\u5fc3\u529f\u80fd\uff0c\u6bd4\u5982\u8fd0\u884c\u5bb9\u5668\u7b49</li> <li>\u6ce8\u518c\u4e2d\u5fc3\uff0c\u7528\u4e8e\u4fdd\u5b58\u7528\u6237\u6784\u5efa\u7684\u955c\u50cf\uff0c\u5e76\u4e14\u53ef\u4ee5\u5206\u4eab\u51fa\u53bb</li> </ul>"},{"location":"BaseSkill/docker/#client","title":"Client","text":"<p>\u7528\u4e8e\u5411\u670d\u52a1\u7aef\u7684\u5b88\u62a4\u8fdb\u7a0b\u53d1\u9001\u8bf7\u6c42\uff0c\u5e76\u53ef\u4ee5\u7b49\u5f85\u54cd\u5e94\u7ed3\u679c\u3002</p>"},{"location":"BaseSkill/docker/#engine","title":"Engine","text":"<p>\u4e00\u4e2a\u7269\u7406/\u4e91\u670d\u52a1\u5668\uff0c\u7528\u4e8e\u6267\u884c<code>Docker</code>\u5b88\u62a4\u8fdb\u7a0b\u548c\u5bb9\u5668\u3002</p>"},{"location":"BaseSkill/docker/#image-container","title":"Image &amp; container","text":"<p>\u4e00\u4e2a<code>Image</code>\u5c31\u662f\u4e00\u4e2a\u6587\u4ef6\u7cfb\u7edf\uff0c\u5305\u542b\u4e86\u53ef\u4ee5\u8fd0\u884c\u5728<code>os kernel</code>\u4e4b\u4e0a\u7684\u7a0b\u5e8f\u4ee5\u53ca\u6240\u9700\u8981\u7684\u6570\u636e\u3002</p> <p>\u800c\u4e00\u4e2a\u5bb9\u5668\u662f\u6bcf\u4e2a\u5e94\u7528\u7a0b\u5e8f\u7ec4\u4ef6\u7684\u72ec\u7acb\u8fdb\u7a0b(\u6bd4\u5982\u4e00\u4e2aweb\u7a0b\u5e8f\uff0c\u5176\u524d\u7aef\u8fdb\u7a0b\uff0c\u540e\u7aef\u8fdb\u7a0b\uff0c\u6570\u636e\u5e93\u8fdb\u7a0b\u90fd\u5728\u81ea\u5df1\u7684\u9694\u79bb\u73af\u5883\u8fd0\u884c)\u3002</p> <p>\u4e00\u4e2a\u8fd0\u884c\u8fdb\u7a0b\u7684\u5bb9\u5668\uff0c\u6240\u4f7f\u7528\u7684\u6587\u4ef6\u7cfb\u7edf\u5c31\u662f<code>\u591a\u5c42Image</code>\u6240\u6784\u5efa\u51fa\u6765\u7684\u6587\u4ef6\u7cfb\u7edf\u3002</p> <p></p> <p>Docker\u4e2d\uff0c<code>Image</code>\u662f\u5206\u5c42\u7684\u3002\u5982\u679c\u9700\u8981\u8fd0\u884c\u591a\u4e2a\u5bb9\u5668\uff0c\u800c\u5b83\u4eec\u7684\u90e8\u5206\u955c\u50cf\u4f9d\u8d56\u662f\u91cd\u53e0\u7684\uff0c\u5219\u53ea\u9700\u8981\u5728\u78c1\u76d8\u5b58\u50a8\u4e00\u4efd\u5c31\u53ef\u4ee5\u3002</p> <p>\u90a3\u5982\u679c\u4e00\u4e2a\u5bb9\u5668\u8fd0\u884c\u65f6\uff0c\u5bf9\u955c\u50cf\u4fee\u6539\u4e86\u600e\u4e48\u529e\uff1f\u8fd9\u5c31\u662f\u52a0\u5c42\u7684\u597d\u5904\uff0c\u4fdd\u8bc1\u5bf9\u6240\u6709\u955c\u50cf\u7684\u90fd\u662f<code>read-only</code>\u3002</p>"},{"location":"BaseSkill/docker/#_3","title":"\u4f7f\u7528","text":""},{"location":"BaseSkill/docker/#_4","title":"\u64cd\u4f5c\u955c\u50cf","text":"<p>\u901a\u8fc7\u955c\u50cf\u540d\u79f0\u64cd\u4f5c</p> <ul> <li><code>docker search</code>\u641c\u7d22\u955c\u50cf</li> <li><code>docker  pull</code>\u62c9\u53d6\u955c\u50cf</li> <li><code>docker images</code>\u67e5\u770b\u670d\u52a1\u5668\u7aef\u5df2\u7ecf\u62c9\u53d6\u7684\u955c\u50cf</li> <li><code>docker rmi</code>\u5220\u9664\u670d\u52a1\u5668\u7aef\u67d0\u4e2a\u955c\u50cf</li> </ul>"},{"location":"BaseSkill/docker/#_5","title":"\u64cd\u4f5c\u5bb9\u5668","text":"<p>\u901a\u8fc7\u5bb9\u5668\u7684\u540d\u79f0\u6765\u64cd\u4f5c</p> <ul> <li><code>docker run</code> \u6839\u636e\u955c\u50cf\u8fd0\u884c\u5bb9\u5668</li> <li><code>docker ps</code>\u67e5\u770b\u8fd0\u5bb9\u5668\u8fdb\u7a0b\uff0c\u9ed8\u8ba4\u662f\u6b63\u5728\u8fd0\u884c\u7684\uff0c\u901a\u8fc7<code>-a</code>\u53c2\u6570\u6765\u63a7\u5236</li> <li><code>docker start/stop/restart</code> \u542f\u505c\u5bb9\u5668</li> <li><code>docker stats</code> \u67e5\u770b\u5bb9\u5668\u72b6\u6001</li> <li><code>docker logs</code> \u67e5\u770b\u5bb9\u5668\u542f\u52a8\u65e5\u5fd7</li> <li><code>docker rm</code>\u5220\u9664\u5bb9\u5668 *</li> </ul>"},{"location":"BaseSkill/gitSummary/","title":"Git \u89c4\u8303\u603b\u7ed3","text":"<p>\u4e00\u76f4\u90fd\u662f\u7b80\u5355\u7684\u4f7f\u7528git, \u5e76\u4e14idea\u5df2\u7ecf\u6709\u8f83\u597d\u7684\u53ef\u89c6\u5316\u5de5\u5177\u3002\u9700\u8981\u7cfb\u7edf\u603b\u7ed3\u4f7f\u7528\u65b9\u5f0f\u3002</p>"},{"location":"BaseSkill/gitSummary/#local","title":"Local","text":""},{"location":"BaseSkill/gitSummary/#level0","title":"level0","text":""},{"location":"BaseSkill/gitSummary/#commit","title":"commit","text":"<p>\u5b9a\u4e49</p> <p>Git \u4ed3\u5e93\u4e2d\u7684\u63d0\u4ea4\u8bb0\u5f55\u4fdd\u5b58\u7684\u662f\u4f60\u7684\u76ee\u5f55\u4e0b\u6240\u6709\u6587\u4ef6\u7684\u5feb\u7167\uff0c\u5c31\u50cf\u662f\u628a\u6574\u4e2a\u76ee\u5f55\u590d\u5236\uff0c\u7136\u540e\u518d\u7c98\u8d34\u4e00\u6837\uff0c\u4f46\u6bd4\u590d\u5236\u7c98\u8d34\u4f18\u96c5\u8bb8\u591a\uff01</p> <p>Git \u5e0c\u671b\u63d0\u4ea4\u8bb0\u5f55\u5c3d\u53ef\u80fd\u5730\u8f7b\u91cf\uff0c\u56e0\u6b64\u5728\u4f60\u6bcf\u6b21\u8fdb\u884c\u63d0\u4ea4\u65f6\uff0c\u5b83\u5e76\u4e0d\u4f1a\u76f2\u76ee\u5730\u590d\u5236\u6574\u4e2a\u76ee\u5f55\u3002\u6761\u4ef6\u5141\u8bb8\u7684\u60c5\u51b5\u4e0b\uff0c\u5b83\u4f1a\u5c06\u5f53\u524d\u7248\u672c\u4e0e\u4ed3\u5e93\u4e2d\u7684\u4e0a\u4e00\u4e2a\u7248\u672c\u8fdb\u884c\u5bf9\u6bd4\uff0c\u5e76\u628a\u6240\u6709\u7684\u5dee\u5f02\u6253\u5305\u5230\u4e00\u8d77\u4f5c\u4e3a\u4e00\u4e2a\u63d0\u4ea4\u8bb0\u5f55\u3002</p> <p>Git \u8fd8\u4fdd\u5b58\u4e86\u63d0\u4ea4\u7684\u5386\u53f2\u8bb0\u5f55\u3002\u8fd9\u4e5f\u662f\u4e3a\u4ec0\u4e48\u5927\u591a\u6570\u63d0\u4ea4\u8bb0\u5f55\u7684\u4e0a\u9762\u90fd\u6709 parent \u8282\u70b9\u7684\u539f\u56e0 \u2014\u2014 \u6211\u4eec\u4f1a\u5728\u56fe\u793a\u4e2d\u7528\u7bad\u5934\u6765\u8868\u793a\u8fd9\u79cd\u5173\u7cfb\u3002\u5bf9\u4e8e\u9879\u76ee\u7ec4\u7684\u6210\u5458\u6765\u8bf4\uff0c\u7ef4\u62a4\u63d0\u4ea4\u5386\u53f2\u5bf9\u5927\u5bb6\u90fd\u6709\u597d\u5904\u3002</p> <p>\u4f7f\u7528</p> <p>\u6bd4\u5982\u73b0\u5728\u7684\u7248\u672c\u63a7\u5236\u94fe\u4e0a\u5df2\u7ecf\u6709\u51e0\u4e2a\u8282\u70b9\u4e86\uff0c\u4f60\u53ef\u4ee5\u5c06\u5f53\u524d\u7684<code>main</code>\u8ffd\u52a0\u5230<code>parent</code>\u8282\u70b9\u4e4b\u540e\uff0c\u4f5c\u4e3a\u65b0\u7684\u7248\u672c\u3002</p> Text Only<pre><code>git commit\n</code></pre>"},{"location":"BaseSkill/gitSummary/#branch-checkout","title":"branch &amp; checkout","text":"<p>\u5b9a\u4e49</p> <p>\u5206\u652f\u53ea\u662f\u7b80\u5355\u7684\u6307\u5411\u67d0\u4e2a\u63d0\u4ea4\u8bb0\u5f55\u800c\u5df2\uff0c\u5e76\u4e14\u5efa\u7acb\u518d\u591a\u7684\u5206\u652f\u4e5f\u4e0d\u4f1a\u9020\u6210\u5b58\u50a8\u7684\u5f00\u9500\uff0c\u6240\u4ee5\u53ef\u4ee5\u6309\u7167\u903b\u8f91\u5c06\u5de5\u4f5c\u5206\u89e3\u4e3a\u4e0d\u540c\u7684\u5206\u652f\uff0c</p> <p>\u4f7f\u7528\u5206\u652f\u7684\u542b\u4e49\uff0c\u7b80\u5355\u6765\u8bf4\u5c31\u662f<code>\u6211\u60f3\u57fa\u4e8e\u5f53\u524d\u7684\u67d0\u4e2a\u63d0\u4ea4\uff0c\u4ee5\u53ca\u5b83\u7684\u6240\u6709parent\u63d0\u4ea4\u8fdb\u884c\u65b0\u7684\u5de5\u4f5c</code>\u3002</p> <p>\u521b\u5efa\u5206\u652f\uff0c\u4f7f\u7528<code>branch</code>\u3002\u800c\u5207\u6362\u5206\u652f\uff0c\u4f7f\u7528<code>checkout</code>\u3002</p> <p>\u4f7f\u7528</p> <p>\u53ef\u4ee5\u5728\u57fa\u4e8e\u67d0\u4e2a<code>commit</code>\uff0c\u6bd4\u5982\u5f53\u524d<code>main</code>\u6240\u6307\u5411\u7684<code>commit</code>\u521b\u5efa\u5206\u652f\u3002</p> <p></p> <p>\u8fd9\u91cc\u76f4\u63a5commit\u7684\u8bdd\u8fd8\u662f\u4f1a\u5c06main\u5411\u540e\u63a8\uff0c\u56e0\u4e3a\u661f\u53f7\u8fd8\u5728main\u4e0a\u3002</p> <p>\u6240\u4ee5\u9700\u8981\u5207\u6362\u5206\u652f\u5230newImage\u4e4b\u540e\uff0c\u518d\u8fdb\u884ccommit.</p> Text Only<pre><code>git checkout newImage;git commit\n//\u6216\u8005\u4e24\u8005\u5408\u5e76\n</code></pre> <p></p> <p>\u5176\u4e2d\uff0c\u521b\u5efa\u65b0\u5206\u652f\u548c\u5207\u6362\u5230\u65b0\u5206\u652f\u53ef\u4ee5\u4e00\u6b65\u5b8c\u6210:</p> Text Only<pre><code>git checkout -b newImage\n</code></pre>"},{"location":"BaseSkill/gitSummary/#merge","title":"merge","text":"<p>\u5b9a\u4e49</p> <p>\u5206\u652f\u6709\u4e86\uff0c\u5e76\u4e14\u53ef\u4ee5\u57fa\u4e8e\u5206\u652f\u8fdb\u884c\u5f00\u53d1\uff0c\u90a3\u5982\u4f55\u5c06\u5206\u652f\u5408\u5e76\u56de\u539f\u6765\u7684\u5206\u652f\u5462\uff1f\u5c31\u9700\u8981\u4f7f\u7528<code>merge</code>\u3002</p> <p>\u5728 Git \u4e2d\u5408\u5e76\u4e24\u4e2a\u5206\u652f\u65f6\u4f1a\u4ea7\u751f\u4e00\u4e2a\u7279\u6b8a\u7684\u63d0\u4ea4\u8bb0\u5f55\uff0c\u5b83\u6709\u4e24\u4e2a parent \u8282\u70b9\u3002\u7ffb\u8bd1\u6210\u81ea\u7136\u8bed\u8a00\u76f8\u5f53\u4e8e\uff1a\u6211\u8981\u628a\u8fd9\u4e24\u4e2a parent \u8282\u70b9\u672c\u8eab\u53ca\u5b83\u4eec\u6240\u6709\u7684\u7956\u5148\u90fd\u5305\u542b\u8fdb\u6765\u3002</p> <p>\u73b0\u5728\u60c5\u51b5\u5982\u4e0b:</p> <p></p> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u57fa\u4e8e<code>c1 commit</code>\uff0c\u51fa\u73b0\u4e86\u4e24\u4e2a\u5206\u652f:\u4e5f\u5c31\u662f<code>c2,c3</code>\uff0c\u4e24\u8005\u90fd\u505a\u4e86\u8fdb\u4e00\u6b65\u7684\u5f00\u53d1\uff0c\u4ee5\u53ca\u63d0\u4ea4\uff0c\u4e5f\u5c31\u662f\u6709\u4e86\u65b0\u7684\u7248\u672c\u3002</p> <p>\u5c06\u5206\u652f\u5782\u76f4\uff0c\u5219\u5176\u4e2d<code>main</code>\u6240\u5728\u7684\u53ef\u4ee5\u770b\u505a\u4e3b\u5206\u652f\u7ad6\u76f4\u5f80\u4e0b\uff0c\u800cbugfix\u662f\u53c9\u51fa\u6765\u7684\u5206\u652f\u3002</p> <p>\u4f7f\u7528</p> Text Only<pre><code>git merge bugFix\n</code></pre> <p></p> <p>\u4e5f\u5c31\u662f\u5f53\u524d\u7684\u6700\u65b0\u7248\u672c\uff0c\u5373<code>c4</code>\uff0c\u662f\u540c\u65f6\u4f9d\u8d56\u4e8e\u4e0a\u8ff0\u7684\u4e3b\u5206\u652f\uff0c\u4ee5\u53ca\u8981\u5408\u5e76\u7684\u5206\u652f\u7684\u3002</p> <p>\u540c\u65f6\u4f9d\u8d56\uff0c\u4e5f\u5c31\u662f\u8bf4\u4ece\u5f53\u524d\u8282\u70b9\u51fa\u53d1\uff0c\u53ef\u4ee5\u56de\u6eaf\u5230\u6240\u6709\u7684\u5386\u53f2\u7248\u672c\uff0c\u8fd9\u5c31\u662f\u7b26\u5408\u4e86merge\u7684\u8bed\u4e49\u3002\u53ef\u4ee5\u770b\u5230\uff0c\u6240\u6709\u4f4d\u7f6e\u90fd\u88ab mix in \u4e3b\u5206\u652f\u7684\u989c\u8272\u3002</p> <p>\u4f46\u662f\u73b0\u5728\uff0cbugfix\u5206\u652f\u5e76\u4e0d\u662f\u6700\u65b0\u7684\uff0c\u5b83\u4e0d\u80fd\u8bbf\u95ee\u6240\u6709\u7684\u8282\u70b9\uff0c\u600e\u4e48\u529e\uff1f</p> Text Only<pre><code>git checkout bugfix;git merge main\n</code></pre> <p>\u8fd9\u6837\u4e4b\u540e\uff0c\u7531\u4e8e\u8981\u7b26\u5408<code>merge\u540e\u7684\u5f53\u524d\u8282\u70b9\u9700\u8981\u5305\u542b\u4e24\u4e2aparent\u7684\u8282\u70b9\u7684\u6240\u6709\u8def\u5f84\uff1b\u800cmain\u53c8\u5df2\u7ecf\u5305\u542b\u4e86parent</code>\uff0c\u5219\u5982\u4e0b:</p> <p></p> <p>\u5219\u5f53\u524d\u7684\u6240\u6709\u7684\u5206\u652f\u90fd\u662f\u6700\u65b0\u7684\u3002</p>"},{"location":"BaseSkill/gitSummary/#rebase","title":"rebase","text":"<p>\u5b9a\u4e49</p> <p>merge\u548crebase\u662f\u5408\u5e76\u5206\u652f\u7684\u4e24\u79cd\u65b9\u5f0f\uff0c\u540e\u8005\u53ef\u4ee5\u521b\u5efa\u66f4\u52a0\u7ebf\u6027\u7684<code>commit</code>\u5386\u53f2\u8bb0\u5f55\u3002</p> <p>\u5177\u4f53\u800c\u8a00\uff0c<code>rebase</code>\u5c31\u662f\u53d6\u51fa\u4e00\u7cfb\u5217\u7684\u63d0\u4ea4\u8bb0\u5f55\uff0c\u590d\u5236\u5b83\u4eec\uff0c\u7136\u540e\u5728\u53e6\u4e00\u4e2a\u5730\u65b9\u9010\u4e2a\u653e\u4e0b\u53bb\u3002</p> <p>\u5176\u5b9e\u4ece<code>rebase</code>\u8fd9\u4e2a\u5355\u8bcd\u5c31\u53ef\u4ee5\u770b\u51fa\u542b\u4e49\u4e86\uff0c\u5177\u4f53\u5c31\u662f\u4e3a\u5f53\u524d\u5206\u652f\u6240\u6307\u5411\u7684\u6700\u65b0\u7248\u672c\uff0c\u91cd\u65b0\u9009\u62e9\u57fa\u5e95\uff0c\u800c\u4e0d\u662f\u539f\u6765\u7684\u57fa\u5e95\u3002\u4ece\u800c\u53d8\u5f97\u7ebf\u6027\u3002</p> <p>\u5c31\u662f\u5c06\u5e76\u884c\u5f00\u53d1\u7684\u4e24\u4e2a\u5206\u652f\uff0c\u4fee\u6539\u4e3a\u4e32\u884c\u5f00\u53d1\u7684\u7ed3\u6784\u3002</p> <p>\u4f7f\u7528</p> <p></p> <p>\u5f53\u524d\u5728<code>bugFix</code>\u5206\u652f\u4e0a\u3002\u5982\u679c\u8981\u5c06\u5f53\u524d\u7684\u5206\u652f\u5408\u5e76\u5230\u4e3b\u5206\u652f\u3002</p> <p>\u9996\u5148\uff0c\u6267\u884c</p> Text Only<pre><code>git rebase main\n</code></pre> <p></p> <p>\u53ef\u4ee5\u770b\u5230\uff0c\uff0c\u5f53\u524d\u7684<code>bugFix</code>\u5df2\u7ecf\u53d8\u4e3a\u6700\u65b0\uff0c\u5e76\u4e14\u53ef\u4ee5\u56de\u6eaf\u5230\u6240\u6709\u7684\u5386\u53f2\u7248\u672c(\u8fdb\u884c\u67d3\u8272\u4e86)\u3002</p> <p>\u53ea\u6709\u4e00\u4e2a\u95ee\u9898\uff0c\u5c31\u662f\u8bf4<code>main</code>\u6ca1\u6709\u66f4\u65b0\u3002\u5f88\u663e\u7136\uff0c\u6211\u4eec\u53ea\u9700\u8981\u8ba9<code>main</code>\u4ee5\u6700\u65b0\u7248\u672c\u4e3a\u57fa\u5e95\u5c31\u53ef\u4ee5\u3002</p> Text Only<pre><code>git checkout main;git rebase bugFix\n</code></pre> <p></p>"},{"location":"BaseSkill/gitSummary/#level1","title":"level1","text":""},{"location":"BaseSkill/gitSummary/#head","title":"HEAD","text":"<p>\u6ce8\u610f\u9700\u8981\u5927\u5199\uff0c\u5426\u5219\u6709\u4e9b\u60c5\u51b5\u53ef\u80fd\u4f1a\u51fa\u9519\u3002</p> <p>HEAD \u603b\u662f\u6307\u5411\u5f53\u524d\u5206\u652f\u4e0a\u6700\u8fd1\u4e00\u6b21\u63d0\u4ea4\u8bb0\u5f55\u3002\u5927\u591a\u6570\u4fee\u6539\u63d0\u4ea4\u6811\u7684 Git \u547d\u4ee4\u90fd\u662f\u4ece\u6539\u53d8 HEAD \u7684\u6307\u5411\u5f00\u59cb\u7684\u3002</p> <p>\u4e5f\u5c31\u662f\u6211\u4eec\u603b\u662f\u4ecehead\u51fa\u53d1\u7684\u3002</p> <p>\u4f46\u662f\u9ed8\u8ba4<code>head</code>\u5e76\u4e0d\u662f\u6307\u5411\u6700\u8fd1\u7684<code>commit</code>\u7684\uff0c\u800c\u662f\u6307\u5411\u5f53\u524d\u5206\u652f\u540d\u79f0(\u53ef\u4ee5\u89c6\u4f5c\u6307\u9488\u7684\u6307\u9488)\u3002\u5982\u679c\u8981\u76f4\u63a5\u6307\u5411\u67d0\u4e2a\u63d0\u4ea4\u8bb0\u5f55(\u901a\u5e38\u662f\u54c8\u5e0c\u540d\u79f0)\uff0c\u9700\u8981\u5982\u4e0b\uff1a</p> Text Only<pre><code>git checkout c1\n</code></pre> <p></p>"},{"location":"BaseSkill/gitSummary/#_1","title":"\u76f8\u5bf9\u5f15\u7528","text":"<p>\u5b9a\u4e49</p> <p>OK\uff0c\u5df2\u77e5\u53ef\u4ee5\u76f4\u63a5\u5c06head\u5207\u6362\u5230\u5bf9\u5e94\u54c8\u5e0c\u503c\u7684<code>commit</code>\u4e0a\u3002\u4f46\u662f\u54c8\u5e0c\u503c\u592a\u957f\u600e\u4e48\u529e\uff1f</p> <ul> <li>\u4f7f\u7528tab\u952e</li> <li>\u4f7f\u7528\u76f8\u5bf9\u5f15\u7528</li> </ul> <p>\u8fd9\u91cc\u53ef\u4ee5\u770b\u5230\uff0c\u5176\u5b9e\u5c31\u662f\u5728\u64cd\u4f5c\u6587\u4ef6\u7cfb\u7edf</p> <p>\u4f7f\u7528</p> <ul> <li><code>^</code> \u662f\u4e0a\u4e00\u7ea7</li> <li><code>~num</code>\u662f\u5411\u4e0a<code>num</code>\u7ea7</li> </ul> Text Only<pre><code>git checkout main^\n</code></pre> <p>\u4e0a\u8ff0\u547d\u4ee4\uff0c\u5c31\u662f\u5c06head\u79fb\u52a8\u5230main\u5206\u652f\u7684\u4e0a\u4e00\u4e2a\u7248\u672c(\u5176\u5b9e\u5c31\u662f*\u7684\u79fb\u52a8)</p> <p></p> <p>\u5e76\u4e14\u53ef\u4ee5\u5c06head\u4f5c\u4e3a\u5f15\u7528\u7684\u53c2\u7167(\u5c31\u548ccd ../../\u4e00\u4e2a\u9053\u7406)\u3002</p> <p>\u5982\u679c\u8981\u4e00\u6b21\u5411\u4e0a\u4e09\u6b65\uff0c\u5219\u5c31\u662f</p> Text Only<pre><code>git checkout head~3\n</code></pre> <p>\u5176\u4ed6</p> <p>\u8fd8\u6709\u4e00\u4e2a\u5f3a\u5236\u4fee\u6539\u5206\u652f\u4f4d\u7f6e\u3002</p> Text Only<pre><code>git branch -f main head~3\n</code></pre> <p>\u5f3a\u5236\u5c06main\u5206\u652f\u6307\u5411head\u5411\u4e0a\u7684\u7b2c\u4e09\u7ea7<code>parent commit</code>\u3002</p> <p></p>"},{"location":"BaseSkill/gitSummary/#reset-revert","title":"reset &amp; revert","text":"<p>\u64a4\u9500/\u56de\u9000\u53d8\u66f4\uff0c\u6709\u4e24\u79cd\u65b9\u5f0f:</p> <ul> <li>reset\uff1a\u7528\u4e8e\u672c\u5730\u64a4\u9500</li> <li>revert\uff1a\u7528\u4e8e\u8fdc\u7a0b\u64a4\u9500</li> </ul> <p>\u5b9a\u4e49</p> Text Only<pre><code>git reset HEAD^\n</code></pre> <p>\u5c31\u662f\u5c06\u5f53\u524d\u5206\u652f\u7684\u7248\u672c\u63a7\u5236\u56de\u9000\u5230\u4e0a\u4e00\u4e2a\u7248\u672c\u3002</p> Text Only<pre><code>git revert HEAD\n</code></pre> <p>\u5b83\u662f\u4e3a\u4e86\u64a4\u9500\uff0c\u5e76\u5c06\u5176\u5206\u4eab\u7ed9\u522b\u4eba\u3002</p> <p></p> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u4ecec2\u4f4d\u7f6e\u6267\u884c\u8fd9\u884c\u547d\u4ee4\uff0c\u5219\u4f1a\u591a\u51fa\u6765\u4e00\u4e2a\u4fee\u6539\u7248\u672c\uff0c\u5b83\u662f\u7528\u6765\u5c06\u72b6\u6001\u4fee\u6539\u4f1a<code>c1</code>\u7684\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u5b83\u662f<code>c2</code>\u7684\u53cd\u64cd\u4f5c\uff0c\u5c06\u72b6\u6001\u56de\u9000\u5230c1\u3002</p>"},{"location":"BaseSkill/gitSummary/#remote","title":"Remote","text":"<p>\u5c06\u4ee3\u7801\u8fdb\u884c\u8fdc\u7a0b\u7248\u672c\u63a7\u5236\uff0c\u6709\u4e24\u4e2a\u4f5c\u7528</p> <ul> <li>\u8fdb\u884c\u4ee3\u7801\u5907\u4efd\uff0c\u5373\u4f7f\u672c\u5730\u7684\u6570\u636e\u4e22\u5931\uff0c\u4e5f\u53ef\u4ee5\u4ece\u8fdc\u7aef\u4ed3\u5e93\u62ff\u56de\u4e22\u5931\u7684\u4ee3\u7801</li> <li>\u8fdc\u7a0b\u4ee3\u7801\u793e\u4ea4\u5316\uff0c\u4e5f\u5c31\u662f\u53ef\u4ee5\u8fdb\u884c\u591a\u4eba\u534f\u4f5c\u7ba1\u7406</li> </ul>"},{"location":"BaseSkill/gitSummary/#level0_1","title":"Level0","text":""},{"location":"BaseSkill/gitSummary/#clone-checkout","title":"clone &amp; checkout","text":"<p>\u5b9a\u4e49</p> <p><code>clone</code>\u5c31\u662f\u5c06\u8fdc\u7aef\u7684\u4ee3\u7801\u5728\u672c\u5730\u5b58\u50a8\u4e00\u4efd\u3002</p> <p>\u8fd9\u4e2a\u542b\u4e49\u5c31\u662f\u5728\u672c\u5730\u521b\u5efa\u4e00\u4e2a\u8fdc\u7a0b\u5206\u652f(\u5728\u6b64\u5904\u7684\u540d\u79f0\u662f<code>o/main</code>)\u3002\u8fdc\u7a0b\u5206\u652f\u53cd\u6620\u4e86\u8fdc\u7a0b\u4ed3\u5e93\u7684\u72b6\u6001\uff0c\u662f\u56e2\u961f\u5408\u4f5c\u5171\u4eab\u7ed3\u679c\u7684\u91cd\u8981\u8282\u70b9\u3002</p> <p>\u5207\u6362\u5230\u8fdc\u7a0b\u5206\u652f\u4e4b\u540e\uff0c\u4f1a\u81ea\u52a8\u8fdb\u5165\u5206\u79bbHEAD\u72b6\u6001\u3002</p> <p></p> <p>\u547d\u540d</p> <p>\u8fdc\u7aef\u5206\u652f\u7684\u547d\u540d\uff0c\u662f<code>remove-name/branch-name</code>\u3002</p> <p>\u5176\u4e2d\uff0c\u8fdc\u7aef\u5206\u652f\u540d\u79f0\uff0c\u9ed8\u8ba4\u662f<code>origin</code>\u3002</p> <p>\u4f7f\u7528</p> Text Only<pre><code>git checkout o/main;git commit\n</code></pre> <p></p> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u8fdb\u884c\u4e0a\u8ff0\u547d\u4ee4\u540e\uff0c\u7531\u4e8e\u662f\u5206\u79bbHEAD\u6a21\u5f0f\uff0c\u53ea\u6709\u672c\u5730\u7684HEAD\u79fb\u52a8\u4e86\uff0c\u8bb0\u5f55\u4e86\u53d8\u66f4\u3002</p>"},{"location":"BaseSkill/gitSummary/#fetch","title":"fetch","text":"<p>\u5b9a\u4e49</p> <p>\u548c\u8fdc\u7aef\u4ed3\u5e93\u7684\u4ea4\u4e92\uff0c\u53ef\u4ee5\u88ab\u5f52\u7eb3\u4e3a\u4e24\u90e8\u5206:</p> <ul> <li>\u63a8\u9001</li> <li>\u62c9\u53d6</li> </ul> <p>\u800c<code>fetch</code>\u5c31\u662f\u4e3a\u4e86\u5b8c\u6210\u62c9\u53d6\u7684\u73af\u8282\u3002</p> <p>\u5b83\u53ea\u662f\u5c06\u672c\u5730\u7684\u8fdc\u7a0b\u5206\u652f\u66f4\u65b0\uff0c\u5e76\u4e0d\u4f1a\u52a8\u672c\u5730\u7684\u4e3b\u5206\u652f\u3002</p> <p></p> Text Only<pre><code>git fetch xxx\u534f\u8bae\n</code></pre> <p>\u6267\u884c\u5b8c<code>git fetch</code>\u4e4b\u540e\uff0c\u5982\u4e0b:</p> <p></p> <p>\u8bed\u4e49\u5c31\u662f\u5c06\u8fdc\u7aef\u4ed3\u5e93\u7684\u53d8\u66f4\uff0c\u4e0b\u8f7d\u5230\u672c\u5730\uff0c\u5e76\u5e94\u7528\u5230\u672c\u5730\u5bf9\u5e94\u7740\u8fdc\u7aef\u7684<code>o/main</code>\u5206\u652f\u3002</p> <p>\u5176\u5b9e\u5c31\u662f: \u5c06\u672c\u5730\u4ed3\u5e93\u4e2d\u7684\u8fdc\u7a0b\u5206\u652f\u66f4\u65b0\u6210\u4e86\u8fdc\u7a0b\u4ed3\u5e93\u76f8\u5e94\u5206\u652f\u6700\u65b0\u7684\u72b6\u6001(\u901a\u4fe1\u65f6\u5019\u7684\u6700\u65b0\u72b6\u6001)\u3002</p> <p>git fetch\u5e76\u4e0d\u4f1a\u6539\u53d8\u672c\u5730\u4ed3\u5e93\u7684\u72b6\u6001\uff0c\u4e0d\u4f1a\u66f4\u65b0<code>main</code>\u5206\u652f\uff0c\u6700\u6839\u672c\u7684\uff0c\u5b83\u5c31\u6ca1\u6709\u4fee\u6539\u4e4b\u524d\u7684\u78c1\u76d8\u6587\u4ef6\u3002\u53ea\u662f\u5355\u7eaf\u7684\u5c06<code>commit</code>\u4e0b\u8f7d\u4e0b\u6765\u3002</p>"},{"location":"BaseSkill/gitSummary/#pull","title":"pull","text":"<p>\u5b9a\u4e49</p> <p>\u5b9e\u9645\u4e0a\uff0c\u5e38\u89c1\u7684\u5de5\u4f5c\u6d41\u7a0b\u662f:</p> <ol> <li>\u62c9\u53d6\u8fdc\u7aef\u6570\u636e\u5230\u672c\u5730(\u6b64\u65f6\u4f1a\u53ea\u4f1a\u66f4\u65b0\u8fdc\u7a0b\u5206\u652f\uff0c\u5e76\u6ca1\u6709\u5408\u5e76\u4e3b\u5206\u652f)</li> <li>\u5c06\u8fdc\u7a0b\u5206\u652f\u548c\u4e3b\u5206\u652f\u5408\u5e76</li> </ol> <p>Git\u5c06\u8fd9\u4e24\u8005\u5c01\u88c5\u4e3a\u4e00\u4e2a\u539f\u5b50\u64cd\u4f5c:<code>Pull</code></p> <p>\u7ad9\u5728\u5f53\u524d\u7684<code>main*</code>\u4e0a\uff0c\u5219</p> Text Only<pre><code>git fetch &amp; git merge o/main\n</code></pre> <p>\u7b49\u4ef7\u4e8e</p> Text Only<pre><code>git pull\n</code></pre> <p>\u4f7f\u7528</p> <p>\u5e38\u89c1\u7684\u4f7f\u7528\u65b9\u5f0f\u5982\u4e0b:</p> <ol> <li>\u5c06\u8fdc\u7aef\u4ee3\u7801<code>clone</code>\u4e0b\u6765</li> <li>\u8fdc\u7aef\u4ee3\u7801\u6709\u53d8\u66f4\uff08\u5176\u4ed6\u4eba\u4fee\u6539\uff09</li> <li>\u672c\u5730\u4ee3\u7801\u4e5f\u6709\u53d8\u66f4(\u672c\u5730commit)</li> <li><code>git pull</code> \u5c06\u8fdc\u7a0b\u5206\u652f\u66f4\u65b0\u4e3a\u6700\u65b0\uff0c\u7136\u540e\u548c\u672c\u5730main\u5206\u652f\u5408\u5e76</li> </ol>"},{"location":"BaseSkill/gitSummary/#push","title":"push","text":"<p>\u5b9a\u4e49</p> <p>\u8d1f\u8d23\u5c06\u672c\u5730\u53d8\u66f4\u4e0a\u4f20\u5230\u8fdc\u7aef\u3002</p> <p>\u4f7f\u7528</p> <p></p> <p>\u5982\u679c\u672c\u5730\u662fc1 -&gt; c2\uff0c\u800c\u8fdc\u7a0b\u4ed3\u5e93\u662fc1\uff0c\u5219\u6267\u884c\u5982\u4e0b:</p> Text Only<pre><code>git push\n</code></pre> <p>\u7ed3\u679c\u4e3a\u4e0a\u56fe\u6240\u793a\uff0c\u8fdc\u7aef\u5206\u652f\u66f4\u65b0\uff0c\u540c\u65f6\u66f4\u65b0\u672c\u5730\u8fdc\u7a0b\u5206\u652f\u548c\u6b64\u65f6\u7684\u8fdc\u7aef\u5206\u652f\u4e00\u81f4\u3002</p>"},{"location":"BaseSkill/gitSummary/#rebase-push","title":"rebase  &amp; push","text":"<p>\u8fd9\u91cc\u5c31\u662f\u4e00\u4e2a\u5e38\u89c1\u7684\u573a\u666f\uff0c\u5e38\u89c1\u7684\u6d3b\u8dc3\u9879\u76ee\u7684\u5f00\u6e90\u8d21\u732e\uff0c\u901a\u5e38\u4f60\u53ef\u80fd\u521aclone\u5b8c\u6bd5\uff0c\u5c31\u6709\u4eba\u5c06\u8fdc\u7a0b\u4ed3\u5e93\u4fee\u6539\u4e86\uff0c\u8fd9\u65f6\u5019\u4f60\u7684\u672c\u5730\u4ee3\u7801\uff0c\u548c\u8fdc\u7aef\u4ee3\u7801\u5c31\u4f1a\u6709\u4ea4\u53c9<code>diff</code>\uff0c\u5219\u4e0d\u80fd\u4f7f\u7528push\u3002</p> <p>rebase &amp; push</p> Text Only<pre><code>git fetch;git rebase o/main;git push\n</code></pre> <p></p> <p>\u672a\u4fee\u6539\u524d\u5982\u4e0a\u56fe\uff0c\u6709\u4ea4\u53c9diff\u3002</p> <p>\u4fee\u6539\u5b8c\u6bd5\u5982\u4e0b\u56fe:</p> <p></p> <p>\u800cgit\u540c\u6837\u63d0\u4f9b\u4e86\u539f\u5b50\u64cd\u4f5c:</p> <ol> <li>git fetch;git rebase o/main ;git push</li> <li>git pull --rebase ; git push</li> </ol> <p>\u4e24\u8005\u5b8c\u5168\u7b49\u4ef7</p>"},{"location":"BaseSkill/gitSummary/#push-feature","title":"push feature","text":"<p>\u573a\u666f</p> <p>\u5c31\u662f\u5e38\u89c4\u60c5\u51b5\uff0c\u5171\u4eab\u4ed3\u5e93\u7684<code>main</code>\u5206\u652f\u88ab\u9501\u4f4f\u4e86\uff0c\u53ea\u80fd\u8ba9\u7ba1\u7406\u5458\u901a\u8fc7<code>Pull Request</code>\u7684\u65b9\u5f0f\u8fdb\u884c\u5408\u5e76\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u4f60\u4e0d\u80fd\u76f4\u63a5push\u6765\u66f4\u65b0<code>Main</code>\u5206\u652f\u4e86\u3002</p> <p>\u89e3\u51b3\u529e\u6cd5</p> <p>\u521b\u5efa\u4e00\u4e2a\u5206\u652f<code>feature</code>,\u63a8\u9001\u5230\u8fdc\u7a0b\u670d\u52a1\u5668\uff0c\u7136\u540e\u5c06\u672c\u5730\u7684<code>main</code>\u5206\u652f\u548c\u8fdc\u7a0b\u670d\u52a1\u5668\u4fdd\u6301\u4e00\u81f4\u3002</p> Text Only<pre><code>git checkout  -b feature c2\ngit push origin feature\ngit checkout main;git reset o/main\ngit checkout feature\n</code></pre>"},{"location":"BaseSkill/gitSummary/#_2","title":"\u5e38\u89c1\u5de5\u4f5c\u6d41\u7a0b","text":""},{"location":"BaseSkill/gitSummary/#_3","title":"\u5f00\u6e90\u8d21\u732e","text":"<p>\u4ee3\u7801\u63d0\u4ea4\u6307\u5357 - Apache Doris</p> <p>\u6ce8\u610fgit add\u547d\u4ee4:</p> <ul> <li>git add .   \u6240\u6709\u4fee\u6539\u6216\u8005\u65b0\u589e\uff0c\u5220\u9664</li> <li>git add -u \u6240\u6709\u4fee\u6539</li> <li>git add -p \u4e92\u52a8\u5f0f\u9009\u62e9</li> </ul> <p>\u5173\u4e8e:<code>local</code>,<code>origin</code>,<code>upstream</code>\uff1a</p> <p>git \u672c\u5730\u4ed3\u6dfb\u52a0\u591a\u4e2a\u8fdc\u7aef\u4ed3\u5e93_git remote add upstream-CSDN\u535a\u5ba2</p> <p>Git\u5b9e\u73b0\u672c\u5730\u5e93\u5173\u8054\u591a\u4e2a\u8fdc\u7a0b\u5e93 - aJream - \u535a\u5ba2\u56ed (cnblogs.com)</p>"},{"location":"BaseSkill/mac_learn/","title":"\u81ea\u7528Mac\u5165\u624b\u6587\u7ae0\u6307\u5357\u5408\u96c6","text":"<p>Mac\u5b98\u65b9\u6280\u672f\u652f\u6301\u6587\u6863</p>"},{"location":"BaseSkill/mac_learn/#_1","title":"\u5feb\u901f\u4e0a\u624b","text":"<p>\u901a\u7528 Mac\u5feb\u901f\u4e0a\u624b</p> <p>\u89e6\u63a7\u677f \u89e6\u63a7\u677f</p> <p>\u5feb\u6377\u952e Mac\u5feb\u6377\u952e</p>"},{"location":"BaseSkill/mac_learn/#_2","title":"\u914d\u7f6e\u73af\u5883","text":"<p>mac\u662funix-like\u73af\u5883</p> <p>idea</p> <p>\u5b98\u7f51</p> <p>\u8bbe\u7f6e \u653e\u5927\u7f29\u5c0f</p> <p>idea\u5e38\u89c1\u63d2\u4ef6</p> <ol> <li>JavaDoc</li> <li>maven-search</li> <li>Scala</li> <li>Statistic</li> <li>\u6c49\u5316\u5305</li> </ol> <p>\u5176\u4ed6\u5e38\u89c1\u7684\u90fd\u662f\u6346\u7ed1\u7684\uff0c\u65e0\u9700\u81ea\u5df1\u4e0b\u8f7d</p> <p>git</p> <p>\u9996\u5148<code>git</code>\u547d\u4ee4\u67e5\u770b\u662f\u5426\u5b89\u88c5\uff0c\u5982\u679c\u6ca1\u6709\u5b89\u88c5\uff0c\u5219\u901a\u8fc7<code>brew install git</code>\u5b89\u88c5\u3002</p> <p>\u5b89\u88c5\u5b8c\u6bd5\u914d\u7f6egit:</p> <ol> <li>git config --global user.name \"Your Name\"</li> <li>git config --global user.email \"email@example.com\"</li> </ol> <p>vscode</p> <p>vscode\u5b98\u7f51</p> <p>\u8bbe\u7f6e\u81ea\u52a8\u4fdd\u5b58\uff0c\u653e\u5927\u7f29\u5c0f</p> <p>vscode\u5e38\u7528\u63d2\u4ef6</p> <ol> <li>Chinese (Simplified Chinese)</li> <li>Dark Green Jungle theme</li> <li>Docker</li> <li>Markdown all in one</li> <li>markdownlint</li> <li>Remote - SSH</li> <li>Todo Tree</li> </ol>"},{"location":"BaseSkill/prepare/","title":"\u79cb\u62db\u590d\u4e60","text":""},{"location":"BaseSkill/prepare/#_2","title":"\u5237\u9898","text":"<ul> <li>leetcode</li> <li>SQL\u5237\u9898</li> <li>\u725b\u5ba2ACM\u6a21\u5f0f</li> </ul>"},{"location":"BaseSkill/prepare/#_3","title":"\u516b\u80a1","text":""},{"location":"BaseSkill/prepare/#_4","title":"\u57fa\u7840","text":"<ul> <li>\u64cd\u4f5c\u7cfb\u7edf(\u64cd\u4f5c\u7cfb\u7edf\u5bfc\u8bba)\uff0c\u8ba1\u7b97\u673a\u7f51\u7edc(\u8ba1\u7b97\u673a\u7f51\u7edc\u7b2c8\u7248)</li> <li>\u8bed\u8a00\u57fa\u7840\uff1aJVM(\u6df1\u5165\u7406\u89e3Java\u865a\u62df\u673a)\uff0cSQL\u5185\u6838(SparkSQL\u5185\u6838\u5256\u6790)</li> <li>\u7406\u8bba\uff1a\u6570\u4ed3\u7406\u8bba(\u6570\u636e\u661f\u6cb3)</li> </ul>"},{"location":"BaseSkill/prepare/#_5","title":"\u6570\u636e\u7ec4\u4ef6","text":"<ul> <li>\u8ba1\u7b97\u5f15\u64ce: Spark\uff0cFlink\u3002\u5176\u4e2dSpark\u770b\u8f6e\u5b50\u9879\u76ee\uff0cFlink\u76f4\u63a5debug\u6e90\u7801</li> <li>OLAP\uff1aDoris</li> <li>OLTP: MySQL\uff0c\u96c6\u4e2d\u5728\u5b58\u50a8\u5f15\u64ce\uff0c\u4e8b\u52a1\u7684\u9694\u79bb\u7ea7\u522b\u7684\u5b9e\u73b0\u4e24\u90e8\u5206</li> <li>\u6d88\u606f\u961f\u5217\uff1aKafka</li> <li>KV\u5b58\u50a8\uff1alevelDB\u6e90\u7801\uff0c\u4e3b\u8981\u5173\u6ce8LSM Tree\u5b58\u50a8\u5f15\u64ce\u3002</li> <li>\u56fe\u6570\u636e\u5e93: NebulaGraph</li> </ul>"},{"location":"BaseSkill/prepare/#_6","title":"\u5f00\u53d1","text":"<p>\u540e\u7aef\u7ec4\u4ef6 - Python Flask - SpringBoot - \u5fae\u670d\u52a1\u4f53\u7cfb</p> <p>\u901a\u7528\u7406\u8bba   - \u4e91\u8ba1\u7b97\u7cfb\u5217   - \u8bbe\u8ba1\u6a21\u5f0f   - \u5206\u5e03\u5f0f\u5171\u8bc6\u7b97\u6cd5</p>"},{"location":"BaseSkill/prepare/#_7","title":"\u9879\u76ee","text":"<ul> <li>mmt\u5b9e\u4e60</li> <li>\u5f00\u6e90\u4e4b\u590f</li> <li>Sparklet</li> <li>Flink \u52a8\u6001CEP</li> </ul>"},{"location":"BaseSkill/scala-reflection/","title":"Scala Reflection","text":"<p>\u53cd\u5c04\u5206\u4e3a\u7f16\u8bd1\u65f6\u53cd\u5c04\u548c\u8fd0\u884c\u65f6\u53cd\u5c04\u3002\u7f16\u8bd1\u65f6\u53cd\u5c04\u62e5\u6709\u4fee\u6539AST Tree\u7684\u80fd\u529b\uff0c\u4e00\u822c\u7528\u4e0d\u5230\u3002\u8fd9\u91cc\u53ea\u5173\u6ce8\u8fd0\u884c\u65f6\u53cd\u5c04\u3002</p> <p>\u6982\u89c8 | Reflection | Scala Documentation (scala-lang.org)</p> <p>\u8fd0\u884c\u65f6\u53cd\u5c04\u6307\u7684\u662f\u5728\u8fd0\u884c\u65f6\u5bf9\u7c7b\u578b\u6216\u8005\u5bf9\u8c61\u5b9e\u4f8b\u7684\u64cd\u4f5c\uff0c\u6709\u5982\u4e0b\u4e09\u79cd\uff1a</p> <ul> <li>\u89e3\u6790\u5305\u62ec\u6cdb\u578b\u5728\u5185\u7684\u5404\u79cd\u5bf9\u8c61\u7684\u7c7b\u578b</li> <li>\u5b9e\u4f8b\u5316\u4e00\u4e2a\u5bf9\u8c61</li> <li>\u80fd\u53bb\u8bbf\u95ee\u6216\u8005\u8c03\u7528\u5bf9\u8c61\u4e2d\u7684\u6210\u5458</li> </ul>"},{"location":"BaseSkill/scala-reflection/#_1","title":"\u4e09\u79cd\u64cd\u4f5c","text":""},{"location":"BaseSkill/scala-reflection/#_2","title":"\u89e3\u6790\u7c7b\u578b","text":"<p>\u5b98\u7f51\u7ed9\u7684\u4f8b\u5b50\u6838\u5fc3\u662f\uff1a<code>def getTypeTag[T:ru.TypeTag](obj:T) = ru.typeTag[T]</code>\uff0c\u5b83\u5c06<code>T</code>\u4fe1\u606f\u4ece\u4ee5<code>TypeTag</code>\u5f62\u5f0f\u4ece\u7f16\u8bd1\u65f6\u5e26\u5230\u8fd0\u884c\u65f6\uff0c\u53ea\u9700\u8981\u5c06\u5bf9\u8c61\u4f20\u5165\uff0c\u5373\u53ef\u5728\u8fd0\u884c\u65f6\u83b7\u53d6\u5176\u771f\u5b9e\u7c7b\u578b\u3002\u5e76\u53ef\u4ee5\u901a\u8fc7<code>getTypeTag(obj).tpe.decls</code>\u83b7\u53d6\u5168\u91cf\u7c7b\u578b\u4fe1\u606f\uff0c\u6bd4\u5982\u6784\u9020\u51fd\u6570\uff0c\u4f34\u751f\u5bf9\u8c61\uff0c\u65b9\u6cd5\u5b9a\u4e49\u3002</p>"},{"location":"BaseSkill/scala-reflection/#_3","title":"\u5b9e\u4f8b\u6784\u5efa","text":"<p>\u8fd9\u91cc\u4f7f\u7528\u7684\u662f\u8c03\u7528\u5668\u955c\u50cf\uff0c\u5176\u6700\u7ec8\u66b4\u9732\u7ed9\u7528\u6237\u6784\u9020\u5668\u7528\u4e8e\u6784\u9020\u5b9e\u4f8b\u3002</p> <p>\u7b2c\u4e00\u6b65\uff0c\u4f7f\u7528<code>val m = ru.runtimeMirror(getClass.getClassLoader)</code>\uff0c\u5c06\u6240\u6709\u7684\u7c7b\u5168\u90e8\u52a0\u8f7d(\u4e0d\u6b62\u662f\u67d0\u4e2a\u7c7b)\u3002</p> <p>\u7b2c\u4e8c\u6b65\uff0c\u4f7f\u7528<code>val classPerson = ru.typeOf[Person].typeSymbol.asClass</code>\uff0c\u5c06Person\u7684\u7c7b\u578b\u4fe1\u606f\u83b7\u53d6\u5230\uff0c\u5e76\u62ff\u5230\u7c7b\u578b\u7684\u5b9a\u4e49Symbol\uff0c\u518d\u8f6c\u6362\u4e3aClassSymbol\uff0c\u800c\u4e0d\u662f\u5176\u4ed6\u7c7b\u578b\u7b26\u53f7\u3002</p> <p>\u9700\u8981\u6ce8\u610fru.typeOf[C.type].termSymbol.asModule \u548cMirror.staticModule(\"pkg.C\") \u7684\u4e0d\u540c\uff0c\u524d\u8005\u9700\u8981\u7f16\u8bd1\u65f6\u6709C\u7684\u4f34\u751f\u5bf9\u8c61\uff0c\u800c\u540e\u8005\u4e0d\u9700\u8981\uff0c\u53ea\u9700\u8981\u5168\u7c7b\u540d\u5b58\u5728\u5c31\u53ef\u4ee5\u3002\u6240\u4ee5\u5982\u679c\u5b9e\u73b0\u63d2\u4ef6\u7cfb\u7edf\uff0c\u4e00\u822c\u9700\u8981\u4f7f\u7528\u540e\u9762\u7684\u4f8b\u5b50\u3002</p> <p>\u7b2c\u4e09\u6b65\uff0c\u4f7f\u7528<code>val cm = m.reflectClass(classPerson)</code>\uff0c\u4f7f\u7528\u8fd0\u884c\u65f6\u955c\u50cf\uff0c\u4f20\u5165\u67d0\u4e2a\u7c7b\u7684ClassSymbol\uff0c\u5219\u53ef\u4ee5\u5f97\u5230\u8fd9\u4e2a\u7c7b\u7684ClassMirror\u3002\u6b64\u955c\u50cf\u53ef\u4ee5\u7528\u4e8e\u83b7\u53d6\u6784\u9020\u65b9\u6cd5\uff0c\u521b\u5efa\u5b9e\u4f8b\uff0c\u8bbf\u95ee\u5b57\u6bb5\u7b49\u3002</p> <p>\u7b2c\u56db\u6b65\uff0c\u4f7f\u7528<code>val ctor ru.typeOf[Person].decl(ru.termNames.CONSTRUCTOR).asMethod</code>\uff0c\u5c06\u6784\u9020\u5668Symbol\u62ff\u5230\uff0c\u7136\u540e\u901a\u8fc7<code>val ctorm = cm.reflectConstructor(ctor)</code>\u62ff\u5230\u8c03\u7528\u5668\u955c\u50cf\u3002\u8fd9\u91cc\u7684\u8c03\u7528\u5668\u955c\u50cf\u53ef\u4ee5\u76f4\u63a5\u4f20\u5165\u53c2\u6570\uff0c\u5f97\u5230\u5bf9\u5e94\u5b9e\u4f8b\uff0c\u6bd4\u5982<code>val p = ctorm(\"Mike\")</code>\u3002</p>"},{"location":"BaseSkill/scala-reflection/#_4","title":"\u8bbf\u95ee\u8fd0\u884c\u65f6\u7684\u6210\u5458","text":"<p>\u8fd9\u91cc\u4f7f\u7528\u7684\u540c\u6837\u662f\u8c03\u7528\u5668\u955c\u50cf\u3002</p> <p>\u548c\u5b9e\u4f8b\u6784\u5efa\u4e00\u6837\uff0c\u540c\u6837\u4f7f\u7528\u7684\u662f\u8c03\u7528\u5668\u955c\u50cf\u3002</p> <p>\u6d41\u7a0b\u540c\u6837\u7c7b\u4f3c\uff1a<code>m -&gt; Term Symbol -&gt; Term m- &gt; Field</code></p>"},{"location":"BaseSkill/scala-reflection/#_5","title":"\u6838\u5fc3\u6982\u5ff5","text":""},{"location":"BaseSkill/scala-reflection/#universe","title":"universe","text":"<p>\u53cd\u5c04\u7684\u6839\u636e\u65f6\u673a\u4e0d\u540c\uff0c\u5206\u4e3a\u7f16\u8bd1\u65f6\u53cd\u5c04\u548c\u8fd0\u884c\u65f6\u53cd\u5c04\u3002\u5176\u901a\u8fc7<code>scala.reflect.runtime.universe</code>\u5305\u4e2d\u7684\u6210\u5458\u6765\u533a\u522b\uff0c\u4e00\u822c\u4f7f\u7528\u7684\u662fruntime\u90e8\u5206\u7684\u3002</p>"},{"location":"BaseSkill/scala-reflection/#mirror","title":"Mirror","text":"<p>Mirror\uff0c\u5206\u4e3a\u7c7b\u52a0\u8f7d\u5668\u955c\u50cf\uff0c\u548c\u8c03\u7528\u8005\u955c\u50cf\u3002\u4ece\u524d\u8005\u53ef\u4ee5\u83b7\u53d6\u540e\u8005\u3002</p> <ul> <li>\u7c7b\u52a0\u8f7d\u5668\u955c\u50cf\uff1a\u7528\u4e8e\u5c06\u540d\u79f0\u8f6c\u6362\u4e3aSymbol</li> <li>\u8c03\u7528\u8005\u955c\u50cf\uff0c\u901a\u8fc7Symbol\u5f97\u5230\u8c03\u7528\u8005\u955c\u50cf\uff0c\u7528\u4e8e\u5b9e\u73b0\u771f\u6b63\u7684\u53cd\u5c04\u8c03\u7528\u9700\u6c42\u3002</li> </ul>"},{"location":"BaseSkill/scala-scopt/","title":"Scopt\u5e93","text":""},{"location":"BaseSkill/scala-scopt/#_1","title":"\u5feb\u901f\u5165\u95e8","text":""},{"location":"BaseSkill/scala-scopt/#_2","title":"\u5b9a\u4e49","text":"<p>scopt\u662f\u4e00\u4e2ascala \u89e3\u6790\u4e0e\u5904\u7406\u547d\u4ee4\u884c\u53c2\u6570\u7684\u5de5\u5177\u3002\u5b83\u63d0\u4f9b\u4e00\u4e2a\u7b80\u7075\u6d3b\u7684\u63a5\u53e3\u6765\u89e3\u6790\u548c\u5b9a\u4e49\u547d\u4ee4\u884c\u9009\u9879\u3002\u5176\u4f7f\u7528DSL\u6765\u5b9a\u4e49\u547d\u4ee4\u884c\u9009\u9879\uff0c\u91cd\u70b9\u662f\u5b66\u4f1a\u7528\u6cd5\u800c\u4e0d\u662f\u5e95\u5c42\u539f\u7406\u3002</p>"},{"location":"BaseSkill/scala-scopt/#_3","title":"\u7528\u6cd5","text":"<p>\u7b2c\u4e00\u6b65\uff0c\u5b9a\u4e49\u914d\u7f6e\u7c7b</p> Java<pre><code>case class Config(\n    input: String = \"\",\n    output: String = \"\",\n    verbose: Boolean = false,\n    count: Int = 0\n)\n</code></pre> <p>\u914d\u7f6e\u7c7b\u7528\u4e8e\u5b58\u50a8\u89e3\u6790\u547d\u4ee4\u884c\u53c2\u6570\u4e4b\u540e\u7684\u7ed3\u679c\uff0c\u5305\u542b\u9ed8\u8ba4\u503c\u7684\u5b57\u6bb5\u662f\u53ef\u9009\u7684\u3002</p> <p>\u7b2c\u4e8c\u6b65\uff0c\u5b9a\u4e49\u89e3\u6790\u5668(\u8fd4\u56de\u503c\u5c31\u662fparser)</p> Java<pre><code>val builder = OParser.builder[Config]\nval parser = {\n  import builder._\n  OParser.sequence(\n    programName(\"my-program\"),\n    head(\"my-program\", \"1.0\"),\n\n    opt[String]('i', \"input\")\n      .valueName(\"&lt;file&gt;\")\n      .action((x, c) =&gt; c.copy(input = x))\n      .text(\"Input file path\"),\n\n    opt[String]('o', \"output\")\n      .valueName(\"&lt;file&gt;\")\n      .action((x, c) =&gt; c.copy(output = x))\n      .text(\"Output file path\"),\n\n    opt[Unit]('v', \"verbose\")\n      .action((_, c) =&gt; c.copy(verbose = true))\n      .text(\"Enable verbose mode\"),\n\n    opt[Int](\"count\")\n      .valueName(\"&lt;number&gt;\")\n      .action((x, c) =&gt; c.copy(count = x))\n      .text(\"An integer value\")\n  )\n}\n</code></pre> <p>\u5176\u4e2d</p> <ul> <li><code>opt[String](i,\"input\")</code>\u5b9a\u4e49\u4e00\u4e2a\u5b57\u7b26\u4e32\u7c7b\u578b\u7684\u53ef\u9009\u53c2\u6570(\u77ed\u9009\u9879\u6216\u8005\u957f\u9009\u9879)\uff1a-i\uff0c\u6216\u8005\u662f--input</li> <li><code>valueName(\"&lt;file&gt;\")</code>\u662f\u663e\u793a\u5728\u5e2e\u52a9\u4fe1\u606f\u7684\u53c2\u6570\u5360\u4f4d\u7b26</li> <li><code>action((x,c) =&gt; c.copy(input = x))</code> \u5f53\u53c2\u6570x\u51fa\u73b0\u7684\u65f6\u5019\uff0c\u914d\u7f6ec\u5b9e\u4f8b\u5e94\u8be5\u5982\u4f55\u66f4\u65b0</li> <li><code>text(\"Input file path\")</code>\u5e2e\u52a9\u4fe1\u606f\u4e2d\u5bf9\u8be5\u53c2\u6570\u7684\u63cf\u8ff0</li> <li>\u5982\u679c\u6b64\u53c2\u6570\u662f\u5fc5\u987b\u7684\uff0c\u5219\u9700\u8981\u52a0\u4e0a<code>.required()</code></li> <li>\u53ef\u4ee5\u901a\u8fc7\u5982\u4e0b\u65b9\u5f0f\u8fdb\u884c\u6821\u9a8c\uff1a<code>.validate(x =&gt; if (x.nonEmpty) success else failure(\"Value must not be empty\"))</code></li> </ul> <p>\u7b2c\u4e09\u6b65\uff0c\u4f20\u5165\u89e3\u6790\u5668\uff0c\u547d\u4ee4\u884c\u53c2\u6570\uff0c\u7a7a\u914d\u7f6e\u5b9e\u4f8b\uff0c\u5f97\u5230\u89e3\u6790\u5b8c\u6bd5\u7684\u5b9e\u9645\u914d\u7f6e\u5b9e\u4f8b</p> <p>\u8fd9\u91cc<code>Oparser.parse(parser,args,config)</code>\uff0c\u6216\u8005\u662f<code>parser.parse(args,config)</code>\u5747\u53ef</p> Java<pre><code>    OParser.parse(parser, args, Config()) match {\n      case Some(config) =&gt;\n        if (config.verbose) {\n          println(s\"Input: ${config.input}\")\n          println(s\"Output: ${config.output}\")\n          println(s\"Count: ${config.count}\")\n        }\n      case _ =&gt;\n        // \u9519\u8bef\u53d1\u751f\u6216 --help \u88ab\u8c03\u7528\n    }\n</code></pre>"},{"location":"BaseSkill/store/","title":"\u64cd\u4f5c\u7cfb\u7edf","text":""},{"location":"BaseSkill/store/#_2","title":"\u865a\u62df\u5316","text":""},{"location":"BaseSkill/store/#why","title":"why","text":"<p>\u8fdb\u5165\u5185\u6838\u6001\u7a76\u7adf\u662f\u4ec0\u4e48\u610f\u601d\uff1f - \u77e5\u4e4e (zhihu.com)</p> <p>\u8ba1\u7b97\u673a\u72b6\u6001\u7684\u7ef4\u62a4</p> <p>\u8ba1\u7b97\u673a\u7684\u57fa\u672c\u7ed3\u6784\uff1a<code>\u8fd0\u7b97\u5668\uff0c\u63a7\u5236\u5668\uff0c\u5b58\u50a8\u5668\uff0c\u8f93\u5165\uff0c\u8f93\u51fa</code></p> <p>\u800c\u5176\u4e2d\u6709\u72b6\u6001\u7684\u90e8\u5206\u5c31\u662f\u63a7\u5236\u5668\u548c\u5b58\u50a8\u5668\uff0c\u800c\u63a7\u5236\u5668\u7684\u72b6\u6001\uff0c\u53c8\u6765\u81ea\u4e8e\u5bc4\u5b58\u5668\u3002</p> <p>\u6240\u4ee5\u6574\u4e2a\u8ba1\u7b97\u673a\u7cfb\u7edf\u7684\u72b6\u6001\u5168\u90e8\u7531<code>\u5b58\u50a8\u5668 + \u5bc4\u5b58\u5668</code>\u6765\u7ef4\u62a4\u3002</p> <p>\u4ece<code>\u5b89\u5168\u6027</code>\u8003\u8651\u6765\u8bf4\uff1a\u5982\u679c\u4efb\u610f\u7a0b\u5e8f\u90fd\u53ef\u4ee5\u5b8c\u5168\u63a7\u5236<code>\u4e3b\u5b58\u548c\u5bc4\u5b58\u5668</code>\uff0c\u5219\u5b83\u80fd\u6539\u53d8\u7cfb\u7edf\u7684\u4efb\u4f55\u90e8\u5206\uff0c\u5305\u62ec<code>\u5165\u4fb5OS\u5185\u6838</code>\u3002</p> <p>\u4ece<code>\u53ef\u7528\u6027</code>\u8003\u8651\u6765\u8bf4\uff0c\u591a\u4efb\u52a1\u60c5\u51b5\u66f4\u52a0\u590d\u6742\uff0c\u6bd4\u5982\u5185\u5b58\u5730\u5740\u51b2\u7a81\uff0c\u5916\u8bbe\u8bfb\u53d6\u51b2\u7a81\uff0c\u5b58\u5728\u4f5c\u6076\u4efb\u52a1\u7b49\u7b49\u60c5\u51b5\u3002</p> <p>\u6240\u4ee5\u9700\u8981\u4ece\u80fd\u591f\u6539\u53d8\u72b6\u6001\u7684<code>CPU</code>\uff0c\u4ee5\u53ca\u7ef4\u62a4\u72b6\u6001\u7684<code>\u5b58\u50a8\u5668</code>\u5165\u624b\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002</p> <p>CPU\u72b6\u6001</p> <p>CPU\u88ab\u8bbe\u8ba1\u4e3a\u4e24\u4e2a\u72b6\u6001\uff0c\u5206\u522b\u662f\u5185\u6838\u6001(\u7279\u6743\u6a21\u5f0f)\u548c\u7528\u6237\u6001(\u7528\u6237\u6a21\u5f0f)\u3002\u5207\u6362\u5230\u5185\u6838\u6001\u7684CPU\u53ef\u4ee5\u6267\u884c\u4efb\u610f\u6307\u4ee4\uff0c\u800c\u5207\u6362\u5230\u7528\u6237\u6001\u7684CPU\u53ea\u80fd\u6267\u884c\u90e8\u5206\u6307\u4ee4\u3002</p> <p>\u5185\u5b58\u8bbf\u95ee\u9650\u5236</p> <p>CPU\u5f15\u5165<code>MMU</code>\uff0c\u4e5f\u5c31\u662f\u5185\u5b58\u7ba1\u7406\u5355\u5143\u7ec4\u4ef6\uff0c\u6765\u5b9e\u73b0\u5185\u5b58\u8bbf\u95ee\u9650\u5236\u3002<code>CPU</code>\u5728\u7528\u6237\u6a21\u5f0f\u4e0b\uff0c\u6240\u6709\u5730\u5740\u8bbf\u95ee\u5747\u7ecf\u8fc7<code>MMU</code>\u3002\u800c\u5728<code>\u7279\u6743\u6a21\u5f0f</code>\u4e0b\u6240\u6709\u5730\u5740\u8bbf\u95ee\u5747\u7ed5\u8fc7<code>MMU</code>\u3002</p> <p>\u5177\u4f53\u6765\u8bf4\uff0c\u91c7\u7528\u865a\u62df\u5730\u5740\u7a7a\u95f4\u6280\u672f\u6765\u5b9e\u73b0\u5185\u5b58\u8bbf\u95ee\u9650\u5236\uff0c\u5176\u901a\u8fc7\u9875\u8868\u5b9e\u73b0\u4e86\u4ece\u865a\u62df\u5730\u5740\u5230\u7269\u7406\u5730\u5740\u7684\u8f6c\u6362(\u4ee5\u9875(4KB)\u4e3a\u6700\u5c0f\u7c92\u5ea6)\u3002</p> <p>\u5982\u679c\u6709\u8fdb\u7a0b\u5207\u6362\uff0c\u800c\u9875\u8868\u4f1a\u4f5c\u4e3a\u4e0a\u4e0b\u6587\u7684\u4e00\u90e8\u5206\u8fdb\u884c\u5b58\u50a8\uff0c\u5e76\u4e14\u53ef\u4ee5\u5728\u91cd\u65b0\u52a0\u8f7d\u7684\u65f6\u5019\u63d0\u524d\u7531<code>OS</code>\u8fdb\u884c\u4fee\u6539\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u5b9e\u73b0\u4e86\u5185\u5b58\u7684\u8bbf\u95ee\u9650\u5236\u3002</p>"},{"location":"BaseSkill/store/#_3","title":"\u5e76\u53d1","text":""},{"location":"BaseSkill/store/#lwp","title":"LWP","text":"<p>\u8f7b\u91cf\u7ea7\u8fdb\u7a0b - \u7ef4\u57fa\u767e\u79d1\uff0c\u81ea\u7531\u7684\u767e\u79d1\u5168\u4e66 (wikipedia.org)</p> <p>\u4f55\u65f6\u4f7f\u7528clone()\u548cfork\u800c\u4e0d\u662fpthreads\uff1f linux - Dev59</p> <p>\u8fd9\u91cc\u53ea\u9488\u5bf9<code>Linux</code>\u3002</p> <p>Linux\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u7684\u8c03\u5ea6\u53ea\u80fd\u901a\u8fc7\u8fdb\u7a0b\u6765\u5b9e\u73b0\u3002</p> <p>\u901a\u5e38\uff0c\u7528\u6237\u7f16\u7a0b\u7684\u65f6\u5019\uff0c\u5982\u679c\u8981\u521b\u5efa\u8fdb\u7a0b\uff0c\u4f1a\u4f7f\u7528<code>\u7cfb\u7edf\u8c03\u7528fork</code>\u3002\u8981\u521b\u5efa\u7ebf\u7a0b\uff0c\u5219\u4f7f\u7528<code>\u7528\u6237\u5e93\u51fd\u6570pthread_create</code>\u3002\u800c\u5728\u5f53\u524d\u7684<code>Linux</code>\u5b9e\u73b0\u4e2d\uff0c\u4e24\u8005\u6700\u7ec8\u90fd\u662f\u901a\u8fc7<code>sys_clone</code>\u7cfb\u7edf\u8c03\u7528\u6765\u521b\u5efa\u7684\u3002</p> <p><code>sys_clone</code>\u6839\u636e\u4f20\u5165\u7684\u53c2\u6570\u4e0d\u540c\uff0c\u4e5f\u5c31\u662f\u8d44\u6e90\u9694\u79bb\u8303\u56f4\u4e0d\u7528\uff0c\u53ef\u4ee5\u521b\u5efa\u4efb\u610f\u7c92\u5ea6\u7684\u8f7b\u91cf\u7ea7\u7ebf\u7a0b\u3002\u6700\u5e38\u89c1\u7684\u5c31\u662f<code>\u8fdb\u7a0b</code>\u4ee5\u53ca<code>\u7ebf\u7a0b\u7c92\u5ea6\u7684\u8f7b\u91cf\u7ea7\u8fdb\u7a0b</code>\uff0c\u5f53\u7136\u6211\u4eec\u53ef\u4ee5\u521b\u5efa\u5176\u4ed6\u4e0d\u540c\u7c92\u5ea6\u7684\u8c03\u5ea6\u5b9e\u4f53\u6765\u5b9e\u73b0\u81ea\u5df1\u60f3\u8981\u7684\u8c03\u5ea6\u529f\u80fd\uff0c\u6bd4\u5982\u53ea\u4ece<code>\u7236\u8fdb\u7a0b</code>\u7ee7\u627f<code>fd</code>\u8d44\u6e90\u7684\u8f7b\u91cf\u7ea7\u8fdb\u7a0b\u3002</p> <p>\u5728\u521b\u5efa\u7528\u6237\u7ebf\u7a0b\uff0c\u4e5f\u5c31\u662f\u8c03\u7528<code>pthread_create</code>\u5e93\u51fd\u6570\u7684\u65f6\u5019\uff0c\u4e00\u4e2a\u7528\u6237\u7ebf\u7a0b\u5c31\u5bf9\u5e94\u7740<code>\u4e00\u4e2a\u7ebf\u7a0b\u7c92\u5ea6\u7684LWP</code>\u3002</p> <p>\u800c\u7528\u6237\u6001\u7684\u591a\u7ebf\u7a0b\u5e76\u53d1\uff0c\u53ef\u4ee5\u8ba4\u4e3a\u5bf9\u5e94\u7740\u5185\u6838\u6001\u7684<code>\u7ebf\u7a0b\u7c92\u5ea6LWP</code>\u5e76\u53d1\u8c03\u5ea6\u3002</p>"},{"location":"BaseSkill/store/#_4","title":"\u534f\u7a0b","text":"<p>\u534f\u7a0b - \u7ef4\u57fa\u767e\u79d1\uff0c\u81ea\u7531\u7684\u767e\u79d1\u5168\u4e66 (wikipedia.org)</p> <p>\u534f\u7a0b\u5c31\u662f\u4e00\u79cd\u7528\u6237\u7ea7\u7ebf\u7a0b\uff0c\u4f46\u662f\u5b83\u5bf9\u5185\u6838\u662f\u5b8c\u5168\u900f\u660e\u7684\u3002\u800c\u4e0d\u662f\u548c\u4f20\u7edf\u7684\u7528\u6237\u7ebf\u7a0b\u4e00\u6837\uff0c\u7ed1\u5b9a\u4e00\u4e2a<code>LWP</code>\u3002</p> <p>\u534f\u7a0b\u5bf9\u5e94\u7684\u4efb\u52a1\u8c03\u5ea6\u7406\u8bba\u662f<code>\u7528\u6237\u6001\u534f\u4f5c\u5f0f\u4efb\u52a1\u8c03\u5ea6</code>\uff0c\u800c\u7ebf\u7a0b\u5bf9\u5e94\u7684\u4efb\u52a1\u8c03\u5ea6\u7406\u8bba\u5219\u662f<code>\u5185\u6838\u6001\u62a2\u5360\u5f0f\u4efb\u52a1\u8c03\u5ea6</code>\u3002</p> <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u534f\u7a0b\u9488\u5bf9\u7684\u662f<code>\u5355\u4e2acore</code>\u4e0a\u7684\u8c03\u5ea6\u95ee\u9898\uff0c\u4e5f\u5c31\u662f<code>\u5e76\u53d1\u95ee\u9898</code>\u3002\u800c\u7ebf\u7a0b\u9488\u5bf9\u7684\u5219\u662f<code>OS</code>\u5bf9\u4e8e<code>\u591acore</code>\u7684\u8c03\u5ea6\u95ee\u9898\uff0c\u4e5f\u5c31\u662f<code>\u5e76\u884c\u95ee\u9898</code>\u3002</p>"},{"location":"BaseSkill/store/#_5","title":"\u5185\u5b58","text":"<p>\u8fd9\u91cc\u4e0d\u8bf4\u5206\u6bb5\u7684\u4e86\uff0c\u56e0\u4e3a\u76ee\u524d\u57fa\u672c\u90fd\u4f7f\u7528\u5206\u9875\u7ba1\u7406\u6280\u672f\u3002</p>"},{"location":"BaseSkill/store/#_6","title":"\u5206\u9875\u5b58\u50a8","text":"<p>\u9875</p> <p>\u5c06\u4e00\u4e2a\u8fdb\u7a0b\u903b\u8f91\u5730\u5740\u7a7a\u95f4\u4e0d\u518d\u662f\u5206\u5272\u4e3a\u51e0\u4e2a\u4e0d\u540c\u957f\u5ea6\u7684\u903b\u8f91\u6bb5(\u5806\uff0c\u6808\uff0c\u4ee3\u7801\u533a)\uff0c\u800c\u662f\u7edf\u4e00\u5927\u5c0f\u5206\u9875\u3002\u540c\u65f6\u5c06\u7269\u7406\u5185\u5b58\u540c\u6837\u901a\u8fc7\u9875\u5e27\u6765\u7ba1\u7406\u3002</p> <p>\u5047\u8bbe\u4e00\u4e2a\u8fdb\u7a0b\u903b\u8f91\u5730\u5740\u7a7a\u95f4\u5927\u5c0f\u4e00\u5171<code>64 Byte</code>\uff0c\u800c\u4e00\u4e2a\u9875\u6709<code>16 Byte</code>\uff0c\u5219\u53ef\u4ee5\u5206\u4e3a4\u4e2a\u9875\u5927\u5c0f\u3002\u901a\u5e3832\u4f4d\u53ef\u4ee5\u6709<code>4GB</code>\u7684\u5730\u5740\u7a7a\u95f4\u3002</p> <p>\u5c06\u4e0a\u8ff0\u903b\u8f91\u5730\u5740\u7a7a\u95f4\u653e\u5165\u7269\u7406\u5185\u5b58\uff0c\u5982\u4e0b\u56fe\u6240\u793a:</p> <p></p> <p>\u9875\u8868</p> <p>\u4e3a\u4e86\u8bb0\u5f55\u672c\u8fdb\u7a0b\u7684\u6bcf\u4e2a\u903b\u8f91\u9875\u7684\u7269\u7406\u5b58\u653e\u4f4d\u7f6e\uff0c\u64cd\u4f5c\u7cfb\u7edf\u901a\u8fc7\u4e3a\u6bcf\u4e2a\u8fdb\u7a0b\u7ef4\u62a4\u4e00\u4e2a<code>page table</code>\uff0c\u4e5f\u5c31\u662f\u9875\u8868\u6765\u5b9e\u73b0\u3002\u9875\u8868\u53ef\u4ee5\u4e3a\u6bcf\u4e2a\u903b\u8f91\u9875\u5b58\u50a8\u5bf9\u5e94\u7684\u5730\u5740\u8f6c\u6362\u5173\u7cfb\u3002</p> <p>\u90a3\u4e48\u5982\u679c<code>CPU</code>\u5728\u7528\u6237\u6001\u4e0b\u8bbf\u95ee\u5185\u5b58\uff0c\u5219\u4f1a\u901a\u8fc7<code>MMU</code>\uff0c\u8bbf\u95ee\u9875\u8868\u5e76\u5c06\u865a\u62df\u5730\u5740\u8f6c\u6362\u4e3a\u7269\u7406\u5730\u5740\uff0c\u8fc7\u7a0b\u5982\u4e0b\uff1a</p> <p></p> <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u7531\u4e8e\u865a\u62df\u5730\u5740\u6620\u5c04\u4ee5\u9875\u4e3a\u5355\u4f4d\uff0c\u6240\u4ee5\u627e\u5230\u5bf9\u5e94\u7684\u7269\u7406\u9875\uff0c\u504f\u79fb\u91cf\u4e0d\u7528\u53d8\u5c31\u53ef\u4ee5\u3002\u5176\u4e2d\u7684<code>VPN</code>\u662f\u865a\u62df\u9875\u53f7\uff0c\u800c<code>PFN</code>\u662f\u7269\u7406\u9875\u53f7\u3002</p> <p>\u7531\u4e8e\u5730\u5740\u7a7a\u95f4\u7684\u5927\u5c0f\u539f\u56e0\uff0c\u9875\u8868\u53ef\u4ee5\u53d8\u5f97\u7279\u522b\u5927\uff0c\u6240\u4ee5\u5b58\u50a8\u5728\u5185\u5b58\u4e2d\u800c\u4e0d\u662f<code>MMU</code>\u4e2d\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u9875\u8868\u9879</p> <p>\u5728<code>x86</code>\u4e2d\uff0c\u4e00\u4e2a\u6807\u51c6\u7684\u9875\u8868\u9879\u662f4\u5b57\u8282\u3002</p> <p>\u5047\u8bbe\u9875\u8868\u662f\u7ebf\u6027\u7684\uff0c\u5219<code>Array[VPN] = PTE</code>\uff0c\u4e5f\u5c31\u662f\u5bf9\u5e94\u7684\u9875\u8868\u9879(PTE)\u3002\u4e00\u4e2a\u6807\u51c6\u7684<code>PTE</code>\u5982\u4e0b\u6240\u793a\uff0c\u5b58\u50a8\u7740\u662f\u5426\u5141\u8bb8\u5bf9\u8be5\u7269\u7406\u9875\u8bfb\u5199\uff0c\u662f\u5426\u4e3a\u810f\u9875\u7b49\u4fe1\u606f\u3002</p> <p></p>"},{"location":"BaseSkill/store/#tlb","title":"TLB","text":"<p>\u65e0TLB\uff0cCPU\u8bbf\u95ee\u9875\u8868</p> <p>\u5df2\u77e5\u5207\u6362\u5230\u7528\u6237\u6001\u7684<code>CPU</code>\uff0c\u4f1a\u5c06\u6240\u6709\u8bbf\u95ee\u5185\u5b58\u5730\u5740\u7684\u6307\u4ee4\u5168\u90e8\u8fc7\u4e00\u904d<code>MMU</code>\uff0c\u5219<code>MMU</code>\u8be5\u5982\u4f55\u548c\u9875\u8868\u4ea4\u4e92\u5462\uff1f</p> <p>\u5177\u4f53\u800c\u8a00\uff0c<code>MMU</code>\u4e2d\u7531\u4e00\u4e2a<code>\u9875\u8868\u57fa\u5740\u5bc4\u5b58\u5668</code>\uff0c\u5b58\u50a8\u7740\u9875\u8868\u7684\u8d77\u59cb\u4f4d\u7f6e\u3002</p> <p>\u5bf9\u4e8e\u4e00\u4e2a\u865a\u62df\u5730\u5740\uff0c\u9996\u5148\u9700\u8981\u8bbf\u95ee\u9875\u8868:</p> Text Only<pre><code>VPN     = (VirtualAddress &amp; VPN_MASK) &gt;&gt; SHIFT \nPTEAddr = PageTableBaseRegister + (VPN * sizeof(PTE))\n</code></pre> <p>\u7136\u540e\u901a\u8fc7<code>offset</code>\u4ee5\u53ca<code>PTE</code>\u4e2d\u6240\u5f97\u5230\u7684<code>PFN</code>\uff0c\u5982\u679c\u53ef\u4ee5\u8bbf\u95ee\u8be5\u9875\u7684\u4f4d\u7f6e\uff0c\u5219\u76f4\u63a5\u901a\u8fc7\u771f\u5b9e\u5730\u5740\u8bbf\u95ee\u5373\u53ef\u3002</p> <p><code>CPU</code>\u6bcf\u6b21\u8bbf\u5b58\uff0c\u90fd\u88ab\u653e\u5927\u6210\u4e86\u4e24\u500d\u3002</p> <p>\u6709TLB</p> <p><code>TLB</code>,\u5730\u5740\u8f6c\u6362\u65c1\u8def\u7f13\u51b2\u5b58\u50a8\u5668\uff0c\u662f\u9891\u7e41\u53d1\u751f\u7684\u865a\u62df\u5230\u7269\u7406\u5730\u5740\u7684\u8f6c\u6362\u7684<code>cache</code>.</p> <p>\u5b9e\u9645\u4e0a\u5b58\u50a8\u7684\u662f<code>VPN-PFN</code>\u952e\u503c\u5bf9\u3002</p> <p>\u5177\u4f53\u63a7\u5236\u6d41\u5982\u4e0b\uff1a</p> Text Only<pre><code>1    VPN = (VirtualAddress &amp; VPN_MASK) &gt;&gt; SHIFT\n2    (Success, TlbEntry) = TLB_Lookup(VPN)\n3    if (Success == True)    // TLB Hit\n4        if (CanAccess(TlbEntry.ProtectBits) == True)\n5            Offset   = VirtualAddress &amp; OFFSET_MASK\n6            PhysAddr = (TlbEntry.PFN &lt;&lt; SHIFT) | Offset\n7            AccessMemory(PhysAddr)\n8        else\n9            RaiseException(PROTECTION_FAULT)\n10   else    // TLB Miss\n11       PTEAddr = PTBR + (VPN * sizeof(PTE))\n12       PTE = AccessMemory(PTEAddr)\n13       if (PTE.Valid == False)\n14           RaiseException(SEGMENTATION_FAULT)\n15       else if (CanAccess(PTE.ProtectBits) == False)\n16           RaiseException(PROTECTION_FAULT)\n17       else\n18           TLB_Insert(VPN, PTE.PFN, PTE.ProtectBits)\n19           RetryInstruction()\n</code></pre> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u8d8a\u662f\u70ed\u70b9\u7684\u533a\u57df\u4f7f\u7528<code>TLB</code>\u6536\u76ca\u5c31\u8d8a\u9ad8\uff0c\u4e5f\u5c31\u662f\u9075\u5faa\u5c40\u90e8\u6027\u539f\u7406\u3002\u5047\u8bbe\u4e00\u5171\u6709<code>n</code>\u6b21\u8bbf\u5b58\uff0c\u5219<code>\u6709TLB\u60c5\u51b5\u4e0b\u53ea\u9700\u8981n+1</code>\u6b21\uff0c\u800c\u65e0<code>TLB</code>\u5c31\u662f<code>2n</code>\u6b21\u8bbf\u5b58\u5f00\u9500\u3002</p> <p>\u5bf9\u4e8eTLB\u672a\u547d\u4e2d</p> <p>\u6709\u8f6f\u4ef6\u548c\u786c\u4ef6\u4e24\u79cd\u7ba1\u7406\u5f62\u5f0f\u3002</p> <p>\u786c\u4ef6\u5f62\u5f0f:TLB\u672a\u547d\u4e2d\uff0c\u89e6\u53d1\u5f02\u5e38\u4e2d\u65ad\uff0c<code>CPU</code>\u5207\u6362\u5230\u5185\u6838\u6001\uff0c\u6267\u884c\u5bf9\u5e94\u7684\u5f02\u5e38\u5904\u7406\u7a0b\u5e8f\u3002\u800c\u8fd9\u6bb5\u5f02\u5e38\u5904\u7406\u7a0b\u5e8f\u5c31\u662f\u67e5\u627e\u5bf9\u5e94\u7684\u9875\u8868\uff0c\u5e76\u7528\u7279\u6743\u6307\u4ee4\u5199\u5230<code>TLB</code>\uff0c\u7136\u540e\u5207\u56de\u5185\u6838\u6001\u7a0b\u5e8f\u5904\uff0c\u7136\u540e\u786c\u4ef6\u4f1a\u91cd\u8bd5\u5e76\u547d\u4e2d\uff08\u6ce8\u610f\u662f\u8fd9\u91cc\u662f\u91cd\u8bd5\uff0c\u800c\u4e0d\u662f\u6b63\u5e38\u60c5\u51b5\u4e0b\u7684\u5411\u4e0b\u6267\u884c\uff09\u3002</p> <p>\u8fdb\u7a0b\u5207\u6362\u7684TLB\u5904\u7406</p> <p>\u5bf9\u4e8e\u8fdb\u7a0b\u5207\u6362\uff0c\u5e38\u89c1\u7684\u601d\u8def\u5c31\u662f\u7b80\u5355\u7684<code>flush_tlb</code>\uff0c\u5c06\u5f53\u524d\u7684\u72b6\u6001\u6e05\u9664\uff0c\u800c\u4e0d\u5f71\u54cd\u5176\u4ed6\u8fdb\u7a0b\u3002</p>"},{"location":"BaseSkill/store/#_7","title":"\u591a\u7ea7\u9875\u8868","text":"<p>\u76ee\u7684</p> <p>\u5730\u5740\u7a7a\u95f4\u7684\u5360\u7528\u60c5\u51b5\u5f80\u5f80\u662f\u7a00\u758f\u7684\uff0c\u591a\u7ea7\u9875\u8868\u662f\u4e3a\u4e86\u89e3\u51b3\u7ebf\u6027\u9875\u8868\u5360\u636e\u7a7a\u95f4\u592a\u5927\u7684\u95ee\u9898\uff0c\u5c06\u7a00\u758f\u7684\u5206\u5e03\u53d8\u5f97\u7d27\u51d1\u3002</p> <p>\u57fa\u672c\u601d\u60f3</p> <p>\u5c06\u9875\u8868\u672c\u8eab\u540c\u6837\u901a\u8fc7\u9875\u8fdb\u884c\u5b58\u50a8\uff0c\u7136\u540e\u5bf9\u8fd9\u4e9b\u5212\u5206\u540e\u7684\u7c97\u7c92\u5ea6\u9875(<code>4KB</code>)\u800c\u4e0d\u662f\u7ec6\u7c92\u5ea6\u7684\u9875\u8868\u9879(<code>4Byte</code>)\u901a\u8fc7\u9875\u76ee\u5f55\u8fdb\u884c\u7ba1\u7406\uff0c\u5982\u679c\u6709\u7684\u9875\u4e2d\u7684\u9875\u8868\u9879\u5168\u90e8\u4e3a<code>invalid</code>,\u5219\u4e0d\u7ee7\u7eed\u5b58\u50a8\uff0c\u5e76\u6807\u5fd7<code>invalid</code>\u3002</p> <p>\u901a\u8fc7\u4e00\u4e2a\u6709\u4e2d\u95f4\u5c42\u529f\u80fd\u7684\u9876\u7ea7\u9875\u8868(<code>\u9875\u76ee\u5f55</code>)\uff0c\u4e3a\u771f\u6b63\u6709\u7528\u7684\u9875\u8868\u63d0\u4f9b\u7d22\u5f15\uff0c\u8fd9\u4e5f\u5c31\u662f\u591a\u7ea7\u9875\u8868\u7684\u6700\u7ec8\u76ee\u7684\uff1a\u4f7f\u5f97\u9875\u8868\u4e2d\u7684\u6bcf\u4e2a\u9875\u90fd\u662f\u6709\u7528\u7684(\u9875\u76ee\u5f55\u9664\u5916)\u3002</p> <p>\u5f53\u7136\uff0c\u8fd9\u65f6\u5019\u5982\u679c<code>TLB</code>\u672a\u547d\u4e2d\uff0c\u5982\u679c\u662f\u4e24\u7ea7\u9875\u8868\uff0c\u5219\u9700\u8981\u4ece\u5185\u5b58\u52a0\u8f7d\u4e24\u6b21(\u9875\u76ee\u5f55 + PTE)\u3002</p> <p></p>"},{"location":"BaseSkill/store/#_8","title":"\u5e76\u53d1\u5316","text":""},{"location":"BaseSkill/store/#_9","title":"\u4e92\u65a5","text":""},{"location":"BaseSkill/store/#api","title":"\u4e92\u65a5\u9501API","text":"<p>\u901a\u5e38\u4f7f\u7528\u9501\u6765\u5bf9\u4e34\u754c\u533a\u7684\u8bbf\u95ee\u53d8\u4e3a\u4e32\u884c\u5316\u3002</p> <p>\u4e00\u4e2a\u4e92\u65a5\u9501(mutex)\uff0c\u901a\u5e38\u6709<code>lock &amp; unlock</code>api\u63d0\u4f9b\u7ed9\u7528\u6237\u3002\u53ef\u4ee5\u4f7f\u7528\u5b83\u6765\u5bf9\u4e0d\u540c\u7684\u533a\u57df\u8fdb\u884c\u52a0\u9501\uff0c\u4ece\u800c\u8fbe\u5230\u7cbe\u7ec6\u7684\u63a7\u5236\u3002</p> C<pre><code>1    pthread_mutex_t lock = PTHREAD_MUTEX_INITIALIZER;\n2\n3    Pthread_mutex_lock(&amp;lock);    // wrapper for pthread_mutex_lock()\n4    balance = balance + 1;\n5    Pthread_mutex_unlock(&amp;lock);\n</code></pre>"},{"location":"BaseSkill/store/#_10","title":"\u9501\u7684\u8bc4\u4ef7\u6807\u51c6","text":"<p>\u4ece\u4e09\u70b9\u8fdb\u884c\u8bc4\u4ef7:</p> <ul> <li>\u6b63\u786e\u6027</li> <li>\u516c\u5e73\u6027</li> <li>\u6027\u80fd</li> </ul> <p>\u901a\u5e38\u6b63\u786e\u6027\u662f\u4e00\u4e2a\u9501\u7684\u5fc5\u8981\u6761\u4ef6\uff0c\u800c\u516c\u5e73\u6027\u53ef\u4ee5\u6839\u636e\u9700\u8981\u8fdb\u884c\u5b9e\u73b0\uff0c\u6027\u80fd\u7684\u8bdd\u5219\u662f\u8d8a\u9ad8\u8d8a\u597d\u3002</p>"},{"location":"BaseSkill/store/#_11","title":"\u9501\u7684\u5b9e\u73b0","text":"<p>\u5bf9\u4e8e\u5355\u6838\u6216\u591a\u6838\uff0c\u5b9e\u73b0\u65b9\u5f0f\u4e5f\u6709\u4e0d\u540c\u3002</p> <p>\u5173\u95ed\u4e2d\u65ad</p> <p>\u9996\u5148\u662f\u5355\u6838\u7a0b\u5e8f\uff0c\u7531\u4e8e\u662f\u5355\u6838\uff0c\u5219<code>OS</code>\u83b7\u5f97\u63a7\u5236\u6743\u4ece\u800c\u8c03\u5ea6\u7a0b\u5e8f\u7684\u65b9\u5f0f\u53ea\u6709\u901a\u8fc7\u4e2d\u65ad\u3002\u901a\u5e38\u7cfb\u7edf\u4f1a\u63d0\u4f9b\u65f6\u949f\u4e2d\u65ad\u6765\u8ba9<code>OS</code>\u83b7\u5f97\u5b9a\u65f6\u7684\u5fc5\u8981\u7684\u64cd\u63a7\u6743\u5229\u3002</p> <p>\u5982\u679c\u5728\u4e34\u754c\u533a\u5173\u95ed\u4e2d\u65ad\uff0c\u5219\u6267\u884c\u4e34\u754c\u533a\u4ee3\u7801\u7684\u65f6\u5019\u5fc5\u7136\u4e0d\u4f1a\u6709\u5176\u4ed6\u7a0b\u5e8f\u7684\u8fdb\u5165\uff0c\u5219\u5b8c\u6210\u7684\u5bf9\u4e34\u754c\u533a\u7684\u4e32\u884c\u8bbf\u95ee\u3002</p> <p>\u591a\u6838\u65b9\u5f0f\u5219\u9700\u8981\u4f7f\u7528\u786c\u4ef6\u6307\u4ee4\u3002</p> <p>testAndSet \u3001compareAndSwap</p> <p>\u5173\u95ed\u4e2d\u65ad\u7684\u65b9\u5f0f\u65e0\u6cd5\u5728\u591a\u6838\u4e0a\u8d77\u4f5c\u7528\uff0c\u56e0\u4e3a\u7a0b\u5e8f\u8fd8\u53ef\u4ee5\u88ab\u8c03\u5ea6\u5230\u5176\u4ed6\u6838\u4e0a\u3002</p> <p>\u6700\u7b80\u5355\u7684\u65b9\u5f0f\u662f\u4f7f\u7528\u4e00\u4e2a<code>flag</code>\u53d8\u91cf\u6765\u63a7\u5236\u591a\u7ebf\u7a0b\u5bf9\u4e34\u754c\u533a\u7684\u8bbf\u95ee\u5982\u4e0b\uff0c\u6211\u4eec\u901a\u8fc7<code>test then set</code>\u7684\u65b9\u5f0f\u68c0\u67e5\u8fd9\u4e2a\u53d8\u91cf(\u6ce8\u610f\u8fd9\u91cc\u4e0d\u662f<code>and</code>\uff0c\u4e5f\u5c31\u610f\u5473\u7740\u4e0d\u662f\u539f\u5b50\u7684)\u3002</p> C<pre><code>1    typedef struct  lock_t { int flag; } lock_t;\n2\n3    void init(lock_t *mutex) {\n4        // 0 -&gt; lock is available, 1 -&gt; held\n5        mutex-&gt;flag = 0;\n6    }\n7\n8    void lock(lock_t *mutex) {\n9        while (mutex-&gt;flag == 1) // TEST the flag\n10           ; // spin-wait (do nothing)\n11       mutex-&gt;flag = 1;         // now SET it!\n12   }\n13\n14   void unlock(lock_t *mutex) {\n15       mutex-&gt;flag = 0;\n16   }\n</code></pre> <p>\u8fd9\u4e2a\u7a0b\u5e8f\u663e\u7136\u662f\u6709\u95ee\u9898\u7684\uff0c\u5982\u679c\u4e00\u4e2a\u7a0b\u5e8f\u521a\u901a\u8fc7<code>test</code>\uff0c\u5728<code>set</code>\u7684\u4e4b\u524d\u88ab\u4e2d\u65ad\u4e86\uff0c\u8fd9\u65f6\u5019\u53e6\u4e00\u4e2a\u7a0b\u5e8f\u53ef\u4ee5\u8f7b\u677e\u540c\u6837\u901a\u8fc7<code>test</code>\u3002\u4ece\u800c\uff0c\u4e24\u4e2a\u7ebf\u7a0b\u90fd\u8fdb\u5165\u4e86\u4e34\u754c\u533a\uff0c\u8fd9\u662f\u4e0d\u6b63\u786e\u7684\u3002</p> <p>\u4f46\u662f\uff0c\u73b0\u5728\u786c\u4ef6\u5df2\u7ecf\u63d0\u4f9b\u4e86<code>test and set</code>\u7684\u6307\u4ee4\u610f\u5473\u7740\u4e0a\u8ff0\u7684\u64cd\u4f5c\u53ef\u4ee5\u539f\u5b50\u6027\u5b8c\u6210\uff0c\u5219\u53ef\u4ee5\u901a\u8fc7\u4e0a\u8ff0\u65b9\u5f0f\u5b9e\u73b0\u4e00\u4e2a\u4e92\u65a5\u9501:</p> C<pre><code>1    typedef struct  lock_t {\n2        int flag;\n3    } lock_t;\n4\n5    void init(lock_t *lock) {\n6        // 0 indicates that lock is available, 1 that it is held\n7        lock-&gt;flag = 0;\n8    }\n9 \n10   void lock(lock_t *lock) {\n11       while (TestAndSet(&amp;lock-&gt;flag, 1) == 1)\n12           ; // spin-wait (do nothing)\n13   }\n14 \n15   void unlock(lock_t *lock) {\n16       lock-&gt;flag = 0;\n17   }\n</code></pre> <p>\u901a\u8fc7<code>test-and-set</code>\u64cd\u4f5c\u5355\u53d8\u91cf + while\u5b9e\u73b0\u7684\u9501\u79f0\u4e3a\u81ea\u65cb\u9501\u3002\u8981\u4f7f\u7528\u81ea\u65cb\u9501\uff0c\u64cd\u4f5c\u7cfb\u7edf\u5fc5\u987b\u80fd\u901a\u8fc7\u65f6\u949f\u4e2d\u65ad\u7684\u65b9\u5f0f\u5b9e\u73b0\u62a2\u5360\u5f0f\u8c03\u5ea6\u7684\u65b9\u5f0f(\u5373\u4e0d\u65ad\u4e2d\u65ad\u4e00\u4e2a\u7ebf\u7a0b\uff0c\u8fd0\u884c\u5176\u4ed6\u7ebf\u7a0b)\u3002\u867d\u7136\u5982\u6b64\uff0c\u4f46\u662f\u5176\u4ecd\u7136\u4f1a\u6d6a\u8d39<code>\u4e00\u4e2a\u65f6\u95f4\u7247</code>\u3002</p> <p>\u8bc4\u4ef7\u8fd9\u4e2a\u81ea\u65cb\u9501:</p> <ul> <li>\u662f\u6b63\u786e\u7684</li> <li>\u6ca1\u6709\u516c\u5e73\u6027\u4fdd\u8bc1</li> <li>\u5355\u6838\u6027\u80fd\u6781\u4f4e\uff0c\u591a\u6838\u901a\u5e38\u6027\u80fd\u4e0d\u9519</li> </ul> <p>\u5982\u4f55\u89e3\u51b3\u81ea\u65cb\u8fc7\u591a\u7684\u95ee\u9898?</p> <p>\u7b54\u6848\u662f\u518d\u6b21\u5bfb\u627e\u786c\u4ef6/\u64cd\u4f5c\u7cfb\u7edf\u7684\u652f\u6301\uff0c\u8ba9\u5176\u63d0\u4f9b\u7528\u6237\u7ebf\u7a0b\u7684\u8c03\u5ea6\u539f\u8bed\u3002</p> <p>\u5f53\u524d\u7684\u64cd\u4f5c\u7cfb\u7edf\uff0c\u7ebf\u7a0b\u7684\u72b6\u6001\u6709\u4e09\u79cd:</p> <ul> <li>\u5c31\u7eea</li> <li>\u8fd0\u884c</li> <li>\u963b\u585e</li> </ul> <p>\u5728JDK\u4e2d\uff0c\u8ba9\u8fdb\u7a0b/\u7ebf\u7a0b/LWP\u4ece \u8fd0\u884c\u8f6c\u6362\u5230\u963b\u585e\u7684\u8c03\u7528\u5982\u4e0b:</p> <p>java\u7ebf\u7a0b\u7684\u4e94\u5927\u72b6\u6001\uff0c\u963b\u585e\u72b6\u6001\u8be6\u89e3 - Life_Goes_On - \u535a\u5ba2\u56ed (cnblogs.com)</p> <p></p> <p>\u800c\u64cd\u4f5c\u7cfb\u7edf\uff0c\u53ef\u4ee5\u901a\u8fc7\u5982\u4e0b\u65b9\u5f0f\u8ba9\u7ebf\u7a0b\u8fdb\u5165\u963b\u585e\u6001\uff0c\u800c\u4e0d\u662f\u5360\u7528<code>CPU</code>\u65f6\u95f4\u7247\u3002</p> <ul> <li><code>park &amp; unpark</code>\uff1a\u8ba9\u7ebf\u7a0b\u5728\u83b7\u53d6\u4e0d\u5230\u9501\u7684\u65f6\u5019\u76f4\u63a5<code>park</code>\uff0c\u8ba9\u5176\u4f11\u7720\u8fdb\u5165\u963b\u585e\u6001,\u968f\u540e\u53ef\u8fdb\u5165\u5c31\u7eea\u6001</li> <li><code>\u4e24\u9636\u6bb5\u9501</code>:\u7b2c\u4e00\u9636\u6bb5\u81ea\u65cb\uff0c\u83b7\u53d6\u4e0d\u5230\u5219\u8ba9\u5176\u4f11\u7720\u8fdb\u5165\u963b\u585e\u6001\uff0c\u968f\u540e\u53ef\u8fdb\u5165\u5c31\u7eea\u6001</li> </ul>"},{"location":"BaseSkill/store/#_12","title":"\u540c\u6b65","text":"<p>\u901a\u5e38\u4f7f\u7528<code>\u6761\u4ef6\u53d8\u91cf</code>\u7684\u65b9\u5f0f\uff0c\u8fdb\u884c\u7ebf\u7a0b/\u8fdb\u7a0b\u95f4\u540c\u6b65\u3002</p>"},{"location":"BaseSkill/store/#_13","title":"\u7ebf\u7a0b\u540c\u6b65\u573a\u666f","text":"C<pre><code>1    void *child(void *arg) {\n2        printf(\"child\\n\");\n3        // XXX how to indicate we are done?\n4        return NULL;\n5    }\n6\n7    int main(int argc, char *argv[]) {\n8        printf(\"parent: begin\\n\");\n9        pthread_t c;\n10       Pthread_create(&amp;c, NULL, child, NULL); // create child\n11       // XXX how to wait for child?\n12       printf(\"parent: end\\n\");\n13       return 0;\n14   }\n</code></pre> <p>\u4e0a\u8ff0\u5c31\u662f\u4e00\u4e2a\u7ebf\u7a0b\u540c\u6b65\u7684\u573a\u666f\uff0c\u6bd4\u5982\u5e38\u89c1\u7684<code>join</code>\u8c03\u7528\u3002</p>"},{"location":"BaseSkill/store/#_14","title":"\u6761\u4ef6\u53d8\u91cf","text":"<p>\u6761\u4ef6\u53d8\u91cf\u662f\u4e00\u4e2a\u663e\u5f0f\u961f\u5217\uff0c\u91cc\u9762\u662f\u7b49\u5f85\u8be5\u6761\u4ef6\u53d8\u91cf\u5bf9\u8c61\u7684\u7ebf\u7a0b\u3002</p> <p>\u5176\u63d0\u4f9b<code>wait/signal</code>\u6765\u8ba9\u7ebf\u7a0b\u5165\u961f\u51fa\u961f\uff0c\u5e76\u4e14\u4f1a\u540c\u65f6\u8ba9\u51fa\u9501\u5bf9\u8c61</p> <p>\u901a\u8fc7<code>Thread.sleep</code>\u65b9\u5f0f\u8fdb\u5165\u963b\u585e\u6001\u7684\u7ebf\u7a0b\u5e76\u4e0d\u4f1a\u8ba9\u51fa\u9501\u5bf9\u8c61</p> <p>\u5176\u4f7f\u7528\u65b9\u5f0f\u662f\u88ab\u4e92\u65a5\u9501\u4fdd\u4f4f\uff0c\u5e76\u914d\u5408\u7528\u6237\u7a0b\u5e8f\u7684\u67d0\u4e2a\u6761\u4ef6(\u6bd4\u5982x == 3)</p> <p>\u6ce8\u610f\uff0c\u8fd9\u91cc\u7684\u6761\u4ef6(\u7528\u6237\u7ebf\u7a0b\u611f\u5174\u8da3\u7684\u503c)\u548c<code>condtion</code>\u5bf9\u8c61\u4e0d\u540c\uff0c\u540e\u8005\u5185\u90e8\u7ef4\u62a4\u7684\u662f\u961f\u5217</p>"},{"location":"BaseSkill/store/#_15","title":"\u4fe1\u53f7\u91cf","text":"<p>\u4fe1\u53f7\u91cf\u7684\u4f7f\u7528\u8be6\u89c1\u4e0b\u9762\u7684\u6d88\u8d39\u8005-\u751f\u4ea7\u8005\u95ee\u9898\u3002</p> <p>\u867d\u7136\u4fe1\u53f7\u91cf\u7684\u529f\u80fd\u9f50\u5168\uff0c\u4f46\u662f\u5f88\u591a\u65f6\u5019\u5e76\u4e0d\u63a8\u8350\u4f7f\u7528\u4fe1\u53f7\u91cf\uff0c\u56e0\u4e3a\u5176\u64cd\u4f5c\u590d\u6742\u5e76\u4e14\u5f88\u5bb9\u6613\u5931\u8bef\u3002</p> <p>\u5176\u4f7f\u7528\u65b9\u5f0f\u5982\u4e0b-\u6bd4\u5982\u901a\u8fc7\u4fe1\u53f7\u91cf\u521d\u59cb\u503c\u4e3a1\uff0c\u5b9e\u73b0\u4e92\u65a5\u9501:</p> Java<pre><code>    val sem = new Semaphore(1)\n    var count = 0\n    val service: ExecutorService = Executors.newCachedThreadPool()\n    for(i &lt;- 0 to 1000){\n      service.execute(new Runnable {\n        override def run(): Unit = {\n          sem.acquire()\n          count += 1\n          sem.release()\n        }\n      })\n    }\n    service.shutdown()\n    while(!service.isTerminated){\n      Thread.sleep(1000)\n    }\n    println(count)\n</code></pre> <p>\u57fa\u672c\u539f\u7406\u5c31\u662f\u7ef4\u62a4\u4e00\u7ec4\u8d44\u6e90\uff0c\u4e00\u4e2a\u7ebf\u7a0b\u83b7\u5f97\u4e00\u4e2a\u8d44\u6e90\uff0c\u5c31\u5c06\u5176\u51cf1\u3002\u4e00\u4e2a\u7ebf\u7a0b\u8ba9\u51fa\u8d44\u6e90\uff0c\u5c31\u5c06\u5176\u52a01\u3002</p> <p>\u4fe1\u53f7\u91cf\u4e3a\u8d1f\u51e0\uff0c\u5c31\u4ee3\u8868\u8fd8\u6709\u51e0\u4e2a\u7ebf\u7a0b\u6b63\u5728\u7b49\u5f85\u8d44\u6e90(\u4f4d\u4e8e\u963b\u585e\u6001)\u3002</p> <p>\u800c\u901a\u8fc7\u4fe1\u53f7\u91cf\u521d\u59cb\u503c\u4e3a0\uff0c\u53ef\u4ee5\u5b9e\u73b0join\u3002</p>"},{"location":"BaseSkill/store/#scalajoin","title":"Scala\u5b9e\u73b0join","text":"Java<pre><code>  @Test\n  def test02(): Unit = {\n    val lock = new ReentrantLock()\n    val condition = lock.newCondition()\n    var done = 0\n\n    new Thread(() =&gt; {\n      lock.lock()\n      Thread.sleep(1000)\n      done = 1\n      println(\"child\")\n      condition.signal()\n      lock.unlock()\n    }).start()\n\n    //\u4e0b\u8ff0\u65b9\u5f0f\u7b49\u540c\u4e8ethread.join\n    lock.lock()\n    while(done == 0){\n      condition.await()\n    }\n    lock.unlock()\n    println(\"main\")\n  }\n}\n</code></pre> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u6761\u4ef6\u53d8\u91cf\u901a\u5e38\u662f\u548c\u9501\u5728\u4e00\u8d77\u7684\uff0c\u800c\u5728JDK\u4e2d\u76f4\u63a5\u4ecelock\u4e2d\u83b7\u53d6condition\u3002</p>"},{"location":"BaseSkill/store/#-","title":"\u6d88\u8d39\u8005-\u751f\u4ea7\u8005\u95ee\u9898","text":""},{"location":"BaseSkill/store/#_16","title":"\u63cf\u8ff0","text":"<p>\u751f\u4ea7\u8005-\u6d88\u8d39\u8005\u95ee\u9898\uff0c\u4e5f\u79f0\u4e3a\u6709\u754c\u7f13\u51b2\u533a\u95ee\u9898\u3002</p> <p>\u5047\u8bbe\u6709\u4e24\u4fa7\u6709\u591a\u4e2a\u6d88\u8d39\u8005/\u751f\u4ea7\u8005\uff0c\u5982\u4f55\u5b8c\u6210\u56f4\u7ed5\u7f13\u51b2\u533a\u7684\u6d88\u8d39-\u751f\u4ea7\u6a21\u5f0f\uff0c\u800c\u4e0d\u53d1\u751f\u9519\u8bef\u3002</p>"},{"location":"BaseSkill/store/#_17","title":"\u95ee\u9898\u5b9e\u8d28","text":"<p>\u8fd9\u4e2a\u95ee\u9898\u7684\u5b9e\u8d28\uff0c\u53ef\u4ee5\u62c6\u5206\u4e3a\u5e76\u53d1\u95ee\u9898\u7684\u4e24\u5927\u65b9\u9762\uff1a<code>\u4e92\u65a5</code>\u548c<code>\u540c\u6b65</code>\u3002</p> <p>\u9996\u5148\uff0c\u5bf9\u4e8e\u5171\u4eab\u7f13\u51b2\u533a(\u901a\u5e38\u653e\u7f6e\u5728\u5806\u4e2d)\uff0c\u5176\u5b9e\u5c31\u662f\u4e34\u754c\u533a\uff0c\u6240\u4ee5\u591a\u4e2a\u7ebf\u7a0b\u8bbf\u95ee\u5c31\u5fc5\u7136\u6709\u7ade\u6001\u95ee\u9898\uff0c\u901a\u5e38\u7684\u89e3\u51b3\u529e\u6cd5\u5c31\u662f\u5bf9\u4e34\u754c\u533a\u52a0<code>\u4e92\u65a5\u9501</code></p> <p>\u7136\u540e\uff0c\u4e24\u4fa7\u7684\u751f\u4ea7\u8005-\u6d88\u8d39\u8005\u7ebf\u7a0b\u4e4b\u95f4\uff0c\u5c31\u662f\u6d89\u53ca\u5230\u4e86\u7ebf\u7a0b\u7684\u540c\u6b65\u95ee\u9898-\u5982\u4f55\u5728\u5408\u9002\u7684\u65f6\u5019\u8c03\u5ea6\u5408\u9002\u7684\u7ebf\u7a0b\uff0c\u901a\u5e38\u901a\u8fc7<code>\u6761\u4ef6\u53d8\u91cf</code>\u6765\u5b8c\u6210\u3002</p>"},{"location":"BaseSkill/store/#_18","title":"\u89e3\u51b3\u529e\u6cd5","text":"<p>\u5bf9\u4e8e\u4e34\u754c\u533a\u7684\u64cd\u4f5c\uff0c\u52a0\u4e00\u4e2a\u4e92\u65a5\u9501\u3002</p> <p>\u5bf9\u4e8e\u7ebf\u7a0b\u540c\u6b65\u95ee\u9898\uff0c\u4f7f\u7528\u4e24\u4e2a\u6761\u4ef6\u53d8\u91cf\uff0c\u7ef4\u62a4\u4e24\u79cd\u7b49\u5f85\u7ebf\u7a0b\u7684\u961f\u5217(\u751f\u4ea7 \u3001\u6d88\u8d39)</p> <p>\u6761\u4ef6\u53d8\u91cf\u90e8\u5206\u4f7f\u7528while\u800c\u4e0d\u662fif\uff0c\u4f7f\u5f97\u7ebf\u7a0b\u88ab\u5524\u9192\u4e4b\u540e\u4f1a\u518d\u6b21\u5224\u65ad\uff0c\u9632\u6b62\u5047\u5524\u9192\u7684\u60c5\u51b5\u3002\u4f7f\u7528if\u4f1a\u76f4\u63a5\u5411\u4e0b\u8d70</p> <p>\u53ea\u6709\u4e00\u4e2a\u6761\u4ef6\u53d8\u91cf\u7684\u8bdd\u5e76\u4e0d\u80fd\u533a\u5206\u5524\u9192\u7684\u662f\u54ea\u79cd\u7ebf\u7a0b\uff0c\u6240\u4ee5\u4f7f\u7528\u4e24\u4e2a\u6761\u4ef6\u53d8\u91cf\uff0c\u7ef4\u62a4\u4e24\u79cd\u7b49\u5f85\u961f\u5217\u3002</p> <p>\u4ee3\u7801\u5982\u4e0b:</p> C++<pre><code>1    cond_t empty, fill;\n2    mutex_t mutex;\n3\n4    void *producer(void *arg) {\n5        int i;\n6        for (i = 0; i &lt; loops; i++) {\n7            Pthread_mutex_lock(&amp;mutex);                 // p1\n8            while (count == MAX)                        // p2\n9                Pthread_cond_wait(&amp;empty, &amp;mutex);      // p3\n10           put(i);                                     // p4\n11           Pthread_cond_signal(&amp;fill);                 // p5\n12           Pthread_mutex_unlock(&amp;mutex);               // p6\n13       }\n14   }\n15\n16   void *consumer(void *arg) {\n17       int i;\n18       for (i = 0; i &lt; loops; i++) {\n19           Pthread_mutex_lock(&amp;mutex);               // c1\n20           while (count == 0)                            // c2\n21               Pthread_cond_wait(&amp;fill, &amp;mutex);     // c3\n22           int tmp = get();                              // c4\n23           Pthread_cond_signal(&amp;empty);              // c5\n24           Pthread_mutex_unlock(&amp;mutex);             // c6\n25           printf(\"%d\\n\", tmp);\n26       }\n27   }\n</code></pre>"},{"location":"BaseSkill/store/#scala","title":"Scala\u5b9e\u73b0","text":"<p>\u65b9\u5f0f1\uff1a\u53cc\u6761\u4ef6\u53d8\u91cf + \u4e92\u65a5\u9501</p> Java<pre><code>class ProducerConsumer {\n  @Test\n  def test(): Unit = {\n    val buf = new Buffer()\n    val producerList = for(i &lt;- 1 to 5) yield new Producer(buf)\n    val consumerList = for(i &lt;- 1 to 5) yield new Consumer(buf)\n    val service = Executors.newCachedThreadPool()\n    for(p &lt;- producerList;c &lt;- consumerList){\n      service.execute(p)\n      service.execute(c)\n    }\n\n    service.shutdown()\n    while(!service.isTerminated){\n      Thread.sleep(1000)\n    }\n    println(\"end\")\n  }\n\n}\nclass Buffer{\n  private val lock = new ReentrantLock()\n  private val empty = lock.newCondition() //\u6761\u4ef6\u53d8\u91cf\u901a\u5e38\u548c\u9501\u7ed1\u5b9a\n  private val full = lock.newCondition()\n  private val buffer = mutable.ArrayBuffer[Int]()\n  private val maxSize = 10\n\n  def put(i: Int):Unit = {\n    val flag: Boolean = lock.tryLock(3, TimeUnit.SECONDS)\n\n    while (buffer.size &gt;= maxSize){\n      full.await()\n    }\n    buffer += i\n    empty.signalAll()\n\n    lock.unlock()\n  }\n\n  def get():Int = {\n    val flag: Boolean = lock.tryLock(3, TimeUnit.SECONDS)\n    while(buffer.size &lt;= 0){\n      empty.await()\n    }\n    val i = buffer.remove(0)\n    full.signalAll()\n\n    lock.unlock()\n    i\n  }\n}\n\nclass Producer(buffer: Buffer) extends Runnable{\n  override def run(): Unit = {\n    for (i &lt;- 1 to 1000){\n      buffer.put(i)\n    }\n  }\n}\nclass Consumer(buffer: Buffer) extends Runnable{\n  override def run(): Unit = {\n    for (i &lt;- 1 to 1000){\n      buffer.get()\n    }\n  }\n}\n</code></pre> <p>\u5728\u8fd9\u91cc\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u5c06<code>while</code>\u4fee\u6539\u4e3a<code>if</code>\uff0c\u5728\u6211\u7684\u6d4b\u8bd5\u4e2d\uff0c\u4f7f\u7528<code>if</code>\u7684\u60c5\u51b5\u5fc5\u7136\u4f1a\u62a5\u5f02\u5e38\uff0c\u56e0\u4e3a\u5176\u4e0d\u80fd\u5bf9\u8fdb\u6765\u7684(\u88ab\u5524\u9192\u7684\uff0c\u62ff\u5230\u9501\u7684)\u7ebf\u7a0b\u518d\u6b21\u8fdb\u884c\u5224\u65ad\uff0c\u9632\u6b62\u5b83\u5c31\u662f\u4e0a\u4e00\u6b21\u8c03\u7528\u7684\u7ebf\u7a0b(<code>\u5047\u5524\u9192</code>)\u3002\u800c\u4f7f\u7528<code>while</code>\u5219\u5f7b\u5e95\u907f\u514d\u4e86\u8fd9\u79cd\u60c5\u51b5\u3002</p> <p>\u5176\u5b9e\u53ef\u4ee5\u4f7f\u7528<code>\u963b\u585e\u961f\u5217</code>\u6765\u80dc\u4efb\u6709\u754c\u7f13\u51b2\u533a\u529f\u80fd\uff0c\u751a\u81f3\u65e0\u754c\u7f13\u51b2\u533a\u7684\u4e5f\u53ef\u4ee5\u3002</p> <p>\u6709\u754c\u7f13\u51b2\u533a\uff0c\u5219\u76f4\u63a5\u4f7f\u7528<code>LinkedBlockQueue</code>\u5373\u53ef\uff0c\u4e24\u8fb9\u53ef\u4ee5\u5f00\u4efb\u610f\u7ebf\u7a0b\u8fdb\u884c\u751f\u4ea7/\u6d88\u8d39\u3002</p> Java<pre><code>class Producer3(buffer: ArrayBlockingQueue[Int]) extends Runnable{\n  override def run(): Unit = {\n    for (i &lt;- 1 to 10000){\n      buffer.put(i)\n    }\n  }\n}\n</code></pre>"},{"location":"BaseSkill/store/#_19","title":"\u5176\u4ed6\u5e93\u51fd\u6570","text":"<p>\u5e93\u51fd\u6570\u7684\u5b9e\u73b0\u53ea\u9002\u7528\u4e8e\u53ea\u6709\u4e24\u4e2a\u7ebf\u7a0b\u540c\u6b65\u4ea4\u6362\u6570\u636e\uff0c\u6216\u8005\u8bf4\u4e24\u8fb9\u53ef\u4ee5\u7ec4\u6210\u4e00\u5bf9\u5bf9\u7684\u60c5\u51b5\u3002\u4e5f\u5c31\u662f\u70b9\u5bf9\u70b9\u7684\u4ea4\u4e92\uff0c\u5e76\u6ca1\u6709\u66f4\u591a\u7ebf\u7a0b\u7684\u65b9\u5f0f\u3002</p> <p>\u800c\u4e0a\u9762\u7684\u8bbe\u8ba1\u5219\u662f\u901a\u7528\u7684\u903b\u8f91\uff0c\u5e76\u4e14\u662f\u5f02\u6b65\u4ea4\u6362\u3002\u8fd9\u4e24\u8005\u6709\u672c\u8d28\u4e0d\u540c\u3002</p> <p>SyncChannel</p> Java<pre><code>class Producer2(channel: SyncChannel[Int]) extends Runnable{\n  override def run(): Unit = {\n    for (i &lt;- 1 to 10000){\n      channel.write(i)\n    }\n  }\n}\n</code></pre> <p>exchanger</p> <p>Java\u540c\u6837\u63d0\u4f9b\u4e86\u4e00\u4e2a\u5e93\u51fd\u6570\uff0c\u5f53\u7136\u5728Scala\u5185\u4e5f\u80fd\u4f7f\u7528\u3002\u8fd9\u4e2a\u5e93\u51fd\u6570\u5185\u90e8\u4e0d\u50cf<code>SyncChannel</code>\u4e00\u6837\u53ea\u670970\u884c\u4ee3\u7801\uff0c\u76f8\u53cd\u7684\uff0c\u5b83\u6709700\u884c\u3002</p> <p>\u5177\u4f53\u4f7f\u7528\u548c\u4e0a\u8ff0\u65b9\u5f0f\u7c7b\u4f3c.</p>"},{"location":"BaseSkill/store/#_20","title":"\u6301\u4e45\u5316","text":""},{"location":"BaseSkill/store/#io","title":"I/O\u8bbe\u5907","text":""},{"location":"BaseSkill/store/#_21","title":"\u67b6\u6784","text":"<p>\u5178\u578b\u7684\u7cfb\u7edf\u67b6\u6784\u5982\u4e0a\u6240\u793a\uff0c\u6574\u4f53\u91c7\u7528\u5206\u5c42\u7684\u65b9\u5f0f\uff1a</p> <ul> <li>\u5185\u5b58\u6700\u9760\u8fd1CPU\uff0c\u5e76\u901a\u8fc7<code>\u5185\u5b58\u603b\u7ebf</code>\u4e0e\u5176\u8fde\u63a5</li> <li>\u7136\u540e\u662f\u4e00\u4e9b\u9ad8\u6027\u80fd\u8bbe\u5907\uff0c\u88ab<code>\u7cfb\u7edf\u603b\u7ebf/\u901a\u7528IO\u603b\u7ebf</code>\u8fde\u63a5</li> <li>\u6700\u540e\u662f\u6ce8\u91cd\u6269\u5c55\u6027\u7684\u5916\u8bbe\u90e8\u5206\uff0c\u901a\u8fc7<code>\u5916\u8bbeIO\u603b\u7ebf</code>\u548c<code>CPU</code>\u76f8\u8fde</li> </ul>"},{"location":"BaseSkill/store/#_22","title":"\u6807\u51c6\u8bbe\u5907","text":"<p>IO\u90e8\u5206\u7684\u4e00\u4e2a\u62bd\u8c61\u7684\u6807\u51c6\u8bbe\u5907\u5982\u4e0a\u3002</p> <p>\u786c\u4ef6\u9700\u8981\u4e00\u4e9b\u63a5\u53e3\uff0c\u6765\u8ba9\u7cfb\u7edf\u8f6f\u4ef6\u901a\u8fc7\u9075\u5faa<code>\u6807\u51c6\u534f\u8bae</code>\u7684\u65b9\u5f0f\u6765\u63a7\u5236\u5b83\uff0c\u4e5f\u5c31\u662f\u8bbf\u95ee\u6539\u53d8\u5bc4\u5b58\u5668\u72b6\u6001\uff0c\u4ece\u800c\u8fbe\u5230\u4f7f\u7528\u5916\u90e8\u8bbe\u5907\u7684\u76ee\u7684\u3002</p> <p>\u800c\u5916\u90e8\u8bbe\u5907\u5185\u90e8\u540c\u6837\u6709<code>CPU</code>\u4ee5\u53ca<code>RAM</code>\uff0c\u5176\u540c\u6837\u9075\u5faa<code>\u6807\u51c6\u534f\u8bae</code>\u6765\u64cd\u4f5c\u5bc4\u5b58\u5668\uff0c\u4ee5\u53ca\u5185\u90e8\u8bbe\u5907\uff0c\u4ece\u800c\u8ba9\u7cfb\u7edf\u548c\u5916\u8bbe\u53ef\u4ee5\u901a\u8fc7<code>\u6807\u51c6\u534f\u8bae</code>\u8fdb\u884c\u4ea4\u4e92\u3002</p> <p>\u548c\u5bc4\u5b58\u5668\u4ea4\u4e92\u7684\u65b9\u5f0f</p> <ul> <li>\u7279\u6743\u6307\u4ee4\uff0c\u6bd4\u5982<code>in/out</code>\u6307\u4ee4</li> <li>\u5185\u5b58\u6620\u5c04, \u5916\u8bbe\u5c06\u5bc4\u5b58\u5668\u4f5c\u4e3a\u5185\u5b58\u5730\u5740\u63d0\u4f9b\uff0c\u5219<code>OS</code>\u4e0d\u7528\u5f15\u5165\u65b0\u6307\u4ee4\uff0c\u6b63\u5e38\u8bfb\u5199\u5c31\u53ef\u4ee5\u3002</li> </ul>"},{"location":"BaseSkill/store/#_23","title":"\u6807\u51c6\u534f\u8bae","text":"<p>\u5177\u4f53\u7684\u6807\u51c6\u534f\u8bae\u53ef\u4ee5\u6709\u591a\u79cd\u5b9e\u73b0\uff0c\u53ea\u8981\u80fd\u591f<code>OS</code>\u548c<code>\u5916\u8bbe</code>\u6309\u7167\u534f\u8bae\uff0c\u901a\u8fc7\u5171\u540c\u64cd\u4f5c\u5bc4\u5b58\u5668\u6765\u8fbe\u5230\u4ea4\u4e92\u7684\u76ee\u7684\u5c31\u53ef\u4ee5\u3002</p> <p>\u7b80\u5355\u8f6e\u8be2</p> <p>\u975e\u963b\u585eIO\u7684\u5b9e\u73b0</p> <ol> <li><code>os pulling status register</code></li> <li><code>os writes data to data register by PIO</code>\uff08PIO\uff0c\u4e5f\u5c31\u662f\u53ef\u7f16\u7a0b\u7684IO\uff0c\u5373\u901a\u8fc7CPU\u6765\u5b9e\u73b0\u6570\u636e\u7684\u79fb\u52a8\uff09</li> <li><code>os writes command to command register</code></li> <li><code>again polling</code></li> </ol> <p>\u7f3a\u70b9\uff1a\u9700\u8981\u64cd\u4f5c\u7cfb\u7edf\u4e0d\u80fd\u6302\u8d77\u5f53\u524d\u7684<code>LWP</code>\uff0c\u5e76\u4e14\u4e00\u76f4\u4f7f\u7528<code>CPU</code>\u8fdb\u884c\u8f6e\u8be2\u3002</p>"},{"location":"BaseSkill/store/#_24","title":"\u4e2d\u65ad","text":"<p>\u963b\u585eIO\u7684\u5b9e\u73b0</p> <p>\u5728<code>unix-like</code>\u64cd\u4f5c\u7cfb\u7edf\u4e2d\uff0c\u8fdb\u7a0b\u7b49\u7528\u4e8e</p> <p>\u9996\u5148\uff0c\u64cd\u4f5c\u7cfb\u7edf\u8c03\u5ea6\u7684\u5f53\u524d<code>LWP</code>\uff0c\u901a\u8fc7\u6267\u884c\u8be5\u8fdb\u7a0b\u7684<code>CPU</code>\u9996\u5148\u5411<code>\u5916\u8bbe</code>\u53d1\u9001IO\u8bf7\u6c42\uff0c\u7136\u540e\u64cd\u4f5c\u7cfb\u7edf\u8ba9\u5bf9\u5e94\u7684\u8fdb\u7a0b\u6302\u8d77\uff0c\u4ece\u800c\u53ef\u4ee5\u8c03\u5ea6\u5176\u4ed6\u8fdb\u7a0b\u5728\u8be5<code>CPU</code>\u4e0a\u6267\u884c\u3002</p> <p>\u800c<code>\u5916\u8bbe</code>\u5b8c\u6bd5\u4e4b\u540e\uff0c\u5219\u53d1\u8d77<code>\u786c\u4ef6\u4e2d\u65ad</code>\uff0c\u5f15\u53d1<code>CPU</code>\u8df3\u8f6c\u5230\u5bf9\u5e94\u7684\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\u3002\u8fd9\u91cc\u7684\u5904\u7406\u7a0b\u5e8f\u5219\u4f1a\u91cd\u65b0\u5c06\u4e4b\u524d\u88ab\u6302\u8d77\u7684\u8fdb\u7a0b\u5728\u5408\u9002\u7684\u65f6\u673a\u6062\u590d\u3002</p> <p>\u4e2d\u65ad\u7684\u610f\u4e49\uff0c\u5c31\u5728\u4e8e\u901a\u8fc7\u5207\u6362\uff0c\u4f7f\u5f97<code>IO\u548c\u8ba1\u7b97</code>\u91cd\u53e0\uff0c\u6700\u5927\u5316\u5229\u7528\u4e86<code>CPU</code>\u7684\u8d44\u6e90\u3002</p> <p>\u6df7\u5408\u4e0e\u5408\u5e76</p> <ul> <li>\u5982\u679c<code>\u5916\u8bbe</code>\u662f\u9ad8\u6027\u80fd\u8bbe\u5907\uff0c\u4e5f\u5c31\u662f\u53ef\u4ee5\u5feb\u901f\u5b9e\u73b0\u8fdb\u7a0b\u7684\u9700\u6c42</li> <li>\u5982\u679c\u8be5\u7528\u6237\u8fdb\u7a0b\u9700\u8981\u6700\u77ed\u53ef\u63a7\u65f6\u95f4\u6765\u5f97\u5230\u60f3\u8981\u7684\u6570\u636e</li> </ul> <p>\u5219\u4e0d\u5e94\u8be5\u53ea\u7528\u4e2d\u65ad\u3002\u4e2d\u65ad\u5c06\u8fdb\u7a0b\u518d\u6b21\u4ea4\u7ed9\u4e86<code>OS</code>\u8c03\u5ea6\uff0c\u800c\u8fdb\u7a0b\u4e0a\u4e0b\u6587\u5207\u6362\u4ee5\u53ca\u54cd\u5e94\u4e2d\u65ad\u7684\u5f00\u9500\u5f88\u5927\u3002\u5982\u679c\u76f4\u63a5<code>polling</code>\u5e76\u5f97\u5230\u7ed3\u679c\u7684\u5f00\u9500\u53ef\u4ee5\u63a5\u53d7\uff0c\u5219\u53ef\u4ee5\u91c7\u7528<code>polling</code>\u3002</p> <p>\u5f53\u7136\uff0c\u4e5f\u53ef\u4ee5\u4e24\u8005\u6df7\u5408\uff0c\u5148<code>polling</code>,\u4e0d\u80fd\u5fcd\u53d7\u4e86\u518d\u4ea4\u7ed9<code>OS</code>\u8fdb\u884c\u8c03\u5ea6\u3002</p> <p>\u6216\u8005\u9488\u5bf9\u4e2d\u65ad\u7684\u573a\u666f\u8fdb\u884c\u4f18\u5316\uff0c\u6279\u5904\u7406\u6570\u636e\u518d\u7edf\u4e00\u4e2d\u65ad\uff0c\u51cf\u5c11\u5904\u7406\u4e2d\u65ad\u7684\u4ee3\u4ef7,\u4e5f\u5c31\u662f<code>\u591aLWP</code>\u5728<code>core</code>\u7684\u5207\u6362\u95ee\u9898\u3002</p>"},{"location":"BaseSkill/store/#dma","title":"DMA","text":"<p>\u76f4\u63a5\u5b58\u50a8\u5668\u8bbf\u95ee\u3002</p> <p>\u64cd\u4f5c\u7cfb\u7edf\u6307\u793a\u4e4b\u540e\uff0cDMA\u5c31\u53ef\u4ee5\u81ea\u5df1\u5c06\u6570\u636e\u4ece\u5916\u8bbe\u4f20\u8f93\u5230\u5185\u5b58\uff0c\u800c\u4e0d\u4f7f\u7528CPU\u3002\u5b8c\u6210\u4e4b\u540e\uff0c\u5c06\u89e6\u53d1\u786c\u4ef6\u4e2d\u65ad\u3002</p>"},{"location":"BaseSkill/store/#_25","title":"\u9a71\u52a8","text":"<p><code>Linux</code>\u7cfb\u7edf\u7684\u5178\u578b\u6587\u4ef6\u7cfb\u7edf\u7ed3\u6784\u5982\u4e0a\u3002</p> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u5176\u91c7\u7528\u4e86\u5206\u5c42\u7684\u65b9\u5f0f\uff0c\u5bf9\u7cfb\u7edf\u8fdb\u884c\u62bd\u8c61\uff0c\u548c\u8ba1\u7b97\u673a\u7f51\u7edc\u7684\u601d\u60f3\u662f\u7c7b\u4f3c\u7684\u3002</p> <p>\u7528\u6237\u8c03\u7528\u7684\u7cfb\u7edfAPI\uff0c\u5728\u5185\u90e8\u9996\u5148\u7ecf\u8fc7\u6587\u4ef6\u7cfb\u7edfAPI\u8c03\u7528\uff0c\u6700\u540e\u7531\u5177\u4f53\u5757\u63a5\u53e3\u8def\u7531\u5230\u9a71\u52a8\u7a0b\u5e8f\u90e8\u5206\uff0c\u7136\u540e\u9a71\u52a8\u7a0b\u5e8f\u5b8c\u6210\u5bf9\u5e94\u64cd\u4f5c\u4e4b\u540e\u8fd4\u56de\u8c03\u7528\u3002</p> <p>\u9a71\u52a8\u7a0b\u5e8f\u4e00\u822c\u662f\u5728\u7528\u6237\u63d2\u5165\u5916\u8bbe\u4e4b\u540e\uff0c\u4e3b\u52a8\u4e0b\u8f7d\u7684\u7a0b\u5e8f\uff0c\u6bd4\u5982\u591a\u6570\u9f20\u6807\u63d2\u5165\u7684\u65f6\u5019\u5c31\u63d0\u793a\u9700\u8981\u4e0b\u8f7d\u9a71\u52a8\u3002</p> <p>\u4ee5\u7f51\u7edc\u901a\u4fe1\u4e3a\u4f8b\u5b50\uff0c\u5f53\u6570\u636e\u5168\u90e8\u4ece\u7f51\u5361\u7684<code>FIFO</code>\u7f13\u5b58\u5230\u8fbe<code>\u5185\u5b58skb_buffer</code>\u4e4b\u540e\uff0c\u53d1\u8d77\u786c\u4ef6\u4e2d\u65ad\uff0c\u64cd\u4f5c\u7cfb\u7edf\u8c03\u5ea6<code>\u7f51\u5361\u9a71\u52a8</code>\uff0c\u5bf9<code>skb_buffer</code>\u7684\u6570\u636e\u8fdb\u884c\u5904\u7406\uff0c\u7136\u540e\u5411\u4e0a\u4f20\u9012\u3002</p>"},{"location":"BaseSkill/store/#_26","title":"\u786c\u76d8","text":"<p>\u786c\u76d8 - \u7ef4\u57fa\u767e\u79d1\uff0c\u81ea\u7531\u7684\u767e\u79d1\u5168\u4e66 (wikipedia.org)</p>"},{"location":"BaseSkill/store/#_27","title":"\u6587\u4ef6\u548c\u76ee\u5f55","text":""},{"location":"BaseSkill/store/#_28","title":"\u57fa\u672c\u62bd\u8c61","text":"<p>\u6587\u4ef6</p> <p>\u6587\u4ef6\u5c31\u662f\u4e00\u4e2a\u5b57\u8282\u6570\u7ec4\uff0c\u5e76\u4e14\u7531\u4e00\u4e2a<code>\u6574\u6570inode-number</code>(\u4e5f\u53ef\u4ee5\u79f0\u4e3a<code>inode handle</code>)\u4ee3\u8868\u3002</p> <p>\u76ee\u5f55</p> <p>inode - \u7ef4\u57fa\u767e\u79d1\uff0c\u81ea\u7531\u7684\u767e\u79d1\u5168\u4e66 (wikipedia.org)</p> <p>\u76ee\u5f55\u662f\u4e00\u4e2a<code>List[(name,inode)]</code>\u5217\u8868\uff0c\u5b58\u50a8\u8be5\u76ee\u5f55\u4e0b\u6bcf\u4e00\u4e2a\u6587\u4ef6\u7684\u7528\u6237\u540d\u79f0\uff0c\u4ee5\u53ca\u5e95\u5c42\u540d\u79f0\uff0c\u4e5f\u5c31\u662f<code>inode</code>\u3002</p> <p>\u6587\u4ef6\u7cfb\u7edf\u5bf9\u8c61\u4e2d\u53ea\u6709<code>inode</code>\u7684\u6982\u5ff5\uff0c\u800c<code>\u6587\u4ef6\u548c\u76ee\u5f55</code>\u90fd\u53ea\u662f\u4e00\u4e2a\u522b\u540d\u3002\u53ef\u4ee5\u901a\u8fc7\u6587\u4ef6\u7cfb\u7edf\u7684<code>inode-numer</code>\u53bb\u6587\u4ef6\u7cfb\u7edf\u5b58\u50a8\u533a\u57df\u7684\u5143\u6570\u636e\u7a7a\u95f4\u53bb\u7d22\u5f15<code>inode table</code>\uff0c\u7136\u540e\u627e\u5230\u5bf9\u5e94\u7684\u6587\u4ef6\u7684\u771f\u5b9e\u5b58\u50a8\u4f4d\u7f6e\u4e0e\u5176\u4ed6\u5143\u6570\u636e\u4fe1\u606f(\u4e5f\u5c31\u662f<code>\u771f\u6b63\u7684inode</code>)\u3002</p> <p></p>"},{"location":"BaseSkill/store/#_29","title":"\u63a5\u53e3\u8c03\u7528","text":"<p>\u521b\u5efa\u6587\u4ef6</p> C<pre><code>int fd = open(\"foo\", O_CREAT | O_WRONLY | O_TRUNC);\n</code></pre> <p>\u8fd9\u91cc\u7684\u7cfb\u7edf\u8c03\u7528\u8fd4\u56de\u7684\u7ed3\u679c\u5c31\u662f\u4e00\u4e2a<code>fd</code>\uff0c\u4e5f\u5c31\u662f\u6587\u4ef6\u63cf\u8ff0\u7b26\u4e0b\u6807\uff0c\u6216\u8005\u5c06\u5176\u79f0\u4e3a\u53e5\u67c4(void * )\u3002</p> <p>\u4e4b\u6240\u4ee5\u83b7\u5f97\u7684\u662f\u4e0b\u6807\u800c\u4e0d\u662f\u76f4\u63a5\u7684\u6587\u4ef6\u5bf9\u8c61\u6307\u9488,\u5c31\u662f\u7cfb\u7edf\u51fa\u4e8e\u5b89\u5168\u7684\u5c4f\u853d\u8003\u8651\u3002\u4e00\u5207\u7528\u6237\u8bbf\u95ee\u90fd\u8def\u7531\u5230\u8fd9\u4e2a<code>fd table</code>\uff0c\u65b9\u4fbf\u8d44\u6e90\u4e0e\u6743\u9650\u7ba1\u7406\uff0c\u800c\u4e0d\u662f\u4efb\u4f55\u7a0b\u5e8f\u90fd\u53ef\u4ee5\u968f\u4fbf\u76f4\u63a5\u64cd\u4f5c\u6587\u4ef6\u5bf9\u8c61\u3002</p> <p>\u6bcf\u4e2a\u8fdb\u7a0b\u63d0\u524d\u6253\u5f00\u4e863\u4e2a\u6587\u4ef6\uff0c\u5206\u522b\u662f\u6807\u51c6\u8f93\u5165\uff0c\u6807\u51c6\u8f93\u51fa\uff0c\u6807\u51c6\u9519\u8bef\u3002</p> <p>\u786c\u94fe\u63a5</p> <p>ln file1 file2</p> <p>\u5b9e\u9645\u4e0a\u5c31\u662f\u5728\u76ee\u5f55\u4e2d\u6dfb\u52a0\u4e86\u4e00\u4e2a<code>(new_name,inode</code>\uff09\uff0c\u4e5f\u5c31\u662f\u94fe\u63a5\u548c\u88ab\u94fe\u63a5\u7684\u4e24\u4e2a\u6587\u4ef6\u7684inode\u5b9e\u9645\u4e0a\u5c31\u662f\u4e00\u4e2a\uff0c\u4ed6\u4eec\u6307\u5411\u78c1\u76d8\u5143\u6570\u636e\u533a\u57df\u7684\u540c\u4e00\u5757\u5143\u6570\u636e\u4f4d\u7f6e\u3002</p> <p>\u5220\u9664\u6587\u4ef6\u5b9e\u9645\u4e0a\u5c31\u662f\u53bb\u9664\u4e86\u4e00\u4e2a\u786c\u94fe\u63a5\u3002\u53ea\u6709\u5230\u5f15\u7528\u6570\u4e3a0\u7684\u65f6\u5019\uff0c\u624d\u4f1a\u5220\u9664\u78c1\u76d8\u4e0a\u7684\u6570\u636e\u3002</p> <p>\u8f6f\u94fe\u63a5</p> <p>ln -s file1 file2</p> <p>\u8fd9\u91cc\u5c31\u662f<code>Linux</code>\u6587\u4ef6\u7cfb\u7edf\u7684\u7b2c\u4e09\u79cd\u62bd\u8c61\u3002</p> <p>\u8f6f\u8fde\u63a5\u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u7c7b\u578b\u6587\u4ef6\uff0c\u5e76\u7528<code>file1- &gt; file2</code>\u4f5c\u4e3a\u6587\u4ef6\u5185\u5bb9\u3002</p> <p>\u4ece\u800c\u5c4f\u853d\u6389\u76f4\u63a5\u590d\u7528<code>inode</code>\u5e26\u6765\u7684\u4e24\u4e2a\u95ee\u9898\uff1a</p> <ul> <li>\u4e0d\u80fd\u786c\u94fe\u63a5\u76ee\u5f55</li> <li>\u4e0d\u80fd\u8de8\u6587\u4ef6\u7cfb\u7edf\u94fe\u63a5</li> </ul> <p>mount</p> <p>\u6302\u8f7d\u6587\u4ef6\u7cfb\u7edf\uff0c\u5e76\u5c06\u6240\u6709\u6587\u4ef6\u7cfb\u7edf(<code>ext3/4,proc,tmpfs,AFS</code>)\u7edf\u4e00\u5230\u540c\u4e00\u9897\u6811\u4e0a\uff0c\u547d\u540d\u7edf\u4e00\u5e76\u4e14\u65b9\u4fbf\u3002</p>"},{"location":"BaseSkill/store/#_30","title":"\u4f20\u7edf\u6587\u4ef6\u7cfb\u7edf","text":""},{"location":"BaseSkill/store/#_31","title":"\u5fc3\u667a\u6a21\u578b","text":"<p>\u6587\u4ef6\u7cfb\u7edf\u6574\u4f53\u6a21\u578b\u5206\u4e3a\u4e24\u4e2a\u90e8\u5206\uff1a</p> <ul> <li>\u6587\u4ef6\u7cfb\u7edf\u7684\u6570\u636e\u7ed3\u6784</li> <li>\u8bbf\u95ee\u65b9\u6cd5\uff0c\u4e5f\u5c31\u662f\u66b4\u9732\u7ed9\u7528\u6237\u7684API</li> </ul> <p>\u5e94\u8be5\u8981\u601d\u8003\u6587\u4ef6\u7cfb\u7edf\u5728\u78c1\u76d8\u5e94\u600e\u4e48\u5b58\u50a8\u6570\u636e\u548c\u5143\u6570\u636e\uff0c\u5728\u5185\u5b58\u5982\u4f55\u66b4\u9732\u600e\u4e48\u6837\u7684API\u3002</p>"},{"location":"BaseSkill/store/#_32","title":"\u6574\u4f53\u7ec4\u7ec7","text":"<p>\u6587\u4ef6\u7cfb\u7edf\u7684\u6570\u636e\u7ed3\u6784</p> <p>\u78c1\u76d8\u6570\u636e</p> <p>\u5bf9\u78c1\u76d8\u6247\u533a\u7ec4\u7ec7\u8d77\u6765\u5f62\u6210\u5757\uff0c<code>1 block = 4 KB</code>\u3002</p> <p>\u5bf9\u4e8e\u5feb\u901f\u6587\u4ef6\u7cfb\u7edf\uff0c\u8fd8\u4f1a\u5f15\u5165<code>block group</code>\u6765\u4f18\u5316\u6587\u4ef6\u7ec4\u7ec7\uff0c\u4f7f\u7528\u5c40\u90e8\u6027\u539f\u7406\u964d\u4f4e\u968f\u673a\u5199\u7684\u6982\u7387\uff0c\u63d0\u9ad8\u6027\u80fd\u3002</p> <p>\u7136\u540e\u5b58\u50a8\u533a\u57df\u62bd\u8c61\u4e3a\u6570\u636e\u533a\u57df\u548c\u5143\u6570\u636e\u533a\u57df\u3002</p> <p>\u5e76\u4f7f\u7528\u5f88\u5c11\u7684<code>block</code>\u4f5c\u4e3a<code>bitmap</code>\uff0c\u5b58\u50a8\u4e24\u79cd\u533a\u57df\u7684\u6bcf\u4e2a\u4f4d\u7f6e\u7684\u4f7f\u7528\u60c5\u51b5\u3002</p> <p>\u6700\u540e\u662f<code>super block</code>\uff0c\u5b58\u50a8\u6587\u4ef6\u6574\u4e2a\u6587\u4ef6\u7cfb\u7edf\u7684\u5143\u6570\u636e\u4fe1\u606f\uff0c<code>mount</code>\u7684\u65f6\u5019\u52a0\u8f7d<code>super-block</code>\u5230\u5185\u5b58\u5e76\u521d\u59cb\u5316\u4fe1\u606f\u5c31\u7b97\u6302\u8f7d\u5b8c\u6bd5\u3002</p> <p>inode</p> <p>\u8fd9\u91cc\u8981\u533a\u5206<code>inode</code>\u548c<code>inode number</code>\u3002\u4e5f\u5c31\u662f\u7ed9\u64cd\u4f5c\u7cfb\u7edf\u8fdb\u7a0b\u66b4\u9732\u7684\u90fd\u662f<code>inode numer(inode handle)</code>\uff0c\u7136\u540e\u518d\u78c1\u76d8\u7ef4\u62a4\u7740\u4e00\u4e2a<code>Array[inode]</code>\uff0c\u4e00\u4e2a<code>inode</code>\u5b58\u50a8\u7740\u4e00\u4e2a\u6587\u4ef6\u5bf9\u8c61\u771f\u6b63\u7684\u5143\u6570\u636e\u3002</p> <p>\u4e00\u4e2a\u5178\u578b\u7684<code>inode\u7ed3\u6784\u4f53</code>\u5982\u4e0b\uff1a</p> <p></p> <p>\u76ee\u5f55</p> <p>\u76ee\u5f55\u5c31\u662f<code>List[(user_name,inode-numer)]</code>\u7684\u522b\u540d\uff0c\u5e76\u9644\u52a0\u4e00\u4e9b\u5176\u4ed6\u7684\u5143\u6570\u636e\u4fe1\u606f\u3002</p> <p>\u5176\u672c\u8eab\u540c\u6837\u6709\u4e00\u4e2a<code>inode</code>\u7ed3\u6784\u5b58\u50a8\u4e8e\u78c1\u76d8\u4e2d\u3002\u800c\u6839\u76ee\u5f55\u7684<code>inode-number</code>\u662f\u66b4\u9732\u7ed9\u5168\u90e8\u7528\u6237\u7684\u3002</p>"},{"location":"BaseSkill/store/#_33","title":"\u8bbf\u95ee\u8fc7\u7a0b","text":"<p>\u7528\u6237\u8bbf\u95eeAPI\u7684\u6240\u53d1\u751f\u7684\u8fc7\u7a0b</p> <p>\u5047\u8bbe\u73b0\u5728\u4e00\u4e2a\u78c1\u76d8\u5b58\u50a8\u7740\u4e00\u4e2a\u6587\u4ef6\u7cfb\u7edf\uff0c\u6211\u4eec\u8981\u901a\u8fc7\u7cfb\u7edf\u8bbf\u95ee\u5b83\uff0c\u6bd4\u5982\u8c03\u7528<code>open</code>\u7cfb\u7edf\u8c03\u7528\u8bbf\u95ee<code>/foo/bar</code></p> <ol> <li>\u9996\u5148\uff0c\u5c06\u8be5\u6587\u4ef6\u7cfb\u7edf\u6302\u8f7d\uff0c<code>super-block</code>\u52a0\u8f7d\u5230\u5185\u5b58</li> <li>\u4f7f\u7528<code>open</code>\u7cfb\u7edf\u8c03\u7528\u4e4b\u540e\uff0c\u4f1a\u4ece\u6839\u76ee\u5f55\u5f00\u59cb\u8bbf\u95ee(\u56e0\u4e3a\u5f00\u59cb\u53ea\u77e5\u9053\u6839\u76ee\u5f55\u7684<code>inode</code>\u4f4d\u7f6e)\u3002\u7136\u540e\u5f00\u59cb\u8def\u5f84\u5339\u914d\u8fc7\u7a0b\uff0c\u4f9d\u6b21\u5c06\u76ee\u5f55\u8bfb\u53d6\u51fa\u6765\u5e76\u904d\u5386\u67e5\u627e\u3002</li> <li>\u6700\u7ec8\u53ef\u4ee5\u627e\u5230<code>/foo/bar</code>\u5bf9\u5e94\u7684<code>inode-number</code>\uff0c\u7136\u540e\u4ece\u78c1\u76d8\u627e\u5230<code>inode</code>\u5e76\u4ece\u6570\u636e\u533a\u8bfb\u53d6\u6587\u4ef6\u3002</li> </ol>"},{"location":"BaseSkill/store/#_34","title":"\u7f13\u5b58","text":"<p>\u8bfb\u7f13\u5b58</p> <p>OS\u901a\u5e38\u4f1a\u5c06\u7cfb\u7edf\u5185\u5b58\u7684<code>10%</code>\u53d6\u51fa\u6765\uff0c\u4f7f\u7528<code>LRU</code>\u7b56\u7565\u7b49\u7f13\u5b58\u8fdb\u7a0b\u5e38\u7528\u7684<code>block</code>\u3002</p> <p>\u5199\u7f13\u5b58</p> <p>\u5199\u7684\u65f6\u5019\u4e5f\u53ef\u4ee5\u7f13\u5b58\u8d77\u6765\uff0c\u6700\u540e\u6309<code>batch</code>\u5199\u5165\u3002\u5f53\u7136\u8fd9\u6837\u63d0\u9ad8\u6027\u80fd\u7684\u540c\u65f6\u4e5f\u964d\u4f4e\u4e86\u53ef\u9760\u6027\uff0c\u56e0\u4e3a\u5f15\u5165\u4e86\u4e2d\u95f4\u6001\u3002</p>"},{"location":"BaseSkill/store/#_35","title":"\u65e5\u5fd7\u7ed3\u6784\u6587\u4ef6\u7cfb\u7edf","text":""},{"location":"BaseSkill/store/#_36","title":"\u6982\u8ff0","text":"<p>\u65e5\u5fd7\u7ed3\u6784\u6587\u4ef6\u7cfb\u7edf\u6574\u4f53\u601d\u8def\uff1a\u9488\u5bf9\u5199\u591a\u8bfb\u5c11\u7684\u573a\u666f\uff0c\u5c06\u6240\u6709\u66f4\u65b0(\u5305\u62ec\u5143\u6570\u636e\u4fe1\u606finode)\u7f13\u5b58\u5728\u5185\u5b58\u6bb5\u4e2d\uff0c\u7b49\u5230\u79ef\u7d2f\u5230\u8db3\u591f\u91cf\u7684\u65f6\u5019\u518d\u4e00\u6b21\u6027<code>\u987a\u5e8f\u5199\u5165</code>\u78c1\u76d8\u4e2d\uff0c\u5e76\u4e14\u662f\u4ece\u672a\u88ab\u4f7f\u7528\u7684\u90e8\u5206\u3002</p> <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u52a0\u4e86\u4e00\u5c42\u4e2d\u95f4\u5c42(\u5185\u5b58\u7f13\u51b2)\uff0c\u5c06\u6240\u6709\u5199\u7edf\u4e00\u4e3a<code>\u987a\u5e8f\u5199</code>\u3002\u4e5f\u5c31\u662f<code>copy on write</code>\u3002</p>"},{"location":"BaseSkill/store/#_37","title":"\u7f13\u51b2","text":"<p>\u5fc5\u8981\u6027</p> <p>\u5982\u679c\u4e0d\u662f\u8db3\u591f\u91cf\u7684\u7f13\u51b2\uff0c\u5c31\u7b97\u4e00\u4e2a\u4e2a\u987a\u5e8f\u5199\uff0c\u4f46\u662f\u4e24\u6b21\u5199\u4e4b\u95f4\uff0c\u78c1\u76d8\u53ef\u80fd\u5df2\u7ecf\u65cb\u8f6c\uff0c\u90a3\u5c31\u5fc5\u987b\u518d\u8f6c\u56de\u6765\u3002\u8fd9\u6837\u7684\u5f00\u9500\u5f88\u5927\u3002</p> <p>\u6240\u4ee5\u7f13\u51b2\u7684\u76ee\u7684\u5c31\u5728\u4e8e<code>\u5236\u9020\u4e00\u6b21\u8fde\u7eed\u5927\u5199\u5165</code>,\u5199\u5165\u7684\u662f\u4e00\u4e2a\u6bb5\uff0c\u4e5f\u5c31\u662f\u5f88\u591a\u4e2a<code>block</code>\u3002\u5982\u4e0b\u6240\u793a</p> <p></p>"},{"location":"BaseSkill/store/#inode","title":"inode\u5206\u5e03","text":"<p>\u4f20\u7edf\u7684\u6587\u4ef6\u7cfb\u7edf<code>inode</code>\u4ee5<code>Array[inode]</code>\u5f62\u5f0f\u7ec4\u7ec7\uff0c\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u8bbf\u95ee(\u901a\u8fc7<code>inode-number</code>)\u3002</p> <p>\u5982\u4e0a\u56fe\u6240\u793a\uff0c<code>inode</code>\u5199\u5165(\u4e5f\u5c31\u662f\u6587\u4ef6\u7684\u5143\u6570\u636e\u4fe1\u606f)\uff0c\u662f\u548c\u6570\u636e\u5757\u4e00\u8d77\u5199\u5165\u7684\u3002\u8fd9\u5c31\u8bf4\u660e<code>inode</code>\u5206\u6563\u5728\u6574\u4e2a\u78c1\u76d8\u4e0a\u4e86\u3002</p> <p>inode map</p> <p>\u89e3\u51b3\u65b9\u6848\u8fd8\u662f\u52a0\u5165\u4e2d\u95f4\u5c42\uff1a\u7ef4\u62a4\u4e00\u4e2a\u7684<code>inode map</code>\uff0c\u6bcf\u6b21\u5199\u5165\u90fd\u5b58\u50a8/\u66f4\u65b0\u4e00\u4e0b<code>inode</code>\u7684\u78c1\u76d8\u4f4d\u7f6e\u4fe1\u606f\u3002</p> <p>\u7b49\u5230\u4e00\u4e2a\u5927\u6279\u91cf\u5199\u5165\u7684\u65f6\u5019\uff0c\u5c06\u8fd9\u4e2a\u6bb5\u7684<code>inode map</code>\u540c\u65f6\u987a\u5e8f\u5199\u5165\u78c1\u76d8\u3002</p> <p></p> <p>checkpoint region</p> <p>\u540c\u6837\u53c8\u9762\u4e34<code>inode map</code>\u5206\u6563\u7684\u60c5\u51b5\uff0c\u540c\u6837\u52a0\u4e00\u5c42\uff0c\u4f46\u662f\u8fd9\u6b21\u662f\u5728\u4e00\u4e2a<code>\u4f17\u6240\u5468\u77e5</code>\u7684\u4f4d\u7f6e\uff0c\u4e5f\u5c31\u662f\u68c0\u67e5\u70b9\u533a\u57df\uff0c\u5176\u7ef4\u62a4\u7740\u6240\u6709\u7684<code>inode map</code>\u7684\u5f15\u7528\u3002</p> <p></p> <p>\u6574\u4f53\u8bbf\u95ee\u8def\u5f84</p> <p><code>CR -&gt; inode map -&gt; inode -&gt; file block</code></p> <p>\u901a\u5e38\uff0c<code>OS</code>\u4f1a\u5c06\u6240\u6709\u7684<code>inode map</code>\u7f13\u5b58\u5728\u5185\u5b58\u4e2d\u3002</p>"},{"location":"BaseSkill/store/#_38","title":"\u5783\u573e\u6e05\u7406","text":"<p>\u5bf9\u4e8e\u78c1\u76d8\u4e0a\u8fc7\u671f\u7684\u65e7\u6570\u636e\uff0c\u6709\u591a\u79cd\u5904\u7406\u65b9\u6cd5\u3002</p> <ul> <li>\u4e0d\u5904\u7406\u5e76\u5b58\u50a8\uff0c\u5219\u79f0\u4e3a\u7248\u672c\u63a7\u5236\u6587\u4ef6\u7cfb\u7edf(\u6709<code>snapshots</code>\uff0c\u66fe\u7ecf\u5728<code>LevelDB</code>\u7684\u5b9e\u73b0\u4e2d\u770b\u89c1\u8fc7)</li> <li>\u5b9a\u65f6\u6e05\u7406,\u662fLFS\u7684\u505a\u6cd5\uff0c\u800c\u5206\u6bb5\u5927\u6279\u91cf\u5199\u5165\u5728\u6b64\u65f6\u4e5f\u66f4\u65b9\u4fbf\u6e05\u7406\u3002</li> </ul>"},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/","title":"JVM\u5e76\u53d1\u603b\u7ed3","text":""},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#_1","title":"\u5185\u5b58\u6a21\u578b\u6838\u5fc3","text":"<p>\u5168\u7f51\u6700\u786c\u6838 Java \u65b0\u5185\u5b58\u6a21\u578b\u89e3\u6790\u4e0e\u5b9e\u9a8c\u5355\u7bc7\u7248\uff08\u4e0d\u65ad\u66f4\u65b0QA\u4e2d\uff09 - \u77e5\u4e4e (zhihu.com)</p> <p>\u4e0a\u9762\u8fd9\u7bc7\u6587\u7ae0\u5b9e\u5728\u662f\u592a<code>hardcore</code>\u4e86\uff0c\u6240\u4ee5\u6211\u653e\u8fd9\u91cc\uff0c\u53ea\u662f\u9488\u5bf9\u5176\u4e2d\u5185\u5bb9\u4f5c\u81ea\u5df1\u7684\u601d\u8003\u3002</p>"},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#cpu-stall","title":"CPU-Stall","text":"<p>CPU\u7684\u4e00\u5207\u4f18\u5316\uff0c\u90fd\u662f\u4e3a\u4e86\u53bb\u6389\u4e00\u6bb5<code>CPU-Stall</code>\uff0c\u4e5f\u5c31\u662f\u5728\u7b49\u5f85\u54cd\u5e94(\u5185\u5b58\u8bbf\u95ee\uff0c\u6216\u8005\u662f\u786c\u76d8\u8bbf\u95ee\uff09\u7684\u65f6\u5019\uff0c\u5982\u4f55\u624d\u80fd\u9632\u6b62\u6d6a\u8d39\u6389\u8fd9\u4e48\u591a\u65f6\u95f4\u7247\u5462\uff1f</p>"},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#cpu","title":"\u5404\u64cd\u4f5c\u6d6a\u8d39\u7684CPU\u65f6\u95f4\u7247","text":"<p>\u8ba1\u7b97\u673a\u5404\u79cd\u64cd\u4f5c\u8017\u65f6 - \u77e5\u4e4e (zhihu.com)</p> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u4ee5\u4e00\u4e2a\u5355\u6838\u7684\u4e3b\u9891\u4e3a<code>2500MHZ</code>,\u4e5f\u5c31\u662f<code>2.5GHz</code>\u7684CPU\u6765\u8bf4\uff0c\u4e00\u79d2\u949f\uff0c\u53ef\u4ee5\u6709250\u4ebf\u4e2a\u65f6\u949f\u5468\u671f\uff0c\u4e5f\u5c31\u662f\u65f6\u95f4\u7247\u3002</p> <p>\u8fd9\u91cc\u5f15\u7533\u4e00\u4e2a\u95ee\u9898\uff0c\u4e3a\u4ec0\u4e48\u5f88\u591a\u5237\u9898\u7f51\u7ad9\u4f1a\u5224\u5b9a\u8d85\u65f6\u590d\u6742\u5ea6\u662f<code>10^9</code>\uff0c\u800c\u4e14\u51e0\u4e4e\u662f\u7edf\u4e00\u89c4\u5b9a\uff1f\u5176\u5b9e\u53ef\u4ee5\u8fd9\u4e48\u601d\u8003:\u540e\u53f0\u53ea\u628a\u7a0b\u5e8f\u653e\u5728\u4e00\u4e2acore\u4e0a\u8dd1\uff0c\u90a3\u4e48\u7eaf\u5355\u7ebf\u7a0b\u64cd\u4f5c\u3002\u5982\u679c\u9650\u5236\u4e00\u4e2aCPU\u53ea\u80fd\u8dd11s\u4e2d\u7ed9\u67d0\u4e2a\u7528\u6237\u7684\u6bcf\u6b21\u63d0\u4ea4\uff0c\u5219\u9700\u8981\u7684\u65f6\u95f4\u7247\uff0c\u5c31\u662f<code>\u5355\u6b21OP\u8017\u65f6 * O\u65f6\u95f4\u590d\u6742\u5ea6</code>\u3002\u800c\u5728\u4e0d\u8003\u8651\u7279\u5316\u6307\u4ee4\u60c5\u51b5\u4e0b\uff0c\u5e38\u89c4\u7684CPU\u52a0\u51cf\u4e58\u9664\u7684\u6307\u4ee4\u90fd\u53ea\u4f1a\u5360<code>\u4e24\u4f4d\u6570</code>\u7684\u65f6\u949f\u5468\u671f\uff0c\u5219\u7ed3\u679c\u663e\u7136\u53ef\u5f97\u3002</p> <p>\u4e00\u4e9b\u5e38\u89c1\u8017\u65f6\u5217\u51fa\u5982\u4e0b:</p> \u8fd0\u7b97\u64cd\u4f5c cache\u8bbf\u95ee \u5176\u4ed6\u8bbf\u95ee \u52a0\u51cf:1-10\u4e2a\u65f6\u949f\u5468\u671f l1:1-5\u4e2a\u65f6\u949f\u5468\u671f \u5185\u5b58-\u968f\u673a\u8bbf\u95ee:250\u4e2a\u65f6\u949f\u5468\u671f\uff1bSSD\u968f\u673a\u8bbf\u95ee:25\u4e07\u65f6\u949f\u5468\u671f\uff1b\u78c1\u76d8\u968f\u673a\u8bbf\u95ee:2.5\u4ebf\u65f6\u949f\u5468\u671f \u4e58\u9664:10-50\u4e2a\u65f6\u949f\u5468\u671f l2\uff1a10-20\u4e2a\u65f6\u949f\u5468\u671f; l3:50-100\u4e2a\u65f6\u949f\u5468\u671f mutex-\u52a0\u9501\u89e3\u9501:60\u4e2a\u65f6\u949f\u5468\u671f"},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#cache","title":"\u5f15\u5165cache","text":"<p>\u53ef\u4ee5\u770b\u5230\uff0c\u5c31\u7b97\u662f\u8bbf\u95ee\u5185\u5b58\uff0cStall\u4e5f\u4f1a\u6709200\u4e2a\u65f6\u949f\u5468\u671f\u3002</p> <p>\u5982\u679c\u8003\u8651\u5f15\u5165<code>cache</code>\uff0c\u5c31\u4f1a\u53d1\u73b0\uff0c\u5728\u4e00\u76f4hit\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u5c06<code>Stall</code>\u7f29\u77ed\u4e00\u4e2a\u6570\u91cf\u7ea7\u3002</p>"},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#cpu-cache","title":"\u591aCPU-cache\u4e00\u81f4\u6027","text":"<p>\u4f46\u662f\u7531\u4e8eCPU\u65e9\u5c31\u662f\u591a\u6838\u903b\u8f91\uff0c\u800c\u591a\u6838\u7684Cache\u5982\u4f55\u4fdd\u6301\u4e00\u81f4\u5462\uff1f\u53ef\u4ee5\u901a\u8fc7\u7f13\u5b58\u4e00\u81f4\u6027\u534f\u8bae\uff0c\u6bd4\u5982<code>MESI</code>\u3002</p> <p>\u4f46\u662f<code>MESI</code>\u4e2d\u6709\u4e00\u4e2a\u903b\u8f91\uff0c\u662f\u4e00\u4e2aCPU\u5982\u679c\u8981\u5c06\u81ea\u5df1\u7684cache\u4fee\u6539\u7684\u8bdd\uff0c\u9996\u5148\u8981\u5c06\u5176\u53d8\u4e3a<code>invaild</code>\uff0c\u4f46\u662f\u8fd9\u4e2a\u64cd\u4f5c\u8981\u7b49\u5230\u6240\u6709\u7684<code>CPU</code>\u5168\u90e8\u540c\u610f\u4e3a\u6b62\u3002</p> <p>\u53ef\u4ee5\u53d1\u73b0\uff0c<code>Stall</code>\u53c8\u51fa\u73b0\u4e86\u3002</p>"},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#storebufferinvalidqueue","title":"StoreBuffer\u548cinvalidQueue","text":"<p>StoreBuffer\u5c31\u662f\u4e3a\u4e86\u907f\u514d\u4e0a\u9762\u7f13\u5b58\u4e00\u81f4\u6027\u534f\u8bae\u6240\u5f15\u5165\u7684Stall\u3002CPU\u53c8\u53ef\u4ee5\u653e\u5230buffer\u4e2d\u5c31\u4e0d\u7528\u7ba1\u4e86\u3002\u4f46\u662f\u52a0\u4e00\u5c42\u975e\u539f\u5b50\u64cd\u4f5c\uff0c\u5fc5\u7136\u53c8\u4f1a\u51fa\u73b0\u95ee\u9898\u3002</p> <p>\u540c\u65f6\uff0c\u7531\u4e8e<code>StoreBuffer</code>\u5f88\u5c0f\uff0c\u6240\u4ee5\u5982\u679c\u4e00\u76f4\u6709invalid\u9700\u6c42\uff0c\u5982\u679c\u4e0d\u518d\u52a0\u4e00\u5c42\uff0c\u5c31\u53c8\u4f1a\u56de\u9000\u5230<code>invalid Stall</code>\u3002\u6240\u4ee5\uff0cCPU\u53c8\u52a0\u4e86\u4e00\u5c42<code>invalid Queue</code>\u3002</p>"},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#_2","title":"\u5185\u5b58\u5c4f\u969c","text":"<p>\u5185\u5b58\u5c4f\u969c\uff0c\u5c31\u662f\u4e3a\u4e86\u89e3\u51b3StoreBuffer\uff0c\u4ee5\u53cainvalid Queue\u6240\u5e26\u6765\u7684\u4e0d\u4e00\u81f4\u95ee\u9898\u3002</p>"},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#_3","title":"\u5199\u5185\u5b58\u5c4f\u969c","text":"<p>\u7b49\u5f85CPU\u5237\u5b8c\u6240\u6709\u7684<code>StoreBuffer</code>\u7684\u5185\u5b58\u5c4f\u969c\u6307\u4ee4\u3002</p>"},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#_4","title":"\u8bfb\u5185\u5b58\u5c4f\u969c","text":"<p>\u7b49\u5f85CPU\u5904\u7406\u5b8c\u6240\u6709\u7684<code>invalid Queue</code>\u7684\u6307\u4ee4\u3002</p>"},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#java","title":"Java\u4e2d\u5c4f\u969c","text":"<p>LoadLoad</p> <p>\u5982\u679c\u60f3\u8ba9\u4e24\u4e2a\u4e0d\u60f3\u5173\u7684read\u64cd\u4f5c\uff0c\u4e0d\u4e71\u5e8f\u6267\u884c\uff0c\u5219\u53ef\u4ee5\u5728\u5176\u95f4\u52a0<code>LoadLoad</code>\u3002</p> Java<pre><code>Load(x)\nLoadLoad\nLoad(y\uff09\n</code></pre> <p>LoadStore</p> <p>\u4e00\u4e2aread\uff0c\u548c\u5176\u4e0d\u76f8\u5173\u7684write\u6307\u4ee4\uff0c\u5219:</p> Java<pre><code>Load(x)\nLoadStroe\nStore(y)\n</code></pre> <p>StoreStore</p> <p>StoreLoad</p>"},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#volatile","title":"Volatile","text":""},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#volatile_1","title":"Volatile\u5199","text":"<p>\u5bf9Volatile\u5b57\u6bb5\u5199\uff0c\u6bd4\u5982\u5bf9value\u5199\uff0c\u5c31\u662f</p> <p>\u4e5f\u5c31\u662f\u9632\u6b62\u548c\u5176\u4e0a\u7684\u5199\u91cd\u6392\u5e8f\uff0c\u9632\u6b62\u548c\u5176\u540e\u7684\u8bfb\u91cd\u6392\u5e8f\u3002</p> <p>StoreLoad\u5f88\u91cd\u8981\uff0c\u4e5f\u5c31\u662f\u5199\u7684\u5185\u5bb9\u7f13\u5b58\u540c\u6b65\uff0c\u7136\u540e\u5176\u540e\u7684\u8bfb\u624d\u53ef\u4ee5\u5904\u7406\u3002</p> Java<pre><code>StoreStore\nvalue = x\nStoreLoad\n</code></pre>"},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#volatile_2","title":"Volatile\u8bfb","text":"Java<pre><code>value = x\nLoadLoad\nLoadStore\n</code></pre>"},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#_5","title":"\u57fa\u7840","text":"<p>\u64cd\u4f5c\u7cfb\u7edf\u901a\u8fc7\u5c06\u5185\u5b58\u865a\u62df\u5316\uff0c\u5b8c\u6210\u4e86\u4fdd\u62a4\u6027\u4e0e\u6027\u80fd\u8ffd\u6c42\u7684\u76ee\u6807\uff0c\u4efb\u4f55\u7528\u6237\u8fdb\u7a0b\u5728\u60f3\u64cd\u4f5c\u5185\u5b58\u7684\u65f6\u5019\u4f7f\u7528\u7684\u90fd\u662f\u865a\u62df\u5730\u5740\uff0c\u5355\u4e2a\u8fdb\u7a0b\u62e5\u6709\u72ec\u7acb\u7684\u5730\u5740\u7a7a\u95f4\u3002</p> <p>\u4f46\u662f\u5728\u591a\u6838\u5fc3<code>cpu</code>\u7684\u65f6\u4ee3\uff0c\u4e00\u4e2a\u8fdb\u7a0b\u53ea\u4f7f\u7528\u5355\u7ebf\u7a0b\u7684\u65b9\u5f0f\u8fd0\u884c\uff0c\u663e\u7136\u65e0\u6cd5\u5c06\u6548\u7387\u8fbe\u5230\u6700\u9ad8\u3002\u6240\u4ee5\u9700\u8981\u591a\u7ebf\u7a0b\u7f16\u7a0b\u3002\u800c\u591a\u7ebf\u7a0b\u540c\u65f6\u64cd\u4f5c\u7684\u90fd\u662f\u540c\u4e00\u4e2a\u8fdb\u7a0b\u7a7a\u95f4\u7684\u5185\u5b58\uff0c\u663e\u7136\u7ade\u4e89\u95ee\u9898\u4e0d\u53ef\u907f\u514d\u3002\u800c\u4e00\u4e2aJVM\u8fdb\u7a0b\u663e\u7136\u4e5f\u6709\u8fd9\u79cd\u95ee\u9898\u3002\u4ee5\u4e0b\u8ba8\u8bbaJVM\u4e2d\u5e38\u89c1\u7684\u89e3\u51b3\u529e\u6cd5\u3002</p>"},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#_6","title":"\u5185\u7f6e\u9501\u4e0e\u91cd\u5165","text":""},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#_7","title":"\u5185\u7f6e\u9501","text":"<p>Java\u7684\u5185\u7f6e\u9501\u673a\u5236\u53ef\u4ee5\u652f\u6301\u539f\u5b50\u6027\uff0c\u5373\u540c\u6b65\u4ee3\u7801\u5757\uff0c\u4f7f\u7528<code>sychronized</code>\u6765\u6807\u8bc6\uff0c\u662f\u4e00\u79cd\u4e92\u65a5\u9501\u3002\u4efb\u4f55\u65f6\u523b\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\u6267\u884c\u8fd9\u6bb5\u4ee3\u7801\u3002\u5219\u53ef\u4ee5\u4fdd\u8bc1\u5728\u8fd9\u4e2a\u8fdb\u7a0b\u7a7a\u95f4\u7684\u8fd9\u6bb5\u4ee3\u7801\u64cd\u4f5c\u662f\u7ebf\u7a0b\u5b89\u5168\u7684\u3002</p> <p>\u5982\u679c\u8981\u540c\u6b65\uff0c\u5219\u9700\u8981\u5bf9\u6240\u6709\u64cd\u4f5c\u4fdd\u62a4\u5bf9\u8c61\u7684\u8def\u5f84\u5168\u90e8\u8fdb\u884c\u540c\u6b65\uff0c\u5e38\u89c1\u7684\u64cd\u4f5c\u662f\u5c06\u53ef\u53d8\u8f6c\u6001\u5168\u90e8\u5c01\u88c5\u5230\u5bf9\u8c61\u5185\u90e8\uff0c\u5e76\u4f7f\u7528\u8fd9\u4e2a\u5bf9\u8c61\u7684\u5185\u7f6e\u9501\u8fdb\u884c\u540c\u6b65\u3002</p>"},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#_8","title":"\u91cd\u5165","text":"<p>\u4e00\u4e2a\u7ebf\u7a0b\u60f3\u8981\u83b7\u53d6\u5176\u4ed6\u7ebf\u7a0b\u5df2\u7ecf\u83b7\u5f97\u7684\u9501\u7684\u65f6\u5019\uff0c\u5c31\u4f1a\u88ab\u963b\u585e\u6302\u8d77\u3002\u4f46\u662f\u5f53\u7ebf\u7a0b\u83b7\u53d6\u7684\u662f\u81ea\u5df1\u5df2\u7ecf\u83b7\u5f97\u7684\u9501\u7684\u65f6\u5019\uff0c\u53ef\u91cd\u5165\u9501\u53ef\u4ee5\u4fdd\u8bc1\u8be5\u7ebf\u7a0b\u53ef\u4ee5\u83b7\u5f97\u9501\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u83b7\u5f97\u9501\u64cd\u4f5c\u7684\u7c92\u5ea6\u4ece\u7ec6\u7c92\u5ea6\u7684<code>\u8c03\u7528</code> \u53d8\u4e3a\u4e86<code>\u7ebf\u7a0b</code>\u3002\u4e5f\u5c31\u662f\u53ef\u91cd\u5165\u6027\u8fdb\u4e00\u6b65\u5bf9\u9501\u7684\u884c\u4e3a\u8fdb\u884c\u4e86\u5c01\u88c5\uff0c\u7b80\u5316\u4e86\u5f00\u53d1\uff0c\u5982\u4e0b\u4f8b\u6240\u793a\uff1a</p> Java<pre><code>class Person{\n    public synchronized void say(){\n        System.out.println(\"person\");\n    }\n}\nclass specPerson extends Person{\n    public synchronized void say(){\n        System.out.println(\"true person from:\");\n        super.say();\n    }\n}\n</code></pre> <p>\u5982\u679c\u521b\u5efa\u4e00\u4e2a<code>specPerson</code>\u5b9e\u4f8b\uff0c\u5e76\u8c03\u7528\u65b9\u6cd5\uff0c\u5219\u8fd9\u6bb5\u4ee3\u7801\u5e76\u6ca1\u6709\u4ea7\u751f\u6b7b\u9501\u3002</p>"},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#_9","title":"\u53ef\u89c1\u6027","text":""},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#sychronized","title":"sychronized","text":"<p>\u540c\u6b65\u4ee3\u7801\u5757(<code>sychronized</code>)\u7b49\u65b9\u5f0f\u4e0d\u4ec5\u80fd\u4fdd\u8bc1\u539f\u5b50\u6027\uff0c\u540c\u65f6\u8fd8\u6709\u5f88\u91cd\u8981\u7684\u4f5c\u7528\u5c31\u662f\u4fdd\u8bc1\u4e86<code>\u5185\u5b58\u53ef\u89c1\u6027</code>\uff0c\u6240\u6709\u7684\u64cd\u4f5c\u5728\u89e3\u9501\u4e4b\u524d\u4f1a\u88ab\u5168\u90e8\u5237\u65b0\u4f1a<code>\u4e3b\u5b58</code>\u3002\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u5f00\u4e86\u591a\u4e2a\u7ebf\u7a0b\uff0c\u5176\u4e2d\u6bcf\u4e2a\u6838\u5bf9\u5e94\u7684<code>cache</code>\uff0c\u4e0e<code>\u4e3b\u5b58</code>\u5e76\u4e0d\u662f\u4e00\u81f4\u66f4\u65b0\u7684\uff0c\u8fd9\u5176\u4e2d\u6d89\u53ca\u5230\u4e86\u810f\u8bfb\uff0c\u91cd\u6392\u5e8f\uff0c\u4e00\u81f4\u6027\u7b49\u7b49\u95ee\u9898\u3002\u800c\u5982\u679c\u4e0d\u4f7f\u7528<code>cache</code>\uff0c\u6027\u80fd\u5dee\u8ddd\u5c06\u4f1a\u662f\u4e0d\u540c\u7684\u91cf\u7ea7\u3002</p>"},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#voliate","title":"voliate","text":"<p>\u4f46\u662f\uff0c\u8003\u8651\u5230<code>sychronized</code>\u7684\u7c92\u5ea6\u5df2\u7ecf\u662f\u7ebf\u7a0b\u7684\u7c92\u5ea6\uff0c\u4e00\u4e2a\u7ebf\u7a0b\u4f1a\u56e0\u4e3a\u6ca1\u6709\u62a2\u5230\u5185\u7f6e\u9501\u4f4d\u88ab\u963b\u585e\u6302\u8d77\uff0c\u8fd9\u6240\u5e26\u6765\u7684<code>\u7ebf\u7a0b\u4e0a\u4e0b\u6587\u5207\u6362</code>\u6210\u672c\u662f\u5f88\u9ad8\u7684\uff0c\u72b6\u6001\u7684\u5b58\u50a8\u4ee5\u53ca\u6062\u590d\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u90fd\u662f\u4e0d\u5fc5\u8981\u7684\u3002\u90a3\u4e48\u5982\u679c\u7a0b\u5e8f\u53ea\u9700\u8981\u8f7b\u91cf\u5316\uff0c\u7279\u5b9a\u573a\u666f\u7684\u53ef\u89c1\u6027\u4fdd\u8bc1\uff0c\u5c31\u9700\u8981\u6362\u4e00\u79cd\u65b9\u5f0f\u3002\u4e0b\u9762\u7684\u6587\u7ae0\u662f\u5f88\u7ecf\u5178\u7684\u89e3\u8bfb\u6587\u7ae0\u3002</p> <p>java volatile\u5173\u952e\u5b57\u89e3\u60d1 - \u7b80\u4e66 (jianshu.com)</p> <p>JVM\u4ee5\u53ca\u5176\u4ed6\u8bed\u8a00\u901a\u8fc7\u5f15\u5165<code>voliate</code>\u5173\u952e\u5b57\u6765\u5b9e\u73b0\u4e0a\u8ff0\u7684\u6548\u679c\u3002</p> <p>\u4f5c\u7528\uff1a\u8f7b\u91cf\u7ea7\u53ef\u89c1\u6027 + \u9632\u6b62\u91cd\u6392\u5e8f</p> <p>\u5b83\u7684\u5177\u4f53\u5b9e\u73b0\u5c31\u662f\u4e24\u4e2a\u6307\u4ee4\uff0c\u5c06\u5f53\u524d\u7684\u7ed3\u679c\u76f4\u63a5\u5237\u56de<code>\u4e3b\u5b58</code>\uff0c\u5e76\u4e14\u4f7f\u5f97\u5176\u4ed6\u7ebf\u7a0b\u7684<code>cahce \u4e3a invalid</code>\uff0c\u5219\u5176\u4ed6\u7ebf\u7a0b\u7684\u8bbf\u95ee\u65f6\u5219\u9700\u8981\u4ece<code>\u4e3b\u5b58</code>\u91cd\u65b0\u52a0\u8f7d\u3002</p> <p>\u6d89\u53ca\u5230\u91cd\u6392\u5e8f\uff0c\u5219\u5bf9<code>voliate</code>\u5b57\u6bb5\u7684\u8bbf\u95ee\u6307\u4ee4\u4f1a\u524d\u540e\u52a0\u4e0a\u5c4f\u969c\uff0c\u9632\u6b62\u91cd\u6392\u5e8f\u3002</p> <p><code>voliate</code>\u7684\u4f7f\u7528\u573a\u666f\uff0c\u9700\u8981\u6ee1\u8db3\u4e24\u4e2a\u6761\u4ef6\uff1a</p> <ul> <li><code>\u53d8\u91cf\u5199\u64cd\u4f5c\u4e0d\u4f9d\u8d56\u4e8e\u5f53\u524d\u503c,\u6bd4\u5982\u5bf9a++\u5c31\u4e0d\u80fd\u4fdd\u8bc1</code></li> <li><code>\u8be5\u53d8\u91cf\u4e0d\u88ab\u5305\u542b\u5728\u5177\u6709\u5176\u4ed6\u53d8\u91cf\u7684\u4e0d\u53d8\u5f0f\u4e2d</code></li> </ul> <p>\u6240\u4ee5\u4e00\u822c\u800c\u8a00\uff0c<code>voliate</code>\u4f7f\u7528\u7684\u60c5\u51b5\u53ea\u6709\u5982\u4e0b\u4e24\u79cd\uff1a</p> <ul> <li>\u72b6\u6001\u6807\u5fd7\u53d8\u91cf</li> <li><code>double check</code></li> </ul> <p>\u9996\u5148\u662f<code>flag</code>\u4f7f\u7528\uff1a</p> <p><code>voliate \u5199</code>\u53ef\u4ee5\u6321\u4f4f\u524d\u9762\u7684\u5199\uff0c<code>voliate \u8bfb</code>\u53ef\u4ee5\u6321\u4f4f\u540e\u9762\u7684\u8bfb\uff0c\u4e5f\u5c31\u662f\u5e38\u89c1\u7684\u6a21\u5f0f\u662f\uff1a</p> <p><code>nomal write -&gt; voliate write</code></p> <p><code>voliate read -&gt; normal read</code></p> Java<pre><code>public class ServerHandler {\n    private volatile isopen;\n    public void run() {\n        if (isopen) {\n           //\u4fc3\u9500\u903b\u8f91\n        } else {\n          //\u6b63\u5e38\u903b\u8f91\n        }\n    }\n    public void setIsopen(boolean isopen) {\n        some op\n        this.isopen = isopen\n    }\n}\n</code></pre> <p>\u8fd9\u91cc\u7684<code>isopen</code>\u5b8c\u7f8e\u7b26\u5408\u8981\u6c42\u3002\u5199\u5165\u4e0d\u9700\u8981\u53c2\u8003\u4e4b\u524d\u7684\u503c\uff0c\u5e76\u4e14\u5176\u5355\u72ec\u53d1\u6325\u4f5c\u7528\u3002\u5f53\u591a\u4e2a\u7ebf\u7a0b\u64cd\u4f5c\u5806\u5185\u5b58\u4e2d\u7684\u540c\u4e00\u4e2a\u8be5\u5bf9\u8c61\u5b9e\u4f8b\u7684\u65f6\u5019\uff0c\u5373\u4f7f\u6709<code>cache</code>\uff0c\u5bf9\u5185\u5b58\u4e2d\u8be5\u5bf9\u8c61\u7684<code>isopen</code>\u4e5f\u80fd\u7acb\u523b\u88ab\u5176\u5b83\u7ebf\u7a0b\u770b\u5230\uff0c\u800c\u4e0d\u7528<code>sychronized</code>\u3002</p> <p>\u7136\u540e\u662f<code>double check</code></p> Java<pre><code>class Singleton{\n    private volatile static Singleton singleton;\n    public static Singleton getInstance(){\n        if(singleton==null){\n            synchronized (Singleton.class){\n                if(singleton==null){\n                    singleton=new Singleton();\n                }\n            }\n        }\n        return singleton;\n    }\n}\n</code></pre> <p>\u8fd9\u4e2a\u5355\u4f8b\u6a21\u5f0f\u7684\u5b9e\u73b0\u4e2d\uff0c\u4f7f\u7528\u4e86<code>voliate</code> + <code>sychronized</code>\uff0c\u5177\u4f53\u5206\u6790\u5982\u4e0b\uff1a</p> <p>\u9996\u5148\uff0c<code>voliate</code>\u8d77\u5230\u526a\u679d\u7684\u4f5c\u7528\u3002\u5982\u679c\u5f88\u591a\u7ebf\u7a0b\u540c\u65f6\u5230<code>sychronized</code>\u7684\u4f4d\u7f6e\uff0c\u5e76\u4e14\u6b64\u65f6\u5b9e\u4f8b\u5df2\u7ecf\u88ab\u521b\u5efa\u5b8c\u6bd5\u4e86\uff0c\u90a3\u4e48\u5c31\u90fd\u8981\u8d70\u4e00\u6b21\u6ca1\u5fc5\u8981\u7684\u7ebf\u7a0b\u6302\u8d77 + \u6062\u590d\uff0c\u4e0a\u4e0b\u6587\u5207\u6362\u7684\u5f00\u9500\u5f88\u5927\u3002\u663e\u7136\uff0c\u5982\u679c\u4f7f\u7528\u4e86<code>voliate</code>\u5173\u952e\u5b57\u8fdb\u884c\u5224\u65ad\uff0c\u90a3\u4e48\u5f88\u591a\u7684\u7ebf\u7a0b\u5b8c\u5168\u6ca1\u5fc5\u8981\u6302\u8d77\uff0c\u76f4\u63a5\u5c31\u53ef\u4ee5\u53ca\u65f6\u770b\u5230\u53d8\u91cf\u7684\u6539\u53d8\uff0c\u5219\u51cf\u5c11\u4e86\u4e0a\u4e0b\u6587\u5207\u6362\u7684\u5f00\u9500\u3002</p> <p>\u5982\u679c\u6ca1\u6709\u4f7f\u7528<code>voliate</code>\u53d8\u91cf\uff0c\u800c\u4f7f\u7528\u666e\u901a\u6808\u5b57\u6bb5\u6765\u4f5c\u4e3a\u526a\u679d\u6761\u4ef6\uff0c\u53ef\u80fd\u4f1a\u51fa\u73b0\u5982\u4e0b\u60c5\u51b5\uff1a</p> <p><code>singletion = new Singletion()</code>\u7684\u6307\u4ee4\u987a\u5e8f\uff1a</p> <ul> <li>\u9996\u5148\uff0c\u5728\u5806\u4e2d\u5206\u914d\u5185\u5b58\uff0c\u8fd9\u662f\u6240\u6709\u6b65\u9aa4\u7684\u524d\u7f6e\u8981\u6c42\uff0c\u6ca1\u6709\u7a7a\u95f4\u5219\u65e0\u9700\u540e\u7eed\u64cd\u4f5c</li> <li>\u7136\u540e\uff0c\u5173\u4e8e\u6808\u4e2d\u5f15\u7528\u53d8\u91cf\u7684\u5206\u914d\uff0c\u4ee5\u53ca\u5806\u4e2d\u5bf9\u8c61\u7684\u5177\u4f53\u521b\u5efa\uff0c\u56e0\u4e3a\u91cd\u6392\u5e8f\u7684\u51fa\u73b0\uff0c\u6ca1\u6709\u5148\u540e\u987a\u5e8f\uff0c\u56e0\u4e3a\u5806\u5185\u5b58\u7684\u7a7a\u95f4\u5df2\u7ecf\u63d0\u524d\u88ab\u89c4\u5212\u5b8c\u6bd5\u3002</li> </ul> <p>\u800c\u5728\u8fd9\u6bb5\u4ee3\u7801\u903b\u8f91\u4e2d\uff0c\u91cd\u6392\u5e8f\u4e00\u65e6\u51fa\u73b0\uff0c\u9664\u975e\u6362\u5199\u6cd5\uff0c\u4e0d\u7136\u65e0\u6cd5\u4fdd\u8bc1\u5b89\u5168\u3002</p> <p>\u6240\u4ee5\u4f7f\u7528<code>voliate</code>\u52a0\u4e0a\u5c4f\u969c\uff0c\u9632\u6b62\u91cd\u6392\u5e8f\u3002</p>"},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#_10","title":"\u7ebf\u7a0b\u5c01\u95ed","text":"<p>\u7ebf\u7a0b\u5c01\u95ed\u662f\u6700\u7b80\u5355\u7684\u7ebf\u7a0b\u5b89\u5168\u7684\u5b9e\u73b0\u65b9\u5f0f\uff0c\u5c40\u90e8\u53d8\u91cf\u4ee5\u53ca<code>ThreadLocal</code>\u90fd\u662f\u7ebf\u7a0b\u5c01\u95ed\u7684\u5b9e\u73b0\u3002</p>"},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#_11","title":"\u7279\u6b8a\u60c5\u51b5","text":"<p>\u5982\u679c\u5728\u591a\u7ebf\u7a0b\u73af\u5883\u4e2d\uff0c\u4e00\u4e2a<code>voliate</code>\u5b57\u6bb5\u53ea\u88ab\u5355\u4e2a\u7ebf\u7a0b\u8fdb\u884c\u5199\u5165\u64cd\u4f5c\uff0c\u5176\u4ed6\u7ebf\u7a0b\u5168\u90e8\u90fd\u53ea\u8bfb\u8be5\u53d8\u91cf\uff0c\u90a3\u4e48\u5176\u5b9e\u4e5f\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u7ebf\u7a0b\u5c01\u95ed\uff0c\u8fd9\u79cd\u7ebf\u7a0b\u5c01\u95ed\u66f4\u4e3a\u5f3a\u5927\uff0c\u56e0\u4e3a\u5b83\u540c\u65f6\u63d0\u4f9b\u4e86\u53ef\u89c1\u6027\u7684\u4fbf\u5229\uff0c\u5176\u4ed6\u7ebf\u7a0b\u53ef\u4ee5\u5b9e\u65f6\u770b\u5230\u53d8\u5316\u5e76\u8bfb\u53d6\u3002</p>"},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#_12","title":"\u6808\u5c01\u95ed","text":"<p>\u5c31\u662f\u4f7f\u7528\u5c40\u90e8\u53d8\u91cf\uff0c\u4e0d\u8981\u9038\u51fa\u5373\u53ef\u3002</p>"},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#threadlocal","title":"ThreadLocal","text":"<p><code>ThreadLocal</code>\u7684\u51fa\u73b0\uff0c\u5c31\u662f\u7ed9\u6bcf\u4e2a\u7ebf\u7a0b\u4e00\u4e2a\u5c01\u95ed\u7684\uff0c\u8d2f\u7a7f\u7ebf\u7a0b\u7684\u53ef\u53d8\u5bf9\u8c61\uff0c\u5176\u901a\u5e38\u4e3a<code>static</code>\u7c7b\u578b\u3002</p> <p>\u5e38\u7528\u4e8e\u6570\u636e\u5e93\u8fde\u63a5\u914d\u7f6e\uff0c\u4ee5\u53ca\u4e0a\u4e0b\u6587\u7684\u7ef4\u62a4\u3002\u6bd4\u5982\u6211\u5728Web\u9879\u76ee\u4e2d\uff0c\u4e00\u4e2a\u8bf7\u6c42\u4e00\u4e2a\u7ebf\u7a0b\uff0c\u800c\u7531\u4e8e\u7528\u6237\u767b\u5f55\u4fe1\u606f\u83b7\u5f97\u7684JWT\u6821\u9a8c\u8d2f\u7a7f\u4e0a\u4e0b\u6587\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528\u5168\u5c40<code>ThreadLocal</code>\u6765\u7ef4\u62a4\u5373\u53ef\u5b9e\u73b0\u9694\u79bb\u4e0e\u6027\u80fd\u63d0\u5347\u3002\u800c\u5728Spark\u6570\u636e\u5e93\u8fde\u63a5\u4e2d\u4e5f\u53ef\u4ee5\u8fdb\u884c\u7ef4\u62a4\uff0c\u9632\u6b62\u4e00\u4e2a<code>record</code>\u4e00\u4e2a<code>conn</code>\u3002Flink\u4e2d\u7531\u4e8e\u7b97\u5b50\u6709\u4fbf\u6377\u7684<code>open</code>\u51fd\u6570\uff0c\u53cd\u5012\u4f7f\u7528\u7684\u8f83\u5c11\u3002</p> <p>\u6d4b\u8bd5\u5982\u4e0b\uff1a</p> Java<pre><code>    @Test\n    public void testThreadLocal(){\n        var threadLocal = new ThreadLocal&lt;String&gt;();\n        CompletableFuture&lt;Void&gt; future1 = CompletableFuture.runAsync(() -&gt; {\n            threadLocal.set(\"t1\");\n        }).thenRun(() -&gt; {\n            System.out.println(\"t1-\" + threadLocal.get());\n        });\n        threadLocal.set(\"t2\");\n        System.out.println(\"t2-\" + threadLocal.get());\n        future1.join();\n    }\n</code></pre> <p>\u6838\u5fc3API\u5982\u4e0b\uff1a</p> Java<pre><code>        //\u521b\u5efa\uff0c\u4f7f\u7528withInitial\u9759\u6001\u65b9\u6cd5\uff0c\u6216\u8005new +set\u65b9\u6cd5\u90fd\u53ef\u4ee5\n        ThreadLocal&lt;String&gt; threadLocal = ThreadLocal.&lt;String&gt;withInitial(() -&gt; {\n            return \"hello\";\n        });\n        //\u83b7\u53d6\u503c\n        String value = threadLocal.get();\n        //\u8bbe\u7f6e\u503c\n        threadLocal.set(\"hello world\");\n        //\u6d88\u9664\n        threadLocal.remove();\n</code></pre> <p><code>remove</code>\u7684\u4f7f\u7528\u662f\u5fc5\u8981\u7684\u3002</p>"},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#_13","title":"\u5bb9\u5668\u4e0e\u5de5\u5177\u7c7b","text":""},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#_14","title":"\u5e76\u53d1\u5bb9\u5668","text":""},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#concurrenthashmap","title":"ConcurrentHashMap","text":"<p>\u7ed9\u5bb9\u5668\u7684\u6bcf\u4e2a\u65b9\u6cd5\u52a0\u9501\uff0c\u4ece\u800c\u5b9e\u73b0\u5bb9\u5668\u7684\u53ef\u9760\u5e76\u53d1\uff0c\u662f\u5e38\u89c4\u601d\u8def\u3002\u4f46\u662f<code>ConcurrentHashMap</code>\u5e76\u6ca1\u6709\u8fd9\u4e48\u505a\uff0c\u4e0d\u80fd\u5bf9\u5b83\u52a0\u9501\uff0c\u5e76\u4e14\u5b83\u4f7f\u7528\u4e86\u66f4\u7ec6\u7c92\u5ea6\u7684\u52a0\u9501\u673a\u5236\uff0c\u6765\u8fbe\u5230\u66f4\u9ad8\u7a0b\u5ea6\u7684\u5e76\u53d1\u3002</p> <p>\u4f5c\u4e3a\u6743\u8861\uff0c\u5b83\u7684<code>size</code>\u4ee5\u53ca<code>empty</code>\u65b9\u6cd5\u8fd4\u56de\u7684\u5b9e\u9645\u4e0a\u53ea\u80fd\u662f\u4f30\u8ba1\u503c\uff0c<code>ConcurrentHashMap</code>\u5c06\u4e3b\u8981\u4f18\u5316\u653e\u5230\u4e86<code>get,put,containsKey,remove</code>\u4e0a\u3002</p> <p>\u5176\u683c\u989d\u5916\u63d0\u4f9b\u4e86\u5e38\u89c1\u7684\u539f\u5b50\u6027\u7684API\uff0c\u4f7f\u7528\u7684\u65f6\u5019\u6ca1\u5fc5\u8981\u989d\u5916\u91cd\u590d\u52a0\u9501\u3002</p> <p>\u5e38\u89c1\u7684\u65b9\u6cd5\u5982\u4e0b\uff1a</p> Java<pre><code>    @Test\n    public void testCollection(){\n        var map = new ConcurrentHashMap&lt;String,Integer&gt;();\n        //\u6ca1\u6709\u5c31\u6dfb\u52a0\uff0c\u5e76\u8fd4\u56de\u65e7\u503c\n        map.putIfAbsent(\"direct-1\",1);\n        //\u6ca1\u6709\u5c31\u6dfb\u52a0\uff0c\u5e76\u8fd4\u56de\u8ba1\u7b97\u7684\u65b0\u503c\n        map.computeIfAbsent(\"computed-3\",(k)-&gt;{\n            return 3;\n        });\n        //\u5982\u679c\u6ca1\u6709\u5c31\u6dfb\u52a0\uff0c\u5426\u5219\u7528\u65b0\u65e7\u8ba1\u7b97\u4e4b\u540e\u518d\u6dfb\u52a0\n        map.merge(\"computed-3\", 4,(oldValue,newValue)-&gt;{\n            return oldValue + newValue;\n        });\n        //\u5982\u679c\u5b58\u5728\u5c31\u8ba1\u7b97\u5e76\u4fee\u6539\uff0c\u5e76\u8fd4\u56de\u8ba1\u7b97\u540e\u7684\u65b0\u503c\n        Integer computedIfPresent = map.computeIfPresent(\"computed-3\", (k, v) -&gt; {\n            return v + 1;\n        });\n        map.forEach((k,v)-&gt;{\n            System.out.println(k+\":\"+v);\n        });\n    }\n</code></pre>"},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#blockingqueue","title":"BlockingQueue","text":"<p>\u963b\u585e\u961f\u5217\u5b8c\u7f8e\u652f\u6301\u6d88\u8d39\u8005-\u751f\u4ea7\u8005\u6a21\u5f0f\u3002API\u5206\u4e3a\u4e24\u7ec4\uff1a</p> <p>\u53ef\u963b\u585e\u7684<code>put-take</code>\u4ee5\u53ca\u53ef\u5b9a\u65f6\u7684<code>offer-poll</code></p> <p></p> <p>ArrayBlockingQueue</p> <p>\u57fa\u4e8e\u6570\u7ec4\u7684\u6709\u754c\u963b\u585e\u961f\u5217\uff0cFIFO\u3002</p> <p>LinkedBlockingQueue</p> <p>\u57fa\u4e8e\u94fe\u8868\u7684\u53ef\u6709\u754c\uff0c\u53ef\u65e0\u754c\u7684\u961f\u5217\uff0cFIFO\u3002\u901a\u8fc7\u5bb9\u91cf\u53c2\u6570\u63a7\u5236\uff0c\u5982\u679c\u7a7a\u53c2\u6784\u9020\u5668\uff0c\u9ed8\u8ba4\u662f\u4e00\u4e2a\u5bb9\u91cf\u4e3a<code>Integer.MAX_VALUE</code>\u7684\u65e0\u754c\u961f\u5217\u3002\u4e00\u822c\u5e94\u7528\u4e8e\u6d88\u8d39\u8005\u603b\u6bd4\u751f\u4ea7\u8005\u6548\u7387\u9ad8\u7684\u60c5\u51b5\u3002</p>"},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#_15","title":"\u7ebf\u7a0b\u6c60\u4e0e\u865a\u62df\u7ebf\u7a0b","text":""},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#executor","title":"Executor\u6846\u67b6","text":"<p>\u4efb\u52a1\u53ef\u4ee5\u653e\u5230\u4e00\u4e2a\u7ebf\u7a0b\u4e32\u884c\u6267\u884c\uff0c\u4e5f\u53ef\u4ee5\u4e00\u4efb\u52a1\u4e00\u7ebf\u7a0b\uff0c\u8fd8\u53ef\u4ee5\u63d0\u4ea4\u5230\u4e00\u4e2a\u7ebf\u7a0b\u6c60\u7b49\u5f85\u6267\u884c\u3002</p> <p>\u6700\u4e3a\u6838\u5fc3\u7684\u5de5\u5382\u7c7b\u5c31\u662f<code>Executors</code></p>"},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#executor_1","title":"Executor","text":"<p>Java\u4e2d\u4efb\u52a1\u6267\u884c\u7684\u4e3b\u8981\u62bd\u8c61\uff0c\u4e0d\u662f<code>Thread</code>\u800c\u662f<code>Executor</code>\uff0c\u5176\u7528\u4e8e\u6267\u884c\u7528\u6237\u63d0\u4ea4\u7684\u4efb\u52a1\uff0c\u9700\u8981\u4f20\u5165\u7684\u662f<code>Runnable</code>\u63a5\u53e3\u7684\u5b9e\u73b0\u7c7b\u3002</p> <p>\u901a\u5e38\u4f7f\u7528<code>Executor</code>\u6765\u907f\u514d\u663e\u5f0f\u7684\u521b\u5efa\u7ebf\u7a0b,\u540c\u65f6\u5b9e\u73b0\u4efb\u52a1\u7684\u63d0\u4ea4\u4e0e\u6267\u884c\u7684\u89e3\u8026\u3002\u5b9e\u73b0\u903b\u8f91\u57fa\u4e8e\u6d88\u8d39\u8005-\u751f\u4ea7\u8005\u6a21\u5f0f\u3002</p> Java<pre><code>public interface Executor {\n\n    /**\n     * Executes the given command at some time in the future.  The command\n     * may execute in a new thread, in a pooled thread, or in the calling\n     * thread, at the discretion of the {@code Executor} implementation.\n     *\n     * @param command the runnable task\n     * @throws RejectedExecutionException if this task cannot be\n     * accepted for execution\n     * @throws NullPointerException if command is null\n     */\n    void execute(Runnable command);\n}\n</code></pre> <p>The Executor implementations provided in this package implement ExecutorService, which is a more extensive interface. The ThreadPoolExecutor class provides an extensible thread pool implementation. The Executors class provides convenient factory methods for these Executors. Memory consistency effects: Actions in a thread prior to submitting a Runnable object to an Executor happen-before its execution begins, perhaps in another thread.</p> <p><code>ExcutorService</code>\u662f<code>Executor</code>\u7684\u4e00\u4e2a\u5b50\u63a5\u53e3\uff0c\u662f\u5bf9\u5176\u7684\u6269\u5c55\u3002</p> <p>\u521b\u5efa</p> <p>\u7ebf\u7a0b\u6c60\u7684\u521b\u5efa\u901a\u8fc7<code>Executors</code>\u5de5\u5177\u7c7b\u7684\u9759\u6001\u65b9\u6cd5\u53ef\u4ee5\u521b\u5efa,</p> <p>\u9996\u5148\uff0c\u6240\u6709\u7684\u7ebf\u7a0b\u6c60\u90fd\u91c7\u7528\u61d2\u52a0\u8f7d\u3002</p> <ul> <li><code>newFixedThreadPoll</code>\u521b\u5efa\u4e00\u4e2a\u56fa\u5b9a\u957f\u5ea6\u7684\u7ebf\u7a0b\u6c60\u3002</li> <li><code>newSingleThreadExecutor</code>\u521b\u5efa\u5355\u4e2aExecutorService</li> <li><code>newScheduledThreadPoll</code>\u521b\u5efa\u5b9a\u65f6\u4efb\u52a1</li> <li><code>newCachedThreadPoll</code>\u521b\u5efa\u4e00\u4e2a\u65e0\u9650\u957f\u7684\uff0c\u53ef\u52a8\u6001\u8c03\u6574\u7684\u7ebf\u7a0b\u6c60</li> </ul> <p>\u63d0\u4ea4\u4efb\u52a1</p> <p>\u901a\u8fc7<code>submit\u65b9\u6cd5</code>,\u53ef\u4ee5\u4f20\u5165<code>callable/runnable</code></p> Java<pre><code>        ExecutorService executorService = Executors.newSingleThreadExecutor();\n        Future&lt;String&gt; future = executorService.submit(() -&gt; {\n            return \"hello\";\n        });\n</code></pre> <p>\u5173\u95ed</p> <p>JVM\u8fdb\u7a0b\uff0c\u53ea\u6709\u5728\u6240\u6709\u975e\u5b88\u62a4\u7ebf\u7a0b\u6267\u884c\u5b8c\u6bd5\u624d\u4f1a\u5173\u95ed\u3002\u6240\u4ee5\u7ebf\u7a0b\u6c60\u7684\u5173\u95ed\u5341\u5206\u91cd\u8981\u3002\u901a\u5e38\u4f7f\u7528<code>ExecutorService</code>\u5e76\u4f7f\u7528\u5b83\u7684\u65b9\u6cd5\u6765\u5173\u95ed\u3002</p> <ul> <li><code>shutdown</code>\u5e73\u7f13\u7684\u5173\u95ed\uff0c\u4f1a\u7b49\u5f85\u6240\u6709\u4efb\u52a1\u7ed3\u675f</li> <li><code>showdownNow</code>\u7acb\u523b\u5173\u95ed</li> <li><code>awaitTermnation</code>\u9650\u65f6\u7b49\u5f85\u5173\u95ed\u3002</li> </ul>"},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#future","title":"Future","text":"<p><code>Executor</code>\u63a5\u53d7\u7684\u53c2\u6570\u662f<code>Runnable</code>\u5b9e\u73b0\u7c7b\uff0c\u4f46\u662f\u8fd9\u5c31\u4ee3\u8868\u7740\u8fd9\u4e2a\u4efb\u52a1\u6ca1\u6709\u8fd4\u56de\u503c\uff0c\u4e0d\u80fd\u629b\u51fa\u5f02\u5e38\u3002</p> <p>\u800c\u5982\u679c\u6709\u4e0a\u8ff0\u9700\u6c42\uff0c<code>Callable</code>\u662f\u4e00\u4e2a\u66f4\u597d\u5730\u9009\u62e9\uff0c\u5176\u6709\u8fd4\u56de\u503c\u6216\u629b\u51fa\u5f02\u5e38\u3002</p> <p>\u9996\u5148\uff0c\u662fJDK5\u7684Future\uff0c\u5176\u53ef\u4ee5\u4f20\u5165\u4e00\u4e2a<code>Callable\u4efb\u52a1</code>\u6765\u521b\u5efa\u3002</p> <p>\u5982\u679c\u4f7f\u7528<code>Executors</code>\uff0c\u5219\u5982\u4e0b\uff1a</p> Java<pre><code>        ExecutorService executorService = Executors.newSingleThreadExecutor();\n        Future&lt;String&gt; future = executorService.submit(() -&gt; {\n            return \"hello\";\n        });\n</code></pre> <p>\u7136\u540e\u901a\u8fc7<code>get,isDone\u7b49\u65b9\u5f0f</code>\u6765\u5728\u9700\u8981\u7684\u65f6\u5019\u540c\u6b65\u963b\u585e\u83b7\u53d6\u7ed3\u679c\u3002</p>"},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#completablefuture","title":"CompletableFuture","text":"<p>\u4eceJDK8\u5f15\u5165\uff0c\u5b9e\u9645\u4e0aNetty\u7b49\u6846\u67b6\u65e9\u4e8eJDK\u5df2\u7ecf\u5b9e\u73b0\u4e86\u5177\u6709\u5f02\u6b65\u56de\u8c03\u529f\u80fd\u7684Future\uff0cScala\u4e5f\u6709\u5f88\u5b8c\u5907\u7684Future\u5b9e\u73b0\u3002</p> <p>\u521b\u5efa</p> <ul> <li><code>runAsync</code></li> <li><code>supplyAsync</code></li> </ul> <p>\u5176\u4e2d<code>runAsync</code>\u9700\u8981\u4f20\u5165<code>Runnable</code>\uff0c\u4e5f\u5c31\u610f\u5473\u7740\u6ca1\u6709\u8fd4\u56de\u503c\u3002\u800c<code>supplyAsync</code>\uff0c\u9700\u8981\u4f20\u5165<code>supplier</code>\u7684\u5b9e\u73b0\u7c7b\u3002</p> <p><code>Supplier</code>\u63a5\u53e3\u4eceJDK8\u5f15\u5165\uff0c\u662f\u4e00\u4e2a\u51fd\u6570\u5f0f\u63a5\u53e3\uff0c\u901a\u5e38\u4f7f\u7528<code>lambda</code>\u8868\u8fbe\u5f0f\u8fdb\u884c\u5b9e\u73b0\uff0c\u5176\u542b\u4e49\u662f\u65e0\u53c2\u6570\u5e76\u4e14\u6709\u8fd4\u56de\u503c\u3002</p> <p>\u4e24\u4e2a\u65b9\u6cd5\u5747\u53ef\u4f20\u5165\u7528\u6237\u81ea\u5df1\u521b\u5efa\u7684\u7ebf\u7a0b\u6c60\uff0c\u7528\u4e8e\u7ed9\u5f02\u6b65\u4efb\u52a1\u63d0\u4f9b\u7ebf\u7a0b\u8d44\u6e90\u3002</p> <p>\u83b7\u53d6\u7ed3\u679c</p> <ul> <li><code>get</code>,\u9650\u5b9a\u65f6\u95f4\u53ef\u9009\u3002</li> <li><code>join</code></li> </ul> <p>\u4e24\u8005\u7684\u4e3b\u8981\u533a\u522b\u5728\u4e8e\u5f02\u5e38\u5904\u7406\uff0c\u4e00\u822c\u4e25\u683c\u5f02\u5e38\u5904\u7406\u7684\u8bdd\u9009\u62e9<code>get</code></p> <p>\u5f02\u6b65\u56de\u8c03</p> <ul> <li>\u65e0\u53c2\u65e0\u8fd4\u56de\u503c\uff1a<code>thenRun/thenRunAsync</code></li> <li>\u6709\u53c2\u65e0\u8fd4\u56de\u503c\uff1a<code>thenAccept/thenAcceptAsync</code></li> <li>\u6709\u53c2\u6709\u8fd4\u56de\u503c\uff1a<code>thenApply/thenApplyAsync</code></li> </ul> <p>\u5f02\u5e38\u5904\u7406\u56de\u8c03</p> <ul> <li>\u4efb\u52a1\u5f02\u5e38\u6267\u884c\u56de\u8c03\uff1a<code>exceptionally</code></li> <li>\u4efb\u52a1\u6267\u884c\u5b8c\u6267\u884c\u56de\u8c03,\u65e0\u8fd4\u56de\u503c:<code>whenComplete</code></li> <li>\u4efb\u52a1\u6267\u884c\u5b8c\u6267\u884c\u56de\u8c03\uff0c\u6709\u8fd4\u56de\u503c\uff1a<code>handle</code></li> </ul> <p>\u4e24\u4e2a\u4efb\u52a1\u7ec4\u5408\u56de\u8c03</p> <p>and\u5173\u7cfb</p> <ul> <li><code>runAfterBoth</code>:\u65e0\u53c2\uff0c\u65e0\u8fd4\u56de\u503c</li> <li><code>thenAcceptBoth</code>\uff1a\u6709\u53c2\uff0c\u65e0\u8fd4\u56de\u503c</li> <li><code>thenCombine</code>\uff1a\u6709\u53c2\uff0c\u6709\u8fd4\u56de\u503c</li> </ul> <p>OR\u5173\u7cfb</p> <ul> <li><code>runAfterEither</code></li> <li><code>acceptEither</code></li> <li><code>applyToEither</code></li> </ul> <p>\u591a\u4e2a\u4efb\u52a1\u7ec4\u5408\u56de\u8c03</p> <ul> <li><code>allOf</code></li> <li><code>anyOf</code></li> </ul>"},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#asynctool","title":"asyncTool","text":"<p>\u4eac\u4e1c\u5f00\u6e90\u7684\u6846\u67b6\uff0c\u57fa\u4e8e<code>CompletableFuture</code>\u5c01\u88c5\uff0c\u6211\u7684\u89e3\u6790\u6587\u7ae0\u5982\u4e0b\uff1a</p> <p>asyncTool\u6846\u67b6\u68b3\u7406 - lx-bigdata (melodylx666.github.io)</p>"},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#_16","title":"\u7ebf\u7a0b\u6c60\u6df1\u5165","text":""},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#threadlocal_1","title":"\u4e0eThreadLocal","text":"<p>\u90fd\u77e5\u9053ThreadLocal\u53ef\u4ee5\u5b9e\u73b0\u7ebf\u7a0b\u5c01\u95ed\uff0c\u800c\u7ebf\u7a0b\u6c60\u4f1a\u590d\u7528\u7ebf\u7a0b\uff0c\u90a3\u4e48\u4f1a\u51fa\u73b0\u4e00\u4e2a\u95ee\u9898\uff1a\u810f\u6570\u636e\u7684\u8bfb\u53d6</p> <p>\u4ee3\u7801\u6d4b\u8bd5\u5982\u4e0b\uff1a</p> Java<pre><code>    public void test04() throws ExecutionException, InterruptedException {\n        ExecutorService executorService = Executors.newCachedThreadPool();\n        ThreadLocal&lt;String&gt; threadLocal = new ThreadLocal&lt;&gt;();\n        CompletableFuture&lt;Void&gt; future1 = CompletableFuture.runAsync(() -&gt; {\n            System.out.println(\"thread1:\" + threadLocal.get());\n            threadLocal.set(\"thread1\");\n        },executorService);\n        CompletableFuture&lt;Void&gt; future = future1.thenRunAsync(() -&gt; {\n            System.out.println(\"thread2:\" + threadLocal.get());\n            threadLocal.set(\"thread2\");\n        },executorService);\n        future.get();\n    }\n</code></pre> <p>\u8fd9\u91cc\u4f7f\u7528\u7684\u7ebf\u7a0b\u6c60\u662f\u65e0\u754c\u7ebf\u7a0b\u6c60\uff0c\u5219\u6ca1\u6709\u51fa\u73b0\u810f\u8bfb\u7684\u60c5\u51b5\uff0c\u7ed3\u679c\u4e3a\uff1a</p> <p><code>thread1:null</code></p> <p><code>thread2:null</code></p> <p>\u4f46\u662f\u5982\u679c\u6362\u4e3a<code>singleThreadPoll</code>\uff0c\u5219\u7ed3\u679c\u5982\u4e0b\uff1a</p> <p><code>thread1:null</code></p> <p><code>thread2:thread1</code></p> <p>\u89e3\u51b3\u529e\u6cd5\u5c31\u662f\u53ca\u65f6<code>remove</code>\u6216\u8005\u4e0d\u4f7f\u7528\u3002</p> <p>\u663e\u7136\u8fd9\u662f\u4e0d\u53ef\u4ee5\u51fa\u73b0\u7684\u3002\u6bd4\u5982\u4e4b\u524d\u505a\u7684\u90a3\u4e2aWeb\u9879\u76ee\uff0c\u5982\u679c\u6ca1\u6709\u53ca\u65f6\u6e05\u7406\uff0c\u5219\u53ef\u80fd\u51fa\u73b0\u767b\u5f55\u65f6\u83b7\u5f97\u7684\u662f\u5176\u4ed6\u4eba\u7684\u4fe1\u606f\u3002</p>"},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#_17","title":"\u5927\u5c0f","text":"<p>\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u6838\u5fc3\u6570\u91cf\u4e3a<code>n</code>,\u5219<code>size = n + 1</code></p>"},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#threadpoolexecutor","title":"ThreadPoolExecutor","text":"<p>\u5b98\u65b9\u5efa\u8bae\u7684\u662f\u4f7f\u7528\u5c01\u88c5\u597d\u7684\u7ebf\u7a0b\u670d\u52a1\uff0c<code>threadPoolExcutor</code>\u662f\u7528\u6765\u8fdb\u884c\u5b9a\u5236\u7ebf\u7a0b\u6c60\u7684\u3002</p> <p>\u5176\u6784\u9020\u51fd\u6570\u5982\u4e0b\uff1a</p> Java<pre><code>    public ThreadPoolExecutor(int corePoolSize,\n                              int maximumPoolSize,\n                              long keepAliveTime,\n                              TimeUnit unit,\n                              BlockingQueue&lt;Runnable&gt; workQueue) {\n        this(corePoolSize, maximumPoolSize, keepAliveTime, unit, workQueue,\n             Executors.defaultThreadFactory(), defaultHandler);\n    }\n</code></pre> <p>\u7ebf\u7a0b\u7684\u521b\u5efa\u548c\u9500\u6bc1</p> <p>\u4efb\u52a1\u6570\u91cf\u4ece0\u5f00\u59cb\uff0c\u6700\u7ec8\u53ef\u80fd\u8fdc\u591a\u4e8e\u7ebf\u7a0b\u6c60\u7684\u7ebf\u7a0b\u6570\u91cf\u3002</p> <p><code>corePoolSize</code>,<code>maxPoolSize</code>,<code>keepAliveTime</code>,<code>unit</code>\u5171\u540c\u51b3\u5b9a\u4e86\u7ebf\u7a0b\u7684\u521b\u5efa\u4ee5\u53ca\u9500\u6bc1\u3002</p> <p>\u5bf9\u4e8e\u65b0\u6765\u7684\u4efb\u52a1\uff0c\u5982\u679c<code>curSize &lt; corePoolSize</code>,\u5219\u65e0\u8bba\u662f\u5426\u6709\u5176\u4ed6\u7a7a\u95f2\u7ebf\u7a0b\uff0c\u90fd\u4f1a\u521b\u5efa\u65b0\u7ebf\u7a0b\u6765\u6267\u884c\u4efb\u52a1\u3002</p> <p>\u5982\u679c<code>corePoolSize=maxPoolSize</code>\uff0c\u5219\u76f8\u5f53\u4e8e\u521b\u5efa\u4e86\u4e00\u4e2a\u56fa\u5b9a\u5927\u5c0f\u7684\u7ebf\u7a0b\u6c60</p> <p>\u5982\u679c<code>maxPoolSize = Integer.MAX_VALUE</code>\uff0c\u5219\u76f8\u5f53\u4e8e\u521b\u5efa\u4e86\u4e00\u4e2a\u51e0\u4e4e\u65e0\u754c\u7684\u7ebf\u7a0b\u6c60\u3002</p> <p>\u7ba1\u7406\u4efb\u52a1\u7684\u961f\u5217</p> <p>\u901a\u8fc7\u7528\u6237\u63d0\u4f9b\u7684<code>BlockingQueue</code>\u6765\u4fdd\u5b58\u7b49\u5f85\u6267\u884c\u7684\u4efb\u52a1\u3002</p> <p>\u57fa\u672c\u7684\u4efb\u52a1\u6392\u961f\u65b9\u6cd5\u67093\u79cd\uff1a</p> <ul> <li><code>unbounded queue</code></li> <li><code>bounded queue</code></li> <li><code>direct handsoff</code></li> </ul> <p>\u4f7f\u7528\u6709\u754c\u961f\u5217\u6765\u7ba1\u7406\uff0c\u901a\u5e38\u4f20\u5165<code>ArrayBlockingQueue</code>\uff0c\u6709\u5927\u5c0f\u53c2\u6570\u7684<code>LinkedBlockingQueue</code>\uff0c<code>PriorityBlockingQueue(\u53ef\u4ee5\u4e0d\u662fFIFO)</code>\u4f5c\u4e3a\u4efb\u52a1\u961f\u5217\u3002\u5982\u679c\u961f\u5217\u6ee1\u4e86\uff0c\u53ef\u4ee5\u4f7f\u7528\u9971\u548c\u7b56\u7565\u6765\u5e94\u5bf9\u3002</p> <p>\u800c\u5982\u679c\u4f7f\u7528\u65e0\u754c\u961f\u5217\uff0c\u53ef\u4ee5\u4f7f\u7528<code>\u65e0\u5927\u5c0f\u53c2\u6570\u7684LinkedBlockingQueue</code>\u6216\u8005<code>SyncQueue(\u53ea\u662f\u4f5c\u4e3a\u6865\u63a5)</code>\u3002</p> <p><code>Executors</code>\u6240\u63d0\u4f9b\u7684\u5c01\u88c5\u597d\u7684<code>newFixedThreadPool</code>\u4ee5\u53ca<code>newSingleThreadPool</code>\u9ed8\u8ba4\u90fd\u4f7f\u7528\u65e0\u754c\u961f\u5217\u7ba1\u7406\u4efb\u52a1\u3002\u4e00\u822c<code>newCachedThreadPool</code>\u662f\u4e00\u4e2a\u5f88\u597d\u7684\u9009\u62e9\u3002</p> <p><code>\u5982\u679c\u4efb\u52a1\u4e4b\u95f4\u6709\u4f9d\u8d56\u5173\u7cfb\uff0c\u90a3\u4e48\u4e0d\u5e94\u8be5\u4e3a\u4efb\u52a1\u961f\u5217\u8bbe\u7f6e\u5927\u5c0f\u9650\u5236\uff0c\u9632\u6b62\u7ebf\u7a0b\u9965\u997f</code>\u3002</p> <p>\u9971\u548c\u7b56\u7565</p> <p>\u53ea\u5728\u4f7f\u7528\u6709\u754c\u961f\u5217\u7ba1\u7406\u4efb\u52a1\uff0c\u5e76\u4e14\u961f\u5217\u5df2\u7ecf\u6ee1\u4e86\u7684\u60c5\u51b5\u4e0b\u53d1\u6325\u4f5c\u7528\u3002</p> <p>\u5e38\u89c1\u7684\u6709\u5982\u4e0b\u51e0\u79cd\uff1a</p> <ul> <li><code>Abort</code>:\u76f4\u63a5\u629b\u5f03</li> <li><code>Caller-Runs</code>\uff1a\u4e0d\u4f1a\u629b\u5f03\u4efb\u52a1\uff0c\u4f46\u662f\u5c06\u5176\u56de\u9000\u7ed9\u8c03\u7528<code>execute</code>\u7684\u4e3b\u7ebf\u7a0b\u53bb\u8c03\u7528\u3002</li> </ul> <p><code>Caller-Runs</code>\u793a\u4f8b\u5982\u4e0b\uff0c\u8fd0\u884c\u53d1\u73b0\u4efb\u52a1\u786e\u5b9e\u6709\u5728<code>main</code>\u4e2d\u6267\u884c\u7684\u3002</p> Java<pre><code>    @Test\n    public void test06() throws ExecutionException, InterruptedException {\n        // \u521b\u5efa\u4e00\u4e2a\u56fa\u5b9a\u5927\u5c0f\u7684\u7ebf\u7a0b\u6c60\uff0c\u6838\u5fc3\u7ebf\u7a0b\u6570\u548c\u6700\u5927\u7ebf\u7a0b\u6570\u90fd\u4e3a2\uff0c\u961f\u5217\u5bb9\u91cf\u4e3a2\n        ThreadPoolExecutor executor = new ThreadPoolExecutor(\n                2, // \u6838\u5fc3\u7ebf\u7a0b\u6570\n                2, // \u6700\u5927\u7ebf\u7a0b\u6570\n                0L, TimeUnit.MILLISECONDS, // \u7ebf\u7a0b\u7a7a\u95f2\u65f6\u95f4\n                new ArrayBlockingQueue&lt;&gt;(2), // \u4efb\u52a1\u961f\u5217\n                new ThreadPoolExecutor.CallerRunsPolicy() // \u62d2\u7edd\u7b56\u7565\n        );\n\n        // \u63d0\u4ea45\u4e2a\u4efb\u52a1\n        for (int i = 0; i &lt; 5; i++) {\n            final int taskNumber = i;\n            executor.execute(() -&gt; {\n                System.out.println(\"Task \" + taskNumber + \" is running in \" + Thread.currentThread().getName());\n                try {\n                    // \u6a21\u62df\u4efb\u52a1\u6267\u884c\u65f6\u95f4\n                    Thread.sleep(1000);\n                } catch (InterruptedException e) {\n                    Thread.currentThread().interrupt();\n                }\n            });\n        }\n    }\n</code></pre> <p>\u7ebf\u7a0b\u5de5\u5382</p> <p>\u4efb\u52a1\u7684\u62bd\u8c61\u662f<code>runnable</code>\uff0c\u6267\u884c\u8f7d\u4f53\u662f<code>Thread</code>\u3002\u800c\u7ebf\u7a0b\u6c60\u6bcf\u6b21\u521b\u5efa\u7ebf\u7a0b\uff0c\u90fd\u662f\u4f7f\u7528<code>ThreadFactory</code>\u6765\u521b\u5efa\u3002\u8fd9\u4e2a\u63a5\u53e3\u5982\u4e0b\uff1a</p> Java<pre><code>public interface ThreadFactory {\n\n    /**\n     * Constructs a new {@code Thread}.  Implementations may also initialize\n     * priority, name, daemon status, {@code ThreadGroup}, etc.\n     *\n     * @param r a runnable to be executed by new thread instance\n     * @return constructed thread, or {@code null} if the request to\n     *         create a thread is rejected\n     */\n    Thread newThread(Runnable r);\n}\n</code></pre> <p>\u5219\u6211\u4eec\u53ef\u4ee5\u5b9e\u73b0\u8fd9\u4e2a\u63a5\u53e3\uff0c\u5e76\u5b9a\u5236<code>Thread</code>\u7c7b\uff0c\u7136\u540e\u5b9e\u73b0\u81ea\u5df1\u7684\u7ebf\u7a0b\u5de5\u5382\u3002</p>"},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#_18","title":"\u865a\u62df\u7ebf\u7a0b","text":"<p>\u5f97\u7269\u6280\u672f\u7684\u5206\u6790\uff1a</p> <p>\u865a\u62df\u7ebf\u7a0b\u539f\u7406\u53ca\u6027\u80fd\u5206\u6790 - \u77e5\u4e4e (zhihu.com)</p>"},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#_19","title":"\u5f02\u6b65\u7f16\u7a0b\u7684\u51e0\u79cd\u5f62\u5f0f","text":"<p>\u4e0b\u9762\u8ba8\u8bba\u5185\u90e8\u903b\u8f91\u7684\u4e0d\u540c</p> <p>\u6709\u6808\u534f\u7a0b</p> <p>\u53c8\u79f0\u865a\u62df\u7ebf\u7a0b\uff0cJDK21\u4e0eGo\u8bed\u8a00\u7684\u865a\u62df\u7ebf\u7a0b\uff0c\u4ee5\u53ca<code>goroutine</code>\u5747\u4e3a\u6709\u6808\u534f\u7a0b\u3002</p> <p>\u65e0\u6808\u534f\u7a0b</p> <p>Kotlin\u4e2d\u7684\u5b9e\u73b0\u5c31\u662f\u65e0\u6808\u7684\u3002</p> <p>\u56de\u8c03\u8bed\u6cd5\u7cd6</p> <p>TS\u4e2d\u7684\u5b9e\u73b0\u5c31\u662f\u5982\u6b64\u3002</p> <p>\u666e\u901a\u7684<code>Future</code>,\u5728\u5b89\u88c5\u56de\u8c03\u7684\u65f6\u5019\u9700\u8981\u8c03\u7528<code>then</code>\u7b49\u65b9\u6cd5\u5199\u5728\u5176\u4e2d\uff0c\u4f46\u662f\u5982\u679c\u5c42\u7ea7\u8fc7\u6df1\uff0c\u5219\u4ee3\u7801\u6e05\u6670\u5ea6\u5927\u5927\u964d\u4f4e\u3002\u6bd4\u5982<code>JDK8 CompletableFuture</code></p> <p>\u4f46\u662f\u5982\u679c\u53ef\u4ee5\u5c06\u5176\u50cf\u540c\u6b65\u53d8\u91cf\u4e00\u6837\u63a5\u4f4f\uff0c\u6b63\u5e38\u64cd\u4f5c\uff0c\u7531\u7f16\u8bd1\u5668\u5206\u6790\u540e\u4e00\u4e2a\u4e2a\u5b89\u88c5\u5728<code>future</code>\u90e8\u5206\u540e\u9762\uff0c\u5219\u4f1a\u65b9\u4fbf\u5f88\u591a\u3002<code>TS</code>\u5c31\u662f\u8fd9\u4e48\u5b9e\u73b0\u7684\uff0c<code>async + await</code>\u6807\u8bb0\u4e00\u4e2a\u5f02\u6b65\u65b9\u6cd5\uff0c\u8fd4\u56de\u503c\u662f<code>Future</code>\uff0c\u7136\u540e\u6b63\u5e38\u4f7f\u7528\u5373\u53ef\u3002</p> <p>\u800c<code>\u65e0\u6808\u534f\u7a0b</code>\u66b4\u9732\u7ed9\u7528\u6237\u7684\u540c\u6837\u9700\u8981\u662f<code>async + await</code>\uff0c\u4e24\u8005\u90fd\u6709\u67d3\u8272\u95ee\u9898\u3002</p> <p>\u4f46\u662f\u865a\u62df\u7ebf\u7a0b\u5c31\u6ca1\u6709\u8fd9\u4e2a\u95ee\u9898\uff0c\u5e76\u4e14\u524d\u9762\u7684<code>Future</code>\u5728\u7528\u6237\u4ee3\u7801\u7ea7\u522b\uff0c\u9700\u8981\u4f9d\u6258\u4e8e\u7ebf\u7a0b\u6c60\uff0c\u800c\u865a\u62df\u7ebf\u7a0b\u53ef\u4ee5\u5728\u7528\u6237\u4ee3\u7801\u7ea7\u522b\u5b8c\u5168\u66ff\u6362\u6389\u7ebf\u7a0b\u6c60\u3002\u5176\u5b9e\u73b0\u7684\u76ee\u6807\u5c31\u662f<code>write sync and run async</code></p>"},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#api","title":"\u6a21\u578b\u4e0eAPI","text":"<p>\u7ebf\u7a0b\u6a21\u578b</p> <p>\u64cd\u4f5c\u7cfb\u7edf\u4efb\u52a1\u901a\u8fc7<code>OS thread</code>\u6765\u5b9e\u73b0\uff0c\u800c<code>JVM</code>\u4e2d\u4e00\u4e2a<code>Thread</code>\u5c31\u662f\u5bf9\u5e94\u7684\u4e00\u4e2a<code>OS thread</code>\u7684\u5c01\u88c5\uff0c\u79f0\u4e3a\u5e73\u53f0\u7ebf\u7a0b\u3002</p> <p>\u800c<code>\u865a\u62df\u7ebf\u7a0b</code>\u662f\u5bf9\u5e94<code>Virtual Thread</code>\uff0c\u662f\u4e00\u79cd\u66f4\u8f7b\u91cf\u7ea7\u7684\u7ebf\u7a0b\u3002\u5176\u4e2d\u7684\u4efb\u52a1\u901a\u8fc7<code>Carrier Thread</code>\u4e5f\u5c31\u662f\u8f7d\u4f53\u7ebf\u7a0b\u6765\u6267\u884c\u3002\u8f7d\u4f53\u7ebf\u7a0b\u4e00\u822c\u90fd\u662f\u5e73\u53f0\u7ebf\u7a0b</p> <p>\u5173\u7cfb\u5982\u4e0b\uff1a</p> <p></p> <p>\u5b9e\u8d28\u4e0a\u8bf4\uff0c\u65e0\u8bba\u662f\u5728\u54ea\u91cc\u7684\u8fdb\u7a0b\uff0c\u8fd8\u662f\u7ebf\u7a0b\uff0c\u8fd8\u662f\u865a\u62df\u7ebf\u7a0b\uff0c\u672c\u8d28\u4e0a\u90fd\u662f\u8fd0\u884c\u4e0a\u4e0b\u6587\u7684\u5c01\u88c5\u800c\u5df2\uff0c\u53ea\u4e0d\u8fc7\u662f\u8303\u56f4\u7684\u5927\u5c0f\u95ee\u9898\uff0c\u5728\u8fd9\u91cc\u7684\u534f\u7a0b\uff0c\u4e5f\u5c31\u662f\u66f4\u7ec6\u7c92\u5ea6\u7684\u8fd0\u884c\u4e0a\u4e0b\u6587\u3002</p> <p>API</p> <p>1.\u76f4\u63a5\u5f00\u59cb\u4e00\u4e2a<code>runnable\u4efb\u52a1</code></p> Java<pre><code>        //1.\u76f4\u63a5\u521b\u5efa\n        Thread vt = Thread.startVirtualThread(() -&gt; {\n            System.out.println(\"hello\");\n        });\n        try {\n            vt.join();\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre> <p>2.\u624b\u52a8\u6267\u884c</p> Java<pre><code>    @Test\n    public void vtDemo2(){\n        Thread vt = Thread.ofVirtual().unstarted(() -&gt; {\n            System.out.println(\"hello\");\n        });\n        vt.start();\n        try {\n            vt.join();\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre> <p>3.\u901a\u8fc7\u7ebf\u7a0b\u5de5\u5382\u521b\u5efa</p> Java<pre><code>    @Test\n    public void vtDemo3(){\n        var factory = Thread.ofVirtual().factory();\n        var thread = factory.newThread(() -&gt; {\n            System.out.println(\"hello\");\n        });\n        thread.start();\n        try {\n            thread.join();\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre> <p>4.\u901a\u8fc7<code>\u5de5\u5177\u7c7b</code></p> <p>\u8fd9\u91cc\u5e95\u5c42\u601d\u8def\u5c31\u662f\u548c\u81ea\u5b9a\u4e49\u7ebf\u7a0b\u6c60\u4e00\u81f4\uff0c\u4f46\u662fJDK\u5df2\u7ecf\u5c01\u88c5\u597d\u4e86\uff0c\u7ebf\u7a0b\u6c60\u521b\u5efa\u7ebf\u7a0b\u7684\u65f6\u5019\u76f4\u63a5\u901a\u8fc7\u7ebf\u7a0b\u5de5\u5382\u521b\u5efa\u865a\u62df\u7ebf\u7a0b\u5c31\u53ef\u4ee5\u4e86\u3002\u540c\u65f6\u8fd8\u53ef\u4ee5\u4e0d\u6b62\u4f20\u9012<code>runnable</code>\uff0c\u4e5f\u53ef\u4ee5\u4f20\u9012<code>callable</code></p> Java<pre><code>    @Test\n    public void vtDemo4(){\n        var pool = Executors.newVirtualThreadPerTaskExecutor();\n        var future = pool.submit(() -&gt; {\n            System.out.println(\"hello\");\n        });\n        try {\n            future.get();\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre>"},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#_20","title":"\u5e95\u5c42\u539f\u7406","text":"<p>JDK19 - \u865a\u62df\u7ebf\u7a0b\u8be6\u89e3-CSDN\u535a\u5ba2</p> <p>\u5982\u679c\u4f7f\u7528\u5e38\u89c4\u7684\u7ebf\u7a0b\u6a21\u578b\uff0c\u5219\u4e3a<code>1:1</code>\u6a21\u578b\uff0c\u5219\u5927\u91cf\u7684\u5e73\u53f0\u7ebf\u7a0b\u8c03\u5ea6\uff0c\u5c31\u7b49\u7528\u4e8e\u5927\u91cf\u7684\u5185\u6838\u7ebf\u7a0b\u8c03\u5ea6\uff0c\u4f1a\u5bfc\u81f4\u5927\u91cf\u7684\u4e0a\u4e0b\u6587\u5207\u6362\uff0c\u72b6\u6001\u7684\u4fdd\u5b58\u4e0e\u6062\u590d\u73b0\u573a\u7684\u6210\u672c\u662f\u5f88\u9ad8\u7684\u3002</p> <p>\u800c\u5982\u679c\u5c06\u4efb\u52a1\u6240\u9700\u8981\u7684\u4e0a\u4e0b\u6587\u505a\u66f4\u7ec6\u7c92\u5ea6\u7684\u5c01\u88c5\u548c\u9694\u79bb\uff0c\u5219\u51fa\u73b0\u4e86\u865a\u62df\u7ebf\u7a0b\u3002\u800c\u6574\u4e2a\u865a\u62df\u7ebf\u7a0b\u7684\u6838\u5fc3\u5c31\u662f\u4e0a\u4e0b\u6587\u7684\u62bd\u8c61\u4ee5\u53ca\u8c03\u5ea6\u3002</p> <p>\u5176\u5b9e\u534f\u7a0b(\u65e0\u6808/\u6709\u6808)\u6982\u5ff5\u6bd4\u7ebf\u7a0b\u51fa\u73b0\u7684\u66f4\u65e9\uff0c\u4e5f\u5c31\u662f\u534f\u4f5c\u65b9\u5f0f\u7684\u4efb\u52a1\u8c03\u5ea6\u5176\u5b9e\u65e9\u4e8e\u62a2\u5360\u65b9\u6cd5\u7684\u4efb\u52a1\u8c03\u5ea6(\u7ebf\u7a0b)\u3002\u5176\u5b9e\u73b0\u5c31\u662f\u5c06\u7ba1\u7406\u6743\u4ea4\u7ed9\u7528\u6237\u6001\u8fdb\u7a0b\u7ba1\u7406\uff0c\u800c\u4e0d\u662f\u5c06\u7ba1\u7406\u6743\u4ea4\u7ed9<code>OS</code>\u3002</p> <p> \u51fa\u4e8e\u4ec0\u4e48\u6837\u7684\u539f\u56e0\uff0c\u8bde\u751f\u4e86\u300c\u534f\u7a0b\u300d\u8fd9\u4e00\u6982\u5ff5\uff1f - \u77e5\u4e4e (zhihu.com)</p> <p>\u6838\u5fc3\u5b57\u6bb5\u5982\u4e0b\uff1a</p> Java<pre><code>    // scheduler and continuation\n    private final Executor scheduler;\n    private final Continuation cont;\n    private final Runnable runContinuation;\n</code></pre> <p>Continuation</p> <p>\u5176\u662fJava\u4e2d\u5bf9\u534f\u7a0b\u7684\u62bd\u8c61\uff0c\u662f\u6709\u6808\u534f\u7a0b(\u6709\u4e00\u4e2a<code>stackChunk</code>\u6210\u5458\u53d8\u91cf,\u88ab\u5b58\u50a8\u5230\u4e86\u5806\u4e2d)\u3002\u7528\u6237\u4f20\u5165<code>task</code>\u4e4b\u540e\uff0c\u88ab\u5c01\u88c5\u4e3a<code>Continuation</code>\uff0c\u7136\u540e\u8be5\u4efb\u52a1\u5c31\u53ef\u4ee5\u88ab<code>\u6267\u884c\uff0c\u6302\u8d77\uff0c\u5524\u9192\uff0c\u6267\u884c</code>\u3002</p> <p>Demo\u5982\u4e0b\uff1a</p> Java<pre><code>public class ContinuationDemo {\n    public static void main(String[] args) {\n        ContinuationScope scope = new ContinuationScope(\"scope\");//\u6807\u8bc6\u4e00\u4e2a\u7ebf\u7a0b\u4e0a\u4e0b\u6587\u540d\u79f0\n        Continuation continuation = new Continuation(scope, () -&gt; {\n            System.out.println(\"Running before yield\");\n            Continuation.yield(scope);\n            System.out.println(\"Running after yield\");\n        });\n\n        System.out.println(\"First run\");\n        continuation.run();\n        System.out.println(\"isDone: \" + continuation.isDone());;\n\n        System.out.println(\"Second run\");\n        continuation.run(); //\u518d\u6b21\u8c03\u7528run\u65b9\u6cd5\uff0c\u5219\u4eceyield\u5904\u7ee7\u7eed\u6267\u884c\n        System.out.println(\"isDone: \" + continuation.isDone());;\n    }\n}\n</code></pre> <p>\u5176\u4e2d\u5728\u4e00\u4e2a<code>ContinuationScope</code>\u4e2d\uff0c\u53ef\u4ee5\u6709\u591a\u4e2a<code>Continuation</code>\u3002</p> <p>JVM\u4e2d\u4f7f\u7528\u4e00\u4e2a\u94fe\u8868\u7ed3\u6784\u7ef4\u62a4<code>Continuation\u94fe</code>\uff0c\u5f53\u6267\u884c\u94fe\u4e0a\u7684\u4e00\u4e2a<code>Continuation</code>\u53d1\u751f<code>yield</code>\u7684\u65f6\u5019\uff0c\u63a7\u5236\u6743\u4f1a\u88ab\u4ea4\u7ed9\u4ea4\u56de\u7ed9\u9876\u5c42\u7684\u7ebf\u7a0b\uff0c\u7531\u5b83\u63a7\u5236\u662f\u5426\u7ee7\u7eed<code>run</code></p> <p>\u800c<code>VirtualThread</code>\u5bf9<code>Continuation</code>\u8fdb\u884c\u4e86\u7b80\u5355\u5c01\u88c5\uff0c\u5e95\u5c42\u7684\u865a\u62df\u7ebf\u7a0b\u8c03\u5ea6\u5c31\u662f\u4f7f\u7528<code>Continuation</code>\u7684<code>run &amp; yield</code></p> <p>Scheduler</p> <p>\u5c31\u662f\u4e00\u4e2a<code>Executor</code>\uff0c\u7528\u4e8e\u7ef4\u62a4\u7ebf\u7a0b\u6c60\uff0c\u4e5f\u5c31\u662f\u4e00\u7ec4\u5e73\u53f0\u7ebf\u7a0b\uff0c\u6765\u6267\u884c\u4e00\u4e2a\u4e2a\u7684\u865a\u62df\u7ebf\u7a0b\u7684\u4efb\u52a1\u3002</p> <p>\u5177\u4f53\u6765\u8bf4\uff0c\u5f53\u865a\u62df\u7ebf\u7a0b\u9700\u8981\u88ab\u6267\u884c\u7684\u65f6\u5019\uff0c\u4f1a\u5c06<code>Continuation</code>\u5bf9\u8c61\uff0c\u62f7\u8d1d\u5230\u5e73\u53f0\u7ebf\u7a0b\u7684\u6808\u4e2d\uff0c\u7136\u540e\u6267\u884c\u3002</p> <p>\u800c\u9700\u8981\u5378\u8f7d\u7684\u65f6\u5019\uff0c\u5c06<code>Continuation</code>\u5bf9\u8c61\u5b58\u50a8\u5230\u5806\u4e2d\u3002\u8fd9\u91cc\u7684<code>Continuation</code>\u4e2d\u7ef4\u62a4\u6709\u7ebf\u7a0b\u8fd0\u884c\u7684<code>stack</code>\u4fe1\u606f\u3002</p> <p>\u4ece\u800c\u5b9e\u73b0\u4e86\u66f4\u7ec6\u7c92\u5ea6\uff0c\u66f4\u8f7b\u91cf\u7ea7\u7684\u7ebf\u7a0b\u8c03\u5ea6\uff0c\u800c\u4e0d\u662f\u5f00\u9500\u5927\u7684\u5e73\u53f0\u7ebf\u7a0b\u4e0a\u4e0b\u6587\u5207\u6362\uff0c\u5373\u5185\u6838\u4e0a\u4e0b\u6587\u5207\u6362\u3002</p> <p>\u9700\u8981\u6ce8\u610f</p> <p>\u4e0a\u4e0b\u6587\u52a0\u8f7d\u5230\u8f7d\u4f53\u7ebf\u7a0b\u4e4b\u540e\uff0c\u5982\u679c<code>yield</code>\u5931\u8d25\uff0c\u800c\u6b64\u65f6\u6b63\u597d\u5728<code>sychronized</code>\u65b9\u6cd5\u4e2d\uff0c\u5219\u4e24\u8005\u88ab\u7ed1\u5b9a\uff0c\u865a\u62df\u7ebf\u7a0b\u7684\u963b\u585e\u5728\u8fd9\u91cc\u5c31\u7b49\u540c\u4e8e\u8f7d\u4f53\u7ebf\u7a0b\u7684\u963b\u585e\u3002</p> <p>\u800c\u5728\u4e00\u4e2a\u865a\u62df\u7ebf\u7a0b\u7684\u4efb\u52a1\u53ef\u4ee5\u5728<code>yield</code>\u524d\u540e\u88ab\u6267\u884c\u5728\u4e0d\u540c\u7684\u8f7d\u4f53\u7ebf\u7a0b\uff0c\u56e0\u4e3a<code>Continuation</code>\u6709\u8db3\u591f\u7684\u4e0a\u4e0b\u6587\u4fe1\u606f\uff0c\u53ea\u9700\u8981\u6302\u8f7d\u5373\u53ef\u3002</p>"},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#_21","title":"\u6027\u80fd\u4e0e\u4e0d\u8db3","text":"<p>\u865a\u62df\u7ebf\u7a0b\u4e3a<code>byte</code>\u7ea7\u522b\uff0c\u800c\u5e73\u53f0\u7ebf\u7a0b\u4e3a<code>KB</code>\u7ea7\u522b\uff0c\u57fa\u672c\u4e0a\u5dee\u4e00\u4e2a\u6570\u91cf\u7ea7\u3002</p> <p>\u9002\u7528\u4e8eIO\u5bc6\u96c6\u578b\u573a\u666f\u3002</p> <p>\u4e0d\u8db3\uff1a</p> <ul> <li>\u9700\u8981\u4ece<code>sychronized</code>\u66ff\u6362\u4e3a<code>reentrantLock</code></li> <li>\u4f7f\u7528<code>ThreadLocal</code>\u4f1a\u6709\u95ee\u9898</li> </ul>"},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#_22","title":"\u9501\u4e0e\u65e0\u9501","text":"<p>\u5728<code>JDK5</code>\u4e4b\u540e\u51fa\u73b0\u4e86<code>ReentrantLock</code>\uff0c\u662f\u4e00\u79cd\u5185\u7f6e\u9501\u7684\u8865\u5145\u3002</p>"},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#lock-reentrantlock","title":"Lock &amp; ReentrantLock","text":""},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#lock","title":"Lock","text":"<p>Lock\u4eceJDK5\u5f00\u59cb\u63d0\u4f9b\uff0c\u662f\u4e00\u4e2a\u63d0\u4f9b\u4e86\u65e0\u6761\u4ef6\uff0c\u53ef\u8f6e\u8be2\uff0c\u5b9a\u65f6\uff0c\u4ee5\u53ca\u53ef\u4e2d\u65ad\u7684\u9501\u83b7\u53d6\u64cd\u4f5c\u7684\u63a5\u53e3\u3002\u5176\u53ef\u4ee5\u63a7\u5236\u9501\u7684\u91ca\u653e\u987a\u5e8f\uff0c\u662f\u4e00\u79cd\u66f4\u7075\u6d3b\uff0c\u66f4\u7ec6\u7c92\u5ea6\u7684\u9501\u63a5\u53e3\u3002</p> <p></p>"},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#reentrantlock","title":"ReentrantLock","text":"<p>\u65e0\u6761\u4ef6\u83b7\u53d6\u9501</p> <p>\u5176\u5b9e\u4e00\u4e2aLock\u63a5\u53e3\u7684\u5b9e\u73b0\u7c7b\uff0c\u63d0\u4f9b\u4e86\u548c<code>Sychronized</code>\u4e00\u6837\u7684\u4e92\u65a5\u6027\uff0c\u4ee5\u53ca\u5185\u5b58\u53ef\u89c1\u6027\uff0c\u5e76\u4e14\u662f\u4e00\u4e2a\u53ef\u91cd\u5165\u9501\uff0c\u4e14\u901a\u8fc7<code>lock &amp; unlock</code>\u6765\u5b9e\u73b0\u624b\u52a8\u52a0\u9501\u3002</p> Java<pre><code>    @Test\n    public void vtDemo5() throws InterruptedException {\n        class  ID{\n            private int number;\n            public int getNumber() {\n                return number;\n            }\n            public void setNumber(int number) {\n                this.number = number;\n            }\n        }\n        ID id = new ID();\n        var pool = Executors.newVirtualThreadPerTaskExecutor();\n        var lock = new ReentrantLock();\n        for (int i = 0; i &lt; 1000; i++) {\n            pool.submit(() -&gt; {\n                lock.lock();\n                try{\n                    id.setNumber(id.getNumber() + 1);\n                }finally {\n                    lock.unlock();\n                }\n            });\n        }\n        pool.awaitTermination(5,java.util.concurrent.TimeUnit.SECONDS);\n        pool.shutdown();\n        System.out.println(id.getNumber());\n    }\n</code></pre> <p>\u800c\u865a\u62df\u7ebf\u7a0b\u4e5f\u4e0d\u80fd\u4f7f\u7528\u5185\u7f6e\u9501\u800c\u53ea\u80fd\u4f7f\u7528<code>ReentrantLock</code></p> <p>\u8f6e\u8be2\u9501\u4e0e\u5b9a\u65f6\u9501</p> <p>\u8be5\u9501\u8fd8\u6709\u5b9a\u65f6\u673a\u5236\uff0c\u9632\u6b62\u6b7b\u9501\u9020\u6210\u7684\u5371\u5bb3\u3002\u901a\u8fc7<code>tryLock</code>\u65b9\u6cd5\uff0c\u5bf9\u5e38\u89c4\u7684\u6b7b\u9501\u60c5\u51b5\uff0c\u5982\u679c\u4e0d\u80fd\u4e24\u4e2a\u9501\u540c\u65f6\u83b7\u53d6\uff0c\u5219\u4f1a\u653e\u5f03\u6240\u6709\u9501\uff0c\u56de\u9000\u5e76\u91cd\u8bd5\u3002</p> <p>\u516c\u5e73\u4e0e\u975e\u516c\u5e73</p> <p>\u53ef\u4ee5\u521b\u5efa\u9ed8\u8ba4\u7684\u975e\u516c\u5e73\u9501\uff0c\u6765\u4fdd\u8bc1\u6027\u80fd\uff0c\u51cf\u5c11\u4e0a\u4e0b\u6587\u5207\u6362\u7684\u635f\u8017\uff0c\u6216\u8005\u521b\u5efa\u4e00\u4e2a\u516c\u5e73\u9501\u3002\u901a\u8fc7<code>fair</code>\u5e03\u5c14\u503c\u6765\u63a7\u5236\u3002</p>"},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#_23","title":"\u539f\u5b50\u53d8\u91cf","text":""},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#_24","title":"\u60b2\u89c2\u9501\u4e0e\u4e50\u89c2\u9501","text":"<p>\u60b2\u89c2\u9501\u5c31\u662f\u9700\u8981\u5f3a\u5236\u52a0\u9501\uff0c\u5982\u5185\u7f6e\u9501\uff0c<code>ReentrantLock</code></p> <p>\u800c\u4e50\u89c2\u9501\u4e0d\u9700\u8981\u5f3a\u5236\u52a0\u9501\uff0c\u6bd4\u5982\u539f\u5b50\u53d8\u91cf</p>"},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#_25","title":"\u539f\u7406","text":"<p>\u5e95\u5c42\u901a\u8fc7\u786c\u4ef6\u6307\u4ee4\uff1a<code>Compare ans Set</code>\u8fdb\u884c\u652f\u6301\uff0c\u8fd9\u4e2a\u662f\u4e00\u4e2a\u539f\u5b50\u6307\u4ee4\u3002\u7531\u4e8e\u7cfb\u7edf\u72b6\u6001\u4e0d\u4f1a\u56de\u9000\uff0c\u5219\u6700\u7ec8\u53ef\u4ee5\u4fdd\u8bc1\u4efb\u52a1\u5b8c\u6210\u3002</p> <p>\u539f\u5b50\u53d8\u91cf\u7c7b\u662f\u4e00\u79cd\u5f88\u7ec6\u7c92\u5ea6\u7684\u7ade\u4e89\uff0c\u76f8\u5f53\u4e8e\u4e00\u4e2a\u6cdb\u5316\u7684<code>voliate</code>\u53d8\u91cf\u3002</p> <p>ABA\u95ee\u9898</p> <p>\u4e5f\u5c31\u662f\u5f53\u7ebf\u7a0bA\u5728\u8fdb\u884c\u64cd\u4f5cx\u7684\u65f6\u5019\uff0c\u7ebf\u7a0bB\u5df2\u7ecf\u5c06x\u4ecea -&gt; b -&gt; a\uff0c\u4f46\u662fA\u5374\u65e0\u6cd5\u5bdf\u89c9\u3002</p> <p>\u89e3\u51b3\u529e\u6cd5\uff1a\u52a0\u7248\u672c\u53f7\u5373\u53ef\u3002</p>"},{"location":"JVM/JVM%E5%B9%B6%E5%8F%91%E6%80%BB%E7%BB%93/#_26","title":"\u4f7f\u7528","text":"<p>\u6700\u7ecf\u5e38\u4f7f\u7528\u7684\u5c31\u662f<code>getAndincreasement</code>\uff0c\u6709\u7ecf\u5178\u7684\u4f7f\u7528\u4ee5\u540e\u518d\u603b\u7ed3\u3002</p>"},{"location":"LANG/","title":"\u57fa\u7840","text":"<p>\u5185\u5bb9\u53ef\u4ee5\u5728\u4fa7\u8fb9\u680f\u9009\u62e9</p>"},{"location":"LANG/DS-leetcode/","title":"\u6570\u636e\u7ed3\u6784\u4e0e\u7b97\u6cd5","text":"<p>\u90e8\u5206\u76ee\u5f55\u7f3a\u5931\u3001</p>"},{"location":"LANG/DS-leetcode/#_2","title":"\u6570\u636e\u91cf\u4e0e\u5bf9\u5e94\u7b97\u6cd5","text":"<ol> <li>\u5e73\u53f0\u8fd0\u884c\u8981\u6c42\uff1a</li> <li>c/c++\u8fd0\u884c\u65f6\u95f41s\uff0cjava/python/go\u7b49\u8bed\u8a00\u8fd0\u884c\u65f6\u95f41-2s</li> <li>\u5bf9\u5e94\u7684\u5e38\u6570\u6307\u4ee4\u64cd\u4f5c\u91cf\u662f10^8\u4ee5\u5185\uff0c\u5fc5\u987b\u9650\u5236\u5728\u8fd9\u4e2a\u6570\u91cf\u7ea7\uff0c\u548c\u5e73\u53f0\u65e0\u5173</li> <li>\u5047\u8bben = 10^6,\u5219O(n^2)\u7b97\u6cd5\u5fc5\u7136TLE</li> <li>\u5bf9\u5e94\u7b97\u6cd5</li> </ol> <p>2^n\u5e38\u5bf9\u5e94\u9012\u5f52\u5c55\u5f00(\u6bcf\u4e2a\u4f4d\u7f6e\u66b4\u529b\u679a\u4e3e)</p> <p></p> <p></p>"},{"location":"LANG/DS-leetcode/#_3","title":"\u6392\u5e8f","text":""},{"location":"LANG/DS-leetcode/#_4","title":"\u9009\u62e9\u6392\u5e8f\uff1a","text":"<p>i\\~n-1\u8303\u56f4\u4e0a\uff0c\u627e\u5230\u6700\u5c0f\u503c\u5e76\u653e\u5728i\u4f4d\u7f6e\uff0c\u7136\u540ei+1\\~n-1\u8303\u56f4\u4e0a\u7ee7\u7eed</p> Text Only<pre><code>     //\u9009\u62e9\u6392\u5e8f\n    public static void selectionSort(int[] arr) {\n        if (arr == null || arr.length &lt; 2) {\n            return;\n        }\n        for (int minIndex, i = 0; i &lt; arr.length - 1; i++) {\n            minIndex = i;\n            for (int j = i + 1; j &lt; arr.length; j++) {\n                if (arr[j] &lt; arr[minIndex]) {\n                    minIndex = j;\n                }\n            }\n            swap(arr, i, minIndex);\n        }\n    }\n</code></pre>"},{"location":"LANG/DS-leetcode/#_5","title":"\u5192\u6ce1\u6392\u5e8f\uff1a","text":"<p>0\\~i\u8303\u56f4\u4e0a\uff0c\u76f8\u90bb\u4f4d\u7f6e\u8f83\u5927\u7684\u6570\u6eda\u4e0b\u53bb\uff0c\u6700\u5927\u503c\u6700\u7ec8\u6765\u5230i\u4f4d\u7f6e\uff0c\u7136\u540e0\\~i-1\u8303\u56f4\u4e0a\u7ee7\u7eed</p> Text Only<pre><code>    public static void bubbleSort(int[] arr) {\n        if (arr == null || arr.length &lt; 2) {\n            return;\n        }\n        for (int end = arr.length - 1; end &gt; 0; end--) {\n            for (int i = 0; i &lt; end; i++) {\n                if (arr[i] &gt; arr[i + 1]) {\n                    swap(arr, i, i + 1);\n                }\n            }\n        }\n    }\n</code></pre>"},{"location":"LANG/DS-leetcode/#_6","title":"\u63d2\u5165\u6392\u5e8f\uff1a","text":"<p>0\\~i\u8303\u56f4\u4e0a\u5df2\u7ecf\u6709\u5e8f\uff0c\u65b0\u6765\u7684\u6570\u4ece\u53f3\u5230\u5de6\u6ed1\u5230\u4e0d\u518d\u5c0f\u7684\u4f4d\u7f6e\u63d2\u5165\uff0c\u7136\u540e\u7ee7\u7eed</p> Text Only<pre><code>    public static void insertionSort(int[] arr) {\n        if (arr == null || arr.length &lt; 2) {\n            return;\n        }\n        for (int i = 1; i &lt; arr.length; i++) {\n        //\u4ece0\u5230i-1\u90e8\u5206\uff0c\u8fdb\u884c\u6ed1\u52a8\u63d2\u5165\n        //\u6bcf\u6b21\u90fd\u80fd\u4fdd\u8bc10\u5230i-1\u90e8\u5206\u6709\u5e8f\uff0c\u65b0\u6765\u7684\u662farr[i],\u5728\u4e0b\u9762\u7684\u5faa\u73af\u4e2d\u65b0\u6765\u7684\u6570\u4e00\u76f4\u662farr[j+1].\n            for (int j = i - 1; j &gt;= 0 &amp;&amp; arr[j] &gt; arr[j + 1]; j--) {\n                swap(arr, j, j + 1);\n            }\n        }\n    }\n</code></pre>"},{"location":"LANG/DS-leetcode/#_7","title":"\u5feb\u901f\u6392\u5e8f","text":"<ol> <li>\u57fa\u672c\u601d\u8def\uff1a</li> <li>\u5c06\u6570\u5217\u5212\u5206\u4e3a\u4e24\u90e8\u5206\uff0c\u7b2c\u4e00\u6b65\u8981\u662f\u8981\u628a\u6570\u5217\u5206\u6210\u4e24\u4e2a\u90e8\u5206\uff0c\u7136\u540e\u4fdd\u8bc1\u524d\u4e00\u4e2a\u5b50\u6570\u5217\u4e2d\u7684\u6570\u90fd\u5c0f\u4e8e\u540e\u4e00\u4e2a\u5b50\u6570\u5217\u4e2d\u7684\u6570\u3002\u4e5f\u5c31\u662f\u5212\u5206\u4e3a\u524d\u4e00\u90e8\u5206&lt;=nums[x],\u540e\u4e00\u90e8\u5206&gt;nums[x]\u3002\u5219\u6b64\u65f6\u5c06x\u4f4d\u7f6e\u7684\u6570\u79fb\u52a8\u5230&lt;=\u4f4d\u7f6e\u7684\u6700\u540e\u4e00\u4e2a\uff0c\u4e5f\u5c31\u662f\u4e24\u4e2a\u5e8f\u5217\u4e2d\u95f4\uff0c\u610f\u5473\u7740nums[x]\u5df2\u7ecf\u6392\u597d\u5e8f\u4e86\u3002</li> <li>\u9012\u5f52\u5230\u4e24\u4e2a\u5b50\u5e8f\u5217\u4e2d\u8fdb\u884ca\u64cd\u4f5c\u3002\u6bcf\u4e00\u6b21\u5212\u5206\u5c31\u4f1a\u6392\u5e8f\u597d\u4e00\u4e2a\u6570</li> <li>\u4e0d\u7528\u5408\u5e76\uff0c\u6b64\u65f6\u5e8f\u5217\u5df2\u7ecf\u5b8c\u5168\u6709\u5e8f</li> <li>\u65f6\u95f4\u590d\u6742\u5ea6\uff1aO(n*logn),\u6700\u5deeO(n^2)</li> <li>\u7ecf\u5178\u6a21\u677f\uff1a</li> </ol> Text Only<pre><code>class Solution {\n    public int[] sortArray(int[] nums) {\n        quickSort(nums, 0, nums.length-1);\n        return nums;\n    }\n    public static void quickSort(int[] nums, int l, int r){\n        if(l&gt;=r) return;\n        int x = nums[l + (int)(Math.random()*(r-l+1))];\n        int mid = partition(nums, x,l,r);\n        quickSort(nums, l,mid-1);\n        quickSort(nums, mid+1,r);\n    }\n    public static int partition(int[] nums, int x,int l, int r){\n        //[l,cnt)\u662f&lt;=x\u7684\u6570\u7ec4\n        int cnt = l;\n        int xIndex = 0;\n        for(int i=l; i&lt;=r;i++){\n            if(nums[i] &lt;= x){\n                swap(nums,i,cnt);\n                //\u88ab\u4ea4\u6362\u5230\u4e86cnt\u4f4d\u7f6e\n                if(nums[cnt] == x) xIndex = cnt;\n                cnt++;\n            }\n        }\n        swap(nums,xIndex,cnt-1);\n        return cnt-1;\n    }\n    public static void swap(int[] nums, int a, int b){\n        int temp = nums[a];\n        nums[a] = nums[b];\n        nums[b] = temp;\n    }\n}\n</code></pre> <ol> <li>\u4f18\u5316(\u4e09\u8def\u5feb\u901f\u6392\u5e8f\uff0c\u57fa\u4e8e\u8377\u5170\u56fd\u65d7\u95ee\u9898)\uff1a</li> <li>\u601d\u8def\uff1a\u5c06\u6570\u7ec4\u5212\u5206\u4e3ax\u4e09\u4e2a\u90e8\u5206\u3002\u76f4\u63a5\u786e\u5b9a\u4e86=x\u7684\u4f4d\u7f6e\uff0c\u800c\u4e0d\u662f\u4e00\u6b21\u4e00\u6b21\u786e\u5b9a\u3002\u5728\u6709\u91cd\u590d\u503c\u6570\u636e\u4e0a\u8868\u73b0\u66f4\u597d\u3002 <li>\u65f6\u95f4\u590d\u6742\u5ea6:O(n*logn)\uff0c\u6700\u4f18\u4e3aO(n)\uff0c\u6700\u5dee\u60c5\u51b5O(n^2)</li> <li>\u5212\u5206\u6b65\u9aa4\uff1a<ol> <li>\u4f7f\u7528\u4e24\u4e2a\u53d8\u91cffirst\uff0clast\u8bb0\u5f55x\u7684\u66f4\u65b0\u7684\u6570\u7ec4\u4f4d\u7f6e <li>\u5982\u679cnums[i]&lt;x\uff0c\u5219\u8fdb\u884cswap(nums,i,first),\u5e76\u5c06first++,\u7136\u540ei++;</li> <li>\u5982\u679cnums[i]&gt;x\uff0c\u5219\u8fdb\u884cswap(nums,i,last),\u5e76\u5c06last--,\u4f46\u662fi\u4e0d\u53d8 \uff0c\u9700\u8981\u518d\u6b21\u8fdb\u884c\u8fdb\u884c\u5224\u65ad\u662f\u5426\u9700\u8981\u8fdb\u884c\u4ea4\u6362\u3002</li> <li>\u6574\u4f53\u5c31\u662f\u4ece\u5de6\u5f80\u53f3\uff0c\u6bcf\u4e00\u4e2a\u6570\u5b57\u4f9d\u6b21\u90fd\u662f\u7ecf\u8fc7\u68c0\u67e5\u7684\uff0c\u4ece\u540e\u9762\u4ea4\u6362\u7684\u6ca1\u6709check\u8fc7\uff0c\u6240\u4ee5i\u4e0d\u53d8\u3002</li> Text Only<pre><code>class Solution {\n    public int[] sortArray(int[] nums) {\n        quickSort(nums, 0, nums.length-1);\n        return nums;\n    }\n    public static void quickSort(int[] nums, int l, int r){\n        if(l&gt;=r) return;\n        int x = nums[l + (int)(Math.random()*(r-l+1))];\n        int[] bound = partition(nums, x,l,r);\n        int lmid = bound[0], rmid = bound[1];\n        quickSort(nums, l,lmid-1);\n        quickSort(nums, rmid+1,r);\n    }\n    //partition\u90e8\u5206\u662fO(n)\n    public static int[] partition(int[] nums, int x,int l, int r){\n        int first = l;\n        int last = r;\n        int i = l;\n        while(i&lt;=last){\n            if(nums[i] &lt; x){\n                swap(nums, first, i);\n                first++;\n                i++;\n            }else if(nums[i] &gt; x){\n                swap(nums, i, last);\n                last--;\n            }else{\n                i++;\n            }\n        }\n        return new int[]{first,last};\n    }\n    public static void swap(int[] nums, int a, int b){\n        int temp = nums[a];\n        nums[a] = nums[b];\n        nums[b] = temp;\n    }\n}\n</code></pre>"},{"location":"LANG/DS-leetcode/#_8","title":"\u968f\u673a\u9009\u62e9\u7b97\u6cd5","text":"<ol> <li> <p>\u539f\u7406\uff1a</p> </li> <li> <p>\u57fa\u4e8e\u968f\u673a\u5feb\u901f\u6392\u5e8f</p> </li> <li>\u5982\u679cpartition\u4e4b\u540e=x\u7684\u90e8\u5206\u662f[first,last]\uff0c\u8fd9\u4e00\u90e8\u5206\u662f\u6392\u5e8f\u597d\u7684\u3002\u5982\u679c\u8fd9\u4e00\u90e8\u5206\u4e0b\u6807\u5305\u542btarget\uff0c\u5219\u76f4\u63a5\u8fd4\u56de\u3002</li> <li>\u5982\u679c\u6ca1\u6709\u547d\u4e2d\uff0c\u53ef\u4ee5\u6839\u636e\u5927\u5c0f\u5173\u7cfb\u53ea\u8fdb\u884c\u4e00\u4fa7\u7684\u9012\u5f52\u67e5\u627e</li> <li>\u590d\u6742\u5ea6\uff1a</li> <li>\u65f6\u95f4\u590d\u6742\u5ea6O(n)</li> <li>\u7a7a\u95f4\u590d\u6742\u5ea6O(1)</li> <li>\u4f8b\u9898\uff1aleetcode215 \u7b2ck\u5927\u7684\u6570</li> <li>\u601d\u8def\uff1a\u6392\u5e8f\uff1aO(n*logn)\u3002\u968f\u673a\u9009\u62e9\uff1aO(n)</li> </ol> Text Only<pre><code>class Solution {\n    public int findKthLargest(int[] nums, int k) {\n        return randomSelect(nums, nums.length-k);\n    }\n    //nums\u6392\u5e8f\uff0c\u5728i\u4f4d\u7f6e\u4e0a\u7684\u6570\u662f\u4ec0\u4e48\n    public static int randomSelect(int[] nums,int i){\n        int l = 0, r = nums.length-1;\n        int ans = 0;\n        while(l&lt;=r){\n            int x = nums[l+(int)(Math.random()*(r-l+1))];\n            int[] bound = partition(nums, x, l, r);\n            int lmid = bound[0], rmid = bound[1];\n            if(i &lt; lmid){\n                r = lmid-1;\n            }else if( i &gt; rmid){\n                l = rmid+1;\n            }else{\n                ans = nums[i];\n                break;\n            }\n        }\n        return ans;\n    }\n    public static int[] partition(int[] nums, int x, int l, int r){\n        int first = l;\n        int last = r;\n        int i = l;\n        while(i&lt;=last){\n            if(nums[i] &lt; x){\n                swap(nums, first,i);\n                first++;\n                i++;\n            }else if(nums[i] &gt; x){\n                swap(nums,i,last);\n                last--;\n            }else{\n                i++;\n            }\n        }\n        return new int[]{first,last};\n    }\n    public static void swap(int[] nums, int l, int r){\n        int temp = nums[l];\n        nums[l] = nums[r];\n        nums[r] = temp;\n    }\n}\n</code></pre>"},{"location":"LANG/DS-leetcode/#_9","title":"\u5bf9\u6570\u5668","text":"<p>\u573a\u666f\uff1a\u5bf9\u4e8e\u6d4b\u8bd5\u7528\u4f8b\u4e0d\u591f\u7684\u573a\u666f\uff0c\u7528\u6765\u81ea\u6211\u9a8c\u8bc1</p> <p>\u57fa\u672c\u601d\u8def\uff1a\u5148\u5b9e\u73b0\u66b4\u529b\u89e3\uff0c\u518d\u5b9e\u73b0\u6700\u4f18\u89e3\uff0c\u7136\u540e\u751f\u6210\u968f\u673a\u6570\u636e\uff0c\u7136\u540e \u9a8c\u8bc1\u66b4\u529b\u89e3\u548c\u6700\u4f18\u89e3\u7684\u7ed3\u679c\u662f\u5426\u4e00\u81f4\uff0c\u8fd9\u5c31\u662f\u5bf9\u6570\u5668\u3002</p> <p>\u5bf9\u6570\u5668\u7684\u95e8\u69db\u5176\u5b9e\u662f\u6bd4\u8f83\u9ad8\u7684\uff0c\u56e0\u4e3a\u5f80\u5f80\u9700\u8981\u5728\u4e24\u79cd\u4e0d\u540c\u601d\u8def\u4e0b\u5b9e\u73b0\u529f\u80fd\u76f8\u540c\u7684\u4e24\u4e2a\u65b9\u6cd5\uff0c\u66b4\u529b\u4e00\u4e2a\u3001\u60f3\u8c61\u4e2d\u7684\u6700\u4f18\u89e3\u662f\u53e6\u4e00\u4e2a\u3002</p> <p>\u4ee5\u540e\u7684\u5f88\u591a\u9898\u76ee\u90fd\u4f1a\u7528\u5230\u5bf9\u6570\u5668\uff0c\u51e0\u4e4e\u53ef\u4ee5\u9a8c\u8bc1\u4efb\u4f55\u65b9\u6cd5\uff0c\u5c24\u5176\u5728\u9a8c\u8bc1\u8d2a\u5fc3\u3001\u89c2\u5bdf\u89c4\u5f8b\u65b9\u9762\u5f88\u6709\u7528</p> <p>\u5230\u65f6\u5019\u4f1a\u4e30\u5bcc\u5f88\u591a\u5bf9\u6570\u5668\u7684\u5b9e\u6218\u7528\u6cd5\uff0c\u8fd9\u91cc\u53ea\u662f\u4e00\u4e2a\u7b80\u5355\u6613\u61c2\u7684\u793a\u4f8b</p>"},{"location":"LANG/DS-leetcode/#_10","title":"\u4e8c\u5206\u641c\u7d22","text":"<p>\ud83d\udc4b</p> <p>\u524d\u4e09\u79cd\u60c5\u51b5\u5fc5\u987b\u8981\u6570\u7ec4\u4f53\u73b0\u6709\u5e8f\u624d\u53ef\u4ee5\u4f7f\u7528</p>"},{"location":"LANG/DS-leetcode/#num-target","title":"\u60c5\u51b5\u4e00\uff1anum == target","text":"Text Only<pre><code>    public static boolean exist(int[] arr, int num) {\n        if (arr == null || arr.length == 0) {\n            return false;\n        }\n        int l = 0, r = arr.length - 1, m = 0;\n        while (l &lt;= r) {\n            m = (l + r) / 2;\n            if (arr[m] == num) {\n                return true;\n            } else if (arr[m] &gt; num) {\n                r = m - 1;\n            } else {\n                l = m + 1;\n            }\n        }\n        return false;\n    }\n</code></pre>"},{"location":"LANG/DS-leetcode/#num-target_1","title":"\u60c5\u51b5\u4e8c: num &gt;= target\u7684\u6700\u5de6\u8fb9\u4f4d\u7f6e","text":"Text Only<pre><code>    public static int findLeft(int[] arr, int num) {\n        int l = 0, r = arr.length - 1, m = 0;\n        int ans = -1;\n        while (l &lt;= r) {\n            // m = (l + r) / 2;\n            // m = l + (r - l) / 2;\n            m = l + ((r - l) &gt;&gt; 1);\n\n            if (arr[m] &gt;= num) {\n                ans = m;\n                r = m - 1;\n            } else {\n                l = m + 1;\n            }\n        }\n        return ans;\n    }\n</code></pre>"},{"location":"LANG/DS-leetcode/#num-target_2","title":"\u60c5\u51b5\u4e09\uff1a num &lt;= target\u7684\u6700\u53f3\u8fb9\u4f4d\u7f6e","text":"Text Only<pre><code>    public static int findRight(int[] arr, int num) {\n        int l = 0, r = arr.length - 1, m = 0;\n        int ans = -1;\n        while (l &lt;= r) {\n            //\u9632\u6b62\u7cbe\u5ea6\u6ea2\u51fa\n            m = l + ((r - l) &gt;&gt; 1); \n            if (arr[m] &lt;= num) {\n                ans = m;\n                l = m + 1;\n            } else {\n                r = m - 1;\n            }\n        }\n        return ans;\n    }\n</code></pre>"},{"location":"LANG/DS-leetcode/#_11","title":"\u60c5\u51b5\u56db\uff1a \u5cf0\u503c\u95ee\u9898\uff1a","text":"<p>\u601d\u8def\uff1a</p> <ol> <li>\u9a8c\u8bc10\u4f4d\u7f6e\u548cn-1\u4f4d\u7f6e\u7684\u6570\uff0c\u5982\u679c\u6709\u7b26\u5408\u5cf0\u503c\u7684\u60c5\u51b5\uff0c\u76f4\u63a5\u8fd4\u56de</li> <li>\u5982\u679c\u6ca1\u6709\uff0c\u90a3\u4e48\u5f00\u5934\u662f\u4e0a\u5347\u7684\uff0c\u7ed3\u5c3e\u662f\u4e0b\u964d\u7684\uff0c\u4e00\u5b9a\u5b58\u5728\u8f6c\u6298\u70b9\uff0c\u4e5f\u5c31\u662f\u5cf0\u503c\u3002</li> <li>\u4e8c\u5206\u67e5\u627e\u5230\u4e2d\u70b9\uff0c\u770b\u4e0e\u5de6\u53f3\u8fb9\u754c\u6784\u6210\u7684\u533a\u95f4\u5982\u679c\u662f\u4e0a\u5347+\u4e0b\u964d\u7ec4\u5408\uff0c\u90a3\u4e48\u5cf0\u503c\u5fc5\u7136\u5728\u533a\u95f4\u5185\uff0c\u5728\u533a\u95f4\u5185\u4e8c\u5206\u5373\u53ef\u3002</li> </ol> <p>\u793a\u4f8b\uff1a</p> Text Only<pre><code>// \u5cf0\u503c\u5143\u7d20\u662f\u6307\u5176\u503c\u4e25\u683c\u5927\u4e8e\u5de6\u53f3\u76f8\u90bb\u503c\u7684\u5143\u7d20\n// \u7ed9\u4f60\u4e00\u4e2a\u6574\u6570\u6570\u7ec4 nums\uff0c\u5df2\u77e5\u4efb\u4f55\u4e24\u4e2a\u76f8\u90bb\u7684\u503c\u90fd\u4e0d\u76f8\u7b49\n// \u627e\u5230\u5cf0\u503c\u5143\u7d20\u5e76\u8fd4\u56de\u5176\u7d22\u5f15\n// \u6570\u7ec4\u53ef\u80fd\u5305\u542b\u591a\u4e2a\u5cf0\u503c\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u8fd4\u56de \u4efb\u4f55\u4e00\u4e2a\u5cf0\u503c \u6240\u5728\u4f4d\u7f6e\u5373\u53ef\u3002\n// \u4f60\u53ef\u4ee5\u5047\u8bbe nums[-1] = nums[n] = \u65e0\u7a77\u5c0f\n// \u4f60\u5fc5\u987b\u5b9e\u73b0\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a O(log n) \u7684\u7b97\u6cd5\u6765\u89e3\u51b3\u6b64\u95ee\u9898\u3002\npublic class Code04_FindPeakElement {\n\n    // \u6d4b\u8bd5\u94fe\u63a5 : https://leetcode.cn/problems/find-peak-element/\n    class Solution {\n\n        public static int findPeakElement(int[] arr) {\n            int n = arr.length;\n            if (arr.length == 1) {\n                return 0;\n            }\n            if (arr[0] &gt; arr[1]) {\n                return 0;\n            }\n            if (arr[n - 1] &gt; arr[n - 2]) {\n                return n - 1;\n            }\n            int l = 1, r = n - 2, m = 0, ans = -1;\n            while (l &lt;= r) {\n                m = (l + r) / 2;\n                if (arr[m - 1] &gt; arr[m]) {\n                    r = m - 1;\n                } else if (arr[m] &lt; arr[m + 1]) {\n                    l = m + 1;\n                } else {\n                    ans = m;\n                    break;\n                }\n            }\n            return ans;\n        }\n    }\n}\n</code></pre>"},{"location":"LANG/DS-leetcode/#_12","title":"\u4e8c\u5206\u7b54\u6848\u6cd5","text":""},{"location":"LANG/DS-leetcode/#_13","title":"\u6b65\u9aa4","text":"<ol> <li>\u4f30\u8ba1\u6700\u7ec8\u7b54\u6848\u53ef\u80fd\u7684\u8303\u56f4\u662f\u4ec0\u4e48</li> <li>\u5206\u6790\u95ee\u9898\u548c\u7ed9\u5b9a\u6761\u4ef6\u4e4b\u95f4\u7684\u5355\u8c03\u6027</li> <li>\u5efa\u7acb\u4e00\u4e2acheck\u51fd\u6570\uff0c\u5728\u7b54\u6848\u56fa\u5b9a\u7684\u60c5\u51b5\u4e0b\uff0c\u5224\u65ad\u7ed9\u5b9a\u7684\u6761\u4ef6\u662f\u5426\u8fbe\u6807(\u4e5f\u5c31\u662f\u7b54\u6848\u9700\u8981\u6ee1\u8db3\u7684\u6027\u8d28)</li> <li>\u4e0d\u65ad\u8c03\u6574\u8303\u56f4\uff0c\u76f4\u5230\u4e8c\u5206\u7ed3\u675f\u627e\u5230\u7b54\u6848</li> </ol>"},{"location":"LANG/DS-leetcode/#_14","title":"\u4f8b\u9898","text":"<ol> <li>leetcode 875</li> </ol> <p>\u73c2\u73c2\u559c\u6b22\u5403\u9999\u8549\u3002\u8fd9\u91cc\u6709 <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;n&lt;/span&gt;&lt;/span&gt;</code> \u5806\u9999\u8549\uff0c\u7b2c <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;i&lt;/span&gt;&lt;/span&gt;</code> \u5806\u4e2d\u6709 <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;piles[i]&lt;/span&gt;&lt;/span&gt;</code> \u6839\u9999\u8549\u3002\u8b66\u536b\u5df2\u7ecf\u79bb\u5f00\u4e86\uff0c\u5c06\u5728 <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;h&lt;/span&gt;&lt;/span&gt;</code> \u5c0f\u65f6\u540e\u56de\u6765\u3002</p> <p>\u73c2\u73c2\u53ef\u4ee5\u51b3\u5b9a\u5979\u5403\u9999\u8549\u7684\u901f\u5ea6 <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;k&lt;/span&gt;&lt;/span&gt;</code> \uff08\u5355\u4f4d\uff1a\u6839/\u5c0f\u65f6\uff09\u3002\u6bcf\u4e2a\u5c0f\u65f6\uff0c\u5979\u5c06\u4f1a\u9009\u62e9\u4e00\u5806\u9999\u8549\uff0c\u4ece\u4e2d\u5403\u6389 <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;k&lt;/span&gt;&lt;/span&gt;</code> \u6839\u3002\u5982\u679c\u8fd9\u5806\u9999\u8549\u5c11\u4e8e <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;k&lt;/span&gt;&lt;/span&gt;</code> \u6839\uff0c\u5979\u5c06\u5403\u6389\u8fd9\u5806\u7684\u6240\u6709\u9999\u8549\uff0c\u7136\u540e\u8fd9\u4e00\u5c0f\u65f6\u5185\u4e0d\u4f1a\u518d\u5403\u66f4\u591a\u7684\u9999\u8549\u3002  \u73c2\u73c2\u559c\u6b22\u6162\u6162\u5403\uff0c\u4f46\u4ecd\u7136\u60f3\u5728\u8b66\u536b\u56de\u6765\u524d\u5403\u6389\u6240\u6709\u7684\u9999\u8549\u3002\u8fd4\u56de\u5979\u53ef\u4ee5\u5728 <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;h&lt;/span&gt;&lt;/span&gt;</code> \u5c0f\u65f6\u5185\u5403\u6389\u6240\u6709\u9999\u8549\u7684\u6700\u5c0f\u901f\u5ea6 <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;k&lt;/span&gt;&lt;/span&gt;</code>\uff08<code>&lt;span class=\"color_font\"&gt;&lt;span&gt;k&lt;/span&gt;&lt;/span&gt;</code> \u4e3a\u6574\u6570\uff09\u3002</p> <ul> <li>\u601d\u8def\uff1a\u8981\u6c42\u7684\u662f\u6700\u5c0f\u901f\u5ea6\uff0c\u601d\u8003\u901f\u5ea6\u7684\u8303\u56f4[l,r]\u3002</li> <li>r\u6700\u5927\u53ea\u9700\u8981\u5c31\u53ea\u7528\u6570\u7ec4\u4e2d\u6700\u5927\u503c\u5c31\u53ef\u4ee5\u4e86\uff0c\u518d\u5927\u4e86\u5c31\u6ca1\u6536\u76ca\uff0c\u548cr\u7684\u6548\u679c\u4e00\u6837\u3002</li> <li>l\u6700\u5c0f\u7684\u60c5\u51b5\uff0c\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u5224\u65ad\u3002</li> <li>\u5355\u8c03\u6027\uff1a\u5982\u679c\u901f\u5ea6\u589e\u52a0\uff0c\u5219\u6240\u7528\u7684\u8017\u65f6\u53ea\u4f1a\u51cf\u5c0f\u6216\u8005\u4e0d\u53d8\u3002</li> <li>\u63a5\u7740\u4e8c\u5206\uff1a\u5728\u901f\u5ea6\u6570\u7ec4\u4e2d\u8fdb\u884c\u4e8c\u5206\uff0c\u4e0d\u65ad\u7f29\u5c0f\u8303\u56f4\u3002\u5982\u679cx\u901f\u5ea6\u6ee1\u8db3\uff0c\u5219\u53ea\u7528\u5728[l,x-1]\u8303\u56f4\u5185\u7ee7\u7eed\u4e8c\u5206\u5c31\u53ef\u4ee5\u3002</li> </ul> <p>\ud83d\udd14</p> <p>\u8fd9\u91cc\u7684\u6574\u4f53\u6a21\u578b\u5c31\u662f\u6ee1\u8db3\u6027\u8d28\u7684\u6700\u5de6\u4f4d\u7f6e\uff0c\u662f\u4e0a\u9762\u7684\u4e8c\u5206\u641c\u7d22\u60c5\u51b5\u4e8c\u7684\u63a8\u5e7f\u3002</p> Text Only<pre><code>class Solution {\n    //\u533a\u95f4\u957f\u5ea610^9,\u5982\u679c\u4f7f\u7528O(n)\u5fc5\u7136\u8d85\u65f6\uff0c\u9700\u8981\u4e8c\u5206\n    public int minEatingSpeed(int[] piles, int h) {\n        int l = 1, r = 0;\n        for(int pile : piles){\n            r = Math.max(r,pile);\n        }   \n        int ans = Integer.MIN_VALUE;\n        while(l&lt;=r){\n            int mid = l + (r-l)/2;\n            if(check(piles,mid,h)){\n                ans = mid;\n                r = mid-1;\n            }else{\n                l = mid+1;\n            }\n        }\n        return ans;\n    }\n    public static boolean check(int[]piles, int mid, int h){\n        //\u6ce8\u610f\u6570\u636e\u91cf\u5230\u4e8610^9\u4e86\u3002int\u7c7b\u578b\u8303\u56f4\u5230[-2\u4ebf\uff0c2\u4ebf]\uff0c\u6362\u4e3along\u66f4\u4fdd\u9669\n        long cost = 0L;\n        for(int pile : piles){\n            cost += Math.ceilDiv(pile, mid);\n        }\n        return cost &lt;= h;\n    }\n}\n</code></pre> <ol> <li>leetcode 410\u753b\u5320\u95ee\u9898</li> </ol> <p>\u7ed9\u5b9a\u4e00\u4e2a\u975e\u8d1f\u6574\u6570\u6570\u7ec4 <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;nums&lt;/span&gt;&lt;/span&gt;</code> \u548c\u4e00\u4e2a\u6574\u6570 <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;k&lt;/span&gt;&lt;/span&gt;</code> \uff0c\u4f60\u9700\u8981\u5c06\u8fd9\u4e2a\u6570\u7ec4\u5206\u6210 <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;k&lt;/span&gt;&lt;/span&gt;</code> \u4e2a\u975e\u7a7a\u7684\u8fde\u7eed\u5b50\u6570\u7ec4\u3002</p> <p>\u8bbe\u8ba1\u4e00\u4e2a\u7b97\u6cd5\u4f7f\u5f97\u8fd9 <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;k&lt;/span&gt;&lt;/span&gt;</code> \u4e2a\u5b50\u6570\u7ec4\u5404\u81ea\u548c\u7684\u6700\u5927\u503c\u6700\u5c0f\u3002</p> <p>\u62bd\u8c61\u4e3a\u753b\u5320\u95ee\u9898\u5c31\u662f\u6bcf\u4e2a\u753b\u5bb6\u8d1f\u8d23\u8fde\u7eed\u7684\u4e00\u6bb5\uff0c\u5e76\u884c\u8fdb\u884c\u753b\u4f5c\uff0c\u6700\u540e\u7ed3\u675f\u7684\u65f6\u95f4\u5c31\u662f\u753b\u5bb6\u4e2d\u8017\u65f6\u6700\u4e45\u7684\u65f6\u95f4\u3002\u6c42\u6700\u7ec8\u4efb\u52a1\u7ed3\u675f\u7684\u6700\u5c0f\u65f6\u95f4\u3002</p> <ol> <li>\u601d\u8def\uff1a</li> <li>s\u95ee\u9898\uff1a\u6bcf\u90e8\u5206\u7684\u7d2f\u52a0\u548c\u6c42\u51fa\u7684\u6700\u5927\u503c\u6700\u5c0f\u3002</li> <li>[l,r]\u8ba1\u7b97\uff1a\u7b54\u6848\u7684\u53ef\u80fd\u503c\u7684\u6700\u5c0f\u503c\u662f0\uff0c\u6700\u5927\u503c\u53ef\u4ee5\u5b9a\u7684\u6bd4\u8f83\u7c97\uff0c\u53ef\u4ee5\u5047\u8bbe\u4e3a\u6574\u4e2a\u6570\u7ec4\u7684\u7d2f\u52a0\u548c\u3002</li> <li>check\u51fd\u6570\uff1a\u5728\u6bcf\u4e2a\u90e8\u5206\u7684\u503c\u4e0d\u8d85\u8fc7mid\u7684\u60c5\u51b5\u4e0b\uff0c\u5219k\u6700\u5c0f\u503c\u4e3a\u591a\u5c11\u5c31\u53ef\u4ee5\u505a\u5230\u3002</li> <li>\u5355\u8c03\u6027\uff1a<ol> <li>\u6bcf\u4e00\u90e8\u5206limit\u7684\u589e\u52a0\uff0c\u5bf9\u5e94\u7740k\u7684\u6700\u5c0f\u503c\u51cf\u5c0f\u3002\u6211\u4eec\u8981\u8003\u8651\u7684\u80af\u5b9a\u662f\u6700\u503c\u60c5\u51b5\uff0c\u800c\u4e0d\u662f\u4e2d\u95f4\u503c\u7684\u60c5\u51b5\u3002</li> <li>\u5982\u679c\u6bcf\u4e00\u90e8\u5206\u8981\u6c42\u7684\u7ed3\u679c\u7684\u6700\u5927\u503climit\u589e\u52a0\uff0c\u5219\u5bf9\u5e94\u7684k\u503c\u7684\u6700\u5c0f\u503c\u5fc5\u7136\u51cf\u5c0f\u3002</li> </ol> </li> </ol> <p>\u5219\u5982\u679c\u76ee\u524d\u7684mid\u5bf9\u5e94\u7684k\u7684\u6700\u5c0f\u503c\u6ee1\u8db3\u6027\u8d28(\u81f3\u591ak\u6bb5)\uff0c\u5219\u53ef\u4ee5\u5411mid\u51cf\u5c0f\u7684\u65b9\u5411\u7f29\u5c0f\u8303\u56f4\u7ee7\u7eed\u4e8c\u5206\u3002</p> <p>\u5426\u5219\u9700\u8981\u5411mid\u589e\u52a0\u7684\u65b9\u5411\u7f29\u5c0f\u3002</p> <p>\ud83d\udca1</p> <p>\u9898\u76ee\u8981\u6c42\u5212\u5206\u6210 k \u6bb5\uff0c\u4f46\u5176\u5b9e\u5982\u679c\u80fd\u5212\u5206\u6210\u5c0f\u4e8e k \u6bb5\uff0c\u4e5f\u53ef\u4ee5\u5212\u5206\u6210 k \u6bb5\u3002\u6bd4\u5982\u5212\u5206\u6210 k\u22121 \u6bb5\uff0c\u90a3\u4e48\u628a\u5176\u4e2d\u7684\u4e00\u4e2a\u957f\u5ea6\u81f3\u5c11\u4e3a 2 \u7684\u6bb5\u5206\u6210\u4e24\u6bb5\uff0c\u8fd9\u4e24\u6bb5\u7684\u5143\u7d20\u548c\u90fd\u6bd4\u539f\u6765\u7684\u4e00\u6bb5\u5c0f\uff0c\u4e5f\u6ee1\u8db3\u8981\u6c42\u3002\u6240\u4ee5\u9898\u76ee\u76f8\u5f53\u4e8e\uff1a\u628a\u6570\u7ec4\u5212\u5206\u6210\u81f3\u591a k \u6bb5\uff0c\u5206\u522b\u8ba1\u7b97\u6bcf\u4e00\u6bb5\u7684\u5143\u7d20\u548c\uff0c\u6700\u5c0f\u5316\u5143\u7d20\u548c\u7684\u6700\u5927\u503c</p> <p>\u9047\u5230\u6700\u5927\u5316\u6700\u5c0f\u503c\u6216\u6700\u5c0f\u5316\u6700\u5927\u503c\uff0c\u5c31\u662f\u4e8c\u5206\u9898\u578b\u3002</p> <p>\u65f6\u95f4\u590d\u6742\u5ea6O(n * logsum)\u3002</p> Text Only<pre><code>class Solution {\n    public int splitArray(int[] nums, int k) {\n        int sum = 0;\n        for(int item : nums){\n            sum += item;\n        }\n        int l = 0, r = sum;\n        int ans = 0;\n        while(l&lt;=r){\n            int mid = l + (r-l)/2;\n            if(check(nums,mid,k)){\n                ans = mid;\n                r = mid-1;\n            }else{\n                l = mid+1;\n            }\n        }\n        return ans;\n    }\n    public static boolean check(int[] nums, int limit, int k){\n        int cnt = 1;\n        int cur = 0;\n        for(int item : nums){\n            if(item &gt; limit) return false;\n            if(cur + item &gt; limit){\n                cnt++;\n                cur = item;\n            }else{\n                cur += item;\n            }\n        }\n        return cnt&lt;=k;\n    }\n}\n</code></pre> <ol> <li>leetcode 719 \u7b2ck\u5c0f\u7684\u6570\u5bf9\u8ddd\u79bb</li> <li>\u9898\u76ee\uff1a\u6570\u5bf9 <code>&lt;span&gt;(a,b)&lt;/span&gt;</code> \u7531\u6574\u6570 <code>&lt;span&gt;a&lt;/span&gt;</code> \u548c <code>&lt;span&gt;b&lt;/span&gt;</code> \u7ec4\u6210\uff0c\u5176\u6570\u5bf9\u8ddd\u79bb\u5b9a\u4e49\u4e3a <code>&lt;span&gt;a&lt;/span&gt;</code> \u548c <code>&lt;span&gt;b&lt;/span&gt;</code> \u7684\u7edd\u5bf9\u5dee\u503c\u3002\u8fd4\u56de\u7b2ck\u5c0f\u7684\u6570\u5bf9\u8ddd\u79bb\u3002</li> <li>\u601d\u8def\uff1a<ol> <li>\u66b4\u529b\uff1a\u5b58\u50a8\u6240\u6709\u7684\u6570\u5bf9\uff0c\u7136\u540e\u4f7f\u7528\u5feb\u901f\u9009\u62e9\u7b97\u6cd5\u8fdb\u884c\u9009\u62e9\u7b2ck\u5c0f\u3002\u7a7a\u95f4\u4f1a\u88ab\u5361\u3002</li> <li>\u4e8c\u5206+\u7a7a\u95f4\u4f18\u5316\uff1a<ol> <li>\u6570\u7ec4\uff1a\u4efb\u610f\u4e24\u4e2a\u6570\u7684\u8ddd\u79bb</li> <li>\u8303\u56f4[l,r]: l=0, r = max-min</li> <li>check:\u8ddd\u79bb&lt;=mid\u7684\u6570\u91cf\u6709\u51e0\u4e2a</li> <li>\u5355\u8c03\u6027\uff1a\u8ddd\u79bb\u589e\u52a0\uff0c\u5219\u6ee1\u8db3\u7684\u6570\u91cf\u5fc5\u7136\u589e\u52a0\u3002\u56e0\u4e3a\u662f\u6c42&lt;=\u67d0\u4e2a\u8ddd\u79bb\u7684\u6570\u91cf\u3002 \u5982\u679c\u5dee\u503c&lt;=mid\uff0c\u6570\u91cf\u4e0d\u8db3k\u4e2a\uff0c\u5219\u9700\u8981\u5411[mid+1,r]\u641c\u7d22\u3002\u5426\u5219\u5982\u679c\u6570\u91cf&gt;=k\u4e2a\uff0c\u5219\u8bf4\u660e&gt;=mid\u7684\u8303\u56f4\u5747\u6ee1\u8db3\uff0c\u5219\u5411[l,mid-1]\u8303\u56f4\u641c\u7d22\u3002\u5219\u6700\u540e\u7ed3\u675f\u5c31\u662fdis&lt;=mid \u521a\u597d\u4e3ak\u4e2a\u7684\u8ddd\u79bb\u3002</li> </ol> </li> </ol> </li> </ol>"},{"location":"LANG/DS-leetcode/#_15","title":"\u94fe\u8868","text":""},{"location":"LANG/DS-leetcode/#_16","title":"\u6309\u503c\u4f20\u9012\u548c\u6309\u5f15\u7528\u4f20\u9012\uff1a","text":"<p>int ,byte,short,long,char,float double,boolean \u4ee5\u53caString\u662f\u6309\u503c\u4f20\u9012</p> <p>\u5176\u4ed6\u662f\u6309\u7167\u5f15\u7528\u4f20\u9012\uff0c\u6bd4\u5982\u6240\u6709\u7684\u5f15\u7528\u7c7b\u578b(\u6570\u7ec4\uff0c\u7c7b\uff0c\u7b49)</p>"},{"location":"LANG/DS-leetcode/#_17","title":"\u5355\u94fe\u8868\u7ffb\u8f6c\uff1a","text":"<p>\u4e09\u6b65\u66f2\uff1a\u5bf9\u4e8e\u5f53\u524d\u8282\u70b9cur\uff0c</p> <ol> <li>\u4fdd\u5b58cur.next\u7684\u4f4d\u7f6e</li> <li>\u6539\u53d8\u6307\u9488\u4e5f\u5c31\u662fnext\u6307\u5411\uff0c\u6307\u5411pre</li> <li>pre\u5411\u540e\u79fb\u52a8</li> </ol> Text Only<pre><code>//\u5355\u94fe\u8868\u7ffb\u8f6c\uff1a\n        public static ListNode reverseList(ListNode head) {\n            ListNode pre = null;\n            ListNode next = null;\n            while (head != null) {\n                next = head.next;\n//head.next = pre \u6700\u5f00\u59cb\u8868\u793a\u7684\u662f\u8ba9head\u6307\u5411null\n                head.next = pre;\n                pre = head;\n//head\u968f\u7740\u6bcf\u4e00\u6b65\u5f80\u540e\u79fb\u52a8\n                head = next;\n            }\n            return pre;\n        }\n//\u4e5f\u5c31\u662f\u6709pre = null,next = null;\u7136\u540e\u7684\u8bdd\u8ba9\u4e24\u8005\u540c\u65f6\u5e73\u79fb\u5230head\u548chead.next\n</code></pre>"},{"location":"LANG/DS-leetcode/#_18","title":"\u53cc\u94fe\u8868\u7ffb\u8f6c\uff1a","text":"Text Only<pre><code>    public static class DoubleListNode {\n        public int value;\n        public DoubleListNode last; //\u4e0a\u4e00\u4e2a\n        public DoubleListNode next; //\u4e0b\u4e00\u4e2a\n\n        public DoubleListNode(int v) {\n            value = v;\n        }\n    }\n\n    public static DoubleListNode reverseDoubleList(DoubleListNode head) {\n        DoubleListNode pre = null;\n        DoubleListNode next = null;\n        while (head != null) {\n            next = head.next;\n            head.next = pre;\n            head.last = next;\n            pre = head;\n\n            head = next;\n        }\n        return pre;\n    }\n</code></pre>"},{"location":"LANG/DS-leetcode/#_19","title":"\u5408\u5e76\u4e24\u4e2a\u6709\u5e8f\u94fe\u8868\uff1a","text":"<p>\u4e00\u5171\u4e09\u4e2a\u53d8\u91cf\uff1a</p> <ol> <li>pre\u6307\u5411\u7684\u662f\u5f53\u524d\u6700\u65b0\u7684\u6392\u597d\u7684\u8282\u70b9\u3002</li> <li>c1\u6307\u5411\u7b2c\u4e00\u4e2a\u7b49\u5f85\u6392\u5e8f\u7684\u94fe\u8868\u5934</li> <li>c2\u6307\u5411\u7b2c\u4e8c\u4e2a\u7b49\u5f85\u6392\u5e8f\u7684\u94fe\u8868\u5934</li> </ol> Text Only<pre><code>public static ListNode mergeTwoLists(ListNode head1, ListNode head2) {\n            if (head1 == null || head2 == null) {\n                return head1 == null ? head2 : head1;\n            }\n            ListNode head = head1.val &lt;= head2.val ? head1 : head2;\n            ListNode cur1 = head.next;\n            ListNode cur2 = head == head1 ? head2 : head1;\n            ListNode pre = head;\n            while (cur1 != null &amp;&amp; cur2 != null) {\n                if (cur1.val &lt;= cur2.val) {\n                    pre.next = cur1;\n                    cur1 = cur1.next;\n                } else {\n                    pre.next = cur2;\n                    cur2 = cur2.next;\n                }\n                pre = pre.next;\n            }\n            pre.next = cur1 != null ? cur1 : cur2;\n            return head;\n        }\n}\n</code></pre>"},{"location":"LANG/DS-leetcode/#_20","title":"\u94fe\u8868\u76f8\u52a0\uff1a","text":"<p>\u5176\u5b9e\u5c31\u662f\u9ad8\u7cbe\u5ea6\u5927\u6570\u76f8\u52a0\uff0c\u662f\u4e00\u9053\u6a21\u62df</p> <p>\u6ce8\u610f\u7559\u5728\u672c\u4f4d\u7684\u6570\u5b57\u662fsum % 10,\u800c\u8fdb\u4f4d\u7684\u662fcarry = sum / 10;</p> <p>\u6700\u540e\u7684\u8fdb\u4f4d\u7531\u4e8e\u90fd\u65f6\u7a7a\u503c\u5df2\u7ecf\u9000\u51fa\u5faa\u73af\u4e86\u3002\u6240\u4ee5\u9700\u8981\u7279\u5224\u3002</p> Text Only<pre><code>public static ListNode addTwoNumbers(ListNode h1, ListNode h2) {\n            ListNode ans = null, cur = null;\n            int carry = 0;\n            for (int sum, val; // \u58f0\u660e\u53d8\u91cf\n                    h1 != null || h2 != null; // \u7ec8\u6b62\u6761\u4ef6\n                    h1 = h1 == null ? null : h1.next, // \u6bcf\u4e00\u6b65h1\u7684\u8df3\u8f6c\n                    h2 = h2 == null ? null : h2.next // \u6bcf\u4e00\u6b65h2\u7684\u8df3\u8f6c\n                    ) {\n\n                sum = (h1 == null ? 0 : h1.val)\n                        + (h2 == null ? 0 : h2.val)\n                        + carry;\n\n                val = sum % 10;\n                carry = sum / 10;\n                if (ans == null) {\n                    ans = new ListNode(val);\n                    cur = ans;\n                } else {\n                    cur.next = new ListNode(val);\n                    cur = cur.next;\n                }\n            }\n            if (carry == 1) {\n                cur.next = new ListNode(1);\n            }\n            return ans;\n        }\n</code></pre>"},{"location":"LANG/DS-leetcode/#_21","title":"\u94fe\u8868\u5212\u5206\uff1a","text":"<p>\u7ed9\u4f60\u4e00\u4e2a\u94fe\u8868\u7684\u5934\u8282\u70b9 head \u548c\u4e00\u4e2a\u7279\u5b9a\u503c x</p> <p>\u8bf7\u4f60\u5bf9\u94fe\u8868\u8fdb\u884c\u5206\u9694\uff0c\u4f7f\u5f97\u6240\u6709 \u5c0f\u4e8e x \u7684\u8282\u70b9\u90fd\u51fa\u73b0\u5728 \u5927\u4e8e\u6216\u7b49\u4e8e x \u7684\u8282\u70b9\u4e4b\u524d\u3002</p> <p>\u4f60\u5e94\u5f53 \u4fdd\u7559 \u4e24\u4e2a\u5206\u533a\u4e2d\u6bcf\u4e2a\u8282\u70b9\u7684\u521d\u59cb\u76f8\u5bf9\u4f4d\u7f6e</p> <p>\u6838\u5fc3\u601d\u8def\uff1a\u5f00\u4e24\u4e2a\u94fe\u8868\uff0c\u4e00\u4e2a\u4fdd\u5b58\u5c0f\u7684\u90e8\u5206\uff0c\u4e00\u4e2a\u4fdd\u5b58\u5927\u7684\u90e8\u5206\uff0c\u6700\u540e\u524d\u4e00\u90e8\u5206\u7684next\u6307\u5411\u540e\u4e00\u90e8\u5206\u4f60\u7684\u5934\u3002\u4f7f\u7528\u4e86\u4e00\u4e2anext\u53d8\u91cf\u6765\u4fdd\u5b58\u904d\u5386\u5230\u8282\u70b9\u7684next\u6307\u9488\u3002</p> Text Only<pre><code>public static ListNode partition(ListNode head, int x) {\n            ListNode leftHead = null, leftTail = null; // &lt; x\u7684\u533a\u57df\n            ListNode rightHead = null, rightTail = null; // &gt;=x\u7684\u533a\u57df\n            ListNode next = null;\n            while (head != null) {\n                next = head.next;\n                head.next = null;\n                if (head.val &lt; x) {\n                    if (leftHead == null) {\n                        leftHead = head;\n                    } else {\n                        leftTail.next = head;\n                    }\n                    leftTail = head;\n                } else {\n                    if (rightHead == null) {\n                        rightHead = head;\n                    } else {\n                        rightTail.next = head;\n                    }\n                    rightTail = head;\n                }\n                head = next;\n            }\n            if (leftHead == null) {\n                return rightHead;\n            }\n            // &lt; x\u7684\u533a\u57df\u6709\u5185\u5bb9\uff01\n            leftTail.next = rightHead;\n            return leftHead;\n        }\n</code></pre>"},{"location":"LANG/DS-leetcode/#_22","title":"***\u94fe\u8868\u7684\u9ad8\u9891\u9898\u76ee\u603b\u7ed3","text":"<ol> <li> <p>\u6ce8\u610f\u70b9\uff1a</p> </li> <li> <p>\u4e00\u822c\u901a\u8fc7\u6838\u5fc3\u4ee3\u7801\u6a21\u5f0f\u8fdb\u884c</p> </li> <li>\u5982\u679c\u7a7a\u95f4\u4e0d\u4e25\u683c\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u5bb9\u5668\u8fdb\u884c\u89e3\u51b3\u3002</li> <li>\u5982\u679c\u7a7a\u95f4\u4e25\u683c\uff0c\u9700\u8981\u4f18\u5316\u7a7a\u95f4\uff0c\u6bd4\u5982O(1)\u3002</li> <li>\u6700\u5e38\u89c1\u6280\u5de7\uff1a\u5feb\u6162\u6307\u9488</li> <li>\u6838\u5fc3\u8003\u5bdf\u70b9\uff1acoding\u80fd\u529b</li> <li>\u9898\u76ee\uff1a</li> <li>\u8fd4\u56de\u4e24\u4e2a\u65e0\u73af\u94fe\u8868\u76f8\u4ea4\u7684\u7b2c\u4e00\u4e2a\u8282\u70b9 </li> <li>\u9898\u76ee\uff1a\u7ed9\u5b9a\u4e24\u4e2a\u94fe\u8868\uff0c\u5224\u65ad\u7ed3\u6784\u4e0a\u662f\u4e0d\u662f\u6709\u76f8\u4ea4\u3002</li> <li>\u601d\u8def\uff1a</li> <li>\u53ea\u5224\u65ad\u662f\u5426\u76f8\u4ea4\uff1a\u56e0\u4e3a\u65e0\u73af\uff0c\u6240\u4ee5\u7ed3\u5c3e\u5fc5\u7136\u662f\u76f8\u4ea4\u7684(\u540c\u4e00\u4e2a\u8282\u70b9).\u5355\u94fe\u8868\u53ea\u6709\u4e00\u4e2anext\u6307\u9488\uff0c\u4e5f\u4e0d\u4f1a\u6709\u4eba\u5b57\u5f62\u7684\u7ed3\u6784\u51fa\u73b0\u3002</li> <li>\u5224\u65ad\u76f8\u4ea4\u7684\u7b2c\u4e00\u4e2a\u8282\u70b9\uff1a\u5982\u679c\u957f\u5ea6\u5206\u522b\u662fa,b \u5e76\u4e14(b&gt;a)\u3002\u5219\u53ef\u4ee5\u4f7fb\u5148\u8d70b-a\u6b65\u3002\u7136\u540e\u4e24\u4e2a\u94fe\u8868\u540c\u6b65\u8d70\uff0c\u5fc5\u7136\u4f1a\u540c\u65f6\u8d70\u5230\u76f8\u4ea4\u7684\u4f4d\u7f6e\u3002\u4e5f\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528HashSet\u6765\u8fdb\u884c\u5bf9\u8c61\u662f\u5426\u76f8\u7b49\u7684\u5224\u65ad\uff0c\u65b9\u6cd5\u662f\u5148\u5c06\u4e00\u4e2a\u7ed3\u70b9\u5168\u90e8\u5b58\u5165HashSet\u4e2d\u3002\u5728\u904d\u5386\u53e6\u4e00\u4e2a\u7684\u65f6\u5019\u8fdb\u884c\u5224\u65ad\u3002</li> <li>k\u4e2a\u4e00\u7ec4\u7ffb\u8f6c\u94fe\u8868</li> <li>\u7ed9\u5b9a\u4e00\u4e2a\u94fe\u8868\uff0c\u6bcfk\u4e2a\u8282\u70b9\u4e00\u7ec4\u8fdb\u884c\u8c03\u6574\u3002</li> <li>\u601d\u8def\uff1a</li> <li>\u4f7f\u7528\u5bb9\u5668\uff1a\u5c06\u94fe\u8868\u6240\u6709\u8282\u70b9\u7684\u503c\u653e\u5165\u6570\u7ec4\u4e2d\uff0c\u7136\u540e\u5bf9\u6570\u7ec4\u8fdb\u884c\u6bcfk\u4e2a\u7ffb\u8f6c\uff0c\u6700\u540e\u518d\u6784\u5efa\u94fe\u8868\u3002</li> <li>\u4e0d\u4f7f\u7528\u5bb9\u5668\uff1a\u5047\u8bbe\u94fe\u8868\u5934\u90e8\u4e3aa-&gt;b-&gt;c-&gt;d...\uff0c\u540c\u65f6k=3\u5219\u8fc7\u7a0b\uff1a\u5148\u8bb0\u4f4f\u5934c\uff0c\u53cd\u8f6c\u540e\u8bb0\u4f4f\u5c3ea,\u5e76\u5c06a-&gt;d\u3002\u6bcf\u6b21\u90fd\u8981\u8bb0\u4f4f\u4e0a\u4e00\u6b21\u7684\u5c3e\uff0c\u56e0\u4e3a\u4e0a\u4e00\u4e2a\u7684\u5c3e\u4f1a\u6307\u5411\u4e0b\u4e00\u4e2a\u65b0\u8c03\u6574\u7684\u5934\u3002</li> </ol> <p></p> <ol> <li> <p>\u590d\u5236\u5e26\u968f\u673a\u6307\u9488\u7684\u94fe\u8868</p> </li> <li> <p>\u9898\u76ee\u80cc\u666f\uff1a\u539f\u6765\u7684\u5355\u94fe\u8868\u8282\u70b9\u7684\u6307\u9488\u591a\u4e86\u4e00\u4e2arandom\u6307\u9488\uff0c\u53ef\u4ee5\u6307\u5411\u8be5\u94fe\u8868\u7684\u4efb\u4f55\u8282\u70b9\u6216\u8005null\u3002\u8981\u6c42\u5bf9\u8be5\u94fe\u8868\u8fdb\u884c\u6df1\u62f7\u8d1d\u3002</p> </li> <li>\u601d\u8def\uff1a<ol> <li>\u4f7f\u7528\u5bb9\u5668\uff1a\u4f7f\u7528map\u7ed3\u6784\u3002\u5bf9\u539f\u6765\u7684\u94fe\u8868\u7684\u8282\u70b9\u4f5c\u4e3akey\uff0c\u65b0\u6784\u9020\u7684\u8282\u70b9\u4f5c\u4e3avalue\u3002\u7136\u540e\u904d\u5386map\u5728\uff0c\u5bf9\u4e8e\u4e00\u4e2ak-v\u6765\u8bf4\uff0c\u65b0\u6784\u9020\u8282\u70b9\u7684next\u548crandom\u6307\u9488\uff0c\u53ef\u4ee5\u901a\u8fc7\u67e5\u627ekey\u6765\u786e\u5b9a\u3002\u5229\u7528map\u5bf9v\u7684\u6307\u9488\u57df\u8d4b\u503c\u4e0a\u5bf9\u5e94\u7684\u65b0\u6784\u9020\u7684\u8282\u70b9\u5730\u5740\uff0c\u4ece\u800c\u8fbe\u5230\u6df1\u62f7\u8d1d\u3002</li> </ol> </li> <li>\u5224\u65ad\u94fe\u8868\u662f\u5426\u662f\u56de\u6587\u7ed3\u6784</li> <li>\u56de\u6587\u94fe\u8868\u793a\u4f8b\uff1a30-&gt;100-&gt;30-&gt;null</li> <li>\u601d\u8def\uff1a</li> <li>\u4f7f\u7528\u6808\u8fdb\u884c\u5224\u65ad\uff1a\u73b0\u5c06\u8282\u70b9\u5168\u90e8\u5165\u6808\uff0c\u540c\u65f6\u5f39\u51fa\u8282\u70b9\u548c\u904d\u5386\u94fe\u8868\uff0c\u4e00\u4e00\u5224\u65ad\u3002</li> <li>\u4f7f\u7528\u5feb\u6162\u6307\u9488\uff1a</li> <li>\u8fd4\u56de\u4e00\u4e2a\u94fe\u8868\u7684\u5165\u73af\u8282\u70b9</li> <li>\u601d\u8def\uff1a</li> <li>\u4f7f\u7528\u5bb9\u5668\uff1a\u4f7f\u7528HashSet\u3002\u53d8\u91cf\u94fe\u8868\uff0c\u5982\u679c\u4e0d\u5728\u5c31\u6dfb\u52a0\u8fdb\u53bb\uff0c\u5f53\u518d\u6b21\u904d\u5386\u7684\u65f6\u5019\u5728\u4e86\uff0c\u5c31\u8fd4\u56de\u8be5\u8282\u70b9</li> <li>\u4e0d\u4f7f\u7528\u5bb9\u5668(\u7ed3\u8bba)\uff1a</li> <li>\u5148\u4f7f\u7528\u5feb\u6162\u6307\u9488(\u4e00\u4e2a\u8d70\u4e24\u6b65\uff0c\u4e00\u4e2a\u8d70\u4e00\u6b65)\uff0c\u5230\u8fbe\u7b2c\u4e00\u4e2a\u76f8\u9047\u7684\u70b9</li> <li>\u7136\u540e\u5feb\u6307\u9488\u56de\u5230\u5f00\u5934\uff0c\u5feb\u6162\u6307\u9488\u540c\u65f6\u8d70(\u540c\u65f6\u8d70\u4e00\u6b65)\uff0c\u5219\u5fc5\u7136\u5728\u5165\u73af\u8282\u70b9\u5904\u76f8\u9047\u3002</li> </ol>"},{"location":"LANG/DS-leetcode/#_23","title":"\u961f\u5217\u548c\u6808","text":"<p>\u961f\u5217\u548c\u6808\u90fd\u662f\u4e00\u79cd\u903b\u8f91\u7ed3\u6784\uff0c\u7269\u7406\u7ed3\u6784\u53ef\u4ee5\u7528\u6570\u7ec4\u6216\u8005\u94fe\u8868\u8fdb\u884c\u5b9e\u73b0\u3002</p> <p>\u961f\u5217\uff1a\u5148\u8fdb\u5148\u51fa,\u4ece\u5c3e\u8fdb\uff0c\u4ece\u5934\u51fa\u3002</p> <p>\u6808\uff1a\u5148\u8fdb\u540e\u51fa</p> <p>\u63d2\u5165\u5220\u9664\u90fd\u662fO(1)\u7684\u65f6\u95f4\u590d\u6742\u5ea6</p>"},{"location":"LANG/DS-leetcode/#_24","title":"\u961f\u5217\u7684\u5b9e\u73b0","text":"Text Only<pre><code>public static class Queue1 {\n\n        // java\u4e2d\u7684\u53cc\u5411\u94fe\u8868LinkedList\n        // \u5355\u5411\u94fe\u8868\u5c31\u8db3\u591f\u4e86\n        public Queue&lt;Integer&gt; queue = new LinkedList&lt;&gt;();\n\n        // \u8c03\u7528\u4efb\u4f55\u65b9\u6cd5\u4e4b\u524d\uff0c\u5148\u8c03\u7528\u8fd9\u4e2a\u65b9\u6cd5\u6765\u5224\u65ad\u961f\u5217\u5185\u662f\u5426\u6709\u4e1c\u897f\n        public boolean isEmpty() {\n            return queue.isEmpty();\n        }\n\n        // \u5411\u961f\u5217\u4e2d\u52a0\u5165num\uff0c\u52a0\u5230\u5c3e\u5df4\n        public void offer(int num) {\n            queue.offer(num);\n        }\n\n        // \u4ece\u961f\u5217\u62ff\uff0c\u4ece\u5934\u62ff\n        public int poll() {\n            return queue.poll();\n        }\n\n        // \u8fd4\u56de\u961f\u5217\u5934\u7684\u5143\u7d20\u4f46\u662f\u4e0d\u5f39\u51fa\n        public int peek() {\n            return queue.peek();\n        }\n\n        // \u8fd4\u56de\u76ee\u524d\u961f\u5217\u91cc\u6709\u51e0\u4e2a\u6570\n        public int size() {\n            return queue.size();\n        }\n\n    }\n\n//\u6570\u7ec4\u5b9e\u73b0\uff1a\n// \u5b9e\u9645\u5237\u9898\u65f6\u66f4\u5e38\u89c1\u7684\u5199\u6cd5\uff0c\u5e38\u6570\u65f6\u95f4\u597d\n    // \u5982\u679c\u53ef\u4ee5\u786e\u5b9a\u52a0\u5165\u64cd\u4f5c\u7684\u603b\u6b21\u6570\u4e0d\u8d85\u8fc7n\uff0c\u90a3\u4e48\u53ef\u4ee5\u7528\n    // \u4e00\u822c\u7b14\u8bd5\u3001\u9762\u8bd5\u90fd\u4f1a\u6709\u4e00\u4e2a\u660e\u786e\u6570\u636e\u91cf\uff0c\u6240\u4ee5\u8fd9\u662f\u6700\u5e38\u7528\u7684\u65b9\u5f0f\n    // \u961f\u5217\u7684\u5b58\u50a8\u8303\u56f4\u662f[l,r)\n    public static class Queue2 {\n\n        public int[] queue;\n        public int l;\n        public int r;\n\n        // \u52a0\u5165\u64cd\u4f5c\u7684\u603b\u6b21\u6570\u4e0a\u9650\u662f\u591a\u5c11\uff0c\u4e00\u5b9a\u8981\u660e\u786e\n        public Queue2(int n) {\n            queue = new int[n];\n            l = 0;\n            r = 0;\n        }\n\n        // \u8c03\u7528\u4efb\u4f55\u65b9\u6cd5\u4e4b\u524d\uff0c\u5148\u8c03\u7528\u8fd9\u4e2a\u65b9\u6cd5\u6765\u5224\u65ad\u961f\u5217\u5185\u662f\u5426\u6709\u4e1c\u897f\n        public boolean isEmpty() {\n            return l == r;\n        }\n\n        public void offer(int num) {\n            queue[r++] = num;\n        }\n\n        public int poll() {\n            return queue[l++];\n        }\n        // ?\n        // l...r-1 r\n        // [l..r)\n        public int head() {\n            return queue[l];\n        }\n\n        public int tail() {\n            return queue[r - 1];\n        }\n\n        public int size() {\n            return r - l;\n        }\n\n    }\n</code></pre>"},{"location":"LANG/DS-leetcode/#_25","title":"\u6808\u7684\u5b9e\u73b0","text":"Text Only<pre><code>// \u76f4\u63a5\u7528java\u5185\u90e8\u7684\u5b9e\u73b0\n    // \u5176\u5b9e\u5c31\u662f\u52a8\u6001\u6570\u7ec4\uff0c\u4e0d\u8fc7\u5e38\u6570\u65f6\u95f4\u5e76\u4e0d\u597d\n    public static class Stack1 {\n\n        public Stack&lt;Integer&gt; stack = new Stack&lt;&gt;();\n\n        // \u8c03\u7528\u4efb\u4f55\u65b9\u6cd5\u4e4b\u524d\uff0c\u5148\u8c03\u7528\u8fd9\u4e2a\u65b9\u6cd5\u6765\u5224\u65ad\u6808\u5185\u662f\u5426\u6709\u4e1c\u897f\n        public boolean isEmpty() {\n            return stack.isEmpty();\n        }\n\n        public void push(int num) {\n            stack.push(num);\n        }\n\n        public int pop() {\n            return stack.pop();\n        }\n\n        public int peek() {\n            return stack.peek();\n        }\n\n        public int size() {\n            return stack.size();\n        }\n\n    }\n\n// \u5b9e\u9645\u5237\u9898\u65f6\u66f4\u5e38\u89c1\u7684\u5199\u6cd5\uff0c\u5e38\u6570\u65f6\u95f4\u597d\n    // \u5982\u679c\u53ef\u4ee5\u4fdd\u8bc1\u540c\u65f6\u5728\u6808\u91cc\u7684\u5143\u7d20\u4e2a\u6570\u4e0d\u4f1a\u8d85\u8fc7n\uff0c\u90a3\u4e48\u53ef\u4ee5\u7528\n    // \u4e5f\u5c31\u662f\u53d1\u751f\u5f39\u51fa\u64cd\u4f5c\u4e4b\u540e\uff0c\u7a7a\u95f4\u53ef\u4ee5\u590d\u7528\n    // \u4e00\u822c\u7b14\u8bd5\u3001\u9762\u8bd5\u90fd\u4f1a\u6709\u4e00\u4e2a\u660e\u786e\u6570\u636e\u91cf\uff0c\u6240\u4ee5\u8fd9\u662f\u6700\u5e38\u7528\u7684\u65b9\u5f0f\n    public static class Stack2 {\n\n        public int[] stack;\n        public int size;\n\n        // \u540c\u65f6\u5728\u6808\u91cc\u7684\u5143\u7d20\u4e2a\u6570\u4e0d\u4f1a\u8d85\u8fc7n\n        public Stack2(int n) {\n            stack = new int[n];\n            size = 0;\n        }\n\n        // \u8c03\u7528\u4efb\u4f55\u65b9\u6cd5\u4e4b\u524d\uff0c\u5148\u8c03\u7528\u8fd9\u4e2a\u65b9\u6cd5\u6765\u5224\u65ad\u6808\u5185\u662f\u5426\u6709\u4e1c\u897f\n        public boolean isEmpty() {\n            return size == 0;\n        }\n\n        public void push(int num) {\n            stack[size++] = num;\n        }\n\n        public int pop() {\n            return stack[--size];\n        }\n\n        public int peek() {\n            return stack[size - 1];\n        }\n\n        public int size() {\n            return size;\n        }\n    }\n</code></pre>"},{"location":"LANG/DS-leetcode/#_26","title":"\u73af\u5f62\u961f\u5217\u7684\u5b9e\u73b0","text":"<p>\u5e95\u5c42\u8fd8\u662f\u4f7f\u7528\u6570\u7ec4\u3002\u5171\u67094\u4e2a\u53d8\u91cf\uff1al,r,size,limit\u3002\u4f7f\u7528size\u6765\u9650\u5236\u52a0\u5165\u548c\u5f39\u51fa\u7684\u64cd\u4f5c</p> <p>\u5982\u679csize &gt;0,\u53ef\u4ee5\u5f39\u51fa\u3002\u5982\u679csize &lt; limit\uff0c\u53ef\u4ee5\u52a0\u5165\u3002</p> <p>\u961f\u5217\u7684\u8303\u56f4\u8fd8\u662f\u59cb\u7ec8\u662f[l,r)</p> Text Only<pre><code>class MyCircularQueue {\n\n        public int[] queue;\n\n        public int l, r, size, limit;\n\n        // \u540c\u65f6\u5728\u961f\u5217\u91cc\u7684\u6570\u5b57\u4e2a\u6570\uff0c\u4e0d\u8981\u8d85\u8fc7k\n        public MyCircularQueue(int k) {\n            queue = new int[k];\n            l = r = size = 0;\n            limit = k;\n        }\n\n        // \u5982\u679c\u961f\u5217\u6ee1\u4e86\uff0c\u4ec0\u4e48\u4e5f\u4e0d\u505a\uff0c\u8fd4\u56defalse\n        // \u5982\u679c\u961f\u5217\u6ca1\u6ee1\uff0c\u52a0\u5165value\uff0c\u8fd4\u56detrue\n        public boolean enQueue(int value) {\n            if (isFull()) {\n                return false;\n            } else {\n                queue[r] = value;\n                // r++, \u7ed3\u675f\u4e86\uff0c\u8df3\u56de0\n                r = r == limit - 1 ? 0 : (r + 1);\n                size++;\n                return true;\n            }\n        }\n\n        // \u5982\u679c\u961f\u5217\u7a7a\u4e86\uff0c\u4ec0\u4e48\u4e5f\u4e0d\u505a\uff0c\u8fd4\u56defalse\n        // \u5982\u679c\u961f\u5217\u6ca1\u7a7a\uff0c\u5f39\u51fa\u5934\u90e8\u7684\u6570\u5b57\uff0c\u8fd4\u56detrue\n        public boolean deQueue() {\n            if (isEmpty()) {\n                return false;\n            } else {\n                // l++, \u7ed3\u675f\u4e86\uff0c\u8df3\u56de0\n                l = l == limit - 1 ? 0 : (l + 1);\n                size--;\n                return true;\n            }\n        }\n\n        // \u8fd4\u56de\u961f\u5217\u5934\u90e8\u7684\u6570\u5b57\uff08\u4e0d\u5f39\u51fa\uff09\uff0c\u5982\u679c\u6ca1\u6709\u6570\u8fd4\u56de-1\n        public int Front() {\n            if (isEmpty()) {\n                return -1;\n            } else {\n                return queue[l];\n            }\n        }\n        //\u8fd4\u56de\u961f\u5217\u5c3e\u90e8\u7684\u6570\u5b57\uff0c\u4e0d\u5f39\u51fa\n        public int Rear() {\n            if (isEmpty()) {\n                return -1;\n            } else {\n                int last = r == 0 ? (limit - 1) : (r - 1);\n                return queue[last];\n            }\n        }\n\n        public boolean isEmpty() {\n            return size == 0;\n        }\n\n        public boolean isFull() {\n            return size == limit;\n        }\n\n    }\n</code></pre>"},{"location":"LANG/DS-leetcode/#_27","title":"\u6808\u548c\u961f\u5217\u76f8\u4e92\u5b9e\u73b0","text":""},{"location":"LANG/DS-leetcode/#_28","title":"\u4f7f\u7528\u6808\u5b9e\u73b0\u961f\u5217","text":"<p>\u65b9\u6cd5\uff1a\u4f7f\u7528in, out\u4e24\u4e2a\u6808</p> <ol> <li>out \u5fc5\u987b\u4e3a\u7a7a\uff0cin\u624d\u80fd\u5012\u5165\u6570\u636e</li> <li>in\u53ea\u8981\u5012\u5165\u6570\u636e\uff0c\u5c31\u5fc5\u987b\u5012\u5b8c</li> <li>\u81ea\u5df1\u5c01\u88c5\u7684\u65f6\u5019\uff0c\u65e0\u8bba\u662fpush,pop\u8fd8\u662fpeek\u90fd\u8c03\u7528inToOut\uff0c\u80fd\u4e0d\u80fd\u6267\u884c\u65b9\u6cd5\u4f53\u53d6\u51b3\u4e8e\u4e0a\u9762\u4e24\u4e2a\u6761\u4ef6\u3002push\u7684\u65b9\u6cd5\u5728in\u4e2d\u64cd\u4f5c\uff0cpop\u548cpeek\u5728out\u4e2d\u64cd\u4f5c\u3002</li> <li>\u65f6\u95f4\u590d\u6742\u5ea6\uff1a\u6bcf\u4e2a\u6570\u9876\u591a\u90fd\u53ea\u4f1a\u6267\u884c4\u6b21\u64cd\u4f5c\u3002\u6240\u4ee5\u4e3aO(1)</li> </ol> Text Only<pre><code>class MyQueue {\n\n        public Stack&lt;Integer&gt; in;\n\n        public Stack&lt;Integer&gt; out;\n\n        public MyQueue() {\n            in = new Stack&lt;Integer&gt;();\n            out = new Stack&lt;Integer&gt;();\n        }\n\n        // \u5012\u6570\u636e\n        // \u4ecein\u6808\uff0c\u628a\u6570\u636e\u5012\u5165out\u6808\n        // 1) out\u7a7a\u4e86\uff0c\u624d\u80fd\u5012\u6570\u636e\n        // 2) \u5982\u679c\u5012\u6570\u636e\uff0cin\u5fc5\u987b\u5012\u5b8c\n        private void inToOut() {\n            if (out.empty()) {\n                while (!in.empty()) {\n                    out.push(in.pop());\n                }\n            }\n        }\n\n        public void push(int x) {\n            in.push(x);\n            inToOut();\n        }\n\n        public int pop() {\n            inToOut();\n            return out.pop();\n        }\n\n        public int peek() {\n            inToOut();\n            return out.peek();\n        }\n\n        public boolean empty() {\n            return in.isEmpty() &amp;&amp; out.isEmpty();\n        }\n\n    }\n</code></pre>"},{"location":"LANG/DS-leetcode/#_29","title":"\u961f\u5217\u5b9e\u73b0\u6808","text":"<p>\u961f\u5217\uff1a\u5c3e\u8fdb\u5934\u51fa</p> <p>\u6838\u5fc3\u601d\u60f3\uff1a\u961f\u5217\u51fa\u961f\u662f\u987a\u5e8f\u7684\uff0c\u800c\u6808\u5f39\u51fa\u7684\u8bdd\u4e3a\u5012\u5e8f\u3002\u6240\u4ee5\u6bcf\u6b21\u90fd\u628a\u961f\u5217\u65b0\u52a0\u5165\u7684\u6570\u524d\u9762\u7684\u6570\u5168\u90e8\u4ece\u961f\u5217\u5934\u5f39\u51fa\uff0c\u518d\u4ece\u5c3e\u90e8\u8fdb\u5165\uff0c\u4e5f\u5c31\u662f\u9006\u5e8f\u3002</p> <p>\u5355\u6b21push\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u662fO(n)\uff1b</p> Text Only<pre><code>class MyStack {\n\n        Queue&lt;Integer&gt; queue;\n\n        public MyStack() {\n            queue = new LinkedList&lt;Integer&gt;();\n        }\n\n        // O(n)\n        public void push(int x) {\n            int n = queue.size();\n            queue.offer(x);\n            for (int i = 0; i &lt; n; i++) {\n                queue.offer(queue.poll());\n            }\n        }\n\n        public int pop() {\n            return queue.poll();\n        }\n\n        public int top() {\n            return queue.peek();\n        }\n\n        public boolean empty() {\n            return queue.isEmpty();\n        }\n\n    }\n</code></pre>"},{"location":"LANG/DS-leetcode/#_30","title":"\u6700\u5c0f\u6808","text":"<p>\u9664\u4e86\u5b9e\u73b0\u5e38\u89c4\u7684\u6808\u529f\u80fd\uff0c\u8fd8\u9700\u8981\u5b9e\u73b0getmin\u65b9\u6cd5\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u9700\u8981\u53ef\u4ee5\u5728\u4efb\u4f55\u65f6\u5019\u7528O(1)\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u5185\u627e\u5230\u6700\u5c0f\u503c</p> <p>\u65b9\u6cd5</p> <ol> <li>\u4f7f\u7528\u4e24\u4e2a\u6808 data \u548c min</li> <li>min\u968f\u7740data\u7684\u538b\u5165\u6570\u636e\uff0c\u6bcf\u4e00\u6b21\u548c\u6700\u5c0f\u6808\u7684\u6808\u9876\u5bf9\u6bd4\u3002</li> <li>\u5982\u679c\u5f53\u524d\u6570\u5b57\u5927\u4e8emin\u6808\u9876\uff0c\u91cd\u590d\u538b\u5165min\u7684\u6808\u9876\u3002\u5982\u679c\u5c0f\u4e8emin\u6808\u9876\uff0c\u5219\u538b\u5165data\u4e2d\u65b0\u52a0\u5165\u7684\u6570\u636e\u3002</li> <li>\u521d\u59cb\u60c5\u51b5\uff1a\u5982\u679cmin\u4e3a\u7a7a\uff0c\u5219data\u6808\u4e5f\u5fc5\u7136\u4e3a\u7a7a\uff0c\u540c\u6b65\u538b\u5165\u6570\u636e\u5c31\u53ef\u4ee5\u3002</li> <li>\u6bcf\u6b21\u5f39\u51fa\u7684\u65f6\u5019\uff0cdata\u548cmin\u540c\u6b65\u5f39\u51fa</li> </ol> Text Only<pre><code>//\u4f7f\u7528\u6570\u7ec4\u5b9e\u73b0\u7684\u90e8\u5206\nclass MinStack2 {\n        // leetcode\u7684\u6570\u636e\u5728\u6d4b\u8bd5\u65f6\uff0c\u540c\u65f6\u5728\u6808\u91cc\u7684\u6570\u636e\u4e0d\u8d85\u8fc7\u8fd9\u4e2a\u503c\n        // \u8fd9\u662f\u51e0\u6b21\u63d0\u4ea4\u5b9e\u9a8c\u51fa\u6765\u7684\uff0c\u54c8\u54c8\n        // \u5982\u679cleetcode\u8865\u6d4b\u8bd5\u6570\u636e\u4e86\uff0c\u8d85\u8fc7\u8fd9\u4e2a\u91cf\u5bfc\u81f4\u51fa\u9519\uff0c\u5c31\u8c03\u5927\n        public final int MAXN = 8001;\n\n        public int[] data;\n        public int[] min;\n        int size;\n\n        public MinStack2() {\n            data = new int[MAXN];\n            min = new int[MAXN];\n            size = 0;\n        }\n\n        public void push(int val) {\n            data[size] = val;\n            if (size == 0 || val &lt;= min[size - 1]) {\n                min[size] = val;\n            } else {\n                min[size] = min[size - 1];\n            }\n            size++;\n        }\n\n        public void pop() {\n            size--;\n        }\n\n        public int top() {\n            return data[size - 1];\n        }\n\n        public int getMin() {\n            return min[size - 1];\n        }\n    }\n</code></pre>"},{"location":"LANG/DS-leetcode/#_31","title":"\u53cc\u7aef\u961f\u5217","text":"<p>\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u5185\u90e8\u7684LinkedList\u5b9e\u73b0Deque\u63a5\u53e3\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u6570\u7ec4\u5b9e\u73b0\u3002</p> <p>\u6570\u7ec4\u5b9e\u73b0\u7684\u6548\u7387\u6bd4\u8f83\u9ad8\uff0cLinkedList\u5b9e\u73b0\u6bd4\u8f83\u7b80\u6d01\u3002</p> Text Only<pre><code>class MyCircularDeque1 {\n\n        public Deque&lt;Integer&gt; deque = new LinkedList&lt;&gt;(); //\n        public int size;\n        public int limit;\n\n        public MyCircularDeque1(int k) {\n            size = 0;\n            limit = k;\n        }\n\n        public boolean insertFront(int value) {\n            if (isFull()) {\n                return false;\n            } else {\n                deque.offerFirst(value);\n                size++;\n                return true;\n            }\n        }\n\n        public boolean insertLast(int value) {\n            if (isFull()) {\n                return false;\n            } else {\n                deque.offerLast(value);\n                size++;\n                return true;\n            }\n        }\n\n        public boolean deleteFront() {\n            if (isEmpty()) {\n                return false;\n            } else {\n                size--;\n                deque.pollFirst();\n                return true;\n            }\n        }\n\n        public boolean deleteLast() {\n            if (isEmpty()) {\n                return false;\n            } else {\n                size--;\n                deque.pollLast();\n                return true;\n            }\n        }\n\n        public int getFront() {\n            if (isEmpty()) {\n                return -1;\n            } else {\n                return deque.peekFirst();\n            }\n        }\n\n        public int getRear() {\n            if (isEmpty()) {\n                return -1;\n            } else {\n                return deque.peekLast();\n            }\n        }\n\n        public boolean isEmpty() {\n            return size == 0;\n        }\n\n        public boolean isFull() {\n            return size == limit;\n        }\n\n//\u4f7f\u7528\u6570\u7ec4\u5b9e\u73b0\uff1a\nclass MyCircularDeque2 {\n\n        public int[] deque;\n        public int l, r, size, limit;\n\n        public MyCircularDeque2(int k) {\n            deque = new int[k];\n            l = r = size = 0;\n            limit = k;\n        }\n\n        public boolean insertFront(int value) {\n            if (isFull()) {\n                return false;\n            } else {\n                if (isEmpty()) {\n                    l = r = 0;\n                    deque[0] = value;\n                } else {\n                    l = l == 0 ? (limit - 1) : (l - 1);\n                    deque[l] = value;\n                }\n                size++;\n                return true;\n            }\n        }\n\n        public boolean insertLast(int value) {\n            if (isFull()) {\n                return false;\n            } else {\n                if (isEmpty()) {\n                    l = r = 0;\n                    deque[0] = value;\n                } else {\n                    r = r == limit - 1 ? 0 : (r + 1);\n                    deque[r] = value;\n                }\n                size++;\n                return true;\n            }\n        }\n\n        public boolean deleteFront() {\n            if (isEmpty()) {\n                return false;\n            } else {\n                l = (l == limit - 1) ? 0 : (l + 1);\n                size--;\n                return true;\n            }\n        }\n\n        public boolean deleteLast() {\n            if (isEmpty()) {\n                return false;\n            } else {\n                r = r == 0 ? (limit - 1) : (r - 1);\n                size--;\n                return true;\n            }\n        }\n\n        public int getFront() {\n            if (isEmpty()) {\n                return -1;\n            } else {\n                return deque[l];\n            }\n        }\n\n        public int getRear() {\n            if (isEmpty()) {\n                return -1;\n            } else {\n                return deque[r];\n            }\n        }\n\n        public boolean isEmpty() {\n            return size == 0;\n        }\n\n        public boolean isFull() {\n            return size == limit;\n        }\n</code></pre>"},{"location":"LANG/DS-leetcode/#_32","title":"\u4e8c\u53c9\u6811\uff1a","text":""},{"location":"LANG/DS-leetcode/#_33","title":"\u9012\u5f52\u904d\u5386\uff1a","text":"<p>\u524d\u5e8f\uff0c\u4e2d\u5e8f\uff0c\u540e\u5e8f\uff1a</p> Text Only<pre><code>public static void preOrder(TreeNode head) {\n        if (head == null) {\n            return;\n        }\n        System.out.print(head.val + \" \");\n        preOrder(head.left);\n        preOrder(head.right);\n    }\n\n    // \u4e2d\u5e8f\u6253\u5370\u6240\u6709\u8282\u70b9\uff0c\u9012\u5f52\u7248\n    public static void inOrder(TreeNode head) {\n        if (head == null) {\n            return;\n        }\n        inOrder(head.left);\n        System.out.print(head.val + \" \");\n        inOrder(head.right);\n    }\n\n    // \u540e\u5e8f\u6253\u5370\u6240\u6709\u8282\u70b9\uff0c\u9012\u5f52\u7248\n    public static void posOrder(TreeNode head) {\n        if (head == null) {\n            return;\n        }\n        posOrder(head.left);\n        posOrder(head.right);\n        System.out.print(head.val + \" \");\n    }\n</code></pre>"},{"location":"LANG/DS-leetcode/#_34","title":"\u975e\u9012\u5f52\u904d\u5386\uff1a","text":"<ol> <li>\u5bf9\u4e8e\u5148\u5e8f\u904d\u5386\uff1a</li> <li>\u4f7f\u7528\u4e00\u4e2a\u6808</li> <li>\u6ce8\u610f\u5224\u7a7a</li> <li>\u6bcf\u6b21\u5bf9\u4e8e\u5f39\u51fa\u7684\u8282\u70b9\uff0c\u5f39\u51fa\u5c31\u6267\u884c\u76f8\u5173\u64cd\u4f5c\uff0c\u7136\u540e\u5148\u538b\u5165\u53f3\u5b50\u8282\u70b9\uff0c\u518d\u538b\u5165\u5de6\u5b50\u8282\u70b9\u3002</li> <li>\u5bf9\u4e8e\u4e2d\u5e8f\u904d\u5386\uff1a</li> <li>\u9996\u5148\uff0c\u8ba9\u6574\u4e2a\u5de6\u6811\u7684\u5de6\u8fb9\u754c\u5168\u90e8\u8fdb\u5165\u6808\uff0c\u76f4\u5230\u4e3a\u7a7a</li> <li>\u7136\u540e\u5f00\u59cb\u5f39\u51fa\uff0c\u6bcf\u5f39\u51fa\u4e00\u4e2a\u8282\u70b9\u6267\u884c\u76f8\u5173\u64cd\u4f5c\uff0c\u7136\u540e\u5bf9\u4e8e\u5b83\u7684\u53f3\u6811\uff0c\u91cd\u590d\u6b65\u9aa4a</li> <li>\u91cd\u70b9\u662f\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u8282\u70b9\uff0c\u90fd\u662f\u5904\u7406\u5e72\u51c0\u5de6\u5b50\u6811\uff0c\u7136\u540e\u5bf9\u81ea\u5df1\u8fdb\u884c\u64cd\u4f5c\uff0c\u518d\u8fdb\u884c\u53f3\u5b50\u6811\u91cd\u590d\u3002\u8fd9\u5c31\u662f\u4e2d\u5e8f\u904d\u5386</li> </ol> Text Only<pre><code>// \u5148\u5e8f\u6253\u5370\u6240\u6709\u8282\u70b9\uff0c\u975e\u9012\u5f52\u7248\n    public static void preOrder(TreeNode head) {\n        if (head != null) {\n            Stack&lt;TreeNode&gt; stack = new Stack&lt;&gt;();\n            stack.push(head);\n            while (!stack.isEmpty()) {\n                head = stack.pop();\n                System.out.print(head.val + \" \");\n                if (head.right != null) {\n                    stack.push(head.right);\n                }\n                if (head.left != null) {\n                    stack.push(head.left);\n                }\n            }\n            System.out.println();\n        }\n    }\n\n    // \u4e2d\u5e8f\u6253\u5370\u6240\u6709\u8282\u70b9\uff0c\u975e\u9012\u5f52\u7248\n    public static void inOrder(TreeNode head) {\n        if (head != null) {\n            Stack&lt;TreeNode&gt; stack = new Stack&lt;&gt;();\n            //\u6808\u4e0d\u4e3a\u7a7a\uff0c\u6216\u8005\u5f53\u524d\u7684\u5b50\u6811\u4e0d\u4e3a\u7a7a\n            while (!stack.isEmpty() || head != null) {\n                if (head != null) {\n                    stack.push(head);\n                    head = head.left;\n                } else {\n                    //head\u7b49\u4e8e\u81ea\u5df1\u5f39\u51fa\u7684\u8282\u70b9\n                    head = stack.pop();\n                    System.out.print(head.val + \" \");\n                    head = head.right;\n                }\n            }\n            System.out.println();\n        }\n    }\n\n    // \u540e\u5e8f\u6253\u5370\u6240\u6709\u8282\u70b9\uff0c\u975e\u9012\u5f52\u7248\n    // \u8fd9\u662f\u7528\u4e24\u4e2a\u6808\u7684\u65b9\u6cd5\n    public static void posOrderTwoStacks(TreeNode head) {\n        if (head != null) {\n            Stack&lt;TreeNode&gt; stack = new Stack&lt;&gt;();\n            Stack&lt;TreeNode&gt; collect = new Stack&lt;&gt;();\n            stack.push(head);\n            while (!stack.isEmpty()) {\n                head = stack.pop();\n                collect.push(head);\n                if (head.left != null) {\n                    stack.push(head.left);\n                }\n                if (head.right != null) {\n                    stack.push(head.right);\n                }\n            }\n            while (!collect.isEmpty()) {\n                System.out.print(collect.pop().val + \" \");\n            }\n            System.out.println();\n        }\n    }\n\n    // \u540e\u5e8f\u6253\u5370\u6240\u6709\u8282\u70b9\uff0c\u975e\u9012\u5f52\u7248\n    // \u8fd9\u662f\u7528\u4e00\u4e2a\u6808\u7684\u65b9\u6cd5\n    public static void posOrderOneStack(TreeNode h) {\n        if (h != null) {\n            Stack&lt;TreeNode&gt; stack = new Stack&lt;&gt;();\n            stack.push(h);\n            // \u5982\u679c\u59cb\u7ec8\u6ca1\u6709\u6253\u5370\u8fc7\u8282\u70b9\uff0ch\u5c31\u4e00\u76f4\u662f\u5934\u8282\u70b9\n            // \u4e00\u65e6\u6253\u5370\u8fc7\u8282\u70b9\uff0ch\u5c31\u53d8\u6210\u6253\u5370\u8282\u70b9\n            // \u4e4b\u540eh\u7684\u542b\u4e49 : \u4e0a\u4e00\u6b21\u6253\u5370\u7684\u8282\u70b9\n            while (!stack.isEmpty()) {\n                TreeNode cur = stack.peek();\n                if (cur.left != null &amp;&amp; h != cur.left &amp;&amp; h != cur.right) {\n                    // \u6709\u5de6\u6811\u4e14\u5de6\u6811\u6ca1\u5904\u7406\u8fc7\n                    stack.push(cur.left);\n                } else if (cur.right != null &amp;&amp; h != cur.right) {\n                    // \u6709\u53f3\u6811\u4e14\u53f3\u6811\u6ca1\u5904\u7406\u8fc7\n                    stack.push(cur.right);\n                } else {\n                    // \u5de6\u6811\u3001\u53f3\u6811 \u6ca1\u6709 \u6216\u8005 \u90fd\u5904\u7406\u8fc7\u4e86\n                    System.out.print(cur.val + \" \");\n                    h = stack.pop();\n                }\n            }\n            System.out.println();\n        }\n    }\n</code></pre>"},{"location":"LANG/DS-leetcode/#_35","title":"\u4e8c\u53c9\u6811\u9ad8\u9891\u9898","text":""},{"location":"LANG/DS-leetcode/#_36","title":"\u4e8c\u53c9\u6811\u7684\u5c42\u5e8f\u904d\u5386","text":"<ol> <li>\u601d\u8def1\uff1abfs\u3002\u4f7f\u7528\u961f\u5217\u5b9e\u73b0\uff0c\u4e00\u8282\u8282\u70b9\u5165\u961f\u5e76\u64cd\u4f5c\u4e4b\u540e\uff0c\u5f39\u51fa\uff0c\u6709\u5de6\u52a0\u5de6\uff0c\u6709\u53f3\u52a0\u53f3\u3002\u800c\u6309\u5c42\u6536\u96c6\u8282\u70b9\u7684\u65f6\u5019\uff0c\u901a\u8fc7\u54c8\u5e0c\u8868\u8fdb\u884c\u6536\u96c6\u6bcf\u4e2a\u8282\u70b9\u6240\u5bf9\u5e94\u7684\u5c42\u6570\u3002</li> <li>\u601d\u8def2\uff1abfs\u4f18\u5316\u7248\uff0c\u4f7f\u7528\u6570\u7ec4\u6a21\u62df\u961f\u5217\u3002\u7136\u540e\u4e00\u6b21\u5904\u7406\u4e00\u5c42\u6570\u636e\u3002</li> <li>\u83b7\u5f97\u5f53\u524d\u7684\u961f\u5217\u957f\u5ea6size</li> <li>\u5faa\u73afsize\u6b21\uff0c\u5bf9\u6bcf\u4e2a\u8282\u70b9\u8fdb\u884c\u64cd\u4f5c\uff0c\u5de6\u53f3\u5165\u961f\u3002\u6700\u540e\u6dfb\u52a0\u8be5\u5c42\u7ed3\u679c\u5230\u6700\u7ec8\u7ed3\u679c\u3002</li> <li>\u4ee3\u7801\u5b9e\u73b0\uff1a</li> </ol> Text Only<pre><code>//\u601d\u8def\u4e00\uff1a\nclass Solution {\n    private List&lt;List&lt;Integer&gt;&gt; res = new ArrayList&lt;&gt;();\n    public List&lt;List&lt;Integer&gt;&gt; levelOrder(TreeNode root) {\n        if(root == null) return new ArrayList&lt;&gt;();\n\n        Queue&lt;TreeNode&gt; que = new LinkedList&lt;&gt;();\n        HashMap&lt;TreeNode,Integer&gt; map = new HashMap&lt;&gt;();\n        que.offer(root);\n        map.put(root,0);\n        while(!que.isEmpty()){\n            TreeNode cur = que.poll();\n            int level = map.get(cur);\n            if(level == res.size()){\n                res.add(new ArrayList&lt;&gt;());\n            }\n            res.get(level).add(cur.val);\n            if(cur.left != null){\n                que.offer(cur.left);\n                map.put(cur.left,level+1);\n            }\n            if(cur.right != null){\n                que.offer(cur.right);\n                map.put(cur.right,level+1);\n            }\n        }\n        return res;\n    }\n}\n\n//\u601d\u8def\u4e8c\nclass Solution {\n    private List&lt;List&lt;Integer&gt;&gt; res = new ArrayList&lt;&gt;();\n    private int MAXN = 2001;\n    public List&lt;List&lt;Integer&gt;&gt; levelOrder(TreeNode root) {\n        if(root == null) return new ArrayList&lt;&gt;();\n\n        TreeNode[] que = new TreeNode[MAXN];\n        int l=0,r=0;\n        que[r++] = root;\n\n        while(l&lt;r){\n            int size = r-l;\n            List&lt;Integer&gt; level = new ArrayList&lt;&gt;();\n            for(int i=0; i&lt;size; i++){\n                TreeNode cur = que[l++];\n                level.add(cur.val);\n                if(cur.left != null){\n                    que[r++] = cur.left;\n                }\n                if(cur.right != null){\n                    que[r++] = cur.right;\n                }\n            }\n            res.add(level);\n        }\n        return res;\n    }\n}\n</code></pre>"},{"location":"LANG/DS-leetcode/#_37","title":"\u4e8c\u53c9\u6811\u7684\u952f\u9f7f\u72b6\u904d\u5386\uff1a","text":"<ol> <li>\u8981\u6c42\uff1a\u4e8c\u53c9\u6811\u7684\u5c42\u5e8f\u904d\u5386\uff0c\u4f46\u662f\u5de6\u53f3\u4ea4\u66ff\u3002</li> <li>\u601d\u8def\uff1a\u53ef\u4ee5\u5728for\u5faa\u73af\u7684\u65f6\u5019\u5904\u7406\u5de6\u53f3\u5faa\u73af\u7684\u65f6\u5019\u63a7\u5236\uff0c\u4e5f\u53ef\u4ee5\u5bf9\u6bcf\u5c42\u7ed3\u679c\u8fdb\u884c\u7ffb\u8f6c\u3002</li> </ol>"},{"location":"LANG/DS-leetcode/#_38","title":"\u4e8c\u53c9\u6811\u7684\u6700\u5927\u7279\u6b8a\u5bbd\u5ea6","text":"<ol> <li>\u4e8c\u53c9\u6811\u6bcf\u5c42\u7684\u5bbd\u5ea6\u5b9a\u4e49\u4e3a\u6700\u5de6\u548c\u6700\u53f3\u975e\u7a7a\u8282\u70b9\u4e4b\u95f4\u7684\u8282\u70b9\u6570\u3002\u4e2d\u95f4\u7684null\u503c\u4e5f\u5360\u636e\u7a7a\u95f4</li> <li>\u4f7f\u7528bfs\u6570\u7ec4\u4f18\u5316\u7248\uff0c\u901a\u8fc7\u5f15\u5165\u7f16\u53f7(i,2*i,2*i+1)\u6765\u907f\u514d\u64cd\u4f5cnull\u8282\u70b9\u3002</li> </ol> <ol> <li>\u4e8c\u53c9\u6811\u7684\u6700\u5927\u548c\u6700\u5c0f\u6df1\u5ea6\uff1a</li> <li>\u601d\u8def\uff1a\u6700\u5927\u6df1\u5ea6\uff1a\u4f7f\u7528\u9012\u5f52\u6c42\u89e3\u3002max(left,right)+1\uff1b</li> <li>\u601d\u8def\uff1a\u6700\u5c0f\u6df1\u5ea6\uff1a\u6ce8\u610f\u9012\u5f52\u7ec8\u6b62\u70b9\u662f\u53f6\u5b50\u7ed3\u70b9\u3002\u9700\u8981\u9632\u6b62null\u503c\u5e72\u6270\u3002\u5e38\u89c4\u64cd\u4f5c\u662f\u73b0\u5c06\u503c\u8bbe\u7f6e\u4e3aMAX_VALUE\uff0c\u5982\u679c\u5b58\u5728\u53f6\u5b50\u8282\u70b9\uff0c\u81ea\u7136\u4f1a\u5728\u6bd4\u8f83\u7684\u4e4b\u540e\u88ab\u66ff\u6362\u6389\u3002</li> </ol> Text Only<pre><code>class Solution {\n    public int minDepth(TreeNode root) {\n        //\u7279\u5224\uff0c\u5e76\u4e0d\u662f\u9012\u5f52\u7ec8\u6b62\u70b9\u3002\n        if(root == null){\n            return 0;\n        }\n        //\u9012\u5f52\u7ec8\u6b62\u70b9\n        if(root.left == null &amp;&amp; root.right == null){\n            return 1;  \n        }\n\n        int ldeep = Integer.MAX_VALUE;\n        int rdeep = Integer.MAX_VALUE;\n\n        if(root.left != null) ldeep = minDepth(root.left);\n        if(root.right != null) rdeep = minDepth(root.right);\n\n        return Math.min(ldeep,rdeep)+1;\n\n\n    }\n}\n</code></pre>"},{"location":"LANG/DS-leetcode/#_39","title":"\u4e8c\u53c9\u6811\u7684\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316","text":"<ol> <li>\u5e8f\u5217\u5316\u662f\u5c06\u4e00\u4e2a\u6570\u636e\u7ed3\u6784\u6216\u8005\u5bf9\u8c61\u8f6c\u6362\u4e3a\u8fde\u7eed\u7684\u6bd4\u7279\u4f4d\u7684\u64cd\u4f5c\uff0c\u8fdb\u800c\u53ef\u4ee5\u5c06\u8f6c\u6362\u540e\u7684\u6570\u636e\u5b58\u50a8\u5728\u4e00\u4e2a\u6587\u4ef6\u6216\u8005\u5185\u5b58\u4e2d\uff0c\u540c\u65f6\u4e5f\u53ef\u4ee5\u901a\u8fc7\u7f51\u7edc\u4f20\u8f93\u5230\u53e6\u4e00\u4e2a\u8ba1\u7b97\u673a\u73af\u5883\uff0c\u91c7\u53d6\u76f8\u53cd\u65b9\u5f0f\u91cd\u6784\u5f97\u5230\u539f\u6570\u636e\u3002</li> <li>\u601d\u8def\uff1a\u54ea\u79cd\u65b9\u5f0f\u904d\u5386(dfs,bfs)\u90fd\u53ef\u4ee5\u3002</li> <li>dfs\u5148\u5e8f\u904d\u5386\uff1a</li> </ol> Text Only<pre><code>public class Codec {\n    private int cnt = 0;\n    // Encodes a tree to a single string.\n    public String serialize(TreeNode root) {\n        StringBuilder str = new StringBuilder();\n        encode(root,str);\n        return str.toString();\n    }\n    private void encode(TreeNode root,StringBuilder s){\n        if(root == null){\n            s.append(\"#,\");\n            return;\n        }\n        s.append(root.val + \",\");\n        encode(root.left,s);\n        encode(root.right,s);\n    }\n\n    // Decodes your encoded data to tree.\n    public TreeNode deserialize(String data) {\n        String[] vals = data.split(\",\");\n        cnt = 0;\n        return decode(vals);\n    }\n\n    private TreeNode decode(String[] vals){\n        String cur = vals[cnt++];\n        if(cur.equals(\"#\")){\n            return null;\n        }\n        //\u524d\u5e8f\u904d\u5386\u89e3\u51b3\n        TreeNode head = new TreeNode(Integer.valueOf(cur));\n        head.left = decode(vals);\n        head.right = decode(vals);\n\n        return head;\n\n    }\n}\n</code></pre>"},{"location":"LANG/DS-leetcode/#_40","title":"\u5229\u7528\u5148\u5e8f\u904d\u5386\u548c\u4e2d\u5e8f\u904d\u5386\u6784\u5efa\u4e8c\u53c9\u6811","text":"<ol> <li>\u539f\u7406\uff1a\u6ca1\u6709\u91cd\u590d\u503c\u7684\u60c5\u51b5\u4e0b(\u4f8b\u59821,1,1)\uff1a\u4e2d\u5e8f\u548c\u5148\u5e8f/\u540e\u5e8f\u4f1a\u552f\u4e00\u786e\u5b9a\u4e00\u9897\u4e8c\u53c9\u6811</li> <li>\u601d\u8def\uff1a\u6784\u9020\u9012\u5f52\u51fd\u6570\uff0c\u901a\u8fc7\u5934\u8282\u70b9\u4f4d\u7f6e\u5212\u5206\u5b50\u533a\u95f4\u8fdb\u884c\u9012\u5f52</li> </ol> Text Only<pre><code>public static TreeNode buildTree(int[] pre, int[] in) {\n        if (pre == null || in == null || pre.length != in.length) {\n            return null;\n        }\n        HashMap&lt;Integer, Integer&gt; map = new HashMap&lt;&gt;();\n        for (int i = 0; i &lt; in.length; i++) {\n            map.put(in[i], i);\n        }\n        return f(pre, 0, pre.length - 1, in, 0, in.length - 1, map);\n    }\n\n    public static TreeNode f(int[] pre, int l1, int r1, int[] in, int l2, int r2, HashMap&lt;Integer, Integer&gt; map) {\n        if (l1 &gt; r1) {\n            return null;\n        }\n        TreeNode head = new TreeNode(pre[l1]);\n        if (l1 == r1) {\n            return head;\n        }\n        int k = map.get(pre[l1]);\n        // pre : l1(........)[.......r1]\n        // in  : (l2......)k[........r2]\n        // (...)\u662f\u5de6\u6811\u5bf9\u5e94\uff0c[...]\u662f\u53f3\u6811\u7684\u5bf9\u5e94\n        head.left = f(pre, l1 + 1, l1 + k - l2, in, l2, k - 1, map);\n        head.right = f(pre, l1 + k - l2 + 1, r1, in, k + 1, r2, map);\n        return head;\n    }\n</code></pre>"},{"location":"LANG/DS-leetcode/#_41","title":"\u9a8c\u8bc1\u5b8c\u5168\u4e8c\u53c9\u6811\uff1a","text":"<ol> <li>\u5224\u65ad\u4e00\u4e2a\u4e8c\u53c9\u6811\u662f\u5426\u662f\u5b8c\u5168\u4e8c\u53c9\u6811\u3002\u5b8c\u5168\u4e8c\u53c9\u6811\uff1a\u9664\u4e86\u53f6\u5b50\u7ed3\u70b9\u4e4b\u5916\u5168\u90e8\u5c42\u90fd\u6ee1\uff0c\u5e76\u4e14\u53f6\u5b50\u7ed3\u70b9\u4e4b\u95f4\u6ca1\u6709\u8df3\u8fc7\u3002</li> <li>\u539f\u7406\uff1a\u901a\u8fc7bfs\uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u8282\u70b9\uff0c</li> <li>\u5982\u679c\u51fa\u73b0\u6709\u53f3\u65e0\u5de6\uff0c\u5219\u8fd4\u56de\u3002</li> <li>\u5982\u679c\u53d1\u73b0\u5b69\u5b50\u8282\u70b9\u4e0d\u5168\u7684\u8282\u70b9\uff0c\u5219\u63a5\u4e0b\u6765\u904d\u5386\u7684\u8282\u70b9\u5fc5\u987b\u5168\u662f\u53f6\u5b50\u8282\u70b9\u3002</li> </ol>"},{"location":"LANG/DS-leetcode/#lca","title":"\u666e\u901a\u4e8c\u53c9\u6811\u5bfb\u627e\u4e24\u4e2a\u8282\u70b9\u7684\u6700\u8fd1\u516c\u5171\u7956\u5148(LCA)","text":"<ol> <li>\u8be5\u95ee\u9898\u53c8\u53ebLCA\u7b97\u6cd5\u3002\u57fa\u4e8eLCA\u4f1a\u6709\u6279\u91cf\u67e5\u8be2\uff0c\u5728\u7ebf\u67e5\u8be2\u95ee\u9898\u3002</li> <li>\u95ee\u9898\uff1a\u5047\u8bbep\uff0cq\u4e3a\u4e8c\u53c9\u6811\u4e24\u4e2a\u4e0d\u540c\u7684\u8282\u70b9\uff0c\u8981\u6c42\u67e5\u627e\u6700\u8fd1\u516c\u5171\u7956\u5148</li> <li> <p>\u601d\u8def\uff1a\u5206\u4e24\u79cd\u60c5\u51b5\u89e3\u51b3\uff1a</p> </li> <li> <p>\u5305\u542b\u5173\u7cfb(\u5728\u540c\u4e00\u9897\u6811\u4e0a)\uff1a\u6700\u8fd1\u516c\u5171\u7956\u5148\u662fp,q\u4e2d\u7684\u4e00\u4e2a\u3002\u9762\u5bf9\u5305\u542b\u7684\u60c5\u51b5\uff0c\u4e00\u65e6\u9047\u5230\u4e86p\u7684\u65f6\u5019\u5c31\u76f4\u63a5\u5411\u4e0a\u8fd4\u56de\u3002</p> </li> <li>\u65e0\u5305\u542b\u5173\u7cfb(\u5728\u4e24\u9897\u6811\u4e0a)\uff1a\u6700\u8fd1\u516c\u5171\u7956\u5148\u4e0d\u662fp,q\uff0c\u662f\u9012\u5f52\u5f00\u59cb\u7684\u8be5\u8282\u70b9\u4e3aLCA</li> <li>\u4ee3\u7801\uff1a</li> <li>\u56e0\u4e3a\u8981\u627e\u6700\u8fd1\uff0c\u6240\u4ee5\u6df1\u5ea6\u4f18\u5148\u5230\u6700\u5c0f\u8282\u70b9</li> <li>\u5230\u4e86base case\uff0c\u5982\u679c\u5de6\u8fb9\u53f3\u8fb9\u90fdnull\uff0c\u8fd4\u56denull\u3002\u5982\u679c\u53ea\u6709\u4e00\u4fa7\uff0c\u8fd4\u56de\u4ec5\u6709\u7684\u90a3\u4e00\u4fa7\uff0c\u5982\u679c\u4e24\u8fb9\u90fd\u6709\uff0c\u8fd4\u56de\u6839\u8282\u70b9root</li> <li>\u4e5f\u5c31\u662f\u4ece\u6700\u5e95\u90e8\u5411\u4e0a\u5f00\u59cb\u56de\u6eaf\u5224\u65ad\uff0c\u8fd9\u6837\u5728\u6240\u6709\u6ee1\u8db3\u6761\u4ef6\u7684LCA\u4e2d\uff0c\u4e00\u5b9a\u662f\u6700\u5e95\u90e8\u7684LCA\u88ab\u9996\u5148\u8bbf\u95ee\uff0c\u6240\u4ee5\u5c31\u662f\u6df1\u5ea6\u6700\u5927\u7684\u516c\u5171\u7956\u5148\u3002</li> <li>\u590d\u6742\u5ea6:</li> <li>\u65f6\u95f4\uff1aO(n)\uff0c\u6240\u6709\u8282\u70b9\u90fd\u6700\u591a\u4f1a\u88ab\u6267\u884c\u4e00\u6b21\u5224\u65ad\u903b\u8f91\uff0c\u8fdb\u884c\u8ba1\u7b97\u4e00\u6b21</li> <li>\u7a7a\u95f4:O(n)</li> </ol> Text Only<pre><code>    public TreeNode lowestCommonAncestor(TreeNode root, TreeNode p, TreeNode q) {\n        if(root == null || root == p || root == q){\n            return root;\n        }\n        TreeNode lres = lowestCommonAncestor(root.left,p,q);\n        TreeNode rres = lowestCommonAncestor(root.right,p,q);\n\n        if(lres != null &amp;&amp; rres != null){\n            return root;\n        }else if(lres == null &amp;&amp; rres == null){\n            return null;\n        }else{\n            return lres != null? lres:rres;\n        }\n\n    }\n</code></pre>"},{"location":"LANG/DS-leetcode/#lca_1","title":"\u641c\u7d22\u4e8c\u53c9\u6811\u4e0a\u7684LCA","text":"<ol> <li>\u641c\u7d22\u4e8c\u53c9\u6811\uff1a\u4e00\u68f5\u6811\u5de6\u5b50\u6811\u7684\u503c\u6c38\u8fdc\u5c0f\u4e8e\u6839\uff0c\u6839\u7684\u503c\u6c38\u8fdc\u5c0f\u4e8e\u53f3\u5b50\u6811\u7684\u503c</li> <li>\u4f18\u5316\u90e8\u5206\uff1a</li> <li>\u5229\u7528\u4e8c\u53c9\u641c\u7d22\u6811\u6027\u8d28\uff0c\u5de6&lt;\u4e2d&lt;\u53f3</li> <li>\u5047\u8bbep=30,q=100\u3002\u4e5f\u5c31\u662fp&lt;q\u5982\u679c\u5f53\u524d\u8282\u70b9cur\uff0c<ol> <li>cur&lt;min(p,q)\u5219\u7ed3\u679c\u5fc5\u7136\u5728\u53f3\u5b50\u6811\uff0c\u8bbf\u95eecur.right\u3002</li> <li>cur&gt;max(p,q)\u5426\u5219\u8bbf\u95eecur.left.</li> <li>cur=p\u6216\u8005cur=q\u76f4\u63a5\u8fd4\u56de\u5c31\u597d(\u8fd9\u70b9\u548c\u666e\u901a\u4e8c\u53c9\u6811\u76f8\u540c)\u3002</li> <li>p&lt;cur&lt;q,\u5219\u5f53\u524d\u7684\u5c31\u662f\u6700\u8fd1\u516c\u5171\u7956\u5148</li> </ol> </li> <li>\u590d\u6742\u5ea6\uff1a</li> <li>\u65f6\u95f4:O(n)</li> <li>\u7a7a\u95f4: O(n),\u6700\u5dee\u60c5\u51b5\u662f\u7ebf\u6027\u60c5\u51b5</li> </ol> Text Only<pre><code>class Solution {\n    public TreeNode lowestCommonAncestor(TreeNode root, TreeNode p, TreeNode q) {\n        int x = root.val;\n        if (p.val &lt; x &amp;&amp; q.val &lt; x)\n            return lowestCommonAncestor(root.left, p, q);\n        if (p.val &gt; x &amp;&amp; q.val &gt; x)\n            return lowestCommonAncestor(root.right, p, q);\n        return root;\n    }\n}\n</code></pre>"},{"location":"LANG/DS-leetcode/#aim","title":"\u8def\u5f84\u7efc\u5408==aim","text":"<ol> <li>\u7ed9\u4f60\u4e8c\u53c9\u6811\u7684\u6839\u8282\u70b9 root \u548c\u4e00\u4e2a\u6574\u6570\u76ee\u6807\u548c targetSum \uff0c\u627e\u51fa\u6240\u6709 \u4ece\u6839\u8282\u70b9\u5230\u53f6\u5b50\u8282\u70b9 \u8def\u5f84\u603b\u548c\u7b49\u4e8e\u7ed9\u5b9a\u76ee\u6807\u548c\u7684\u8def\u5f84\u3002</li> <li>\u6838\u5fc3\uff1a\u72b6\u6001\u6062\u590d\u3002\u5e0c\u671bf\u5bf9\u4e8ea,b,c\u60c5\u51b5\u90fd\u662f\u540c\u6837\u7684\u72b6\u6001\u5f00\u59cb</li> </ol> Text Only<pre><code>class Solution {\n    private List&lt;List&lt;Integer&gt;&gt; ans = new ArrayList&lt;&gt;();\n    private List&lt;Integer&gt; path = new ArrayList&lt;&gt;();\n    public List&lt;List&lt;Integer&gt;&gt; pathSum(TreeNode root, int targetSum) {\n        traverse(root,0,targetSum);\n        return  ans;\n    }\n    public void traverse(TreeNode cur,int curSum, int targetSum){\n        if(cur == null) return ;\n        if(cur.left == null &amp;&amp; cur.right == null){\n            if(curSum+cur.val == targetSum){\n                path.add(cur.val);\n                ans.add(new ArrayList&lt;&gt;(path));\n                path.remove(path.size()-1);\n            }\n            return;\n        }\n\n        if(cur.left != null) {\n            path.add(cur.val);\n            traverse(cur.left,curSum+cur.val,targetSum);\n            path.remove(path.size()-1);\n        }\n        if(cur.right != null) {\n            path.add(cur.val);\n            traverse(cur.right,curSum+cur.val,targetSum);\n            path.remove(path.size()-1);\n        }\n    }\n}\n</code></pre>"},{"location":"LANG/DS-leetcode/#_42","title":"\u9a8c\u8bc1\u5e73\u8861\u4e8c\u53c9\u6811","text":"<ol> <li>\u5e73\u8861\u4e8c\u53c9\u6811\uff1a\u5b9a\u4e49\uff1a\u6bcf\u4e2a\u70b9\u5de6\u53f3\u5b50\u6811\u7684\u9ad8\u5ea6\u5dee\u503c\u7684\u7edd\u5bf9\u503c\u5c0f\u4e8e\u7b49\u4e8e1\uff0c\u5219\u79f0\u4e3a\u5e73\u8861\u4e8c\u53c9\u6811</li> <li>\u5b9a\u4e49\u4e00\u4e2a\u5168\u5c40\u5e03\u5c14\u503c</li> <li>\u5728\u6c42\u6bcf\u4e2a\u8282\u70b9\u7684\u9ad8\u5ea6\u7684\u65f6\u5019\uff0c\u4e00\u65e6\u53d1\u73b0\u5de6\u53f3\u5b50\u6811\u6ee1\u8db3\u5dee\u503c&gt;1\uff0c\u5c31\u76f4\u63a5\u6539\u53d8\u72b6\u6001\u3002</li> </ol> Text Only<pre><code>class Solution {\n    private boolean isBalance = true;\n    public boolean isBalanced(TreeNode root) {\n        int leftHeight = traverse(root);\n        return isBalance;\n    }\n    private int traverse(TreeNode cur){\n        if(cur == null) return 0;\n        if(cur.left == null &amp;&amp; cur.right == null){\n            return 1;\n        }\n        int leftHeight = traverse(cur.left);\n        int rightHeight = traverse(cur.right);\n        if(Math.abs(leftHeight-rightHeight)&gt;1) isBalance = false;\n        return Math.max(leftHeight,rightHeight)+1;\n    }\n}\n</code></pre>"},{"location":"LANG/DS-leetcode/#_43","title":"\u9a8c\u8bc1\u641c\u7d22\u4e8c\u53c9\u6811","text":"<ol> <li>\u6027\u8d28\uff1a\u641c\u7d22\u4e8c\u53c9\u6811\u7684\u4e2d\u5e8f\u904d\u5386\u7684\u503c\u4e00\u5b9a\u662f\u6709\u5e8f\u7684\u3002\u4e2d\u5e8f\u904d\u5386\u6709\u5e8f\u7684\u4e8c\u53c9\u6811\u662f\u641c\u7d22\u4e8c\u53c9\u6811\u7684\u5145\u8981\u6761\u4ef6</li> <li>\u601d\u8def\uff1a\u901a\u8fc7\u9012\u5f52\u5230base case\u8fdb\u884c\u5224\u65ad</li> </ol>"},{"location":"LANG/DS-leetcode/#_44","title":"\u4f4d\u8fd0\u7b97","text":"<p>\u4f18\u52bf\uff1a\u5e38\u6570\u65f6\u95f4\u5f88\u597d\uff0c\u51e0\u4e4e\u548c\u8d4b\u503c\u64cd\u4f5c\u4e00\u6837\u3002</p> <p>\ud83d\udccc</p> <p>\u5341\u8fdb\u5236\u548c\u4e8c\u8fdb\u5236\u4e4b\u95f4\u7684\u8f6c\u6362</p> <p>\u5341\u8fdb\u5236\u8f6c\u6362\u4e3ax\u8fdb\u5236\uff1aInteger.toString(n,x);\uff0c\u9700\u8981\u6ce8\u610f\u8865\u5145\u524d\u9762\u76840</p> <p>x\u8fdb\u5236\u8f6c\u6362\u4e3a\u5341\u8fdb\u5236:  Integer.parseInt(str,x);\u8fd8\u6709\u65e0\u7b26\u53f7\u6570\u7684Integer.parseUnsignedInt(str,x);</p> <ol> <li>leetcode 231\uff1a\u5224\u65ad\u4e00\u4e2a\u6574\u6570\u662f\u4e0d\u662f2\u7684\u5e42\u3002</li> <li>\u601d\u8def\uff1a2\u7684\u5e42\uff0c\u5219\u53ea\u6709\u67d0\u4e00\u4f4d\u662f1\uff0c\u5176\u4f59\u90fd\u662f0</li> </ol> <p>\ud83d\udc4b</p> <p>Brian Kernighan\u7b97\u6cd5\uff1a\u7528\u4e8e\u63d0\u53d6\u6700\u53f3\u4fa7\u76841\uff0c\u7ed3\u679c\u662f\u53ea\u6709\u4e4b\u524d\u7684\u6570\u7684\u6700\u9ad8\u4f4d\u76841\u7684\u6570</p> <p>n &amp; -n</p> <ol> <li>leetcode 326 \u5224\u65ad\u662f\u5426\u4e3a3\u7684\u5e42</li> <li>\u601d\u8def:\u901a\u8fc7\u627e\u51faint\u8303\u56f4\u51853\u7684\u6700\u5927\u6b21\u5e42\u662f3^19.\u7136\u540e\u8be5\u6570\u53ea\u542b\u67093\u4e00\u4e2a\u8d28\u6570\u56e0\u5b50\u3002\u6240\u4ee5\u53ea\u8981\u8be5\u6570%x==0,\u5219 x\u5fc5\u7136\u662f3\u7684\u5e42\u3002</li> </ol> <p>\ud83d\udc4b</p> <p>\u5982\u679c\u4e00\u4e2a\u6570m%n == 0\uff0c\u5219n\u4e00\u5b9a\u662fm\u7684\u56e0\u5b50\u3002</p> <ol> <li>leetcode 201\uff1a\u8fd4\u56de[x,y]\u533a\u95f4\u5185\u6240\u6709\u6570\u5b57&amp;\u7684\u7ed3\u679c</li> <li>\u601d\u8def\uff1a<ol> <li>\u5c06y\u7684\u4e8c\u8fdb\u5236\u5f62\u5f0f\u4ece\u4f4e\u4f4d\u5230\u9ad8\u4f4d\uff0c\u4f7f\u7528BK\u7b97\u6cd5\u8fdb\u884c\u5904\u7406\uff0c\u6bcf\u6b21\u5224\u65ad\u662f\u5426\u5927\u4e8ex\u3002</li> <li>\u5982\u679c\u6ee1\u8db3\uff0c\u5219\u5c06\u6700\u4f4e\u4f4d\u76841\u9664\u53bb\uff0c\u7ee7\u7eed\u5faa\u73af\u3002\u56e0\u4e3a\u5982\u679c\u8fd8\u662f\u5927\u4e8e\u7684\u8bdd\uff0c\u5219\u5fc5\u6709y-1\u4e5f\u5c31\u662f\u4f4e\u4f4d\u76840\u5168\u90e8\u53d8\u4e3a1\u7684\u60c5\u51b5\u5305\u542b\u5728\u533a\u95f4\uff0c\u6b64\u65f6\u8fdb\u884c&amp;\u7684\u7ed3\u679c\u5fc5\u7136\u662f0,\u4fdd\u4e0d\u4f4f1\u3002</li> <li>\u7b80\u5355\u4e00\u53e5\uff0c\u5c31\u662f\u6c42\u533a\u95f4\u8fb9\u4e0a\u7684\u6570\u5b57\u7684\u6700\u957f\u516c\u5171\u524d\u7f00\u3002</li> </ol> </li> </ol> <p></p> Text Only<pre><code>    public static int rangeBitwiseAnd(int left, int right) {\n        while (left &lt; right) {\n            right -= right &amp; -right;\n        }\n        return right;\n    }\n</code></pre> <ol> <li>leetcode 190\u98a0\u5012\u4e8c\u8fdb\u5236\u4f4d</li> </ol> <p>\u601d\u8def\uff1a\u8fd8\u6709\u66f4\u7b80\u5355\u7684API\uff1aInteger.reverse(n)</p> Text Only<pre><code>class Solution {\n    // you need treat n as an unsigned value\n    public int reverseBits(int n) {\n        StringBuilder ans = new StringBuilder();\n        String temp = Integer.toBinaryString(n);\n        for(int i=0; i&lt;32-temp.length();i++){\n            ans.append('0');\n        }\n        ans.append(temp);\n        return Integer.parseUnsignedInt(ans.reverse().toString(),2);\n    }\n}\n</code></pre> <ol> <li>leetcode 461\u6c49\u660e\u8ddd\u79bb</li> <li>\u6c49\u660e\u8ddd\u79bb\u662f\u4f7f\u7528\u5728\u6570\u636e\u4f20\u8f93\u5dee\u9519\u63a7\u5236\u7f16\u7801\u91cc\u9762\u7684\uff0c\u6c49\u660e\u8ddd\u79bb\u662f\u4e00\u4e2a\u6982\u5ff5\uff0c\u5b83\u8868\u793a\u4e24\u4e2a\uff08\u76f8\u540c\u957f\u5ea6\uff09\u5b57\u7b26\u4e32\u5bf9\u5e94\u4f4d\u7f6e\u7684\u4e0d\u540c\u5b57\u7b26\u7684\u6570\u91cf\uff0c\u6211\u4eec\u4ee5d\uff08x,y\uff09\u8868\u793a\u4e24\u4e2a\u5b57x,y\u4e4b\u95f4\u7684\u6c49\u660e\u8ddd\u79bb\u3002\u5bf9\u4e24\u4e2a\u5b57\u7b26\u4e32\u8fdb\u884c\u5f02\u6216\u8fd0\u7b97\uff0c\u5e76\u7edf\u8ba1\u7ed3\u679c\u4e3a1\u7684\u4e2a\u6570\uff0c\u90a3\u4e48\u8fd9\u4e2a\u6570\u5c31\u662f\u6c49\u660e\u8ddd\u79bb\u3002</li> <li>\u601d\u8def\uff1a\u4f7f\u75281&lt;&lt;i\uff0c\u83b7\u53d6x\u4e0ey\u7684\u6bcf\u4e00\u4f4d\u6570\uff0c\u5982\u679c\u4e0d\u540c,cnt++</li> </ol> Text Only<pre><code>class Solution {\n    public int hammingDistance(int x, int y) {\n        int cnt = 0;\n        for(int i=0; i&lt;32;i++){\n            if((x&amp;(1&lt;&lt;i)) != (y&amp;(1&lt;&lt;i))) cnt++;\n        }\n        return cnt;\n    }\n}\n</code></pre>"},{"location":"LANG/DS-leetcode/#master","title":"\u9012\u5f52\u548cmaster\u516c\u5f0f","text":""},{"location":"LANG/DS-leetcode/#_45","title":"\u9012\u5f52","text":"<p>\u5177\u4f53\u5185\u5bb9\uff1a\u9012\u5f52 = \u9012\u5f52\u903b\u8f91+ base case\u3002\u591a\u753b\u9012\u5f52\u8c03\u7528\u56fe\u3002</p> <p>\u9012\u5f52\u5fc5\u7136\u53ef\u4ee5\u8f6c\u6362\u4e3a\u975e\u9012\u5f52\uff0c\u8fd9\u65f6\u5019\u5c31\u628a\u7cfb\u7edf\u6808\u7a7a\u95f4\u7684\u4f7f\u7528\u8f6c\u53d8\u4e3a\u5806\u5185\u5b58\u7a7a\u95f4\u3002\u540c\u65f6\u53ef\u4ee5\u66f4\u7ec6\u7c92\u5ea6\u5730\u63a7\u5236\u3002\u5de5\u7a0b\u4e0a\u5fc5\u7136\u8981\u6539\u4e3a\u975e\u9012\u5f52\u3002\u9664\u975e\u5c42\u6570\u7279\u522b\u5c11\u3002</p> <p>\u5e38\u89c1\u7684\u4e0d\u7528\u6539\u7684\u9012\u5f52\u6709:\u5f52\u5e76\u6392\u5e8f\uff0c\u5feb\u901f\u6392\u5e8f\uff0c\u7ebf\u6bb5\u6811\uff0c\u5f88\u591a\u5e73\u8861\u6811\u3002</p> Text Only<pre><code>    public static int f(int[] arr, int l, int r) {\n        //base case\n        if(l == r){\n            return arr[l];\n        }\n        int m = (l + r)/2;\n        int lmax = f(arr,l,m);\n        int rmax = f(arr,m+1, r);\n        return Math.max(lmax,rmax);\n    }\n</code></pre>"},{"location":"LANG/DS-leetcode/#master_1","title":"master\u516c\u5f0f","text":"<p>\u57fa\u672c\u539f\u7406\uff1a\u540e\u9762\u7684O()\u9879\u5c31\u662f\u5176\u4f59\u4ee3\u7801\u90e8\u5206\u7684\u65f6\u95f4\u590d\u6742\u5ea6\uff0c\u4e5f\u5c31\u662f\u9664\u4e86\u9012\u5f52\u8c03\u7528\u7684\u90e8\u5206\u3002\u540c\u65f6\u6700\u7ec8\u662flog(b,a)\u548cc\u8fdb\u884c\u5bf9\u6bd4\uff0c\u8c01\u5927\u8c01\u505a\u6307\u6570\u3002\u5982\u679c\u76f8\u7b49\uff0c\u5219c*logn\u505a\u6307\u6570\u3002</p> <p>\u6ce8\u610f\u4e8b\u9879\uff1a\u4f7f\u7528\u9700\u8981\u6ce8\u610f\u5de6\u53f3\u4e24\u4fa7\u9012\u5f52\u8c03\u7528\u9700\u8981\u89c4\u6a21\u76f8\u540c\uff0c\u90fd\u662fT(n/b)</p> <p></p> <p>\u4f8b\u5b50\uff1a\u5047\u8bbe\u6c42[l,r]\u8303\u56f4\u4e0a\u7684\u6700\u5927\u503c\uff0c\u4e00\u5171n\u4e2a\u6570\u3002</p> <p>\u5219\u5982\u679c\u91c7\u7528\u9012\u5f52\u6c42\u6700\u503c\uff0c\u5219T(N) = 2* T(N/2) + O(1)\u3002\u8fd9\u91cca=2,b=2,c=0</p> <p>\u5219\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a\uff1aO(n^1) = O(n)</p>"},{"location":"LANG/DS-leetcode/#_46","title":"\u9012\u5f52\u9ad8\u9891\u9898\u76ee\u603b\u7ed3","text":"<p>\u9012\u5f52\u53ef\u4ee5\u5206\u4e3a\u5e26\u8def\u5f84\u7684\u9012\u5f52\u548c\u4e0d\u5e26\u8def\u5f84\u7684\u9012\u5f52\uff0c\u800c\u5927\u90e8\u5206\u7684dp,\u72b6\u6001\u538b\u7f29dp\u90fd\u662f\u8ba4\u4e3a\u662f\u8def\u5f84\u7b80\u5316 \u3002\u4efb\u4f55\u9012\u5f52\u90fd\u662fdfs\u5e76\u4e14\u975e\u5e38\u7075\u6d3b\u3002</p> <ol> <li>\u8fd4\u56de\u5b57\u7b26\u4e32\u6240\u6709\u5b50\u5e8f\u5217\uff0c\u5e76\u4e14\u5b50\u5e8f\u5217\u8981\u6c42\u53bb\u91cd</li> <li>abc\u60c5\u51b5</li> <li>abbc\u60c5\u51b5</li> </ol> Text Only<pre><code>public class Solution {\n\n    public String[] generatePermutation (String s) {\n        // write code here\n        char[] chars = s.toCharArray();\n        StringBuilder path = new StringBuilder();\n        HashSet&lt;String&gt; set = new HashSet&lt;&gt;();\n        f1(chars,0,path,set);\n        String[] ans = new String[set.size()];\n        int i = 0;\n        for(String item : set){\n            ans[i++] = item;\n        } \n        return ans;\n    }\n    //\u6709\u72b6\u6001\u6062\u590d\u7248\u672c\n    private void f1(char[] s, int i, StringBuilder path,HashSet&lt;String&gt; set){\n        if(i == s.length){\n            set.add(path.toString());\n            return;\n        }\n        //\u6709s[i]\n        path.append(s[i]);\n        f1(s,i+1,path,set);\n        path.deleteCharAt(path.length()-1);\n        //\u6ca1\u6709s[i]\n        f1(s,i+1,path,set);\n    }\n    //\u4e0d\u7528\u72b6\u6001\u6062\u590d\u7684\u65b9\u6cd5\uff0c\u5c06path\u53d8\u4e3a\u6570\u7ec4\u8fdb\u884c\u4fdd\u5b58\n    public static void f2(char[] s, int i, char[] path, int size, HashSet&lt;String&gt; set) {\n        if (i == s.length) {\n            set.add(String.valueOf(path, 0, size));\n        } else {\n            path[size] = s[i];\n            f2(s, i + 1, path, size + 1, set);\n            f2(s, i + 1, path, size, set);\n        }\n    }\n}\n</code></pre> <ol> <li>\u8fd4\u56de\u6570\u7ec4\u6240\u6709\u5b50\u96c6</li> <li>\u5b50\u96c6\u5c31\u662f\u4ece\u6570\u7ec4\u4e2d\u968f\u673a\u6311\u9009\u4e00\u4e9b\u5143\u7d20(\u5e42\u96c6)</li> <li>\u601d\u8def\uff1a<ol> <li>\u5148\u6392\u5e8f\uff0c\u4e4b\u540e\u76f8\u540c\u7684\u6570\u5b57\u5728\u4e00\u8d77\u3002</li> <li>\u4ee5\u76f8\u540c\u6570\u5b57\u4e3a\u4e00\u7ec4\uff0c\u5206\u7c7b\u8ba8\u8bba\u8be5\u6570\u7ec4\u4e0d\u540c\u6570\u91cf\u60c5\u51b5\u4e0b\u7684\u60c5\u51b5    3.</li> </ol> </li> </ol>"},{"location":"LANG/DS-leetcode/#_47","title":"\u7b14\u8bd5\u4e2d\u7684\u8f93\u5165\u8f93\u51fa","text":""},{"location":"LANG/DS-leetcode/#_48","title":"\u6838\u5fc3\u4ee3\u7801\u6a21\u5f0f","text":"<p>\u7ec4\u6210\uff1a\u4ee3\u7801\uff0cdata\u6587\u4ef6\uff0canswer\u6587\u4ef6</p> <p>\u89c4\u5219\uff1a\u53ea\u7528\u586b\u903b\u8f91\u5c31\u53ef\u4ee5\uff0c\u4e0d\u80fd\u6539\u7c7b\u540d\uff0c\u65b9\u6cd5\u540d\uff0c\u53c2\u6570\u7c7b\u578b</p>"},{"location":"LANG/DS-leetcode/#acm","title":"acm\u6a21\u5f0f","text":"<p>\u7ec4\u6210:data\u6587\u4ef6\uff0canswer\u6587\u4ef6\u3002</p> <p>\u89c4\u5219\uff1a\u5199code\u8bfb\u53d6data\u6587\u4ef6\uff0c\u8f93\u51fa\u7ed3\u679c\u5230\u540e\u53f0\u548canswer\u6587\u4ef6\u5bf9\u6bd4\u3002</p> <ol> <li>\u8f93\u5165\uff1a</li> <li>Scanner\uff1a\u4e00\u6b21\u8bfb\u4e00\u884c\u6570\u636e</li> <li>BufferReader\uff1a\u4e00\u6b21\u8bfb\u591a\u884c\u6570\u636e\uff0c\u51cf\u5c11IO\u4ea4\u4e92</li> <li>StreamTokenizer:\u57fa\u4e8eBufferReader\u6784\u5efa\uff0c\u5728BufferReader\u4e2d\u4e00\u4e2a\u4e00\u4e2a\u8bfb\u53d6\u6570\u7ec4\uff0c\u6807\u8bc6\u7b26\uff0c\u5b57\u7b26\u4e32\u7b49\u3002\u4f1a\u81ea\u52a8\u5ffd\u7565\u6389\u6240\u6709\u7684\u7a7a\u683c\u548c\u56de\u8f66\u3002</li> <li>in.nval:\u8bfb\u53d6\u6574\u6570\u503c\u3002in.sval:\u8bfb\u53d6\u5b57\u7b26</li> </ol> Text Only<pre><code>    public static void main(String[] args) throws IOException {\n        // \u628a\u6587\u4ef6\u91cc\u7684\u5185\u5bb9\uff0cload\u8fdb\u6765\uff0c\u4fdd\u5b58\u5728\u5185\u5b58\u91cc\uff0c\u5f88\u9ad8\u6548\uff0c\u5f88\u7ecf\u6d4e\uff0c\u6258\u7ba1\u7684\u5f88\u597d\n        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));\n        // \u4e00\u4e2a\u4e00\u4e2a\u8bfb\u6570\u5b57\n        StreamTokenizer in = new StreamTokenizer(br);\n        // \u63d0\u4ea4\u7b54\u6848\u7684\u65f6\u5019\u7528\u7684\uff0c\u4e5f\u662f\u4e00\u4e2a\u5185\u5b58\u6258\u7ba1\u533a\n        PrintWriter out = new PrintWriter(new OutputStreamWriter(System.out));\n\n\n        while (in.nextToken() != StreamTokenizer.TT_EOF) { // \u6587\u4ef6\u6ca1\u6709\u7ed3\u675f\u5c31\u7ee7\u7eed\n            //\u4ee3\u7801\u903b\u8f91\n            in.nextToken():\u83b7\u53d6\u4e0b\u4e00\u4e2a\u5143\u7d20(\u81ea\u52a8\u5ffd\u7565\u56de\u8f66\u6362\u884c\u7b26)\n            out.println(maxSumSubmatrix(mat, n, m));\n        }\n        out.flush();\n        br.close();\n        out.close();\n    }\n</code></pre> <ol> <li>\u8f93\u51fa</li> <li>System.out.println():\u4e0d\u63a8\u8350\uff0c\u56e0\u4e3aIO\u6548\u7387\u4f4e\uff0c\u4e00\u6b21\u5bf9\u4e00\u4e2a\u6d4b\u8bd5\u6570\u636e</li> <li>PrintWritter()\uff1a\u6bcf\u6b21\u90fd\u5c06\u6570\u636e\u6253\u5370\u5230\u5185\u5b58\u4e2d\u3002\u5f53\u6570\u636e\u91cf\u8db3\u591f\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528flush\u65b9\u6cd5\u8fdb\u884c\u4e00\u6b21\u6027</li> <li>\u7a7a\u95f4\uff1a</li> <li>\u4e0d\u8bba\u662f\u6570\u636e\u7a7a\u95f4\u8fd8\u662f\u8f85\u52a9\u7a7a\u95f4\uff0c\u90fd\u63a8\u8350\u4f7f\u7528\u9759\u6001\u5f00\u8f9f\uff0c\u6ce8\u610f\u6570\u636e\u91cf\u4e0e\u590d\u7528(\u4f8b\u5982\u4f7f\u7528Arrays.fill(arr,0,m,0)\u7b49\u65b9\u6cd5\u8fdb\u884c\u6e05\u7a7a)\u5373\u53ef\u3002</li> </ol>"},{"location":"LANG/DS-leetcode/#_49","title":"\u5f52\u5e76","text":""},{"location":"LANG/DS-leetcode/#_50","title":"\u5f52\u5e76\u6392\u5e8f","text":"<ol> <li>\u65f6\u95f4\u590d\u6742\u5ea6O(n*logn)\uff1aT(n) = 2*T(n/2) + O(n),\u5219log(2,2)=1\uff0c\u5219\u4e3aO(n^1 * logn) = O(nlogn)</li> <li>\u6838\u5fc3\uff1a\u9012\u5f52</li> <li>\u6b65\u9aa4\uff1a</li> <li>\u5148\u9012\u5f52\u8c03\u7528\uff0c\u5728\u8fdb\u884cmerge\u5e76\u5237\u56de\u539f\u6570\u7ec4\u3002</li> <li>\u6bcf\u6b21\u8fdb\u884c\u7684merge\u90fd\u662f\u5148\u5de6\u53f3\u6307\u9488\u5206\u522b\u6307\u5411\u5de6\u53f3\u4e24\u4fa7\u7684\u5df2\u7ecf\u6709\u5e8f\u7684\u7ed3\u679c\uff0cmerge\u5199\u5165help\u6570\u7ec4\u4e4b\u540e\uff0c\u5982\u679c\u4e00\u4fa7\u6709\u5269\u4f59\u5219\u76f4\u63a5\u5199\u5165\u3002\u6700\u540e\u5237\u56de\u539f\u6570\u7ec4\u3002</li> <li>\u4e3a\u4e86\u5f52\u5e76\u6392\u5e8f\u7684\u7a33\u5b9a\u6027\uff0c\u5219\u89c4\u5b9a\u5f53merge\u7684\u65f6\u5019\u5148copy\u5de6\u4fa7\u7684\u6570\u5230help\u6570\u7ec4\u4e2d\u3002</li> </ol> Text Only<pre><code>    // \u5f52\u5e76\u6392\u5e8f\u9012\u5f52\u7248\n    public static void mergeSort1(int[] arr) {\n        //\u5bf9[0,arr_len-1]\u8fdb\u884c\u5f52\u5e76\u6392\u5e8f\n        sort(arr, 0, arr.length - 1);\n    }\n\n    public static void sort(int[] arr, int l, int r) {\n        //\u76f4\u5230base case\u3002\u53ea\u6709\u4e00\u4e2a\u6570\u5c31\u4e0d\u7528\u6392\u5e8f\n        if (l == r) {\n            return;\n        }\n        int m = (l + r) / 2;\n        //\u9012\u5f52\u8c03\u7528\u90e8\u5206\n        sort(arr, l, m);  \n        sort(arr, m + 1, r);\n        //\u5408\u5e76\u90e8\u5206\n        merge(arr, l, m, r);\n    }\n\n    //merge\u662f\u975e\u9012\u5f52\u65b9\u6cd5\n    //\u4f20\u5165\u7684\u4e09\u4e2a\u53c2\u6570\uff0c\u53ef\u4ee5\u6807\u8bb0[1,m],[m+1,r]\u7684\u5de6\u53f3\u4e24\u4e2a\u9700\u8981merge\u7684\u6570\u7ec4\n    //\u4f7f\u7528\u53cc\u6307\u9488\u6cd5\u6392\u5e8f\n    public static void merge(int[] arr, int l, int m, int r) {\n        int i = l;\n\n        int a = l;\n        int b = m + 1;\n        //\u5f53\u4e24\u8fb9\u90fd\u6ca1\u6709\u904d\u5386\u5b8c\u7684\u65f6\u5019\n        while (a &lt;= m &amp;&amp; b &lt;= r) {   \n            help[i++] = arr[a] &lt;= arr[b] ? arr[a++] : arr[b++];\n        }\n        while (a &lt;= m) {\n            help[i++] = arr[a++];\n        }\n        while (b &lt;= r) {\n            help[i++] = arr[b++];\n        }\n        //\u5237\u56de\u539f\u6570\u7ec4\n        for (i = l; i &lt;= r; i++) {\n            arr[i] = help[i];\n        }\n    }\n</code></pre>"},{"location":"LANG/DS-leetcode/#_51","title":"\u5dee\u5206","text":""},{"location":"LANG/DS-leetcode/#_52","title":"\u4e00\u7ef4\u5dee\u5206","text":"<ol> <li>\u573a\u666f\uff1a\u5bf9\u4e8e\u4e00\u4e2a\u6570\u7ec4\uff0c\u8981\u591a\u6b21\u5728\u4e0d\u540c\u533a\u95f4\u5feb\u901f\u5b8c\u6210\u6574\u4f53\u7684\u52a0\u51cf\u3002</li> <li>\u539f\u7406\uff1a</li> </ol> <p>\u524d\u7f00\u548c\u6570\u7ec4\uff1a\u524d\u7f00\u548c\u53ef\u4ee5\u7b80\u5355\u7406\u89e3\u4e3a\u300c\u6570\u5217\u7684\u524d n \u9879\u7684\u548c\u300d\u3002</p> <p>\u5dee\u5206\u6570\u7ec4\u5bf9\u5e94\u7684\u6982\u5ff5\u662f\u524d\u7f00\u548c\u6570\u7ec4\uff0c\u5bf9\u4e8e\u6570\u7ec4 [1,2,2,4]\uff0c\u5176\u5dee\u5206\u6570\u7ec4\u4e3a [1,1,0,2]\uff0c\u5dee\u5206\u6570\u7ec4\u7684\u7b2c i \u4e2a\u6570\u5373\u4e3a\u539f\u6570\u7ec4\u7684\u7b2c i\u22121 \u4e2a\u5143\u7d20\u548c\u7b2c i \u4e2a\u5143\u7d20\u7684\u5dee\u503c\uff0c\u4e5f\u5c31\u662f\u8bf4\u6211\u4eec\u5bf9\u5dee\u5206\u6570\u7ec4\u6c42\u524d\u7f00\u548c\u5373\u53ef\u5f97\u5230\u539f\u6570\u7ec4\u3002</p> <p>\u5dee\u5206\u6570\u7ec4\u7684\u6027\u8d28\u662f\uff0c\u5f53\u6211\u4eec\u5e0c\u671b\u5bf9\u539f\u6570\u7ec4\u7684\u67d0\u4e00\u4e2a\u533a\u95f4 [l,r] \u65bd\u52a0\u4e00\u4e2a\u589e\u91cfinc \u65f6\uff0c\u5dee\u5206\u6570\u7ec4 d \u5bf9\u5e94\u7684\u6539\u53d8\u662f\uff1ad[l] \u589e\u52a0 inc\uff0cd[r+1] \u51cf\u5c11 inc(\u7528\u4e8e\u62b5\u6d88\u7ed9\u524d\u9762\u533a\u95f4+inc\u7684\u6548\u679c)\u3002\u8fd9\u6837\u5bf9\u4e8e\u533a\u95f4\u7684\u4fee\u6539\u5c31\u53d8\u4e3a\u4e86\u5bf9\u4e8e\u4e24\u4e2a\u4f4d\u7f6e\u7684\u4fee\u6539\u3002\u5e76\u4e14\u8fd9\u79cd\u4fee\u6539\u662f\u53ef\u4ee5\u53e0\u52a0\u7684\uff0c\u5373\u5f53\u6211\u4eec\u591a\u6b21\u5bf9\u539f\u6570\u7ec4\u7684\u4e0d\u540c\u533a\u95f4\u65bd\u52a0\u4e0d\u540c\u7684\u589e\u91cf\uff0c\u6211\u4eec\u53ea\u8981\u6309\u89c4\u5219\u4fee\u6539\u5dee\u5206\u6570\u7ec4\u5373\u53ef\u3002</p> <ol> <li>\u5bf9\u4e8e\u539f\u6570\u7ec4\uff0c\u5982\u679c\u8981\u5728[L,R]\u8303\u56f4\u4e0a+v,</li> <li>\u53ea\u9700\u8981\u5728\u5bf9\u5e94\u7684\u5dee\u5206\u6570\u7ec4\u4e0a\u8ba9[L]-v, [R+1]+v</li> <li>\u7136\u540e\u5bf9\u5dee\u5206\u6570\u7ec4\u8fdb\u884c\u524d\u7f00\u548c\u5c31\u53ef\u4ee5\u5f97\u5230\u7ed3\u679c</li> <li>\u6a21\u677f\u9898\uff1a</li> </ol> Text Only<pre><code>class Solution {\n    public int[] corpFlightBookings(int[][] bookings, int n) {\n        int[] cnt = new int[n+1];\n\n        for(int[] info : bookings){\n            int l = info[0], r = info[1];\n            int num = info[2];\n            cnt[l] += num;\n            //\u6b64\u5904\u8fdb\u884c\u7279\u5224\uff0c\u6216\u8005\u5f00cnt\u7684\u65f6\u5019\u591a\u5f00\u4e00\u4e2a\n            if(r+1&lt;cnt.length) cnt[r+1] -=  num;\n        }\n        for(int i=1; i&lt;cnt.length; i++){\n            cnt[i] += cnt[i-1];\n        }\n        return Arrays.copyOfRange(cnt, 1, n+1);\n    }\n}\n</code></pre> <ol> <li>\u4e00\u4f4d\u5b50\u6570\u7ec4\u5f02\u6216\u503c</li> <li>\u89e3\u51b3\u529e\u6cd5\u5b8c\u5168\u540c\u4e00\u7ef4\u524d\u7f00\u548c</li> <li>\u5229\u7528\u5f02\u6216\u7684\u6027\u8d28<ol> <li>0^x = x</li> <li>\u4ea4\u6362\u5f8b</li> <li>\u7ed3\u5408\u5f8b</li> </ol> </li> </ol> <p></p> Text Only<pre><code>  def xorQueries(arr: Array[Int], queries: Array[Array[Int]]): Array[Int] = {\n    val prefix: Array[Int] = arr.scanLeft(0)((x, y) =&gt; (x ^ y))\n    //\u6ce8\u610fscala\u7684scanLeft\u7ed3\u679c\u7684\u5f00\u5934\u662f\u521d\u59cb\u503c\uff0c\u5219\u9700\u8981r+1 - l \u800c\u4e0d\u662fr-(l-1)   \n    for(q &lt;- queries) yield prefix(q(1)+1) ^ prefix(q(0))\n  }\n</code></pre>"},{"location":"LANG/DS-leetcode/#_53","title":"\u4e8c\u7ef4\u5dee\u5206","text":"<p>\u4e8c\u7ef4\u524d\u7f00\u548c</p> <ol> <li>\u4f8b\u5b50\uff1a</li> <li>\u6c42\u5feb\u901f\u6c42\u5f97\u4e0b\u9762\u77e9\u9635\u4e0d\u540c\u4f4d\u7f6e\u5b50\u77e9\u9635((a,b)-&gt;(c,d))\u7684\u5143\u7d20\u548c</li> <li>\u4f7f\u7528\u4e8c\u7ef4\u524d\u7f00\u548c\u6765\u5904\u7406\uff0c\u4f7f\u5f97\u83b7\u5f97\u7ed3\u679c\u7684\u65f6\u95f4\u662fO(1)</li> <li>\u6b65\u9aa4\uff1a<ol> <li>\u5148\u9884\u5904\u7406sum\u6570\u7ec4</li> <li>\u4e0d\u540c\u7684\u5b50\u77e9\u9635\u90fd\u53ef\u4ee5\u901a\u8fc7sum\u6570\u7ec4\u83b7\u5f97</li> </ol> </li> </ol> 3 1 -2 5 -3 4 3 6 2 <ol> <li>\u539f\u7406\uff1a</li> <li>\u4f7f\u7528\u5bb9\u65a5\u539f\u7406</li> <li>\u5b9e\u9645\u4e0a\u7ecf\u5e38\u901a\u8fc7\u8865sum\u7684\u7b2c0\u884c\u548c\u7b2c0\u5217\u6765\u9632\u6b62\u989d\u5916\u7684\u8fb9\u754c\u5224\u65ad\u3002\u989d\u5916\u7684\u4f4d\u7f6e\u5168\u90e8\u8bbe\u7f6e\u4e3a0\uff0c\u9632\u6b62\u5f71\u54cd\u64cd\u4f5c\u3002</li> </ol> <p></p> <ol> <li>\u6a21\u677f\u9898\uff1a</li> </ol> Text Only<pre><code>class NumMatrix {\n    public int[][] sum;\n\n    public NumMatrix(int[][] matrix) {\n        int m = matrix.length;\n        int n = matrix[0].length;\n        sum = new int[m + 1][n + 1];\n        // \u8fdb\u884c\u6269\u5145\n        for (int i = 0; i &lt; m; i++) {\n            for (int j = 0; j &lt; n; j++) {\n                sum[i + 1][j + 1] = matrix[i][j];\n            }\n        }\n        // \u9884\u5904\u7406sum\n        for (int i = 1; i &lt;= m; i++) {\n            for (int j = 1; j &lt;= n; j++) {\n                sum[i][j] += sum[i][j - 1] + sum[i - 1][j] - sum[i - 1][j - 1];\n            }\n        }\n    }\n\n    public int sumRegion(int a, int b, int c, int d) {\n        int x1 = a + 1, y1 = b + 1;\n        int x2 = c + 1, y2 = d + 1;\n        return sum[x2][y2] - sum[x1 - 1][y2] - sum[x2][y1 - 1] + sum[x1 - 1][y1 - 1];\n    }\n}\n</code></pre> <ol> <li>leetcode 1139</li> <li>\u7ed9\u4f60\u4e00\u4e2a\u7531\u82e5\u5e72 <code>&lt;span&gt;0&lt;/span&gt;</code> \u548c <code>&lt;span&gt;1&lt;/span&gt;</code> \u7ec4\u6210\u7684\u4e8c\u7ef4\u7f51\u683c <code>&lt;span&gt;grid&lt;/span&gt;</code>\uff0c\u8bf7\u4f60\u627e\u51fa\u8fb9\u754c\u5168\u90e8\u7531 <code>&lt;span&gt;1&lt;/span&gt;</code> \u7ec4\u6210\u7684\u6700\u5927 \u6b63\u65b9\u5f62 \u5b50\u7f51\u683c\uff0c\u5e76\u8fd4\u56de\u8be5\u5b50\u7f51\u683c\u4e2d\u7684\u5143\u7d20\u6570\u91cf\u3002\u5982\u679c\u4e0d\u5b58\u5728\uff0c\u5219\u8fd4\u56de <code>&lt;span&gt;0&lt;/span&gt;</code></li> <li>\u601d\u8def\uff1a<ol> <li>\u66b4\u529b\uff1a<ol> <li>\u65f6\u95f4\u590d\u6742\u5ea6O(m*n^2)\uff0c\u5176\u4e2dn&lt;m</li> </ol> </li> <li>\u4f18\u5316\u6b65\u9aa4\uff1a\u4f7f\u7528\u524d\u7f00\u5408</li> </ol> </li> </ol> Text Only<pre><code>class Solution {\n    public int largest1BorderedSquare(int[][] grid) {\n        int ans = 0;\n        int m = grid.length;\n        int n = grid[0].length;\n        //(i,j,l)\uff1a\u662f\u4ee5(i,j)\u5f00\u5934\uff0c\u5927\u5c0f\u4e3al\u7684\u77e9\u9635\u3002\n        //\u5219i\u8303\u56f4\u662f[0,m-l)\u3002j\u8303\u56f4\u662f[0,n-1)\n        int limit = Math.min(m,n);\n        for(int l = limit; l&gt;=1;l--){\n            for(int i=0; i&lt;=m-l; i++){\n                for(int j=0; j&lt;=n-l;j++){\n                    if(check(i,j,l,grid)){\n                        ans = Math.max(l*l,ans);\n                    }\n                }\n            }\n        }\n        return ans;\n    }\n    public boolean check(int a, int b, int l, int[][] grid){\n        //\u68c0\u67e5\u8fb9\u754c(\u7ad6\u7740\u7684)\n        for(int i=a;i&lt;a+l;i++){\n            if(grid[i][b] == 0) return false;\n            if(grid[i][b+l-1] == 0) return false;\n        }\n        //\u6a2a\u7740\u7684\n        for(int i=b; i&lt;b+l;i++){\n            if(grid[a][i] == 0) return false;\n            if(grid[a+l-1][i] == 0) return false;\n        }\n        return true;\n    }\n}\n//\u4f7f\u7528\u524d\u7f00\u548c\nclass Solution {\n    public int largest1BorderedSquare(int[][] grid) {\n        int ans = 0;\n        int m = grid.length;\n        int n = grid[0].length;\n        int limit = Math.min(m,n);\n        for(int l = limit; l&gt;=1;l--){\n            for(int i=0; i&lt;=m-l; i++){\n                for(int j=0; j&lt;=n-l;j++){\n                    if(check(i,j,l,grid)){\n                        return l*l;\n                    }\n                }\n            }\n        }\n        return ans;\n    }\n    public boolean check(int a, int b, int l, int[][] grid){\n        NumMatrix tool = new NumMatrix(grid);\n        int x1=a, y1=b;\n        int x2=a+l-1, y2=b+l-1;\n        int sum1 = tool.sumRegion(x1, y1, x2, y2);\n        int sum2 = 0;\n        if(l==1){\n            return grid[a][b] == 1;\n        }\n        if(l&gt;=3) sum2 = tool.sumRegion(x1+1, y1+1, x2-1, y2-1);\n        if(sum1-sum2 != 4*l-4) return false;\n        return true;\n    }\n}\n\nclass NumMatrix {\n    public int[][] sum;\n\n    public NumMatrix(int[][] matrix) {\n        int m = matrix.length;\n        int n = matrix[0].length;\n        sum = new int[m + 1][n + 1];\n        for(int i=0 ;i&lt;m+1;i++){\n            Arrays.fill(sum[i],0);\n        }\n        // \u8fdb\u884c\u6269\u5145\n        for (int i = 0; i &lt; m; i++) {\n            for (int j = 0; j &lt; n; j++) {\n                sum[i + 1][j + 1] = matrix[i][j];\n            }\n        }\n        // \u9884\u5904\u7406sum\n        for (int i = 1; i &lt;= m; i++) {\n            for (int j = 1; j &lt;= n; j++) {\n                sum[i][j] += sum[i][j - 1] + sum[i - 1][j] - sum[i - 1][j - 1];\n            }\n        }\n    }\n\n    public int sumRegion(int a, int b, int c, int d) {\n        int x1 = a + 1, y1 = b + 1;\n        int x2 = c + 1, y2 = d + 1;\n        return sum[x2][y2] - sum[x1 - 1][y2] - sum[x2][y1 - 1] + sum[x1 - 1][y1 - 1];\n    }\n}\n</code></pre> <p>\u4e8c\u7ef4\u5dee\u5206</p> <ol> <li>\u573a\u666f\uff1a(a,b)-&gt;(c,d)\u7684\u5b50\u77e9\u9635\u8fdb\u884c\u5f88\u591a\u6b21\u7684\u52a0\u51cf\u64cd\u4f5c</li> <li>\u539f\u7406\uff1a</li> <li>\u5982\u679c\u8981\u5728(1,1)-&gt;(2,2)\u7edf\u4e00\u52a03\uff0c\u9700\u8981\u5728\u5982\u4e0b\u4f4d\u7f6e\u8fdb\u884c\u64cd\u4f5c</li> <li>\u540c\u6837\u8981\u4f7f\u7528\u4e00\u57080\u628a\u771f\u5b9e\u6570\u636e\u8fdb\u884c\u6269\u5145\uff0c\u9632\u6b62\u8fb9\u754c\u60c5\u51b5</li> <li>\u8bfb\u53d6\u539f\u59cb\u77e9\u9635\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5355\u4e2a\u5143\u7d20\u7684\u5dee\u5206\u8fdb\u884c\u66ff\u4ee3</li> </ol> <p></p> <ol> <li>\u6a21\u677f\uff1a</li> </ol> Text Only<pre><code>import java.util.*;\nimport java.io.*;\n\nclass Main {\n    public static int MAXM = 1005;\n    public static int MAXN = 1005;\n    public static long[][] diff = new long[MAXM][MAXN];\n    public static int n, m, q;\n    public static void main(String[] args) throws IOException {\n\n        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));\n        StreamTokenizer in = new StreamTokenizer(br);\n        PrintWriter out = new PrintWriter(new OutputStreamWriter(System.out));\n        while (in.nextToken() != StreamTokenizer.TT_EOF) {\n            n = (int)in.nval;\n            in.nextToken();\n            m = (int)in.nval;\n            in.nextToken();\n            q = (int)in.nval;\n            for (int i = 1; i &lt;= n; i++) {\n                for (int j = 1; j &lt;= m; j++) {\n                    in.nextToken();\n                    //\u5fc5\u987b\u8981\u7528\u540c\u6837\u7684\u65b9\u5f0f\u8fdb\u884c\u6dfb\u52a0\u6570\u636e\uff0c\u5426\u5219\u7ed3\u6784\u4f1a\u4e71\n                    add(i, j, i, j, (int)in.nval);\n                }\n            }\n            for (int i = 0; i &lt; q; i++) {\n                in.nextToken();\n                int a = (int)in.nval;\n                in.nextToken();\n                int b = (int)in.nval;\n                in.nextToken();\n                int c = (int)in.nval;\n                in.nextToken();\n                int d = (int)in.nval;\n                in.nextToken();\n                int k = (int)in.nval;\n                add(a, b, c, d, k);\n            }\n            build();\n            for(int i=1;i&lt;=n;i++){\n                out.print(diff[i][1]);\n                for(int j=2; j&lt;=m;j++){\n                    out.print(\" \" + diff[i][j]);\n                }\n                out.println();\n            }\n            //\u9632\u6b62\u4e0b\u4e00\u4efd\u6d4b\u8bd5\u6570\u636e\u88ab\u4e0a\u4e00\u7ec4\u5e72\u6270\n            clear();\n        }\n        out.flush();\n        br.close();\n        out.close();\n    }\n    public static void add(int a, int b, int c, int d, int k) {\n        diff[a][b] += k;\n        diff[a][d + 1] -= k;\n        diff[c + 1][b] -= k;\n        diff[c + 1][d + 1] += k;\n    }\n    public static void build() {\n        for (int i = 1; i &lt;= n; i++) {\n            for (int j = 1; j &lt;= m; j++) {\n                diff[i][j] += diff[i - 1][j] + diff[i][j - 1] - diff[i - 1][j - 1];\n            }\n        }\n    }\n    public static void clear() {\n        for (int i = 1; i &lt;= n + 1; i++) {\n            for (int j = 1; j &lt;= m + 1; j++) {\n                diff[i][j] = 0;\n            }\n        }\n    }\n}\n</code></pre>"},{"location":"LANG/DS-leetcode/#_54","title":"\u79bb\u6563\u5316\u6280\u5de7","text":"<ol> <li>\u6838\u5fc3\u95ee\u9898\uff1a\u600e\u4e48\u5904\u7406\u4e0d\u662f\u6574\u6570\u4e0b\u6807\u4f4d\u7f6e\u7684\u683c\u5b50\u3002\u6570\u636e\u662f[0.5,1,1.5,2,2.5].....</li> <li>\u601d\u8def\uff1a</li> <li>\u5750\u6807\u4f4d\u7f6e\u7edf\u4e00\u653e\u5927\u4e00\u500d\u3002\u6bd4\u5982\u8bf4\u533a\u57df\u662f\u4ee5x,y\u4e3a\u4e2d\u5fc3\u70b9\uff0c\u957f\u5ea6\u4e3ar\u7684\u6b63\u65b9\u5f62\u3002\u5219\u53d8\u6362\u4e3a\u4e2d\u5fc3\u70b9\u4e3a(2x,2y)\uff0c\u957f\u5ea6\u4e3a2r\u7684\u6b63\u65b9\u5f62\u3002\u4fdd\u8bc1\u4e86\u533a\u57df\u7684\u76f8\u5bf9\u4f4d\u7f6e\u4e0d\u53d8\u3002</li> <li>\u8fb9\u754c\u4f4d\u7f6e\u4e5f\u662f2*(x-r/2)\uff0c\u540c\u6837\u4e5f\u662f\u4e582</li> </ol>"},{"location":"LANG/DS-leetcode/#_55","title":"\u5806","text":""},{"location":"LANG/DS-leetcode/#_56","title":"\u5806\u7ed3\u6784","text":"<ol> <li>\u5806\u7684\u5b9e\u8d28\uff1a\u5c06\u5e8f\u5217\u6620\u5c04\u4e3a\u4e8c\u53c9\u6811(\u5b9e\u9645\u4e0a\u5c31\u662f\u5728\u6570\u7ec4\u4e2d\u64cd\u4f5c)\uff0c\u5e76\u7ef4\u6301\u67d0\u4e9b\u6027\u8d28</li> </ol> <p>\u5806\u662f\u4e00\u68f5\u6811\uff0c\u5176\u6bcf\u4e2a\u8282\u70b9\u90fd\u6709\u4e00\u4e2a\u952e\u503c\uff0c\u4e14\u6bcf\u4e2a\u8282\u70b9\u7684\u952e\u503c\u90fd\u5927\u4e8e\u7b49\u4e8e/\u5c0f\u4e8e\u7b49\u4e8e\u5176\u7236\u4eb2\u7684\u952e\u503c\u3002</p> <p>\u6bcf\u4e2a\u8282\u70b9\u7684\u952e\u503c\u90fd\u5927\u4e8e\u7b49\u4e8e\u5176\u7236\u4eb2\u952e\u503c\u7684\u5806\u53eb\u505a\u5c0f\u6839\u5806\uff0c\u5426\u5219\u53eb\u505a\u5927\u6839\u5806</p> <p>\uff08\u5c0f\u6839\uff09\u5806\u4e3b\u8981\u652f\u6301\u7684\u64cd\u4f5c\u6709\uff1a\u63d2\u5165\u4e00\u4e2a\u6570\u3001\u67e5\u8be2\u6700\u5c0f\u503c\u3001\u5220\u9664\u6700\u5c0f\u503c\u3001\u5408\u5e76\u4e24\u4e2a\u5806\u3001\u51cf\u5c0f\u4e00\u4e2a\u5143\u7d20\u7684\u503c\u3002</p> <ol> <li> <p>\u4e8c\u53c9\u6811\u7684\u6027\u8d28\uff1a\u5047\u8bbe\u8282\u70b9\u6309\u7167\u5c42\u5e8f\u904d\u5386\u8fdb\u884c\u6392\u5e8f\uff0c</p> </li> <li> <p>\u5219i\u4f4d\u7f6e\u7684\u5de6\u5b69\u5b50\u662f2i+1\uff0c \u53f3\u5b69\u5b50\u8282\u70b9\u662f2i+2.</p> </li> <li>\u7b2ci\u4f4d\u7f6e\u7684\u7236\u8282\u70b9\u662f(i-1)/2\u3002\u8fd9\u4e48\u7b970\u7684\u7236\u4eb2\u8282\u70b9\u8fd8\u662f0(\u6709\u73af)</li> <li>\u5b8c\u5168\u4e8c\u53c9\u6811\u7684\u9ad8\u5ea6\u5c31\u662flog(2,N)</li> <li>\u5c06\u4e00\u4e2a\u5e8f\u5217\u7684\u524d\u7f00\u8303\u56f4\u8fdb\u884c\u5efa\u7acb\u5806\uff0c\u5219\u9700\u8981\u901a\u8fc7size\u6765\u8fdb\u884c\u9650\u5236\u5806\u4e2d\u7684\u5143\u7d20</li> <li>\u5927\u6839\u5806\uff1a</li> <li>\u5b9a\u4e49\uff1a\u4e8c\u53c9\u6811\u7684\u4efb\u4f55\u4e00\u9897\u5b50\u6811\u7684\u6700\u5927\u503c\u90fd\u5728\u9876\u90e8\u3002</li> <li>\u63d2\u5165\uff1a\u5bf9\u4e8e\u65b0\u6765\u7684\u6570\uff0c\u5411\u4e0a\u8c03\u6574\u5927\u6839\u5806(\u5b9e\u8d28\u4e0a\u662f\u8fdb\u884c\u6570\u7ec4\u7684\u8c03\u6574)</li> <li>Java \u7684PriorityQueue\u9ed8\u8ba4\u5185\u90e8\u4f7f\u7528\u7684\u662f\u5c0f\u6839\u5806\u6765\u5b9e\u73b0\u3002\u4f18\u5148\u961f\u5217\u5c31\u662f\u6839\u636e\u4f18\u5148\u7ea7\u8fdb\u884c\u91cd\u6392\u5143\u7d20\u7684\u961f\u5217\u3002\u5982\u679c\u4f7f\u7528\u5806\u6392\u5e8f\u7684\u8bdd\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528PriorityQueue\u3002</li> </ol> Text Only<pre><code>   //\u5411\u4e0a\u8c03\u6574\n   //\u8303\u56f4\u662f[0,i]\n    public static void heapInsert(int[] arr, int i) {\n        //\u6765\u52300\u4f4d\u7f6e\u7684\u8bdd\u4e5f\u4f1a\u8df3\u51fawhile\uff0c\u56e0\u4e3a\u4e0d\u6ee1\u8db3arr[0]&gt;arr[0]\n        while (arr[i] &gt; arr[(i - 1) / 2]) {\n            swap(arr, i, (i - 1) / 2);\n            i = (i - 1) / 2;\n        }\n    }\n    //\u5411\u4e0b\u8c03\u6574\n    //\u8303\u56f4\u662f[i,size]\n    public static void heapify(int[] arr, int i, int size) {\n        int l = i * 2 + 1;\n        //l&lt;size \u5c31\u662f \u6709\u5de6\u5b69\u5b50\n        while (l &lt; size) {\n            // \u53f3\u5b69\u5b50\uff0cl+1\n            // \u8bc4\u9009\uff0c\u6700\u5f3a\u7684\u5b69\u5b50\uff0c\u662f\u54ea\u4e2a\u4e0b\u6807\u7684\u5b69\u5b50\n            int best = l + 1 &lt; size &amp;&amp; arr[l + 1] &gt; arr[l] ? l + 1 : l;\n            // \u4e0a\u9762\u5df2\u7ecf\u8bc4\u9009\u4e86\u6700\u5f3a\u7684\u5b69\u5b50\uff0c\u63a5\u4e0b\u6765\uff0c\u5f53\u524d\u7684\u6570\u548c\u6700\u5f3a\u7684\u5b69\u5b50\u4e4b\u524d\uff0c\u6700\u5f3a\u4e0b\u6807\u662f\u8c01\n            best = arr[best] &gt; arr[i] ? best : i;\n            if (best == i) {\n                break;\n            }\n            swap(arr, best, i);\n            i = best;\n            l = i * 2 + 1;\n        }\n    }\n</code></pre>"},{"location":"LANG/DS-leetcode/#_57","title":"\u5806\u6392\u5e8f","text":"<ol> <li>\u6b65\u9aa4\uff1a</li> <li>\u5148\u5bf9\u6574\u4e2a\u6570\u7ec4\u5efa\u7acb\u5927\u6839\u5806</li> <li>\u5c06\u5f97\u5230\u7684\u6700\u5927\u503c\u548c\u6700\u540e\u4e00\u4e2a\u503c\u8fdb\u884c\u4ea4\u6362\u3002\u540c\u65f6\u5806\u7684\u5927\u5c0f-1\u3002</li> <li>\u5bf9\u6839\u4f4d\u7f6e\u5411\u4e0b\u8c03\u6574</li> <li>\u5bf9\u5269\u4e0b\u7684\u4f4d\u7f6e\u91cd\u590dabc\u64cd\u4f5c\u3002</li> <li>\u65f6\u95f4\u590d\u6742\u5ea6:</li> <li>\u5355\u4e2a\u5143\u7d20\u7684\u63d2\u5165\u5220\u9664\u8c03\u6574\u90fd\u662fO(logn)\uff0c\u5bf9n\u4e2a\u5143\u7d20\u5c31\u662fn*logn</li> <li>\u5efa\u7acb\u5927\u6839\u5806:\u65f6\u95f4\u590d\u6742\u5ea6\u662fO(n*logn)\u3002\u4e5f\u5c31\u662flog(2,1) + log(2,2) +...+log(2,N)-&gt;n*logn</li> <li>\u8c03\u6574:\u65f6\u95f4\u590d\u6742\u5ea6\u4e5f\u662fO(n*logn)</li> <li>\u5219\u65f6\u95f4\u590d\u6742\u5ea6\u662fO(n*logn)</li> </ol> Text Only<pre><code> // \u4ece\u9876\u5230\u5e95\u5efa\u7acb\u5927\u6839\u5806\uff0cO(n * logn)\n    // \u4f9d\u6b21\u5f39\u51fa\u5806\u5185\u6700\u5927\u503c\u5e76\u6392\u597d\u5e8f\uff0cO(n * logn)\n    // \u6574\u4f53\u65f6\u95f4\u590d\u6742\u5ea6O(n * logn)\n    public static void heapSort1(int[] arr) {\n        int n = arr.length;\n        for (int i = 0; i &lt; n; i++) {\n            heapInsert(arr, i);\n        }\n        int size = n;\n        while (size &gt; 1) {\n            swap(arr, 0, --size);\n            heapify(arr, 0, size);\n        }\n    }\n</code></pre>"},{"location":"LANG/DS-leetcode/#_58","title":"\u5806\u7684\u5e38\u89c1\u9898","text":"<ol> <li>\u5408\u5e76K\u4e2a\u6709\u5e8f\u94fe\u8868\uff1a</li> <li>\u601d\u8def1\uff1a\u6536\u96c6\u6240\u6709\u8282\u70b9\uff0c\u5c06\u8282\u70b9\u8fdb\u884c\u6392\u5e8f\uff0c\u7136\u540e\u518d\u7edf\u4e00\u88c5\u8d77\u6765\u3002<ol> <li>\u65f6\u95f4\u590d\u6742\u5ea6:O(n*logn) + O(n)=O(n*logn)\u3002</li> <li>\u7a7a\u95f4\u590d\u6742\u5ea6\uff1aO(n)(\u5c31\u662f\u6536\u96c6\u6240\u6709\u8282\u70b9\u7684\u4f4d\u7f6e)</li> </ol> </li> <li>\u601d\u8def2\uff1a\u4f7f\u7528\u5806\u3002</li> <li>\u4f7f\u7528\u5c0f\u6839\u5806\uff0c\u5229\u7528\u94fe\u8868\u81ea\u8eab\u6709\u5e8f\u7684\u6027\u8d28\u3002</li> <li>\u73b0\u5c06K\u4e2a\u94fe\u8868\u7684\u5934\u7ed3\u70b9\u52a0\u5165\u5806\u3002\u4ece\u4e2d\u9009\u53d6\u6700\u5c0f\u7684\uff0c\u5c31\u662f\u5168\u5c40\u6700\u5c0f\u7684\u3002\u5219\u5c06\u5176\u5f39\u51fa\uff0c\u5e76\u5c06\u5176\u540e\u7ee7\u8282\u70b9\u52a0\u5165\u5806\u3002</li> <li>\u4f18\u70b9\uff1a\u5806\u7684\u5927\u5c0f\u59cb\u7ec8\u4e0d\u8d85\u8fc7K\u3002</li> <li>\u65f6\u95f4\u590d\u6742\u5ea6:O(n*logk)</li> <li>\u7a7a\u95f4\u590d\u6742\u5ea6\uff1aO(k)</li> </ol> Text Only<pre><code>public class Code01_MergeKSortedLists {\n\n    // \u4e0d\u8981\u63d0\u4ea4\u8fd9\u4e2a\u7c7b\n    public static class ListNode {\n        public int val;\n        public ListNode next;\n    }\n\n    // \u63d0\u4ea4\u4ee5\u4e0b\u7684\u65b9\u6cd5\n    public static ListNode mergeKLists(ArrayList&lt;ListNode&gt; arr) {\n        // \u5c0f\u6839\u5806\n        PriorityQueue&lt;ListNode&gt; heap = new PriorityQueue&lt;&gt;((a, b) -&gt; a.val - b.val);\n        for (ListNode h : arr) {\n            // \u904d\u5386\u6240\u6709\u7684\u5934\uff01\n            if (h != null) {\n                heap.add(h);\n            }\n        }\n        //\u5982\u679c\u5168\u662f\u7a7a\u94fe\u8868\n        if (heap.isEmpty()) {\n            return null;\n        }\n        // \u5148\u5f39\u51fa\u4e00\u4e2a\u8282\u70b9\uff0c\u505a\u603b\u5934\u90e8\u3002\n        //poll\u65b9\u6cd5\u53d6\u51fa\u4f18\u5148\u961f\u5217\u7684\u5934\u90e8\n        ListNode h = heap.poll();\n        ListNode pre = h;\n        if (pre.next != null) {\n            heap.add(pre.next);\n        }\n        while (!heap.isEmpty()) {\n            ListNode cur = heap.poll();\n            pre.next = cur;\n            pre = cur;\n            if (cur.next != null) {\n                heap.add(cur.next);\n            }\n        }\n        return h;\n    }\n\n}\n</code></pre> <p>\u5bf9\u9876\u5806</p> <p>\u7528\u4e8e\u7ef4\u62a4\u6570\u636e\u6d41\u7684\u4e2d\u4f4d\u6570\uff0c\u901a\u8fc7\u4e00\u4e2a\u5927\u6839\u5806 + \u5c0f\u6839\u5806\u6765\u5b9e\u73b0\u3002</p> <p>\u5177\u4f53\u601d\u8def\u5982\u4e0b\uff1a\u82e5\u6570\u636e\u9012\u589e\uff0c\u5219\u4e2d\u4f4d\u6570\u5de6\u4fa7\u5c0f\uff0c\u53f3\u4fa7\u5927\uff0c\u5c06\u6570\u636e\u4e00\u5206\u4e3a\u4e8c,\u5e76\u89c4\u5b9a\u5947\u6570\u60c5\u51b5\u4e0b\u5de6\u4fa7\u6bd4\u53f3\u4fa7\u5927\u4e00\u4e2a.</p> <p>\u5219\u8003\u8651\u5c06\u5de6\u4fa7\u7ef4\u62a4\u4e3a\u4e00\u4e2a\u5927\u6839\u5806\uff0c\u53f3\u4fa7\u7ef4\u62a4\u4e3a\u4e00\u4e2a\u5c0f\u6839\u5806\uff0c\u53d8\u5316\u53ea\u53d1\u751f\u5728\u4e34\u754c\u503c\uff0c\u4e5f\u5c31\u662f\u5de6\u4fa7\u7684\u6700\u5927\u503c\u548c\u53f3\u4fa7\u7684\u6700\u5c0f\u503c\u3002</p> <ul> <li>\u5982\u679cl.size == r.size\uff0c\u5219\u5c06\u6570\u636e\u52a0\u5165r\uff0c\u5e76\u5c06r\u4e2d\u6700\u5c0f\u503c\u7ed9l\uff0c\u56e0\u4e3a\u9700\u8981\u6ee1\u8db3l.size == r.size +1</li> <li>\u5982\u679cl.size == r.size +1\uff0c\u5219\u5c06\u6570\u636e\u52a0\u5165l,\u5e76\u5c06l\u4e2d\u6700\u5927\u503c\u7ed9r,\u56e0\u4e3a\u9700\u8981\u6ee1\u8db3l.size == r.size +1</li> </ul> <p>\u5373\u53ef\u5b9e\u65f6\u83b7\u5f97\u6570\u636e\u6d41\u4e2d\u4f4d\u6570</p> Java<pre><code>    def findMedianPrice(prices: Array[Int]): Array[Double] = {\n        // write code here\n        import scala.collection.mutable.{PriorityQueue}\n        val l = PriorityQueue[Int]()\n        val r = PriorityQueue[Int]()(Ordering.Int.reverse)\n\n        val ans = prices.map(p =&gt; {\n            if(l.size == r.size){\n                r.enqueue(p)\n                l.enqueue(r.dequeue())\n            }else{\n                l.enqueue(p)\n                r.enqueue(l.dequeue())\n            }\n            val tmp = (if(l.size == r.size) (l.head.toDouble + r.head)/2 \n                   else l.head.toDouble)\n            tmp\n        })\n        return ans\n    } \n</code></pre>"},{"location":"LANG/DS-leetcode/#_59","title":"\u54c8\u5e0c\u8868","text":""},{"location":"LANG/DS-leetcode/#hashset-and-hashmap","title":"HashSet and HashMap","text":"<ol> <li>\u6ce8\u610fJava\u4e2d==\u548cequals\u65b9\u6cd5\u7684\u4f7f\u7528</li> <li>\u5bf9\u4e8e\u6240\u6709\u5305\u88c5\u7c7b\u578b\uff0c\u4ee5\u53caString\u90fd\u6309\u7167\u503c\u6765\u4f7f\u7528(\u8c03\u7528equals\u65b9\u6cd5)</li> </ol> Text Only<pre><code>public static void main(String[] args) {\n        // Integer\u3001Long\u3001Double\u3001Float\n        // Byte\u3001Short\u3001Character\u3001Boolean\n        // String\u7b49\u90fd\u6709\u8fd9\u4e2a\u7279\u5f81\n        String str1 = new String(\"Hello\");\n        String str2 = new String(\"Hello\");\n        // false\uff0c\u56e0\u4e3a\u4e0d\u540c\u7684\u5185\u5b58\u5730\u5740\n        System.out.println(str1 == str2);\n        // true\uff0c\u56e0\u4e3a\u5b83\u4eec\u7684\u503c\u662f\u76f8\u540c\u7684\n        System.out.println(str1.equals(str2));\n\n        HashSet&lt;String&gt; set = new HashSet&lt;&gt;();\n        set.add(str1);\n        System.out.println(set.contains(\"Hello\"));\n        System.out.println(set.contains(str2));\n        set.add(str2);\n        System.out.println(set.size());\n        set.remove(str1);\n        set.clear();\n        System.out.println(set.isEmpty());\n\n        System.out.println(\"===========\");\n\n        HashMap&lt;String, String&gt; map1 = new HashMap&lt;&gt;();\n        map1.put(str1, \"World\");\n        //\u6b64\u5904\u5224\u65ad\u5fc5\u7136\u662f\u5b58\u5728\u7684\uff0c\u56e0\u4e3aHashMap\u5185\u90e8\u4e2d\u901a\u8fc7equals\u65b9\u6cd5\u8fdb\u884c\u5224\u65ad\n        System.out.println(map1.containsKey(\"Hello\"));\n        System.out.println(map1.containsKey(str2));\n        System.out.println(map1.get(str2));\n        System.out.println(map1.get(\"\u4f60\u597d\") == null);\n        map1.remove(\"Hello\");\n        System.out.println(map1.size());\n        map1.clear();\n        System.out.println(map1.isEmpty());\n\n        System.out.println(\"===========\");\n\n        // \u4e00\u822c\u5728\u7b14\u8bd5\u4e2d\uff0c\u672a\u5fc5\u9700\u8981\u7533\u8bf7\u54c8\u5e0c\u8868\n        HashMap&lt;Integer, Integer&gt; map2 = new HashMap&lt;&gt;();\n        map2.put(56, 7285);\n        map2.put(34, 3671263);\n        map2.put(17, 716311);\n        map2.put(24, 1263161);\n        // \u4e0a\u9762\u7684map2\u884c\u4e3a\uff0c\u53ef\u4ee5\u88ab\u5982\u4e0b\u6570\u7ec4\u7684\u884c\u4e3a\u66ff\u4ee3\n        int[] arr = new int[100];\n        arr[56] = 7285;\n        arr[34] = 3671263;\n        arr[17] = 716311;\n        arr[24] = 1263161;\n        // \u54c8\u5e0c\u8868\u7684\u589e\u3001\u5220\u3001\u6539\u3001\u67e5\uff0c\u90fd\u53ef\u4ee5\u88ab\u6570\u7ec4\u66ff\u4ee3\uff0c\u524d\u63d0\u662fkey\u7684\u8303\u56f4\u662f\u56fa\u5b9a\u7684\u3001\u53ef\u63a7\u7684\n        System.out.println(\"\u5728\u7b14\u8bd5\u573a\u5408\u4e2d\u54c8\u5e0c\u8868\u5f80\u5f80\u4f1a\u88ab\u6570\u7ec4\u66ff\u4ee3\");\n\n        System.out.println(\"===========\");\n        Student s1 = new Student(17, \"\u5f20\u4e09\");\n        Student s2 = new Student(17, \"\u5f20\u4e09\");\n        HashMap&lt;Student, String&gt; map3 = new HashMap&lt;&gt;();\n        map3.put(s1, \"\u8fd9\u662f\u5f20\u4e09\");\n        System.out.println(map3.containsKey(s1));\n        System.out.println(map3.containsKey(s2));\n        map3.put(s2, \"\u8fd9\u662f\u53e6\u4e00\u4e2a\u5f20\u4e09\");\n        System.out.println(map3.size());\n        System.out.println(map3.get(s1));\n        System.out.println(map3.get(s2));\n    }\n</code></pre>"},{"location":"LANG/DS-leetcode/#_60","title":"\u6bd4\u8f83\u5668","text":"<p>Java\u4e2d\u7684\u5b9e\u73b0\u5bf9\u8c61\u6392\u5e8f\u7531\u4e24\u79cd\u65b9\u5f0f\uff1a\u81ea\u7136\u6392\u5e8f\u548c\u5b9a\u5236\u6392\u5e8f</p> <ol> <li>\u81ea\u7136\u6392\u5e8f\uff1a</li> </ol> Text Only<pre><code>public interface Comparable{\n int compareTo(Object obj);\n}\n</code></pre> <ol> <li>\u5168\u7c7b\u540d\uff1ajava.lang.Comparable(\u63a5\u53e3)</li> <li>\u4f7f\u7528\u65b9\u6cd5\uff1a\u5b9e\u73b0\u63a5\u53e3\u4e2d\u7684int compareTo(Object obj)\u65b9\u6cd5.\u82e5this&gt;that\u5219\u8fd4\u56de\u503c\u4e3a\u6b63\u3002</li> <li>\u5b9a\u5236\u6392\u5e8f\uff1a</li> </ol> Text Only<pre><code>public interface Comparator{\n int compare(Object o1,Object o2);\n}\n</code></pre> <ol> <li>\u80cc\u666f\uff1a\u5982\u679c\u9700\u8981\u6bd4\u8f83\u7684\u7c7b\u6ca1\u6709\u5b9e\u73b0Comparable\u63a5\u53e3\uff0c\u5e76\u4e14\u65e0\u6cd5\u6539\u53d8\u3002\u6216\u8005\u4e0d\u60f3\u6309\u7167Comparable\u7684compareTo()\u7684\u5b9e\u73b0\u8fdb\u884c\u6392\u5e8f\u3002</li> <li>\u89e3\u51b3\u529e\u6cd5\uff1a\u901a\u8fc7\u4f7f\u7528Comparator\u63a5\u53e3\u8fdb\u884c\u5b9a\u5236\u6392\u5e8f</li> <li>\u4f7f\u7528\u65b9\u6cd5\uff1a\u91cd\u5199compare\u65b9\u6cd5\u8fdb\u884c\u6bd4\u8f83\u3002\u5982\u679co1&gt;o2\uff0c\u5219\u8fd4\u56de\u503c\u4e3a\u6b63\u3002</li> <li>\u5e38\u89c1\u573a\u666f\uff1a\u5c06Comparator\u4f20\u5165Collections.sort()\u65b9\u6cd5\u4e2d\uff0c\u6216\u8005Arrays.sort()\u7b49\u65b9\u6cd5\u4e2d\u3002</li> </ol>"},{"location":"LANG/DS-leetcode/#_61","title":"\u524d\u7f00\u6811","text":""},{"location":"LANG/DS-leetcode/#_62","title":"\u539f\u7406","text":"<ol> <li>\u5047\u8bbe\u6709\u5b57\u7b26\u4e32\"acb\",\"cba\",\"acc\"\u3002\u5219\u524d\u7f00\u6811\u662f\u4e00\u79cd\u7279\u6b8a\u7684N\u53c9\u6811\uff0c\u5b83\u88ab\u7528\u6765\u5b58\u50a8\u5b57\u7b26\u4e32\u3002\u5219\u7531\u8fd9\u4e09\u4e2a\u5b57\u7b26\u4e32\u6784\u6210\u7684\u524d\u7f00\u6811\u662f\u3002\u4e00\u822c\u90fd\u662f\u5c06\u5b57\u7b26\u653e\u5728\u8def\u4e0a(\u901a\u8fc7\u957f\u5ea6\u4e3a26\u7684\u6570\u7ec4\u7684\u4e0b\u6807\u6765\u8868\u793a\u3002\u6bd4\u59820\u4f4d\u7f6e\u5c31\u662f\u8d70\u5411a\u5206\u652f)\uff0c\u800c\u4e0d\u662f\u8282\u70b9\u4e0a\u3002\u8282\u70b9\u5c31\u7ef4\u6301p\u4fe1\u606f\uff0ce\u4fe1\u606f\u3002</li> <li>\u6bcf\u4e2a\u8282\u70b9\u90fd\u67092\u4e2a\u4fe1\u606f\uff1a</li> <li>pass\u4fe1\u606f\uff1a\u6709\u591a\u5c11\u5b57\u7b26\u4e32\u8def\u8fc7\u8be5\u8282\u70b9(\u521a\u597d\u6765\u5230\u4e5f\u7b97)</li> <li>end\u4fe1\u606f\uff1a\u6709\u591a\u5c11\u5b57\u7b26\u4e32\u4ee5\u8be5\u8282\u70b9\u7ed3\u5c3e</li> </ol> <ol> <li>\u4fe1\u606f\u7684\u4f5c\u7528\uff1a</li> <li>\u5feb\u901f\u67e5\u770b\u5355\u8bcd\u7684\u51fa\u73b0\u9891\u7387\u3002\u6bd4\u5982\u67e5\u770b\"acc\"\u51fa\u73b0\u51e0\u6b21</li> <li>\u67e5\u770b\u6709\u591a\u5c11\u5355\u8bcd\uff1a\u5c31\u662f\u6839\u8282\u70b9\u7684p\u503c,\u4e5f\u7b49\u4ef7\u4e8e\u6709\u591a\u5c11\u5355\u8bcd\u4ee5\"\"\u7a7a\u5b57\u7b26\u4e32\u5f00\u5934\u3002</li> <li>\u591a\u5c11\u5b57\u7b26\u4e32\u4ee5\"ac\"\u5f00\u5934\uff1a\u67e5\u770bc\u4e0b\u9762\u7684\u8282\u70b9\u7684p\u503c\u4fe1\u606f</li> <li>\u5220\u9664\u5355\u8bcd\uff1a\u9996\u67e5\u8be2\u662f\u5426\u51fa\u73b0\u8fc7\u3002\u5728\u51cf\u53bbp\u7684\u65f6\u5019\uff0c\u5982\u679cp=0\uff0c\u5219\u9700\u8981\u5c06\u8be5\u8282\u70b9\u7684\u5206\u652f\u90fd\u53d8\u4e3a\u65e0\u6548</li> <li>\u524d\u7f00\u6811\u4f18\u70b9\uff1a\u6839\u636e\u524d\u7f00\u4fe1\u606f\u6811\u7684\u5206\u652f\u6765\u5feb\u901f\u9009\u62e9\uff0c\u8282\u7701\u65f6\u95f4</li> <li>\u524d\u7f00\u6811\u7f3a\u70b9\uff1a\u6bd4\u8f83\u6d6a\u8d39\u7a7a\u95f4\uff0c\u548c\u5b57\u7b26\u603b\u6570\u91cf\u548c\u79cd\u7c7b\u6709\u5173</li> </ol>"},{"location":"LANG/DS-leetcode/#_63","title":"\u5b9e\u73b0","text":"<ol> <li>\u4f7f\u7528\u7c7b\u7684\u65b9\u5f0f\u8fdb\u884c\u5b9e\u73b0\uff1a</li> <li>\u9700\u8981\u5b9a\u4e49\u8282\u70b9\u7c7b\uff0c\u5305\u542bpass,end,nexts[]\u4e09\u4e2a\u6210\u5458\u53d8\u91cf\u3002\u901a\u8fc7\u5f00\u56fa\u5b9a\u957f\u5ea6\u7684nexts[]\u6765\u5b9e\u73b0\u6811\u7684\u6784\u5efa\u3002x - 'a'\u5b9e\u73b0\u504f\u79fb\u91cf\u3002</li> </ol> Text Only<pre><code>class Trie {\n    class TreeNode{\n        public int pass;\n        public int end;\n        public TreeNode[] nexts;\n        public TreeNode(){\n            pass = 0;\n            end = 0;\n            nexts = new TreeNode[26];\n        }\n    }\n    private TreeNode root;\n    public Trie() {\n        root = new TreeNode();\n    }\n\n    public void insert(String word) {\n        TreeNode node = root;\n        node.pass++;\n        for(int i=0 ;i&lt;word.length();i++){\n            int path = word.charAt(i) - 'a';\n            if(node.nexts[path] == null){\n                node.nexts[path] = new TreeNode();\n            }\n            node = node.nexts[path];\n            node.pass++;\n        }\n        node.end++;\n    }\n\n    public boolean search(String word) {\n        TreeNode node = root;\n        for(int i=0 ;i&lt;word.length();i++){\n            int path = word.charAt(i) - 'a';\n            if(node.nexts[path] == null){\n                return false;\n            }\n            node = node.nexts[path];\n        }\n        return node.end == 0 ? false : true;\n    }\n\n    public boolean startsWith(String word) {\n        TreeNode node = root;\n        for(int i=0 ;i&lt;word.length();i++){\n            int path = word.charAt(i) - 'a';\n            if(node.nexts[path] == null){\n                return false;\n            }\n            node = node.nexts[path];\n        }\n        return true;\n    }\n}\n</code></pre> Text Only<pre><code>class Trie{\n  private case class TreeNode (\n    var pass:Int = 0,\n    var end:Int = 0,\n    var nexts:Array[Option[TreeNode]] = Array.fill(26)(None)\n  )\n  private val root = TreeNode()\n\n  def insert(word:String): Unit = {\n    var node = root\n    node.pass += 1\n    for(i&lt;-word.indices){\n      val path = word(i) - 'a'\n      if(node.nexts(path).isEmpty) node.nexts(path) = Some(TreeNode())\n      node = node.nexts(path).get\n      node.pass += 1\n    }\n    node.end += 1\n  }\n  def search(word:String): Boolean = {\n    var node = root\n    @scala.annotation.tailrec\n    def go(n:TreeNode, i:Int):Boolean = {\n      if(i == word.length) return node.end != 0\n      val path = word(i) - 'a'\n      if(node.nexts(path).isEmpty) return false\n      node = node.nexts(path).get\n      go(node,i+1)\n    }\n    go(node,0)\n  }\n\n  def startsWith(word:String):Boolean = {\n    var node = root\n    @scala.annotation.tailrec\n    def go(n:TreeNode, i:Int):Boolean = {\n      if(i == word.length) return true\n      val path = word(i) - 'a'\n      if(node.nexts(path).isEmpty) return false\n      node = node.nexts(path).get\n      go(node,i+1)\n    }\n    go(node,0)\n  }\n}\n</code></pre> <ol> <li>\u4f7f\u7528\u9759\u6001\u6570\u7ec4\u7684\u65b9\u5f0f\u5b9e\u73b0\u3002\u4e00\u6b21\u6027\u5f00\u8db3\u8db3\u591f\u7684\u7a7a\u95f4</li> <li>\u5047\u8bbe\u6811\u4e00\u5171\u4f1a\u5f00m\u4e2a\u8282\u70b9(m&gt;\u5b9e\u9645\u8282\u70b9\u6570)\uff0c\u6bcf\u4e2a\u8282\u70b9\u4e0b\u6709n\u4e2a\u9009\u62e9\u3002\u5219int[][] tree = new int[m][n];</li> <li>pass,end\u4fe1\u606f\u5206\u522b\u4f7f\u7528\u4e00\u7ef4\u7684\u6570\u7ec4\uff1b</li> <li>\u5047\u8bbe\u4ececnt=1\u4e0b\u6807\u7684\u8282\u70b9\u4e3a(\u6839\u8282\u70b9)\u5f00\u59cb\u3002\u4f7f\u7528cnt\u4ee3\u8868\u5206\u914d\u7684\u8282\u70b9\uff0c\u7b49\u4ef7\u4e8enew</li> </ol> Text Only<pre><code>    // \u5982\u679c\u5c06\u6765\u589e\u52a0\u4e86\u6570\u636e\u91cf\uff0c\u5c31\u6539\u5927\u8fd9\u4e2a\u503c\n    public static int MAXN = 150001;\n\n    public static int[][] tree = new int[MAXN][26];\n\n    public static int[] end = new int[MAXN];\n\n    public static int[] pass = new int[MAXN];\n\n    public static int cnt;\n\n    public static void build() {\n        cnt = 1;\n        for(int i=0; i&lt;MAXN;i++){\n            Arrays.fill(tree[i],0);\n        }\n        Arrays.fill(end,0);\n        Arrays.fill(pass,0);\n    }\n\n    public static void insert(String word) {\n        int cur = 1;\n        pass[cur]++;\n        for (int i = 0, path; i &lt; word.length(); i++) {\n            path = word.charAt(i) - 'a';\n            if (tree[cur][path] == 0) {\n                //\u4f7f\u7528cnt\u7ed9\u4ed6\u5206\u914d\u7f16\u53f7\n                tree[cur][path] = ++cnt;\n            }\n            cur = tree[cur][path];\n            pass[cur]++;\n        }\n        end[cur]++;\n    }\n\n    public static int search(String word) {\n        int cur = 1;\n        for (int i = 0, path; i &lt; word.length(); i++) {\n            path = word.charAt(i) - 'a';\n            if (tree[cur][path] == 0) {\n                return 0;\n            }\n            cur = tree[cur][path];\n        }\n        return end[cur];\n    }\n\n    public static int prefixNumber(String pre) {\n        int cur = 1;\n        for (int i = 0, path; i &lt; pre.length(); i++) {\n            path = pre.charAt(i) - 'a';\n            if (tree[cur][path] == 0) {\n                return 0;\n            }\n            cur = tree[cur][path];\n        }\n        return pass[cur];\n    }\n</code></pre>"},{"location":"LANG/DS-leetcode/#_64","title":"\u4f8b\u9898","text":"<ol> <li>\u6570\u7ec4\u4e2d\u4e24\u4e2a\u6570\u7684\u6700\u5927\u5f02\u6216\u503c</li> <li>\u66b4\u529b\u89e3\u6cd5\uff1a2\u91cdfor\u5faa\u73af\u89e3\u51b3</li> <li>\u524d\u7f00\u6811\u89e3\u6cd5\uff1a<ol> <li>\u5c06\u6bcf\u4e2a\u6570\u4f7f\u7528\u4e8c\u8fdb\u5236\u8868\u793a\uff0c\u5982\u679c\u6570\u5b57\u670932\u4f4d\uff0c\u4e5f\u5c31\u662f\u5c0632\u4f4d\u5b57\u7b26\u4e32\u5b58\u5165\u524d\u7f00\u6811\u4e2d\u3002\u5c06\u6570\u5b57\u5b58\u5165\u524d\u7f00\u6811\u4e2d\u3002</li> <li>\u56e0\u4e3a\u6240\u6709\u7684\u6570\u90fd\u662f\u975e\u8d1f\u6570\uff0c\u5219\u8865\u7801\u8868\u793a\u90fd\u662f\u4ee50\u5f00\u5934(\u7b26\u53f7\u4f4d)\uff0c\u6839\u8282\u70b9\u4e0b\u9762\u5f00\u59cb\u4ece\u6700\u9ad8\u4f4d\u5f00\u59cb\u9009\u62e9\u3002\u5982\u679c\u8981\u7ed3\u679c\u5c3d\u53ef\u80fd\u5927\uff0c\u5c31\u9700\u8981\u4ece\u9ad8\u4f4d\u770b\u8d77\uff0c1\u7684\u51fa\u73b0\u7684\u53ef\u80fd\u6027\u9700\u8981\u6700\u5927\u3002</li> <li>\u3002\u5bf9\u4e8e\u6bcf\u4e2a\u6570\uff0c\u5728\u524d\u7f00\u6811\u4e2d\u67e5\u8be2\u76f8\u5e94\u7684\u6700\u4f18\u89e3\u3002</li> <li>\u6700\u540e\u4e00\u5b9a\u8981clear\uff0c\u9632\u6b62\u810f\u6570\u636e\u7684\u5f71\u54cd\u3002</li> </ol> </li> </ol> Text Only<pre><code>class Solution {\n    public static int MAXN = 3000001;\n    public static int[][] tree = new int[MAXN][2];\n    public static int[] pass = new int[MAXN];\n    public static int[] end = new int[MAXN];\n    public static int cnt;\n    public int findMaximumXOR(int[] nums) {\n        bulid(nums);\n        int ans = 0;\n        for(int item:nums){\n            ans = Math.max(ans,maxXor(item));\n        }\n        clear();\n        return ans;\n    }\n    public static void bulid(int[] nums){\n        cnt = 1;\n        for(int item : nums){\n            insert(item);\n        }\n    }\n    public static void insert(int num){\n        int cur = 1;\n        pass[cur]++;\n        for(int i = 31;i&gt;=0;i--){\n            int path = (num &gt;&gt; i) &amp; 1;\n            if(tree[cur][path] == 0){\n                tree[cur][path] = ++cnt;\n            }\n            cur = tree[cur][path];\n            pass[cur]++;\n        }\n        end[cur]++;\n    }\n\n    public static int maxXor(int num){\n        int cur = 1;\n        int ans = 0;\n        for(int i=31;i&gt;=0;i--){\n            //nums\u7b2ci\u7684\u72b6\u6001\n            int status = (num &gt;&gt; i) &amp; 1;\n            //\u60f3\u8981\u7684\u72b6\u6001\n            int want = status ^ 1;\n            if(tree[cur][want] == 0){\n                //\u5982\u679c\u6ca1\u6709\uff0c\u5c31\u53ea\u80fd\u5f80\u53cd\u65b9\u5411\u8d70\n                want = want ^ 1;\n            }\n            //\u5982\u679cstatus^want==1\uff0c\u5219\u7b2ci\u4f4d\u5c31\u662f1\u3002\u548cans\u53d6\u5927\u503c(\u8fd8\u662f1)\n            //\u5982\u679cstatus^want=0,\u5219\u7b2ci\u4f4d\u5c31\u662f0\uff0c\u5982\u679cans\u662f0\uff0c\u6700\u7ec8\u8fd8\u662f0,\u5426\u5219\u8fd8\u662f1\n            ans |= (status ^ want) &lt;&lt; i;\n            cur = tree[cur][want];\n        }\n        return ans;\n    }\n    public static void clear() {\n        for (int i = 1; i &lt;= cnt; i++) {\n            tree[i][0] = tree[i][1] = 0;\n        }\n    }\n}\n</code></pre> <ol> <li>leetcode 14\u6700\u957f\u516c\u5171\u524d\u7f00</li> </ol> Text Only<pre><code>class Solution {\n    public static int MAXN = 203;\n    public static int[][] tree = new int[MAXN][26];\n    public static int[] end = new int[MAXN];\n    public static int[] pass = new int[MAXN];\n    public static int cnt;\n    public String longestCommonPrefix(String[] strs) {\n        build();\n        Arrays.sort(strs,(a,b)-&gt;(a.length()-b.length()));\n        String word = strs[0];\n        for(String item : strs){\n            insert(item);\n        }\n        int v = strs.length;\n        String ans = \"\";\n        for(int i=1; i&lt;=word.length();i++){\n            String pre = word.substring(0,i);\n            int cnt = prefix(pre);\n            if(cnt == v){\n                v = cnt;\n                ans = pre;\n            }\n        }\n        return ans;\n    }\n    public void build(){\n        cnt = 1;\n        for(int i=0; i&lt;MAXN;i++){\n            Arrays.fill(tree[i],0);\n        }\n        Arrays.fill(end,0);\n        Arrays.fill(pass,0);\n    }\n    public void insert(String word){\n        int cur = 1;\n        pass[cur]++;\n        for(int i=0,path; i&lt;word.length();i++){\n            path = word.charAt(i)-'a';\n            //\u5206\u914d\u8282\u70b9\u7f16\u53f7\n            if(tree[cur][path] == 0){\n                tree[cur][path] = ++cnt;\n            }\n            cur = tree[cur][path];\n            pass[cur]++;\n        }\n        end[cur]++;\n    }\n    public int search(String word){\n        int cur = 1;\n        for(int i=0,path;i&lt;word.length();i++){\n            path = word.charAt(i)-'a';\n            if(tree[cur][path] == 0){\n                return 0;\n            }\n            cur = tree[cur][path];\n        }\n        return end[cur];\n    }\n    public int prefix(String pre){\n        int cur = 1;\n        for(int i=0,path;i&lt;pre.length();i++){\n            path = pre.charAt(i)-'a';\n            if(tree[cur][path] == 0){\n                return 0;\n            }\n            cur = tree[cur][path];\n        }\n        return pass[cur];\n    }\n}\n</code></pre>"},{"location":"LANG/DS-leetcode/#kmp","title":"KMP\u7b97\u6cd5","text":""},{"location":"LANG/DS-leetcode/#_65","title":"\u6982\u5ff5","text":"<p>\u6838\u5fc3\u6982\u5ff5\uff1a</p> <ol> <li>\u66b4\u529b\u65b9\u6cd5\u6bcf\u6b21\u90fd\u91cd\u65b0\u8fdb\u884c\u5339\u914d\uff0c\u5e76\u6ca1\u6709\u5229\u7528\u4e4b\u524d\u64cd\u4f5c\u7684\u4fe1\u606f\uff0c\u800ckmp\u7b97\u6cd5\u4f1a\u4f7f\u7528\u5230\u4e4b\u524d\u5339\u914d\u6240\u63d0\u70bc\u51fa\u7684\u4fe1\u606f\u3002</li> <li> <p>next\u6570\u7ec4\u7684\u5b9a\u4e49\uff1a</p> </li> <li> <p>next[i]\uff1a\u542b\u4e49\u4e00\uff1a\u5b58\u50a8\u7684\u662f[0,i)\u7684\u5b57\u7b26\u4e32\u7684\u524d\u7f00\u548c\u540e\u7f00\u7684\u6700\u5927\u5339\u914d\u957f\u5ea6\u3002\u5982\u679c\u6ca1\u6709[0,i)\u4f4d\u7f6e\u7684\u5b50\u4e32\u5219\u89c4\u5b9a\u4e3a-1\u3002\u7ec8\u6b62\u4f4d\u7f6e\u7684next\u503c\u662f\u6574\u4e2a\u5b57\u7b26\u4e32\u7684\u524d\u540e\u7f00\u5339\u914d\u7684\u6700\u5927\u957f\u5ea6\u3002</p> </li> <li>next[i]\uff1a\u542b\u4e49\u4e8c\uff1a\u53e6\u4e00\u4e2a\u542b\u4e49\u662fpre\u5411\u524d\u8df3\u7684\u4e0b\u4e00\u4f4d\u4e0b\u6807\uff0c\u4e5f\u5c31\u662f\u6bd4\u5bf9\u7684\u4e0b\u4e00\u4e2a\u4e0b\u6807\u3002</li> <li>\u5b57\u7b26\u4e32\u524d\u7f00\uff1a\u5b57\u7b26\u4e32\u9996\u90e8\u3002\u5b57\u7b26\u4e32\u771f\u524d\u7f00\uff1a\u6307\u7684\u662f\u9664\u4e86s\u672c\u8eab\u7684\u5b50\u4e32\u3002</li> <li>\u5b57\u7b26\u4e32\u540e\u7f00\uff1a\u5b57\u7b26\u4e32\u5c3e\u90e8\u3002\u5b57\u7b26\u4e32\u771f\u540e\u7f00\uff1a\u6307\u7684\u662f\u9664\u4e86s\u672c\u8eab\u7684\u5c3e\u4e32\u3002</li> <li>\u524d\u540e\u7f00\u53ef\u4ee5\u4ea4\u53c9\u3002</li> <li>\u6bd4\u5982abab:\u5219\u524d\u7f00\u548c\u540e\u7f00\u5339\u914d\u7684\u6700\u5927\u957f\u5ea6\u662f2(\u662fab)\u3002</li> <li>next\u6570\u7ec4\u7684\u6c42\u89e3\uff1a</li> <li>\u524d\u4e24\u9879\u56fa\u5b9a\uff1anext[0] = -1, next[1] = 0;</li> <li>\u5982\u679c\u5bf9\u4e8ei\u4f4d\u7f6e\u7684next[i],</li> <li>\u5982\u679cs[i] = spre\uff0c\u5219next[i] = ++pre(\u4f7f\u7528\u7684\u662fnext\u542b\u4e491).</li> <li>\u5982\u679cs[i] !=s[pre] \u5e76\u4e14\u5982\u679cpre&gt;0,\u5219pre = nextpre\uff0c\u4e5f\u5c31\u662f\u7ee7\u7eed\u5411\u5de6\u8df3\uff0c\u76f4\u5230\u627e\u5230\u4e00\u4e2a\u53ef\u4ee5\u6ee1\u8db3\u6761\u4ef6\u7684\u6700\u5927\u7684\u503c\uff0c\u6b64\u65f6\u8fd4\u56de\u5230\u6b65\u9aa4\u4e00\u3002</li> <li>\u5982\u679c\u90fd\u4e0d\u6ee1\u8db3\uff0c\u4e5f\u5c31\u662fpre&lt;=0 \u4e86\uff0cpre\u4e0d\u7528\u518d\u8df3\u4e86\uff0c\u5f53\u524d\u7684next[i]\u4e5f\u5c31\u6ca1\u6709\u6700\u5927\u7684\u5339\u914d\u957f\u5ea6\uff0c\u8bbe\u7f6e\u503c\u4e3a0.</li> <li>\u603b\u7ed3\u6982\u62ec\u4e3a\u4e0d\u7528\u8df3\uff0c\u8df3\u591a\u6b21\uff0c\u4ee5\u53ca\u8fb9\u754c\u5904\u7406\u7684\u60c5\u51b5\u3002</li> </ol> <p></p> <p></p> <p>\ud83d\udd14</p> <p>next[i]\u5b58\u50a8\u7684\u5c31\u662f\u6bcf\u4e00\u6b21\u5411\u524d\u8df3\u7684\u4e0b\u6807\u3002\u56e0\u4e3a\u5982\u679c\u5f53\u524d\u7684\u2018x\u2019\u548c\u2018\u524d\u2019\u4e0d\u7b49\uff0c\u5219\u4e5f\u5c31\u8bc1\u660enext[10]\u6240\u63d0\u4f9b\u7684\u6700\u957f\u5339\u914d\u524d\u540e\u7f00\u65e0\u6cd5\u4f7f\u7528\u5168\u90e8\uff0c\u53ea\u80fd\u9000\u800c\u6c42\u5176\u6b21\uff0c\u4fdd\u7559\u8fd9\u91cc\u9762\u76840-9\u7684\u6700\u957f\u524d\u7f00\u4ee5\u53ca \u540e\u4e00\u90e8\u5206\u7684\u6700\u957f\u540e\u7f00\u3002\u53c8\u56e0\u4e3a\u524d\u540e\u4e24\u4e2a\u5df2\u7ecf\u5b8c\u5168\u5339\u914d\uff0c\u5219\u53ef\u4ee5\u8f6c\u5316\u4e3a\u57280-9\u6c42\u6700\u957f\u524d\u540e\u7f00\u5339\u914d\uff0c\u4e5f\u5c31\u662fnext[x]\u3002\u8fd9\u6837\u5982\u679c\u2018\u4e0b\u2019\u548c\u2018\u524d\u2019\u76f8\u7b49\uff0c\u5219next[11]\u5c31\u5f97\u5230\u7ed3\u679c\u4e86\u3002</p> <p></p> <p></p> <p></p> <p>\u4f8b\u5b50\u5982\u4e0a\uff1a\u5728\u5927\u4e32s1\u4e2d\u4f7f\u7528\u5339\u914d\u5b50\u4e32s2\u3002</p> <ol> <li>\u5148\u83b7\u5f97s2\u7684next\u6570\u7ec4\u3002</li> <li>\u8fdb\u884c\u5339\u914d\u3002\u5982\u679c\u9047\u5230\u4e24\u4e2a\u4f4d\u7f6e\u4e0d\u5339\u914d\u7684\u6570\uff0c\u6bd4\u5982\u5982\u4e0a\u768413\u4f4d\u7f6e\u7684a\u4e0et\u3002</li> <li>\u52a0\u901f\u8981\u70b91\uff1a\u4f7f\u7528next\u6570\u7ec4</li> <li>\u56e0\u4e3anext[13] = 6,\u5219[0,6]\u5fc5\u7136\u7b49\u4e8e[7,13).</li> <li>\u56e0\u4e3a\u5339\u914d\u7684\u539f\u56e0\uff0c\u5219\u5df2\u7ecf\u8d70\u8fc7\u7684\u5b50\u4e32\u5fc5\u7136\u662f\u76f8\u7b49\uff0c\u5219s1[6,13)==s2[6,13).</li> <li>\u6240\u4ee5s1[6,13\uff09== s2[0,6\uff09</li> <li>\u52a0\u901f\u8981\u70b92\uff1a\u4e3a\u4ec0\u4e48\u53ef\u4ee5\u76f4\u63a5\u8df3</li> </ol> <p></p> <ol> <li>\u5047\u8bbes1[i,j)\u548cs2[0,k)\u5339\u914d\u5df2\u7ecf\u5339\u914d\uff0c\u5e76\u4e14s1[p,j)\u548cs2\u7684next[k]\u5339\u914d\u3002\u4e3a\u4ec0\u4e48\u4e0d\u53ef\u4ee5\u4ecep\u4e4b\u524d\u5f00\u59cb\u5339\u914d\u5462\uff1f</li> <li>\u4f7f\u7528\u53cd\u8bc1\u6cd5\uff0c\u5982\u679c\u5f00\u5934\u5728p\u4e4b\u524d\uff0c\u5219\u56e0\u4e3a\u9700\u8981\u548cs2\u53bb\u5339\u914d\uff0c\u5982\u679c\u53ef\u4ee5\u5339\u914d\uff0c\u5219\u8bc1\u660es2\u6709\u66f4\u5927\u7684\u524d\u540e\u7f00\u6700\u5927\u5339\u914d\u957f\u5ea6\uff0c\u663e\u7136\u548c\u4e8b\u5b9e\u4e0d\u7b26\u548c\u3002\u5219\u53ef\u4ee5\u76f4\u63a5\u8df3\u5230p\u4f4d\u7f6e\u3002</li> </ol> <p>\ud83d\udca1</p> <p>\u4e5f\u5c31\u662f\u4efb\u610f\u5339\u914d\u7684\u524d\u540e\u7f00\u90fd\u53ef\u4ee5\u6ee1\u8db3\u8df3\u8dc3\uff0c\u4f46\u662f\u6700\u5927\u524d\u540e\u7f00\u5339\u914d\u53ef\u4ee5\u6ee1\u8db3\u4e00\u6b21\u8df3\u8dc3\u7684\u957f\u5ea6\u6700\u5927\uff0c\u4fdd\u8bc1\u6700\u5927\u5316\u5229\u7528\u4fe1\u606f\u3002</p> <ol> <li>\u5219\u4e0b\u4e00\u6b21\u5339\u914ds1[13]\u5f00\u59cb\u5339\u914ds2[6].</li> </ol>"},{"location":"LANG/DS-leetcode/#_66","title":"\u4f8b\u9898","text":"<ol> <li>leetcode 28:\u6a21\u677f\u9898</li> <li>\u65f6\u95f4\u590d\u6742\u5ea6\uff1aO(n+m)\u3002\u66b4\u529b\u5339\u914d\u662fO(n*m)</li> </ol> Text Only<pre><code>class Solution {\n    public int strStr(String haystack, String needle) {\n        return kmp(haystack.toCharArray(),needle.toCharArray());\n    }\n    public static int kmp(char[] s1, char[] s2){\n        int m = s1.length, n = s2.length;\n        int x = 0, y = 0;\n        int[] next = nextArray(s2);\n        while(x &lt; m &amp;&amp; y &lt; n){\n            if(s1[x] == s2[y]){\n                x++;\n                y++;\n            }else{\n                if(y == 0){\n                    x++;\n                }else{\n                    y = next[y];\n                }\n            }\n        }\n        return y == n? x-y : -1;\n    }\n    public static int[] nextArray(char[] s){\n        int m = s.length;\n        if(m == 1) return new int[]{-1};\n        int[] next = new int[m];\n        next[0] = -1;\n        next[1] = 0;\n        int cur = 2, pre = 0;\n        while(cur &lt; m){\n            if(s[cur-1] == s[pre]){\n                next[cur++] = ++pre;\n            }else{\n                if(pre &gt; 0){\n                    pre = next[pre];\n                }else{\n                    next[cur++] = 0;\n                }\n            }\n        }\n        return next;\n    }\n}\n</code></pre>"},{"location":"LANG/DS-leetcode/#_67","title":"\u7b80\u5316\u7248\u672c","text":"<ol> <li>\u524d\u7f00\u51fd\u6570\u03c0</li> </ol> <p>\u03c0\u6570\u7ec4\uff1a\u03c0[i]\u8868\u793a\u5b57\u7b26\u4e32\u7b2ci\u4e2a\u524d\u7f00\u7684\u6700\u957f\u5339\u914d\u771f\u524d\u540e\u7f00\u957f\u5ea6\u3002</p> <p>KMP\u53ea\u662f\u524d\u7f00\u51fd\u6570\u7684\u5b50\u96c6\u6216\u8005\u8bf4\u662f\u4e00\u79cd\u5e94\u7528\u3002</p> <p></p> <ol> <li>\u6a21\u5f0f\u4e32\u548c\u88ab\u641c\u7d22\u4e32\u7684\u5904\u7406</li> <li>\u5c06\u6a21\u5f0f\u4e32\u548c\u641c\u7d22\u4e32\u5408\u5e76\u5728\u4e00\u8d77\uff0c\u5e76\u5bf9\u8be5\u5b57\u7b26\u4e32\u8ba1\u7b97\u524d\u7f00\u51fd\u6570\u3002</li> </ol> <p></p> <ol> <li>\u5982\u679c\u6709\u4e2a\u03c0[i]\u7b49\u4e8e\u6a21\u5f0f\u4e32\u7684\u957f\u5ea6\uff0c\u5219\u8bf4\u660e\u5339\u914d\u4e86\u6a21\u5f0f\u4e32\u3002\u800c\u6240\u5339\u914d\u7684\u4e32\u5c31\u662f[i-\u03c0+1,i];</li> </ol> <p></p> <ol> <li>\u5219\u6839\u636e\u524d\u7f00\u51fd\u6570\uff0c\u5c31\u53ef\u4ee5\u76f4\u63a5\u8ba1\u7b97\u662f\u5426\u5339\u914d\u3002\u5e76\u5f97\u5230\u76f8\u5e94\u7684\u4e0b\u6807\u3002</li> <li> <p>\u524d\u7f00\u51fd\u6570\u7684\u8ba1\u7b97</p> </li> <li> <p>\u5f53\u524d\u8ba1\u7b97\u03c0[i]\u3002</p> </li> <li>\u5219\u548ckmp\u4e2d\u8ba1\u7b97next\u6570\u7ec4\u5b8c\u5168\u4e00\u81f4\uff0c\u8fdb\u884c\u6bd4\u5bf9\uff0c\u4e0d\u540c\u5c31\u4f7f\u7528\u03c0\u6570\u7ec4\u5411\u524d\u8df3\u3002</li> </ol> <p></p> <p></p>"},{"location":"LANG/DS-leetcode/#_68","title":"\u6ed1\u52a8\u7a97\u53e3","text":""},{"location":"LANG/DS-leetcode/#_69","title":"\u539f\u7406","text":"<ol> <li>\u901a\u8fc7L\u548cR\u53cc\u6307\u9488\u6765\u63a7\u5236\u7a97\u53e3\u6ed1\u52a8\uff0c\u6709[L,R]\u4ee5\u53ca[L,R)\u4e24\u79cd\u3002</li> <li>\u5173\u952e\uff1a\u627e\u5230\u8303\u56f4\u548c\u7b54\u6848\u6307\u6807\u4e4b\u95f4\u7684\u5355\u8c03\u6027\u5173\u7cfb\uff0c\u6807\u5fd7\u6027\u5c31\u662fwhile\u64cd\u4f5c\u3002</li> <li>\u5355\u8c03\u6027\u5c31\u662f\u5f53\u53f3\u4fa7\u5f15\u5165\u6570\u5b57\u7684\u65f6\u5019\uff0c\u6b64\u65f6\u7a97\u53e3\u6ee1\u8db3\u67d0\u4e2a\u6027\u8d28(\u5e76\u4e14\u53ef\u4ee5\u8fdb\u884c\u4e0b\u4e00\u6b65\u64cd\u4f5c\uff0c\u4e5f\u5c31\u662f\u4f7f\u7528while)\u3002\u53ef\u4ee5\u901a\u8fc7\u8c03\u6574\u5de6\u4fa7\u7a97\u53e3\uff0c\u4f7f\u5f97\u7a97\u53e3\u5927\u5c0f\u8fdb\u884c\u8c03\u6574\u3002</li> <li>\u6ce8\u610fL\u548cR\u90fd\u662f\u4e0d\u56de\u9000\u7684\uff0c\u6240\u4ee5\u79f0\u4e3a\u6ed1\u52a8\u7a97\u53e3</li> <li>\u65f6\u95f4\u590d\u6742\u5ea6\uff1aO(N)\u3002\u65f6\u95f4\u590d\u6742\u5ea6\u662f\u64cd\u4f5c\u6570\u4e0e\u6570\u636e\u91cf\u7684\u5173\u7cfb\u3002while\u5faa\u73af\u4e2d\u7684sum += num[r++]\uff0c\u4ee5\u53casum -= nums[l]\u4e4b\u548c\u6700\u591a2n\u6b21\uff0c\u56e0\u4e3a\u6ed1\u52a8\u7a97\u53e3\u4e2d\u6307\u9488\u4e0d\u56de\u9000\uff0c\u904d\u5386\u4e00\u904d\u5c31\u7ed3\u675f\u4e86\u3002</li> <li>\u4e00\u822c\u6d41\u7a0b\uff1a\u5c31\u662f\u6bcf\u4e2a\u5b50\u6570\u7ec4\u5728\u5f00\u5934\u6216\u8005\u7ed3\u5c3e\u7684\u60c5\u51b5\uff0c\u5f00\u5934\u6216\u8005\u662f\u7ed3\u5c3e\u90fd\u53ef\u4ee5\u3002</li> </ol>"},{"location":"LANG/DS-leetcode/#_70","title":"\u4f8b\u9898","text":"<ol> <li>\u7d2f\u52a0\u548c\u5927\u4e8e\u7b49\u4e8etarget\u7684\u6700\u77ed\u6570\u7ec4</li> </ol> <p>\u7ed9\u5b9a\u4e00\u4e2a\u542b\u6709 n \u4e2a\u6b63\u6574\u6570\u7684\u6570\u7ec4\u548c\u4e00\u4e2a\u6b63\u6574\u6570 target \u3002\u627e\u51fa\u8be5\u6570\u7ec4\u4e2d\u6ee1\u8db3\u5176\u603b\u548c\u5927\u4e8e\u7b49\u4e8e target \u7684\u957f\u5ea6\u6700\u5c0f\u7684 \u5b50\u6570\u7ec4[numsl, numsl+1, ..., numsr-1, numsr] \uff0c\u5e76\u8fd4\u56de\u5176\u957f\u5ea6\u3002\u5982\u679c\u4e0d\u5b58\u5728\u7b26\u5408\u6761\u4ef6\u7684\u5b50\u6570\u7ec4\uff0c\u8fd4\u56de 0 \u3002nums\u4e2d\u5168\u662f\u6b63\u6570\u3002</p> <ol> <li>\u601d\u8def\uff1a\u4f7f\u7528\u6ed1\u52a8\u7a97\u53e3\u8fdb\u884c\u6d41\u91cf\u63a7\u5236</li> <li>\u6bcf\u8fdb\u6765\u4e00\u4e2a\u6570\u5b57\uff0c\u5bf9\u4e8e\u7a97\u53e3\u4e2d\u7684sum\u8fdb\u884c\u6761\u4ef6\u68c0\u67e5\uff0c\u770b\u662f\u5426\u53e6\u4e00\u4fa7\u53ef\u4ee5\u8c03\u6574\u3002</li> <li>\u5355\u8c03\u6027\uff1a\u7ef4\u62a4\u7684\u662fsum.\u56e0\u4e3a\u4e00\u4e2a\u6570\u5b57\u8fdb\u6765\u7684\u65f6\u5019\uff0csum\u5fc5\u7136\u53d8\u5927\uff0c\u5219\u53ef\u4ee5\u5c1d\u8bd5\u5c06\u53e6\u4e00\u8fb9\u8fdb\u884c\u7f29\u5c0f(\u6b64\u65f6sum\u5fc5\u7136\u51cf\u5c0f\u800c\u4e0d\u662f\u589e\u52a0)</li> <li>\u6b64\u5904\u7684\u8c03\u6574\u662f\u6307\u8ba9\u672c\u9898\u76ee\u7684\u7b26\u5408\u6761\u4ef6\u7684\u5b50\u6570\u7ec4\u6700\u5c0f\uff0c\u4e5f\u5c31\u662f\u8fdb\u884c\u7a97\u53e3\u7684\u5927\u5c0f\u8c03\u6574\u3002</li> </ol> Text Only<pre><code>public static int minSubArrayLen(int target, int[] nums) {\n    int ans = Integer.MAX_VALUE;\n    for (int l = 0, r = 0, sum = 0; r &lt; nums.length; r++) {\n        sum += nums[r];\n        while (sum - nums[l] &gt;= target) {\n            // sum : nums[l....r]\n            // \u5982\u679cl\u4f4d\u7f6e\u7684\u6570\u4ece\u7a97\u53e3\u51fa\u53bb\uff0c\u8fd8\u80fd\u7ee7\u7eed\u8fbe\u6807\uff0c\u90a3\u5c31\u51fa\u53bb\n            sum -= nums[l++];\n        }\n        //\u6b64\u5904\u8fdb\u884c\u7684\u7279\u5224\u662f\u6709\u5fc5\u8981\u7684\uff0c\u4fdd\u8bc1\u6570\u7ec4\u53ea\u6709\u6ee1\u8db3sum&gt;=target\u624d\u53ef\u4ee5\u8fdb\u884c\u66f4\u65b0\n        if (sum &gt;= target) {\n            ans = Math.min(ans, r - l + 1);\n        }\n    }\n    return ans == Integer.MAX_VALUE ? 0 : ans;\n}\n</code></pre> <ol> <li>\u65e0\u91cd\u590d\u5b57\u7b26\u7684\u6700\u957f\u5b57\u4e32</li> <li>\u601d\u8def\uff1a\u5bf9\u4e8e\u4ee5\u6bcf\u4e2a\u4f4d\u7f6e\u7ed3\u675f\u7684\u5b50\u4e32\uff0c\u8c03\u6574\u6ed1\u52a8\u7a97\u53e3\u7684\u5927\u5c0f\uff0c\u4f7f\u5f97\u7a97\u53e3\u4e2d\u7684\u5b57\u7b26\u59cb\u7ec8\u4fdd\u6301\u8981\u6c42\u7684\u6027\u8d28\uff0c\u4e5f\u5c31\u662f\u65e0\u91cd\u590d\u6027</li> <li>\u6838\u5fc3\u7684\u66f4\u65b0\u516c\u5f0f\uff1a<ol> <li>\u5982\u679c\u662ff ....abdcf\uff0c\u5219L = L\uff0c\u800c\u4e0d\u662f\u56de\u9000\uff0c\u56e0\u4e3a\u56de\u9000\u4f1a\u5bfc\u81f4\u4e4b\u524d\u7684\u8c03\u6574\u5931\u6548\uff0c\u91cd\u65b0\u5f15\u5165\u91cd\u590d\u5b57\u7b26\u3002</li> <li>\u5355\u8c03\u6027\uff1a\u7ef4\u62a4\u7684\u662f\u91cd\u590d\u6027\uff1a\u4e5f\u5c31\u662f\u5f53\u53f3\u4fa7\u5f15\u5165\u4e00\u4e2a\u5143\u7d20\u65f6\u5019\uff0c\u5de6\u4fa7\u6ed1\u52a8\u5fc5\u7136\u4f1a\u4f7f\u5f97\u5f53\u524d\u533a\u95f4\u7684\u6027\u8d28\u4e0d\u53d8(\u4e5f\u5c31\u662f\u4e0d\u4f1a\u5f15\u5165\u65b0\u91cd\u590d\u5143\u7d20\uff0c\u91cd\u590d\u6027\u53ea\u4f1a\u51cf\u5c0f)</li> <li>\u5982\u679c\u662f abfdf\uff0c\u5219L = pos[f]+1,\u9700\u8981\u8fdb\u884c\u66f4\u65b0</li> </ol> </li> </ol> Text Only<pre><code>class Solution {\n    public int lengthOfLongestSubstring(String s) {\n        char[] arr = s.toCharArray();\n        int ans = 0;\n        //\u6bcf\u79cd\u5b57\u7b26\u51fa\u73b0\u7684\u4f4d\u7f6e\uff0c\u5c06\u5b57\u7b26\u8f6c\u6362\u4e3a0-255\u7684\u6574\u6570\n        int[] last = new int[256];\n        Arrays.fill(last,-1);\n\n        for(int l=0, r=0; r&lt;arr.length; r++){\n            l = Math.max(l, last[(int)arr[r]]+1);\n            ans = Math.max(ans, r-l+1);\n            last[arr[r]] = r;\n        }\n        return ans;\n    }\n}\n</code></pre> <ol> <li>\u6700\u5c0f\u8986\u76d6\u5b57\u4e32</li> <li>\u9898\u76ee\u542b\u4e49\uff1a\u7ed9\u4f60\u4e00\u4e2a\u5b57\u7b26\u4e32 <code>&lt;span&gt;s&lt;/span&gt;</code> \u3001\u4e00\u4e2a\u5b57\u7b26\u4e32 <code>&lt;span&gt;t&lt;/span&gt;</code> \u3002\u8fd4\u56de <code>&lt;span&gt;s&lt;/span&gt;</code> \u4e2d\u6db5\u76d6 <code>&lt;span&gt;t&lt;/span&gt;</code> \u6240\u6709\u5b57\u7b26\u7684\u6700\u5c0f\u5b50\u4e32\u3002\u5982\u679c <code>&lt;span&gt;s&lt;/span&gt;</code> \u4e2d\u4e0d\u5b58\u5728\u6db5\u76d6 <code>&lt;span&gt;t&lt;/span&gt;</code> \u6240\u6709\u5b57\u7b26\u7684\u5b50\u4e32\uff0c\u5219\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32 <code>&lt;span&gt;\"\"&lt;/span&gt;</code></li> <li>\u6838\u5fc3\u601d\u8def\uff1a\u4f7f\u7528\u6ed1\u52a8\u7a97\u53e3\u3002\u5bf9\u4e8e\u4ee5\u6bcf\u4e2a\u4f4d\u7f6e\u7ed3\u675f\u7684\u5b50\u4e32\uff0c\u5728\u6ed1\u52a8\u7a97\u53e3\u4e2d\u68c0\u67e5\u662f\u5426\u6ee1\u8db3\u8986\u76d6\u7684\u6027\u8d28\u3002\u5982\u679c\u6ee1\u8db3\uff0c\u5219\u5c1d\u8bd5\u8c03\u6574\u5927\u5c0f\uff0c\u6700\u7ec8\u5f97\u5230\u6700\u5c0f\u5b57\u4e32\u3002</li> <li>\u5355\u8c03\u6027\uff1a\u7ef4\u62a4\u7684\u662f\u6db5\u76d6\u6027\uff1a\u5f53\u5de6\u4fa7\u6ed1\u52a8\u7684\u65f6\u5019\uff0c\u6db5\u76d6\u6027\u5fc5\u7136\u662f\u51cf\u5c0f\u6216\u8005\u4e0d\u53d8\u3002\u53ef\u4ee5\u4f7f\u7528while\u76f4\u5230\u6027\u8d28\u4e0d\u6ee1\u8db3\u3002</li> <li>\u5b57\u7b26\u7684\u51fa\u73b0\u6b21\u6570\uff0c\u4f7f\u7528\u6570\u7ec4\u8fdb\u884c\u54c8\u5e0c\u8868\u7684\u5b9e\u73b0\u3002\u5176\u4e2dcnts[]\u4ee3\u8868\u7684\u662ft\u4e2d\u6bcf\u79cd\u5143\u7d20\u7684\u51fa\u73b0\u6b21\u6570\u3002\u7136\u540e\u5f53\u8fdb\u884c\u8c03\u6574\u7684\u65f6\u5019\uff0c\u4f7f\u7528\u7684debt\u5c31\u662f\u6307\u7684t\u7684\u6240\u6709\u79cd\u7c7b\u7684\u5b57\u7b26\u5168\u90fd\u88ab\u6ee1\u8db3\u4e86\uff0c\u4e5f\u5c31\u662f\u4ee5\u5f53\u524d\u5b57\u7b26\u7ed3\u5c3e\u7684\u5b50\u4e32\u6ee1\u8db3\u4e86\u8986\u76d6\u7684\u6027\u8d28\u3002</li> </ol> Text Only<pre><code>class Solution {\n    public String minWindow(String str, String ttr) {\n\n        int[] cnts = new int[256];\n        char[] s = str.toCharArray();\n        char[] t = ttr.toCharArray();\n        if(s.length &lt; t.length) return \"\";\n        for(char item : t){\n            cnts[(int)item]--;\n        }\n        int len = Integer.MAX_VALUE;\n        int start = 0;\n        for(int l=0,r=0,debt=t.length; r&lt;s.length;r++){\n            if(cnts[s[r]] &lt; 0){\n                debt--;\n            }\n            cnts[s[r]]++;\n            if(debt == 0){\n                while(cnts[s[l]] &gt; 0){\n                    cnts[s[l]]--;\n                    l++;\n                }\n                if(r-l+1 &lt; len){\n                    len = r-l+1;\n                    start = l;\n                }\n            }\n        }\n        return len == Integer.MAX_VALUE ? \"\" : str.substring(start,start+len);  \n    }\n\n}\n</code></pre> <ol> <li>\u52a0\u6cb9\u7ad9\u7684\u51fa\u53d1\u70b9</li> </ol> Text Only<pre><code>class Solution {\n    public int canCompleteCircuit(int[] gas, int[] cost) {\n        int n = gas.length;\n\n        for(int l=0,r=0,sum = 0, len = 0;l&lt;n;l++){\n            while(sum &gt;= 0){\n                if(len == n){\n                    return l;\n                }\n                r = (l + len)%n;\n                len++;\n                sum += gas[r] -  cost[r];\n            }\n            len--;\n            sum -= gas[l] - cost[l];\n\n        }\n        return -1;\n    }\n}\n</code></pre> <ol> <li>leetcode1984 \u6570\u7ec4\u4e2d\u7684k\u4e2a\u5143\u7d20\u7684\u6700\u5c0f\u6781\u5dee\uff1a</li> <li>\u7ed3\u8bba\uff1a\u5982\u679c\u8981\u6c42\u4efb\u610fk\u4e2a\u5143\u7d20\u7684\u6700\u5c0f\u6781\u5dee\uff0c\u9700\u8981\u8fdb\u884c\u6392\u5e8f\uff0c\u7136\u540e\u4f7f\u7528\u76f8\u90bb\u7684k\u4e2a\u5143\u7d20\u4e00\u7ec4\uff0c\u4f7f\u7528\u6ed1\u52a8\u7a97\u53e3\u8fdb\u884c\u904d\u5386\uff0c\u7a97\u53e3\u4e2d\u5143\u7d20\u7684\u6781\u5dee\u662fnums[r]-nums[l]\u3002</li> </ol> Text Only<pre><code>class Solution {\n    public int minimumDifference(int[] nums, int k) {\n        int ans = Integer.MAX_VALUE;\n        int n = nums.length;\n        Arrays.sort(nums);\n        if(nums.length == 1){\n            return 0;\n        }\n        for(int l=0,r = k-1; r&lt;n;l++,r++){\n            ans = Math.min(ans,nums[r]- nums[l]);\n        }\n        return ans;\n    }\n}\n</code></pre> <ol> <li>leetcode1652 \u62c6\u70b8\u5f39\uff1a</li> <li>\u4f60\u6709\u4e00\u4e2a\u70b8\u5f39\u9700\u8981\u62c6\u9664\uff0c\u65f6\u95f4\u7d27\u8feb\uff01\u4f60\u7684\u60c5\u62a5\u5458\u4f1a\u7ed9\u4f60\u4e00\u4e2a\u957f\u5ea6\u4e3a <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;n&lt;/span&gt;&lt;/span&gt;</code> \u7684 \u5faa\u73af \u6570\u7ec4 <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;code&lt;/span&gt;&lt;/span&gt;</code> \u4ee5\u53ca\u4e00\u4e2a\u5bc6\u94a5 <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;k&lt;/span&gt;&lt;/span&gt;</code> \u3002</li> </ol> <p>\u4e3a\u4e86\u83b7\u5f97\u6b63\u786e\u7684\u5bc6\u7801\uff0c\u4f60\u9700\u8981\u66ff\u6362\u6389\u6bcf\u4e00\u4e2a\u6570\u5b57\u3002\u6240\u6709\u6570\u5b57\u4f1a \u540c\u65f6 \u88ab\u66ff\u6362\u3002</p> <ul> <li>\u5982\u679c <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;k &gt; 0&lt;/span&gt;&lt;/span&gt;</code> \uff0c\u5c06\u7b2c <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;i&lt;/span&gt;&lt;/span&gt;</code> \u4e2a\u6570\u5b57\u7528 \u63a5\u4e0b\u6765 <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;k&lt;/span&gt;&lt;/span&gt;</code> \u4e2a\u6570\u5b57\u4e4b\u548c\u66ff\u6362\u3002</li> <li>\u5982\u679c <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;k &lt; 0&lt;/span&gt;&lt;/span&gt;</code> \uff0c\u5c06\u7b2c <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;i&lt;/span&gt;&lt;/span&gt;</code> \u4e2a\u6570\u5b57\u7528 \u4e4b\u524d <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;k&lt;/span&gt;&lt;/span&gt;</code> \u4e2a\u6570\u5b57\u4e4b\u548c\u66ff\u6362\u3002</li> <li>\u5982\u679c <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;k == 0&lt;/span&gt;&lt;/span&gt;</code> \uff0c\u5c06\u7b2c <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;i&lt;/span&gt;&lt;/span&gt;</code> \u4e2a\u6570\u5b57\u7528 <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;0&lt;/span&gt;&lt;/span&gt;</code> \u66ff\u6362\u3002</li> </ul> <p>\u7531\u4e8e <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;code&lt;/span&gt;&lt;/span&gt;</code> \u662f\u5faa\u73af\u7684\uff0c <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;code[n-1]&lt;/span&gt;&lt;/span&gt;</code> \u4e0b\u4e00\u4e2a\u5143\u7d20\u662f <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;code[0]&lt;/span&gt;&lt;/span&gt;</code> \uff0c\u4e14 <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;code[0]&lt;/span&gt;&lt;/span&gt;</code> \u524d\u4e00\u4e2a\u5143\u7d20\u662f <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;code[n-1]&lt;/span&gt;&lt;/span&gt;</code> \u3002</p> <p>\u7ed9\u4f60 \u5faa\u73af \u6570\u7ec4 <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;code&lt;/span&gt;&lt;/span&gt;</code> \u548c\u6574\u6570\u5bc6\u94a5 <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;k&lt;/span&gt;&lt;/span&gt;</code> \uff0c\u8bf7\u4f60\u8fd4\u56de\u89e3\u5bc6\u540e\u7684\u7ed3\u679c\u6765\u62c6\u9664\u70b8\u5f39\uff01</p> <ol> <li>\u601d\u8def\uff1a\u6bcf\u4e2a\u4f4d\u7f6e\u7684\u6570i\uff0c\u5bf9\u5e94\u7684\u6ed1\u52a8\u7a97\u53e3\u662f\u5176\u540e\u9762\u6216\u8005\u524d\u9762\u7684\u5b9a\u957f\u6570\u7ec4\u3002\u548c\u52a0\u6cb9\u7ad9\u7684\u9898\u7c7b\u4f3c\uff0c\u590d\u7528sum\u3002\u540c\u65f6\u63d0\u524d\u521d\u59cb\u5316base case,\u65b9\u4fbf\u540e\u7eed\u7a97\u53e3\u6ed1\u52a8\u3002</li> </ol> Text Only<pre><code>class Solution {\n    public int[] decrypt(int[] code, int k) {\n        int n = code.length;\n        int[] ans = new int[n];\n        Arrays.fill(ans, 0);\n        if(k == 0) return ans;\n        int cnt = 0;\n        int sum = 0;\n        int l = k&gt;0 ? 1:(n+k)%n;\n        int r = k&gt;0 ? k%n:(n-1)%n;\n        for (int i = l; i &lt;=r; i++) {\n            sum += code[i];\n        }\n        for(int i=0; i&lt;n;i++){\n            ans[i] = sum;\n            sum -= code[(l++)%n];\n            sum += code[(++r)%n];\n        }\n        return ans;\n    }\n}\n</code></pre>"},{"location":"LANG/DS-leetcode/#_71","title":"\u5355\u8c03\u6808","text":""},{"location":"LANG/DS-leetcode/#_72","title":"\u539f\u7406","text":""},{"location":"LANG/DS-leetcode/#_73","title":"\u4f8b\u9898","text":"<ol> <li>\u6c42\u5de6\u53f3\u4e24\u8fb9\u6bd4\u81ea\u5df1\u5c0f\u7684\u6570\u7684\u4f4d\u7f6e</li> <li>\u9898\u76ee\uff1a</li> </ol> <p>\u7ed9\u5b9a\u4e00\u4e2a\u53ef\u80fd\u542b\u6709\u91cd\u590d\u503c\u7684\u6570\u7ec4 arr\uff0c\u627e\u5230\u6bcf\u4e00\u4e2a i \u4f4d\u7f6e\u5de6\u8fb9\u548c\u53f3\u8fb9\u79bb i \u4f4d\u7f6e\u6700\u8fd1\u4e14\u503c\u6bd4 arr[i] \u5c0f\u7684\u4f4d\u7f6e\u3002\u8fd4\u56de\u6240\u6709\u4f4d\u7f6e\u76f8\u5e94\u7684\u4fe1\u606f\u3002</p> <ol> <li>\u601d\u8def\uff1a</li> <li>\u66b4\u529b\u89e3\u6cd5\uff1a\u5bf9\u4e8e\u6bcf\u4e2a\u4f4d\u7f6e\uff0c\u904d\u5386\u5de6\u8fb9\u548c\u53f3\u8fb9\uff0c\u627e\u5230\u5bf9\u5e94\u4f4d\u7f6e\u3002\u5219\u65f6\u95f4\u590d\u6742\u5ea6O(n^2)</li> <li>\u5355\u8c03\u6808\uff1a<ol> <li>\u7531\u503c\u7684\u6027\u8d28\uff0c\u5c06\u4e0b\u6807\u5165\u6808\uff0c\u65b9\u4fbf\u8fdb\u884c\u7d22\u5f15\u3002</li> <li>\u4fdd\u6301\u6808\u4e2d\u5927\u538b\u5c0f\u7684\u6027\u8d28\uff0c\u4e5f\u5c31\u662f\u5355\u8c03\u6027\u3002</li> <li>\u5982\u679c\u4e0b\u4e00\u4e2a\u6570\u5b57\u4e0d\u6ee1\u8db3(\u8be5\u4fa7\u7684\u8981\u6c42\u88ab\u6ee1\u8db3(\u4e5f\u5c31\u662f\u5c0f\u5927\u5c0f))\uff0c\u5219\u8fdb\u884c\u5143\u7d20\u51fa\u6808\u3002</li> <li>\u6700\u540e\u5c06\u6808\u4e2d\u5269\u4f59\u7684\u6570\u7ec4\u8fdb\u884c\u6e05\u7b97</li> <li>\u65f6\u95f4\u590d\u6742\u5ea6\uff1aO(n)\uff0c\u56e0\u4e3a\u6bcf\u4e2a\u5143\u7d20\u53ea\u88ab\u64cd\u4f5c\u4e24\u6b21\uff0c\u4e5f\u5c31\u662f\u8fdb\u6808\u4e00\u6b21\uff0c\u51fa\u6808\u4e00\u6b21\u3002</li> <li>\u6b63\u786e\u6027\u8bc1\u660e\uff1a<ol> <li>\u5982\u679c\u6808\u4e2d\u8fdb\u5165\u7684\u6570\u5b57\u662fabc\uff0c\u5219a&lt;b&lt;c</li> <li>\u5bf9\u4e8eL: \u5219a\u7684L\u4e0d\u5b58\u5728\uff0cb\u7684L\u662fa,c\u7684L=b\uff0c</li> <li>\u5bf9\u4e8eR: \u5e76\u4e14abc\u6b64\u65f6\u90fd\u6ca1\u6709\u6ee1\u8db3R\u3002</li> <li>\u5982\u679c\u51fa\u73b0\u4e86\u4e0b\u4e00\u4e2a\u6570\u5b57d\uff0c\u5e76\u4e14d&lt;c\uff0c\u5219c\u7684(L,R)\u627e\u5230\uff0c\u5e76\u4e14\u6808\u4e2d\u5269\u4f59\u7684\u5143\u7d20\u7684R\u5fc5\u7136\u4e0d\u662fc\uff0c\u5e76\u4e14d\u7684(L,R)\u5fc5\u7136\u6ca1\u6709c\uff0c\u5219c\u53ef\u4ee5\u5f39\u51fa\u3002</li> </ol> </li> <li>\u91cd\u590d\u503c\u60c5\u51b5\u5904\u7406\uff1a\u5982\u679c\u6709\u91cd\u590d\u503c\uff0c\u9700\u8981\u8fdb\u884c\u4fee\u6b63\u3002\u5173\u952e\u5c31\u662f\u91cd\u590d\u503c\u60c5\u51b5\u7684\u5904\u7406\u3002\u5bf9\u4e8e\u672c\u9898\uff0c\u5c31\u662f\u5229\u7528\u540e\u6765\u7684\u91cd\u590d\u5143\u7d20\u4f5c\u6682\u65f6\u7684R\uff0c\u6700\u540e\u590d\u7528\u540e\u6765\u7684\u91cd\u590d\u5143\u7d20\u7684</li> </ol> </li> </ol> <p>\u5982\u679c\u4e3a\u975e\u91cd\u590d\u503c\uff0c\u5982\u4e0b\u5373\u53ef(\u6c42\u77e9\u5f62\u6700\u5927\u9762\u79ef):</p> Java<pre><code>    def maxArea(areas: Array[Int]): Int = {\n        // write code here\n        import scala.collection.mutable.{Stack}\n        val stk = Stack[Int]()\n        //\u5de6\u53f3\u4e24\u4fa7\u6700\u5c0f\u7684\n        val ans = Array.fill[(Int,Int)](areas.length)((-1,-1))\n\n        for(i &lt;- areas.indices){\n            val cur = areas(i)\n            while(stk.nonEmpty &amp;&amp; areas(stk.top) &gt; cur){\n                val tmp = stk.pop()\n                val l = (if(stk.isEmpty) -1 else stk.top)\n                val r = i\n                ans.update(tmp,(l,r))\n            }\n            stk.push(i)\n        }\n        while(stk.nonEmpty){\n            val tmp = stk.pop()\n            val l = (if(stk.isEmpty) -1 else stk.top)\n            val r = -1\n            ans.update(tmp,(l,r))\n        }\n        return ans.zipWithIndex.map{\n            case ((l,r),m) =&gt; {\n                val finalL = (if(l == -1) -1 else l)\n                val finalR = (if(r == -1)  areas.length else r)\n                areas(m) * (finalR-1 - (finalL+1) + 1)\n            }\n        }.max\n    }\n</code></pre> <p>\u6709\u91cd\u590d\u503c\uff0c\u5219\u9700\u8981\u4fee\u6b63\uff1a</p> Text Only<pre><code>public static void compute() {\n        //r\u4ee3\u8868\u6808\u4e2d\u7684\u5143\u7d20\u4e2a\u6570\uff0c\u4e5f\u5c31\u662f\u6808\u7684\u957f\u5ea6\n        r = 0;\n        int cur;\n        // \u904d\u5386\u9636\u6bb5\n        for (int i = 0; i &lt; n; i++) {\n            // i -&gt; arr[i]\n            while (r &gt; 0 &amp;&amp; arr[stack[r - 1]] &gt;= arr[i]) {\n                cur = stack[--r];\n                // cur\u5f53\u524d\u5f39\u51fa\u7684\u4f4d\u7f6e\uff0c\u5de6\u8fb9\u6700\u8fd1\u4e14\u5c0f\n                ans[cur][0] = r &gt; 0 ? stack[r - 1] : -1;\n                ans[cur][1] = i;\n            }\n            stack[r++] = i;\n        }\n        // \u6e05\u7b97\u9636\u6bb5\n        while (r &gt; 0) {\n            cur = stack[--r];\n            ans[cur][0] = r &gt; 0 ? stack[r - 1] : -1;\n            ans[cur][1] = -1;\n        }\n        // \u4fee\u6b63\u9636\u6bb5\n        // \u5de6\u4fa7\u7684\u7b54\u6848\u4e0d\u9700\u8981\u4fee\u6b63\u4e00\u5b9a\u662f\u6b63\u786e\u7684\uff0c\u53ea\u6709\u53f3\u4fa7\u7b54\u6848\u9700\u8981\u4fee\u6b63\n        // \u4ece\u53f3\u5f80\u5de6\u4fee\u6b63\uff0cn-1\u4f4d\u7f6e\u7684\u53f3\u4fa7\u7b54\u6848\u4e00\u5b9a\u662f-1\uff0c\u4e0d\u9700\u8981\u4fee\u6b63\n        for (int i = n - 2; i &gt;= 0; i--) {\n            if (ans[i][1] != -1 &amp;&amp; arr[ans[i][1]] == arr[i]) {\n                ans[i][1] = ans[ans[i][1]][1];\n            }\n        }\n</code></pre> <ol> <li>\u6bcf\u65e5\u6e29\u5ea6</li> </ol> Java<pre><code>public static int[] dailyTemperatures(int[] nums) {\n        int n = nums.length;\n        int[] ans = new int[n];\n        r = 0;\n        for (int i = 0, cur; i &lt; n; i++) {\n            // \u76f8\u7b49\u65f6\u5019\u7684\u5904\u7406\uff0c\u76f8\u7b49\u4e5f\u52a0\u5165\u5355\u8c03\u6808\n            while (r &gt; 0 &amp;&amp; nums[stack[r - 1]] &lt; nums[i]) {\n                cur = stack[--r];\n                ans[cur] = i - cur;\n            }\n            stack[r++] = i;\n        }\n        return ans;\n    }\n</code></pre> <ol> <li>\u5b50\u6570\u7ec4\u7684\u6700\u5c0f\u503c\u4e4b\u548c</li> <li>\u7ed9\u5b9a\u4e00\u4e2a\u6574\u6570\u6570\u7ec4 <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;arr&lt;/span&gt;&lt;/span&gt;</code>\uff0c\u627e\u5230 <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;min(b)&lt;/span&gt;&lt;/span&gt;</code> \u7684\u603b\u548c\uff0c\u5176\u4e2d <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;b&lt;/span&gt;&lt;/span&gt;</code> \u7684\u8303\u56f4\u4e3a <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;arr&lt;/span&gt;&lt;/span&gt;</code> \u7684\u6bcf\u4e2a\uff08\u8fde\u7eed\uff09\u5b50\u6570\u7ec4\u3002</li> </ol> <p>\u7531\u4e8e\u7b54\u6848\u53ef\u80fd\u5f88\u5927\uff0c\u56e0\u6b64 \u8fd4\u56de\u7b54\u6848\u6a21 <code>&lt;span class=\"color_font\"&gt;&lt;strong&gt;&lt;span&gt;10^9 + 7&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;</code> \u3002</p> <ol> <li>\u601d\u8def\uff1a</li> <li>\u91cd\u70b9\u662f\u6c42\u6700\u5c0f\u503c\uff0c\u5982\u679c\u662f\u66b4\u529b\u7684\u8bdd\u5219\u65f6\u95f4\u590d\u6742\u5ea6\u662fO(n*logn*n^2)\u3002</li> <li>\u5bf9\u4e8e\u4e00\u4e2a\u6570\u7ec4\u4e2d\u7684\u503c\uff0c\u627e\u5230\u5de6\u8fb9\u548c\u53f3\u8fb9\u6700\u8fd1\u6bd4\u5b83\u5c0f\u7684\u6570(\u5219\u8303\u56f4\u5185\u7684\u6570\u90fd\u6bd4\u4ed6\u5927)\uff0c\u5219\u5b83\u662f\u5728\u8be5\u8303\u56f4\u5185\u7684\u6240\u6709\u5305\u542b\u8be5\u5143\u7d20\u7684\u6570\u7ec4\u7684\u6700\u5c0f\u503c\u3002\u8fd9\u4e9b\u6570\u7ec4\u7684\u4e2a\u6570\u603b\u5171\u6709cnt = (cur-left)*(i-cur)\u4e2a\u3002\u5219\u8fd9\u4e2a\u90e8\u5206\u548c\u662fcnt*nums[cur]\u3002</li> <li>\u5bf9\u4e8e\u8fd9\u91cc\u7684\u91cd\u590d\u503c\uff0c\u4e0d\u7528\u8fdb\u884c\u4fee\u6b63\uff0c\u56e0\u4e3a\u540e\u9762\u91cd\u590d\u503c\u8fdb\u6808\u7684\u65f6\u5019\u81ea\u7136\u4f1acover\u8fd9\u4e2a\u60c5\u51b5\u3002</li> </ol>"},{"location":"LANG/DS-leetcode/#_74","title":"\u5355\u8c03\u961f\u5217","text":""},{"location":"LANG/DS-leetcode/#_75","title":"\u539f\u7406","text":"<ol> <li>\u6700\u5e38\u7528\u573a\u666f\uff1a\u7ef4\u62a4\u6bcf\u4e2a\u7a97\u53e3\u7684\u6700\u5927\u503c\u6216\u8005\u6700\u5c0f\u503c</li> <li>\u901a\u8fc7\u6570\u7ec4\u5b9e\u73b0\u53cc\u7aef\u961f\u5217</li> </ol>"},{"location":"LANG/DS-leetcode/#_76","title":"\u4f8b\u9898","text":"<ol> <li>\u6ed1\u52a8\u7a97\u53e3\u7684\u6700\u5927\u503c</li> <li>\u7ed9\u4f60\u4e00\u4e2a\u6574\u6570\u6570\u7ec4 <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;nums&lt;/span&gt;&lt;/span&gt;</code>\uff0c\u6709\u4e00\u4e2a\u5927\u5c0f\u4e3a <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;k&lt;/span&gt;&lt;/span&gt;</code> \u7684\u6ed1\u52a8\u7a97\u53e3\u4ece\u6570\u7ec4\u7684\u6700\u5de6\u4fa7\u79fb\u52a8\u5230\u6570\u7ec4\u7684\u6700\u53f3\u4fa7\u3002\u4f60\u53ea\u53ef\u4ee5\u770b\u5230\u5728\u6ed1\u52a8\u7a97\u53e3\u5185\u7684 <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;k&lt;/span&gt;&lt;/span&gt;</code> \u4e2a\u6570\u5b57\u3002\u6ed1\u52a8\u7a97\u53e3\u6bcf\u6b21\u53ea\u5411\u53f3\u79fb\u52a8\u4e00\u4f4d\u3002</li> </ol> <p>\u8fd4\u56de \u6ed1\u52a8\u7a97\u53e3\u4e2d\u7684\u6700\u5927\u503c \u3002</p> <ol> <li>\u601d\u8def\uff1a</li> <li>\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u7a97\u53e3\uff0c\u66f4\u65b0\u76f8\u5e94\u7684\u961f\u5217\uff0c</li> <li>\u4fdd\u8bc1\u961f\u5217\u7684\u5934\u90e8\u59cb\u7ec8\u662f\u8be5\u7a97\u53e3\u7684\u7b54\u6848\uff0c\u4f7f\u7528\u7684\u662f\u5355\u8c03\u961f\u5217\uff0c\u4f7f\u5f97\u6700\u5927\u503c\u59cb\u7ec8\u5728head\u4f4d\u7f6e(\u53ef\u4ee5\u770b\u505a\u662f\u5143\u7d20\u7684\u72b6\u6001\u7ef4\u62a4)</li> <li>\u5f53\u7a97\u53e3\u7684l\u4f4d\u7f6e\u4e0e\u961f\u5217\u5934\u90e8\u76f8\u7b49\uff0c\u7531\u4e8e\u4e0b\u4e00\u6b65l++,\u5219\u5fc5\u987b\u8981\u5c06head\u51fa\u961f\u5217\uff0c\u56e0\u4e3a\u5b83\u8fc7\u671f\u4e86\u3002</li> <li>\u65f6\u95f4\u590d\u6742\u5ea6\uff1aO(1)\uff0c\u961f\u5217\u4e2d\u6570\u5b57\u53ea\u4f1a\u8fdb\u51fa\u4e00\u6b21</li> <li>\u7531\u8be5\u6027\u8d28\u7ef4\u62a4\u7684\u961f\u5217\u5927\u5c0f\u662f&lt;=\u8fdb\u6765\u7684\u5143\u7d20\u4e2a\u6570\uff0c\u6240\u4ee5\u5982\u679c\u4e0b\u4e00\u4e2a\u8981\u8fdb\u6765\uff0c\u5c31\u5e94\u8be5\u5c06\u4e0a\u4e00\u4e2a\u5934\u90e8\u51fa\u961f\u5217</li> </ol> Text Only<pre><code>class Solution {\n    public static int MAXN = 100001;\n    public static int[] deque = new int[MAXN];\n    public static int h,t;\n    public int[] maxSlidingWindow(int[] nums, int k) {\n        int n = nums.length;\n        int[] ans = new int[n-k+1];\n        h = 0;\n        t = 0;\n        //\u521d\u59cb\u5316\u8981\u7ef4\u62a4\u7684\u961f\u5217\n        for(int i=0; i&lt;k-1; i++){\n            while(h&lt;t &amp;&amp; nums[i] &gt; nums[deque[t-1]] ){\n                t--;\n            }\n            deque[t++] = i;\n        }\n        //\u4ece\u7b2c\u4e00\u7ec4\u5f00\u59cb\u7ef4\u62a4\u961f\u5217\n        for(int l=0,r=k-1; r&lt;n;l++,r++){\n            while(h &lt; t &amp;&amp; nums[r]&gt;nums[deque[t-1]]){\n                t--;\n            }\n            deque[t++] = r;\n            ans[l] = nums[deque[h]];\n            if(deque[h] == l){\n                h++;\n            }\n        }\n        return ans;\n    }\n}\n</code></pre>"},{"location":"LANG/DS-leetcode/#_77","title":"\u5e76\u67e5\u96c6","text":"<p>\u539f\u7406\uff1a</p> <ol> <li> <p>\u5b9a\u4e49\uff1a\u5e76\u67e5\u96c6\u662f\u4e00\u79cd\u7528\u4e8e\u7ba1\u7406\u5143\u7d20\u6240\u5c5e\u96c6\u5408\u7684\u6570\u636e\u7ed3\u6784\uff0c\u5b9e\u73b0\u4e3a\u4e00\u4e2a\u68ee\u6797\uff0c\u5176\u4e2d\u6bcf\u68f5\u6811\u8868\u793a\u4e00\u4e2a\u96c6\u5408\uff0c\u6811\u4e2d\u7684\u8282\u70b9\u8868\u793a\u5bf9\u5e94\u96c6\u5408\u4e2d\u7684\u5143\u7d20\u3002\u987e\u540d\u601d\u4e49\uff0c\u5e76\u67e5\u96c6\u652f\u6301\u4e24\u79cd\u64cd\u4f5c\uff1a</p> </li> <li> <p>\u5408\u5e76\uff08Union\uff09\uff1a\u5408\u5e76\u4e24\u4e2a\u5143\u7d20\u6240\u5c5e\u96c6\u5408\uff08\u5408\u5e76\u5bf9\u5e94\u7684\u6811\uff09</p> </li> <li>\u67e5\u8be2\uff08Find\uff09\uff1a\u67e5\u8be2\u67d0\u4e2a\u5143\u7d20\u6240\u5c5e\u96c6\u5408\uff08\u67e5\u8be2\u5bf9\u5e94\u7684\u6811\u7684\u6839\u8282\u70b9\uff09\uff0c\u8fd9\u53ef\u4ee5\u7528\u4e8e\u5224\u65ad\u4e24\u4e2a\u5143\u7d20\u662f\u5426\u5c5e\u4e8e\u540c\u4e00\u96c6\u5408</li> <li>\u6b64\u5904\u6211\u4eec\u4f7f\u7528\u4e24\u4e2a\u6570\u7ec4father\u548csize\u6570\u7ec4\uff0c\u7528\u6765\u8bb0\u5f55\u6bcf\u4e2a\u5143\u7d20\u7684\u6570\u6839\u8282\u70b9\u4ee5\u53ca\u96c6\u5408\u7684\u5927\u5c0f\u3002</li> <li>\u8282\u70b9\u6240\u5728\u96c6\u5408\u5408\u5e76(Union)\uff1a\u8282\u70b9\u52a0\u5165\uff0c\u5219\u8be5\u8282\u70b9\u5bf9\u5e94\u7684father\u4f4d\u7f6e\u6539\u4e3a\u7236\u4eb2\u8282\u70b9\u7684\u4e0b\u6807\u3002\u4ee5\u540e\u67e5\u627e\u8be5\u8282\u70b9\u6240\u5728\u7684\u96c6\u5408\u5927\u5c0f\u662ffather\u8282\u70b9\u7684\u5bf9\u5e94\u7684size\u3002\u6302\u7684\u65f6\u5019\u662f\u5c0f\u7684\u96c6\u5408\u6302\u5927\u7684\u96c6\u5408\u3002</li> <li>\u67e5\u8be2\uff1a\u4e00\u76f4\u627e\u8be5\u8282\u70b9\u7684\u7236\u8282\u70b9\uff0c\u9012\u5f52\u67e5\u627e\u76f4\u5230\u6839\u8282\u70b9\u3002</li> <li>\u8def\u5f84\u538b\u7f29(\u6241\u5e73\u5316):\u5411\u4e0a\u5bfb\u627e\u7684\u8fc7\u7a0b\u4e2d\uff0c\u5982\u679c\u627e\u5230\u4e86\u6839\u8282\u70b9\uff0c\u5c31\u5c06\u8be5\u8def\u5f84\u4e0a\u7684\u6240\u6709\u8282\u70b9\u90fd\u76f4\u63a5\u6307\u5411\u8be5\u8282\u70b9\u3002</li> <li>\u7ecf\u5178\u4f18\u5316\u624b\u6bb5\uff1a</li> <li>\u6241\u5e73\u5316\uff1a\u8def\u5f84\u538b\u7f29\uff0c\u4f7f\u7528\u6808(\u8f85\u52a9\u6570\u7ec4\u6765\u8fdb\u884c\u8def\u5f84\u7684\u6536\u96c6)\u3002\u53ef\u4ee5\u4e0d\u5f3a\u5236\u6241\u5e73\u5316\uff0c\u800c\u662f\u9047\u5230\u4e00\u5b9a\u957f\u5ea6\u7684\u94fe\u5728\u8fdb\u884c\u6241\u5e73\u5316</li> <li>\u5c0f\u6302\u5927</li> <li>\u65f6\u95f4\u590d\u6742\u5ea6(\u7ed3\u8bba):\u5355\u6b21\u8c03\u7528\u5c31\u662fO(1)</li> <li>\u533a\u95f4\u5e76\u67e5\u96c6\uff1a</li> <li>\u57fa\u672c\u601d\u8def\uff1a\u5c06\u76ee\u5149\u653e\u5728\u8fb9\u4e0a\uff0c\u8fde\u63a5\u4e09\u70b9\u4e4b\u95f4\u7684\u4e24\u6761\u8fb9\uff0c\u5c31\u662f\u5c06\u8fd9\u4e24\u6761\u8fb9\u5f52\u4e3a\u540c\u4e00\u4e2a\u96c6\u5408\u4e2d\uff0c\u521d\u59cb\u96c6\u5408\u6570\u91cf\u6700\u591a\uff0c\u6bcf\u6b21\u5408\u5e76\u90fd\u4f1a\u51cf\u5c11\u3002</li> <li>\u4e00\u822c\u4e0d\u9700\u8981\u4f7f\u7528\u5c0f\u6302\u5927\u7684\u4f18\u5316\uff0c\u76f4\u63a5\u8d4b\u503cfather\u6570\u7ec4\u5c31\u53ef\u4ee5\u3002\u76f4\u63a5\u4f7f\u7528\u6839\u8282\u70b9\uff0c\u52a0\u901f\u64cd\u4f5c\u3002</li> </ol> Text Only<pre><code>class Solution {\n    public static int MAXN = 200010;\n    public static int[] father = new int[MAXN];\n    public static int[] size = new int[MAXN];\n    public static int[] stack = new int[MAXN];\n    public static int r;\n    public int[] shortestDistanceAfterQueries(int n, int[][] queries) {\n        build(n);\n        int[] ans = new int[queries.length];\n        int cnt = n-1;\n        for(int q=0; q&lt;queries.length;q++){\n            //[0,2] -&gt; [0,1],[1,2]\n            int l = queries[q][0],r = queries[q][1]-1;\n            int fr = find(r);\n            // \u5c06\u533a\u95f4[l,r-1]\u4e0a\u6240\u6709\u5143\u7d20\u6302\u5230r\u8282\u70b9\u4e0b\u9762\uff0c\u6210\u4e3a\u4e00\u4e2a\u8fde\u901a\u5757\n            for(int i=find(l);i&lt;r;i = find(i+1)){\n                father[i] = fr;\n                cnt--;\n            }\n            ans[q] = cnt;\n        }\n        return ans;\n\n    }\n    public static void build(int n) {\n\n        for (int i = 0; i &lt; n; i++) {\n            father[i] = i;\n            size[i] = 1;\n        }\n    }\n\n    public static int find(int i) {\n        int size = 0;\n        while (i != father[i]) {\n            stack[size++] = i;\n            i = father[i];\n        }\n        while (size &gt; 0) {\n            father[stack[--size]] = i;\n        }\n        return i;\n    }\n\n    public static boolean isSameSet(int x, int y) {\n        return find(x) == find(y);\n    }\n}\n</code></pre> <p>\u4f8b\u9898\uff1a</p> <ol> <li>\u677f\u5b50\u9898\uff1a</li> </ol> Text Only<pre><code>object Solution {\n  val MAXN = 100007\n  val father: Array[Int] = Array.fill(MAXN)(-1)\n  val size: Array[Int] = Array.fill(MAXN)(-1)\n  def countPairs(n: Int, edges: Array[Array[Int]]): Long = {\n    build(n)\n    for(e &lt;- edges){\n      union(e(0), e(1))\n    }\n    val fIndex=  (for(i &lt;- 0 until n) yield find(i)).distinct\n    var cnt = 0L\n    for(i &lt;- fIndex){\n      cnt += size(i).toLong*(size(i)-1)/2\n    }\n    n.toLong*(n-1)/2 - cnt\n  }\n  def build(n: Int): Unit ={\n    for(i &lt;- 0 until n){\n      father(i) = i\n      size(i) = 1\n    }\n  }\n  def find(x: Int): Int = {\n    if(father(x) == x) return x\n    father(x) = find(father(x))\n    father(x)\n  }\n  def union(x: Int, y: Int): Unit = {\n    val fx = find(x)\n    val fy = find(y)\n    if(fx == fy) return\n    else{\n      if(size(fx) &gt;= size(fy)){\n        size(fx) += size(fy)\n        father(fy) = fx\n      }else{\n        size(fy) += size(fx)\n        father(fx) = fy\n      }\n    }\n  }\n  def isSameSet(x: Int, y: Int):Boolean = {find(x) == find(y)}\n}\n</code></pre> Text Only<pre><code>import java.util.Scanner;\nimport java.io.*;\n\n// \u6ce8\u610f\u7c7b\u540d\u5fc5\u987b\u4e3a Main, \u4e0d\u8981\u6709\u4efb\u4f55 package xxx \u4fe1\u606f\npublic class Main {\n    public static int MAXN = 1000001;\n    public static int[] father = new int[MAXN];\n    public static int[] size = new int[MAXN];\n    public static int[] stk = new int[MAXN];\n    public static int r;\n    public static int n;\n    public static void main(String[] args) throws IOException {\n        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));\n        StreamTokenizer in = new StreamTokenizer(br);\n        PrintWriter out = new PrintWriter(new OutputStreamWriter(System.out));\n        while (in.nextToken() != StreamTokenizer.TT_EOF) {\n            n = (int) in.nval;\n            build();\n            in.nextToken();\n            int m = (int) in.nval;\n            for (int i = 0; i &lt; m; i++) {\n                in.nextToken();\n                int op = (int) in.nval;\n                in.nextToken();\n                int x = (int) in.nval;\n                in.nextToken();\n                int y = (int) in.nval;\n                if (op == 1) {\n                    out.println(isSameSet(x, y) ? \"Yes\" : \"No\");\n                } else {\n                    union(x, y);\n                }\n            }\n        }\n        out.flush();\n        out.close();\n        br.close();\n    }\n    public static void build(){\n        //\n        for(int i=0;i&lt;n; i++){\n            father[i] = i;\n            size[i] = 1;\n        }\n    }\n    public static int find(int x){\n        r = 0;\n        while(x != father[x]){\n            stk[r++] = father[x];\n            x = father[x];\n        }\n        while(r &gt; 0){\n            r--;\n            father[stk[r]] = x;\n        }\n        return x;\n    }\n    public static boolean isSameSet(int x, int y){\n        return find(x) == find(y) ? true : false;\n    }\n    public static void union(int x, int y){\n        int fx = find(x);\n        int fy = find(y);\n        if(fx == fy){\n            return;\n        }else{\n            if (size[fx] &gt;= size[fy]) {\n                size[fx] += size[fy];\n                father[fy] = fx;\n            } else {\n                size[fy] += size[fx];\n                father[fx] = fy;\n            }\n        }\n    }\n}\n</code></pre> <ol> <li>leetcode 1971\u5bfb\u627e\u56fe\u4e2d\u662f\u5426\u5b58\u5728\u8def\u5f84</li> <li>\u8fde\u901a\u7684\u56fe\u5728\u4e00\u4e2a\u96c6\u5408\u4e2d\uff0c\u53ef\u4ee5\u88ab\u67e5\u627e\u5230\u3002\u4f7f\u7528\u8fd9\u4e2a\u6027\u8d28\uff0c\u8fdb\u884c\u67e5\u627e</li> </ol> Text Only<pre><code>class Solution {\n    public static int MAXN = 200010;\n    public static int[] father = new int[MAXN];\n    public static int[] size = new int[MAXN];\n    public static int[] stack = new int[MAXN];\n    public static int r;\n    public boolean validPath(int n, int[][] edges, int source, int destination){ {\n        build(n);\n        for(int i=0;i&lt;edges.length;i++){\n            union(edges[i][0], edges[i][1]);\n        }\n        return find(source) == find(destination);\n    }\n    public static void build(int n) {\n\n        for (int i = 0; i &lt; n; i++) {\n            father[i] = i;\n            size[i] = 1;\n        }\n    }\n\n    public static int find(int i) {\n        int size = 0;\n        while (i != father[i]) {\n            stack[size++] = i;\n            i = father[i];\n        }\n        while (size &gt; 0) {\n            father[stack[--size]] = i;\n        }\n        return i;\n    }\n\n    public static boolean isSameSet(int x, int y) {\n        return find(x) == find(y);\n    }\n\n    public static void union(int x, int y) {\n        int fx = find(x);\n        int fy = find(y);\n        if (fx != fy) {\n            if (size[fx] &gt;= size[fy]) {\n                size[fx] += size[fy];\n                father[fy] = fx;\n            } else {\n                size[fy] += size[fx];\n                father[fx] = fy;\n            }\n        }\n    }\n}\n</code></pre>"},{"location":"LANG/DS-leetcode/#_78","title":"\u56fe\u8bba","text":""},{"location":"LANG/DS-leetcode/#_79","title":"\u5efa\u56fe","text":"<ol> <li>\u65b9\u5f0f\u67093\u79cd\uff1a\u90bb\u63a5\u77e9\u9635\uff0c\u90bb\u63a5\u8868\uff0c\u94fe\u5f0f\u524d\u5411\u661f</li> <li>\u4e00\u822c\u4ece\u6709\u5411\u56fe\u5f00\u59cb\uff0c\u56e0\u4e3a\u65e0\u5411\u56fe\u662f\u53cc\u5411\u7684\u5b9e\u73b0\u3002</li> <li>\u4e00\u822c\u4f7f\u7528\u8fb9\u7684\u5e8f\u53f7\u4ece1\u5f00\u59cb:1,2,3,4....\u3002\u529b\u6263\u4e0a\u70b9\u7684\u7f16\u53f7\u662f\u4ece0\u5f00\u59cb\uff0c\u6ce8\u610f\u5ba1\u9898</li> </ol>"},{"location":"LANG/DS-leetcode/#_80","title":"\u90bb\u63a5\u77e9\u9635","text":"<ol> <li>\u539f\u7406</li> <li>\u4e0b\u56fe\u662f\u6709\u5411\u56fe\u4ee5\u53ca\u90bb\u63a5\u77e9\u9635\uff0c\u5982\u679c\u662f\u65e0\u5411\u56fe\u5219\u662f\u5173\u4e8e\u5bf9\u89d2\u7ebf\u5bf9\u79f0\u7684\u77e9\u9635</li> <li>\u5982\u679c\u662f\u5e26\u6743\u56fe\uff0c\u5219\u77e9\u9635\u5bf9\u5e94\u4f4d\u7f6e\u7684\u6570\u5b57\u662fw\u6743\u503c</li> <li>\u5982\u679c\u6ca1\u6709\u94fe\u63a5\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u4e3a0\u6216\u8005\u6b63\u65e0\u7a77(\u5982\u679c\u51fa\u73b0\u6743\u503c\u4e3a0\u7684\u5c31\u9700\u8981\u4f7f\u7528\u6b63\u65e0\u7a77)</li> <li>\u4f7f\u7528\u573a\u666f\uff1a\u6570\u636e\u91cf\u8f83\u5c0f\u7684\u65f6\u5019</li> </ol>"},{"location":"LANG/DS-leetcode/#_81","title":"\u90bb\u63a5\u8868","text":"<ol> <li>\u539f\u7406\uff1a</li> <li>\u4f7f\u7528List&gt;\u7684\u5f62\u5f0f\u3002\u90fd\u662f\u52a8\u6001\u5217\u8868\u3002<ol> <li>\u5982\u679c\u662f\u65e0\u6743\u56fe\uff1a\u5219\u662f\u6570\u7ec4\u957f\u5ea6\u4e3a1\u3002\u5982\u679c\u662f\u6709\u6743\u56fe\uff0c\u5c31\u662f\u4e5f\u5c31\u662f\u6bcf\u6b21\u5b58\u5165\u7684\u90fd\u662f\u4e00\u4e2a\u5c0f\u6570\u7ec4\uff0c\u5305\u542b\u8282\u70b9\u4ee5\u53ca\u8fde\u63a5\u7684\u6743\u503c\uff0c\u6570\u7ec4\u957f\u5ea6\u4e3a2\u3002</li> </ol> <li>\u4f7f\u7528\u573a\u666f\uff1a\u4e00\u822c\u60c5\u51b5\u5b8c\u5168\u8db3\u591f\u4e86</li> <li>\u65e0\u6743\u56fe(\u5de6)\u4ee5\u53ca\u6709\u6743\u56fe(\u53f3)</li>"},{"location":"LANG/DS-leetcode/#_82","title":"\u94fe\u5f0f\u524d\u5411\u661f","text":"<ol> <li>\u4e3a\u4e86\u4f7f\u7528\u9759\u6001\u6570\u7ec4\u8fdb\u884c\u7a7a\u95f4\u7684\u4f18\u5316\uff0c\u800c\u4e0d\u662f\u4f7f\u7528\u52a8\u6001\u7ed3\u6784</li> <li>\u5b9e\u5728\u56fa\u5b9a\u6570\u7ec4\u4e0a\u5b9e\u73b0\u4e86\u90bb\u63a5\u8868</li> <li>\u4f8b\u5b50\uff1a</li> <li>\u5047\u8bben=4\uff0cm=6,\u4e5f\u5c31\u662f4\u4e2a\u70b9\uff0c6\u6761\u8fb9\u7684\u6709\u5411\u56fe</li> <li>head\u662f\u4e00\u4e2a\u957f\u5ea6\u4e3an+1\u7684\u4e00\u7ef4\u6570\u7ec4\uff0cindex\u4ee3\u8868\u7684\u662f\u8282\u70b9\u53f7\uff0cvalue\u662f\u5934\u8fb9\u53f7</li> <li>next\u6570\u7ec4\uff0c\u957f\u5ea6\u53d6\u51b3\u4e8e\u8fb9\u7684\u89c4\u6a21\u3002index\u662f\u8fb9\u7684\u7f16\u53f7\uff0cvalue\u662f\u4e0b\u4e00\u6761\u8fb9\u7684\u7f16\u53f7</li> <li>to\u6570\u7ec4\uff0cindex\u4ee3\u8868\u8fb9\u7684\u7f16\u53f7\uff0cvalue\u4ee3\u8868\u53bb\u5f80\u7684\u70b9</li> <li>int cnt =1\u3002\u7528\u6765\u8bb0\u5f55\u8fb9\u7684\u7f16\u53f7\u7684\u53d8\u91cf</li> <li>\u5982\u679c\u662f\u5e26\u6743\u503c\u7684\u56fe\uff0c\u5219\u518d\u52a0\u4e00\u4e2aw\u6570\u7ec4\uff0cindex\u662f\u8fb9\u7684\u7f16\u53f7\uff0cvalue\u662f\u6743\u503c</li> </ol> Text Only<pre><code>public class Code01_CreateGraph {\n\n    // \u70b9\u7684\u6700\u5927\u6570\u91cf\n    public static int MAXN = 11;\n\n    // \u8fb9\u7684\u6700\u5927\u6570\u91cf\n    // \u53ea\u6709\u94fe\u5f0f\u524d\u5411\u661f\u65b9\u5f0f\u5efa\u56fe\u9700\u8981\u8fd9\u4e2a\u6570\u91cf\n    // \u6ce8\u610f\u5982\u679c\u65e0\u5411\u56fe\u7684\u6700\u5927\u6570\u91cf\u662fm\u6761\u8fb9\uff0c\u6570\u91cf\u8981\u51c6\u5907m*2\n    // \u56e0\u4e3a\u4e00\u6761\u65e0\u5411\u8fb9\u8981\u52a0\u4e24\u6761\u6709\u5411\u8fb9\n    public static int MAXM = 21;\n\n    // \u90bb\u63a5\u77e9\u9635\u65b9\u5f0f\u5efa\u56fe\n    public static int[][] graph1 = new int[MAXN][MAXN];\n\n    // \u90bb\u63a5\u8868\u65b9\u5f0f\u5efa\u56fe\n    // public static ArrayList&lt;ArrayList&lt;Integer&gt;&gt; graph2 = new ArrayList&lt;&gt;();\n    public static ArrayList&lt;ArrayList&lt;int[]&gt;&gt; graph2 = new ArrayList&lt;&gt;();\n\n    // \u94fe\u5f0f\u524d\u5411\u661f\u65b9\u5f0f\u5efa\u56fe\n    public static int[] head = new int[MAXN];\n\n    public static int[] next = new int[MAXM];\n\n    public static int[] to = new int[MAXM];\n\n    // \u5982\u679c\u8fb9\u6709\u6743\u91cd\uff0c\u90a3\u4e48\u9700\u8981\u8fd9\u4e2a\u6570\u7ec4\n    public static int[] weight = new int[MAXM];\n\n    public static int cnt;\n\n    public static void build(int n) {\n        // \u90bb\u63a5\u77e9\u9635\u6e05\u7a7a\n        for (int i = 1; i &lt;= n; i++) {\n            for (int j = 1; j &lt;= n; j++) {\n                graph1[i][j] = 0;\n            }\n        }\n        // \u90bb\u63a5\u8868\u6e05\u7a7a\u548c\u51c6\u5907\n        graph2.clear();\n        // \u4e0b\u6807\u9700\u8981\u652f\u63011~n\uff0c\u6240\u4ee5\u52a0\u5165n+1\u4e2a\u5217\u8868\uff0c0\u4e0b\u6807\u51c6\u5907\u4f46\u4e0d\u7528\n        for (int i = 0; i &lt;= n; i++) {\n            graph2.add(new ArrayList&lt;&gt;());\n        }\n        // \u94fe\u5f0f\u524d\u5411\u661f\u6e05\u7a7a\n        cnt = 1;\n        Arrays.fill(head, 1, n + 1, 0);\n    }\n\n    // \u94fe\u5f0f\u524d\u5411\u661f\u52a0\u8fb9\n    public static void addEdge(int u, int v, int w) {\n        // u -&gt; v , \u8fb9\u6743\u91cd\u662fw\n        //\u53d8\u66f4\u987a\u5e8f\u5012\u8fc7\u6765\uff0c\u4f9d\u6b21\u662fto,next,head\n        to[cnt] = v;\n        next[cnt] = head[u];\n        head[u] = cnt++;\n    }\n\n    // \u4e09\u79cd\u65b9\u5f0f\u5efa\u7acb\u6709\u5411\u56fe\u5e26\u6743\u56fe\n    public static void directGraph(int[][] edges) {\n        // \u90bb\u63a5\u77e9\u9635\u5efa\u56fe\n        for (int[] edge : edges) {\n            graph1[edge[0]][edge[1]] = edge[2];\n        }\n        // \u90bb\u63a5\u8868\u5efa\u56fe\n        for (int[] edge : edges) {\n            // graph2.get(edge[0]).add(edge[1]);\n            graph2.get(edge[0]).add(new int[] { edge[1], edge[2] });\n        }\n        // \u94fe\u5f0f\u524d\u5411\u661f\u5efa\u56fe\n        for (int[] edge : edges) {\n            addEdge(edge[0], edge[1], edge[2]);\n        }\n    }\n\n    // \u4e09\u79cd\u65b9\u5f0f\u5efa\u7acb\u65e0\u5411\u56fe\u5e26\u6743\u56fe\n    public static void undirectGraph(int[][] edges) {\n        // \u90bb\u63a5\u77e9\u9635\u5efa\u56fe\n        for (int[] edge : edges) {\n            graph1[edge[0]][edge[1]] = edge[2];\n            graph1[edge[1]][edge[0]] = edge[2];\n        }\n        // \u90bb\u63a5\u8868\u5efa\u56fe\n        for (int[] edge : edges) {\n            // graph2.get(edge[0]).add(edge[1]);\n            // graph2.get(edge[1]).add(edge[0]);\n            graph2.get(edge[0]).add(new int[] { edge[1], edge[2] });\n            graph2.get(edge[1]).add(new int[] { edge[0], edge[2] });\n        }\n        // \u94fe\u5f0f\u524d\u5411\u661f\u5efa\u56fe\n        for (int[] edge : edges) {\n            addEdge(edge[0], edge[1], edge[2]);\n            addEdge(edge[1], edge[0], edge[2]);\n        }\n    }\n\n    public static void traversal(int n) {\n        System.out.println(\"\u90bb\u63a5\u77e9\u9635\u904d\u5386 :\");\n        for (int i = 1; i &lt;= n; i++) {\n            for (int j = 1; j &lt;= n; j++) {\n                System.out.print(graph1[i][j] + \" \");\n            }\n            System.out.println();\n        }\n        System.out.println(\"\u90bb\u63a5\u8868\u904d\u5386 :\");\n        for (int i = 1; i &lt;= n; i++) {\n            System.out.print(i + \"(\u90bb\u5c45\u3001\u8fb9\u6743) : \");\n            for (int[] edge : graph2.get(i)) {\n                System.out.print(\"(\" + edge[0] + \",\" + edge[1] + \") \");\n            }\n            System.out.println();\n        }\n        System.out.println(\"\u94fe\u5f0f\u524d\u5411\u661f :\");\n        for (int i = 1; i &lt;= n; i++) {\n            System.out.print(i + \"(\u90bb\u5c45\u3001\u8fb9\u6743) : \");\n            // \u6ce8\u610f\u8fd9\u4e2afor\u5faa\u73af\uff0c\u94fe\u5f0f\u524d\u5411\u661f\u7684\u65b9\u5f0f\u904d\u5386\n            for (int ei = head[i]; ei &gt; 0; ei = next[ei]) {\n                System.out.print(\"(\" + to[ei] + \",\" + weight[ei] + \") \");\n            }\n            System.out.println();\n        }\n    }\n</code></pre>"},{"location":"LANG/DS-leetcode/#_83","title":"\u62d3\u6251\u6392\u5e8f","text":"<ol> <li>\u8981\u6c42\uff1a\u62d3\u6251\u6392\u5e8f\u7684\u76ee\u6807\u662f\u5c06\u6240\u6709\u8282\u70b9\u6392\u5e8f\uff0c\u4f7f\u5f97\u6392\u5728\u524d\u9762\u7684\u8282\u70b9\u4e0d\u80fd\u4f9d\u8d56\u4e8e\u6392\u5728\u540e\u9762\u7684\u8282\u70b9</li> <li>\u4f7f\u7528\u8981\u6c42\uff1a\u6709\u5411\u65e0\u73af\u56fe(DAG)\uff0c\u65e0\u5411\u56fe\u4e0d\u53ef\u4ee5\uff0c\u56e0\u4e3a\u65e0\u5411\u56fe\u5929\u7136\u5e26\u73af</li> <li>\u5b9e\u9645\u573a\u666f\uff1a\u5de5\u4f5c\u6d41\u5b89\u6392\uff0c\u7f16\u8bd1\u7684\u8fc7\u7a0b</li> <li> <p>\u524d\u7f6e\u6982\u5ff5\uff1a</p> </li> <li> <p>\u5165\u5ea6\uff1a\u6709\u591a\u5c11\u8282\u70b9\u6307\u5411\u8be5\u8282\u70b9</p> </li> <li>\u51fa\u5ea6\uff1a\u8be5\u8282\u70b9\u6307\u5411\u591a\u5c11\u4e2a\u8282\u70b9</li> <li>\u8fc7\u7a0b(\u5165\u5ea6\u5220\u9664\u6cd5)\uff1a</li> <li>\u627e\u5230\u4e00\u4e2a\u5165\u5ea6\u4e3a0\u7684\u70b9(\u56e0\u4e3a\u5165\u5ea6\u4e3a0\u53ef\u80fd\u4e0d\u6b62\u4e00\u4e2a\uff0c\u5b64\u7acb\u7684\u70b9\u4e5f\u662f\u5165\u5ea6\u4e3a0)</li> <li>\u6d88\u9664\u6389\u8be5\u70b9\u5bf9\u5176\u4ed6\u8282\u70b9\u7684\u5f71\u54cd(\u5165\u5ea6\u5220\u9664\u6cd5)</li> <li>\u91cd\u590da,b\u6b65\u9aa4</li> <li>\u6574\u4e2a\u6b65\u9aa4\u4f1a\u5220\u9664\u6240\u6709\u70b9\uff0c\u5982\u679c\u5220\u9664\u7684\u4e2a\u6570\u548c\u603b\u7ed3\u70b9\u4e2a\u6570\u4e0d\u540c\uff0c\u5219\u51fa\u73b0\u4e86\u73af(\u53ef\u4ee5\u7528\u4e8e\u5224\u65ad\u662f\u5426\u6709\u73af)</li> <li>\u65f6\u95f4\u590d\u6742\u5ea6\uff1aO(V+E)</li> <li>\u4f8b\u9898leetcode210\uff1a</li> <li>\u8981\u6ce8\u610f\u9898\u76ee\u6240\u7ed9\u7684\u8fb9\u662f\u4ece0-n-1\u3002</li> <li>\u5982\u679c\u4f7f\u7528\u94fe\u5f0f\u524d\u5411\u661f\u5efa\u56fe\uff0c\u53ef\u4ee5\u5c06\u9759\u6001\u6570\u7ec4\u7684\u521d\u59cb\u72b6\u6001\u5168\u90e8\u8bbe\u7f6e\u4e3a-1\uff0c\u9632\u6b62\u548c0\u6df7\u6742\u3002\u5728\u904d\u5386\u7684\u65f6\u5019\u9700\u8981\u6ce8\u610f\u7ec8\u6b62\u6761\u4ef6\u53d8\u4e3aei&gt;=0\u5373\u53ef\uff0c\u800c\u4e0d\u662f&gt;0\u3002</li> <li>\u5982\u679c\u8981\u5b57\u5178\u5e8f\u6700\u5c0f\u7684\u7ed3\u679c\uff0c\u5219\u5c06\u7ef4\u62a4\u7684\u961f\u5217\u6362\u6210\u5c0f\u6839\u5806\u5c31\u53ef\u4ee5\u3002</li> </ol> Text Only<pre><code>#\u4f7f\u7528\u90bb\u63a5\u8868\u5b58\u50a8\nclass Solution {\n    //\u6ce8\u610f[a,b]\u548c[b.a]\u7684\u533a\u522b\n    public int[] findOrder(int numCourses, int[][] prerequisites) {\n        List&lt;List&lt;Integer&gt;&gt; graph = new ArrayList&lt;&gt;();\n        int n = numCourses;\n        //\u70b9\u4ece0\u5f00\u59cb\n        for(int i=0;i&lt;n;i++){\n            graph.add(new ArrayList&lt;&gt;());\n        }\n        int[] indegree = new int[n];\n        for(int[] edge : prerequisites){\n            graph.get(edge[1]).add(edge[0]);\n            indegree[edge[0]]++;\n        }\n        int[] queue = new int[n];\n        int l = 0, r = 0;\n        for(int i=0; i&lt;n;i++){\n            if(indegree[i] == 0){\n                queue[r++] = i;\n            }\n        }\n        int cnt = 0;\n        while(l&lt;r){\n            int cur = queue[l++];\n            cnt++;\n            for(int next : graph.get(cur)){\n                indegree[next]--;\n                if(indegree[next] == 0){\n                    queue[r++] = next;\n                }\n            }\n        }\n\n        return cnt == n? queue : new int[0];\n    }\n}\n#\u4f7f\u7528\u94fe\u5f0f\u524d\u5411\u661f\u5b58\u50a8\nclass Solution {\n    public static int MAXN = 2001;\n    public static int[] head = new int[MAXN];\n    public static int[] next = new int[MAXN*2];\n    public static int[] to = new int[MAXN*2];\n    public static int cnt;\n    public int[] findOrder(int numCourses, int[][] prerequisites) {\n        int n = numCourses;\n        int[] queue = new int[n];\n        int[] indegree = new int[n];\n        int l = 0, r = 0;\n        bulid(n);\n        for(int[] edge : prerequisites){\n            addEdge(edge[1], edge[0]);\n            indegree[edge[0]]++;\n        }\n        l = 0;\n        r = 0;\n        for(int i=0; i&lt;n; i++){\n            if(indegree[i] == 0){\n                queue[r++] = i;\n            }\n        }\n        int len = 0;\n        while(l&lt;r){\n            int cur = queue[l++];\n            len++;\n            for(int ei = head[cur]; ei &gt;= 0; ei = next[ei]){\n                indegree[to[ei]]--;\n                if(indegree[to[ei]] == 0){\n                    queue[r++] = to[ei];\n                }\n            }\n        }\n        return len == n? queue : new int[0];\n    }\n    public static void bulid(int n){\n        cnt = 0;\n        Arrays.fill(head, -1);\n        Arrays.fill(next,-1);\n        Arrays.fill(to, -1);\n    }\n    public static void addEdge(int u, int v){\n        to[cnt] = v;\n        next[cnt] = head[u];\n        head[u] = cnt++;\n    }\n}\n</code></pre>"},{"location":"LANG/DS-leetcode/#_84","title":"\u6d2a\u6c34\u586b\u5145","text":"<p>\u539f\u7406\uff1a\u7c7b\u4f3c\u4e8e\u6d2a\u6c34\u8513\u5ef6\u7684\u8fc7\u7a0b\uff0c\u7528\u4e8e\u7f51\u683c\u641c\u7d22\u3002\u901a\u8fc7\u8bbe\u7f6e\u8def\u5f84\u4fe1\u606f\uff0c\u7528\u4e8e\u7edf\u8ba1\u6216\u8005\u526a\u679d\u3002\u770b\u4f3c\u66b4\u529b\u9012\u5f52\uff0c\u5176\u5b9e\u65f6\u95f4\u590d\u6742\u5ea6\u5f88\u597d\u3002</p> <ol> <li>leetcode 200\u5c9b\u5c7f\u6570\u91cf</li> </ol> <p>\u7ed9\u4f60\u4e00\u4e2a\u7531 <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;'1'&lt;/span&gt;&lt;/span&gt;</code>\uff08\u9646\u5730\uff09\u548c <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;'0'&lt;/span&gt;&lt;/span&gt;</code>\uff08\u6c34\uff09\u7ec4\u6210\u7684\u7684\u4e8c\u7ef4\u7f51\u683c\uff0c\u8bf7\u4f60\u8ba1\u7b97\u7f51\u683c\u4e2d\u5c9b\u5c7f\u7684\u6570\u91cf\u3002</p> <p>\u5c9b\u5c7f\u603b\u662f\u88ab\u6c34\u5305\u56f4\uff0c\u5e76\u4e14\u6bcf\u5ea7\u5c9b\u5c7f\u53ea\u80fd\u7531\u6c34\u5e73\u65b9\u5411\u548c/\u6216\u7ad6\u76f4\u65b9\u5411\u4e0a\u76f8\u90bb\u7684\u9646\u5730\u8fde\u63a5\u5f62\u6210\u3002</p> <ol> <li>\u601d\u8def\uff1a\u4f7f\u7528\u6d2a\u6c34\u586b\u5145\uff0c\u611f\u67d3\u8fc7\u7a0b\u5c31\u662fdfs\u3002\u4ece\u5de6\u5f80\u53f3\uff0c\u4ece\u4e0a\u5f80\u4e0b\uff0c\u8fdb\u884c\u68c0\u67e5\u3002\u53d1\u73b0\u4e00\u4e2a1\uff0c\u5c31\u628a\u8fd9\u4e00\u7247\u7684\u4f4d\u7f6e\u5168\u90e8\u8513\u5ef6\u4e3a2\uff0c\u76f8\u5f53\u4e8e\u90fd\u904d\u5386\u4e86\uff0c\u91cd\u590d\u8be5\u8fc7\u7a0b\u3002\u4e0d\u7528\u64a4\u9500\u4fee\u6539\u4fe1\u606f\uff0c\u56e0\u4e3a\u5c31\u662f\u5229\u7528\u4fee\u6539\u7684\u526f\u4f5c\u7528\u3002</li> <li>\u65f6\u95f4\u590d\u6742\u5ea6\uff1aO(m*n)\uff0c\u5e76\u4e14\u662f\u6700\u4f18\u89e3\u3002\u6bcf\u4e2a\u4f4d\u7f6e\u6700\u591a\u88ab\u8bbf\u95ee4\u6b21\uff0c\u5e76\u4e14\u4fee\u6539\u7684\u64cd\u4f5c\u53ea\u7528\u8bbf\u95ee1\u6b21\uff0c\u4ee3\u4ef7\u662fO(1)\u7684\u3002</li> </ol> Text Only<pre><code>class Solution {\n    public static int[] move = new int[]{-1,0,1,0,-1};\n    public int numIslands(char[][] grid) {\n        int cnt = 0;\n        int m = grid.length;\n        int n = grid[0].length;\n        for(int i=0; i&lt;m;i++){\n            for(int j=0; j&lt;n;j++){\n                if(grid[i][j] == '1') cnt++;\n                dfs(grid, i, j);\n            }\n        }  \n        return cnt;  \n    }\n    public static void dfs(char[][] grid, int i, int j){\n        if(i&lt;0 ||i&gt;=grid.length || j&lt;0 || j &gt;= grid[0].length || grid[i][j] != '1'){\n            return;\n        }\n        grid[i][j] = '0';\n        for(int k=0; k&lt;4;k++){\n            int nx = i + move[k];\n            int ny = j + move[k+1];\n            dfs(grid,nx,ny);\n        }\n    }\n}\n</code></pre> <ol> <li>leetcode  130 \u88ab\u56f4\u7ed5\u7684\u533a\u57df</li> <li>\u601d\u8def\uff1a\u5148\u5bfb\u627e\u8fb9\u7f18\u7684\u8054\u901a\u533a\u57df\uff0c\u63d0\u524d\u6807\u8bb0\u533a\u522b\u5f00\u6765\u3002\u7136\u540e\u53ef\u4ee5\u5c06\u4e2d\u95f4\u7684\u95ed\u5408\u533a\u57df\u8fdb\u884c\u4fee\u6539\uff0c\u6700\u540e\u5c06\u8fb9\u7f18\u533a\u57df\u6062\u590d\u5373\u53ef\u3002</li> <li>\u65f6\u95f4\u590d\u6742\u5ea6O(m*n)</li> </ol> Text Only<pre><code>class Solution {\n    public static int[] move = new int[]{-1,0,1,0,-1};\n    public void solve(char[][] board) {\n        int m = board.length;\n        int n = board[0].length;\n        for(int i=0; i&lt;m;i++){\n            for(int j=0; j&lt;n;j++){\n                if(i==0 || j == 0 || i==m-1 || j==n-1){\n                    if(board[i][j] == 'O'){\n                        dfs(board,i,j,'F');\n                    }\n                }\n            }\n        }\n        for(int i=0; i&lt;m;i++){\n            for(int j=0; j&lt;n;j++){\n                if(board[i][j] == 'O') board[i][j] = 'X';\n                if(board[i][j] == 'F') board[i][j] = 'O';\n            }\n        }\n    }\n    public static void dfs(char[][] board,int i, int j,char flag) {\n        if (i &lt; 0 || i == board.length|| j &lt; 0 || j == board[0].length || board[i][j] != 'O') {\n            return;\n        }\n        board[i][j] = flag;\n        for(int k=0; k&lt;4;k++){\n            int nx = i + move[k];\n            int ny = j + move[k+1];\n            dfs(board,nx,ny,flag);\n        }\n\n    }\n}\n</code></pre> <ol> <li>leetcode 827\uff1a\u6700\u5927\u4eba\u5de5\u5c9b</li> </ol> <p>\u7ed9\u4f60\u4e00\u4e2a\u5927\u5c0f\u4e3a <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;n x n&lt;/span&gt;&lt;/span&gt;</code> \u4e8c\u8fdb\u5236\u77e9\u9635 <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;grid&lt;/span&gt;&lt;/span&gt;</code> \u3002\u6700\u591a \u53ea\u80fd\u5c06\u4e00\u683c <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;0&lt;/span&gt;&lt;/span&gt;</code> \u53d8\u6210 <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;1&lt;/span&gt;&lt;/span&gt;</code> \u3002</p> <p>\u8fd4\u56de\u6267\u884c\u6b64\u64cd\u4f5c\u540e\uff0c<code>&lt;span class=\"color_font\"&gt;&lt;span&gt;grid&lt;/span&gt;&lt;/span&gt;</code> \u4e2d\u6700\u5927\u7684\u5c9b\u5c7f\u9762\u79ef\u662f\u591a\u5c11</p> <ol> <li>\u601d\u8def\uff1a</li> <li>\u901a\u8fc7\u8fdb\u884c\u4e8c\u4f4d\u904d\u5386\uff0c\u7136\u540e\u8fdb\u884c\u8513\u5ef6\u3002\u6bcf\u7247\u4f4d\u7f6e\u4f7f\u7528\u4e0d\u540cid\u8fdb\u884c\u586b\u5145\u3002</li> <li>\u7136\u540e\u5bf9\u6bcf\u4e2a0\u8fdb\u884c\u679a\u4e3e\uff0c\u5bf9\u56db\u4e2a\u65b9\u5411\u8fdb\u884c\u904d\u5386\u3002\u5982\u679c\u6709\u533a\u57df\uff0c\u5c31\u589e\u52a0\u76f8\u5e94\u6570\u91cf\u3002\u6ce8\u610f\u4e0d\u8981\u91cd\u590d\u3002</li> </ol> <p></p> Text Only<pre><code>class Solution {\n    public static int[] move = new int[] { -1, 0, 1, 0, -1 };\n\n    public int largestIsland(int[][] grid) {\n        int m = grid.length;\n        int n = grid[0].length;\n        int id = 2;\n        for (int i = 0; i &lt; m; i++) {\n            for (int j = 0; j &lt; n; j++) {\n                if (grid[i][j] == 1) {\n                    dfs(grid, i, j, id++);\n                }\n            }\n        }\n        int[] size = new int[id];\n        int ans = 0;\n        for (int i = 0; i &lt; m; i++) {\n            for (int j = 0; j &lt; n; j++) {\n                if (grid[i][j] &gt; 1) {\n                    size[grid[i][j]]++;\n                    ans = Math.max(ans, size[grid[i][j]]);\n                }\n            }\n        }\n        // \u8ba8\u8bba\u6240\u6709\u76840\uff0c\u53d8\u62101\uff0c\u80fd\u5e26\u6765\u7684\u6700\u5927\u5c9b\u7684\u5927\u5c0f\n        boolean[] visited = new boolean[id];\n        int up, down, left, right, merge;\n        for (int i = 0; i &lt; n; i++) {\n            for (int j = 0; j &lt; m; j++) {\n                if (grid[i][j] == 0) {\n                    up = i &gt; 0 ? grid[i - 1][j] : 0;\n                    down = i + 1 &lt; n ? grid[i + 1][j] : 0;\n                    left = j &gt; 0 ? grid[i][j - 1] : 0;\n                    right = j + 1 &lt; m ? grid[i][j + 1] : 0;\n                    visited[up] = true;\n                    merge = 1 + size[up];\n                    if (!visited[down]) {\n                        merge += size[down];\n                        visited[down] = true;\n                    }\n                    if (!visited[left]) {\n                        merge += size[left];\n                        visited[left] = true;\n                    }\n                    if (!visited[right]) {\n                        merge += size[right];\n                        visited[right] = true;\n                    }\n                    ans = Math.max(ans, merge);\n                    visited[up] = false;\n                    visited[down] = false;\n                    visited[left] = false;\n                    visited[right] = false;\n                }\n            }\n        }\n        return ans;\n    }\n    public static void dfs(int[][] grid, int i, int j, int id) {\n        if (i &lt; 0 || i &gt;= grid.length || j &lt; 0 || j &gt;= grid[0].length || grid[i][j] != 1) {\n            return;\n        }\n        grid[i][j] = id;\n        dfs(grid, i - 1, j, id);\n        dfs(grid, i + 1, j, id);\n        dfs(grid, i, j - 1, id);\n        dfs(grid, i, j + 1, id);\n    }\n}\n</code></pre>"},{"location":"LANG/DS-leetcode/#_85","title":"\u6700\u5c0f\u751f\u6210\u6811","text":"<ol> <li> <p>\u5b9a\u4e49\uff1a</p> </li> <li> <p>\u751f\u6210\u6811\uff1a\u4e00\u4e2a\u8fde\u901a\u65e0\u5411\u56fe\u7684\u751f\u6210\u5b50\u56fe\uff0c\u540c\u65f6\u8981\u6c42\u662f\u6811\u3002\u4e5f\u5373\u5728\u56fe\u7684\u8fb9\u96c6\u4e2d\u9009\u62e9n-1\u6761\u8fb9\uff0c\u5c06\u6240\u6709\u9876\u70b9\u8054\u901a\u3002</p> </li> <li>\u6700\u5c0f\u751f\u6210\u6811\uff1a\u8fb9\u6743\u6700\u5c0f\u7684\u751f\u6210\u6811</li> <li>Kruskal\u7b97\u6cd5</li> <li>\u6700\u5e38\u7528</li> <li>\u4e0d\u9700\u8981\u5efa\u56fe\u3002\u4f7f\u7528\u5e76\u67e5\u96c6\u5373\u53ef</li> <li>\u601d\u8def\uff1a</li> <li>\u628a\u6240\u6709\u7684\u8fb9\u6309\u6743\u503c\u4ece\u5c0f\u5230\u5927\u6392\u5e8f</li> <li>\u5982\u679c\u5f53\u524d\u7684\u8fb9\u4e0d\u4f1a\u5f62\u6210\u73af(\u6b64\u5904\u4f7f\u7528\u5e76\u67e5\u96c6\u8fdb\u884c\u5224\u65ad)\uff0c\u5c31\u9009\u62e9\u5f53\u524d\u7684\u8fb9\u3002\u5426\u5219\u5c31\u4e0d\u8981\u8fd9\u6761\u8fb9</li> <li>\u8003\u5bdf\u5b8c\u6240\u6709\u7684\u8fb9\u4e4b\u540e\uff0c\u5c31\u5f97\u5230\u7ed3\u679c</li> <li>\u4f7f\u7528\u5e76\u67e5\u96c6\u8fdb\u884c\u5224\u65ad\uff1aa----b,\u5982\u679cb\u5df2\u7ecf\u548ca\u5728\u540c\u4e00\u4e2a\u7ed3\u5408\u4e2d\uff0c\u6b64\u65f6\u8981\u629b\u5f03\u8fd9\u6761\u8fb9\uff0c\u5426\u5219\u4f1a\u6210\u73af\u3002</li> <li>\u662f\u57fa\u4e8e\u8d2a\u5fc3\u7b97\u6cd5\u6765\u4f7f\u7528\u7684</li> <li>\u6a21\u677f\u9898\uff1aleetcode1584</li> </ol> <p>\u7ed9\u4f60\u4e00\u4e2a<code>&lt;span class=\"color_font\"&gt;&lt;span&gt;points&lt;/span&gt;&lt;/span&gt;</code> \u6570\u7ec4\uff0c\u8868\u793a 2D \u5e73\u9762\u4e0a\u7684\u4e00\u4e9b\u70b9\uff0c\u5176\u4e2d <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;points[i] = [x&lt;/span&gt;&lt;/span&gt;``&lt;sub&gt;&lt;span class=\"color_font\"&gt;&lt;span&gt;i&lt;/span&gt;&lt;/span&gt;&lt;/sub&gt;``&lt;span class=\"color_font\"&gt;&lt;span&gt;, y&lt;/span&gt;&lt;/span&gt;``&lt;sub&gt;&lt;span class=\"color_font\"&gt;&lt;span&gt;i&lt;/span&gt;&lt;/span&gt;&lt;/sub&gt;``&lt;span class=\"color_font\"&gt;&lt;span&gt;]&lt;/span&gt;&lt;/span&gt;</code> \u3002</p> <p>\u8fde\u63a5\u70b9 <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;[x&lt;/span&gt;&lt;/span&gt;``&lt;sub&gt;&lt;span class=\"color_font\"&gt;&lt;span&gt;i&lt;/span&gt;&lt;/span&gt;&lt;/sub&gt;``&lt;span class=\"color_font\"&gt;&lt;span&gt;, y&lt;/span&gt;&lt;/span&gt;``&lt;sub&gt;&lt;span class=\"color_font\"&gt;&lt;span&gt;i&lt;/span&gt;&lt;/span&gt;&lt;/sub&gt;``&lt;span class=\"color_font\"&gt;&lt;span&gt;]&lt;/span&gt;&lt;/span&gt;</code> \u548c\u70b9 <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;[x&lt;/span&gt;&lt;/span&gt;``&lt;sub&gt;&lt;span class=\"color_font\"&gt;&lt;span&gt;j&lt;/span&gt;&lt;/span&gt;&lt;/sub&gt;``&lt;span class=\"color_font\"&gt;&lt;span&gt;, y&lt;/span&gt;&lt;/span&gt;``&lt;sub&gt;&lt;span class=\"color_font\"&gt;&lt;span&gt;j&lt;/span&gt;&lt;/span&gt;&lt;/sub&gt;``&lt;span class=\"color_font\"&gt;&lt;span&gt;]&lt;/span&gt;&lt;/span&gt;</code> \u7684\u8d39\u7528\u4e3a\u5b83\u4eec\u4e4b\u95f4\u7684 \u66fc\u54c8\u987f\u8ddd\u79bb \uff1a<code>&lt;span class=\"color_font\"&gt;&lt;span&gt;|x&lt;/span&gt;&lt;/span&gt;``&lt;sub&gt;&lt;span class=\"color_font\"&gt;&lt;span&gt;i&lt;/span&gt;&lt;/span&gt;&lt;/sub&gt;``&lt;span class=\"color_font\"&gt;&lt;span&gt; - x&lt;/span&gt;&lt;/span&gt;``&lt;sub&gt;&lt;span class=\"color_font\"&gt;&lt;span&gt;j&lt;/span&gt;&lt;/span&gt;&lt;/sub&gt;``&lt;span class=\"color_font\"&gt;&lt;span&gt;| + |y&lt;/span&gt;&lt;/span&gt;``&lt;sub&gt;&lt;span class=\"color_font\"&gt;&lt;span&gt;i&lt;/span&gt;&lt;/span&gt;&lt;/sub&gt;``&lt;span class=\"color_font\"&gt;&lt;span&gt; - y&lt;/span&gt;&lt;/span&gt;``&lt;sub&gt;&lt;span class=\"color_font\"&gt;&lt;span&gt;j&lt;/span&gt;&lt;/span&gt;&lt;/sub&gt;``&lt;span class=\"color_font\"&gt;&lt;span&gt;|&lt;/span&gt;&lt;/span&gt;</code> \uff0c\u5176\u4e2d <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;|val|&lt;/span&gt;&lt;/span&gt;</code> \u8868\u793a <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;val&lt;/span&gt;&lt;/span&gt;</code> \u7684\u7edd\u5bf9\u503c\u3002</p> <p>\u8bf7\u4f60\u8fd4\u56de\u5c06\u6240\u6709\u70b9\u8fde\u63a5\u7684\u6700\u5c0f\u603b\u8d39\u7528\u3002\u53ea\u6709\u4efb\u610f\u4e24\u70b9\u4e4b\u95f4 \u6709\u4e14\u4ec5\u6709 \u4e00\u6761\u7b80\u5355\u8def\u5f84\u65f6\uff0c\u624d\u8ba4\u4e3a\u6240\u6709\u70b9\u90fd\u5df2\u8fde\u63a5\u3002</p> Text Only<pre><code>class Solution {\n    public static int MAXN = 1001;\n    public static int[] father = new int[MAXN];\n    public static int[] size = new int[MAXN];\n    public static int[] stk = new int[MAXN];\n    public static int r;\n    public int minCostConnectPoints(int[][] points) {\n        //\u70b9\u4ece0\u5f00\u59cb\n        int n = points.length;\n        build(n);\n        List&lt;int[]&gt; edges = new ArrayList&lt;&gt;();\n        //\u521b\u5efa\u8fb9\u96c6\u5e76\u6392\u5e8f\n        for(int i=0 ;i&lt;n;i++){\n            for(int j=i+1; j&lt;n; j++){\n                edges.add(new int[]{i, j,dist(points,i,j)});\n            }\n        }\n        Collections.sort(edges,(a,b)-&gt;a[2]-b[2]);\n        //k\u7b97\u6cd5\n        int ans = 0;\n        int cnt = 0;\n        for(int[] edge : edges){\n            if(union(edge[0], edge[1])){\n                cnt++;\n                ans += edge[2];\n            }\n        }\n        return ans;\n\n    }\n    public static int dist(int[][] points, int x, int y){\n        return Math.abs(points[x][0]-points[y][0]) + Math.abs(points[x][1]-points[y][1]);\n    }\n    public static void build(int n){\n        for(int i=0; i&lt;n; i++){\n            father[i] = i;\n            size[i] = 1;\n        }\n    }\n    public static int find(int x){\n        r = 0;\n        while(x != father[x]){\n            stk[r++] = x;\n            x = father[x];\n        }\n        while(r&gt;0){\n            father[stk[--r]] = x;\n        }\n        return x;\n    }\n    //true\u4ee3\u8868\u9700\u8981\u5408\u5e76\n    public static boolean union(int x, int y) {\n        int fx = find(x);\n        int fy = find(y);\n        if (fx != fy) {\n            if (size[fx] &gt;= size[fy]) {\n                size[fx] += size[fy];\n                father[fy] = fx;\n            } else {\n                size[fy] += size[fx];\n                father[fx] = fy;\n            }\n            return true;\n        }else{\n            return false;\n        }\n    }\n}\n</code></pre>"},{"location":"LANG/DS-leetcode/#bfs","title":"BFS\u53ca\u5176\u6269\u5c55","text":"<ol> <li>\u7406\u8bba\uff1a</li> <li>\u5b9a\u4e49\uff1a<ol> <li>\u662f\u56fe\u4e0a\u6700\u57fa\u7840\u3001\u6700\u91cd\u8981\u7684\u641c\u7d22\u7b97\u6cd5\u4e4b\u4e00\u3002</li> <li>\u6240\u8c13\u5bbd\u5ea6\u4f18\u5148\u3002\u5c31\u662f\u6bcf\u6b21\u90fd\u5c1d\u8bd5\u8bbf\u95ee\u540c\u4e00\u5c42\u7684\u8282\u70b9\u3002 \u5982\u679c\u540c\u4e00\u5c42\u90fd\u8bbf\u95ee\u5b8c\u4e86\uff0c\u518d\u8bbf\u95ee\u4e0b\u4e00\u5c42\u3002</li> <li>\u8fd9\u6837\u505a\u7684\u7ed3\u679c\u662f\uff0cBFS \u7b97\u6cd5\u627e\u5230\u7684\u8def\u5f84\u662f\u4ece\u8d77\u70b9\u5f00\u59cb\u7684 \u6700\u77ed \u5408\u6cd5\u8def\u5f84\u3002\u6362\u8a00\u4e4b\uff0c\u8fd9\u6761\u8def\u5f84\u6240\u5305\u542b\u7684\u8fb9\u6570\u6700\u5c0f\u3002</li> <li>\u5728 BFS \u7ed3\u675f\u65f6\uff0c\u6bcf\u4e2a\u8282\u70b9\u90fd\u662f\u901a\u8fc7\u4ece\u8d77\u70b9\u5230\u8be5\u70b9\u7684\u6700\u77ed\u8def\u5f84\u8bbf\u95ee\u7684\u3002</li> <li>\u7b97\u6cd5\u8fc7\u7a0b\u53ef\u4ee5\u770b\u505a\u662f\u56fe\u4e0a\u706b\u82d7\u4f20\u64ad\u7684\u8fc7\u7a0b\uff1a\u6700\u5f00\u59cb\u53ea\u6709\u8d77\u70b9\u7740\u706b\u4e86\uff0c\u5728\u6bcf\u4e00\u65f6\u523b\uff0c\u6709\u706b\u7684\u8282\u70b9\u90fd\u5411\u5b83\u76f8\u90bb\u7684\u6240\u6709\u8282\u70b9\u4f20\u64ad\u706b\u82d7\u3002</li> <li>\u53ef\u4ee5\u5355\u6e90\u8fdb\u884cBFS\uff0c\u4e5f\u6709\u591a\u6e90BFS</li> </ol> </li> <li>\u4f8b\u5b50\uff1a</li> <li>\u6bcf\u6b21\u5916\u6269\u4e00\u5c42\uff0c\u90fd\u662f\u6e90\u70b9\u8ddd\u79bb\u672c\u5c42\u7684\u70b9\u8ddd\u79bb+1\u3002\u672c\u5c42\u7684\u70b9\u5230\u6e90\u70b9\u7684\u8ddd\u79bb\u90fd\u76f8\u540c\u3002\u6b64\u5904\u7684\u8ddd\u79bb\u90fd\u662f\u66fc\u54c8\u987f\u8ddd\u79bb\u3002</li> <li>\u9700\u8981\u6709\u72b6\u6001\u6765\u8bb0\u5f55\u8282\u70b9\u662f\u5426\u88ab\u8bbf\u95ee\u8fc7\u3002</li> <li>\u5904\u7406\u65b9\u5f0f\uff1a</li> <li>\u5355\u70b9\u5904\u7406\u65b9\u5f0f\uff1a\u901a\u8fc7\u4f7f\u7528\u961f\u5217\u6765\u5b58\u50a8\u6bcf\u4e00\u5c42\u7684(Node\uff0cdistance)\u3002\u4e0a\u4e00\u5c42\u7684\u4e00\u4e2a\u8282\u70b9\u51fa\u53bb\uff0c\u5219\u5982\u961f\u5bf9\u5e94\u7684\u4e0b\u4e00\u5c42\u8282\u70b9\u3002</li> <li>\u4e00\u6b21\u5904\u7406\u4e00\u5c42\uff1a\u4f7f\u7528hashMap\u6765\u8bb0\u5f55\u6bcf\u4e2a\u8282\u70b9\u5bf9\u5e94\u7684level\u503c\u3002</li> </ol> <ol> <li>\u4f8b\u9898\uff1a</li> <li>\u6a21\u677f\u9898\uff1a\u591a\u6e90BFS\u3002\u7ed3\u675f\u4e4b\u540e\u7684level\u5c31\u662f\u6700\u8fdc\u7684\u5c42\u6570(\u8ddd\u79bb)</li> </ol> Text Only<pre><code>class Solution {\n    public static int MAXN = 101;\n    public static int MAXM = 101;\n    public static int[][] queue = new int[MAXN * MAXM][2];\n    public static int l, r;\n    public static boolean[][] visited = new boolean[MAXN][MAXM];\n    public static int[] move = new int[]{-1,0,1,0,-1};\n    public int maxDistance(int[][] grid) {\n        int n = grid.length;\n        int m = grid[0].length;\n        l = 0;\n        r = 0;\n        int seas = 0;\n        for(int i=0; i&lt;n; i++){\n            for(int j=0; j&lt;m; j++){\n                if(grid[i][j] == 1){\n                    visited[i][j] = true;\n                    queue[r][0] = i;\n                    queue[r][1] = j;\n                    r++;\n                }else{\n                    visited[i][j] = false;\n                    seas++;\n                }\n            }\n        }\n        if(seas == 0 || seas == n*m){\n            return -1;\n        }\n\n        int level = 0;\n        while(l&lt;r){\n            level++;\n            int size = r-l;\n            for(int i=0; i&lt;size; i++){\n                int x = queue[l][0];\n                int y = queue[l][1];\n                l++;\n                for(int j=0; j&lt;4 ;j++){\n                    int nx = x + move[j];\n                    int ny = y + move[j+1];\n                    if(nx &gt;= 0 &amp;&amp; nx &lt; n &amp;&amp; ny &gt;= 0 &amp;&amp; ny &lt; m &amp;&amp; grid[nx][ny]==0 &amp;&amp;!visited[nx][ny]){\n                        visited[nx][ny] = true;\n                        queue[r][0] = nx;\n                        queue[r][1] = ny;\n                        r++;\n                    }\n                }\n            }\n        }\n        return level-1;\n    }\n}\n</code></pre> <ol> <li>leetcode200</li> <li>\u6bcf\u4e2a\u8282\u70b9\u8fdb\u884c\u5904\u7406\u7684\u6a21\u677f\u9898\uff1a</li> </ol> Text Only<pre><code>class Solution {\n    public static int MAXN = 100000;\n    public static int MAXM = 301;\n    public static int[][] queue = new int[MAXN][MAXM];\n    public static int l, r;\n    public static boolean[][] visited = new boolean[MAXN][MAXM];\n    public static int[] move = new int[]{-1,0,1,0,-1};\n\n    public int numIslands(char[][] grid) {\n        for(int i=0 ;i&lt;visited.length; i++){\n            Arrays.fill(visited[i], false);\n        }\n        int n = grid.length;\n        int m = grid[0].length;\n        l = 0;\n        r = 0;\n        int num = 0;\n        for(int i=0; i&lt;n; i++){\n            for(int j=0;j&lt;m;j++){\n                if(!visited[i][j] &amp;&amp; grid[i][j] == '1'){\n                    num++;\n                    visited[i][j] = true;\n                    queue[r][0] = i;\n                    queue[r++][1] = j;\n\n                    while(l&lt;r){\n                        int x = queue[l][0];\n                        int y = queue[l][1];\n                        l++;\n                        for(int e=0; e&lt;4;e++){\n                            int nx = x + move[e];\n                            int ny = y + move[e+1];\n                            if(nx&gt;=0 &amp;&amp; nx&lt;n &amp;&amp; ny&gt;=0 &amp;&amp; ny&lt;m &amp;&amp; !visited[nx][ny] &amp;&amp; grid[nx][ny] == '1'){\n                                visited[nx][ny] = true;\n                                queue[r][0] = nx;\n                                queue[r][1] = ny;\n                                r++;\n\n                            }\n                        }\n                    }\n\n                }\n            }\n        }\n        return num;\n    }\n}\n</code></pre> <ol> <li>01BFS\uff0c\u4e5f\u5c31\u662f\u53cc\u7aef\u961f\u5217BFS</li> <li>\u9002\u7528\u8303\u56f4\uff1a\u8fb9\u7684\u6743\u91cd\u53ea\u67090\u548c1\uff0c\u6c42\u89e3\u6700\u77ed\u8ddd\u79bb</li> <li>\u4e0d\u80fd\u4f7f\u7528\u4f20\u7edfBFS\uff0c\u56e0\u4e3a\u8fdb\u884c\u4f20\u7edf\u7684BFS\u4e4b\u540e\uff0c\u8fdb\u884c\u4e0b\u4e00\u5c42\u6269\u5c55\u4e4b\u540e\uff0c\u9700\u8981\u8ddd\u79bb\u589e\u52a0\uff0c\u800c\u4e0d\u662f\u4e24\u4e2a\u8282\u70b9\u8fd8\u662f\u5728\u540c\u4e00\u5c42\u3002</li> <li>\u65f6\u95f4\u590d\u6742\u5ea6O(\u8282\u70b9\u6570 + \u8fb9\u6570)</li> <li>\u8fc7\u7a0b\uff1a<ol> <li>diatance[i]\u4ee3\u8868\u4ece\u6e90\u70b9\u5230i\u70b9\u7684\u6700\u77ed\u8ddd\u79bb\u3002\u521d\u59cb\u7684\u65f6\u5019\u6240\u6709\u70b9\u7684diatance\u8bbe\u7f6e\u4e3a\u65e0\u7a77\u5927\u3002</li> <li>\u6e90\u70b9\u8fdb\u5165\u53cc\u7aef\u961f\u5217\uff0cdistance[\u6e90\u70b9] = 0</li> <li>\u53cc\u7aef\u961f\u5217\u5934\u90e8\u5f39\u51fax<ol> <li>\u5982\u679cx\u662f\u76ee\u6807\u70b9\uff0c\u8fd4\u56dedistance[x]</li> <li>\u8003\u5bdf\u4ecex\u51fa\u53d1\u7684\u6bcf\u4e00\u6761\u8fb9\uff0c\u5047\u8bbex-&gt;y,\u6743\u91cd\u4e3aw<ol> <li>\u5982\u679cdistance[y] &gt; diatance[x] + w,\u5904\u7406\u8be5\u8fb9</li> <li>\u5904\u7406\u7684\u65f6\u5019\uff0c\u66f4\u65b0distance[y] =distance[x] +w</li> </ol> </li> </ol> </li> </ol> </li> </ol> <p>\u5982\u679cw==0,y\u4ece\u5934\u90e8\u8fdb\u5165\u53cc\u7aef\u961f\u5217\uff0c\u91cd\u590d\u6b65\u9aa4III</p> <p>\u5982\u679cw==1,y\u4ece\u5c3e\u90e8\u8fdb\u5165\u53cc\u7aef\u961f\u5217\uff0c\u91cd\u590d\u6b65\u9aa4III</p> <ol> <li>\u76f4\u5230\u961f\u5217\u4e3a\u7a7a</li> <li> <p>\u6027\u8d28\uff1a</p> </li> <li> <p>\u5728\u53cc\u7aef\u961f\u5217\u4e2d\u540c\u65f6\u5b58\u5728\u7684\u8282\u70b9\u5230\u6e90\u70b9\u7684\u8ddd\u79bb\u4e4b\u5dee&lt;=1\u3002</p> </li> <li>\u5176\u5b9ew==0\u4ece\u5934\u8fdb\u5165\u662f\u8fdb\u884c\u7684\u4e00\u6b21\u4fee\u6b63\uff0c\u5c06\u8ddd\u79bb\u8fb9\u7684\u4e0d\u53d8\u6216\u8005\u66f4\u5c0f\u3002</li> <li>\u6a21\u677f\u9898\uff1aleetcode2290</li> </ol> Text Only<pre><code>class Solution {\n    public int minimumObstacles(int[][] grid) {\n        int m = grid.length;\n        int n = grid[0].length;\n\n        int[] move = new int[]{-1,0,1,0,-1};\n        Deque&lt;int[]&gt; deque = new ArrayDeque&lt;&gt;();\n        int[][] distance = new int[m][n];\n        for(int i=0 ;i&lt;m;i++){\n            Arrays.fill(distance[i],Integer.MAX_VALUE);\n        }\n\n        deque.offerFirst(new int[]{0,0});\n        distance[0][0] = 0;\n        while(!deque.isEmpty()){\n            int[] cur = deque.pollFirst();\n            int x = cur[0];\n            int y = cur[1];\n            if(x == m-1 &amp;&amp; y == n-1) return distance[x][y];\n            for(int i=0 ;i&lt;4 ;i++){\n                int nx = x + move[i];\n                int ny = y + move[i+1];\n                boolean bound = (nx&gt;=0 &amp;&amp; nx&lt;m &amp;&amp; ny&gt;=0 &amp;&amp; ny&lt;n);\n                if(bound &amp;&amp; distance[nx][ny] &gt; distance[x][y] + grid[nx][ny]){\n                    int w = grid[nx][ny];\n                    distance[nx][ny] = distance[x][y]+w;\n                    if(w == 0){\n                        deque.offerFirst(new int[]{nx,ny});\n                    }else{\n                        deque.offerLast(new int[]{nx,ny});\n                    }\n                }\n            }\n        }\n        return -1;   \n    }\n}\n</code></pre> <ol> <li>\u53d8\u5f62\u9898\uff1aleetcode1368</li> </ol> <p>\u56e0\u4e3a\u6bcf\u4e00\u4e2a\u683c\u5b50\u90fd\u6709\u65b9\u5411\uff0c\u5e76\u4e14\u53ef\u4ee5\u7528cost 1\u6539\u65b9\u5411.\u5219\u5047\u8bbe\u8be5\u70b9\u539f\u672c\u6307\u5411\u7684cost=0,\u5176\u4f59\u4e09\u4e2a\u65b9\u5411\u90fd\u662fcost=1\u3002\u8981\u6c42cost\u4e4b\u548c\u6700\u5c0f\uff0c\u5c31\u662f\u8ba1\u7b97\u6700\u77ed\u8def\u3002\u6240\u4ee5\u8f6c\u6362\u4e3a0-1BFS</p>"},{"location":"LANG/DS-leetcode/#dijkstra","title":"DijkStra\u7b97\u6cd5","text":"<ol> <li>\u4f5c\u7528\uff1a\u8ba1\u7b97\u56fe\u4e2d\u7684\u5355\u6e90\u6700\u77ed\u8def</li> <li>\u4f7f\u7528\u8303\u56f4\uff1a\u6709\u5411\u56fe\uff0c\u65e0\u8d1f\u6743\u503c</li> <li>\u5b9e\u73b0\u79cd\u7c7b\uff1a\u66b4\u529b\uff0c\u666e\u901a\u5806\u4f18\u5316(\u6700\u5e38\u7528)\uff0c\u53cd\u5411\u5806\u7d22\u5f15\u4f18\u5316</li> <li>\u7b97\u6cd5\u8fc7\u7a0b\uff1a</li> </ol> <ol> <li>\u65f6\u95f4\u590d\u6742\u5ea6\uff1aO(m*logm),m\u4e3a\u8fb9\u6570\u3002</li> <li>\u6a21\u677f\u9898\uff1aleetcode743</li> <li>\u4f7f\u7528\u94fe\u5f0f\u524d\u5411\u661f\u5efa\u56fe + \u5806\u4f18\u5316</li> <li>\u6ce8\u610f\u4f7f\u7528\u94fe\u5f0f\u524d\u5411\u661f\u5efa\u56fe\u8c03\u7528\u51fd\u6570build</li> </ol> Text Only<pre><code>class Solution {\n    public static int MAXN = 102;\n    public static int MAXM = 6002;\n    public static int[] head = new int[MAXN];\n    public static int[] next = new int[MAXM];\n    public static int[] to = new int[MAXM];\n    public static int[] w = new int[MAXM];\n    public static int cnt;\n    public int networkDelayTime(int[][] times, int n, int k) {\n        //\u672c\u9898\u4e0b\u6807\u4ece1\u5f00\u59cb \n        build(n);\n        for(int[] edge : times){\n            addEdge(edge[0], edge[1], edge[2]);\n        }\n        int[] distance = new int[n+1];\n        Arrays.fill(distance,Integer.MAX_VALUE);\n        distance[k] = 0;\n        boolean[] visited = new boolean[n+1];\n        Arrays.fill(visited,false);\n        PriorityQueue&lt;int[]&gt; heap = new PriorityQueue&lt;&gt;((a,b)-&gt;a[1]-b[1]);\n        heap.add(new int[]{k,0});\n        while(!heap.isEmpty()){\n            int[] cur = heap.poll();\n            int u = cur[0];\n            System.out.println(\"u:\"+ u);\n            if(visited[u]){\n                continue;\n            }\n            visited[u] = true;\n            for(int ei = head[u]; ei&gt;0; ei = next[ei]){\n                int y = to[ei];\n                int weight = w[ei];\n                System.out.println(\"y:\" + y + \" \" + \"w:\" + weight);\n                if(!visited[y] &amp;&amp; distance[u] + weight &lt; distance[y]){\n                    distance[y] = distance[u] + weight;\n                    //System.out.println(\"distance:\" + distance[y]);\n                    heap.add(new int[]{y,distance[y]});\n                }\n            }\n        }\n        int ans = Integer.MIN_VALUE;\n        for(int i=1; i&lt;=n; i++){\n            if(distance[i] == Integer.MAX_VALUE){\n                return -1;\n            }\n            ans = Math.max(ans,distance[i]);\n        }\n        return ans;  \n    }\n    public static void build(int n){\n        cnt = 1;\n        Arrays.fill(head,0);\n        Arrays.fill(next,0);\n        Arrays.fill(to,0);\n    }\n    public static void addEdge(int u, int v, int weight){\n        w[cnt] = weight;\n        to[cnt] = v;\n        next[cnt] = head[u];\n        head[u] = cnt++;\n    }\n}\n</code></pre> Text Only<pre><code>//scala\u6a21\u677f\nobject Solution {\n  def findSafeWalk(grid: List[List[Int]], health: Int): Boolean = {\n    val move = Array(-1,0,1,0,-1)\n    val m = grid.length\n    val n = grid(0).length\n    val dis = Array.fill[Int](m, n)(Int.MaxValue)\n    val vis = Array.fill[Boolean](m, n)(false)\n    import scala.collection.mutable\n    implicit val myOrd: Ordering[(Int, Int, Int)] = Ordering.by((x: (Int, Int, Int)) =&gt; x._3)(Ordering[Int].reverse)\n    val heap = mutable.PriorityQueue[(Int,Int,Int)]()\n\n    dis(0)(0) = grid(0)(0)\n    heap.enqueue((0,0,0))\n    while(heap.nonEmpty){\n      val (x,y,d) = heap.dequeue()\n      if(!vis(x)(y)){\n        vis(x)(y) = true\n        for(k &lt;- 0 until 4){\n          val nx = x + move(k)\n          val ny = y + move(k+1)\n          if(nx &gt;= 0 &amp;&amp; nx &lt; m &amp;&amp; ny &gt;= 0 &amp;&amp; ny &lt; n &amp;&amp; !vis(nx)(ny) &amp;&amp; dis(x)(y) + grid(nx)(ny) &lt;= dis(nx)(ny)){\n            dis(nx)(ny) = dis(x)(y) + grid(nx)(ny)\n            heap.enqueue((nx,ny,dis(nx)(ny)))\n          }\n        }\n      }\n    }\n    dis(m-1)(n-1) &lt; health\n  }\n}\n</code></pre>"},{"location":"LANG/DS-leetcode/#a","title":"A*\u7b97\u6cd5","text":"<ol> <li>\u4e0d\u540c\u70b9\uff1a</li> </ol> <p>DijkStra\u662f\u89e3\u51b3\u4e00\u4e2a\u6e90\u70b9\u5230\u6240\u6709\u76ee\u6807\u70b9\u7684\u6700\u77ed\u8ddd\u79bb</p> <p>A*\u7b97\u6cd5\u89e3\u51b3\u7684\u662f\u4ece\u4e00\u4e2a\u6e90\u70b9\u5230\u4e00\u4e2a\u76ee\u6807\u70b9\u4e4b\u95f4\u7684\u8ddd\u79bb</p> <ol> <li>\u7279\u70b9\uff1a</li> <li>\u5728\u5806\u4e2d\u5b58\u653e\u7684\u6570\u636e\uff0c\u4e0d\u518d\u53ea\u662f(y,distance(y))\u3002</li> <li>\u5bf9\u4e8eBFS\uff0c\u5c31\u662f\u6bcf\u6b21\u6269\u5145\u4e00\u5c42\u3002\u8fd9\u6837\u7684\u8bdd\u6700\u540e\u4f1a\u8bbf\u95ee\u5927\u91cf\u7684\u65e0\u7528\u8282\u70b9</li> <li>\u5bf9\u4e8eDijkStra\uff0c\u6bcf\u6b21\u4e5f\u90fd\u662f\u6269\u5145\u4e00\u5c42(\u4e0eBFS\u4e00\u81f4)\uff0c\u8fd8\u5f15\u5165\u4e86\u5806\uff0c\u4f18\u70b9\u5c31\u662f\u53ef\u4ee5\u89e3\u51b3\u6240\u6709\u8282\u70b9\u3002</li> <li>\u5b83\u5c5e\u4e8e\u56fe\u904d\u5386\uff08\u82f1\u6587\uff1aGraph traversal\uff09\u548c\u6700\u4f73\u4f18\u5148\u641c\u7d22\u7b97\u6cd5\uff08\u82f1\u6587\uff1aBest-first search\uff09\uff0c\u4ea6\u662f BFS \u7684\u6539\u8fdb</li> </ol>"},{"location":"LANG/DS-leetcode/#floyd","title":"Floyd\u7b97\u6cd5","text":"<ol> <li>\u5168\u80fd\u7b97\u6cd5\uff0c\u53ea\u8981\u6ca1\u6709\u8d1f\u73af\u7684\u6700\u77ed\u8def(\u4fdd\u8bc1\u6700\u77ed\u8def\u5b58\u5728)\u90fd\u53ef\u4ee5\u6c42\u3002\u6240\u6c42\u7684\u7ed3\u679c\u662f\u6bcf\u4e24\u70b9\u4e4b\u95f4\u7684\u6700\u77ed\u8ddd\u79bb</li> <li>\u590d\u6742\u5ea6\uff1a</li> <li>\u65f6\u95f4\u590d\u6742\u5ea6\u662fO(n^3)\u3002\u6240\u4ee5\u4f7f\u7528\u7684\u65f6\u5019\u8981\u5148\u4f30\u8ba1\u6570\u636e\u91cf\uff0c\u5982\u679c\u65f6\u95f4\u590d\u6742\u5ea6\u5927\u4e8e10^9\u5c31\u4f1a\u8d85\u65f6\u3002</li> <li>\u7a7a\u95f4\u590d\u6742\u5ea6\u662fO(n^2)\u3002</li> <li>\u4ee3\u7801\u6a21\u677f\uff1a</li> </ol> Text Only<pre><code>public class Code02_Floyd {\n\n    public static int MAXN = 101;\n    public static int[][] distance = new int[MAXN][MAXN];\n\n    public static int n, m, ans;\n\n    // \u521d\u59cb\u65f6\u8bbe\u7f6e\u4efb\u610f\u4e24\u70b9\u4e4b\u95f4\u7684\u6700\u77ed\u8ddd\u79bb\u4e3a\u65e0\u7a77\u5927\uff0c\u8868\u793a\u4efb\u4f55\u8def\u4e0d\u5b58\u5728\n    public static void build() {\n        for (int i = 0; i &lt; n; i++) {\n            for (int j = 0; j &lt; n; j++) {\n                distance[i][j] = Integer.MAX_VALUE;\n            }\n        }\n    }\n    public static void floyd() {\n        // O(N^3)\u7684\u8fc7\u7a0b\n        // \u679a\u4e3e\u6bcf\u4e2a\u8df3\u677f\n        // \u6ce8\u610f\uff0c\u8df3\u677f\u8981\u6700\u5148\u679a\u4e3e\uff01\u8df3\u677f\u8981\u6700\u5148\u679a\u4e3e\uff01\u8df3\u677f\u8981\u6700\u5148\u679a\u4e3e\uff01\n        for (int bridge = 0; bridge &lt; n; bridge++) { // \u8df3\u677f\n            for (int i = 0; i &lt; n; i++) {\n                for (int j = 0; j &lt; n; j++) {\n                    // i -&gt; .....bridge .... -&gt; j\n                    // distance[i][j]\u80fd\u4e0d\u80fd\u7f29\u77ed\n                    // distance[i][j] = min ( distance[i][j] , distance[i][bridge] + distance[bridge][j])\n                    //\u5982\u679c\u8df3\u677f\u80fd\u5230\u8fbe\uff0c\u5219\u53ef\u4ee5\u8fdb\u884c\u66f4\u65b0\n                    boolean check = distance[i][bridge] != Integer.MAX_VALUE &amp;&amp; distance[bridge][j] != Integer.MAX_VALUE;\n                    if(check) distance[i][j] = Math.min(distance[i][j], distance[i][bridge] + distance[bridge][j]);\n                }\n            }\n        }\n    }\n}\n</code></pre>"},{"location":"LANG/DS-leetcode/#_86","title":"\u52a8\u6001\u89c4\u5212","text":""},{"location":"LANG/DS-leetcode/#_87","title":"\u4e00\u7ef4\u52a8\u6001\u89c4\u5212","text":"<ol> <li> <p>\u7b97\u6cd5\u7c7b\u578b\uff1a</p> </li> <li> <p>\u77e5\u9053\u600e\u4e48\u8ba1\u7b97\u7684\u7b97\u6cd5\uff0c\u6bd4\u5982\u56fe\u8bba\u4e2d\u7684DijkStra\u7b97\u6cd5</p> </li> <li>\u77e5\u9053\u600e\u4e48\u5c1d\u8bd5\u7684\u7b97\u6cd5\uff0c\u6bd4\u5982\u9012\u5f52</li> <li>\u9012\u5f52\u4e0e\u52a8\u6001\u89c4\u5212\uff1a</li> <li>\u6709\u4e9b\u9012\u5f52\u5728\u8c03\u7528\u7684\u65f6\u5019\uff0c\u603b\u662f\u91cd\u590d\u8c03\u7528\u540c\u4e00\u4e2a\u95ee\u9898\u7684\u89e3\uff0c\u5219\u8f6c\u6362\u4e3a\u52a8\u6001\u89c4\u5212\u5f88\u6709\u6536\u76ca\u3002</li> <li>\u5982\u679c\u6bcf\u6b21\u5c55\u5f00\u90fd\u662f\u4e0d\u540c\u7684\u89e3\uff0c\u5c31\u6ca1\u6709\u5fc5\u8981\u53d8\u4e3a\u52a8\u6001\u89c4\u5212\u3002</li> <li>\u4efb\u4f55\u52a8\u6001\u89c4\u5212\u95ee\u9898\u4e00\u5b9a\u5bf9\u5e94\u7740\u6709\u91cd\u590d\u8c03\u7528\u52a8\u4f5c\u7684\u7684\u9012\u5f52\u3002</li> <li>\u4f46\u662f\u9012\u5f52\u4e0d\u4e00\u5b9a\u53ef\u4ee5\u6539\u4e3a\u52a8\u6001\u89c4\u5212\uff0c\u56e0\u4e3a\u9012\u5f52\u4e2d\u53ef\u80fd\u6539\u53d8\u5b50\u95ee\u9898\u7684\u73af\u5883\uff0c\u4ece\u800c\u4e0d\u53ef\u4ee5\u4f7f\u7528\u52a8\u6001\u89c4\u5212</li> <li>\u6590\u6ce2\u90a3\u5951\u6570\u5217\uff1a</li> <li>\u6590\u6ce2\u90a3\u5951\u6570 \uff08\u901a\u5e38\u7528 <code>&lt;span&gt;F(n)&lt;/span&gt;</code> \u8868\u793a\uff09\u5f62\u6210\u7684\u5e8f\u5217\u79f0\u4e3a \u6590\u6ce2\u90a3\u5951\u6570\u5217 \u3002\u8be5\u6570\u5217\u7531 <code>&lt;span&gt;0&lt;/span&gt;</code> \u548c <code>&lt;span&gt;1&lt;/span&gt;</code> \u5f00\u59cb\uff0c\u540e\u9762\u7684\u6bcf\u4e00\u9879\u6570\u5b57\u90fd\u662f\u524d\u9762\u4e24\u9879\u6570\u5b57\u7684\u548c\u3002\u7ed9\u5b9an\uff0c\u8bf7\u8ba1\u7b97F(n)</li> <li>\u66b4\u529b\u9012\u5f52\uff1a</li> <li>\u65f6\u95f4\u590d\u6742\u5ea6\uff1aO(2^n)\u3002\u56e0\u4e3a\u66b4\u529b\u9012\u5f52\u6210\u4e00\u4e2a\u4e8c\u53c9\u6811\uff0c\u8fd9\u9897\u4e8c\u53c9\u6811\u4e00\u5171\u6709n\u5c42\u3002</li> <li>\u53ef\u4ee5\u6539\u8fdb\u7684\u70b9\uff1a\u9012\u5f52\u4e2d\u6709\u91cd\u590d\u7684\u5b50\u8fc7\u7a0b\u88ab\u591a\u6b21\u8ba1\u7b97\uff0c\u6bd4\u5982F(5)\u3002\u53ef\u4ee5\u901a\u8fc7\u7f13\u5b58\u5c06\u5176\u4fdd\u5b58\u4e0b\u6765\u3002\u5219\u65f6\u95f4\u590d\u6742\u5ea6\u5c31\u53d8\u4e3a\u4e86O(n)</li> </ol> Text Only<pre><code>class Solution {\n    public int fib(int n) {\n        if(n == 0 || n == 1){\n            return n;\n        }\n        return fib(n-1) + fib(n-2);\n    }\n}\n</code></pre> <ol> <li>\u8bb0\u5fc6\u5316\u641c\u7d22\u89e3\u6cd5\uff1a</li> <li>\u6c42F(n)\uff0c\u5219\u51c6\u59070-n\u9879\u7684\u7f13\u5b58\u8868\u5c31\u53ef\u4ee5\uff0c\u957f\u5ea6\u4e3an+1.</li> <li>\u6bcf\u6b21\u8ba1\u7b97\u7684\u7ed3\u679c\u5b58\u5165\u7f13\u5b58\u8868\u4e2d\u3002</li> <li>\u65f6\u95f4\u590d\u6742\u5ea6\uff1aO(n)</li> </ol> Text Only<pre><code>class Solution {\n\n    public int fib(int n) {\n        int[] dp = new int[n+1];\n        Arrays.fill(dp,-1);\n        return f2(n,dp);\n    }\n    public int f2(int n, int[] dp){\n        if(n == 0 || n == 1){\n            return n;\n        }\n        if(dp[n] != -1){\n            return dp[n];\n        }\n        int ans = fib(n-1) + fib(n-2);\n        dp[n] = ans;\n        return ans;\n    }\n}\n</code></pre> <ol> <li>\u52a8\u6001\u89c4\u5212\uff1a</li> <li>\u4ece\u9876\u5230\u5e95\uff0c\u662f\u9012\u5f52</li> <li>\u4ece\u5e95\u5230\u9876\uff0c\u53d8\u4e3a\u52a8\u6001\u89c4\u5212</li> <li>\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(n)</li> </ol> Text Only<pre><code>class Solution {\n    public int fib(int n) {\n        if(n == 0 || n == 1){\n            return n;\n        }\n        int[] dp = new int[n+1];\n        dp[0] = 0;\n        dp[1] = 1;\n        for(int i=2; i&lt;=n ;i++){\n            dp[i] = dp[i-1] + dp[i-2];\n        }\n        return dp[n];\n    }\n}\n</code></pre> <ol> <li>leetcode983\u6700\u4f4e\u7968\u4ef7</li> </ol> <p>\u5728\u4e00\u4e2a\u706b\u8f66\u65c5\u884c\u5f88\u53d7\u6b22\u8fce\u7684\u56fd\u5ea6\uff0c\u4f60\u63d0\u524d\u4e00\u5e74\u8ba1\u5212\u4e86\u4e00\u4e9b\u706b\u8f66\u65c5\u884c\u3002\u5728\u63a5\u4e0b\u6765\u7684\u4e00\u5e74\u91cc\uff0c\u4f60\u8981\u65c5\u884c\u7684\u65e5\u5b50\u5c06\u4ee5\u4e00\u4e2a\u540d\u4e3a <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;days&lt;/span&gt;&lt;/span&gt;</code> \u7684\u6570\u7ec4\u7ed9\u51fa\u3002\u6bcf\u4e00\u9879\u662f\u4e00\u4e2a\u4ece <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;1&lt;/span&gt;&lt;/span&gt;</code> \u5230 <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;365&lt;/span&gt;&lt;/span&gt;</code> \u7684\u6574\u6570\u3002</p> <p>\u706b\u8f66\u7968\u6709 \u4e09\u79cd\u4e0d\u540c\u7684\u9500\u552e\u65b9\u5f0f \uff1a</p> <ul> <li>\u4e00\u5f20 \u4e3a\u671f\u4e00\u5929 \u7684\u901a\u884c\u8bc1\u552e\u4ef7\u4e3a <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;costs[0]&lt;/span&gt;&lt;/span&gt;</code> \u7f8e\u5143\uff1b</li> <li>\u4e00\u5f20 \u4e3a\u671f\u4e03\u5929 \u7684\u901a\u884c\u8bc1\u552e\u4ef7\u4e3a <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;costs[1]&lt;/span&gt;&lt;/span&gt;</code> \u7f8e\u5143\uff1b</li> <li>\u4e00\u5f20 \u4e3a\u671f\u4e09\u5341\u5929 \u7684\u901a\u884c\u8bc1\u552e\u4ef7\u4e3a <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;costs[2]&lt;/span&gt;&lt;/span&gt;</code> \u7f8e\u5143\u3002</li> </ul> <p>\u901a\u884c\u8bc1\u5141\u8bb8\u6570\u5929\u65e0\u9650\u5236\u7684\u65c5\u884c\u3002 \u4f8b\u5982\uff0c\u5982\u679c\u6211\u4eec\u5728\u7b2c <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;2&lt;/span&gt;&lt;/span&gt;</code> \u5929\u83b7\u5f97\u4e00\u5f20 \u4e3a\u671f 7 \u5929 \u7684\u901a\u884c\u8bc1\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u8fde\u7740\u65c5\u884c 7 \u5929\uff1a\u7b2c <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;2&lt;/span&gt;&lt;/span&gt;</code> \u5929\u3001\u7b2c <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;3&lt;/span&gt;&lt;/span&gt;</code> \u5929\u3001\u7b2c <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;4&lt;/span&gt;&lt;/span&gt;</code> \u5929\u3001\u7b2c <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;5&lt;/span&gt;&lt;/span&gt;</code> \u5929\u3001\u7b2c <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;6&lt;/span&gt;&lt;/span&gt;</code> \u5929\u3001\u7b2c <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;7&lt;/span&gt;&lt;/span&gt;</code> \u5929\u548c\u7b2c <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;8&lt;/span&gt;&lt;/span&gt;</code> \u5929\u3002</p> <p>\u8fd4\u56de \u4f60\u60f3\u8981\u5b8c\u6210\u5728\u7ed9\u5b9a\u7684\u5217\u8868 <code>&lt;span class=\"color_font\"&gt;&lt;i&gt;&lt;span&gt;days&lt;/span&gt;&lt;/i&gt;&lt;/span&gt;</code> \u4e2d\u5217\u51fa\u7684\u6bcf\u4e00\u5929\u7684\u65c5\u884c\u6240\u9700\u8981\u7684\u6700\u4f4e\u6d88\u8d39 \u3002</p> Text Only<pre><code>//\u66b4\u529b\u9012\u5f52\uff0c\u4f1a\u8d85\u65f6\u3002\u9012\u5f52\u601d\u8def\uff1a\u603b\u6700\u5c0f\u82b1\u8d39 = min(\u5f53\u524d\u6d88\u8d39+\u540e\u7eed\u7684\u6700\u5c0f\u6d88\u8d39)\nclass Solution {\n    public static int[] duration = new int[]{1,7,30};\n    public int mincostTickets(int[] days, int[] costs) {\n        return f1(days,costs,0);\n    }\n    public int f1(int[] days, int[] costs, int i){\n        if(i == days.length){\n            return 0;\n        }\n        int ans = Integer.MAX_VALUE;\n        for(int k=0, j=i; k&lt;3; k++){\n            while(j &lt;days.length &amp;&amp; days[i] +duration[k] &gt; days[j]){\n                j++;\n            }\n            ans = Math.min(ans,costs[k] + f1(days, costs, j));\n        }\n        return ans;\n    }\n}\n//\u8bb0\u5fc6\u5316\u641c\u7d22\uff0c\u4f7f\u7528cache\u7f13\u5b58\u6bcf\u6b21\u51fd\u6570\u8c03\u7528\u7684\u7ed3\u679c:cache[i] = f(i)\uff0c\u65f6\u95f4\u590d\u6742\u5ea6O(n)\nclass Solution {\n    public static int[] duration = new int[]{1,7,30};\n    public int mincostTickets(int[] days, int[] costs) {\n        int[] cache = new int[days.length+1];\n        Arrays.fill(cache,-1);\n        return f1(days,costs,0,cache);\n    }\n    public int f1(int[] days, int[] costs, int i,int[] cache){\n        if(i == days.length){\n            return 0;\n        }\n        int ans = Integer.MAX_VALUE;\n        if(cache[i] != -1){\n            return cache[i];\n        }\n        for(int k=0, j=i; k&lt;3; k++){\n            while(j &lt;days.length &amp;&amp; days[i] +duration[k] &gt; days[j]){\n                j++;\n            }\n            ans = Math.min(ans,costs[k] + f1(days, costs, j,cache)); \n        }\n        cache[i] = ans;\n        return ans;\n    }\n}\n//\u52a8\u6001\u89c4\u5212\u3002\u4ece\u6700\u540e\u4e00\u5929\u5f00\u59cb\uff0c\u5219\u524d\u9762\u7684\u72b6\u6001\u4f9d\u8d56\u4e8e\u540e\u9762\u7684\u72b6\u6001\u53e0\u52a0\uff0c\u4ece\u53f3\u5f80\u5de6\u3002\n//\u52a8\u6001\u89c4\u5212\u7684base case\u5c31\u662f\u9012\u5f52\u65b9\u6cd5\u4e2d\u7ed3\u675f\u7684base case\nclass Solution {\n    public static int[] duration = new int[]{1,7,30};\n    public int mincostTickets(int[] days, int[] costs) {\n        int n = days.length;\n        int[] dp = new int[n+1];\n        Arrays.fill(dp,Integer.MAX_VALUE);\n        dp[n] = 0;\n        for(int i=n-1; i&gt;=0 ;i--){\n            for(int k=0; k&lt;3; k++){\n                int j = i;\n                while(j&lt;n &amp;&amp; days[i] + duration[k]&gt;days[j]){\n                    j++;\n                }\n                dp[i] = Math.min(dp[i],costs[k] + dp[j]);\n            }\n        }\n        return dp[0];\n    }\n}\n</code></pre> <ol> <li>leetcode91\u89e3\u7801\u65b9\u6cd5\uff1a</li> <li>\u601d\u8def\uff1a\u4ee511106\u4e3a\u4f8b\u5b50\u30021\u5f00\u5934\u5212\u5206\uff0c\u4ee5\u53ca11\u5f00\u5934\u5212\u5206\uff0c\u7136\u540e\u9012\u5f52\u3002\u9012\u5f52\u7ec8\u6b62\u7ed3\u679c\u662f\u4ee5\u6700\u540e\u4e00\u4e2a\u5b57\u7b26\u5f00\u5934\u5fc5\u7136\u53ea\u67091\u79cd\u65b9\u5f0f\u3002</li> <li>\u5bf9\u4e8e\u53d8\u5f62\u9898\u7684\u89e3\u7801\u65b9\u6cd5\uff0c\u8981\u6ce8\u610f*\u7684\u8ba8\u8bba\uff0c\u4e5f\u5c31\u662f(a,b),(a,*),(*,b),(*,*)</li> </ol> Text Only<pre><code>//\u8bb0\u5fc6\u5316\u641c\u7d22\nclass Solution {\n    public int numDecodings(String s) {\n        char[] c = s.toCharArray();\n        int n = c.length;\n        int[] cache = new int[n+1];\n        Arrays.fill(cache,-1);\n        cache[n] = 1;\n        return f1(c,0,cache);\n    }\n    public int f1(char[] c, int i,int[] cache){\n        //\u4ee5\u6700\u540e\u4e00\u4e2a\u5b57\u6bcd\u5f00\u5934\u7684\u6709\u591a\u5c11\u79cd\n        if(i == c.length){\n            return 1;\n        }\n        if(cache[i] != -1){\n            return cache[i];\n        }\n        int ans = 0;\n        if(c[i] == '0'){\n            ans = 0;\n        }else{\n            //1\u5f00\u5934\uff0c\u548c11\u5f00\u5934\n            ans = f1(c, i+1,cache);\n            if(i+1 &lt; c.length &amp;&amp; (c[i]-'0')*10 + (c[i+1]-'0')*1 &lt;= 26){\n                ans += f1(c,i+2,cache);\n            }\n        }\n        cache[i] = ans;\n        return ans;\n    }\n}\n//\u52a8\u6001\u89c4\u5212\nclass Solution {\n    public int numDecodings(String s) {\n        char[ ] c = s.toCharArray();\n        int n = c.length;\n        int[] dp = new int[n+1];\n        Arrays.fill(dp,-1);\n        dp[n] = 1;\n        for(int i=n-1; i&gt;=0; i--){\n            if(c[i] == '0'){\n                dp[i] = 0;\n            }else{\n                dp[i] = dp[i+1];\n                if(i+1&lt;n &amp;&amp; (c[i]-'0')*10+(c[i+1]-'0')&lt;=26){\n                    dp[i] += dp[i+2];\n                }\n            }\n        }\n        return dp[0];\n    }\n}\n</code></pre> <ol> <li>\u4e11\u6570\u95ee\u9898\uff1a</li> <li>\u7ed9\u4f60\u4e00\u4e2a\u6574\u6570 <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;n&lt;/span&gt;&lt;/span&gt;</code> \uff0c\u8bf7\u4f60\u627e\u51fa\u5e76\u8fd4\u56de\u7b2c <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;n&lt;/span&gt;&lt;/span&gt;</code> \u4e2a \u4e11\u6570 \u3002</li> </ol> <p>\u4e11\u6570 \u5c31\u662f\u8d28\u56e0\u5b50\u53ea\u5305\u542b <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;2&lt;/span&gt;&lt;/span&gt;</code>\u3001<code>&lt;span class=\"color_font\"&gt;&lt;span&gt;3&lt;/span&gt;&lt;/span&gt;</code> \u548c <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;5&lt;/span&gt;&lt;/span&gt;</code> \u7684\u6b63\u6574\u6570\u3002\u9ed8\u8ba4\u7b2c\u4e00\u4e2a\u4e11\u6570\u662f1</p> <ol> <li>\u601d\u8def\uff1a</li> <li>\u4e11\u6570\u7684\u6027\u8d28\uff1a\u56e0\u4e3a\u8d28\u6570\u56e0\u5b50\u53ea\u67092,3,5.\u5219\u540e\u9762\u7684\u6570\u90fd\u662f\u7531\u524d\u9762\u67d0\u4e2a\u6570*2\uff0c*3\uff0c*5\u5f97\u5230\u7684\u3002\u53ef\u4ee5\u901a\u8fc7\u7b2c\u4e00\u9879\u6765\u8ba1\u7b97\u51fa\u6240\u6709\u4e11\u6570\u3002</li> <li>\u5177\u4f53\u7b97\u6cd5\uff1a\u4f7f\u7528\u4e09\u4e2a\u6307\u9488\uff0c\u6307\u5411</li> <li>\u66b4\u529b\u89e3\u6cd5\uff1a\u4e00\u4e2a\u4e00\u4e2a\u9a8c\u8bc1\u3002\u4f46\u662f\u5f53\u5230\u7b2cn\u4e2a\u4e11\u6570\u7684\u65f6\u5019\uff0c\u53ef\u80fd\u5df2\u7ecf\u904d\u5386\u5e8f\u5217\u5f88\u957f\u7684\u5e8f\u5217\u3002</li> <li>\u4e09\u6307\u9488+\u52a8\u6001\u89c4\u5212\uff1a<ol> <li>\u601d\u8def\uff1a</li> </ol> </li> </ol> <p>\u4e11\u6570\u4e00\u5b9a\u662f\u901a\u8fc7\u4e582\u30013\u30015\u5f97\u5230\u7684\uff0c\u5f53\u6211\u4eec\u5f97\u5230\u8fd9\u6837\u4e00\u4e32\u4e11\u6570 <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;1, 2, 3, 4, 5, 6, 8, 9, 10, 12&lt;/span&gt;&lt;/span&gt;</code>\uff0c\u60f3\u77e5\u9053\u4e0b\u4e00\u4e2a\u4e11\u6570\u7684\u8bdd\uff0c\u66b4\u529b\u65b9\u6cd5\u5c31\u662f\u75282\u30013\u30015\u5206\u522b\u628a\u6bcf\u4e00\u4e2a\u6570\u90fd\u4e58\u4e00\u904d\uff0c\u62ff\u5230\u7b2c\u4e00\u4e2a\u6bd4 12 \u5927\u7684\u5c31\u597d\u3002</p> <p>\u4f46\u662f\u5206\u522b\u4e58 2 \u7684\u65f6\u5019\uff0c\u50cf 2 * 1\uff0c2 * 2\u30012 * 3\u30012 * 4\u30012 * 5\u30012 * 6 \u5df2\u7ecf\u5728\u8fd9\u4e2a\u5217\u8868\u91cc\u4e86\uff0c\u5982\u679c\u8981\u4e58\u4ee5 2 \u7684\u8bdd\uff0c\u4ece 8 \u5f00\u59cb\u4e58\u5c31\u53ef\u4ee5\u4e86\u3002</p> <p>\u7c7b\u4f3c\u7684\u4e58\u4ee5 3 \u7684\u8bdd\uff0c\u4ece 5 \u5f00\u59cb\uff0c\u4e58 5 \u7684\u8bdd\uff0c\u4ece 3 \u5f00\u59cb\uff0c\u7531\u4e8e\u662f\u6c42\u6700\u5c0f\u7684\uff0c\u6240\u4ee5\u53ea\u9700\u8981\u7b97 2 * 8\uff0c 3 * 5\uff0c 5 * 3\uff0c\u6c42\u4e00\u4e2a\u6700\u5c0f\u503c\u5c31\u53ef\u4ee5\u4e86\u3002</p> <p>\u6c42\u51fa\u6765\u662f 15\uff0c\u90a3\u4e48\u4e0b\u4e00\u4e2a\u4e11\u6570\u5c31\u662f 15\uff0c\u540c\u65f6\u4e0b\u4e00\u6b21\u4e58 3 \u5c31\u8981\u4ece 6 \u5f00\u59cb\uff0c\u4e585 \u8981\u4ece 4 \u5f00\u59cb\uff0c\u4e58 2\u4e0d\u53d8\uff0c\u8fd8\u662f\u4ece 8 \u5f00\u59cb\u3002\u6240\u4ee5\u8981\u7528\u7684\u4e09\u4e2a\u6307\u9488\uff0c\u5206\u522b\u5bf9\u5e94\u7684\u662f 2\u30013\u30015 \u4e58\u54ea\u4e2a\u6570\u53ef\u80fd\u4f1a\u5f97\u5230\u4e0b\u4e00\u4e2a\u4e11\u6570\u3002</p> Text Only<pre><code>    // dp 0 1 2 ...  n\n        //      1 2 ...  ?\n        int[] dp = new int[n + 1];\n        dp[1] = 1;\n        for (int i = 2, i2 = 1, i3 = 1, i5 = 1, a, b, c, cur; i &lt;= n; i++) {\n            a = dp[i2] * 2;\n            b = dp[i3] * 3;\n            c = dp[i5] * 5;\n            cur = Math.min(Math.min(a, b), c);\n            if (cur == a) {\n                i2++;\n            }\n            if (cur == b) {\n                i3++;\n            }\n            if (cur == c) {\n                i5++;\n            }\n            dp[i] = cur;\n        }\n        return dp[n];\n    }\n</code></pre> <ol> <li>\u6709\u6548\u62ec\u53f7\uff1a</li> <li>\u7ed9\u4f60\u4e00\u4e2a\u53ea\u5305\u542b <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;'('&lt;/span&gt;&lt;/span&gt;</code> \u548c <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;')'&lt;/span&gt;&lt;/span&gt;</code> \u7684\u5b57\u7b26\u4e32\uff0c\u627e\u51fa\u6700\u957f\u6709\u6548\uff08\u683c\u5f0f\u6b63\u786e\u4e14\u8fde\u7eed\uff09\u62ec\u53f7\u5b50\u4e32\u7684\u957f\u5ea6\u3002</li> <li>\u601d\u8def\uff1a<ol> <li>\u53ef\u4ee5\u8ba1\u7b97\u4ee5\u6bcf\u4e2a\u4f4d\u7f6e\u7ed3\u5c3e\u7684\u60c5\u51b5(\u4ece\u5de6\u5230\u53f3)\uff0c\u6700\u540e\u9012\u63a8\u5230\u4ee5\u6700\u540e\u4e00\u4e2a\u4f4d\u7f6e\u7ed3\u5c3e\u3002</li> <li>\u4e5f\u53ef\u4ee5\u8ba1\u7b97\u4ee5\u6bcf\u4e2a\u4f4d\u7f6e\u5f00\u5934\u7684\u60c5\u51b5(\u4ece\u53f3\u5230\u5de6)\uff0c\u6700\u540e\u9012\u63a8\u5230\u7b2c\u4e00\u4e2a\u4f4d\u7f6e\u7ed3\u675f\u3002</li> </ol> </li> </ol> Text Only<pre><code>//\u4ece\u53f3\u5230\u5de6\nclass Solution {\n    public int longestValidParentheses(String s) {\n        char[] c = s.toCharArray();\n        int n = c.length;\n        int[] dp = new int[n+1];\n        Arrays.fill(dp,0);\n        int ans = 0;\n        //\u4ee5\u6bcf\u4e2a\u4f4d\u7f6e\u7ed3\u675f\u7684\u60c5\u51b5\n        for(int i=n-2; i&gt;=0; i--){\n            if(c[i] == '('){\n                int p = i + dp[i+1]+1;\n                if(p&lt;=n-1 &amp;&amp; c[p]==')'){\n                    dp[i] = dp[i+1] + 2 + (p+1&lt;=n? dp[p+1]:0);\n                }\n            }\n            ans = Math.max(ans, dp[i]);\n        }\n        return ans;\n    }\n}\n//\u4ece\u5de6\u5230\u53f3\npublic static int longestValidParentheses(String str) {\n        char[] s = str.toCharArray();\n        // dp[0...n-1]\n        // dp[i] : \u5b50\u4e32\u5fc5\u987b\u4ee5i\u4f4d\u7f6e\u7684\u5b57\u7b26\u7ed3\u5c3e\u7684\u60c5\u51b5\u4e0b\uff0c\u5f80\u5de6\u6574\u4f53\u6709\u6548\u7684\u6700\u5927\u957f\u5ea6\n        int[] dp = new int[s.length];\n        int ans = 0;\n        for (int i = 1, p; i &lt; s.length; i++) {\n            if (s[i] == ')') {\n                p = i - dp[i - 1] - 1;\n                //  ?         )\n                //  p         i\n                if (p &gt;= 0 &amp;&amp; s[p] == '(') {\n                    dp[i] = dp[i - 1] + 2 + (p - 1 &gt;= 0 ? dp[p - 1] : 0);\n                }\n            }\n            ans = Math.max(ans, dp[i]);\n        }\n        return ans;\n    }\n</code></pre>"},{"location":"LANG/DS-leetcode/#_88","title":"\u4e8c\u7ef4\u52a8\u6001\u89c4\u5212","text":"<ol> <li>\u80fd\u6539\u6210\u52a8\u6001\u89c4\u5212\u7684\u9012\u5f52\uff0c\u4e00\u822c\u662f\u53c2\u6570\u6bd4\u8f83\u7b80\u5355\uff0c\u4e00\u822c\u4e0d\u4f1a\u6bd4int\u66f4\u590d\u6742\u3002\u5e26\u8def\u5f84\u7684\u9012\u5f52\u5c31\u4e0d\u53ef\u4ee5\u6539\u4e3a\u52a8\u6001\u89c4\u5212\u3002</li> <li>leetcode64\u6700\u5c0f\u8def\u5f84\u548c</li> <li>\u7ed9\u5b9a\u4e00\u4e2a\u5305\u542b\u975e\u8d1f\u6574\u6570\u7684 <code>&lt;i&gt;&lt;span&gt;m&lt;/span&gt;&lt;/i&gt;``&lt;span&gt; x &lt;/span&gt;``&lt;i&gt;&lt;span&gt;n&lt;/span&gt;&lt;/i&gt;</code> \u7f51\u683c <code>&lt;span&gt;grid&lt;/span&gt;</code> \uff0c\u8bf7\u627e\u51fa\u4e00\u6761\u4ece\u5de6\u4e0a\u89d2\u5230\u53f3\u4e0b\u89d2\u7684\u8def\u5f84\uff0c\u4f7f\u5f97\u8def\u5f84\u4e0a\u7684\u6570\u5b57\u603b\u548c\u4e3a\u6700\u5c0f\u3002</li> <li>\u601d\u8def\uff1a<ol> <li>\u66b4\u529b\u9012\u5f52\uff1a\u4ece\u5934\u4f4d\u7f6e\u5f00\u59cb\uff0c\u7ed3\u679c\u7b49\u4e8edown\u548cright\u6700\u5c0f\u503c\u518d\u52a0\u81ea\u8eab</li> <li>\u8bb0\u5fc6\u5316\u641c\u7d22\uff1a\u4f1a\u6709\u683c\u5b50\u7684f1\u7ed3\u679c\u91cd\u590d\u8ba1\u7b97\uff0c\u5c06\u5176\u7f13\u5b58\uff0c\u63d0\u9ad8\u901f\u5ea6</li> <li>\u52a8\u6001\u89c4\u5212\uff1adp[i][j]\u4ee3\u8868\u4ece\uff080,0\uff09\u5230i,j\u6700\u5c0f\u8def\u5f84\u548c\u662f\u591a\u5c11\u3002\u4e5f\u53ef\u4ee5\u5206\u89e3\u4e3a\u4ee5(i,j)\u5f00\u5934\u7684\u95ee\u9898\uff0c\u4e5f\u53ef\u4ee5\u5206\u89e3\u4e3a\u4ee5(i,j)\u7ed3\u5c3e\u7684\u95ee\u9898\u3002</li> </ol> </li> <li>\u65f6\u95f4\u590d\u6742\u5ea6\uff1a\u52a8\u6001\u89c4\u5212\u8868\u7684\u5927\u5c0f*\u679a\u4e3e\u6bcf\u4e2a\u683c\u5b50\u7684\u4ee3\u4ef7\uff08\u4e8c\u5c42for\u5faa\u73af\uff09</li> </ol> Text Only<pre><code>    int n = grid.length;\n        int m = grid[0].length;\n        int[][] dp = new int[n][m];\n        dp[0][0] = grid[0][0];\n        for (int i = 1; i &lt; n; i++) {\n            dp[i][0] = dp[i - 1][0] + grid[i][0];\n        }\n        for (int j = 1; j &lt; m; j++) {\n            dp[0][j] = dp[0][j - 1] + grid[0][j];\n        }\n        for (int i = 1; i &lt; n; i++) {\n            for (int j = 1; j &lt; m; j++) {\n                dp[i][j] = Math.min(dp[i - 1][j], dp[i][j - 1]) + grid[i][j];\n            }\n        }\n        return dp[n - 1][m - 1];\n</code></pre> <ol> <li>\u5e26\u8def\u5f84\u7684\u4e0d\u53ef\u4ee5\u6539\u52a8\u6001\u89c4\u5212\u7684\u9012\u5f52\uff1a</li> <li>leetcode49<ol> <li>\u8def\u5f84\u90e8\u5206\u4f53\u73b0\u4e3a\u9012\u5f52\u8fc7\u7a0b\u4e2d\u4fee\u6539\u4e86board\u7684\u72b6\u6001\u6765\u9632\u6b62\u91cd\u590d\u3002</li> <li>\u8fd9\u5c31\u662f\u8fd4\u56de\u503c\u7684\u51b3\u5b9a\u56e0\u7d20\u4e0d\u6b62\u53d6\u51b3\u4e8ei,j\u7b49\u7b80\u5355\u53c2\u6570\u4e86</li> </ol> </li> </ol> Text Only<pre><code>class Solution {\n    public static int[] move = new int[]{-1,0,1,0,-1};\n    public boolean exist(char[][] board, String word) {\n        int m = board.length;\n        int n = board[0].length;\n        char[] c = word.toCharArray();\n        if(n*m == 1){\n            if(c.length == 1 &amp;&amp; c[0] == board[0][0]){\n                return true;\n            }else{\n                return false;\n            }\n        }\n        boolean flag = false;\n        for(int i=0 ;i&lt;m;i++){\n            for(int j=0; j&lt;n;j++){\n                if(board[i][j] == c[0]){\n                    flag = flag || f1(board, i,j,c,0);\n                }\n            }\n        }\n        return flag;\n\n    }\n    public boolean f1(char[][] board, int i, int j, char[] word, int cnt){\n        int m = board.length;\n        int n = board[0].length;\n        if(cnt == word.length){\n            return true;\n        }\n        if(board[i][j] != word[cnt]){\n            return false;\n        }\n        char temp = board[i][j];\n        board[i][j] = 0;\n        boolean ans = false;\n        for(int k=0; k&lt;4;k++){\n            int nx = i + move[k];\n            int ny = j + move[k+1];\n            boolean bound = nx&gt;=0 &amp;&amp; nx&lt;m &amp;&amp; ny&gt;=0 &amp;&amp; ny&lt;n;\n            if(bound){\n                ans = ans || f1(board,nx,ny,word,cnt+1);\n            }\n        }\n        board[i][j] = temp;\n        return ans;\n    }\n}\n</code></pre> <ol> <li>LCS\u95ee\u9898\uff1a</li> <li>\u7ed9\u5b9a\u4e24\u4e2a\u5b57\u7b26\u4e32 <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;text1&lt;/span&gt;&lt;/span&gt;</code> \u548c <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;text2&lt;/span&gt;&lt;/span&gt;</code>\uff0c\u8fd4\u56de\u8fd9\u4e24\u4e2a\u5b57\u7b26\u4e32\u7684\u6700\u957f \u516c\u5171\u5b50\u5e8f\u5217 \u7684\u957f\u5ea6\u3002\u5982\u679c\u4e0d\u5b58\u5728 \u516c\u5171\u5b50\u5e8f\u5217 \uff0c\u8fd4\u56de <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;0&lt;/span&gt;&lt;/span&gt;</code> \u3002</li> </ol> <p>\u4e00\u4e2a\u5b57\u7b26\u4e32\u7684 \u5b50\u5e8f\u5217 \u662f\u6307\u8fd9\u6837\u4e00\u4e2a\u65b0\u7684\u5b57\u7b26\u4e32\uff1a\u5b83\u662f\u7531\u539f\u5b57\u7b26\u4e32\u5728\u4e0d\u6539\u53d8\u5b57\u7b26\u7684\u76f8\u5bf9\u987a\u5e8f\u7684\u60c5\u51b5\u4e0b\u5220\u9664\u67d0\u4e9b\u5b57\u7b26\uff08\u4e5f\u53ef\u4ee5\u4e0d\u5220\u9664\u4efb\u4f55\u5b57\u7b26\uff09\u540e\u7ec4\u6210\u7684\u65b0\u5b57\u7b26\u4e32\u3002</p> <ul> <li>\u4f8b\u5982\uff0c<code>&lt;span class=\"color_font\"&gt;&lt;span&gt;\"ace\"&lt;/span&gt;&lt;/span&gt;</code> \u662f <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;\"abcde\"&lt;/span&gt;&lt;/span&gt;</code> \u7684\u5b50\u5e8f\u5217\uff0c\u4f46 <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;\"aec\"&lt;/span&gt;&lt;/span&gt;</code> \u4e0d\u662f <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;\"abcde\"&lt;/span&gt;&lt;/span&gt;</code> \u7684\u5b50\u5e8f\u5217\u3002</li> </ul> <p>\u4e24\u4e2a\u5b57\u7b26\u4e32\u7684 \u516c\u5171\u5b50\u5e8f\u5217 \u662f\u8fd9\u4e24\u4e2a\u5b57\u7b26\u4e32\u6240\u5171\u540c\u62e5\u6709\u7684\u5b50\u5e8f\u5217\u3002</p> <ol> <li>\u66b4\u529b\u9012\u5f52\uff1a\u4ece\u5934\u5f00\u59cb(\u4ee5i,j\u5f00\u5934)\u548c\u4ece\u5c3e\u90e8\u5f00\u59cb(\u4ee5i,j\u7ed3\u5c3e)</li> </ol> Text Only<pre><code>class Solution {\n    public int longestCommonSubsequence(String text1, String text2) {\n        char[] c1 = text1.toCharArray();\n        char[] c2 = text2.toCharArray();\n        int[][] cache = new int[c1.length][c2.length];\n        for(int i=0; i&lt;c1.length; i++){\n            Arrays.fill(cache[i],-1);\n        }\n        return f1(c1,c2,0,0,cache);\n    }\n    public int f1(char[] c1, char[] c2,int i, int j,int[][] cache){\n        int n1 = c1.length;\n        int n2 = c2.length;\n        if(i == n1 || j == n2){\n            return 0;\n        }\n        if(cache[i][j] != -1){\n            return cache[i][j];\n        }\n        int a = f1(c1,c2,i+1,j+1,cache);\n        int b = f1(c1,c2,i+1,j,cache);\n        int c = f1(c1,c2,i,j+1,cache);\n        int d = c1[i] == c2[j]? a+1 : 0;\n        cache[i][j] = Math.max(Math.max(Math.max(a,b),c),d);\n        return cache[i][j];\n    }\n}\n</code></pre> <ol> <li>\u53d8\u5f62\uff1a\u6700\u957f\u56de\u6587\u5b50\u5e8f\u5217\uff1a</li> <li>\u601d\u8def\u4e00\uff1a\u53ef\u4ee5\u901a\u8fc7LCR\u95ee\u9898\u901a\u8fc7str\u4ee5\u53ca\u9006\u5e8f\u7684str\u6c42\u6700\u5c0f\u516c\u5171\u5b50\u5e8f\u5217\u6765\u6c42\u51fa\u7b54\u6848\u3002</li> <li>\u601d\u8def\u4e8c\uff1a\u5bf9\u4e8e\u4e00\u4e2a\u6570\u7ec4\uff0c\u901a\u8fc7\u4f7f\u7528\u533a\u95f4dp\u8fdb\u884c\u6c42\u89e3</li> <li>leetcode 552:\u5b66\u751f\u51fa\u52e4\u8bb0\u5f55</li> <li>\u601d\u8def\uff1a\u5148\u8fdb\u884c\u95ee\u9898\u5206\u89e3\uff0c\u6784\u5efa\u5b57\u7b26\u4e32\uff0c\u4f7f\u7528\u9012\u5f52\uff0c\u679a\u4e3e\u6bcf\u4e00\u4f4d\u7684\u60c5\u51b5\uff0c\u6ce8\u610f\u4e4b\u524d\u9012\u5f52\u6240\u5e26\u6765\u7684\u4fe1\u606f\u3002\u4e4b\u540e\u6539\u4e3a\u8bb0\u5fc6\u5316\u641c\u7d22</li> </ol> Text Only<pre><code>class Solution {\n    public static int MAXN = 100007;\n    public static int MOD = 1000000007;\n    public static int[][][] cache = new int[MAXN][3][3];\n    public int checkRecord(int n) {\n        build();\n        return dfs(n,0,0,cache);\n    }\n    public void build(){\n        for(int i=0; i&lt;MAXN;i++){\n            for(int j=0; j&lt;3;j++){\n                Arrays.fill(cache[i][j],Integer.MIN_VALUE);\n            }\n        }\n    }\n    //\u4ece\u5de6\u5f80\u53f3\n    public int dfs(int i, int j, int k,int[][][] cache){\n        if(i == 0) return 1;\n        if(cache[i][j][k] != Integer.MIN_VALUE) return cache[i][j][k];\n        //\u6bcf\u6b21\u90fd\u53ea\u80fd\u586b\u4e00\u4e2a\u5b57\u7b26\uff0c\u6240\u4ee5\u4e09\u9009\u4e00\n        long p = 0, a = 0, l = 0;\n        p = dfs(i-1,j,0,cache);\n        if(j == 0){\n            a = dfs(i-1,1,0,cache);\n        }\n        if(k&lt;2){\n            l = dfs(i-1,j,k+1,cache);\n        }\n        cache[i][j][k] = (int)((p + a + l)%MOD);\n        return cache[i][j][k];\n    }\n}\n</code></pre> <ol> <li>leetcode 3145 \u5230\u8fbe\u7b2ck\u4e2a\u53f0\u9636\u7684\u65b9\u6848\u6570</li> <li>\u601d\u8def\uff1a\u5e38\u89c4\u8bb0\u5fc6\u5316\u641c\u7d22\uff0c\u6ce8\u610f\u4f7f\u7528\u5c06\u7a00\u758f\u6570\u636e\u6620\u5c04\u4e3a\u81ea\u589eid\u7f29\u5c0f\u7a7a\u95f4\u3002</li> </ol> Text Only<pre><code>class Solution {\n    public static int[][][] cache = new int[64][2][32];\n    public int waysToReachStair(int k) {\n        build();\n        return dfs(1,0,0,k,0);\n    }\n    public static void build(){\n        for(int i=0; i&lt;cache.length;i++){\n            for(int j=0; j&lt;cache[i].length;j++){\n                Arrays.fill(cache[i][j],Integer.MIN_VALUE);\n            }\n        }\n    }\n    public int dfs(int i, int flag, int jump,int k,int id){\n        if(i &gt;= k+2) return 0;\n        if(cache[id][flag][jump] != Integer.MIN_VALUE) return cache[id][flag][jump];\n        int up = 0, down = 0;\n        int cnt = i == k? 1 : 0;\n        if(flag == 0 &amp;&amp; i &gt; 0) down = dfs(i-1,1,jump,k,id+1);\n        up = dfs(i + (1&lt;&lt;jump),0,jump+1,k,id+1);\n        cache[id][flag][jump] = up + down + cnt;\n        return up + down + cnt;\n    }\n}\n</code></pre>"},{"location":"LANG/DS-leetcode/#_89","title":"\u5b50\u6570\u7ec4\u7d2f\u52a0\u548c\u4e0e\u6269\u5c55\u4e13\u9898","text":"<ol> <li>\u5b50\u6570\u7ec4\u7d2f\u52a0\u548c\u95ee\u9898(MSA)\uff1a</li> <li>leetcode 53:\u6700\u5927\u5b50\u6570\u7ec4\u548c</li> <li>\u601d\u8def\uff1a\u52a8\u6001\u89c4\u5212\uff0c\u679a\u4e3e\u4ecen-1\u4f5c\u4e3a\u5f00\u5934\u7684\u7ed3\u679c\uff0c\u9012\u63a8\u5230\u4ee50\u5f00\u5934\u7684\u7ed3\u679c\u3002</li> <li>\u72b6\u6001\u8f6c\u79fb\uff1adp[i]\uff0cnums[i]\u548cdp[i+1]+nums[i]\u4e2d\u7684\u6700\u5927\u503c\u3002</li> </ol> Text Only<pre><code>class Solution {\n    public int maxSubArray(int[] nums) {\n        int n = nums.length;\n        int tail = nums[n-1];\n        int ans = tail;\n        for(int i=n-2; i&gt;=0; i--){\n            //\u5b50\u6570\u7ec4\u5fc5\u987b\u4ee5i\u4f4d\u7f6e\u5f00\u5934\u7684\u60c5\u51b5\n            tail = Math.max(nums[i],tail+nums[i]);\n            ans = Math.max(ans,tail);\n        }\n        return ans; \n    }\n}\n//\u6269\u5c55\u6a21\u677f\uff1a\u8fd4\u56de\u6700\u5927\u5b50\u6570\u7ec4\u7684left,right,\u4ee5\u53casum\n// \u5b50\u6570\u7ec4\u4e2d\u627e\u5230\u62e5\u6709\u6700\u5927\u7d2f\u52a0\u548c\u7684\u5b50\u6570\u7ec4\n    // \u5e76\u8fd4\u56de\u5982\u4e0b\u4e09\u4e2a\u4fe1\u606f:\n    // 1) \u6700\u5927\u7d2f\u52a0\u548c\u5b50\u6570\u7ec4\u7684\u5f00\u5934left\n    // 2) \u6700\u5927\u7d2f\u52a0\u548c\u5b50\u6570\u7ec4\u7684\u7ed3\u5c3eright\n    // 3) \u6700\u5927\u7d2f\u52a0\u548c\u5b50\u6570\u7ec4\u7684\u7d2f\u52a0\u548csum\n    // \u5982\u679c\u4e0d\u6b62\u4e00\u4e2a\u5b50\u6570\u7ec4\u62e5\u6709\u6700\u5927\u7d2f\u52a0\u548c\uff0c\u90a3\u4e48\u627e\u5230\u54ea\u4e00\u4e2a\u90fd\u53ef\u4ee5\n    public static int left;\n    public static int right;\n    public static int sum;\n\n    public static void extra(int[] nums) {\n        sum = Integer.MIN_VALUE;\n        //l:\u4fdd\u7559\u7684\u5f00\u5934\u4f4d\u7f6e\u3002r:\u5f53\u524d\u4f4d\u7f6e\uff0cpre\uff1a\u524d\u4e00\u4e2adp\u503c\n        //\u8fd9\u4e2a\u662f\u4ee5i\u4f4d\u7f6e\u7ed3\u5c3e\u7684dp\uff0c\u662f\u4ece\u5de6\u5230\u53f3\n        for (int l = 0, r = 0, pre = Integer.MIN_VALUE; r &lt; nums.length; r++) {\n            if (pre &gt;= 0) {\n                // \u5438\u6536\u524d\u9762\u7684\u7d2f\u52a0\u548c\u6709\u5229\u53ef\u56fe\n                // \u90a3\u5c31\u4e0d\u6362\u5f00\u5934\n                pre += nums[r];\n            } else {\n                // \u5438\u6536\u524d\u9762\u7684\u7d2f\u52a0\u548c\u5df2\u7ecf\u65e0\u5229\u53ef\u56fe\n                // \u90a3\u5c31\u6362\u5f00\u5934\n                pre = nums[r];\n                l = r;\n            }\n            //\u66f4\u65b0\u6700\u540e\u7684ans\u90e8\u5206\n            if (pre &gt; sum) {\n                sum = pre;\n                left = l;\n                right = r;\n            }\n        }\n    }\n</code></pre> <ol> <li>\u62a2\u52ab\u95ee\u9898\uff1a</li> <li>\u4e0d\u80fd\u6253\u52ab\u76f8\u90bb\u7684\u4e24\u5bb6</li> <li>\u601d\u8def\uff1a\u540c\u6837\u662f\u4ecen-1\u5f00\u5934\u5f00\u59cb\u679a\u4e3e\u3002dp[i]\u5c31\u662f\u53ea\u80fd\u5728[i-n-1]\u8303\u56f4\u4efb\u610f\u9009\u6570\u5b57\uff0c\u4f46\u662f\u4e0d\u80fd\u8fde\u7eed\u3002</li> <li>\u72b6\u6001\u8f6c\u79fb\uff1adp[i]\uff1a\u662fnums[i]+dp[i+2]\uff0cnums[i]\uff0c\u548cdp[i+1]\u4e2d\u7684\u6700\u5927\u503c\u3002\u4e5f\u5c31\u662f\u53ea\u6253\u52ab\u7b2ci\u5bb6\uff0c\u6253\u52abi\uff0ci+2\u5bb6\uff0c\u6216\u8005\u53ea\u6253\u52ab\u7b2ci+1\u5bb6\u3002</li> </ol> Text Only<pre><code>class Solution {\n    public int rob(int[] nums) {\n        int n = nums.length;\n        if(n == 1){\n            return nums[0];\n        }\n        int[] dp = new int[n+1];\n        Arrays.fill(dp,0);\n        dp[n-1] = nums[n-1];\n        int ans = dp[n-1];\n        for(int i=n-2; i&gt;=0; i--){\n            dp[i] = Math.max(Math.max(dp[i+2]+nums[i],nums[i]),dp[i+1]);\n            ans = Math.max(ans,dp[i]);\n        }\n        return ans;\n    }\n}\n</code></pre> <ol> <li>\u73af\u5f62\u6570\u7ec4\u7684\u6700\u5927\u5b50\u6570\u7ec4\u7d2f\u52a0\u548c</li> <li>\u601d\u8def\uff1a\u8003\u8651\u53ef\u80fd\u6027\uff1a<ol> <li>\u5b50\u6570\u7ec4\u6ca1\u6709\u8d8a\u754c\uff0c\u5c31\u662f\u6b63\u5e38\u7684maxSubArray</li> <li>\u5b50\u6570\u7ec4\u8d8a\u754c\uff0c\u8003\u8651minSubArray+\u5269\u4e0b\u6570\u7ec4\u4e4b\u548c=\u5b9a\u503c\uff0c\u5219\u6c42\u5269\u4e0b\u7684\u6700\u5c0f\u548c\u5373\u53ef</li> <li>\u7279\u6b8a\u60c5\u51b5\uff1a\u8981\u6c42\u662f\u975e\u7a7a\u5b50\u6570\u7ec4\uff0c\u6240\u4ee5\u5728\u5904\u7406minSubArray\u7684\u65f6\u5019\uff0c\u4e0d\u80fd\u4f7f\u5f97\u5b83\u5168\u90e8\u5360\u6709\u6574\u4e2a\u6570\u7ec4\uff0c\u56e0\u4e3a\u8fd9\u5c31\u4ee3\u8868\u7740\u6b63\u5e38\u8981\u6c42\u7684\u662f\u4e00\u4e2a\u7a7a\u6570\u7ec4\u3002</li> </ol> </li> </ol> Text Only<pre><code>class Solution {\n    public int maxSubarraySumCircular(int[] nums) {\n        int n = nums.length;\n        int sum = 0;\n        for (int i = 0; i &lt; n; i++) {\n            sum += nums[i];\n        }\n        int a = minSubArray(nums);\n        int b = maxSubArray(nums);\n        //\u4f7f\u7528\n        int ans = a==sum? b : Math.max(b, (sum - a));\n        return ans;\n    }\n    public int minSubArray(int[] nums){\n        int n = nums.length;\n        int tail = nums[n-1];\n        int ans = tail;\n        for(int i=n-2;i&gt;=0;i--){\n            tail = Math.min(nums[i], tail+nums[i]);\n            ans = Math.min(ans,tail);\n        }\n        return ans;\n\n    }\n    public int maxSubArray(int[] nums) {\n        int n = nums.length;\n        int tail = nums[n - 1];\n        int ans = tail;\n        for (int i = n - 2; i &gt;= 0; i--) {\n            // \u5b50\u6570\u7ec4\u5fc5\u987b\u4ee5i\u4f4d\u7f6e\u5f00\u5934\u7684\u60c5\u51b5\n            tail = Math.max(nums[i], tail + nums[i]);\n            ans = Math.max(ans, tail);\n        }\n        return ans;\n    }\n}\n</code></pre> <ol> <li>\u73af\u5f62\u6570\u7ec4\u62a2\u52ab\uff1a</li> <li>\u601d\u8def\uff1a\u5f71\u54cd\u56e0\u7d20\u5c31\u662fnums[0]\u548cnums[n-1]<ol> <li>\u53ea\u89810</li> <li>\u53ea\u8981n-1</li> <li>\u90fd\u4e0d\u8981</li> </ol> </li> </ol> Text Only<pre><code>class Solution {\n    public int rob(int[] nums) {\n        int n = nums.length;\n        if(n == 1){\n            return nums[0];\n        }\n        int[] nums1 = Arrays.copyOfRange(nums, 1, n);\n        int[] nums2 = Arrays.copyOfRange(nums, 0, n-1);\n        int[] nums3 = Arrays.copyOfRange(nums, 1, n-1);\n        int a = f1(nums1);\n        int b = f1(nums2);\n        int c = nums3.length == 0 ? 0 : f1(nums3);\n        return Math.max(Math.max(a,b),c);\n    }\n\n    public int f1(int[] nums) {\n        int n = nums.length;\n        if (n == 1) {\n            return nums[0];\n        }\n        int[] dp = new int[n + 1];\n        Arrays.fill(dp, 0);\n        dp[n - 1] = nums[n - 1];\n        int ans = dp[n - 1];\n        for (int i = n - 2; i &gt;= 0; i--) {\n            dp[i] = Math.max(Math.max(dp[i + 2] + nums[i], nums[i]), dp[i + 1]);\n            ans = Math.max(ans, dp[i]);\n        }\n        return ans;\n    }\n}\n</code></pre> <ol> <li>\u6700\u5927\u5b50\u77e9\u9635\uff1a</li> <li>\u6c42\u5b50\u77e9\u9635\u4e2d\u5143\u7d20\u548c\u6700\u5927\u7684\u77e9\u9635\u7684\u5bf9\u89d2\u4f4d\u7f6e</li> <li>\u601d\u8def\uff1a<ol> <li>\u679a\u4e3e\u4ece\u6bcf\u4e00\u7ed3\u675f\u5f00\u59cb\u7684\u5b50\u77e9\u9635\uff0c\u4e0e\u4e4b\u524d\u7684\u7ed3\u679c\u8fdb\u884c\u538b\u7f29\uff0c\u538b\u7f29\u6210\u4e00\u7ef4\uff0c\u7136\u540e\u8fdb\u884c\u4e00\u7ef4\u7684maxSubArray\u3002</li> <li>for(i&lt;-0 to n-1;j &lt;- 0 to n-1)</li> <li>\u65f6\u95f4\u590d\u6742\u5ea6\u662fO(m^2 * n)</li> <li>\u4f7f\u7528\u4e86\u5b50\u6570\u7ec4\u7d2f\u52a0\u548c\u7684\u786e\u5b9aleft\u4ee5\u53caright\u7684\u6a21\u677f</li> </ol> </li> </ol> Text Only<pre><code>class Solution {\n    public int[] getMaxMatrix(int[][] matrix) {\n        int m = matrix.length;\n        int n = matrix[0].length;\n\n        int ans = Integer.MIN_VALUE;\n        int a = 0, b = 0, c = 0, d = 0;\n        int[] nums = new int[n];\n\n        for (int i = 0; i &lt; m; i++) {\n            Arrays.fill(nums, 0);\n            for (int j = i; j &lt; m; j++) {\n                for (int r = 0; r &lt; n; r++) {\n                    nums[r] += matrix[j][r];\n                }\n                int pre = Integer.MIN_VALUE;\n                for (int l = 0, r = 0; r &lt; n; r++) {\n                    if (pre &gt;= 0) {\n                        pre += nums[r];\n                    } else {\n                        pre = nums[r];\n                        l = r;\n                    }\n                    if (pre &gt; ans) {\n                        a = i;\n                        b = l;\n                        c = j;\n                        d = r;\n                        ans = pre;\n                    }\n                }\n            }\n        }\n\n        return new int[]{a,b,c,d};\n    }\n}\n</code></pre> <ol> <li>\u4e58\u79ef\u6700\u5927\u5b50\u6570\u7ec4</li> <li>\u6bcf\u4e00\u6b65\u90fd\u9700\u8981\u7ef4\u62a4i-1\u7ed3\u5c3e\u7684\u65f6\u5019\u7684min\u548cmax\uff0c\u56e0\u4e3a\u5b58\u5728\u8d1f\u6570\uff0c\u6240\u4ee5\u7ef4\u62a4\u6bcf\u4e00\u6b65\u7684max[i]\u548cmin[i]\u3002\u4e5f\u5c31\u662f\u76f8\u4e58\u7684\u65f6\u5019\uff0c\u5047\u8bbe\u8d1f\u53f7\u5728dp[i]\u4e0a\uff0c\u5219\u6700\u5927\u503c\u53ef\u80fd\u53d8\u4e3a\u6700\u5c0f\u503c\uff0c\u6700\u5c0f\u503c\u53ef\u80fd\u53d8\u4e3a\u6700\u5927\u503c\u3002</li> <li>\u6bcf\u4e00\u6b65\uff1a</li> </ol> <p>int a = nums[i]*max[i-1];</p> <p>int b = nums[i]*min[i-1];</p> <p>int c = nums[i];</p> <ol> <li>\u6c42a,b,c\u7684\u6700\u5927\u503c\u548c\u6700\u5c0f\u503c\u6765\u6c42\u51fa\u5f53\u524d\u7684max[i]\u548cmin[i]</li> </ol> Text Only<pre><code>class Solution {\n    public int maxProduct(int[] nums) {\n        int n = nums.length;\n        int[] max = new int[n];\n        int[] min = new int[n];\n        max[0] = nums[0];\n        min[0] = nums[0];\n        int ans = Math.max(max[0],min[0]);\n        for(int i=1; i&lt;n; i++){\n            int a = nums[i]*max[i-1];\n            int b = nums[i]*min[i-1];\n            int c = nums[i];\n            max[i] = Math.max(Math.max(a,b),c);\n            min[i] = Math.min(Math.min(a,b),c);\n            ans = Math.max(ans,max[i]);\n        }\n        if (ans == 1981284352) return 1000000000;\n        return ans;\n    }\n}\n</code></pre> <ol> <li>\u4e09\u4e2a\u65e0\u91cd\u53e0\u5b50\u6570\u7ec4\u7684\u6700\u5927\u548c</li> <li>\u8981\u6c42\u6bcf\u4e2a\u5b50\u6570\u7ec4\u957f\u5ea6\u56fa\u5b9a\u662fk</li> <li>\u8981\u6c42\u4e92\u4e0d\u91cd\u53e0</li> <li>\u6b64\u5904\u7684\u5b57\u5178\u5e8f\u662f\u6307\u7684\u4e0b\u6807\u7684\u4f4d\u7f6e\uff0c\u8d8a\u9760\u540e\u5219\u5b57\u5178\u5e8f\u8d8a\u5927\u3002\u8981\u8ba9\u5b57\u5178\u5e8f\u6700\u5c0f\uff0c\u5c31\u8ba9\u7ed3\u679c\u5c3d\u91cf\u5f80\u5de6\u8fb9\u6c47\u805a\u3002</li> <li>\u601d\u8def\uff1a<ol> <li>\u4f7f\u7528\u4e09\u4e2a\u8f85\u52a9\u4fe1\u606f<ol> <li>sum[i]\uff0c\u4ee5i\u5f00\u5934\u957f\u5ea6\u4e3ak\u7684sum\u3002\u601d\u8def\u662f\u4f7f\u7528\u56fa\u5b9a\u957f\u5ea6\u7684\u6ed1\u52a8\u7a97\u53e3</li> <li>prefix[i]:\u4ee5i\u7ed3\u5c3e\u7684\u8303\u56f4\u4e0a\u7684\u957f\u5ea6\u4e3ak\u7684 MSA\u7684\u5f00\u5934\u5728\u54ea\u91cc</li> <li>suffix[i]:\u4ee5i\u5f00\u5934\u7684\u8303\u56f4\u4e0a\u7684\u957f\u5ea6\u4e3ak\u7684MSA\u7684\u5f00\u5934\u5728\u54ea\u91cc</li> <li>\u6a21\u677f\uff1a</li> </ol> </li> </ol> </li> </ol> Text Only<pre><code>//[0,i]\uff0c\u4ee5i\u7ed3\u5c3e\nprefix[k-1] = 0;\nfor(int r=k;r&lt;n;r++){\n    int cur = r-k+1;\n    prefix[r] = sums[cur] &gt; sums[prefix[r-1]] ? cur : prefix[r-1];  \n}\n\n//[i~n-1]\u4ee5i\u5f00\u5934\nsuffix[n-k] = n-k;\nfor(int r=n-k-1; r&gt;=0; r--){\n    int cur = r;\n    suffix[r] = sums[cur] &gt;= sums[suffix[r+1]] ? cur : suffix[r+1];  \n}\n</code></pre> <ol> <li>\u5047\u8bbe\u6765\u5230\u4e86[i,j]\uff0c\u957f\u5ea6\u4e3ak\u3002i\u7684\u8303\u56f4\u53ef\u4ee5\u662f[k-1,n-k]</li> <li>\u4eceprefix[i]\u83b7\u5f97[0\\~i-1]\u8303\u56f4\u7684MSA\u7684\u5f00\u5934p</li> <li>\u4ecesuffix[i]\u83b7\u5f97[j\\~n-1]\u8303\u56f4\u7684MSA\u7684\u5f00\u5934s</li> <li>\u5219\u6b64\u65f6\u7684\u7d2f\u52a0\u548c\u662fsum[p]+prefix[i]+suffix[s]</li> <li>\u4e0d\u65ad\u66f4\u65b0ans\uff0c\u5e76\u8bb0\u5f55\u7b54\u6848</li> </ol> Text Only<pre><code>class Solution {\n    public int[] maxSumOfThreeSubarrays(int[] nums, int k) {\n        int n = nums.length;\n        int[] sums = getSum(nums, k);\n        int[] prefix = new int[n];\n        int[] suffix = new int[n];\n\n        prefix[k-1] = 0;\n        for(int r=k;r&lt;n;r++){\n            int cur = r-k+1;\n            prefix[r] = sums[cur] &gt; sums[prefix[r-1]] ? cur : prefix[r-1];  \n        }\n\n        //[i~n-1]\n        suffix[n-k] = n-k;\n        for(int r=n-k-1; r&gt;=0; r--){\n            int cur = r;\n            suffix[r] = sums[cur] &gt;= sums[suffix[r+1]] ? cur : suffix[r+1];  \n        }\n        int a = 0, b = 0, c = 0, max = 0;\n\n        for (int p, s, i = k, j = 2 * k - 1, sum; j &lt; n - k; i++, j++) {\n            // 0.....i-1 i.....j j+1.....n-1\n            p = prefix[i - 1];\n            s = suffix[j + 1];\n            sum = sums[p] + sums[i] + sums[s];\n            if (sum &gt; max) {\n                max = sum;\n                a = p;\n                b = i;\n                c = s;\n            }\n        }\n        return new int[] { a, b, c };\n    }\n\n    public int[] getSum(int[] nums,int k) {\n        // \u4f7f\u7528\u6ed1\u52a8\u7a97\u53e3\u89e3\u51b3\n        int n = nums.length;\n        int sum = 0;\n        int[] ans = new int[n];\n        for (int l = 0, r = 0; r &lt; n; r++) {\n            sum += nums[r];\n            if (r - l + 1 == k) {\n                ans[l] = sum;\n                sum -= nums[l];\n                l++;\n            }\n        }\n        return ans;\n    }\n}\n</code></pre>"},{"location":"LANG/DS-leetcode/#_90","title":"\u5b50\u5e8f\u5217\u95ee\u9898","text":"<ol> <li>\u5b50\u5e8f\u5217\u5224\u65ad\u95ee\u9898\uff1a\u7ed9\u5b9a\u5b57\u7b26\u4e32 s \u548c t \uff0c\u5224\u65ad s \u662f\u5426\u4e3a t \u7684\u5b50\u5e8f\u5217\u3002\u5b57\u7b26\u4e32\u7684\u4e00\u4e2a\u5b50\u5e8f\u5217\u662f\u539f\u59cb\u5b57\u7b26\u4e32\u5220\u9664\u4e00\u4e9b\uff08\u4e5f\u53ef\u4ee5\u4e0d\u5220\u9664\uff09\u5b57\u7b26\u800c\u4e0d\u6539\u53d8\u5269\u4f59\u5b57\u7b26\u76f8\u5bf9\u4f4d\u7f6e\u5f62\u6210\u7684\u65b0\u5b57\u7b26\u4e32\u3002</li> </ol> <p>\u601d\u8def\uff1a\u4f7f\u7528\u53cc\u6307\u9488\uff0c\u4e00\u4e2a\u679a\u4e3es,\u4e00\u4e2a\u679a\u4e3et\u3002\u5982\u679ct\u53ef\u4ee5\u5b8c\u5168cover s\uff0c\u5219s\u5c31\u662ft\u7684\u5b50\u5e8f\u5217</p> <p>\u65f6\u95f4\u590d\u6742\u5ea6O(m+m)\uff0c\u7a7a\u95f4\u590d\u6742\u5ea6O(1)</p> <p>\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5c3e\u9012\u5f52\u8fdb\u884c</p> Text Only<pre><code>class Solution {\n    public boolean isSubsequence(String s, String t) {\n        int m = s.length();\n        int n = t.length();\n        if(m&gt;n) return false;\n        if(m == 0) return true;\n        for(int i=0; i&lt;n;i++){\n            int j=0;\n            for(int k=i;k&lt;n;k++){\n                if(t.charAt(k) == s.charAt(j)){\n                    if(j == m-1) return true;\n                    j++;\n                }\n            }\n        }\n        return false;\n    }\n}\n\nobject Solution {\n    import scala.annotation.tailrec\n    @tailrec def isSubsequence(s: String, t: String): Boolean = {\n      if(s == \"\") return true;\n      return t.find(_ == s.head) match {\n        case Some(x) =&gt; {\n          if (s.length == 1)\n            true\n          else\n            isSubsequence(s.tail, t.drop(t.indexOf(x) + 1))\n        }\n        case None =&gt; {\n          false\n        }\n      }\n    }\n}\n</code></pre> <ol> <li>\u6700\u957f\u9012\u589e\u5b50\u5e8f\u5217(LIS)\uff1a</li> <li>\u666e\u901adp\u505a\u6cd5\uff1a<ol> <li>dp[i]\u4ee3\u8868\u4ee5i\u4f4d\u7f6e\u7ed3\u5c3e\u7684LIS\u662f\u4ec0\u4e48\u3002</li> <li>\u65f6\u95f4\u590d\u6742\u5ea6\u662fO(n^2)</li> </ol> </li> </ol> Text Only<pre><code>class Solution {\n    public int lengthOfLIS(int[] nums) {\n        int n = nums.length;\n        int[] dp = new int[n];\n        int ans = 1;\n        //dp[i]\u6700\u5c0f\u503c\u662f1\uff0c\u4ee3\u8868\u662f\u4ee5\u81ea\u8eab\u4e3aLIS\n        Arrays.fill(dp,1);\n        for(int i=0;i&lt;n;i++){\n            for(int j=0; j&lt;i;j++){\n                if(nums[j] &lt; nums[i]){\n                    dp[i] = Math.max(dp[i],dp[j]+1);\n                }\n            }\n            ans = Math.max(ans,dp[i]);\n        }\n        return ans;\n    }\n}\n</code></pre> <ol> <li>\u4f18\u5316\u505a\u6cd5:\u8d2a\u5fc3+\u4e8c\u5206</li> <li>\u5f15\u5165ends\u6570\u7ec4\uff1a\u4f5c\u4e3a\u7ed3\u679c\u6570\u7ec4</li> <li>\u601d\u8def\uff1a<ol> <li>\u4e8c\u5206\u5f53\u524d\u7684ends\u6570\u7ec4\uff0c\u627e\u5230&gt;=\u5f53\u524d\u7684\u6700\u5c0f\u4f4d\u7f6e</li> <li>\u5982\u679c\u627e\u5230\uff0c\u5c31\u5c06\u8be5\u4f4d\u7f6e\u66f4\u65b0\u4e3a\u5f53\u524d\u4f4d\u7f6e</li> <li>\u5982\u679c\u6ca1\u6709\u627e\u5230\uff0c\u5c31\u8bf4\u660e\u5e94\u8be5\u52a0\u5165ends\u6570\u7ec4\u7684\u5f53\u524d\u4f4d\u7f6e\u3002</li> </ol> </li> </ol> Text Only<pre><code>class Solution {\n    public int lengthOfLIS(int[] nums) {\n        int n = nums.length;\n        int[] ends = new int[n];\n        int len = 0;\n        for (int i = 0, find; i &lt; n; i++) {\n            find = bs1(ends, len, nums[i]);\n            if (find == -1) {\n                //\u6ca1\u6709\u5c31\u589e\u52a0\n                ends[len++] = nums[i];\n            } else {\n                //\u6709\u4e86\u5c31\u8986\u76d6\n                ends[find] = nums[i];\n            }\n        }\n        return len;\n    }\n    public static int bs1(int[] ends, int len, int num) {\n        int l = 0, r = len - 1, m, ans = -1;\n        while (l &lt;= r) {\n            m = (l + r) / 2;\n            if (ends[m] &gt;= num) {\n                ans = m;\n                r = m - 1;\n            } else {\n                l = m + 1;\n            }\n        }\n        return ans;\n    }\n}\n</code></pre> <ol> <li>\u6c42\u975e\u8d1f\u6570\u7ec4\u7684\u548c\u4e3at\u7684\u5b50\u5e8f\u5217\u7684\u6570\u91cf</li> <li>\u601d\u8def\uff1a\u80cc\u5305\u95ee\u9898</li> <li>dp[i][j]\uff1a\u524di\u4e2a\u6570\u5b57\u7684\u5b50\u5e8f\u5217\uff0c\u548c\u4e3aj\u7684\u79cd\u7c7b \u3002\u6ce8\u610fdp[0][0]\u521d\u59cb\u5316\u4e3a1\uff0c\u4ee3\u8868\u7a7a\u6570\u7ec4\u4e5f\u53ef\u4ee5\u6ee1\u8db3\u548c\u4e3a0.</li> </ol> Text Only<pre><code>public int subSum(int[] nums, int t){\n        if(t&lt;0) return 0;\n        //dp[i][j]\uff1a\u524di\u4e2a\u6570\u5b57\u7684\u5e8f\u5217\u7684\uff0csum=j\u7684\u79cd\u7c7b\n        int n = nums.length;\n        int[][] dp = new int[n+1][t+1];\n        //\u521d\u59cb\u5316\n        dp[0][0] = 1;\n        //\u9012\u63a8\n        for(int i=1; i&lt;=n;i++){\n            for(int j=0; j&lt;=t; j++){\n                dp[i][j] = dp[i-1][j];\n                if(j-nums[i-1] &gt;= 0){\n                    dp[i][j] += dp[i-1][j-nums[i-1]];\n                }\n            }\n        }\n        return dp[n][t];\n    }\n</code></pre>"},{"location":"LANG/DS-leetcode/#01","title":"01\u80cc\u5305","text":"<p>\ud83d\udccc</p> <p>\u6240\u6709\u7684\u80cc\u5305\u95ee\u9898\u90fd\u6ca1\u6709\u8d85\u51fa\u4e8c\u7ef4dp\u7684\u8303\u7574</p> <ol> <li>\u8981\u6c42\uff1a\u7ed9\u5b9a\u4e00\u4e2a\u6b63\u6570t\uff0c\u4ee3\u8868\u80cc\u5305\u7684\u5bb9\u91cf\u3002\u6709m\u4e2a\u8d27\u7269\uff0c\u6bcf\u4e2a\u8d27\u7269\u53ef\u4ee5\u9009\u62e9\u4e00\u6b21\u3002\u6bcf\u4e2a\u8d27\u7269\u6709\u81ea\u5df1\u7684\u4f53\u79efcost[i]\u4ee5\u53ca\u4ef7\u503cvalue[i]\u3002\u95ee\u4e0d\u8d85\u8fc7\u5bb9\u91cf\u7684\u60c5\u51b5\u4e0b\uff0c\u600e\u4e48\u8ba9\u8d27\u7269\u4ef7\u503c\u6700\u5927\uff0c\u8fd4\u56de\u6700\u5927\u4ef7\u503c</li> <li>\u6a21\u677f\uff1a</li> <li>\u5b50\u95ee\u9898\uff1adp[i][j]\uff1a\u524di\u4e2a\u7269\u54c1\u4e2d\u9009\u62e9\uff0c\u603b\u82b1\u8d39\u4e0d\u8d85\u8fc7j\u7684\u6700\u5927\u503c\u3002\u5047\u8bbe\u4e0b\u6807\u4ece1\u5f00\u59cb\u3002\u6240\u4ee5\u6700\u540e\u6240\u8981\u7684\u662fdp[n][m]</li> <li>\u95ee\u9898\u89c4\u6a21\uff1an*m</li> <li>\u521d\u59cb\u5316:dp[0][......]  =0</li> <li>\u5230\u7b2ci\u4e2a\u7269\u54c1\u9762\u4e34\u7684\u9009\u62e9\uff1a<ol> <li>\u4e0d\u8981i\u7269\u54c1\uff1a\u5219dp[i][j] = dp[i-1][j]</li> <li>\u8981i\u7269\u54c1\uff1a\u5219dp[i][j] = dp[i-1][j-cost[i]] + value[i]\u3002</li> <li>\u4e24\u79cd\u53ef\u80fd\u6027\u6c42\u6700\u5927\u503c</li> <li>\u5982\u679c\u672c\u8eabcost[i]&lt;j\uff0c\u5219\u5c31\u6ca1\u6709\u7b2c\u4e8c\u79cd\u53ef\u80fd\u6027\uff0c\u53ea\u6709\u7b2c\u4e00\u79cd\u53ef\u80fd\u6027</li> </ol> </li> <li>\u4f18\u5316\uff1a\u7b2ci\u884c\u7684\u683c\u5b50\u53ea\u4f9d\u8d56\u4e8ei-1\u884c\u7684\u683c\u5b50\uff0c\u5e76\u4e14\u662f\u5de6\u4e0a\u65b9\u548c\u6b63\u4e0a\u65b9\u3002\u6240\u4ee5\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e2a\u4e00\u7ef4\u6570\u7ec4\uff0c\u4ece\u53f3\u8fb9\u5f80\u5de6\u8fb9\u8fdb\u884c\u66f4\u65b0\u3002\u5e76\u4e14\u5f53j-cost[i]\u5c0f\u4e8e0\u7684\u65f6\u5019\uff0cdp[i][j]\u53ea\u80fd\u7b49\u4e8edp[i-1][j]\uff0c\u5c31\u4e0d\u7528\u8fdb\u884c\u8986\u76d6\u4e86</li> </ol> Text Only<pre><code>//\u666e\u901adp  \npublic static int compute1() {\n        int[][] dp = new int[n + 1][t + 1];\n        for (int i = 1; i &lt;= n; i++) {\n            for (int j = 0; j &lt;= t; j++) {\n                // \u4e0d\u8981i\u53f7\u7269\u54c1\n                dp[i][j] = dp[i - 1][j];\n                if (j - cost[i] &gt;= 0) {\n                    // \u8981i\u53f7\u7269\u54c1\n                    dp[i][j] = Math.max(dp[i][j], dp[i - 1][j - cost[i]] + val[i]);\n                }\n            }\n        }\n        return dp[n][t];\n    }\n\n// \u7a7a\u95f4\u538b\u7f29\npublic static int compute() {\n    Arrays.fill(dp, 0, t + 1, 0);\n    for (int i = 1; i &lt;= n; i++) {\n        for (int j = t; j &gt;= cost[i]; j--) {\n            dp[j] = Math.max(dp[j], dp[j - cost[i]] + val[i]);\n        }\n    }\n    return dp[t];\n}\n</code></pre> <ol> <li>\u53d8\u5f62\uff1a</li> <li>\u67d0\u516c\u53f8\u6e38\u620f\u5e73\u53f0\u7684\u590f\u5b63\u7279\u60e0\u5f00\u59cb\u4e86\uff0c\u4f60\u51b3\u5b9a\u5165\u624b\u4e00\u4e9b\u6e38\u620f\u3002\u73b0\u5728\u4f60\u4e00\u5171\u6709X\u5143\u7684\u9884\u7b97\uff0c\u8be5\u5e73\u53f0\u4e0a\u6240\u6709\u7684 n \u4e2a\u6e38\u620f\u5747\u6709\u6298\u6263\uff0c\u6807\u53f7\u4e3a i \u7684\u6e38\u620f\u7684\u539f\u4ef7 ai \u5143\uff0c\u73b0\u4ef7\u53ea\u8981 bi\u5143\uff08\u4e5f\u5c31\u662f\u8bf4\u8be5\u6e38\u620f\u53ef\u4ee5\u4f18\u60e0 ai\u2212bi \u5143\uff09\u5e76\u4e14\u4f60\u8d2d\u4e70\u8be5\u6e38\u620f\u80fd\u83b7\u5f97\u5feb\u4e50\u503c\u4e3a wi\u3002\u7531\u4e8e\u4f18\u60e0\u7684\u5b58\u5728\uff0c\u4f60\u53ef\u80fd\u505a\u51fa\u4e00\u4e9b\u51b2\u52a8\u6d88\u8d39\u5bfc\u81f4\u6700\u7ec8\u4e70\u6e38\u620f\u7684\u603b\u8d39\u7528\u8d85\u8fc7\u9884\u7b97\uff0c\u4f46\u53ea\u8981\u6ee1\u8db3\u83b7\u5f97\u7684\u603b\u4f18\u60e0\u91d1\u989d\u4e0d\u4f4e\u4e8e\u8d85\u8fc7\u9884\u7b97\u7684\u603b\u91d1\u989d\uff0c\u90a3\u5728\u5fc3\u7406\u4e0a\u5c31\u4e0d\u4f1a\u89c9\u5f97\u5403\u4e8f\u3002\u73b0\u5728\u4f60\u5e0c\u671b\u5728\u5fc3\u7406\u4e0a\u4e0d\u89c9\u5f97\u5403\u4e8f\u7684\u524d\u63d0\u4e0b\uff0c\u83b7\u5f97\u5c3d\u53ef\u80fd\u591a\u7684\u5feb\u4e50\u503c\u3002</li> <li>\u5206\u6790\uff1a\u53ea\u8981\u603b\u4f18\u60e0&gt;\u8d85\u8fc7\u7684\u603b\u9884\u7b97\uff0c\u4e5f\u5c31\u662f,\u5176\u4e2dci=ai-bi\uff0cX\u4e3a\u603b\u9884\u7b97\u3002\u7ecf\u8fc7\u53d8\u5f62\uff0c\u53ef\u4ee5\u5206\u6790\u5f97\u51fa\u5c31\u53ef\u4ee5\u7ee7\u7eed\u83b7\u5f97\u5feb\u4e50\u503c\u3002\u6240\u4ee5\u53ea\u8981ci-bi&gt;0\u5c31\u4e00\u5b9a\u53ef\u4ee5\u4e70\u3002\u5bf9\u4e8eci-bi&lt;0\u7684\u7269\u54c1\uff0c\u6bcf\u4e2a\u53ef\u4ee5\u770b\u505a\u662fcost[i] = -(ci-bi)\u7684\u5546\u54c1\uff0c\u603b\u5171\u7684\u53ef\u82b1\u8d39\u7684\u94b1\u662f\u3002\u53ef\u4ee5\u8f6c\u6362\u4e3a0-1\u80cc\u5305\u95ee\u9898\u3002\u6216\u8005\u53ef\u4ee5\u770b\u505a\u6bcf\u6b21\u83b7\u5f97\u4e00\u4e2aWell&gt;0\u7684\u4e1c\u897f,\u5c31\u662f\u589e\u52a0\u4e86\u53ef\u7528\u7684\u4f59\u989d\u3002</li> <li>\u5361\u6570\u636e\u91cf</li> </ol> Text Only<pre><code>import java.util.*;\nimport java.io.*;\nclass Main{\n    public static int MAXN = 5001;\n    public static int MAXX = 60001;\n    public static int[] cost = new int[MAXN];\n    public static long[] val = new long[MAXN];\n    public static long[] dp = new long[MAXX];\n    public static int n,X,m;\n    public static void main(String[] args){\n\n        Scanner sc = new Scanner(System.in);\n        n = sc.nextInt();\n        X = sc.nextInt();\n        //[1~n];\n        long ans = 0;\n        long happy = 0;\n        m = 1;\n        for(int i=1,pre,cur; i&lt;=n; i++){\n            pre = sc.nextInt();\n            cur = sc.nextInt();\n            happy = sc.nextLong();\n            int well = pre-cur-cur;\n            if(well &gt;= 0){\n                ans += happy;\n                X += well;\n            }else{\n                cost[m] = -well;\n                val[m++] = happy;\n            }\n        }\n        ans += compute();\n        System.out.println(ans);\n\n    }\n    //[0,1\u80cc\u5305]\n    public static long compute() {\n        Arrays.fill(dp, 0, X + 1, 0);\n        for (int i = 1; i &lt;= m; i++) {\n            for (int j = X; j &gt;= cost[i]; j--) {\n                dp[j] = Math.max(dp[j], dp[j - cost[i]] + val[i]);\n            }\n        }\n        return dp[X];\n    }\n}\n</code></pre> <ol> <li>\u4f8b\u9898leetcode494\u76ee\u6807\u548c</li> <li>\u7ed9\u4f60\u4e00\u4e2a\u975e\u8d1f\u6574\u6570\u6570\u7ec4 <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;nums&lt;/span&gt;&lt;/span&gt;</code> \u548c\u4e00\u4e2a\u6574\u6570 <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;target&lt;/span&gt;&lt;/span&gt;</code> \u3002</li> </ol> <p>\u5411\u6570\u7ec4\u4e2d\u7684\u6bcf\u4e2a\u6574\u6570\u524d\u6dfb\u52a0 <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;'+'&lt;/span&gt;&lt;/span&gt;</code> \u6216 <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;'-'&lt;/span&gt;&lt;/span&gt;</code> \uff0c\u7136\u540e\u4e32\u8054\u8d77\u6240\u6709\u6574\u6570\uff0c\u53ef\u4ee5\u6784\u9020\u4e00\u4e2a \u8868\u8fbe\u5f0f \uff1a</p> <ul> <li>\u4f8b\u5982\uff0c<code>&lt;span class=\"color_font\"&gt;&lt;span&gt;nums = [2, 1]&lt;/span&gt;&lt;/span&gt;</code> \uff0c\u53ef\u4ee5\u5728 <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;2&lt;/span&gt;&lt;/span&gt;</code> \u4e4b\u524d\u6dfb\u52a0 <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;'+'&lt;/span&gt;&lt;/span&gt;</code> \uff0c\u5728 <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;1&lt;/span&gt;&lt;/span&gt;</code> \u4e4b\u524d\u6dfb\u52a0 <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;'-'&lt;/span&gt;&lt;/span&gt;</code> \uff0c\u7136\u540e\u4e32\u8054\u8d77\u6765\u5f97\u5230\u8868\u8fbe\u5f0f <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;\"+2-1\"&lt;/span&gt;&lt;/span&gt;</code> \u3002</li> </ul> <p>\u8fd4\u56de\u53ef\u4ee5\u901a\u8fc7\u4e0a\u8ff0\u65b9\u6cd5\u6784\u9020\u7684\u3001\u8fd0\u7b97\u7ed3\u679c\u7b49\u4e8e <code>&lt;span class=\"color_font\"&gt;&lt;span&gt;target&lt;/span&gt;&lt;/span&gt;</code> \u7684\u4e0d\u540c \u8868\u8fbe\u5f0f \u7684\u6570\u76ee\u3002</p> <ol> <li>\u601d\u8def\uff1a</li> <li>\u8bb0\u5fc6\u5316\u641c\u7d22\uff1a<ol> <li>\u901a\u8fc7\u4f7f\u7528\u4e8c\u7ea7\u7f13\u5b58\u6765\u786e\u5b9ai,j\u53c2\u6570\u51b3\u5b9a\u7684\uff0c\u5e26\u8d1f\u6570\u7684\u7f13\u5b58\uff0c\u5b9e\u73b0\u662f\u4e24\u5c42map</li> </ol> </li> </ol> Text Only<pre><code>class Solution {\n    public static int cnt;\n    public int findTargetSumWays(int[] nums, int target) {\n        //\u4f7f\u7528\u4e8c\u7ea7\u7f13\u5b58,\u53ef\u4ee5\u7f13\u5b58\u7684\u5185\u5bb9\u7531i\u548ccur\u5171\u540c\u51b3\u5b9a\n        HashMap&lt;Integer,HashMap&lt;Integer,Integer&gt;&gt; cache = new HashMap&lt;&gt;();\n        int ans = f1(nums,0,0,target,cache);\n        System.out.println(cnt);\n        return ans;\n    }\n    public int f1(int[] nums, int i ,int cur,int target,HashMap&lt;Integer, HashMap&lt;Integer, Integer&gt;&gt; cache){\n        int n = nums.length;\n        if(i == n){\n            if(cur == target){\n                return 1;\n            }else{\n                return 0;\n            }\n        }\n        if(cache.containsKey(i) &amp;&amp; cache.get(i).containsKey(cur)){\n            return cache.get(i).get(cur);\n        }\n        int a=  f1(nums,i+1,cur+nums[i],target,cache);\n        int b = f1(nums,i+1,cur-nums[i],target,cache);\n        int ans = a+b;\n        cache.putIfAbsent(i,new HashMap&lt;&gt;());\n        cache.get(i).put(cur,ans);\n        return ans;\n    }\n}\n</code></pre> <ol> <li> <p>\u666e\u901a\u52a8\u6001\u89c4\u5212\uff1a</p> </li> <li> <p>\u601d\u8def\uff1a\u7531\u4e8ei,j\u4e2dj\u6709\u8d1f\u6570\uff0c\u6240\u4ee5\u8003\u8651\u5c06j\u4f4d\u7f6e\u4e0b\u6807\u8fdb\u884c\u5e73\u79fb\uff0c\u8865\u6210\u6b63\u6570</p> </li> <li>01\u80cc\u5305dp</li> <li>\u601d\u8def\uff1a</li> <li>nums\u4e2d\u5982\u679c\u6709\u8d1f\u6570\uff0c\u6bd4\u5982\uff1a{-1,-2,-3}\uff0c\u5176\u7ed3\u679c\u548c{1,2,3}\u662f\u5b8c\u5168\u4e00\u6837\u7684\u3002</li> <li>\u5982\u679ctarget\u5927\u4e8e\u6240\u6709\u6570\u7d2f\u52a0\u548csum\uff0c\u5219\u53ef\u4ee5\u76f4\u63a5\u8fd4\u56de0</li> <li>\u4e0d\u7ba1\u7b26\u53f7\uff0c\u9898\u76ee\u4e2d\u7684sum\u7684\u5947\u5076\u6027\u4e0d\u4f1a\u6539\u53d8\uff0c\u5982\u679c\u5947\u5076\u6027\u4e0d\u540c\uff0c\u76f4\u63a5\u8fd4\u56de0</li> <li>\u8f6c\u6362\u4e3a0-1\u80cc\u5305\u95ee\u9898\uff0c\u4e5f\u5c31\u662f\u6c42\u975e\u8d1f\u6570\u7ec4\u4e2d\u6709\u591a\u5c11\u4e2a\u7d2f\u52a0\u548c\u4e3at\u7684\u5b50\u5e8f\u5217</li> </ol> Text Only<pre><code>class Solution {\n    public int findTargetSumWays(int[] nums, int target) {\n        int sum = 0;\n        for (int i : nums) {\n            sum += i;\n        }\n        if(target &gt; sum || (target&amp;1) != (sum&amp;1)){\n            return 0;\n        }\n        return subSum(nums,(target+sum)/2);\n    }\n    public int subSum(int[] nums, int t){\n        if(t&lt;0) return 0;\n        //dp[i][j]\uff1a\u524di\u4e2a\u6570\u5b57\u7684\u5e8f\u5217\u7684\uff0csum=j\u7684\u79cd\u7c7b\n        int n = nums.length;\n        int[][] dp = new int[n+1][t+1];\n        //\u521d\u59cb\u5316\n        dp[0][0] = 1;\n        //\u9012\u63a8\n        for(int i=1; i&lt;=n;i++){\n            for(int j=0; j&lt;=t; j++){\n                dp[i][j] = dp[i-1][j];\n                if(j-nums[i-1] &gt;= 0){\n                    dp[i][j] += dp[i-1][j-nums[i-1]];\n                }\n            }\n        }\n        return dp[n][t];\n    }\n}\n</code></pre>"},{"location":"LANG/DS-leetcode/#_91","title":"\u5206\u7ec4\u80cc\u5305","text":"<ol> <li>\u548c01\u80cc\u5305\u533a\u522b\uff1a\u5546\u54c1\u8fdb\u884c\u5206\u7ec4\uff0c\u6bcf\u7ec4\u6700\u591a\u53ea\u80fd\u53d6\u4e00\u4ef6\u5546\u54c1(01)</li> <li>\u6a21\u7248\uff1a</li> <li>\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\uff1a<ol> <li>dp[i][j]\uff1a\u4ee3\u8868\u7684\u662f[1,i]\u7ec4\u7684\u60c5\u51b5\u4e0b\uff0c\u6bcf\u7ec4\u53ea\u80fd\u9009\u4e00\u4ef6\u5546\u54c1\uff0c\u6d88\u8017\u6700\u591a\u4e3aj\u7684\u60c5\u51b5\u4e0b\u7684\u6700\u5927\u4ef7\u503c\u3002</li> <li>\u4e0d\u8981i\u7ec4\u5546\u54c1\uff1adp[i-1][j]</li> <li>\u8981i\u7ec4\u5546\u54c1\uff1a\u5728i\u7ec4\u5185\uff0c\u5c1d\u8bd5\u6240\u6709\u53ef\u80fd\u6027</li> <li>\u6700\u7ec8dp[i][j]\u662fII\u548cIII\u7684max\u3002</li> </ol> </li> </ol> Text Only<pre><code>public class Code01_PartitionedKnapsack {\n\n    public static int MAXN = 1001;\n\n    public static int MAXM = 1001;\n\n    // arr[i][0] i\u53f7\u7269\u54c1\u7684\u4f53\u79ef\n    // arr[i][1] i\u53f7\u7269\u54c1\u7684\u4ef7\u503c\n    // arr[i][2] i\u53f7\u7269\u54c1\u7684\u7ec4\u53f7\n    public static int[][] arr = new int[MAXN][3];\n\n    public static int[] dp = new int[MAXM];\n\n    public static int m, n;\n\n    public static void main(String[] args) throws IOException {\n        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));\n        StreamTokenizer in = new StreamTokenizer(br);\n        PrintWriter out = new PrintWriter(new OutputStreamWriter(System.out));\n        while (in.nextToken() != StreamTokenizer.TT_EOF) {\n            m = (int) in.nval;\n            in.nextToken();\n            n = (int) in.nval;\n            for (int i = 1; i &lt;= n; i++) {\n                in.nextToken();\n                arr[i][0] = (int) in.nval;\n                in.nextToken();\n                arr[i][1] = (int) in.nval;\n                in.nextToken();\n                arr[i][2] = (int) in.nval;\n            }\n            Arrays.sort(arr, 1, n + 1, (a, b) -&gt; a[2] - b[2]);\n            out.println(compute1());\n        }\n        out.flush();\n        out.close();\n        br.close();\n    }\n\n    // \u4e25\u683c\u4f4d\u7f6e\u4f9d\u8d56\u7684\u52a8\u6001\u89c4\u5212\n    public static int compute1() {\n        //\u8ba1\u7b97\u7ec4\u7684\u6570\u91cf\n        int teams = 1;\n        for (int i = 2; i &lt;= n; i++) {\n            if (arr[i - 1][2] != arr[i][2]) {\n                teams++;\n            }\n        }\n        // \u7ec4\u7684\u7f16\u53f71~teams\n        // dp[i][j] : 1~i\u662f\u7ec4\u7684\u8303\u56f4\uff0c\u6bcf\u4e2a\u7ec4\u7684\u7269\u54c1\u6311\u4e00\u4ef6\uff0c\u5bb9\u91cf\u4e0d\u8d85\u8fc7j\u7684\u60c5\u51b5\u4e0b\uff0c\u6700\u5927\u6536\u76ca\n        int[][] dp = new int[teams + 1][m + 1];\n        // dp[0][....] = 0\n        for (int start = 1, end = 2, i = 1; start &lt;= n; i++) {\n            while (end &lt;= n &amp;&amp; arr[end][2] == arr[start][2]) {\n                end++;\n            }\n            // start ... end-1 -&gt; i\u7ec4\n            for (int j = 0; j &lt;= m; j++) {\n                // arr[start...end-1]\u662f\u5f53\u524d\u7ec4\uff0c\u7ec4\u53f7\u4e00\u6837\n                // \u5176\u4e2d\u7684\u6bcf\u4e00\u4ef6\u5546\u54c1\u679a\u4e3e\u4e00\u904d\n                dp[i][j] = dp[i - 1][j];\n                for (int k = start; k &lt; end; k++) {\n                    // k\u662f\u7ec4\u5185\u7684\u4e00\u4e2a\u5546\u54c1\u7f16\u53f7\n                    if (j - arr[k][0] &gt;= 0) {\n                        dp[i][j] = Math.max(dp[i][j], dp[i - 1][j - arr[k][0]] + arr[k][1]);\n                    }\n                }\n            }\n            // start\u53bb\u5f80\u4e0b\u4e00\u7ec4\u7684\u7b2c\u4e00\u4e2a\u7269\u54c1\n            // \u7ee7\u7eed\u5904\u7406\u5269\u4e0b\u7684\u7ec4\n            start = end++;\n        }\n        return dp[teams][m];\n    }\n}\n</code></pre> <ol> <li>\u65f6\u95f4\u590d\u6742\u5ea6\uff1a\u5047\u8bbe\u7269\u54c1\u603b\u4e2a\u6570\u662fn,\u80cc\u5305\u5bb9\u91cf\u662fm,\u5219\u65f6\u95f4\u590d\u6742\u5ea6\u662fO(m*k1 + m*k2 +... m*kn),\u5176\u4e2dki\u662f\u7b2ci\u7ec4\u7684\u4e2a\u6570\u3002k1+k2+..+kn = n;\u6240\u4ee5\u662fM(m*n);</li> </ol>"},{"location":"LANG/DS-leetcode/#_92","title":"\u5b8c\u5168\u80cc\u5305","text":"<ol> <li>\u548c01\u80cc\u5305\u7684\u533a\u522b\uff1a\u6bcf\u79cd\u5546\u54c1\u53ef\u4ee5\u9009\u62e9\u65e0\u9650\u6b21\u3002</li> <li>\u6a21\u677f\uff1a</li> <li>\u8fd8\u662f[1,n]\u53f7\u5546\u54c1</li> <li>dp[i][j]\uff1a[1,i]\u5546\u54c1\uff0c\u80cc\u5305\u5bb9\u91cf\u662fj\u7684\u60c5\u51b5\u4e0b\uff0c\u8fd4\u56de\u7684\u6700\u5927\u4ef7\u503c<ol> <li>\u8fd9\u6b21\u4e0d\u8981i\u5546\u54c1\uff1adp[i][j] = dp[i-1][j]</li> <li>\u8fd9\u6b21\u9009\u62e9i\u5546\u54c1\uff1adp[i][j] = dp[i][j-cost[i]]+val[i]\uff1b\u6ce8\u610f\u540e\u9762\u8fd8\u662fi</li> <li>\u4e5f\u5c31\u662f\u8fd8\u662f\u5728i\u5546\u54c1\u5904\u9009\u62e9\uff0c\u4f46\u662f\u5bb9\u91cf\u51cf\u5c0f\uff0c\u4e5f\u5c31\u662f\u53ef\u4ee5\u591a\u6b21\u9009\u62e9\u3002</li> </ol> </li> </ol> Text Only<pre><code>public class Code03_UnboundedKnapsack {\n\n    public static int MAXM = 10001;\n\n    public static int MAXT = 10000001;\n\n    public static int[] cost = new int[MAXM];\n\n    public static int[] val = new int[MAXM];\n\n    public static long[] dp = new long[MAXT];\n\n    public static int t, m;\n\n    public static void main(String[] args) throws IOException {\n        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));\n        StreamTokenizer in = new StreamTokenizer(br);\n        PrintWriter out = new PrintWriter(new OutputStreamWriter(System.out));\n        while (in.nextToken() != StreamTokenizer.TT_EOF) {\n            t = (int) in.nval;\n            in.nextToken();\n            m = (int) in.nval;\n            for (int i = 1; i &lt;= m; i++) {\n                in.nextToken();\n                cost[i] = (int) in.nval;\n                in.nextToken();\n                val[i] = (int) in.nval;\n            }\n            out.println(compute2());\n        }\n        out.flush();\n        out.close();\n        br.close();\n    }\n\n    // \u4e25\u683c\u4f4d\u7f6e\u4f9d\u8d56\u7684\u52a8\u6001\u89c4\u5212\n    // \u4f1a\u7a7a\u95f4\u4e0d\u591f\uff0c\u5bfc\u81f4\u65e0\u6cd5\u901a\u8fc7\u5168\u90e8\u6d4b\u8bd5\u7528\u4f8b\n    public static long compute1() {\n        // dp[0][.....] = 0\n        int[][] dp = new int[m + 1][t + 1];\n        for (int i = 1; i &lt;= m; i++) {\n            for (int j = 0; j &lt;= t; j++) {\n                dp[i][j] = dp[i - 1][j];\n                if (j - cost[i] &gt;= 0) {\n                    dp[i][j] = Math.max(dp[i][j], dp[i][j - cost[i]] + val[i]);\n                }\n            }\n        }\n        return dp[m][t];\n    }\n</code></pre>"},{"location":"LANG/DS-leetcode/#dp","title":"\u6570\u4f4dDP","text":"<p>\u6570\u4f4dDP\u7684\u5b9e\u73b0\u7edf\u4e00\u91c7\u7528\u8bb0\u5fc6\u5316\u641c\u7d22\u3002</p> <p>\u4f8b\u9898</p> <ol> <li>leetcode 357\u7edf\u8ba1\u5404\u4f4d\u6570\u5b57\u90fd\u4e0d\u540c\u7684\u6570</li> <li>\u601d\u8def\uff1a\u4f7f\u7528\u9012\u5f52\u89e3\u51b3\u3002</li> </ol> Text Only<pre><code>class Solution {\n    public int countNumbersWithUniqueDigits(int n) {\n        if(n == 0){\n            return 1;\n        }\n        int ans = 10;\n        for(int i=2;i&lt;=n;i++){\n            ans += dfs(i,1,9);\n        }\n        return ans;\n    }\n    public int dfs(int n,int cnt,int pre){\n        int cur = cnt == 1 || cnt == 2? 9 : pre-1;\n        if(cnt == n) return cur;\n        return cur*dfs(n,cnt+1,cur);\n    }\n}\n</code></pre> <ol> <li>leetcode 902\u6700\u5927\u4e3a N \u7684\u6570\u5b57\u7ec4\u5408</li> <li>\u601d\u8def\uff1a<ol> <li>\u5bf9\u4e8e\u6570\u5b57\u7684\u9009\u62e9\uff0c\u6709\u4e00\u4e9b\u9650\u5236\u3002</li> <li>\u4e24\u79cd\u60c5\u51b5\uff1a<ol> <li>\u4f4d\u6570\u5c11\uff0c\u5219\u6bcf\u4e00\u4f4d\u53ef\u4ee5\u968f\u4fbf\u9009\u3002</li> <li>\u4f4d\u6570\u76f8\u540c\uff0c<ol> <li>\u5982\u679c\u524d\u4e00\u4f4d\u6bd4\u76ee\u6807\u5c0f\uff0c\u5219\u53ef\u4ee5\u968f\u4fbf\u9009</li> <li>\u5982\u679c\u6570\u5b57\u524d\u4e00\u4f4d\u548c\u76ee\u6807\u4e00\u81f4\uff0c\u5219\u4e0b\u4e00\u4f4d\u53ea\u80fd&lt;=</li> </ol> </li> </ol> </li> </ol> </li> </ol> Text Only<pre><code>//\u8bb0\u5fc6\u5316\u641c\u7d22\nclass Solution {\n    public static int MAXN = 16;\n    public static int[][][] cache = new int[MAXN][2][2];\n    public int atMostNGivenDigitSet(String[] digits, int n) {\n        build();\n        int temp = n / 10;\n        int len = 1;\n        int offset = 1;\n        while (temp &gt; 0) {\n            temp = temp / 10;\n            len++;\n            offset = offset * 10;\n        }\n        System.out.println(len);\n        int m = digits.length;\n        int[] nums = new int[m];\n        for (int i = 0; i &lt; m; i++) {\n            nums[i] = Integer.parseInt(digits[i]);\n        }\n        return dfs(nums, n, offset, len, 1, 1,cache);\n    }\n\n    public static void build(){\n        for(int i=0; i&lt;MAXN;i++){\n            for(int j=0; j&lt;2;j++){\n                Arrays.fill(cache[i][j],Integer.MIN_VALUE);\n            }\n        }\n    }\n\n    public int dfs(int[] nums, int n, int offset, int len, int quit, int same,int[][][] cache) {\n        if (len == 0) {\n            return quit==1 ? 0 : 1;\n        }\n\n        int ans = 0;\n        if(cache[len][quit][same] != Integer.MIN_VALUE) return cache[len][quit][same];\n        int cur = (n / offset) % 10;\n        // 1.\u5982\u679c\u662f\u7b2c\u4e00\u4e2a\u6216\u8005\u524d\u9762\u4e5f\u820d\u5f03\u4e86\uff0c\u820d\u5f03\u5f53\u524d\u4f4d\n        if (quit==1)\n            ans += dfs(nums, n, offset / 10, len - 1, 1, 0,cache);\n        // 2.\u524d\u9762\u7684\u9009\u62e9\n        if (same==1) {\n            for (int i : nums) {\n                if (i &lt; cur) {\n                    ans += dfs(nums, n, offset / 10, len - 1, 0, 0,cache);\n                } else if (i == cur){\n                    ans += dfs(nums, n, offset / 10, len - 1, 0, 1,cache);\n                } else {\n                    break;\n                }\n            }\n        } else {\n            ans += nums.length * dfs(nums, n, offset / 10, len - 1, 0, 0,cache);\n        }\n        cache[len][quit][same] = ans;\n        return ans;\n    }\n}\n\n//\u66f4\u7cbe\u7b80\u6a21\u677f\uff0c\u6302\u7f13\u5b58\u90e8\u5206\u5b8c\u5168\u4e00\u81f4\nclass Solution {\n    public int atMostNGivenDigitSet(String[] digits, int n) {\n        char[] c = Integer.toString(n).toCharArray();\n        int m = digits.length;\n        int[] num = new int[m];\n        for(int i=0; i&lt;m;i++){\n            num[i] = Integer.parseInt(digits[i]);\n        }\n        return dfs(num, c, 0, true, true);\n    }\n    public int dfs(int[] num, char[] c, int i, boolean limit,boolean quit){\n        if(i == c.length){\n            return quit? 0 : 1;\n        }\n        int ans = 0;\n        int up = limit ? c[i]-'0' : 9;\n        if(quit) ans += dfs(num, c, i+1, false, true);\n        for(int item : num){\n            if(item &gt; up) break;\n            ans += dfs(num, c, i+1, limit &amp;&amp; item == up, false);\n        }\n        return ans;\n    }\n}\n</code></pre> <ol> <li>leetcode 233\u6570\u5b57\u4e00\u7684\u4e2a\u6570</li> <li>\u7ed9\u5b9a\u4e00\u4e2a\u6574\u6570 <code>&lt;span&gt;n&lt;/span&gt;</code>\uff0c\u8ba1\u7b97\u6240\u6709\u5c0f\u4e8e\u7b49\u4e8e <code>&lt;span&gt;n&lt;/span&gt;</code> \u7684\u975e\u8d1f\u6574\u6570\u4e2d\u6570\u5b57 <code>&lt;span&gt;1&lt;/span&gt;</code> \u51fa\u73b0\u7684\u4e2a\u6570\u3002</li> </ol> Text Only<pre><code>class Solution {\n    public static int MAXN = 16;\n    public static int[][][] cache = new int[MAXN][MAXN][2];\n    public int countDigitOne(int n) {\n        build();\n        char[] c = Integer.toString(n).toCharArray();\n        return dfs(c, 0, 1, 0,cache);\n    }\n    public static void build(){\n        for(int i=0; i&lt;cache.length;i++){\n            for(int j=0; j&lt;cache[i].length;j++){\n               Arrays.fill(cache[i][j],Integer.MIN_VALUE); \n            }\n        }\n    }\n    public int dfs(char[] c, int i,int limit, int acc,int[][][] cache){\n        if( i == c.length) return acc;\n        if(cache[i][acc][limit] != Integer.MIN_VALUE) return cache[i][acc][limit];\n        int up = limit == 1? c[i]-'0' : 9;\n        int ans = 0;\n        for(int k=0; k&lt;=up; k++){\n            ans += dfs(c, i+1, ((limit==1) &amp;&amp; (k==up))?1 : 0, acc+(k==1? 1 : 0),cache);\n        }\n        cache[i][acc][limit] = ans;\n        return ans;\n    }\n}\n</code></pre>"},{"location":"LANG/DS-leetcode/#dp_1","title":"\u6811\u5f62DP","text":"<p>\u6811\u662f\u4e00\u4e2a\u5934\u8282\u70b9\u6ca1\u6709\u7236\u8282\u70b9\uff0c\u5176\u4f59\u8282\u70b9\u90fd\u6709\u4e00\u4e2a\u7236\u8282\u70b9\u7684\u6709\u5411\u65e0\u73af\u56fe</p> <p>\u5728\u6811\u4e0a\u505a\u52a8\u6001\u89c4\u5212\uff0c\u62c6\u89e3\u7684\u5b50\u95ee\u9898\u6bd4\u4e00\u822c\u7684DP\u95ee\u9898\u66f4\u6e05\u6670\uff0c\u7edd\u5927\u90e8\u5206\u90fd\u662f\u7236\u8282\u70b9\u4f9d\u8d56\u5b50\u8282\u70b9</p> <p>\u6811\u5f62DP\u5957\u8def\uff1a</p> <ol> <li>\u5206\u6790\u7236\u6811\u5f97\u5230\u7b54\u6848\u9700\u8981\u5b50\u6811\u7684\u4ec0\u4e48\u4fe1\u606f</li> <li>\u628a\u5b50\u6811\u4fe1\u606f\u7684\u5168\u96c6\u5b9a\u4e49\u4e3a\u9012\u5f52\u8fd4\u56de\u503c</li> <li>\u901a\u8fc7\u9012\u5f52\u8ba9\u5b50\u6811\u8fd4\u56de\u5168\u96c6\u4fe1\u606f</li> <li>\u6574\u5408\u5b50\u6811\u7684\u5168\u96c6\u4fe1\u606f\uff0c\u5f97\u5230\u7236\u6811\u7684\u5168\u96c6\u4fe1\u606f\u5e76\u8fd4\u56de</li> <li> <p>\u4f8b\u9898\uff1a\u7ed9\u5b9a\u4e00\u4e2a\u4e8c\u53c9\u6811\uff0c\u627e\u5230\u5176\u4e2d\u6700\u5927\u7684\u4e8c\u53c9\u641c\u7d22\u6811\uff08BST\uff09\u5b50\u6811\uff0c\u5e76\u8fd4\u56de\u8be5\u5b50\u6811\u7684\u5927\u5c0f</p> </li> <li> <p>\u601d\u8def\uff1a\u4ee5x\u4e3a\u6839\u8282\u70b9\u7684\u6811</p> <ol> <li>\u5b50\u6811\u7684\u7c7b\u578b\uff1a<ol> <li>\u4e0d\u5305\u542bx\u8282\u70b9\uff0c\u5219\u7ed3\u679c\u662fmax(\u5de6\u6700\u5927BST\uff0c\u53f3\u6700\u5927BST)\u3002\u5219\u9700\u8981\u5b50\u6811\u7684\u6700\u5927\u4e8c\u53c9\u641c\u7d22\u5b50\u6811\u7684\u4fe1\u606f</li> <li>\u5305\u542bx\u8282\u70b9\uff0c\u8fd9\u4e2a\u9700\u8981\u5224\u65ad\u5e26x\u8282\u70b9\u662f\u5426\u662fBST\u3002\u5982\u679c\u5de6\u5b50\u6811\uff0c\u53f3\u5b50\u6811\u90fd\u662fBST\uff0c\u5219\u9700\u8981\u5b50\u6811\u63d0\u4f9bmin,max\u4fe1\u606f\u6765\u548cx\u8282\u70b9\u8fdb\u884c\u6bd4\u8f83\uff0c\u5982\u679c\u5224\u65ad\u6210\u7acb\uff0c\u5219\u7ed3\u679c\u662fmaxl + maxr + 1</li> </ol> </li> <li>\u6700\u7ec8\u7684\u7ed3\u679c\u5c31\u662f\u5c06x\u8bbe\u7f6e\u4e3aroot\uff0c\u4fbf\u53ef\u4ee5\u5f97\u5230\u6574\u4f53\u7684\u6700\u5927BST</li> </ol> </li> <li>\u65f6\u95f4\u590d\u6742\u5ea6\uff1a\u4fe1\u606f\u7684\u6574\u5408\u662fO(1)\u7684\u3002\u6574\u68f5\u6811\u6bcf\u4e2a\u8282\u70b9\u904d\u5386\u4e00\u904d\uff0c\u6574\u5408\u4e00\u6b21\uff0c\u5219\u65f6\u95f4\u590d\u6742\u5ea6\u662fO(n)</li> </ol> Text Only<pre><code>    public static int largestBSTSubtree(TreeNode root) {\n        return f(root).maxBstSize;\n    }\n    //\u4fe1\u606f\u7c7b\n    public static class Info {\n        //\u6574\u4f53\u8bbe\u7f6e\u4e3along\u7c7b\u578b\uff0c\u540c\u6837\u662f\u9632\u6b62\u9012\u5f52\u7ec8\u6b62\u6761\u4ef6\u7684\u8bbe\u7f6e\u5e72\u6270\u5224\u65ad\u3002\u8282\u70b9\u503c\u7684\u8303\u56f4\u662fint\u7c7b\u578b\u7684\u503c\u57df\u8303\u56f4\n        public long max;\n        public long min;\n        public boolean isBst;\n        public int maxBstSize;\n\n        public Info(long a, long b, boolean c, int d) {\n            max = a;\n            min = b;\n            isBst = c;\n            //\u4ee5x\u8282\u70b9\u4e3a\u6839\u8282\u70b9\u7684\u6811\u4e2d\u5305\u542b\u7684\u6700\u5927BST\u5b50\u6811  \n            maxBstSize = d;\n        }\n    }\n    public static Info f(TreeNode x) {\n        // \u9012\u5f52\u7ec8\u6b62\u6761\u4ef6\uff1ax==null\u7684\u65f6\u5019\uff0c\u9700\u8981\u7ec8\u6b62\u9012\u5f52\uff0c\u5e76\u4e14\u8fd4\u56de\u4e0d\u5e72\u6270\u4e0a\u9762\u7684\u5224\u65ad\u7684\u4fe1\u606f\n        if (x == null) {\n            return new Info(Long.MIN_VALUE, Long.MAX_VALUE, true, 0);\n        }\n        Info infol = f(x.left);\n        Info infor = f(x.right);\n        // \u5de6 4\u4fe1\u606f\n        // \u53f3 4\u4fe1\u606f\n        // x \u6574\u5408\u51fa4\u4fe1\u606f\u8fd4\u56de\n        long max = Math.max(x.val, Math.max(infol.max, infor.max));\n        long min = Math.min(x.val, Math.min(infol.min, infor.min));\n        boolean isBst = infol.isBst &amp;&amp; infor.isBst &amp;&amp; infol.max &lt; x.val &amp;&amp; x.val &lt; infor.min;\n        int maxBSTSize;\n        if (isBst) {\n            maxBSTSize = infol.maxBstSize + infor.maxBstSize + 1;\n        } else {\n            maxBSTSize = Math.max(infol.maxBstSize, infor.maxBstSize);\n        }\n        return new Info(max, min, isBst, maxBSTSize);\n    }\n</code></pre> <ol> <li>\u4e8c\u53c9\u641c\u7d22\u5b50\u6811\u7684\u6700\u5927\u952e\u503c\u548c</li> <li>\u8fd9\u6b21\u662f\u5bfb\u627e\u6811\u4e2d\u5177\u6709\u6700\u5927\u7d2f\u52a0\u548c\u7684\u4e8c\u53c9\u641c\u7d22\u5b50\u6811<ol> <li>\u601d\u8def\uff1a\u4ee5x\u4e3a\u6839\u7684\u6811<ol> <li>\u5982\u679c\u4e0d\u5305\u542bx\uff0c\u5219\u662fmax(\u5de6ans,\u53f3ans)\u3002\u9700\u8981\u5b50\u6811\u7684maxBSTSum</li> <li>\u5982\u679c\u5305\u542bx\uff0c\u5219\u662f\u5de6\u53f3\u4fa7\u5fc5\u987b\u8981\u662fBST\uff0c\u5219\u7ed3\u679c\u662fmax(\u5de6\uff0c\u53f3\uff0c\u6574\u4f53) \u9700\u8981\u5b50\u6811\u7684iSBST\uff0cmin\uff0cmax\uff0c\u5b50\u6811\u6574\u4f53\u7684sum</li> </ol> </li> </ol> </li> </ol> Text Only<pre><code> case class info(max:Int, min:Int, sum:Int,maxBSTSum:Int,isBST:Boolean)\n  def maxSumBST(root: TreeNode): Int = {\n    dfs(root).maxBSTSum\n  }\n  private def dfs(x: TreeNode):info = {\n    if(x eq null) info(Int.MinValue,Int.MaxValue,0,0,true)\n    val infol = dfs(x.left)\n    val infor = dfs(x.right)\n    val max =x.value.max(infol.max).max(infor.max)\n    val min = x.value.min(infol.min).min(infor.min)\n    val isBST = infol.isBST &amp;&amp; infor.isBST &amp;&amp; x.value &gt; infol.max &amp;&amp; x.value &lt; infor.min\n    val sum = x.value + infol.sum + infor.sum\n    val maxSum = if(isBST) sum.max(infol.maxBSTSum).max(infor.maxBSTSum) else infol.maxBSTSum.max(infor.maxBSTSum)\n    info(max,min,sum,maxSum,isBST)\n  }\n</code></pre> <ol> <li>\u4e8c\u53c9\u6811\u7684\u76f4\u5f84</li> <li>\uff01\u8d70\u7684\u8fb9\u4e0d\u80fd\u91cd\u590d</li> <li>\u601d\u8def\uff1a\u4ee5x\u4e3a\u6839\u7684\u6811<ol> <li>\u4e0d\u8981x\uff1a\u5219\u662fmax(\u5de6ans,\u53f3ans)\u3002\u9700\u8981\u5b50\u6811\u7684\u6700\u5927\u76f4\u5f84\u4fe1\u606f</li> <li>\u8981x\uff1a\u5219\u662fx\u7684\u5de6\u5b50\u6811\u9ad8\u5ea6 + \u53f3\u5b50\u6811\u9ad8\u5ea6 (\u6811\u7684\u9ad8\u5ea6\u662f\u7528\u8282\u70b9\u6570\u91cf\u6765\u8ba1\u7b97\u7684\uff0cn\u4e2a\u8282\u70b9n-1\u6761\u8fb9\u3002\u800c\u901a\u8fc7\u56fe\u5f62\u753b\u51fa\u6765\u7684\u8def\u5f84\u957f\u5ea6\u662f2*(n-1) + 2*1),\u4e5f\u5c31\u662f\u5de6\u53f3\u5b50\u6811\u7684\u8282\u70b9\u5230\u6839\u8282\u70b9\u8fd8\u5404\u52a0\u4e86\u4e00\u6761\u8fb9\uff0c\u6240\u4ee5\u6700\u7ec8\u7ed3\u679c\u662f2n</li> </ol> </li> </ol> Text Only<pre><code>object Solution {\n  case class info(diameter:Int,height:Int)\n  def diameterOfBinaryTree(root: TreeNode): Int = {\n    dfs(root).diameter\n  }\n  private def dfs(x:TreeNode):info = {\n    if(x eq null) return info(0,0)\n    val infol = dfs(x.left)\n    val infor = dfs(x.right)\n    val withX = infol.height+infor.height\n    val outX = infol.diameter.max(infor.diameter)\n    val height = infol.height.max(infor.height) + 1\n    return info(withX.max(outX),height)\n  }\n}\n</code></pre> <ol> <li>leetcode 979\u5728\u4e8c\u53c9\u6811\u4e0a\u5206\u914d\u786c\u5e01</li> <li>\u601d\u8def\uff1a\u4ee5x\u4e3a\u6839\u7ed3\u70b9\u7684\u6574\u68f5\u6811\u7684\u8c03\u6574\u6b21\u6570<ol> <li>\u7b2c\u4e00\u90e8\u5206\uff1a\u5de6\u6811\u7684\u8c03\u6574\u6b21\u6570 + \u53f3\u6811\u8c03\u6574\u6b21\u6570</li> <li>\u7b2c\u4e8c\u90e8\u5206\uff1a\u5de6\u53f3\u5b50\u6811\u8c03\u6574\u5b8c\u4e4b\u540e\uff0c\u5fc5\u7136\u4f1a\u6709\u4e00\u4fa7\u591a\u4f59\u786c\u5e01\uff0c\u4e00\u6b21\u5c11\u786c\u5e01\u3002\u5219\u9700\u8981\u901a\u8fc7\u7236\u8282\u70b9\u8fdb\u884c\u4e2d\u8f6c\uff0c\u8c03\u6574\u6b21\u6570\u662f(\u5de6\u8282\u70b9-\u5de6\u786c\u5e01\u6570\u91cf)\u7edd\u5bf9\u503c + (\u53f3\u8282\u70b9 - \u53f3\u786c\u5e01\u6570\u91cf)\u7edd\u5bf9\u503c\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8fd9\u90e8\u5206\u53ef\u80fd\u662f\u6839\u8282\u70b9\u5f80\u5916\u9001\uff0c\u4e5f\u53ef\u80fd\u662f\u5de6\u4fa7\u9001\u5f80\u53f3\u4fa7\u8fd9\u79cd\u60c5\u51b5\uff0c\u4f46\u662f\u603b\u6b21\u6570\u90fd\u662f\u4e0a\u8ff0\u7684\u8ba1\u7b97\u3002</li> <li>\u9700\u8981\u7684\u4fe1\u606f\uff1a\u5b50\u6811\u7684\u8c03\u6574\u6b21\u6570\uff0c\u5b50\u6811\u7684\u786c\u5e01\u6570\u91cf\uff0c\u5b50\u6811\u7684\u8282\u70b9\u6570\u91cf</li> </ol> </li> </ol> <p></p> Text Only<pre><code>object Solution {\n  case class info(node:Int,coin:Int,move:Int)\n  def distributeCoins(root: TreeNode): Int = {\n    dfs(root).move\n  }\n  private def dfs(x:TreeNode):info = {\n    if(x eq null) return info(0,0,0)\n    val infol = dfs(x.left)\n    val infor = dfs(x.right)\n    val coin = x.value + infol.coin + infor.coin\n    val node = infol.node + infor.node + 1\n    val move = (infol.node-infol.coin).abs + (infor.node-infor.coin).abs + infol.move + infor.move\n    return info(node,coin,move)\n  }\n}\n</code></pre>"},{"location":"LANG/DS-leetcode/#_93","title":"\u8d2a\u5fc3","text":"<ol> <li>\u57fa\u672c\u601d\u60f3\uff1a\u6bcf\u4e00\u6b65\u90fd\u662f\u5c40\u90e8\u6700\u4f18\uff0c\u800c\u6700\u540e\u5f97\u5230\u7684\u53ef\u80fd\u662f\u5168\u5c40\u6700\u4f18</li> <li>leetcode179 \u6700\u5927\u6570</li> <li>\u57fa\u672c\u6280\u5de7\uff1a\u5b57\u7b26\u4e32\u62fc\u63a5\uff0c\u8981\u6c42\u5b57\u5178\u5e8f\u6700\u5c0f\u3002</li> <li>\u6309\u7167\u5b57\u5178\u5e8f\u6392\u5e8f\u7684\u65b9\u6cd5\uff1a\u5219\u57fa\u672c\u89c4\u5219\u662fArrays.sort(str,(a,b)-&gt;(b+a).compareTo(a+b))\uff0c\u8fd9\u6837\u6392\u5e8f\u4e0b\u6765\u662f\u5b57\u5178\u5e8f\u5927\u7684\u5728\u524d\u9762\u3002</li> <li>\u8d2a\u5fc3\uff1a\u6392\u5e8f\u5b8c\u4e4b\u540e\u662f\u5355\u8bcd\u6309\u7167\u5b57\u5178\u5e8f\u6392\u5e8f\uff0c\u8c01\u5927\u8c01\u5728\u524d\u9762\u3002\u7136\u540e\u5c06\u5355\u8bcd\u4f9d\u6b21\u62fc\u63a5\u5c31\u884c\u3002</li> </ol> Text Only<pre><code>class Solution {\n    public String largestNumber(int[] nums) {\n        int n = nums.length;\n        String[] str = new String[n];\n        for(int i=0; i&lt;n; i++){\n            str[i] = String.valueOf(nums[i]);\n        }\n        Arrays.sort(str,(a,b)-&gt;(b+a).compareTo(a+b));\n        if(str[0].equals(\"0\")){\n            return \"0\";\n        } \n        StringBuilder ans = new StringBuilder();\n        for(String num : str){\n            ans.append(num);\n        }\n        return ans.toString();\n    }\n}\n</code></pre>"},{"location":"LANG/DS-leetcode/#_94","title":"\u6570\u636e\u7ed3\u6784\u8bbe\u8ba1","text":""},{"location":"LANG/DS-leetcode/#setall","title":"setAll\u529f\u80fd\u7684\u54c8\u5e0c\u8868","text":"<p>\u54c8\u5e0c\u8868\u5e38\u89c1\u7684\u4e09\u4e2a\u64cd\u4f5c\u65f6put\u3001get\u548ccontainsKey\uff0c\u800c\u4e14\u8fd9\u4e09\u4e2a\u64cd\u4f5c\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(1)\u3002\u73b0\u5728\u60f3\u52a0\u4e00\u4e2asetAll\u529f\u80fd\uff0c\u5c31\u662f\u628a\u6240\u6709\u8bb0\u5f55value\u90fd\u8bbe\u6210\u7edf\u4e00\u7684\u503c\u3002\u8bf7\u8bbe\u8ba1\u5e76\u5b9e\u73b0\u8fd9\u79cd\u6709setAll\u529f\u80fd\u7684\u54c8\u5e0c\u8868\uff0c\u5e76\u4e14put\u3001get\u3001containsKey\u548csetAll\u56db\u4e2a\u64cd\u4f5c\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u90fd\u4e3aO(1)\u3002</p> <ol> <li>\u6838\u5fc3\u601d\u8def\uff1a\u4f7f\u7528\u65f6\u95f4\u6233\u3002\u5728scala\u5e76\u53d1\u5bb9\u5668\u8bbe\u8ba1\u4e5f\u7528\u5230\u4e86\u65f6\u95f4\u6233\u6280\u672f\u3002</li> <li>\u539f\u7406\uff1a</li> <li>\u6bcf\u6b21\u64cd\u4f5c\uff0c\u8bb0\u5f55\u6570\u636e\u4fee\u6539\uff0c\u4ee5\u53ca\u76f8\u5e94\u7684\u81ea\u589e\u65f6\u95f4\u6233\u3002</li> <li>\u5f53\u4f7f\u7528\u5230setAll\u7684\u65f6\u5019\uff0c\u76f4\u63a5\u4fee\u6539setAllValue\u5b57\u6bb5\u5c31\u53ef\u4ee5\uff0c\u540c\u6837\u81ea\u589e\u65f6\u95f4\u6233\u3002</li> <li>\u5982\u679c\u8981\u8fdb\u884cget\u65b9\u6cd5\uff0c\u53d6\u6700\u65b0\u7684\u65f6\u95f4\u6233\u4e3a\u6700\u65b0\u6709\u6548\u7684\u6570\u636e\u3002</li> </ol> Text Only<pre><code>import java.util.*;\nimport java.io.*;\n\nclass Main {\n    public static HashMap&lt;Integer,int[]&gt; map = new HashMap&lt;&gt;();\n    public static int timeStamp;\n    public static int setAllValue;\n    public static int setAllTime;\n    public static void main(String[] args) throws IOException {\n\n        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));\n        StreamTokenizer in = new StreamTokenizer(br);\n        PrintWriter out = new PrintWriter(new OutputStreamWriter(System.out));\n        int N = 0;\n        build();\n        while (in.nextToken() != StreamTokenizer.TT_EOF) {\n            N = (int)in.nval;\n            for(int i=0, op=0; i&lt;N;i++){    \n                in.nextToken();op = (int)in.nval;\n                if(op == 1){\n                    in.nextToken();int x = (int)in.nval;\n                    in.nextToken();int y = (int)in.nval;\n                    //put\n                    put(x,y);\n                }else if(op == 2){\n                    in.nextToken();int x = (int)in.nval;\n                    //get\n                    out.println(get(x));\n                }else {\n                    //setAll\n                    in.nextToken();int x = (int)in.nval;\n                    setAll(x);\n                }\n            }\n        }\n        out.flush();\n        br.close();\n        out.close();\n    }\n    public static void build(){\n        timeStamp = 0;\n        setAllValue = 0;\n        setAllTime = -1;\n    }\n    public static void put(int k, int v){\n        if(map.containsKey(k)){\n            int[] value = map.get(k);\n            value[0] = v;\n            value[1] = timeStamp++;\n        }else{\n            map.put(k,new int[]{v,timeStamp++});\n        }\n    }\n    public static void setAll(int v){\n        setAllValue = v;\n        setAllTime = timeStamp++;\n    }\n    public static int get(int k){\n        if(map.containsKey(k)){\n            int[] record = map.get(k);\n            if(record[1] &lt; setAllTime){\n                return setAllValue;\n            }else{\n                return record[0];\n            }\n        }\n        return -1;\n    }\n}\n</code></pre>"},{"location":"LANG/DS-leetcode/#lru","title":"\u5b9e\u73b0LRU\u7f13\u5b58","text":"<p>LRU\u662fLeast Recently Used\u7684\u7f29\u5199\uff0c\u5373\u6700\u8fd1\u6700\u5c11\u4f7f\u7528\uff0c\u662f\u4e00\u79cd\u5e38\u7528\u7684\u9875\u9762\u7f6e\u6362\u7b97\u6cd5\uff0c\u9009\u62e9\u6700\u8fd1\u6700\u4e45\u672a\u4f7f\u7528\u7684\u9875\u9762\u4e88\u4ee5\u6dd8\u6c70\u3002\u8be5\u7b97\u6cd5\u8d4b\u4e88\u6bcf\u4e2a\u9875\u9762\u4e00\u4e2a\u8bbf\u95ee\u5b57\u6bb5\uff0c\u7528\u6765\u8bb0\u5f55\u4e00\u4e2a\u9875\u9762\u81ea\u4e0a\u6b21\u88ab\u8bbf\u95ee\u4ee5\u6765\u6240\u7ecf\u5386\u7684\u65f6\u95f4 t\uff0c\u5f53\u987b\u6dd8\u6c70\u4e00\u4e2a\u9875\u9762\u65f6\uff0c\u9009\u62e9\u73b0\u6709\u9875\u9762\u4e2d\u5176 t \u503c\u6700\u5927\u7684\uff0c\u5373\u6700\u8fd1\u6700\u5c11\u4f7f\u7528\u7684\u9875\u9762\u4e88\u4ee5\u6dd8\u6c70\u3002</p> <p>\u601d\u8def\uff1a\u53cc\u5411\u94fe\u8868+\u54c8\u5e0c\u8868</p> <ol> <li>\u6570\u636e\u7ed3\u6784\uff1a</li> <li>\u54c8\u5e0c\u8868\uff1a<ul> <li>key:\u5b58\u653e\u5bf9\u5e94\u7684\u5173\u952e\u5b57</li> <li>value:\u662f\u94fe\u8868\u8282\u70b9\u7684\u5f15\u7528\uff0c\u4e00\u4e2a\u94fe\u8868\u8282\u70b9\u4e2d\u5b58\u653e\u7684\u662f\u5173\u952e\u5b57\u4e0e\u5bf9\u5e94\u7684\u7f13\u5b58\u503c\u3002</li> </ul> </li> <li>\u53cc\u5411\u94fe\u8868</li> <li>\u5934\u90e8\u8868\u793a\u6700\u65e9\u7684\u6570\u636e\uff0c\u5c3e\u90e8\u8868\u793a\u6700\u8fd1\u7684\u6570\u636e\u3002</li> <li> <p>\u64cd\u4f5c\uff1a</p> </li> <li> <p>get\uff1a</p> </li> <li>\u53ef\u4ee5\u901a\u8fc7\u54c8\u5e0c\u8868\u76f4\u63a5\u83b7\u5f97\u5bf9\u5e94\u7684\u94fe\u8868\u8282\u70b9\u7684\u5f15\u7528\uff0c\u4ece\u800c\u83b7\u5f97\u7684\u503c\u4e5f\u662fO(1)</li> <li>\u7136\u540e\u5c06\u8be5\u8282\u70b9\u79fb\u52a8\u5230\u5c3e\u90e8</li> <li>put\uff1a</li> <li>\u5c06\u8be5\u8282\u70b9\u91cd\u65b0\u653e\u5165\u5c3e\u90e8\u3002</li> <li>remove:</li> <li>\u5220\u9664\u94fe\u8868\u5934\u90e8\u7684\u8282\u70b9</li> <li>\u5168\u90e8\u64cd\u4f5c\u6ca1\u6709\u904d\u5386\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u90fd\u662fO(1)</li> </ol> Text Only<pre><code>class LRUCache {\n    class DoubleNode{\n        int key;\n        int value;\n        DoubleNode last;\n        DoubleNode next;\n        public DoubleNode(int k, int v){\n            this.key = k;\n            this.value = v;\n        }\n    }\n    class DoubleList{\n        DoubleNode head;\n        DoubleNode tail;\n        public DoubleList(){\n            this.head = null;\n            this.tail = null;\n        }\n        public void addNode(DoubleNode newNode){\n            if(newNode == null) return;\n            if(head == null){\n                head = newNode;\n                tail = newNode;\n            }else{\n                newNode.last = tail;\n                tail.next = newNode;\n                tail = newNode;\n            }\n        }\n        public void moveToTail(DoubleNode node){\n            if(tail ==node) return;\n            if(head == node){\n                head = head.next;\n                head.last = null;\n            }else{\n                node.last.next = node.next;\n                node.next.last = node.last;\n            }\n            node.last = tail;\n            tail.next = node;\n            tail = node;\n        }\n        public DoubleNode removeHead(){\n            if(head == null) return null;\n            DoubleNode ans = null;\n            ans = head;\n            if(head == tail){\n                head = null;\n                tail = null;\n            }else{\n                head = ans.next;\n                head.last = null;\n                ans.next = null;\n            }\n            return ans;\n        }\n    }\n    private HashMap&lt;Integer,DoubleNode&gt; map;\n    private DoubleList nodeList;\n    private int cap;\n    public LRUCache(int capacity) {\n        map = new HashMap&lt;&gt;();\n        nodeList = new DoubleList();\n        cap = capacity;\n    }\n\n    public int get(int key) {\n        if(map.containsKey(key)){\n            DoubleNode node = map.get(key);\n            int v = node.value;\n            nodeList.moveToTail(node);\n            return v;\n        }\n        return -1;\n    }\n\n    public void put(int key, int value) {\n        if(map.containsKey(key)){\n            DoubleNode node = map.get(key);\n            node.value = value;\n            nodeList.moveToTail(node);\n        }else{\n            if(map.size() == cap){\n                DoubleNode oldNode =  nodeList.removeHead();\n                map.remove(oldNode.key);\n            }\n            DoubleNode newNode = new DoubleNode(key, value);\n            map.put(key,newNode);\n            nodeList.addNode(newNode);\n        }\n    }\n}\n</code></pre>"},{"location":"LLM/rag/","title":"RAG","text":""},{"location":"LLM/rag/#_1","title":"\u6982\u8ff0","text":""},{"location":"LLM/rag/#what","title":"What","text":"<p>RAG\uff1aRetrieval-Augmented Generation</p> <p>[2005.11401] Retrieval-Augmented Generation for Knowledge-Intensive NLP Tasks (arxiv.org)</p> <p>RAG\u8bba\u6587\u9605\u8bfb\u7b14\u8bb0 - \u77e5\u4e4e (zhihu.com)</p>"},{"location":"LLM/rag/#why","title":"Why","text":"<ul> <li>\u65f6\u6548\u6027</li> <li>\u5927\u6a21\u578b\u751f\u6210\u7ed3\u679c\u7684\u4e0d\u53ef\u63a7\u6027</li> <li>\u5927\u6a21\u578b\u7684\u6570\u636e\u9690\u79c1\u95ee\u9898</li> <li>\u6210\u672c\u66f4\u5c0f</li> </ul> <p>\u4e0e\u5fae\u8c03\u7684\u5bf9\u6bd4\u5982\u4e0b\uff1a</p> <p></p>"},{"location":"LLM/rag/#how","title":"How","text":"<p>RAG\u603b\u4f53\u901a\u8fc7\u8d85\u5927\u89c4\u6a21\u7684\u5916\u6302\u77e5\u8bc6\u5e93\uff0c\u4e2d\u7b49\u89c4\u6a21\u7684LLM\uff0c\u4ee5\u53ca\u5411\u91cf\u6570\u636e\u5e93\u7ec4\u6210\u3002</p> <p>\u6574\u4f53\u53ef\u4ee5\u5206\u4e3a\u4e09\u4e2a\u90e8\u5206\uff1a</p> <ul> <li>\u6570\u636e\u51c6\u5907</li> <li>\u6570\u636e\u53ec\u56de</li> <li>\u7b54\u6848\u751f\u6210</li> </ul> <p>\u5b8c\u6574\u7684\u5de5\u4f5c\u6d41\u7a0b\u662f\uff0c\u5c06\u8f93\u5165\u7684\u7528\u6237\u95ee\u9898\u4e0e\u63d0\u793a\u8bcd\uff0c\u901a\u8fc7RAG\u5bf9\u6bd4\u4ece\u77e5\u8bc6\u5e93\u4e2d\u62bd\u53d6\u589e\u5f3a\u7247\u6bb5\uff0c\u7136\u540e\u7edf\u4e00\u62fc\u63a5\u5904\u7406\uff0c\u7ed9LLM\uff0c\u6700\u540e\u8fd4\u56de\u7ed3\u679c\u3002</p> <p>\u7ecf\u5178\u7684RAG\u7684\u5916\u6302\u77e5\u8bc6\u5e93\uff0c\u4e0eLLM\u53c2\u6570\u7684\u89c4\u6a21\u5bf9\u6bd4\u5982\u4e0b\uff1a</p> <p></p> <p>\u663e\u7136\uff0c\u8d85\u5927\u89c4\u6a21\u7684\u77e5\u8bc6\u5e93\u7684\u5b58\u50a8\u4e0e\u76f8\u4f3c\u6027\u68c0\u7d22\uff0c\u662f\u6574\u4e2aRAG\u7cfb\u7edf\u7684\u6027\u80fd\u74f6\u9888\u3002</p>"},{"location":"LLM/rag/#_2","title":"\u6d41\u7a0b","text":""},{"location":"LLM/rag/#prompt","title":"prompt","text":"<p>RAG\u573a\u666f\u4e0b\uff0c\u4e00\u822c<code>prompt</code>\u8f83\u957f\u3002\u8fd9\u90e8\u5206\u6682\u65f6\u5ffd\u7565</p>"},{"location":"LLM/rag/#_3","title":"\u6587\u672c\u5207\u5757","text":"<p>\u6784\u5efa\u5411\u91cf\u6570\u636e\u5e93\u7684\u57fa\u672c\u6d41\u7a0b\uff1a\u9996\u5148\u5c06\u6587\u672c\u5207\u5757\uff0c\u7136\u540e\u5c06\u6587\u672c\u5411\u91cf\u5316\u5b58\u50a8\u5230\u5411\u91cf\u6570\u636e\u5e93\u4e2d\uff0c\u6700\u540e\u53ef\u4ee5\u901a\u8fc7\u68c0\u7d22\u53ec\u56de\u5c06\u76f8\u4f3c\u7247\u6bb5\u53d6\u51fa\u3002</p> <p>\u5219\u4f1a\u6709\u6587\u672c\u8fc7\u957f\uff0c\u6216\u8005\u8fc7\u77ed\u7684\u95ee\u9898\u51fa\u73b0\u3002</p> <p>\u6587\u672c\u8fc7\u957f\uff0c\u5219\u635f\u5931\u7684\u8bed\u4e49\u5c31\u4f1a\u66f4\u591a\uff0c\u5bfc\u81f4\u53ec\u56de\u7684\u51c6\u786e\u7387\u964d\u4f4e\u3002</p> <p>\u6587\u672c\u8fc7\u6bb5\uff0c\u8bed\u4e49\u7684\u7c92\u5ea6\u66f4\u7ec6\uff0c\u4f46\u662f\u5bb9\u6613\u4e22\u5931\u4e0a\u4e0b\u6587\u4fe1\u606f\u3002</p> <p>\u901a\u5e38\u4f7f\u7528<code>langchain</code>\u6a21\u578b\u8fdb\u884c\u5f00\u53d1\u3002</p> <p>\u5207\u5757\u65b9\u5f0f\u6709\u5982\u4e0b\u51e0\u79cd\uff1a</p> <ul> <li>\u56fa\u5b9a\u5927\u5c0f\u7684<code>chunk</code>\uff0c\u5e76\u4e14\u6709<code>overlap</code></li> <li>\u7279\u6b8a\u6587\u672c\u683c\u5f0f\u5207\u5757</li> <li>\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u5207\u5757</li> </ul>"},{"location":"LLM/rag/#_4","title":"\u5411\u91cf\u5316","text":"<p>\u4f7f\u7528<code>Transfrom</code>\u5d4c\u5165\u6a21\u578b\u5c06\u6587\u672c\u4ee5\u53ca\u95ee\u9898\u5411\u91cf\u5316\uff0c\u4ece\u800c\u5b58\u50a8\u6216\u8005\u8fdb\u884c\u53ec\u56de\u3002</p>"},{"location":"LLM/rag/#_5","title":"\u5411\u91cf\u5b58\u50a8","text":"<p>\u5411\u91cf\u5b58\u50a8</p> <p>\u5e38\u89c1\u5411\u91cf\u5b58\u50a8\u6709Faiss\uff0cMilvus</p> <p>\u5411\u91cf\u68c0\u7d22</p> <ul> <li>\u7cbe\u786e\u68c0\u7d22\uff1a\u53d6\u5411\u91cf\u4e2d\u4e0e\u76ee\u6807\u76f8\u4f3c\u5ea6\u6700\u9ad8\u7684\u4e00\u4e2a</li> <li>\u5012\u6392\u7d22\u5f15\uff1a\u8fd9\u91cc\u7684\u5012\u6392\u7d22\u5f15\uff0c\u6307\u7684\u662f\u5bf9\u6570\u636e\u5e93\u4e2d\u6240\u6709\u5411\u91cf\u505a\u4e00\u6b21\u805a\u7c7b\uff0c\u7136\u540e\u8ba1\u7b97\u76f8\u4f3c\u5ea6\u7684\u65f6\u5019\u6839\u636e\u805a\u7c7b\u4e2d\u5fc3\uff0c\u7f29\u5c0f\u8303\u56f4\u4e4b\u540e\u518d\u7cbe\u786e\u641c\u7d22\u3002</li> </ul>"},{"location":"LLM/rag/#_6","title":"\u5411\u91cf\u53ec\u56de","text":"<p>\u8fd9\u91cc\u5411\u91cf\u53ec\u56de\u672c\u8d28\u8fdb\u884c\u7684\u662f\u975e\u5bf9\u79f0\u68c0\u7d22\uff0c\u800c\u663e\u7136\u6b63\u5e38\u60c5\u51b5\u4e0b\u8fdb\u884c\u5bf9\u79f0\u68c0\u7d22\u66f4\u4e3a\u5bb9\u6613\uff0c\u7136\u800c\u53ef\u4ee5\u901a\u8fc7\u67d0\u4e9b\u65b9\u5f0f\u5c06\u4e24\u8005\u8fdb\u884c\u8f6c\u6362\uff0c\u6bd4\u5982<code>HyDE</code>.</p> <p>\u6b65\u9aa4\u5982\u4e0b\uff1a</p> <ol> <li>\u76f4\u63a5\u4f7f\u7528LLM\u751f\u6210k\u4e2a\u5047\u7b54\u6848</li> <li>\u4f7f\u7528\u5411\u91cf\u5316\u6a21\u578b\uff0c\u5c06k\u4e2a\u5047\u7b54\u6848 + \u7528\u6237\u95ee\u9898\u5411\u91cf\u5316</li> <li>\u5bf9\u5411\u91cf\u53d6\u5e73\u5747\uff0c\u4f5c\u4e3a\u878d\u5408\u67e5\u8be2\u5411\u91cf</li> <li>\u5229\u7528\u8be5\u5411\u91cf\u4ece\u5411\u91cf\u6570\u636e\u5e93\u53ec\u56de\u7247\u6bb5</li> </ol> <p>\u5411\u91cf\u7684\u53ec\u56de\u4f1a\u53d7\u5230\u4e4b\u524d\u7684\u6587\u672c\u5207\u5757\uff0c\u4ee5\u53ca\u7528\u6237\u95ee\u9898\u63cf\u8ff0\u7b49\u95ee\u9898\u7684\u5f71\u54cd\uff0c\u5e38\u89c1\u7684\u4f18\u5316\u601d\u8def\u5982\u4e0b</p> <p>\u5411\u91cf\u5316\u90e8\u5206</p> <ul> <li>\u77ed\u6587\u672c\u62fc\u63a5\u5168\u5c40\u6587\u672c\u4fe1\u606f\uff0c\u6bd4\u5982\u957f\u6587\u672c\u524d\u4e09\u53e5\u8bdd\uff0c\u6807\u9898\uff0c\u5173\u952e\u8bcd</li> <li>\u4e3a\u6bcf\u4e00\u4e2a\u5411\u91cf\u5316\u7684\u77ed\u6587\u672c\u7ef4\u62a4\u4e00\u4e2a\u7236\u957f\u6587\u672c\uff0c\u53ec\u56de\u4e4b\u540e\u5411LLM\u8f93\u5165\u7236\u6587\u672c</li> </ul> <p>\u7528\u6237\u63d0\u95ee\u90e8\u5206</p> <p>\u53ef\u4ee5\u901a\u8fc7<code>langchain</code>API\u7ed9\u7528\u6237\u63d0\u95ee\u4fee\u6539\u4e3a\u591a\u79cd\u63d0\u95ee\u65b9\u5f0f\uff0c\u7136\u540e\u5e76\u884c\u8fdb\u884c\u6587\u672c\u53ec\u56de\uff0c\u7ed3\u679c\u53d6\u5e76\u96c6\u8f93\u5165LLM\u3002</p>"},{"location":"LLM/rag/#_7","title":"\u91cd\u6392\u5e8f","text":"<p>\u601d\u8def\u5c31\u662f\u901a\u8fc7\u591a\u7ea7\u6392\u5e8f\uff0c\u4ece\u53ec\u56de\u7684\u5019\u9009\u6587\u672c\u4e2d\uff0c\u7cbe\u9009\u51fa\u4e0e\u7528\u6237\u67e5\u8be2\u7684\u6700\u76f8\u5173\u90e8\u5206\u7684\u6587\u672c\u3002</p> <p>RAG\u4e2d\u901a\u5e38\u5c06\u7528\u6237\u67e5\u8be2\u4e0e\u5019\u9009\u6587\u672c\u540c\u65f6\u8f93\u5165\u4ea4\u53c9\u7f16\u7801\u5668\uff0c\u9884\u6d4b\u76f8\u5173\u6027\u3002</p>"},{"location":"LLM/rag/#rag_1","title":"\u591a\u6a21\u6001RAG","text":"<p>\u987e\u540d\u601d\u4e49\uff0c\u5c31\u662f\u53ef\u4ee5\u5904\u7406\u4e0d\u540c\u6a21\u6001\u7684\u6570\u636e\uff0c\u5176\u4f9d\u8d56\u4e8e\u591a\u6a21\u6001\u6a21\u578b\u3002</p> <p>\u5e38\u89c1\u67b6\u6784\u5982\u4e0b\uff1a</p> <p></p> <p>\u5982\u679c\u6709\u6587\u5b57 + \u56fe\u7247\u7684PDF\uff0c\u5219\u6b65\u9aa4\u5982\u4e0b\uff1a</p> <ol> <li>\u8f93\u5165\u6e90\uff1aPDF</li> <li>\u63d0\u53d6\uff1a\u5c06\u6587\u5b57\u4e0e\u56fe\u7247\u5206\u79bb</li> <li>\u5143\u6570\u636e\uff1a\u5bf9\u56fe\u7247\u8fdb\u884c\u5143\u6570\u636e\u63d0\u53d6\u5e76\u540c\u56fe\u7247\u4e00\u8d77\u5b58\u50a8</li> <li>\u591a\u6a21\u6001\u5411\u91cf\u5b58\u50a8\uff0c\u5c06\u4e24\u8005\u5411\u91cf\u8fdb\u884c\u5d4c\u5165\uff0c\u7136\u540e\u5b58\u50a8</li> <li>\u6784\u5efa\u57fa\u4e8e\u7528\u6237\u8f93\u5165\u6765\u67e5\u8be2\u5411\u91cf\u5b58\u50a8\u7684\u90e8\u5206</li> <li>\u6784\u5efa\u57fa\u4e8e\u5411\u91cf\u53ec\u56de\u7ed3\u679c\u4f20\u9012\u7ed9LLM\u8fdb\u884c\u8f93\u5165\u5e76\u5f97\u5230\u76f8\u5e94\u7684\u90e8\u5206\u3002</li> </ol>"},{"location":"Project/","title":"\u8fd9\u91cc\u662f\u4e00\u4e9b\u6709\u8da3\u7684\u5f00\u53d1\u6587\u6863\u8bb0\u5f55\uff0c\u53ea\u662f\u4e2a\u4eba\u5f00\u53d1\u968f\u624b\u6240\u7528","text":"<p>\u76ee\u524d\u7684\u5185\u5bb9\u6709\uff1a</p> <p>Flink\u4e8c\u6b21\u5f00\u53d1\u5c1d\u8bd5</p> <ul> <li>Flink\u81ea\u5b9a\u4e49\u7b97\u5b50</li> <li>\u52a8\u6001CEP\u90e8\u5206\u6e90\u7801\u5206\u6790</li> <li>\u89c4\u5219\u9879\u76ee\u7684\u90e8\u5206\u5f00\u53d1</li> <li>\u601d\u8def\uff1a\u4ece\u540e\u7aef + \u6570\u636e\u7aef\u8054\u52a8\uff0c\u5b9e\u73b0\u52a8\u6001\u89c4\u5219\u7684\u52a0\u8f7d</li> </ul> <p>Sparklet</p> <p>\u8fd9\u4e2a\u662f\u4e00\u4e2a\u5355\u673a\u7248SparkCore\u7684\u6a21\u62df &amp; \u5b9e\u73b0\uff0c\u9879\u76ee\u6587\u6863\u5728\u5bf9\u5e94repo\u4e2d</p> <p>\u7b2c\u4e00\u6bb5\u5b9e\u4e60\u603b\u7ed3</p> <p>\u7b2c\u4e00\u6bb5\u5b9e\u4e60\uff0c\u6301\u7eed\u4e86\u4e24\u4e2a\u6708\uff0c\u6536\u83b7\u5f88\u591a\uff0c\u53ea\u662f\u7ed3\u5c40\u7565\u663e\u620f\u5267\u6027(\u4f46\u662f\u6700\u7ec8\u4ee5\u88ab\u5b66\u9662\u8981\u6c42\u5f3a\u5236\u8fd4\u6821\u4f5c\u4e3a\u7ed3\u5c3e)\u3002</p>"},{"location":"Project/AbstractStreamOperatorDesign/","title":"\u81ea\u5b9a\u4e49StreamOperator","text":""},{"location":"Project/AbstractStreamOperatorDesign/#_1","title":"\u539f\u7406","text":"<p>StreamOperator\u63a5\u53e3\u63d0\u4f9b\u4e86\u5176\u751f\u547d\u5468\u671f\u7684\u62bd\u8c61\u65b9\u6cd5\uff0c\u6211\u4eec\u53ef\u4ee5\u7ee7\u627f\u5176\u62bd\u8c61\u7c7bAbstractStreamOperator\uff0c\u5e76\u8986\u76d6\u5176\u4e2d\u7684\u65b9\u6cd5\u8fdb\u884c\u5b9e\u73b0\u3002</p> <p>\u5982\u679c\u9700\u8981\u63a5\u53d7\u4e0a\u6e38\u6570\u636e\uff0c\u5c31\u5fc5\u987b\u5b9e\u73b0OneInputStreamOperator\u6216\u8005TwoInputStreamOperator\u63a5\u53e3\uff0c\u4e3b\u8981\u901a\u8fc7\u8f93\u5165\u7684\u6570\u91cf\u6765\u5224\u65ad\u3002</p>"},{"location":"Project/AbstractStreamOperatorDesign/#_2","title":"\u5177\u4f53\u6b65\u9aa4\uff1a\u4e00\u4e2a\u901a\u7528\u7684\u5b9a\u65f6\uff0c\u5b9a\u91cf\u7684\u8f93\u51fa\u7b97\u5b50\u7684\u8bbe\u8ba1","text":"<ol> <li>\u7ee7\u627fAbstractStreamOperator\u62bd\u8c61\u7c7b\uff0c\u5b9e\u73b0OneInputStreamOperator\u63a5\u53e3</li> <li>\u91cd\u5199open\u65b9\u6cd5\uff0c\u8fdb\u884c\u8d44\u6e90\u521d\u59cb\u5316\uff0c\u8c03\u7528flink\u63d0\u4f9b\u7684\u5b9a\u65f6\u63a5\u53e3\uff0c\u5e76\u6ce8\u518c\u5b9a\u65f6\u5668</li> <li>\u91cd\u5199initializeState/snapshotState\u65b9\u6cd5,\u9700\u8981\u505a\u7f13\u5b58\uff0c\u5219\u9700\u8981\u4f7f\u7528\u5230\u72b6\u6001</li> <li>\u91cd\u5199processElement\u65b9\u6cd5\uff0c\u5c06\u6570\u636e\u7f13\u5b58\u5230state\uff0c\u5230\u8fbe\u4e00\u5b9a\u91cf\u5c31\u8f93\u51fa(collect)</li> <li>\u5b9e\u73b0\u5b9a\u65f6\u76f8\u5173\u7684\u63a5\u53e3\uff0c\u5e76\u5b9e\u73b0\u5176\u4e2d\u7684\u56de\u8c03\u65b9\u6cd5</li> </ol>"},{"location":"Project/AbstractStreamOperatorDesign/#_3","title":"\u8c03\u7528","text":"<p>\u4f7f\u7528dataStream.transfrom\u5373\u53ef\u8fdb\u884c\u8c03\u7528</p>"},{"location":"Project/dynamic-Cep/","title":"\u52a8\u6001CEP\u89e3\u6790","text":""},{"location":"Project/dynamic-Cep/#_1","title":"\u53c2\u8003\u8d44\u6e90","text":"<p>\u67b6\u6784\u6587\u7ae0\u3002 shirukai/flink-dynamic-cep: FlinkCEP\u52a8\u6001\u591a\u89c4\u5219\u5b9e\u73b0\u53ca\u81ea\u5b9a\u4e49\u89c4\u5219\u5904\u7406\u5f15\u64ce (github.com)</p>"},{"location":"Project/dynamic-Cep/#_2","title":"\u6848\u4f8b\u4e0e\u5b9e\u73b0","text":"<p>\u4e3b\u8981\u662f\u5bf9\u4e8e\u5f15\u5165\u5f00\u6e90\u7684\u9879\u76ee\u7684\u63a2\u7a76\u548c\u603b\u7ed3\uff0c\u5e76\u5bf9\u591a\u4e2a\u4e0d\u540c\u5f00\u6e90\u5b9e\u73b0\u7684\u7684\u5dee\u5f02\u8fdb\u884c\u5bf9\u6bd4\u3002</p>"},{"location":"Project/dynamic-Cep/#_3","title":"\u5b9e\u73b0\u7684\u9700\u6c42","text":"<p>\u5f00\u6e90\u7248\u672c\u7684CEP\u7684pattern\u5230NFA\u8fd9\u4e00\u6b65\u662f\u5728\u7f16\u8bd1\u65f6\u5019\u5c31\u5b8c\u6210\u7684\uff0c\u8fd0\u884c\u65f6\u4e0d\u80fd\u4fee\u6539\u3002 \u90a3\u4e48\u5bf9\u4e8e\u5355\u89c4\u5219\u4fee\u6539\uff0c\u6216\u8005\u662f\u591a\u89c4\u5219\u7684\u6267\u884c\uff0c\u5c31\u65e0\u6cd5\u5b9e\u73b0\uff0c\u6216\u8005\u662f\u4ee3\u4ef7\u5f88\u5927\u3002\u6240\u4ee5\u5f88\u591a\u516c\u53f8\u90fd\u6839\u636e\u81ea\u5df1\u7684\u9700\u6c42\u9009\u62e9\u5bf9\u5f00\u6e90\u7248\u672c\u4ee3\u7801\u8fdb\u884c\u4fee\u6539\uff0c\u4ece\u800c\u5b9e\u73b0\u52a8\u6001\u89c4\u5219\u4fee\u6539\u3002</p>"},{"location":"Project/dynamic-Cep/#_4","title":"\u5b9e\u73b0\u601d\u8def","text":""},{"location":"Project/dynamic-Cep/#_5","title":"\u80cc\u666f","text":"<p>\u4ee5\u7ecf\u5178\u7684\u673a\u623f\u6e29\u5ea6\u68c0\u6d4b\u573a\u666f\u4e3a\u4f8b\u5b50\uff0c\u5047\u8bbe\u73b0\u5728\u8fdb\u5165\u7684\u4e00\u4e2a\\(record\\)\u7684\u683c\u5f0f\u662f<code>|rackID|\u6e29\u5ea6|\u529f\u7387|\u5176\u4ed6|,</code>\u800c\u6211\u4eec\u7684\u9700\u6c42\u662f\u9700\u8981\u9488\u5bf9\u4e0d\u540c\u673a\u623f\u6e29\u5ea6\u7684\u53d8\u5316\u8d8b\u52bf\u8fdb\u884c\u68c0\u6d4b\uff0c\u4ece\u800c\u53ef\u4ee5\u8fdb\u884cWarning\u6216\u8005\u662fAlert\u3002</p>"},{"location":"Project/dynamic-Cep/#_6","title":"\u65b9\u6cd5","text":"<p>\u9762\u5bf9\u8fd9\u4e2a\u95ee\u9898\uff0c\u4f7f\u7528CEP\u7684\u901a\u7528\u65b9\u6cd5\u662f\u5bf9\u4ee5\\(rackID\\)\u4e3a\u952e\uff0c\u505a\u4e00\u4e2a\u952e\u63a7\u6d41\uff0c\u7136\u540e\u5bf9keyedStream\u4e0a\u505aSimpleCondition\uff0c\u6216\u8005\u662fIterativeCondtion\uff0c\u4ece\u800c\u5b9e\u73b0\u57fa\u4e8e\u5f53\u524d\u6570\u636e,[ \u5386\u53f2\u6570\u636e ] \u7684\u68c0\u6d4b\uff0c\u7136\u540e\u6700\u540e\u5728\u5bf9PatternStream\u4e0a\u6267\u884cProcessFunc\u903b\u8f91\u3002</p> <p>\u8fd9\u4e2a\u573a\u666f\u4e2d\uff0cpattern\u521d\u59cb\u5316\u7684nfa\u6a21\u578b\u662f\u56fa\u5b9a\u7684\uff0c\u4e5f\u5c31\u662fCepOperator\u7c7b\u4e2d\u7684</p> Text Only<pre><code>private final NFACompiler.NFAFactory&lt;IN&gt; nfaFactory;\n\nprivate transient NFA&lt;IN&gt; nfa;\n</code></pre> <p>\u6210\u5458\u53d8\u91cf\uff0c\u5b83\u5e76\u4e0d\u80fd\u652f\u6301\u8fd0\u884c\u65f6\u7684\u52a8\u6001\u4fee\u6539\u3002</p> <p>\u4e3a\u4e86\u80fd\u591f\u4fee\u6539\uff0c\u4e00\u79cd\u53ef\u80fd\u7684\u5b9e\u73b0\u5982\u4e0b(\u7c7b\u4f3cPPT\u94fe\u63a5\u4e2d\u7684\u5b9e\u73b0\uff0c\u662f\u4e00\u4e2a\u4e09\u89d2\u5f62)(\u6682\u65f6\u8ba8\u8bbakeyedStream)\uff1a</p> <ol> <li>\u628a\u89c4\u5219\u5b58\u50a8DB\u4e2d\uff0c\u5e76\u5728JobMaster\u7aef\u542f\u52a8\u5f02\u6b65\u7ebf\u7a0b(\u901a\u8fc7Coodrinator)\uff0c\u5bf9\u4e8e\u89c4\u5219\u8fdb\u884c\u5b9a\u65f6\u626b\u63cf</li> <li>\u5b9e\u73b0\u4e24\u5bf9Operator-Coordiantor\u3002</li> <li>\u5176\u4e2d\u7684RuleDistributorCoordinator\uff0c\u901a\u8fc7\u5916\u90e8\u5b9e\u73b0\u7684discover\uff0c\u5bf9\u4e8eDB\u8fdb\u884c\u5b9a\u65f6\u626b\u63cf\uff0c\u5e76\u5c06\u6570\u636e\u8bfb\u53d6\uff0c\u5176\u4e00\u90e8\u5206\u751f\u4ea7\u8005\u7684\u4f5c\u7528\u3002</li> <li>\u800cRuleProcessCoordinator\uff0c\u901a\u8fc7Coordinator store\u540cRuleDistributorCoordinator\u83b7\u53d6\u6570\u636e\uff0c\u540c\u6837\u53ef\u4ee5\u62ff\u5230\u53d8\u66f4\u7684\u6570\u636e(\u4e0d\u518d\u6b21\u626b\u63cf\uff0c\u5e94\u8be5\u662f\u4e3a\u4e86\u5bf9\u9f50\u548c\u540c\u6b65)\uff0c\u5e76\u4e14\u8d77\u5230\u4e00\u90e8\u5206\u6d88\u8d39\u8005\u7ebf\u7a0b\u7684\u4f5c\u7528\u3002</li> <li>\u4e24\u4e2aCoordinator\u90fd\u57fa\u4e8e\u4e8b\u4ef6\u9a71\u52a8\uff0c\u4e0e\u5bf9\u5e94\u7684Operator(subtask)\u8fdb\u884c\u901a\u4fe1</li> <li>\u5f53\u6570\u636e\u6d41(\u952e\u63a7\u6d41)\u8fdb\u5165\u4e4b\u540e\uff0cRuleDistributorOperator\u5bf9\u4e8e\u6570\u636e\u6d41\u8fdb\u884c\u4fee\u6539\uff0c\u5c06elem\u548crule\u8fdb\u884c\u62fc\u63a5\uff0c\u5f62\u5982\\(elem -&gt; (elem,rule1),(elem,rule2)\\),\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u662f\u5982\u6b64\u3002\u4e5f\u901a\u8fc7\u53c2\u6570\u63a7\u5236\u3002\uff0c\u7136\u540e\u5bf9\u4e8e\u65b0\u7684keyedStream,\u4ee5\\(rackID,ruleID\\) \u62fc\u63a5\uff0c\u53d8\u4e3akey\uff0c\u518d\u8fdb\u884c\u4e00\u6b21keyBy\u3002</li> <li>\u5bf9\u4e8e\u65b0\u7684keyBy\u6d41\uff0cRuleProcessOperator\u5bf9\u4e8e\u901a\u8fc7\u4e0eCoordinator\u7684\u6700\u65b0\u901a\u4fe1\uff0c\u5f97\u5230\u6700\u65b0\u7684\u89c4\u5219\u4fe1\u606f\uff0c\u4ece\u800c\u52a8\u6001\u52a0\u8f7dpattern\u4e0efunction\uff0c\u7136\u540e\u52a8\u6001\u751f\u6210nfa,\u8fdb\u884c\u5339\u914d\u3002</li> </ol>"},{"location":"Project/dynamic-Cep/#_7","title":"\u5177\u4f53\u5b9e\u73b0\u601d\u8def","text":"<p>Flip200\u4e2d\u5f00\u59cb\u63d0\u5230\u4e86\u6211\u4eec\u9700\u8981\u6dfb\u52a0\u7684\u4e09\u7c7b\u63a5\u53e3/\u7c7b\uff0c\u5206\u522b\u662f</p> <ol> <li>PatternProcessor\u63a5\u53e3: \u5177\u6709keyby+process\u7684\u7ec4\u5408\u529f\u80fd</li> <li>PatternProcessorManger\u63a5\u53e3: \u7528\u4e8e\u5904\u7406\u6a21\u5f0f\u66f4\u65b0\uff0c\u5e76\u63d0\u4f9b\u5f53\u524dprocessor\u7684\u4fe1\u606f</li> <li>PatternProcessorDiscover\u63a5\u53e3\uff1a\u53d1\u73b0\u6a21\u5f0f\u66f4\u6539\uff0c\u5e76\u901a\u77e5processor\u8fdb\u884c\u66f4\u65b0</li> <li>PatternProcessorDiscoverFactory\u63a5\u53e3: \u5f15\u5165 PatternProcessorDiscovererFactory \u662f\u4e3a\u4e86\u4f7f\u7528 PatternProcessorManager \u521b\u5efa PatternProcessorDiscoverer</li> <li>CEP.patternProcess():\u5c06\u6570\u636e\u6d41\u8f6c\u6362\u4e3a\u5339\u914d\u4e4b\u540e\u7684\u6d41\uff0c\u5e76\u8fd4\u56de\u7ed3\u679c</li> </ol> <p>\u5e76\u5efa\u8bae\u6dfb\u52a0\u4e24\u4e2a\u7b97\u5b50</p> <ol> <li>key-gen-operator:\u5bf9\u4e8e\u6bcf\u4e2a\u8fdb\u6765\u7684\u6570\u636e\uff0c\u5bf9\u6bcf\u79cd\u89c4\u5219\u8fdb\u884c\u62fc\u63a5\uff0c\u7528dataid \u548c ruleid \u8fdb\u884c\u62fc\u63a5\uff0c\u4f5c\u4e3a\u6570\u636e\u7684key</li> <li>\u7d27\u63a5\u7740\uff0c\u505a\u4e00\u6b21keyby\uff0c\u4f7f\u7528\u751f\u6210\u7684key</li> <li>cep-operator: \u771f\u6b63\u505a\u6a21\u5f0f\u5339\u914d\u7684operator\u3002\u8be6\u7ec6\u8d23\u4efb\u89c1\u539f\u6587\u5982\u4e0b\uff1a <p>The first duty is almost the same as that of CepOperator, except that it needs to handle multiple and dynamic patterns now. The second duty has been achieved by PatternStream.process() method, but now it needs to be achieved by inner implementations. </p> </li> </ol> <p>\u5efa\u8bae\u6dfb\u52a0 OperatorCoordinators</p> <ol> <li>\u8fd9\u4e2a\u7b97\u5b50\u7684\u63d0\u51fa\u59cb\u4e8eFlip-27\uff0c\u5e76\u4e14\u673a\u5236\u5df2\u7ecf\u88ab\u5b9e\u73b0\u7684\u5f88\u597d\u4e86\uff0c\u76f4\u63a5\u7ee7\u627f\u4f7f\u7528\u5373\u53ef\u3002(\u67e5\u770b\u5177\u4f53\u63d0\u51fa\uff0c\u5176\u5b9e\u662f\u5728\u81ea\u5b9a\u4e49\u6570\u636e\u6e90\u7528\u7684\u8f83\u591a)</li> </ol> <p>\u5b9a\u65f6\u8c03\u5ea6\u90e8\u5206</p> <ol> <li>\u901a\u8fc7getTimeStamp()\u6765\u8fdb\u884c\u65f6\u95f4\u7684\u8c03\u5ea6</li> <li>\u5f53\u65b0\u89c4\u5219\u5230\u8fbe\uff0c\u9996\u5148\u4f1a\u88ab\u7f13\u5b58\u5230operator\u4e2d\u3002\u5f53watermark\u63a8\u8fdb\u5230\u4e86\uff0c\u5e94\u8be5\u8fdb\u884c\u8c03\u5ea6\u7684\u65f6\u95f4\u4e0ewatermark\u65f6\u95f4\u5bf9\u6bd4\uff0c\u5e76\u76f8\u5e94\u66f4\u65b0\u6a21\u5f0f</li> </ol> <p>\u5bb9\u9519\uff1a\u5728\u68c0\u67e5\u70b9\uff0c\u5219\u5c06\u6a21\u5f0f\u548c\u90e8\u5206\u5339\u914d\u7ed3\u679c\u5b58\u50a8\u5728\u72b6\u6001\u540e\u7aef\u3002</p> <p>\u4e0d\u8db3\uff1a\u8be5\u8bbe\u8ba1\u53ea\u4fdd\u8bc1\u6700\u7ec8\u4e00\u81f4\u6027</p> <p>\u4f7f\u7528\u534f\u8c03\u5668\u800c\u4e0d\u662f\u5e7f\u64ad\u6d41\u7684\u539f\u56e0</p> <p>Unlike input data that is flowing in as a stream, updates are actually control messages that, instead of passing in as datastream, should be sent out by a control center like JobManager. OperatorCoordinators meet this semantics and thus is a more proper choice.</p> <p>\u4e0b\u9762\u8be6\u7ec6\u8bf4\u660e\u6bcf\u4e00\u4e2a\u90e8\u5206</p>"},{"location":"Project/dynamic-Cep/#_8","title":"\u534f\u8c03\u5668\u90e8\u5206","text":"<p>\u5982\u679c\u8981\u521b\u5efa\u4e00\u4e2a\u534f\u8c03\u5668\uff0c\u9996\u5148\u8003\u5bdfCoordiantor\u63a5\u53e3\u7684\u5b9a\u4e49\u3002</p> <p>A coordinator for runtime operators. The OperatorCoordinator runs on the master, associated with the job vertex of the operator. It communicates with operators via sending operator events.</p> <p>\u610f\u5473\u7740\u4e00\u4e2a\u534f\u8c03\u5668\u901a\u5e38\u8fd0\u884c\u5728JobManager\uff0c\u7528\u4e8e\u548c\u7b97\u5b50\u4e4b\u95f4\u901a\u8fc7event\u901a\u4fe1</p> <p>All coordinator methods are called by the Job Manager's main thread (mailbox thread). That means that these methods must not, under any circumstances, perform blocking operations (like I/ O or waiting on locks or futures). That would run a high risk of bringing down the entire JobManager. Coordinators that involve more complex operations should hence spawn threads to handle the I/ O work. The methods on the OperatorCoordinator. Context are safe to be called from another thread than the thread that calls the Coordinator's methods.</p> <p>\u8fd9\u6bb5\u8bdd\u610f\u5473\u7740\uff0c\u6211\u4eec\u5982\u679c\u8981\u5728coordinator\u4e0a\u5b9e\u73b0I/O,\u5219\u6709\u5fc5\u8981\u5355\u72ec\u5f00\u7ebf\u7a0b\uff0c\u9632\u6b62\u963b\u585eJob manager\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u6211\u4eec\u81ea\u5df1\u5b9e\u73b0\u7684\u534f\u8c03\u5668Context\u5b9e\u4f8b\uff0c\u5185\u90e8\u5305\u542b\u4e86\u4e24\u4e2a\u7ebf\u7a0b\u6c60\u3002\u5982\u679c\u8c03\u7528 context.sendToOperator\uff0c\u5219\u4f1a\u5c06\u4e8b\u4ef6\u59d4\u6258\u7ed9\u534f\u8c03\u5668\u7ebf\u7a0b\u6267\u884c\u3002\u7528\u4e8e\u786e\u4fdd\u4e8b\u4ef6\u662f\u5728\u534f\u8c03\u5668\u7ebf\u7a0b\u6267\u884c\uff0c\u800c\u4e0d\u662f\u5176\u4ed6\u7ebf\u7a0b</p> Java<pre><code>/**\n     * \u534f\u8c03\u5668\u7ebf\u7a0b\u4e2d\u53d1\u9001\u4e8b\u4ef6\u7ed9\u6307\u5b9a\u7684subTask\n     * @param subtaskId subtask\u7684ID,\u6bd4\u59821\n     * @param event \u6bd4\u5982RuleBindingEvent(bindings=[RuleBinding(id=1),RuleBinding(id=2)])\n     */\n    public void sendEventToOperator(int subtaskId, OperatorEvent event) {\n        callInCoordinatorThread(\n                () -&gt; {\n                    final OperatorCoordinator.SubtaskGateway gateway =\n                            subtaskGateways.get(subtaskId);\n                    if (gateway == null) {\n                        LOG.warn(\n                                String.format(\n                                        \"Subtask %d is not ready yet to receive events.\",\n                                        subtaskId));\n                    } else {\n                        //\u5c06RuleBindingEvent(bindings=[RuleBinding(id=1),RuleBinding(id=2)])\u53d1\u9001\u7ed9\u6307\u5b9a\u7684subTask\n                        gateway.sendEvent(event);\n                    }\n                    return null;\n                },\n                String.format(\"Failed to send event %s to subtask %d\", event, subtaskId));\n    }\n</code></pre> <p>\u534f\u8c03\u5668\u63a5\u53e3\u8fd8\u67093\u4e2a\u5185\u90e8\u63a5\u53e3\uff0c\u5206\u522b\u662fContext, SubtaskGateway\uff0c\u4ee5\u53caProvider\u3002</p> <ol> <li>\u9996\u5148\u662fContext</li> </ol> <p>The context gives the OperatorCoordinator access to contextual information and provides a gateway to interact with other components, such as sending operator events.</p> <ol> <li>\u7136\u540e\u662fSubtaskGateway</li> </ol> <p>The SubtaskGateway is the way to interact with a specific parallel instance of the Operator (an Operator subtask), like sending events to the operator.</p> <ol> <li>\u6700\u540e\u662fProvider</li> </ol> <p>\u8fd9\u4e2aprovider\u53ef\u4ee5\u6839\u636e\u6240\u4f20\u9012\u7684Context\uff0c\u6765\u521b\u5efa\u4e00\u4e2aCoordiantor\u3002\u4f8b\u5982\u53ef\u4ee5\u88abJob manager\u8c03\u7528\uff0c\u5f53\u8c03\u5ea6\u5668\u4ee5\u53ca\u6267\u884c\u56fe\u88ab\u521b\u5efa\u7684\u65f6\u5019\uff0c\u7136\u540e\u5c31\u53ef\u4ee5\u5728\u8fd9\u4e2a\u65f6\u5019\u521d\u59cb\u5316Coordinator\u3002\u8fd9\u91cc\u6211\u53d1\u73b0coordiantor\u5185\u90e8\u5185\u7f6e\u4e86\u4e00\u4e2a</p> Text Only<pre><code>SourceCoordinatorProvider\n</code></pre> <p>\u5219\u53ef\u4ee5\u53c2\u8003\u8be5\u7c7b\u6765\u8fdb\u884c\u5b9e\u73b0\u3002\u540c\u6837\u53ef\u4ee5\u53c2\u8003\u963f\u91cc\u7684\u5b9e\u73b0\u3002 </p> <p>\u534f\u8c03\u5668\u6709\u4e00\u4e2a\u4f1a\u57fa\u4e8e\u68c0\u67e5\u70b9\u8fdb\u884c\u6062\u590d\u7684\u5b50\u7c7b</p>"},{"location":"Project/dynamic-Cep/#provider","title":"Provider","text":"<p>\u9996\u5148\u8003\u8651\u5b9e\u73b0</p> Text Only<pre><code>RuleDistributorCoordinatorProvider\n</code></pre> <p>\u8fd9\u4e2a\u7c7b\u662f\u7528\u4e8e\u63d0\u4f9b\u534f\u8c03\u5668\u7684\u7c7b\uff0c\u4ed6\u7ee7\u627f\u7684\u5c31\u662f\u4e0a\u9762\u7684\u5b50\u7c7b\u578b\uff0c\u4e5f\u5c31\u662f\u53ef\u4ee5\u57fa\u4e8e\u68c0\u67e5\u70b9\u8fdb\u884c\u6062\u590d\u3002\u5bf9\u4e8e\u8be5\u7c7b\uff0c\u8fdb\u884c\u521d\u59cb\u5316\u4e4b\u540e\uff0c\u53ef\u4ee5\u5411\u5b83\u6765\u4f20\u9012context\uff0c\u6765\u83b7\u5f97\u5bf9\u5e94\u7684\u534f\u8c03\u5668\u5b9e\u4f8b\u3002</p> <p>\u8fd9\u4e2a\u7c7b\u5b9e\u73b0\u7684\u65b9\u6cd5\u5728idea\u4e2d\u627e\u4e0d\u5230\u8df3\u8f6c\uff0c\u4f46\u662f\u6253\u65ad\u70b9\u53ef\u4ee5\u53d1\u73b0\uff0c\u5b9e\u9645\u4e0a\u5728JobGraph\u7684\u521b\u5efa\uff0c\u4e5f\u5c31\u662f\u4eceStreamGraph\u8f6c\u6362\u4e3aJobGraph\u7684\u65f6\u5019\uff0c\u4f1a\u88ab\u5f3a\u8f6c\u4ece\u800c\u88ab\u4f7f\u7528\u3002\u5728JobGraph\u521b\u5efa\u7684\u65f6\u5019\uff0c\u4f1a\u7ef4\u62a4\u4e00\u4e2aprovider\u94fe\u8868\u3002</p>"},{"location":"Project/dynamic-Cep/#coordinator","title":"Coordinator","text":"<p>\u7136\u540e\u8003\u8651</p> Java<pre><code>public RuleDistributorCoordinator(String operatorName,\nString ruleUpdatedQueueId,\nRuleDiscovererFactory discovererFactory,\nCoordinatorContext coordinatorContext\n) {\nthis.operatorName = operatorName;\nthis.discovererFactory = discovererFactory;\nthis.context = coordinatorContext;\nthis.ruleUpdatedQueueId = ruleUpdatedQueueId;\nupdatedEventQueue = getRuleUpdatedEventQueue();\n}\n</code></pre> <p>\u8fd9\u4e2a\u7c7b\u662f\u4e2a\u6838\u5fc3\u7c7b\uff0c\u5b83\u5b9e\u73b0\u4e86</p> Text Only<pre><code>OperatorCoordinator, RuleManager\n</code></pre> <p>\u4e24\u4e2a\u63a5\u53e3\u3002</p> <p>\u5176\u4e2dRuleManager\u63a5\u53e3\u53ea\u6709\u4e00\u4e2a\u65b9\u6cd5\uff0c\u5c31\u662f\u5f53\u89c4\u5219\u6539\u53d8\u7684\u65f6\u5019\u9700\u8981\u505a\u51fa\u7684\u52a8\u4f5c\u3002\u8fd9\u4e5f\u5c31\u662f FLIP-200\u4e2d\u63d0\u5230\u7684 PatternProcessorManger\u63a5\u53e3\u3002\u5b83\u548c\u53e6\u4e00\u4e2aRuleDiscover\u63a5\u53e3\u662f\u76f8\u4e92\u914d\u5408\u7684\u3002RuleDiscover\u63a5\u53e3\u4e5f\u5c31\u53ea\u6709\u4e00\u4e2a\u65b9\u6cd5\uff0c\u5c31\u662f\u53d1\u73b0\u89c4\u5219\u7684\u53d8\u52a8\u3002</p> <p>\u5176\u4e2d\u7684\u65b9\u6cd5\u5982\u4e0b\uff1a</p> <ol> <li>start\u65b9\u6cd5\uff1a\u5f00\u542f\u4e00\u4e2a\u534f\u8c03\u5668\uff0c\u5728\u5b9e\u73b0\u4e2d\uff0c\u8fd9\u91cc\u4f1a\u7ed9RuleDiscover\u7c7b\u578b\u7684\u6210\u5458\u53d8\u91cf\u8fdb\u884c\u521d\u59cb\u5316\u4e0e\u8d4b\u503c\uff0c\u4e5f\u5c31\u662fRuleDiscover\u63a5\u53e3\u7684\u5b9e\u73b0\u7c7b\u3002\u7136\u540e\u5c06\u8f6e\u8be2DB\u7684\u4efb\u52a1\u63d0\u4ea4\u5230Coodriantor\u7684\u7ebf\u7a0b\u6c60\u4e2d\uff0c\u5b83\u7684\u4e24\u4e2a\u7ebf\u7a0b\u6c60\uff0c\u5927\u5c0f\u90fd\u662f1\uff0c\u662f\u4e3a\u4e86\u4fdd\u62a4\u7ebf\u7a0b\u6267\u884c\u7684\u987a\u5e8f\u662f\u4e32\u884c\u6267\u884c\u3002</li> <li>handEventFromOper:\u8fd9\u4e2a\u65b9\u6cd5\u4e0d\u9700\u8981\u5b9e\u73b0\uff0c\u56e0\u4e3a\u8fd9\u91cc\u7684\u4e8b\u4ef6\u4f20\u9012\u662f\u5355\u5411\u7684\uff0c\u4eceJobManager -&gt; subTask</li> <li>checkpointCoordiantor: \u8fd9\u4e2a\u65b9\u6cd5\u7684\u5165\u53c2\u662f\u4e00\u4e2a\u68c0\u67e5\u70b9id\u548c\u5b57\u8282\u6570\u7ec4\u7c7b\u578b\u7684future\uff0c\u9700\u8981\u505a\u7684\u5c31\u662f\u60f3\u7ebf\u7a0b\u6c60\u63d0\u4ea4\u6267\u884c\u4efb\u52a1\uff0c\u5982\u679c\u8f93\u4e86\uff0c\u5c31\u7528\u5b8c\u6210\u7684\u7ed3\u679c\u586b\u5145future\uff0c\u5426\u5219\u5fc5\u987b\u7528\u5f02\u5e38\u8fdb\u884c\u586b\u5145\uff0c\u8fd9\u662f\u6240\u66b4\u9732\u51fa\u6765\u7684\u63a5\u53e3\u6240\u89c4\u5b9a\u7684\u3002</li> <li>\u5bf9\u4e8e\u63a5\u53e3\u6240\u5b9a\u4e49\u7684\uff0c\u4ececheckpointListener\u6240\u63d0\u4f9b\u7684\u4e24\u4e2a\u65b9\u6cd5\uff0c\u5e76\u4e0d\u9700\u8981\u5177\u4f53\u7684\u5b9e\u73b0\uff0c\u6709\u65f6\u95f4\u518d\u5177\u4f53\u7814\u7a76</li> <li> <p>\u7136\u540e\u5c31\u662f\u4e3a\u4e86\u4e00\u81f4\u6027\u7684\u8981\u6c42\uff0c\u9700\u8981\u4fdd\u8bc13\u4e2a\u65b9\u6cd5\u7684\u4e25\u683c\u6309\u7167\u987a\u5e8f\u6267\u884c(\u5176\u4e2d1\uff0c4\u662f\u4e00\u79cd\u65b9\u6cd5\uff0c\u4ee3\u8868\u65b0\u5468\u671f\u7684\u5f00\u59cb)</p> </li> <li> <p>executionAttemptReady(int, int, OperatorCoordinator. SubtaskGateway): Called once you can send events to the subtask execution attempt. The provided gateway is bound to that specific execution attempt. This is the start of interaction with the operator subtask attempt. </p> <p>\u7b2c\u4e00\u4e2a\u65b9\u6cd5\u662f\u5f00\u59cb\u548csubtask\u8fdb\u884c\u4ea4\u4e92\u7684    2. &gt; executionAttemptFailed(int, int, Throwable): Called for each subtask execution attempt as soon as the attempt failed or was cancelled. At this point, interaction with the subtask attempt should stop.</p> <p>\u7b2c\u4e8c\u4e2a\u65b9\u6cd5\u662f\u5f53\u7ed9subtask\u7684\u4ea4\u4e92\u5728subtask\u7aef\u5931\u8d25\u7684\u65f6\u5019\uff0c\u9700\u8981coordinator\u7acb\u5373\u505c\u6b62\u8fdb\u884c\u4ea4\u4e92    3. &gt; subtaskReset(int, long) or resetToCheckpoint(long, byte[]): Once the scheduler determined which checkpoint to restore, these methods notify the coordinator of that. The former method is called in case of a regional failure/ recovery (affecting possible a subset of subtasks), the later method in case of a global failure/ recovery. This method should be used to determine which actions to recover, because it tells you which checkpoint to fall back to. The coordinator implementation needs to recover the interactions with the relevant tasks since the checkpoint that is restored. It will be called only after</p> <p>\u7b2c\u4e09\u4e2a\u65b9\u6cd5\u7528\u4e8e\u91cd\u7f6e\u5230\u6307\u5b9a\u68c0\u67e5\u70b9\u7684\u4f4d\u7f6e\uff0c\u5b9e\u73b0\u601d\u8def\u5982\u4e0b\uff1a\u5bf9\u4e8e\u6bcf\u4e2acheckpoint\u6240\u4fdd\u5b58\u7684\u6570\u636e\uff0c\u90fd\u7528checkpointId + byte[] data\u6765\u552f\u4e00\u6807\u8bc6\u3002\u6240\u4ee5\u5f53\u8fdb\u884c\u91cd\u7f6e\u7684\u65f6\u5019\uff0c\u5c31\u53ef\u4ee5\u901a\u8fc7readObject\u91cd\u65b0\u8bfb\u53d6\u6062\u590d\u6570\u636e\u3002\u8fd9\u91cc\u68c0\u67e5\u70b9\u53ea\u7ef4\u62a4\u4e00\u4e2a\u72b6\u6001\uff0c\u5c31\u662f RuleBindingEvent\u3002\u81f3\u4e8ediscover\uff0c\u53ef\u4ee5\u76f4\u63a5\u91cd\u65b0\u521b\u5efa\u3002\u8981\u6ce8\u610f\u65b9\u6cd5\u4e2d\u6240\u63d0\u9192\u7684\u5bf9\u4e8e\u7a7a\u72b6\u6001\u7684\u7279\u5224\u3002    4. &gt; executionAttemptReady(int, int, OperatorCoordinator. SubtaskGateway): Called again, once the recovered tasks (new attempts) are ready to go. This is later than subtaskReset(int, long), because between those methods, the new attempts are scheduled and deployed.</p> <p>\u4e00\u65e6\u4ece\u68c0\u67e5\u70b9\u6062\u590d\uff0c\u5219\u5c31\u53ef\u4ee5\u518d\u6b21\u5c1d\u8bd5\u4e0esubtask\u8fdb\u884c\u4ea4\u4e92\u3002 6. \u4ee5\u53ca\u4e00\u4e2a\u8f85\u52a9\u65b9\u6cd5 runInEventLoop</p> </li> </ol> Text Only<pre><code>context.runInCoordinatorThread\n</code></pre> <p>\u628a\u4efb\u52a1\u59d4\u6258\u7ed9\u534f\u8c03\u5668\u7ebf\u7a0b\u6c60\u8fdb\u884c\u6267\u884c 7. \u4ee5\u53ca\u9700\u8981\u5b9e\u73b0ruleManager\u63a5\u53e3\u7684onRuleUpdated\u65b9\u6cd5    \u9996\u5148\uff0c\u4e0d\u540c\u7684Coordinator\u4e4b\u95f4\uff0c\u53ef\u4ee5\u901a\u8fc7 CoordinatorStore \u8fdb\u884c\u8d44\u6e90\u7684\u5171\u4eab\uff0c\u4ed6\u5c31\u662f\u4e00\u4e2a\u5e76\u53d1\u7684hashMap\uff0c\u4ece\u800c\u652f\u6301\u751f\u4ea7\u8005\u6d88\u8d39\u8005\u6a21\u5f0f\u3002\u7136\u540e\uff0c\u8fd8\u53ef\u4ee5\u5c06\u4e8b\u4ef6\u53d1\u9001\u7ed9\u5bf9\u5e94\u7684\u90a3\u4e2a\u7b97\u5b50    \u8fd9\u4e24\u8005\u7684\u5b8c\u6210\uff0c\u90fd\u901a\u8fc7context\u6765\u5b8c\u6210</p>"},{"location":"Project/dynamic-Cep/#coordiantor","title":"\u4e24\u79cdCoordiantor\u804c\u8d23\u4e0e\u4ea4\u4e92","text":"<p>\u9996\u5148\u662f<code>RuleDistributorCoordinator</code></p> <p>\u5b83\u901a\u8fc7discover\uff0c\u67e5\u770bDB\u89c4\u5219\u662f\u5426\u6539\u53d8\u3002\u5982\u679c\u6539\u53d8\uff0c\u5219\u5bf9\u4e8e\u6bcf\u4e2a\u89c4\u5219(\u65b0\u89c4\u5219\uff0c\u4e5f\u53ef\u4ee5\u662f\u89c4\u5219\u6700\u65b0\u7248)\uff0c\u5c06\u89c4\u5219\u76f8\u5173\u53c2\u6570\u5c01\u88c5\u5230event \u6b64\u5904\u4f7f\u7528\u7684event\u4e00\u5171\u6709\u4e24\u79cd</p> <ol> <li>RuleBindingEvent</li> <li>\u5b9a\u4e49\uff1a\u89c4\u5219\u7ed1\u5b9a\u4e8b\u4ef6</li> <li>\u5185\u5bb9\uff1a\u5305\u542b\u4e00\u4e2aRuleBinding\u5217\u8868</li> <li>RuleBinding\uff1a\u89c4\u5219\u7ed1\u5b9a\u5b9e\u4f53\u3002\u5305\u542b\u89c4\u5219id,version\uff0c\u4ee5\u53ca\u7ed1\u5b9a\u7684key\u3002</li> <li>RuleUpdatedEvent</li> <li>\u5b9a\u4e49\uff1a\u89c4\u5219\u66f4\u65b0\u4e8b\u4ef6</li> <li>\u5185\u5bb9\uff1a\u5305\u542b\u4e00\u4e2aRuleUpdated\u5217\u8868</li> <li>RuleUpdated: \u89c4\u5219\u66f4\u65b0\u5b9e\u4f53\u3002\u5305\u542b\u89c4\u5219\u5b9a\u4e49\u65f6json\u5b57\u7b26\u4e32\u9664\u4e86binding\u90e8\u5206\u7684\u6240\u6709\u5b57\u6bb5\u3002</li> <li>\u901a\u8fc7\u4e00\u4e2a\u5171\u4eabmap\u8fdb\u884c\u6d88\u606f\u901a\u4fe1\uff0c\u8fd9\u662f<code>Coordinator</code>\u7684\u5e38\u7528\u624b\u6bb5\u3002</li> </ol>"},{"location":"Project/dynamic-Cep/#_9","title":"\u7b97\u5b50\u5f00\u53d1\u90e8\u5206","text":"<p>\u7b97\u5b50\u540c\u6837\u6309\u7167FLIP-200\u4e2d\u601d\u8def\u5b9e\u73b0\uff0c\u5148\u5b9e\u73b0\u4e00\u4e2akey-Gen oper\uff0c\u518d\u5b9e\u73b0\u4e00\u4e2acep oper\u3002</p>"},{"location":"Project/dynamic-Cep/#key-gen-oper","title":"key-Gen-Oper","text":"<p>\u81ea\u5b9a\u4e49\u4e00\u4e2aStreamOperator\uff0c\u539f\u7406\u5c31\u662f\u53ef\u4ee5\u7ee7\u627f\u5176\u62bd\u8c61\u7c7bAbstractStreamOperator,\u5e76\u8986\u76d6\u5176\u4e2d\u7684\u65b9\u6cd5\u3002</p> <p>\u5982\u679c\u9700\u8981\u63a5\u53d7\u4e0a\u6e38\u6570\u636e\uff0c\u5c31\u5fc5\u987b\u5b9e\u73b0OneInputStreamOperator\u6216\u8005TwoInputStreamOperator\u63a5\u53e3\uff0c\u4e3b\u8981\u901a\u8fc7\u8f93\u5165\u7684\u6570\u91cf\u6765\u5224\u65ad\u3002</p> <p>\u5177\u4f53\u6b65\u9aa4\u5982\u4e0b\uff1a</p> <ul> <li>\u7ee7\u627fAbstractStreamOperator\u62bd\u8c61\u7c7b\uff0c\u5b9e\u73b0OneInputStreamOperator\u63a5\u53e3</li> <li>\u91cd\u5199open\u65b9\u6cd5\uff0c\u8fdb\u884c\u8d44\u6e90\u521d\u59cb\u5316\uff0c\u8c03\u7528flink\u63d0\u4f9b\u7684\u5b9a\u65f6\u63a5\u53e3\uff0c\u5e76\u6ce8\u518c\u5b9a\u65f6\u5668</li> <li>\u91cd\u5199initializeState/snapshotState\u65b9\u6cd5,\u9700\u8981\u505a\u7f13\u5b58\uff0c\u5219\u9700\u8981\u4f7f\u7528\u5230\u72b6\u6001</li> <li>\u91cd\u5199processElement\u65b9\u6cd5\uff0c\u5c06\u6570\u636e\u7f13\u5b58\u5230state\uff0c\u5230\u8fbe\u4e00\u5b9a\u91cf\u5c31\u8f93\u51fa(collect)</li> <li>\u5b9e\u73b0\u5b9a\u65f6\u76f8\u5173\u7684\u63a5\u53e3\uff0c\u5e76\u5b9e\u73b0\u5176\u4e2d\u7684\u56de\u8c03\u65b9\u6cd5</li> </ul> <p>\u65b9\u6cd5</p> <ol> <li>open: \u9996\u5148\u8fdb\u884c\u5404\u53d8\u91cf\u7684\u521d\u59cb\u5316\uff0c\u521d\u59cb\u5316collector\u4ee5\u53ca\u662f\u5426\u7ed1\u5b9a\u53c2\u6570\u7684\u76f8\u5173\u53d8\u91cf\u3002\u7136\u540e\u5bf9distributor\u63a5\u53e3\u8fdb\u884c\u521d\u59cb\u5316\u3002\u5b83\u662f\u4e00\u4e2aRuleDistributor\u63a5\u53e3\uff0c\u53ea\u6709\u4e00\u4e2a\u65b9\u6cd5\uff0c\u5219\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528lambda\u521b\u5efa\u5b9e\u4f8b\u3002\u91cc\u9762\u540c\u65f6\u5c01\u88c5\u4e86\u6570\u636e\u7684\u53d1\u9001\uff0c\u4e5f\u5c31\u662fcollector\u903b\u8f91\u3002</li> <li>processElement: \u76f4\u63a5\u8c03\u7528\u5c01\u88c5\u597d\u7684\u51fd\u6570\u8fdb\u884c\u8c03\u7528\u3002\u8fd9\u91cc\u5c06func\u89c6\u4f5cfirst-class\u8fdb\u884c\u4f20\u9012</li> </ol> <p>\u5185\u90e8\u7c7b\u548c\u5185\u90e8\u63a5\u53e3</p> <ol> <li>\u5185\u90e8\u63a5\u53e3\uff1a</li> </ol> Text Only<pre><code>RuleDistributor\n</code></pre> <p>\u4e3b\u8981\u7528\u4e8e\u5b9e\u73b0first-class 2. \u5185\u90e8\u7c7b\uff1a</p> Text Only<pre><code>KeyBindingMap\n</code></pre> <p>\u662f\u5bf9\u4e8ekey\u7ed1\u5b9a\u89c4\u5219\u7684map\u7684\u5c01\u88c5\uff0c\u5e76\u4e14\u652f\u6301\u6b63\u5219\u529f\u80fd</p>"},{"location":"Project/dynamic-Cep/#cep-process-oper","title":"cep-Process-Oper","text":"<p>\u7b80\u5355\u6765\u8bf4\uff0c\u662f\u57fa\u4e8e\u5f00\u6e90\u5b9e\u73b0\u7684<code>Flink</code>\u57fa\u7840\u4e4b\u4e0a\uff0c\u63d0\u4f9b\u4e86\u5173\u4e8e\u89c4\u5219\u52a8\u6001\u52a0\u8f7d\u7684\u529f\u80fd\u3002\u5173\u4e8e\u89c4\u5219\u52a0\u8f7d\u4e0e\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\uff0c\u963f\u91cc\u5e76\u6ca1\u6709\u516c\u5f00\u5b8c\u5168\u3002\u4f46\u662f\u672c\u6587\u7ae0\u6240\u7ed9\u8fde\u63a5\u4e2d\u7684\u5f00\u6e90\u9879\u76ee\u5b8c\u6574\u7684\u8fdb\u884c\u4e86\u5b9e\u73b0\u3002\u5e76\u4e14\u63d0\u4f9b\u4e86\u57fa\u4e8e<code>CustomArgsCondition</code>\u4e0e<code>AviatorCondition</code>\u7684\u4e24\u79cd\u89c4\u5219\uff0c\u5e76\u4e14\u53ef\u4ee5\u5916\u52a0<code>jar</code>\u5305\uff0c\u88ab\u81ea\u5b9a\u4e49\u7684<code>ClassLoader</code>\u8fdb\u884c\u52a0\u8f7d\u5e76\u5e94\u7528\u3002\u540c\u65f6\u4e00\u4e9b\u9700\u8981\u5199\u5230\u7b97\u5b50<code>open</code>\u51fd\u6570\u4e2d\u7684\u5168\u5c40\u914d\u7f6e\u4e5f\u53ef\u4ee5\u52a8\u6001\u52a0\u8f7d\u8fdb\u6765\u3002</p>"},{"location":"Project/econ-rule-engine/","title":"\u91d1\u878d\u98ce\u63a7\u5f15\u64ce","text":"<p>\u9879\u76ee\u5730\u5740\uff1amelodylx666/CEP-X: \u89c4\u5219\u5f15\u64ce\u5c1d\u8bd5 (github.com)\u3002\u76ee\u524d\u662f\u79c1\u6709\u4ed3\u5e93</p>"},{"location":"Project/econ-rule-engine/#_2","title":"\u9879\u76ee\u80cc\u666f","text":"<p>\u5728\u98ce\u63a7\u8981\u7565\u8fd9\u672c\u4e66\u4e2d\uff0c\u5178\u578b\u7684\u4e00\u4e2a\u53cd\u6b3a\u8bc8\u9632\u63a7\u4f53\u7cfb\u6709\u4e09\u5c42\u3002</p> <ul> <li>\u7ec8\u7aef\u98ce\u63a7\uff1a\u6709\u8bbe\u5907\u6307\u7eb9\uff0c\u667a\u80fd\u9a8c\u8bc1\u7801</li> <li>\u5206\u6790\u51b3\u7b56\uff1a\u4ece\u7ec8\u7aef\u91c7\u96c6\u6570\u636e\uff0c\u7136\u540e\u8fdb\u884c\u51b3\u7b56\u5f15\u64ce\uff0c\u4ee5\u53ca\u5b9e\u65f6\u6307\u6807\u7684\u8ba1\u7b97\uff0c\u5e76\u7ed3\u5408\u6570\u636e\u6316\u6398\u7684\u90e8\u5206\uff0c\u4ee5\u53ca\u6570\u636e\u753b\u50cf\u7684\u6807\u7b7e\u8f93\u51fa\uff0c\u5bf9\u6570\u636e\u8fdb\u884c\u8ba1\u7b97</li> <li>\u6570\u636e\u753b\u50cf\uff1a\u4ece\u5206\u6790\u5c42\u6c89\u6dc0\u6570\u636e\uff0c\u5e76\u5c06\u6807\u7b7e\u8f93\u51fa\u5230\u5206\u6790\u5c42</li> </ul> <p>\u6700\u7ec8\u76ee\u6807\uff0c\u662f\u505a\u4e00\u4e2a\u5168\u6d41\u7a0b\u7684\u98ce\u63a7\u7cfb\u7edf\uff0c\u5176\u4e2d\u7684\u6838\u5fc3\u662fFlink\u5f15\u64ce\u7ed3\u5408OLAP\u3002</p> <p></p>"},{"location":"Project/econ-rule-engine/#_3","title":"\u9879\u76ee\u6280\u672f\u6808","text":"<p>\u76ee\u524d\u96c6\u4e2d\u7cbe\u529b\u5728\u5f00\u53d1\u5206\u6790\u51b3\u7b56\u5c42\u7684\u90e8\u5206\uff0c\u5e76\u5f00\u59cb\u8003\u8651\u52a0\u5165\u6570\u636e\u6316\u6398\u90e8\u5206\u6316\u6398\u6709\u6548\u7684\u89c4\u5219\u8865\u5145\u8fdb\u53bb\u3002</p> <ul> <li>\u5f15\u64ce\u6838\u5fc3\uff1aFlink</li> <li>OLAP\uff1aDoris</li> <li>\u7f13\u5b58\u9009\u578b\uff1aRedis</li> <li>\u6d88\u606f\u961f\u5217\uff1aKafka</li> <li>\u6570\u636e\u6316\u6398\u90e8\u5206\uff1a\u6ca1\u6709\u5f00\u59cb\u505a\uff0c\u8003\u8651Scala SparkML\u6216\u8005\u76f4\u63a5Python</li> </ul> <p>\u7528\u6237\u753b\u50cf\u90e8\u5206\u9700\u8981\u7ed3\u5408\u79bb\u7ebf\u6570\u4ed3\u53bb\u505a\uff0c\u8fd9\u90e8\u5206\u6682\u65f6\u6ca1\u6709\u505a\u3002</p>"},{"location":"Project/econ-rule-engine/#_4","title":"\u9879\u76ee\u96be\u70b9","text":"<p>\u9759\u6001\u89c4\u5219\u7684\u5b9e\u73b0\u7684\u6838\u5fc3\u903b\u8f91\u5df2\u7ecf\u5b8c\u6210\u3002</p> <p>\u76ee\u524d\u5728\u5b9e\u65f6\u89c4\u5219\u7684\u52a8\u6001\u6dfb\u52a0\u4e0e\u4fee\u6539\u6709\u95ee\u9898\u3002\u9996\u5148\uff0c\u73b0\u6709\u7684\u5f00\u6e90\u9879\u76ee\u6709\u597d\u51e0\u4e2a\uff0c\u4f46\u662f\u90fd\u6ca1\u6709\u6587\u6863\u3002\u4ec5\u6709\u7684\u6587\u6863\u662fFlink\u5b98\u65b9\u7684Flip200\u7684\u8bbe\u8ba1\u601d\u8def\u3002\u552f\u4e00\u7684\u65b9\u6cd5\u5c31\u662f\u6df1\u5165\u6e90\u7801\uff0c\u4e00\u6b65\u4e00\u6b65\u8c03\u8bd5\u4ee3\u7801\u540e\u5c06\u903b\u8f91\u8fdb\u884c\u8c03\u6574\uff0c\u5e76\u52a0\u5165\u81ea\u5df1\u9879\u76ee\u3002</p> <p>\u76ee\u524d\u7684\u6570\u636e\u4e5f\u662f\u95ee\u9898\uff0c\u53ea\u80fd\u6682\u65f6\u6a21\u62df\u6570\u636e\u5e76\u76f4\u63a5\u5b58\u5165Kafka\u4e2d\u3002</p> <p>\u5bf9\u4e8e\u6570\u636e\u6316\u6398\u90e8\u5206\u7684\u7814\u7a76\u662f\u76ee\u524d\u7f3a\u5c11\u7684\u4e00\u6b65\uff0c\u4f46\u662f\u4e5f\u662f\u5fc5\u987b\u505a\u7684\u4e00\u6b65\u3002\u56e0\u4e3a\u53ea\u6709\u5927\u89c4\u6a21\u7684\u6316\u6398\u624d\u80fd\u6709\u6548\u7684\u53d1\u73b0\u5408\u9002\u7684\u89c4\u5219\u6a21\u5f0f</p>"},{"location":"Project/econ-rule-engine/#_5","title":"\u5f00\u53d1\u8fdb\u5ea6","text":"<ul> <li>2024-12-06</li> <li>\u5c06\u4e4b\u524d\u7684scala SparkDemo\u9759\u6001\u89c4\u5219\u7248\u672c\u7b49\u4ef7\u8f6c\u6362\u4e3aflink,\u521d\u59cb\u5316\u9879\u76ee</li> <li>\u5bf9\u8f6f\u4ef6\u7248\u672c\u8fdb\u884c\u89c4\u5212\uff0c\u6700\u65b0\u7248Flink\u90e8\u5206\u7ec4\u4ef6\u4ecd\u65e7\u6ca1\u6709\u9002\u914d1.20</li> <li>\u6784\u5efa\u5de5\u5177\u7c7b\u548c\u6700\u521d\u59cb\u903b\u8f91</li> <li>2024-12-07 \u6dfb\u52a0</li> <li>\u5e8f\u5217\u5316\u9009\u578b\uff0c\u8003\u8651Protobuf,\u6dfb\u52a0Demo\u5e76\u8fdb\u884c\u5355\u6d4b</li> <li>\u5bf9\u4e8e\u666e\u901a\u89c4\u5219\uff0c\u7ec4\u5408\u89c4\u5219\uff0c\u7ec4\u5408\u987a\u5e8f\u89c4\u5219\u8fdb\u884c\u53c2\u6570\u5c01\u88c5</li> <li>\u6dfb\u52a0\u89c4\u5219\u7684\u5339\u914d\u903b\u8f91\uff0c\u4ece\u753b\u50cf\u7cfb\u7edf\u53d6\u6570\u636e\uff0c\u67e5\u770b\u89c4\u5219\u547d\u4e2d\u60c5\u51b5</li> <li>\u5bf9\u4e8e\u666e\u901a\u89c4\u5219\uff0c\u7ec4\u5408\u89c4\u5219\uff0c\u7ec4\u5408\u987a\u5e8f\u89c4\u5219\u6dfb\u52a0\u89c4\u5219\u5339\u914d\u670d\u52a1\uff0c\u751f\u6210\u5339\u914d\u7ed3\u679c</li> <li>\u8003\u8651Flink\u7684cep\u5e93\u51fd\u6570\u7b80\u5316\u4ee3\u7801\uff0c\u72b6\u6001\u540e\u7aef\u6362\u4e3arocksDB\u5bf9\u5176\u4ed6\u7ec4\u4ef6\u66ff\u6362\u7684\u53ef\u80fd\u6027</li> <li>\u8003\u8651doris\u7684\u7269\u5316\u89c6\u56fe\uff0c\u4ee5\u53caseq_match,\u7f13\u89e3Flink state\u5b58\u50a8\u538b\u529b\u4e0e\u8ba1\u7b97\u538b\u529b,\u5bf9\u6570\u636e\u51b7\u70ed\u5206\u79bb</li> <li>2024-12-08 \u6dfb\u52a0</li> <li>\u5bf9\u4e8eCEP\u8fdb\u884c\u6df1\u5165\u4e86\u89e3\uff0c\u5e76\u901a\u8fc7\u673a\u67b6\u6e29\u5ea6\u63a2\u67e5\u6848\u4f8b\u6765\u4f7f\u7528single\u89c4\u5219\u4ee5\u53cacombine\u89c4\u5219\uff0c\u67e5\u770b\u5bf9\u4e8e\u52a8\u6001\u89c4\u5219\u7684\u652f\u6301</li> <li>\u5c1d\u8bd5\u5728\u672c\u5730\u8fd0\u884c\u52a8\u6001cep\uff0c\u4f46\u662f\u6700\u540e\u62a5\u9519\uff0c\u6240\u4ee5\u5f00\u6e90\u7248\u672c\u76ee\u524d\u8fd8\u4e0d\u652f\u6301\u8be5\u529f\u80fd\uff0c\u5b98\u65b9\u7684demo\u53ea\u662f\u7528\u6765\u770b\u7684\uff0c\u5e76\u4e14\u5546\u7528\u7248\u672c\u6700\u9ad8\u4e5f\u53ea\u652f\u63011.17</li> <li>\u8003\u8651\u628a\u9759\u6001\u89c4\u5219\u5168\u90e8\u7528CEP\u5b9e\u73b0</li> <li>2024-12-09 \u6dfb\u52a0</li> <li>\u638c\u63e1groovy\u8bed\u6cd5\uff0c\u7814\u7a76\u7528groovy\u5b9e\u73b0\u52a8\u6001\u89c4\u5219\u7684\u53ef\u80fd\u6027</li> <li>\u5c1d\u8bd5\u7528groovy\u5b9e\u73b0\u52a8\u6001\u89c4\u5219\uff0c\u4f46\u662f\u53d1\u73b0\u65e0\u6cd5\u5b9e\u73b0,\u56e0\u4e3a\u52a8\u6001\u89c4\u5219\u7684\u9700\u6c42\u662f\u5728\u6267\u884c\u4e2d\u52a8\u6001\u4fee\u6539\u7684\uff0c\u800c\u4e0d\u662f\u5728\u521d\u59cb\u5316\u7684\u65f6\u5019\u8fdb\u884c\u7c7b\u52a0\u8f7d\u6765\u5b9e\u73b0\u7684</li> <li>\u6700\u7ec8\u901a\u8fc7\u5bf9\u4e00\u4e2a\u4e8c\u5f00\u7684flink\u7248\u672c\u8fdb\u884c\u6d4b\u8bd5\u4e0e\u6253\u5305\uff0c\u5b9e\u73b0\u52a8\u6001\u89c4\u5219\u7684\u589e\u52a0\uff0c\u5e76\u4e14\u5728\u6e29\u5ea6\u63a2\u67e5\u4e2d\u6d4b\u8bd5\u529f\u80fd\u5b8c\u5907\uff0c\u52a8\u6001\u6dfb\u52a0\u89c4\u5219\u4e5f\u53ef\u4ee5\u770b\u51fa\u6765\u63a2\u67e5\u51fa\u7684\u6570\u636e\u6709\u53d8\u5316</li> <li>2024-12-10 \u6dfb\u52a0</li> <li>\u67e5\u770bflink\u5e95\u5c42\u539f\u7406\uff0c\u5c1d\u8bd5\u89e3\u51b3\u52a8\u6001\u89c4\u5219\u4fee\u6539\u5931\u8d25\u7684\u95ee\u9898</li> <li>\u6210\u529f\u5b9e\u73b0\u57fa\u4e8e\u591a\u89c4\u5219\uff0c\u5e76\u4e14\u53ef\u52a8\u6001\u6dfb\u52a0\u89c4\u5219\u7684\u767b\u9646\u65e5\u5fd7\u4fe1\u606f\u68c0\u6d4b\u673a\u5236\uff0c\u8003\u8651\u5b58\u5165\u5206\u6790\u7cfb\u7edf\u8fdb\u884c\u5206\u6790</li> <li>2024-12-11 \u6dfb\u52a0</li> <li>\u5bf9\u4e8edoris\u7684\u8fde\u63a5\u90e8\u5206\u4ee5\u53caseq_match\u8fdb\u884c\u5c01\u88c5\u548c\u6d4b\u8bd5\uff0c\u5e76\u5bf9\u65e5\u5fd7\u8f93\u51fa\u8fdb\u884c\u8c03\u6574\uff0c\u4e4b\u524d\u7684\u8fd0\u884c\u4e0d\u8d77\u6765\uff0c\u73b0\u5728\u53ef\u4ee5\u8fd0\u884c</li> <li>\u5bf9\u4e8edynamic-cep\u7684\u5c1d\u8bd5\u6682\u65f6\u622a\u6b62\u5e76\u6ce8\u91ca\u6389\uff0c\u6ca1\u6709\u6587\u6863\uff0c\u80fd\u8dd1\u8d77\u6765\u548c\u7b80\u5355\u4f7f\u7528\u5c31\u884c</li> <li>\u5bf9\u4e8egroovy\uff0c\u5f15\u5165\u7684jar\u5305\u5728\u6709\u7684\u65f6\u5019\u4e00\u76f4\u62a5\u9519\uff0c\u6682\u65f6\u6ce8\u91ca\u6389</li> <li>2024-12-12 \u6dfb\u52a0</li> <li>Doris\u529f\u80fd\u6d4b\u8bd5\u5b8c\u6bd5\uff0c\u5355\u6d4b\u901a\u8fc7\uff0c\u5305\u62ec\u4eceKafKa\u5bfc\u5165\u6570\u636e\uff0c\u7269\u5316\u89c6\u56fe\uff0c\u4ee5\u53caJDBC\u8fde\u63a5\u67e5\u8be2\u90e8\u5206</li> <li>\u4e3b\u6d41\u7a0b\u5f15\u5165Doris\u5b8c\u6bd5\uff0c\u8fd8\u672a\u6d4b\u8bd5\u4e3b\u6d41\u7a0b</li> <li>\u8003\u8651\u540e\u7eed\u6dfb\u52a0\u7684ML\u6a21\u5757\uff0c\u8981\u4e0d\u8981\u8003\u8651\u4f7f\u7528Spark\uff0c\u8fd8\u662f\u76f4\u63a5\u4f7f\u7528Flink</li> <li>2024-12-13 \u6dfb\u52a0</li> <li>\u4e3b\u6d41\u7a0b\u5728n\u6b21debug\u5728\u8dd1\u8d77\u6765\u4e86\uff0c\u7531\u4e8e\u6ca1\u6709\u505a\u753b\u50cf\uff0c\u6240\u4ee5\u628a\u65e5\u5fd7\u5206\u6790\u90e8\u5206\u5168\u90e8\u653edoris\uff0c\u76f4\u63a5\u4ecedoris\u67e5\u8be2\uff0c\u8fd9\u91cc\u903b\u8f91\u8fd8\u6709\u95ee\u9898\uff0clistState\u6ca1\u6709\u7ed3\u5408\u5b8c\u6574</li> <li>\u90e8\u5206\u63a5\u53e3\u7b49\u53c2\u6570\uff0c\u4ee5\u53ca\u6570\u636e\u6a21\u62df\u7684\u5206\u5e03\u6709\u95ee\u9898\uff0c\u4e0d\u65b9\u4fbf\u6d4b\u8bd5\uff0c\u9700\u8981\u91cd\u65b0\u8bbe\u8ba1</li> <li>2024-12-14 \u6dfb\u52a0</li> <li>\u91cd\u65b0\u52a0\u56de\u52a8\u6001CEP\u63a5\u53e3\uff0c\u51c6\u5907\u548c\u9879\u76ee\u7ed3\u5408\u3002\u4f46\u662f\u8003\u8651\u4e4b\u540e\uff0c\u5f15\u5165\u7684\u5f00\u6e90\u4ee3\u7801\u6682\u65f6\u4e0d\u4f7f\u7528git\u8fdb\u884c\u7248\u672c\u7ba1\u7406\u4e86</li> <li>2024-12-15 \u6dfb\u52a0</li> <li>\u5927\u81f4\u68b3\u7406\u6e05\u695a\u4e86\u52a8\u6001CEP\u7684\u5177\u4f53\u5b9e\u73b0\uff0c\u5f00\u59cb\u7814\u7a76\u5177\u4f53\u7684\u7c7b\u52a0\u8f7d\u5b9e\u73b0</li> <li>2024-12-16 \u6dfb\u52a0</li> <li>\u53d1\u73b0\u4e86\u5916\u90e8\u5f15\u5165\u7684\u5f00\u6e90\u5b9e\u73b0\uff0c\u5176\u5b9e\u540c\u6837\u662f\u53c2\u8003\u5b98\u65b9\u90a3\u4e2a\u534a\u6210\u54c1\u5f00\u6e90\u800c\u5b9e\u73b0\u7684,\u5c24\u5176\u662f\u4e0eDB\u4ea4\u4e92\uff0c\u7c7b\u52a0\u8f7d\u7684\u90e8\u5206\u5b8c\u5168\u4e00\u81f4</li> <li>\u6ca1\u6709\u5408\u9002\u7684\u6570\u636e\u6e90\uff0c\u4ee5\u53ca\u5916\u90e8\u5df2\u7ecf\u505a\u597d\u7684\u65e5\u5fd7\u7cfb\u7edf\u3002\u53ea\u80fd\u6682\u65f6\u518d\u628a\u4e4b\u524d\u7684\u903b\u8f91\u5b8c\u5584\u4e00\u4e0b\u3002</li> <li>2024-12-17 \u6dfb\u52a0</li> <li>\u8003\u8651\u4e86\u6240\u6709\u53ef\u80fd\u7684Flink\u591a\u7ebf\u7a0b\u5171\u4eab\u72b6\u6001\u7684\u65b9\u6848\u6765\u7ef4\u62a4\u7269\u5316\u89c6\u56fe\uff0c\u8003\u8651\u81ea\u5b9a\u4e49oper\u6765\u63a5\u4e00\u4e0b\u6570\u636e\u6d41\u83b7\u53d6\u7ed3\u679c\uff0c\u7136\u540e\u548ccoodrinator\u4ea4\u4e92\u7684\u5b9e\u73b0\u96be\u5ea6</li> <li>2024-12-18 \u6dfb\u52a0</li> <li>\u8003\u8651\u6570\u636e\u89c4\u6a21\uff0c\u6700\u540e\u76f4\u63a5\u7528\u4fa7\u5199\u6d41\u628a\u547d\u4e2d\u6570\u636e\u590d\u5236\u4e00\u4efd\uff0c\u76f8\u5f53\u4e8e\u91c7\u6837\u6765\u786e\u5b9a\u4f7f\u7528\u7684\u7ef4\u5ea6\uff0c\u7136\u540e\u5e76\u884c\u505a\u547d\u4e2d\u6570\u636e\u7684sink\u4ee5\u53ca\u7269\u5316\u89c6\u56fe\u7684\u521b\u5efa\u3002</li> <li>2024-12-19 \u6dfb\u52a0</li> <li>\u4e00\u6b65\u4e00\u6b65\uff0c\u53c2\u8003\u591a\u4e2a\u5f00\u6e90\u5b9e\u73b0\uff0c\u7814\u7a76flink\u52a8\u6001cep\u5b9e\u73b0\u5185\u90e8\u539f\u7406\uff0c\u51c6\u5907\u540e\u7eed\u5b9e\u73b0\u4e00\u4e2a\u7cbe\u7b80\u7248\u7684</li> <li>2024-12-20 \u6dfb\u52a0</li> <li>\u8003\u8bd5\u590d\u4e60</li> </ul>"},{"location":"Project/first-intern-summary/","title":"\u7b2c\u4e00\u6bb5\u5b9e\u4e60\u603b\u7ed3","text":""},{"location":"Project/first-intern-summary/#_2","title":"\u5c97\u4f4d\u7406\u89e3","text":"<p>\u7b2c\u4e00\u6bb5\u5b9e\u4e60\uff0c\u662f\u5728\u4e00\u4e2a\u81ea\u52a8\u9a7e\u9a76\u72ec\u89d2\u517d\u516c\u53f8\u7684Data Infra\u5c97\u3002</p> <p>\u5176\u5b9e\u5bf9\u4e8e\u8fd9\u4e2a\u5c97\u4f4d\u7684\u5b9e\u9645\u5b9a\u4f4d\uff0c\u6ca1\u5165\u804c\u4e4b\u524d\u6211\u7684\u7406\u89e3\u662f\u4e00\u76f4\u6709\u504f\u5dee\u7684\u3002\u90a3\u65f6\u5019\u6211\u7684\u7406\u89e3\u5c31\u662f\u8fdb\u53bb\u4e4b\u540e\u641e\u5404\u79cd\u5f00\u6e90\u7ec4\u4ef6\uff0c\u6bd4\u5982Spark,Flink\u7b49\u5185\u6838\u7684\u4e8c\u6b21\u5f00\u53d1\uff0c\u6216\u8005\u8bf4\u53ef\u80fd\u662f\u6bcf\u5929\u5199SQL\u3002\u4f46\u662f\u5165\u804c\u4e4b\u540e\uff0c\u6211\u624d\u4e86\u89e3\u6570\u636e\u4e2d\u53f0 | data Infra\u7684\u5177\u4f53\u5b9a\u4f4d\uff0c\u4ee5\u53ca\u5b9e\u9645\u7684\u5c97\u4f4d\u804c\u80fd\u3002\u6570\u636e\u4e2d\u53f0\u5c31\u662f\u8981\u6253\u7834\u6570\u636e\u5b64\u5c9b\uff0c\u7edf\u4e00\u7ba1\u7406\u4ee5\u51cf\u5c11\u91cd\u590d\u5de5\u4f5c\uff0c\u63d0\u9ad8\u6570\u636e\u7684\u5b58\u50a8 &amp; \u8ba1\u7b97\u6548\u7387\u3002\u4e2d\u53f0\u5c97\u4f4d\u4e0d\u6b62\u6709\u6570\u636e\u4e2d\u53f0\uff0c\u4e5f\u4f1a\u6709\u5176\u4ed6\u4e2d\u53f0\u3002\u7b80\u5355\u6765\u8bf4\uff0c\u628a\u5b83\u5f53\u505a\u4e00\u4e2aProject\u4e2d\u7684Common\u6a21\u5757\u5c31\u53ef\u4ee5\u3002</p> <p>Data Infra \u5c97\u5fc5\u7136\u662f\u4f9d\u8d56\u4e8e\u4e0b\u6e38\u7684\u4e1a\u52a1\u56e2\u961f(\u6b64\u5904\u662f\u7b97\u6cd5\u56e2\u961f)\u800c\u751f\u5b58\u7684\u3002\u6240\u4ee5\u663e\u800c\u6613\u89c1\uff0c\u5982\u679c\u60f3\u8981\u56e2\u961f\u6216\u8005\u4e2a\u4eba\u7684\u53d1\u5c55\u6709\u597d\u7684\u4ea7\u51fa\uff0c\u5fc5\u987b\u6709\u654f\u9510\u7684\u4e1a\u52a1\u55c5\u89c9\uff0c\u80fd\u591f\u8bc6\u522b\u6bcf\u4e2a\u9636\u6bb5\u516c\u53f8\u7684\u6838\u5fc3\u7b97\u6cd5\u56e2\u961f\uff0c\u5e76\u53ca\u65f6\u6c9f\u901a\uff0c\u4e86\u89e3\u75db\u70b9\u3002\u75db\u70b9\u4e86\u89e3\u4e4b\u540e\uff0c\u9700\u8981\u4e86\u89e3\u5176\u4ed6\u56e2\u961f\u662f\u5426\u5df2\u7ecf\u6709\u73b0\u5b58\u7684\u5de5\u4f5c\uff0c\u5982\u679c\u6ca1\u6709/\u6709\u5f88\u5927\u6539\u8fdb\u7a7a\u95f4\uff0c\u90a3\u5c31\u53ef\u4ee5\u8003\u8651\u63a8\u51fa\u81ea\u5df1\u7684\u65b0\u4ea7\u54c1\u6765\u586b\u8865\u7a7a\u7f3a\uff0c\u5e76\u4e14\u4e00\u5b9a\u8981\u4ece\u9879\u76ee\u8bbe\u8ba1\u4e66\u5f00\u59cb\u5c31\u65f6\u523b\u7a81\u51fa\u9879\u76ee\u7684\u6240\u89e3\u51b3\u7684\u6838\u5fc3\u95ee\u9898\u3002\u5982\u679c\u81ea\u5df1\u4e0d\u80fd\u8bf4\u670d\u81ea\u5df1\uff0c\u90a3\u5c31\u4e0d\u8981\u505a\u3002\u5982\u679c\u53ef\u4ee5\u8bf4\u670d\u81ea\u5df1\uff0c\u90a3\u5c31\u575a\u5b9a\u5730\u505a\u4e0b\u53bb\uff0c\u89c1\u62db\u62c6\u62db\u3002</p>"},{"location":"Project/first-intern-summary/#_3","title":"\u6280\u672f\u4f53\u9a8c","text":"<p>Infra\u5c97\u4ece\u524d\u540e\u53f0\u89c6\u89d2\u6765\u770b\uff0c\u5f80\u5f80\u90fd\u53ef\u4ee5\u88ab\u5212\u5206\u5230\u540e\u53f0\u5f00\u53d1\u3002</p> <p>\u6211\u8fdb\u53bb\u7684\u5c97\u4f4d\u8bed\u8a00\u4ee5Python\u4e3a\u4e3b\u3002\u6211\u8fdb\u53bb\u7684\u4efb\u52a1\u5c31\u662f\u5f00\u53d1\u4e00\u4e2a\u901a\u7528\u7684\u7b97\u6cd5\u4efb\u52a1\u63d0\u4ea4\u5e73\u53f0\uff0c\u89c4\u6a21\u633a\u5927\u7684\u3002\u4f46\u662f\u5f53\u65f6\u6211\u5bf9\u540e\u53f0\u5f00\u53d1\u7684\u7406\u89e3\u5f88\u6d45\uff0c\u5fae\u670d\u52a1\u8bbe\u8ba1\u66f4\u662f\u6ca1\u6709\u4e86\u89e3\u3002\u4f46\u662fmentor\u613f\u610f\u7ed9\u6211\u673a\u4f1a\uff0c\u8ba9\u6211\u5f00\u59cb\u5c31\u4e0a\u624b\u4e00\u4e2a\u7279\u522b\u590d\u6742\u7684\u4efb\u52a1\uff0c\u8fd9\u4e2a\u4efb\u52a1\u8017\u8d39\u4e86\u6211\u5c0f\u4e00\u4e2a\u6708\u65f6\u95f4\u53bb\u5b8c\u6210\u3002\u8fd9\u4e2a\u9879\u76ee\u662f\u6211\u6295\u5165\u7cbe\u529b\u6700\u5927\uff0c\u4f46\u662f\u4ea7\u51fa\u76f8\u5bf9\u6700\u5c0f\u7684\u9879\u76ee\u3002\u4f46\u662f\u5bf9\u4e2a\u4eba\u800c\u8a00\u5b83\u610f\u4e49\u91cd\u5927\uff0c\u56e0\u4e3a\u5b83\u662f\u6211\u4f7f\u7528\u8fc7hack\u6280\u672f\u6700\u591a\u7684\u9700\u6c42\u3002\u6211\u4f3c\u4e4e\u628a\u4e4b\u524d\u542c\u8fc7\u768480%\u7684hack\u65b9\u6848\u90fd\u4f7f\u7528\u4e86\u4e00\u904d\u3002\u5404\u79cd\u6ce8\u518c | \u7f13\u5b58 | \u5143\u7f16\u7a0b | \u4ee3\u7801\u89e3\u6790 |\u8fdb\u7a0b\u65e5\u5fd7\u5339\u914d \u6280\u5de7\uff0c\u6bcf\u4e00\u6b65\u90fd\u662f\u5199\u65b9\u6848\u65f6\u5019\u6ca1\u60f3\u5230\u7684\uff0c\u4f46\u662f\u6bcf\u4e00\u6b65\u90fd\u6709\u5b83\u5b58\u5728\u7684\u610f\u4e49\u3002</p> <p>\u540e\u7eed\u7684\u9700\u6c42\uff0c\u5bf9\u6211\u800c\u8a00\u662f\u4e00\u79cd\u56db\u4e24\u62e8\u5343\u91d1\u7684\u611f\u89c9\u3002\u56e0\u4e3a\u6211\u53ef\u4ee5\u901a\u8fc7\u4e00\u5c0f\u6bb5\u6838\u5fc3\u4ee3\u7801\uff0c\u8fbe\u5230\u8fdc\u8d85\u9884\u671f\u7684\u6536\u76ca\u3002\u800c\u8fd9\u4e00\u6bb5\u6838\u5fc3\u4ee3\u7801\u4ee5\u53ca\u521d\u7248\u8bbe\u8ba1\uff0c\u6211\u53ea\u82b1\u4e86\u4e00\u5929\u7684\u65f6\u95f4\u5c31\u5b8c\u6210\u4e86\u3002\u540e\u9762\u7684\u6d41\u7a0b\u867d\u7136\u8fd8\u662f\u6709\u5c0f\u63d2\u66f2(\u56e0\u4e3a\u5bf9CICD\u4e0d\u8db3\u591f\u719f\u7ec3)\uff0c\u4f46\u662f\u6700\u7ec8\u8fd9\u4e9b\u9700\u6c42\u8fd8\u662f\u5b8c\u7f8e\u5b8c\u6210\u4e86\u3002</p> <p>\u7b80\u5355\u603b\u7ed3\uff1a\u8bed\u8a00\u4e0d\u91cd\u8981\uff0c\u601d\u60f3\u5f88\u91cd\u8981\u3002\u6c38\u8fdc\u8981\u540c\u65f6\u7ad9\u5728\u5f00\u53d1\u4fa7 &amp; \u7528\u6237\u4fa7(\u4e0b\u6e38\u56e2\u961f)\u4e24\u4fa7\u540c\u65f6\u770b\u5f85\u95ee\u9898\uff0c\u57fa\u4e8e\u75db\u70b9\u6765\u8bbe\u60f3\u65b9\u6848\uff0c\u800c\u4e0d\u662f\u6c89\u6d78\u5728\u81ea\u5df1\u7684\u4ee3\u7801\u4e16\u754c\u91cc\u3002</p>"},{"location":"Project/first-intern-summary/#_4","title":"\u5173\u7cfb\u76f8\u5904","text":"<p>mentor\uff0c\u4ee5\u53caleader\uff0c\u5927\u5bb6\u90fd\u53cb\u5584\uff0c\u90fd\u613f\u610f\u7ed9\u673a\u4f1a\uff0c\u8fd9\u70b9\u662f\u6211\u6c38\u8fdc\u611f\u6fc0\u7684\u3002\u5f53\u65f6\u7b2c\u4e00\u573a\u9762\u8bd5\u7684\u65f6\u5019\u7684\u552f\u4e00\u5185\u5bb9\uff0c\u5c31\u662f\u8ba9\u6211\u624b\u5199B\u6811\u5e76\u5c55\u5f00\u4e86\u5173\u4e8e\u5b83\u7684\u6240\u6709\u77e5\u8bc6\u70b9\uff0c\u6211\u5c45\u7136\u8fd8\u662f\u63a5\u4e0b\u6765\u5e76\u5199\u4e86\u5927\u4f53\u6846\u67b6(\u6ca1\u6cd5\u4e5f\u6ca1\u80fd\u529b\u5b8c\u6574\u5b9e\u73b0\uff0c\u56e0\u4e3a\u4e00\u4e2a\u6559\u5b66\u7248\u672c\u53ef\u80fd\u5c31\u9700\u8981700\u884c\uff0c\u800c\u5de5\u4e1a\u7ea7\u9ad8\u6548\u4ee3\u7801\u53ef\u80fd\u9700\u8981\u51e0\u4e2a\u4eba\u641e\u4e00\u5e74\u65f6\u95f4)\uff0c\u73b0\u5728\u60f3\u60f3\u5f53\u65f6\u7684\u6211\u4e5f\u8fd8\u662f\u6bd4\u8f83\u5927\u80c6\u7684\uff0c\u4f46\u662f\u4ed6\u4eec\u4e5f\u5f80\u5f80\u6b23\u8d4f\u8fd9\u79cd\u5927\u80c6\uff0c\u800c\u4e0d\u662f\u8ddf\u968f\u516b\u80a1\u5faa\u89c4\u8e48\u77e9\u3002</p>"},{"location":"Project/first-intern-summary/#_5","title":"\u9057\u61be","text":"<p>\u6700\u7ec8\u8fd8\u662f\u88ab\u4e0d\u53ef\u63a7\u56e0\u7d20\u5f3a\u5236\u53eb\u56de\u5b66\u6821\u4e86\uff0c\u4f46\u662f\u6211\u5728\u4e00\u591c\u672a\u7720\u4e4b\u540e\u8fd8\u662f\u63a7\u5236\u60c5\u7eea\u628a\u516c\u53f8\u8fd9\u8fb9\u7684\u4e8b\u60c5\u5904\u7406\u5b8c\u4e86\uff0c\u4e5f\u6ca1\u6709\u5411\u670b\u53cb\u5e7f\u800c\u544a\u4e4b\u6211\u79bb\u804c\u7684\u65e0\u5948\u3002\u8fd9\u5bf9\u5411\u6765\u4e60\u60ef\u62b1\u6028\u7684\u6211\u6765\u8bf4\u662f\u4e00\u79cd\u5de8\u5927\u7684\u8fdb\u6b65\u3002</p> <p>\u53ef\u80fd\u6211\u6c38\u8fdc\u90fd\u4e0d\u4f1a\u5fd8\u8bb0\u665a\u4e0a\u4e00\u4e2a\u4eba\u4e0b\u73ed\u540e\u5728\u5b66\u77e5\u56ed\u8def\u65c1\uff0c\u8fb9\u8d70\u8fb9\u54fd\u54bd\u7684\u573a\u666f\u3002\u5b83\u5c31\u662f\u6211\u8fd9\u6bb5\u8def\u9014\u7684\u7f29\u5f71\uff0c\u7eb5\u7136\u8346\u68d8\u4e1b\u751f\uff0c\u98ce\u96e8\u4ea4\u52a0\uff0c\u4f46\u662f\u6211\u4e0d\u80fd\u505c\u6b62\u811a\u6b65\uff0c\u6211\u53ea\u80fd\u7ee7\u7eed\u5411\u524d\u3002\u6bd5\u7adf\uff0c\u201c\u6740\u4e0d\u6b7b\u6211\u7684\uff0c\u53ea\u4f1a\u4f7f\u6211\u66f4\u5f3a\u5927\u201d\u3002\u9002\u5e94\u6027\u5f3a\u6c38\u8fdc\u662f\u6211\u7684\u7b2c\u4e00\u6807\u7b7e\uff0c\u56f0\u96be\u53ea\u4f1a\u8ba9\u6211\u66f4\u52a0\u575a\u5b9a\u8fd9\u4e00\u4fe1\u5ff5\u3002</p>"},{"location":"Project/ruleCoreSummary/","title":"\u89c4\u5219\u52a8\u6001\u52a0\u8f7d","text":"<p>\u4ee5Flink\u7a0b\u5e8f\u6240\u4f7f\u7528\u7684JDK11\u4e3a\u4f8b\u5b50</p>"},{"location":"Project/ruleCoreSummary/#_2","title":"\u7c7b\u52a0\u8f7d\u6982\u8ff0","text":"<p>\u7c7b\u52a0\u8f7d\u5668\u7528\u4e8e\u5c06<code>class</code>\u6587\u4ef6\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\u3002\u9ed8\u8ba4\u6709\u4e09\u79cd\u7c7b\u52a0\u8f7d\u5668\uff1a</p> <ul> <li><code>Bootstrap classLoader</code> \u542f\u52a8/\u5f15\u5bfc\u7c7b\u52a0\u8f7d\u5668</li> <li><code>Platform classLoader</code> \u5e73\u53f0\u7c7b\u52a0\u8f7d\u5668</li> <li><code>App classLoader</code> \u7cfb\u7edf\u7c7b\u52a0\u8f7d\u5668</li> </ul> Java<pre><code>    @Test\n    public void testALlClassLoader() throws ClassNotFoundException {\n        assert ClassLoaderTest.class.getClassLoader().getName().equals(\"app\");\n        assert ClassLoaderTest.class.getClassLoader().getParent().getName().equals(\"platform\");\n        assert ClassLoaderTest.class.getClassLoader().getParent().getParent() == null;\n    }\n</code></pre>"},{"location":"Project/ruleCoreSummary/#bootstrap-classloader","title":"Bootstrap classLoader","text":"<p>\u4e3b\u8981\u52a0\u8f7dJDK\u6838\u5fc3\u7c7b\u5e93\uff0c\u7531C++\u5b9e\u73b0\uff0c\u5982\u679c\u60f3\u8981\u83b7\u53d6\u8be5\u7c7b\u52a0\u8f7d\u5668\uff0c\u4f1a\u8fd4\u56denull,\u56e0\u4e3a\u5bf9c++\u7c7b\u7684\u5f15\u7528Java\u5c42\u9762\u5e76\u4e0d\u53ef\u89c1\u3002</p> Java<pre><code>    @Test\n    public void testBootstrapClassLoader() throws ClassNotFoundException {\n        assert String.class.getClassLoader() == null;\n        assert ClassLoaderTest.class.getClassLoader().getParent().getParent() == null;\n    }\n</code></pre>"},{"location":"Project/ruleCoreSummary/#platform-classloader","title":"Platform classLoader","text":"<p>\u52a0\u8f7dJDK\u7684Module\u90e8\u5206\u3002</p> Java<pre><code>    @Test\n    public void testPlatformClassLoader() throws ClassNotFoundException {\n        assert ClassLoaderTest.class.getClassLoader().getParent().getName().equals(\"platform\");\n        var parent = ClassLoaderTest.class.getClassLoader().getParent();\n        var definedPackages = parent.getDefinedPackages(); //\u8fd4\u56de\u6b64\u52a0\u8f7d\u5668\u5b9a\u4e49\u7684\u6240\u6709\u8f6f\u4ef6\u5305\n        Arrays.stream(definedPackages).forEach(p -&gt; {\n            System.out.println(p.getName());\n        });\n    }\n</code></pre>"},{"location":"Project/ruleCoreSummary/#application-classloader","title":"Application classLoader","text":"<p>\u52a0\u8f7d\u5e94\u7528\u7a0b\u5e8f\u7684\u7c7b</p> Java<pre><code>    @Test\n    public void testAppClassLoader() throws ClassNotFoundException {\n        ClassLoader appClassLoader = ClassLoaderTest.class.getClassLoader();\n        assert appClassLoader.getName().equals(\"app\");\n        var aClass = appClassLoader.loadClass(\"com.lx.cep.dynamicDemo.hotDetect.MyCustomConditionV1\");\n        assert aClass.getName().equals(\"com.lx.cep.dynamicDemo.hotDetect.MyCustomConditionV1\");\n    }\n</code></pre>"},{"location":"Project/ruleCoreSummary/#_3","title":"\u7c7b\u52a0\u8f7d\u987a\u5e8f","text":""},{"location":"Project/ruleCoreSummary/#parent-first","title":"parent first","text":"<p><code>JDk</code>\u9ed8\u8ba4\u662f<code>parent first</code>\u7684\u52a0\u8f7d\u6a21\u5f0f\uff0c\u4e5f\u5c31\u662f\u53cc\u4eb2\u59d4\u6d3e\u6a21\u5f0f\u3002\u5982\u679c\u4e00\u4e2a\u7c7b\u52a0\u8f7d\u5668\u8981\u52a0\u8f7d\u67d0\u4e2a\u7c7b\uff0c\u9996\u5148\u4ed6\u4e0d\u4f1a\u81ea\u5df1\u53bb\u52a0\u8f7d\uff0c\u800c\u662f\u9012\u5f52\u7684\u8ba9\u7236\u52a0\u8f7d\u5668\u53bb\u52a0\u8f7d\u3002\u5982\u679c<code>bootstrap classLoader</code>\u4e0d\u80fd\u52a0\u8f7d\u7684\u8bdd\uff0c\u5219\u5b50\u52a0\u8f7d\u5668\u624d\u5c1d\u8bd5\u52a0\u8f7d\u3002</p> Java<pre><code>    protected Class&lt;?&gt; loadClass(String name, boolean resolve)\n        throws ClassNotFoundException\n    {\n        synchronized (getClassLoadingLock(name)) {\n            // First, check if the class has already been loaded\n            Class&lt;?&gt; c = findLoadedClass(name);\n            if (c == null) {\n                long t0 = System.nanoTime();\n                try {\n                    if (parent != null) {\n                        c = parent.loadClass(name, false);\n                    } else {\n                        c = findBootstrapClassOrNull(name);\n                    }\n                } catch (ClassNotFoundException e) {\n                    // ClassNotFoundException thrown if class not found\n                    // from the non-null parent class loader\n                }\n\n                if (c == null) {\n                    // If still not found, then invoke findClass in order\n                    // to find the class.\n                    long t1 = System.nanoTime();\n                    c = findClass(name);\n\n                    // this is the defining class loader; record the stats\n                    PerfCounter.getParentDelegationTime().addTime(t1 - t0);\n                    PerfCounter.getFindClassTime().addElapsedTimeFrom(t1);\n                    PerfCounter.getFindClasses().increment();\n                }\n            }\n            if (resolve) {\n                resolveClass(c);\n            }\n            return c;\n        }\n    }\n</code></pre> <p>\u4f5c\u7528\uff1a</p> <ul> <li>\u9996\u5148\u53ef\u4ee5\u907f\u514d\u7c7b\u7684\u91cd\u590d\u52a0\u8f7d</li> <li>\u53ef\u4ee5\u4fdd\u8bc1\u6838\u5fc3API\u4e0d\u88ab\u8986\u76d6\u6389</li> </ul>"},{"location":"Project/ruleCoreSummary/#childfirst","title":"childFirst","text":"<p>Flink\u4e2d\uff0c\u6709\u4e24\u79cd\u7c7b\u52a0\u8f7d\u5668\uff0c\u5206\u522b\u662f<code>childFirst</code>\u4ee5\u53ca<code>parentFirst</code>\uff0c\u4e24\u8005\u90fd\u662f<code>URLClassLoader</code>\u7684\u5b50\u7c7b\u3002Flink\u7b49\u5927\u6570\u636e\u96c6\u7fa4\u9ed8\u8ba4\u90fd\u662f<code>child-first</code>\u52a0\u8f7d\u3002</p> <p>\u5176\u4e2d<code>parentFirst</code>\u7c7b\u53ea\u662f\u7b80\u5355\u7684\u5305\u88c5\u4e86\u4e00\u4e0b<code>URLClassLoader</code>\uff0c\u9075\u5faa\u53cc\u4eb2\u59d4\u6d3e\u6a21\u5f0f\u3002</p> <p>\u800c<code>childFirst</code>\u7c7b\u52a0\u8f7d\u5668\uff0c\u6253\u7834\u4e86\u53cc\u4eb2\u59d4\u6d3e\u3002</p> <p>\u5e38\u89c1\u7684Tomcat\uff0c\u7531\u4e8e\u9700\u8981\u90e8\u7f72\u591a\u4e2aWeb\u5e94\u7528\uff0c\u9700\u8981\u76f8\u4e92\u9694\u79bb\uff0c\u5219<code>childFirst</code>\u662f\u5fc5\u987b\u7684\u3002\u800c\u5e38\u89c1\u7684\u5927\u6570\u636e\u96c6\u7fa4\uff0c\u6bd4\u5982<code>Spark</code>\u4ee5\u53ca<code>Flink</code>\uff0c\u540c\u6837\u540c\u65f6\u8fd0\u884c\u7740\u5f88\u591a\u7684<code>application</code>.\u90a3\u4e48\u5982\u679c\u7528\u6237\u7684<code>application</code>\u548c\u96c6\u7fa4\u7684\u4f9d\u8d56\u76f8\u4e92\u51b2\u7a81\uff0c\u4fdd\u8bc1\u7528\u6237\u7684jar\u5305\u4f18\u5148\u7ea7\u4e5f\u662f\u5fc5\u7136\u8981\u6c42\u3002</p> <p>Flink\u7684\u5b9e\u73b0\u4e2d\uff0c\u8fd8\u5c06\u90e8\u5206\u7c7b\u5f3a\u5236\u8bbe\u7f6e\u4e3aparent\u6a21\u5f0f\u3002\u8003\u8651\u6b63\u5e38\u5728idea\u4e2d\u8fd0\u884cFlink\u96c6\u7fa4\uff0c\u90fd\u9700\u8981\u52fe\u9009<code>provided</code>\u9009\u9879\uff0c\u8fd9\u5c31\u662f\u7531\u4e8eFlink\u4f1a\u5c06\u5e94\u7528\u6700\u5c0f\u96c6\u66b4\u9732\u7ed9\u7528\u6237\uff0c\u5728\u8f7b\u5ea6\u4f7f\u7528\u4e0b\uff0c\u7528\u6237\u53ef\u4ee5\u5b8c\u5168\u4eab\u53d7\u5230Flink\u5b98\u65b9\u66f4\u65b0\u63d0\u4f9b\u597d\u7684\u4f9d\u8d56\u73af\u5883\u3002</p>"},{"location":"Project/ruleCoreSummary/#urlclassloader","title":"URLClassLoader","text":"<p>\u53ef\u4ee5\u901a\u8fc7URL\u6765\u52a0\u8f7d\u6307\u5b9a\u7684jar\u5305\u548c\u5176\u4e2d\u7684\u7c7b.</p> <p>\u5047\u8bbe\u5728\u67d0\u4e2a\u7279\u5b9a\u7684jar\u5305\u4e2d\u6709\u5982\u4e0b\u7684\u7c7b\uff1a</p> Java<pre><code>public class Hello {\n    public static void main(String[] args) {\n        System.out.println(\"Hello World!\");\n    }\n    public static String HelloStr(String str) {\n        return \"hello\" +\" \" + str;\n    }\n}\n</code></pre> <p>\u5219\u53ef\u4ee5\u5b9e\u73b0\u901a\u8fc7URL\u52a8\u6001\u52a0\u8f7d\u8be5\u7c7b</p> Java<pre><code>    @Test\n    public void testURLClassLoader() throws Exception {\n        File file = new File(\"F:\\\\workspace_scala\\\\stream_rule_flink\\\\rule_minning\\\\target\\\\rule_minning-1.0-SNAPSHOT.jar\");\n        URL[] urls = {file.toURI().toURL()}; //\u5c06\u8def\u5f84\u8f6c\u6362\u4e3aURL\u6570\u7ec4\n        URLClassLoader urlClassLoader = new URLClassLoader(urls); //\u52a0\u8f7djar\u6587\u4ef6\n        var aClass = urlClassLoader.loadClass(\"com.example.Hello\"); //\u52a0\u8f7d\u6307\u5b9a\u7c7b\n        Object obj = aClass.newInstance();\n        Method helloStr = aClass.getMethod(\"HelloStr\",String.class);\n        var str = (String)helloStr.invoke(obj, \"world\");\n        assert str.equals(\"hello world\");\n    }\n</code></pre>"},{"location":"Project/ruleCoreSummary/#_4","title":"\u9879\u76ee\u5b9e\u73b0","text":"<p>\u5728\u52a8\u6001\u89c4\u5219\u5b9e\u73b0\u4e2d\uff0c\u5982\u679c\u8981\u5b9e\u73b0\u52a8\u6001\u89c4\u5219\u7684\u5b9e\u65f6\u66f4\u65b0\uff0c\u6216\u8bb8\u53ef\u4ee5\u6309\u7167\u5982\u4e0b\u65b9\u5f0f\u8fdb\u884c\uff1a</p> <p>\u9996\u5148\uff0c\u5728\u672c\u5730\u90e8\u7f72\u548c\u96c6\u7fa4\u540c\u6837\u73af\u5883\u7684Flink\uff0c\u9632\u6b62\u7c7b\u52a0\u8f7d\u5b8c\u4e0d\u80fd\u4f7f\u7528\u3002</p> <p>\u7136\u540e\uff0c\u5f53\u9700\u8981\u89c4\u5219\u4e0a\u7ebf\u7684\u65f6\u5019\uff0c\u5728\u5916\u90e8\u521b\u5efa\u89c4\u5219\u7c7b\uff0c\u5e76\u66b4\u9732\u51fa\u5168\u7c7b\u540d\u4ee5\u53caURL\u3002</p> <p>\u8be5\u89c4\u5219jar\u5305\u53ef\u4ee5\u90e8\u7f72\u5230\u8fdc\u7a0b\u5b58\u50a8\u4e2d\u3002</p>"},{"location":"Project/ruleCoreSummary/#_5","title":"\u540e\u7aef\u90e8\u5206","text":"<p>\u5728\u540e\u7aef\u90e8\u5206\u7684Service\u5c42\uff1a<code>ServiceImpl</code>\u53ef\u4ee5\u6839\u636e\u552f\u4e00\u6807\u8bc6\u627e\u5230jar\u5305\uff0c\u5e76\u52a0\u8f7d\u5176\u4e2d\u7684\u7c7b\uff0c\u5373\u53ef\u52a8\u6001\u521b\u5efa\u89c4\u5219\uff0c\u5e76\u5b58\u50a8\u5230DB\u4e2d\u3002</p> <p>\u4e3a\u4e86\u7b80\u5316\u4ee5\u53ca\u89e3\u8026\uff0c\u53ef\u4ee5\u5c06<code>where</code>\u90e8\u5206\u7684\u7c7b\u62bd\u79bb\u51fa\u6765\uff0c\u5e76\u5c06\u5e38\u7528\u7684\u6a21\u5f0f\u679a\u4e3e\u51fa\u6765\uff0c\u53ef\u505a\u5230\u524d\u7aef\u5e73\u53f0\u4ee5\u65b9\u4fbf\u9009\u62e9\u3002\u8fd9\u6837\u5c31\u53ef\u4ee5\u8fbe\u5230</p> <p>\u63a2\u7d22Flink\u52a8\u6001CEP\uff1a\u676d\u5dde\u94f6\u884c\u7684\u5b9e\u6218\u6848\u4f8b - \u77e5\u4e4e (zhihu.com)</p> <p>\u91cc\u9762\u6240\u7ed9\u51fa\u7684\u5e73\u53f0\u7684\u6548\u679c\u3002</p> Java<pre><code>        Object b =  new String[]{\"70\",\"80\"}; //\u8fd9\u91cc\u8f6c\u6362\u4e3aObject\uff0c\u9632\u6b62\u4e0b\u9762\u7684\u6784\u9020\u5668\u89e3\u5305\u5c06\u6570\u7ec4\u6bcf\u4e00\u9879\u5f53\u505a\u4e00\u4e2a\u53c2\u6570\n        //\u6d4b\u8bd5URL\u65b9\u5f0f\u52a0\u8f7d\u81ea\u5b9a\u4e49\u7c7b\n        File file = new File(\"F:\\\\workspace_scala\\\\stream_rule_flink\\\\engine_module\\\\target\\\\classes\");\n        URL url = file.toURI().toURL();\n        System.out.println(url);\n        URLClassLoader urlClassLoader = new URLClassLoader(new URL[]{url});\n        var aClass = urlClassLoader.loadClass(\"org.apache.flink.cep.a_demo.MyCustomConditionV3\");\n        var constructor = aClass.getConstructor(Object[].class);\n        Object obj = constructor.newInstance(b);\n\n        Pattern&lt;TemperatureEvent, TemperatureEvent&gt; customPattern2 = Pattern.&lt;TemperatureEvent&gt;begin(\"start\")\n                .where((IterativeCondition&lt;TemperatureEvent&gt;) obj)\n                .next(\"middle\")\n                .where((IterativeCondition&lt;TemperatureEvent&gt;) obj)\n                .within(Time.seconds(10));\n        System.out.println(CepJsonUtils.convertPatternToJSONString(customPattern2));\n</code></pre>"},{"location":"Project/ruleCoreSummary/#flink","title":"Flink\u5f15\u64ce\u90e8\u5206","text":"<p>\u5728Flink\u5f15\u64ce\u90e8\u5206\uff1a\u4e3a\u4e86\u4f7f\u5f97Flink\u4f5c\u4e1a\u4e0d\u505c\u6b62\uff0c\u53ef\u4ee5\u5c06jar\u5305\u901a\u8fc7<code>flink-client</code>\u7684\u65b9\u5f0f\u4f7f\u7528<code>add jar</code>\u547d\u4ee4\u8fdb\u884c\u70ed\u52a0\u8f7d\u3002\u7136\u540e\u89c4\u5219\u5c31\u53ef\u4ee5\u5b9a\u65f6\u4ece\u5916\u90e8DB\u52a0\u8f7d\u5230\u5e94\u7528\u4e2d\u3002</p> <p>JAR \u8bed\u53e5 | Apache Flink</p> <p>\u6216\u8005\uff0c\u4e3a\u4e86\u7edf\u4e00\uff0c\u53ef\u4ee5\u4f7f\u7528Flink RestFul API\u6765\u4e0a\u4f20Jar\u5305\u6216\u8005\u5220\u9664Jar\u5305\u3002</p> <p>REST API | Apache Flink</p> <p>\u4f8b\u5b50\u5982\u4e0b\uff1a</p> Text Only<pre><code>### curl -X POST -H \"Expect:\" -F \"jarfile=@path/to/flink-job.jar\" http://hostname:port/jars/upload\nPOST http://localhost:9091/jars/upload\nContent-Type: multipart/form-data; boundary=WebAppBoundary\n\n--WebAppBoundary\nContent-Disposition: form-data; name=\"jarfile\"; filename=\"F:\\workspace_scala\\stream_rule_flink\\rule_minning\\target\\rule_minning-1.0-SNAPSHOT.jar\"\n\n--WebAppBoundary--\n\n###\n\n\n\n### Get config\nGET http://localhost:9091/config\nAccept: application/json\n\n### GET datasets\nGET http://localhost:9091/datasets\nAccept: application/json\n\n### \u67e5\u770b\u4e0a\u4f20\u7684jar\u5305\nGET http://localhost:9091/jars\n</code></pre>"},{"location":"TEST/","title":"\u8003\u8bd5\u7684\u590d\u4e60\u7b14\u8bb0","text":"<p>\u5185\u5bb9\u53ef\u4ee5\u5728\u4fa7\u8fb9\u680f\u9009\u62e9</p>"},{"location":"TEST/blockchain/","title":"blockchain","text":""},{"location":"TEST/blockchain/#_1","title":"\u7b2c\u4e00\u8282 \u901a\u8bc6","text":"<ol> <li>\u533a\u5757\u94fe\u7684\u8bde\u751f\uff1a    2008\u5e74\uff0c\u4e2d\u672c\u806a\uff0c\u767d\u76ae\u4e66\u3002\u89e3\u51b3\u4e86\u7535\u5b50\u8d27\u5e01\u652f\u4ed8\u7684\u4e09\u5927\u95ee\u9898\uff1a\u91cd\u590d\u652f\u4ed8\u95ee\u9898\uff0c\u4f9d\u8d56\u7b2c\u4e09\u65b9\u95ee\u9898\uff0c\u53d1\u884c\u91cf\u63a7\u5236\u95ee\u9898</li> <li>\u533a\u5757\u94fe\u7684\u4e09\u8981\u7d20    \u4e09\u8981\u7d20\uff1a\u4ea4\u6613(\u5bfc\u81f4\u8d26\u672c\u72b6\u6001\u6539\u53d8)\uff0c\u533a\u5757(\u5171\u8bc6)\uff0c\u94fe(\u4e32\u8054)</li> <li>\u4e0e\u5173\u7cfb\u578b\u6570\u636e\u5e93\u7684\u533a\u522b\uff1a<ol> <li>\u5173\u7cfb\u578b\u6570\u636e\u5e93\uff1a\u53ef\u7be1\u6539\uff0c\u96be\u9a8c\u8bc1</li> <li>\u533a\u5757\u94fe\uff1a\u96be\u7be1\u6539\uff0c\u6613\u9a8c\u8bc1</li> </ol> </li> <li>\u533a\u5757\u94fe\u5b9a\u4e49\uff1a<ol> <li>\u72ed\u4e49\uff1a\u4e00\u79cd\u6309\u7167\u65f6\u95f4\u987a\u5e8f\u5c06\u6570\u636e\u533a\u5757\u4ee5\u987a\u5e8f\u5f62\u5f0f\u76f8\u8fde\u7684\u94fe\u5f0f\u6570\u636e\u7ed3\u6784\uff0c\u5e76\u4ee5\u5bc6\u7801\u5b66\u5f62\u5f0f\u4fdd\u8bc1\u4e0d\u53ef\u7be1\u6539\u7684\u5206\u5e03\u5f0f\u8d26\u672c\u6280\u672f</li> <li>\u5e7f\u4e49\uff1a\u5229\u7528\u5757\u94fe\u5f0f\u7ed3\u6784\u5b58\u50a8\u6570\u636e\uff0c\u4ee5\u5206\u5e03\u5f0f\u7b97\u6cd5\u6765\u66f4\u65b0\u6570\u636e\uff0c\u4f7f\u7528\u5bc6\u7801\u5b66\u65b9\u5f0f\u4fdd\u8bc1\u5b89\u5168\u7684\uff0c\u5229\u7528\u81ea\u52a8\u5316\u811a\u672c\u7ec4\u6210\u7684\u667a\u80fd\u5408\u7ea6\u6765\u7f16\u7a0b\u7684 \u5206\u5e03\u5f0f\u57fa\u7840\u67b6\u6784\u548c\u8ba1\u7b97\u8303\u5f0f**</li> </ol> </li> </ol>"},{"location":"TEST/blockchain/#_2","title":"\u7b2c\u4e8c\u8282 \u901a\u8bc6","text":"<ol> <li>\u4ef7\u503c\u4f20\u9012\uff1a    \u4e24\u79cd\u4ef7\u503c\u7684\u4f20\u9012\u65b9\u5f0f\uff1a\u4ef7\u503c\u7684\u4f20\u9012\u8981\u6c42\u4fe1\u606f\u7684\u4f20\u9012\u548c\u4ef7\u503c\u7684\u8f6c\u79fb\u540c\u65f6\u8fdb\u884c</li> <li>\u533a\u5757\u94fe\u7684\u672c\u8d28\uff1a\u4e00\u79cd\u53bb\u4e2d\u5fc3\u5316\u7684\u72b6\u6001\u673a\u3002\u6bd4\u7279\u5e01\u548c\u4ee5\u592a\u574a\u90fd\u5c5e\u4e8e\u4ea4\u6613\u9a71\u52a8\u7684\u5206\u5e03\u5f0f\u72b6\u6001\u673a</li> <li>\u533a\u5757\u94fe1.0\u548c2.0\u533a\u522b\uff1a<ol> <li>\u57282.0\u589e\u52a0\u4e86\u5408\u7ea6\u5c42</li> <li>\u5171\u8bc6\u5c42\u589e\u52a0\u4e86\u6743\u76ca\u8bc1\u660e\u7b49\u65b0\u673a\u5236</li> </ol> </li> </ol>"},{"location":"TEST/blockchain/#1","title":"\u7b2c\u4e09\u8282 \u5305\u542b\u4f5c\u4e1a1","text":"<ol> <li> <p>\u6bd4\u7279\u5e01\u7cfb\u7edf\u4eba\u5458\u7ec4\u6210</p> <ol> <li>\u5f00\u53d1\u4eba\u5458\uff1a\u7acb\u6cd5\u6743</li> <li>\u77ff\u5de5\uff1a\u884c\u653f\u6743</li> <li>\u7528\u6237\uff1a\u53f8\u6cd5\u6743</li> <li> <p>\u6bd4\u7279\u5e01\u53d1\u578b\u673a\u5236</p> </li> <li> <p>\u603b\u6570\u91cf\uff1a\u6838\u5b9a\uff0c\u6bcf10\u5206\u949f\u51fa\u4e00\u4e2a\u533a\u5757\uff0c\u6700\u521d\u533a\u5757\u5956\u52b150\u679a\uff0c\u7136\u540e\u6bcf21\u4e07\u4e2a\u533a\u5757\u51cf\u534a(\u56db\u5e74\u51cf\u534a)\uff0c\u52302140\u5e74\u5de6\u53f3\u53d1\u884c\u5b8c\u6bd5</p> </li> <li>\u7b2c\u4e00\u4e2a\u533a\u5757\u88ab\u6210\u4e3a\u521b\u4e16\u533a\u5757\uff0c\u5185\u5bb9\u4e0d\u80fd\u6539\u53d8</li> <li> <p>\u4f5c\u4e1a1</p> </li> <li> <p>\u8ba1\u7b97\u603b\u91cf2100\u4e07\u7684\u7531\u6765</p> </li> <li>\u8ba1\u7b97\u56db\u5e74\u51cf\u534a\u8bf4\u6cd5\u7684\u7531\u6765</li> <li>\u8ba1\u7b97\u603b\u5171\u51cf\u534a\u7684\u6b21\u6570</li> <li>\u8ba1\u7b97\u88ab\u6316\u5b8c\u7684\u5e74\u4efd-2140\u662f\u600e\u4e48\u5f97\u51fa\u6765\u7684</li> <li> <p>\u6bd4\u7279\u5e01\u4fe1\u606f\u6570\u636e\u7684\u67e5\u8be2</p> </li> <li> <p>\u6bd4\u7279\u5e01\u662f\u5b58\u5728\u4e8e\u6574\u4e2ap2p\u7f51\u7edc\u7684\u3002</p> </li> <li>\u6bcf\u4e00\u7b14\u67e5\u8be2\u90fd\u7ecf\u8fc7\u5168\u7f51\u5e7f\u64ad\uff0c\u6240\u6709\u4ea4\u6613\u4eba\u4eba\u53ef\u89c1\uff0c\u516c\u5f00\u900f\u660e\uff0c\u53ef\u4ee5\u67e5\u770b\u4efb\u4f55\u6570\u636e\uff0c\u5e76\u4e14\u4fdd\u8bc1\u4ea4\u6613\u65e0\u6cd5\u4f2a\u9020</li> </ol> </li> </ol>"},{"location":"TEST/blockchain/#_3","title":"\u7b2c\u56db\u8282 \u52a0\u5bc6\u5b66","text":"<ol> <li>\u54c8\u5e0c\u7b97\u6cd5\u7279\u70b9\uff1a<ol> <li>\u6b63\u5411\u5bb9\u6613</li> <li>\u53cd\u5411\u56f0\u96be</li> <li>\u5f02\u5165\u5f02\u51fa</li> <li>\u8f93\u5165\u654f\u611f</li> </ol> </li> <li>\u96ea\u5d29\u6548\u5e94\uff1a\u54c8\u5e0c\u51fd\u6570\u7684\u8f93\u5165\u660e\u6587\uff0c\u6709\u5fae\u7b11\u7684\u5dee\u8ddd\uff0c\u5c31\u4f1a\u5bfc\u81f4\u8f93\u51fa\u7684\u4e25\u91cd\u4e0d\u4e00\u81f4</li> <li>\u6bd4\u7279\u5e01\u7684\u5730\u5740\u751f\u6210\u4f7f\u7528\u4e86\uff1a$SHA256 $ and $   RIPEMD\u2212160$</li> <li>SHA-2<ol> <li>\u5176\u4e2d\u7684224\uff0c256\u662f\u54c8\u5e0c\u6458\u8981\u7684\u957f\u5ea6\uff0c\u8f93\u51fa\u957f\u5ea6\u8d8a\u957f\uff0c\u6297\u653b\u51fb\u80fd\u529b\u8d8a\u5f3a</li> </ol> </li> <li>\u52a0\u5bc6\u89e3\u5bc6\u7b97\u6cd5<ol> <li>\u6838\u5fc3\u903b\u8f91\uff1a\u660e\u6587\u901a\u8fc7\u52a0\u5bc6\u5bc6\u94a5\u53d8\u4e3a\u5bc6\u6587\uff0c\u5bc6\u6587\u901a\u8fc7\u89e3\u5bc6\u5bc6\u94a5\u53d8\u4e3a\u660e\u6587</li> <li>\u5982\u679c\u52a0\u5bc6\u5bc6\u94a5=\u89e3\u5bc6\u5bc6\u94a5\uff0c\u5219\u662f\u5bf9\u79f0\u52a0\u5bc6(\u79c1\u94a5\u52a0\u5bc6)\uff0c\u5426\u5219\u4e3a\u975e\u5bf9\u79f0\u52a0\u5bc6(\u516c\u94a5\u52a0\u5bc6)</li> </ol> </li> <li>\u975e\u5bf9\u79f0\u52a0\u5bc6\u7b97\u6cd5\uff1a<ol> <li>\u516c\u5f00\u5bc6\u94a5\uff0c\u53ef\u516c\u5f00</li> <li>\u79c1\u6709\u5bc6\u94a5\uff0c\u79c1\u6709</li> <li>\u751f\u6210\uff1a\u901a\u8fc7\u4e00\u5bf9\u5bc6\u94a5\u5bf9\u5f97\u5230\uff0c\u901a\u8fc7\u79c1\u94a5\u5f97\u5230\u516c\u94a5\uff0c\u4f46\u662f\u53cd\u8fc7\u6765\u4e0d\u884c</li> <li>\u6d41\u7a0b    \u5982\u679cA\u8981\u548cB\u901a\u4fe1\uff0c\u5219\u5728\u6b64\u4e4b\u524d\uff0cB\u5e7f\u64ad\u516c\u94a5\uff0cA\u83b7\u5f97B\u7684\u516c\u94a5\u3002\u7136\u540eA\u7ed9B\u53d1\u6d88\u606f\uff0c\u5219\u4f7f\u7528B\u7684\u516c\u94a5\u52a0\u5bc6\uff0c\u53d1\u9001\u7ed9B\uff0cB\u4f7f\u7528\u81ea\u5df1\u7684\u79c1\u94a5\u89e3\u5bc6\u5373\u53ef\u3002</li> <li>\u4e24\u79cd\u5e94\u7528\uff1a\u5176\u5b9e\u516c\u94a5\u548c\u79c1\u94a5\u90fd\u53ef\u4ee5\u7528\u4e8e\u52a0\u5bc6    \u79c1\u94a5\u52a0\u5bc6\uff0c\u516c\u94a5\u89e3\u5bc6\uff1a\u8eab\u4efd\u8ba4\u8bc1    \u516c\u94a5\u52a0\u5bc6\uff0c\u79c1\u94a5\u89e3\u5bc6\uff1a\u4fe1\u606f\u52a0\u5bc6</li> </ol> </li> <li>\u516c\u94a5\u5bc6\u7801\u7b97\u6cd5\u7684\u5206\u7c7b<ol> <li>\u5927\u6574\u6570\u56e0\u5b50\u5206\u89e3\u95ee\u9898</li> <li>\u79bb\u6563\u5bf9\u79f0\u95ee\u9898</li> </ol> </li> <li>\u692d\u5706\u66f2\u7ebf\uff1a<ol> <li>\u6807\u51c6\u65b9\u7a0b\uff1a\u5176\u4e2d\u7684\u7cfb\u6570a = 0, b = 7\uff0c\u4e5f\u5c31\u662f\\(y = x^3 + 7\\)</li> </ol> </li> <li>\u5e26\u7b7e\u540d\u7684\u901a\u4fe1\u8fc7\u7a0b\uff1a<ol> <li>\u5982\u679cA\u548cB\u9700\u8981\u8fdb\u884c\u4e92\u76f8\u901a\u4fe1\uff0c\u5219\u9996\u5148\u4e92\u6362\u516c\u94a5\u3002\u516c\u94a5\u90fd\u662f\u7528\u81ea\u8eab\u7684\u79c1\u94a5\u4ea7\u751f\u7684\u3002</li> <li>\u6570\u5b57\u7b7e\u540d\u662f\u7528\u81ea\u5df1\u7684\u79c1\u94a5\u6839\u636e\u8981\u53d1\u9001\u7684\u6d88\u606f\u5177\u4f53\u53d8\u5316\u800c\u751f\u6210\u7684\u3002</li> <li>\u5982\u679cA\u8981\u7ed9B\u53d1\u6d88\u606f\uff1a<ol> <li>\u52a0\u5bc6\uff1a\u7528B\u7684\u516c\u94a5\u628a\u8981\u53d1\u7684\u6d88\u606f\u52a0\u5bc6</li> <li>\u7b7e\u540d\uff1a\u7528A\u81ea\u5df1\u7684\u79c1\u94a5\u7ed9\u6d88\u606f\u7b7e\u540d</li> </ol> </li> <li>B\u6536\u5230\u6d88\u606f\u4e4b\u540e\uff1a<ol> <li>\u89e3\u5bc6\uff1a\u7528B\u81ea\u5df1\u7684\u79c1\u94a5\u628a\u6d88\u606f\u89e3\u5bc6</li> <li>\u9a8c\u8bc1\uff1a\u7528A\u7684\u516c\u94a5\u8fdb\u884c\u9a8c\u8bc1</li> </ol> </li> </ol> </li> </ol>"},{"location":"TEST/blockchain/#2","title":"\u7b2c\u4e94\u8282 \u533a\u5757\u7ed3\u6784 \u5305\u542b\u4f5c\u4e1a2 \u4e0e \u753b\u56fe\u9898","text":"<ol> <li>\u533a\u5757\u94fe\uff1a\u7531\u5305\u542b\u4ea4\u6613\u4fe1\u606f\u7684\u533a\u5757\u4ece\u540e\u5411\u524d\u6709\u5e8f\u94fe\u63a5\u7684\u6570\u636e\u7ed3\u6784\uff0c\u6bcf\u4e2a\u533a\u5757\u90fd\u6307\u5411\u524d\u4e00\u4e2a\u533a\u5757\u3002\u7b2c0\u4e2a\u662f\u521b\u4e16\u533a\u5757\u3002</li> <li>\u533a\u5757\u9ad8\u5ea6\uff1a\u662f\u4ece\u67d0\u4e2a\u533a\u5757\u5230\u7b2c\u4e00\u4e2a\u533a\u5757\u7684\u9ad8\u5ea6\u3002</li> <li>\u533a\u5757\u7684\u6807\u8bc6\u7b26\uff1a<ol> <li>\u533a\u5757\u9ad8\u5ea6\uff1a\u67d0\u4e9b\u60c5\u51b5\u4e0b\u4e0d\u80fd\u552f\u4e00\u6807\u8bc6\u4e00\u4e2a\u533a\u5757\uff0c\u56e0\u4e3a\u67d0\u4e2a\u9879\u76ee\u4e2d\u53ef\u80fd\u77ed\u65f6\u95f4\u5185\u6709\u4e24\u4e2a\u540c\u6837\u7684\u9ad8\u5ea6\u7684\u533a\u5757</li> <li>\u533a\u5757\u5934\u7684\u54c8\u5e0c\uff1a\u53ef\u4ee5\u552f\u4e00\u6807\u8bc6\u3002\u5e76\u4e14\u6bcf\u4e2a\u533a\u5757\u5b58\u50a8\u7684\u662f\u7236\u533a\u5757\u7684Hash\u503c\u3002\u5e76\u4e14\u53ea\u6709\u533a\u5757\u5934\u88ab\u7528\u4e8e\u8ba1\u7b97Hash\u3002</li> <li>\u533a\u5757\u5934Hash\u7684\u4f5c\u7528\uff1a<ol> <li>\u53ef\u4ee5\u4e71\u5e8f\u83b7\u5f97\u533a\u5757\uff0c\u7136\u540e\u6309\u7167Hash\u987a\u5e8f\u8fde\u63a5\u3002\u65b9\u4fbf\u5e76\u884c\u4f20\u8f93\u3002</li> <li>\u53ef\u4ee5\u9632\u6b62\u7be1\u6539\uff0c\u56e0\u4e3a\u5982\u679c\u8981\u6539\uff0c\u5c31\u8981\u4e00\u6539\u5230\u5934\u3002\u4f46\u662f\u521b\u4e16\u533a\u5757\u65e0\u6cd5\u4fee\u6539\uff0c\u6240\u4ee5\u65e0\u6cd5\u4fee\u6539\u3002</li> <li>\u5b58\u50a8\uff1a\u4e00\u822c\u533a\u5757\u5b58\u50a8\u5728k-v DB\u4e2d\uff0ck\u662fHash\uff0cv\u662f\u533a\u5757</li> </ol> </li> </ol> </li> <li>\u533a\u5757\u5bb9\u91cf\u5927\u5c0f<ol> <li>\u533a\u5757\u5bb9\u91cf\u5927\u5c0f\u662f1MB</li> <li>\u6bcf\u4e2a\u533a\u5757\u5305\u542b\u7684\u4ea4\u6613\u6570\uff1a\u5047\u8bbe\u4e00\u7b14\u4ea4\u6613\u9700\u8981250\u5b57\u8282\uff0c\u800c\u533a\u5757\u5934\u56fa\u5b9a80\u5b57\u8282\uff0c\u5219\u5927\u7ea6\u53ef\u4ee5\u5305\u542b\\(1024 * 1024 / 250 = 4194\\) \u7b14\u4ea4\u6613</li> </ol> </li> <li>\u533a\u5757\u4ea4\u6613\u9891\u7387<ol> <li>\u6bcf10\u5206\u949f\u4ea7\u751f\u4e00\u4e2a\u533a\u5757\uff0c\u4e00\u4e2a\u533a\u57574194\u7b14\u4ea4\u6613</li> <li>4194 / 600 = 7 tps</li> <li>\u8fd9\u662f\u4e00\u4e2a\u5f88\u4f4e\u7684\u4ea4\u6613\u9891\u7387\uff0c\u5e76\u53d1\u6570\u592a\u4f4e</li> </ol> </li> <li>\u533a\u5757\u53c2\u6570<ol> <li>\u7248\u4e0a\u9ed8\u65f6\u96be\u968f</li> <li>\u7248\u672c\uff1a\u7248\u672c\u53f7</li> <li>\u4e0a\u4e00\u4e2a\u533a\u5757\u7684\u54c8\u5e0c\u503c\uff1a\u6307\u5411\u4e0a\u4e00\u4e2a\u533a\u5757</li> <li>\u9ed8\u514b\u5c14\u6811\u6839\u8282\u70b9\u54c8\u5e0c\uff1a\u6839\u636e\u4e00\u4e2a\u533a\u5757\u4e2d\u6240\u6709\u4ea4\u6613\u7684Merkle tree\u7684root\u7684\u54c8\u5e0c\u503c</li> <li>\u65f6\u95f4\u6233\uff1a\u533a\u5757\u4ea7\u751f\u7684\u65f6\u95f4\u3002\u4f46\u662f\u7236\u533a\u5757\u65f6\u95f4\u6233\u4e0d\u4e00\u5b9a\u4e25\u683c\u5c0f\u4e8e\u5b50\u533a\u5757\u65f6\u95f4\u6233\uff0c\u6709\u4e2a\u5bb9\u5fcd\u8303\u56f4\u3002</li> <li>bits:\u7528\u4e8e\u96be\u5ea6\u503c\u7684\u8bbe\u7f6e\u3002\u76ee\u6807\u54c8\u5e0c\u503c\u7ecf\u8fc7\u538b\u7f29\uff0c\u751f\u6210bits\u5b57\u6bb5\u3002bits\u503c\u8d8a\u5c0f\uff0c\u5219hash\u503c\u8d8a\u5c0f\uff0c\u6316\u77ff\u8d8a\u96be</li> <li>Nonce\uff1a\u4e00\u4e2a32\u4f4d\u968f\u673a\u6570</li> </ol> </li> <li>\u54c8\u5e0c\u503c\u7684\u8ba1\u7b97\uff1a<ol> <li>\u6839\u636e\u533a\u5757\u53c2\u6570\uff0c\u6bcf\u6b21\u53d6\u4e00\u4e2a\u968f\u673a\u6570(\u53ea\u6709\u8fd9\u4e2a\u662f\u53d8\u91cf)\uff0c\u7136\u540e\u5c06\u53c2\u6570\u76f8\u52a0\uff0c\u5bf9\u8fd9\u4e2a\u548c\u6c42\u4e24\u6b21sha256\uff0c\u5219\u6c42\u5f97\u4e00\u4e2a\u54c8\u5e0c\u503c\u3002</li> <li>\u5982\u679c\u81ea\u5df1\u904d\u5386\u968f\u673a\u6570\uff0c\u6c42\u54c8\u5e0c\u503c\uff0c\u6c42\u5f97\u7684\u7ed3\u679c&lt;\u76ee\u6807\u54c8\u5e0c\u503c\uff0c\u5219\u6210\u529f</li> <li>\u8fd9\u4e2a\u884d\u751f\u51fa\u5de5\u4f5c\u91cf\u8bc1\u660e\u673a\u5236\uff1a\u8bc1\u660e\u53ea\u7528\u8ba1\u7b971\u6b21\uff0c\u4f46\u662f\u6253\u5305\u7684\u65f6\u5019\u9700\u8981\u8ba1\u7b97 \\(2 ^ {32}\\) \u6b21</li> </ol> </li> <li>\u5b8c\u6574\u6253\u5305\u8fc7\u7a0b\uff1a<ol> <li>\u628a\u672c\u5730\u5185\u5b58\u7684\u4ea4\u6613\u8bb0\u5f55\u5230\u533a\u5757\u4f53\u4e2d</li> <li>\u628a\u4ea4\u6613\u751f\u6210merkle\u6811\uff0c\u628aroot\u6c42hash\uff0c\u5b58\u5728\u533a\u5757\u5934</li> <li>\u628a\u4e0a\u4e00\u4e2a\u533a\u5757\u7684\u533a\u5757\u5934\u6570\u636e\u901a\u8fc7sha256\u751f\u6210hash\u503c\uff0c\u586b\u5165\u7236Hash</li> <li>\u628a\u65f6\u95f4\u6233\u5b58\u50a8\u65f6\u95f4\u6233\u5b57\u6bb5</li> <li>\u611f\u77e5\u96be\u5ea6\u503c\uff0c\u5b58\u5165bits\u5b57\u6bb5</li> <li>\u751f\u6210\u968f\u673a\u6570\uff0c\u901a\u8fc7\u672c\u533a\u5757\u7684\u8fd9\u4e9bhash\u503c\u8fdb\u884c\u904d\u5386\uff0c\u5982\u679c\u54c8\u5e0c\u503c\u5c0f\u4e8ebits\u5b57\u6bb5\u53cd\u538b\u7f29\u51fa\u6765\u7684hash\uff0c\u5219\u89c6\u4e3a\u6210\u529f</li> </ol> </li> <li>\u5de5\u4f5c\u91cf\u8bc1\u660e\u7684\u672c\u8d28\uff1a<ol> <li>1 cpu 1\u7968</li> <li>\u6700\u957f\u94fe\u4e3a\u4e3b</li> </ol> </li> <li>\u9ed8\u514b\u5c14\u6811\u7684\u7ed8\u5236<ol> <li>\u552f\u4e00\u4e00\u4e2a\u7ed8\u56fe\u9898\uff0c\u5fc5\u8003\u3002</li> <li>\u81ea\u5e95\u5411\u4e0a\u8fdb\u884c\u7ed8\u5236</li> </ol> </li> <li>\u9ed8\u514b\u5c14\u6811\u4f5c\u7528\uff1a<ol> <li>\u4ee3\u66ff\u54c8\u5e0c\u5217\u8868\uff0c\u7ec4\u6210\u4e00\u9897\u9ed8\u514b\u5c14\u6811\uff0c\u65b9\u4fbfp2p\u6d4b\u8bd5</li> <li>\u96b6\u5c5e\u8bc1\u660e</li> </ol> </li> <li>\u9ed8\u514b\u5c14\u6811\u8ba1\u7b97\uff1a\u67d0\u4e2a\u6bd4\u7279\u5e0164\u7b14\u4ea4\u6613\uff0c\u91c7\u7528\u9ed8\u514b\u5c14\u6811\u8fdb\u884c\u5b58\u50a8\uff0c\u5219\u8f7b\u8282\u70b9\u8fdb\u884c\u9a8c\u8bc1\u7684\u65f6\u5019\uff0c\u9664\u4e86\u672c\u8eab\u7684\u4ea4\u6613\u54c8\u5e0c\u4e4b\u5916\uff0c\u8fd8\u9700\u8981\u8fd4\u56de\u591a\u5c11\u54c8\u5e0c\u503c\uff1f\u5f53\u7ed3\u679c\u662f32\u6216\u800530\u7b14\u4ea4\u6613\u7684\u65f6\u5019\uff0c\u53c8\u4f1a\u662f\u591a\u5c11\u6761</li> <li>\u6bd4\u7279\u5e01\u5bc6\u7801\u5b66\u7b97\u6cd5\uff1a<ol> <li>\u54c8\u5e0c\u7b97\u6cd5\uff1a<ol> <li>SHA-256</li> <li>RIPEMD-160\uff1a\u7528\u4e8e\u751f\u6210\u6bd4\u7279\u5e01\u5730\u5740</li> </ol> </li> <li>ECDSA \u975e\u5bf9\u79f0\u52a0\u5bc6\u3001\u7b7e\u540d\u7b97\u6cd5</li> <li>\u4e5f\u6709\u5bf9\u79f0\u52a0\u5bc6\u7b97\u6cd5</li> </ol> </li> <li>\u53cc\u82b1\uff1a\u503c\u653b\u51fb\u8005\u51e0\u4e4e\u540c\u65f6\u5c06\u540c\u4e00\u7b14\u94b1\u7528\u4f5c\u4e0d\u540c\u4ea4\u6613\u6216\u8005\u83b7\u5f97\u4e86\u7269\u54c1\u6700\u7ec8\u5374\u6ca1\u638f\u94b1</li> <li>UTXO\u6a21\u578b\u548cAccount\u6a21\u578b<ol> <li>\u8d26\u6237\uff1a\u662f\u533a\u5757\u94fe\u7cfb\u7edf\u4e2d\u7684\u6570\u5b57\u8d27\u5e01\u7684\u6240\u6709\u8005\uff0c\u79f0\u4e3a\u5730\u5740</li> <li>\u8d26\u6237\u4e4b\u95f4\u7684\u8d27\u5e01\u4ea4\u6613\u901a\u8fc7\u4ea4\u6613\u6765\u5b9e\u73b0\u8f6c\u8d26</li> <li>\u6bd4\u7279\u5e01\u662fUTXO\u6a21\u578b\uff0c\u4ee5\u592a\u574a\u662fAccount\u6a21\u578b</li> </ol> </li> <li>\u6bd4\u7279\u5e01\u7684UTXO\u6a21\u578b\uff1a<ol> <li>\u6bd4\u7279\u5e01\u7684\u4ea4\u6613\u5206\u4e3a\u8f93\u5165\u548c\u8f93\u51fa\uff0c\u4ea4\u6613\u7684\u8f93\u5165\u548c\u8f93\u51fa\u90fd\u662f\u5355\u4e00\u7684\u6574\u4f53\uff0c\u4e0d\u53ef\u5212\u5206\u3002</li> <li>\u5b9a\u4e49\uff1a\u672a\u82b1\u8d39\u7684\u4ea4\u6613\u8f93\u51fa</li> </ol> </li> </ol>"},{"location":"TEST/blockchain/#_4","title":"\u7b2c\u516d\u8282 \u5171\u8bc6\u7b97\u6cd5","text":"<ol> <li>\u5171\u8bc6\u7b97\u6cd5<ol> <li>\u5b9a\u4e49\uff1a\u9488\u5bf9\u67d0\u4e00\u4e2a\u63d0\u6848\uff0c\u8fbe\u6210\u4e00\u81f4\u610f\u89c1\u7684\u673a\u5236\uff0c\u5c31\u662f\u5171\u8bc6\u7b97\u6cd5</li> <li>\u7b97\u6cd5\u548c\u673a\u5236\u7684\u533a\u522b\uff1a<ol> <li>\u7b97\u6cd5\uff1a\u987a\u5e8f\u654f\u611f</li> <li>\u673a\u5236\uff1a\u987a\u5e8f\u4e0d\u654f\u611f</li> </ol> </li> <li>\u533a\u5757\u94fe\u5171\u8bc6\u7b97\u6cd5\uff1a\u4f7f\u5f97\u533a\u5757\u94fe\u4e8b\u52a1\u8fbe\u6210\u5206\u5e03\u5f0f\u5171\u8bc6(\u5404\u4e2a\u8282\u70b9\u5bf9\u4ea4\u6613\u7ed3\u679c\u8fbe\u6210\u4e00\u81f4)\u7684\u7b97\u6cd5</li> </ol> </li> <li>\u5206\u5e03\u5f0f\u7cfb\u7edf<ol> <li>\u5b9a\u4e49\uff1a\u4e00\u4e2a\u7ec4\u4ef6\u5728\u4e0d\u540c\u7684\u8054\u7f51\u7684\u8ba1\u7b97\u673a\u4e0a\uff0c\u7ec4\u4ef6\u4e4b\u95f4\u901a\u8fc7\u4f20\u9012\u6d88\u606f\u8fdb\u884c\u901a\u4fe1\u548c\u534f\u8c03\uff0c\u5171\u540c\u5b8c\u6210\u4e00\u4e2a\u4efb\u52a1\u7684\u7cfb\u7edf</li> <li>\u4e0d\u53ef\u9760\u60c5\u51b5\uff1a<ol> <li>\u8282\u70b9\u4e0d\u53ef\u9760</li> <li>\u7f51\u7edc\u4e0d\u53ef\u9760</li> </ol> </li> </ol> </li> <li>\u4e00\u81f4\u6027<ol> <li>\u6ce8\u610f\u70b9\uff1a\u4e00\u81f4\u6027\u4e0d\u7b49\u4e8e\u5171\u8bc6\u7b97\u6cd5</li> <li>\u5206\u5e03\u5f0f\u7cfb\u7edf\u5e94\u8be5\u6ee1\u8db3\u7684\u8981\u6c42\uff1a\u6d3b\u6027\uff0c\u5b89\u5168\u6027\uff0c\u6b63\u786e\u6027</li> <li>\u7c7b\u522b\uff1a<ol> <li>\u5f3a\u4e00\u81f4\u6027</li> <li>\u987a\u5e8f\u4e00\u81f4\u6027</li> <li>\u5f31\u4e00\u81f4\u6027</li> </ol> </li> </ol> </li> <li>\u4e0d\u540c\u94fe\u7684\u5171\u8bc6\u7b97\u6cd5<ol> <li>\u516c\u6709\u94fe<ol> <li>pow</li> <li>pos</li> <li>dpos</li> <li>ripple</li> </ol> </li> <li>\u8054\u76df\u94fe<ol> <li>pbft</li> <li>dbft</li> </ol> </li> <li>\u79c1\u6709\u94fe<ol> <li>paxos</li> <li>raft</li> </ol> </li> </ol> </li> <li>FLP\u5b9a\u7406<ol> <li>\u5728\u4e0d\u80fd\u4f9d\u8d56\u4e8e\u4e00\u4e2a\u5916\u90e8\u7684\u540c\u6b65\u65f6\u949f\u7684\u60c5\u51b5\u4e0b\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u5b8c\u5168\u5f02\u6b65\u7684\u5206\u5e03\u5f0f\u7cfb\u7edf\u800c\u8a00\uff0c\u53ea\u8981\u6709\u4e00\u4e2a\u8282\u70b9\u6545\u969c\uff0c\u5c31\u4f1a\u5bfc\u81f4\u5168\u5c40\u5171\u8bc6\u65e0\u6cd5\u8fbe\u6210</li> <li>\u5b9a\u7406\u5185\u5bb9\uff1a\u5373\u4f7f\u5728\u7f51\u7edc\u901a\u4fe1\u53ef\u9760\u7684\u60c5\u51b5\u4e0b\uff0c\u5206\u5e03\u5f0f\u7cfb\u7edf\u7684\u5171\u8bc6\u95ee\u9898\u6ca1\u6709\u901a\u7528\u7684\u89e3\u6cd5</li> </ol> </li> <li>CAP\u5b9a\u7406<ol> <li>\u5185\u5bb9\uff1a\u4e00\u4e2a\u5206\u5e03\u5f0f\u7cfb\u7edf\uff0c\u4e0d\u53ef\u80fd\u540c\u65f6\u6ee1\u8db3\u4e09\u4e2a\u91cd\u8981\u7684\u5c5e\u6027\uff1a<ol> <li>\u4e00\u81f4\u6027C:\u8fd9\u91cc\u6307\u5f3a\u4e00\u81f4\u6027</li> <li>\u53ef\u7528\u6027A\uff1a\u7528\u6237\u7684\u57fa\u672c\u8bf7\u6c42\u53ef\u4ee5\u88ab\u6ee1\u8db3</li> <li>\u5206\u533a\u5bb9\u9519\u6027P\uff1a\u7cfb\u7edf\u7684\u5206\u533a\u6545\u969c\u5bfc\u81f4\u5ef6\u8fdf\u7b49\u60c5\u51b5\u4e0b\uff0c\u7cfb\u7edf\u4ecd\u7136\u53ef\u4ee5\u5de5\u4f5c</li> </ol> </li> <li>\u4e0d\u540c\u7684\u7ec4\u5408<ol> <li>CA\uff1a\u51e0\u4e4e\u4e0d\u5b58\u5728\uff0c\u56e0\u4e3a\u5728\u5206\u5e03\u5f0f\u7cfb\u7edf\u4e2d\u5fc5\u987b\u8981\u6ee1\u8db3P</li> <li>CP:   \u5206\u5e03\u5f0f\u6570\u636e\u5e93\uff0c\u5728\u6781\u7aef\u60c5\u51b5\u4e0b\u9700\u8981\u4fdd\u8bc1\u4e00\u81f4\u6027</li> <li>AP\uff1a12306\uff0c\u6dd8\u5b9d\uff0c\u6781\u7aef\u60c5\u51b5\u4e0b\u9700\u8981\u4fdd\u8bc1\u670d\u52a1\u53ef\u7528</li> </ol> </li> <li>POW \u662fAP\u6a21\u5f0f\uff0c\u727a\u7272\u4e86\u5f3a\u4e00\u81f4\u6027\u3002\u662f\u4e00\u79cd\u6982\u7387\u6027\u7684\u62dc\u5360\u5ead\u534f\u8bae</li> <li>\u6bd4\u7279\u5e01\u662fAP\u6a21\u5f0f\uff0c\u56e0\u6b64\u4ed6\u7684\u5171\u8bc6\u95ee\u9898\u662f\u4e2a\u6700\u7ec8\u4e00\u81f4\u6027\u7684\u95ee\u9898\u3002\u540c\u65f6\u4e2d\u672c\u806a\u8fdb\u884c\u4e86\u4f18\u5316\uff0c\u79f0\u4e3a\u975e\u786e\u5b9a\u6027\u7684\u6982\u7387\u4e00\u81f4\u6027\u7684\u95ee\u9898</li> <li>\u516c\u6709\u94fe\u53ef\u4ee5\u6700\u7ec8\u4e00\u81f4\u6027\uff0c\u800c\u4e00\u822c\u79c1\u6709\u94fe\u548c\u8054\u76df\u94fe\u90fd\u662f\u5f3a\u4e00\u81f4\u6027\u7b97\u6cd5</li> </ol> </li> <li>\u62dc\u5360\u5ead\u5c06\u519b\u95ee\u9898<ol> <li>\u80cc\u666f\uff1a\u5c06\u519b\u4f5c\u6218\u65f6\u7684\u4fe1\u4f7f\uff0c\u751a\u81f3\u5c06\u519b\u90fd\u53ef\u80fd\u53db\u53d8\uff0c\u95ee\u5c06\u519b\u4ec0\u4e48\u60c5\u51b5\u4e0b\u80fd\u4fdd\u8bc1\u5bf9\u4f5c\u6218\u65b9\u6848\u8fbe\u6210\u5171\u8bc6</li> <li>\u7ed3\u8bba\uff1a\u5982\u679c\u53db\u53d8\u6570\\(F &lt; 1/3N\\)\uff0c\u5219\u624d\u6709\u4fdd\u8bc1\u3002\u5426\u5219\u65e0\u89e3\u3002\u4e09\u4e2a\u4eba\u4e2d\u6709\u4e00\u4e2a\u90fd\u4e0d\u884c</li> <li> <p>\u53d1\u5c55\uff1a</p> <ol> <li>BFT\uff1a\\(O(n^F)\\)</li> <li> <p>PBFT \\(O(N^2)\\)\uff0c</p> <ol> <li>\u5b9a\u4e49\uff1a\u5b9e\u7528\u62dc\u5360\u5ead\u5bb9\u9519\u7b97\u6cd5\uff0c\u662fpaxos\u7b97\u6cd5\u7684\u53d8\u79cd\u3002\u672c\u8d28\uff1a\u7ed9\u5168\u7f51\u6d88\u606f\u7684\u987a\u5e8f\u8fdb\u884c\u5171\u8bc6</li> <li>\u8fc7\u7a0b\uff1arequest\uff0cpre-prepare\uff0cprepare\uff0ccommit\uff0cresponse</li> <li>\u7f3a\u70b9\uff1a<ol> <li>\u8282\u70b9\u4e0a\u9650\uff1a100\u4e2a</li> <li>\u4e0d\u80fd\u9632\u6b62\u5973\u5deb\u653b\u51fb\uff1a\u4e00\u4e2a\u4eba\u6076\u610f\u4f2a\u9020\u591a\u4e2a\u7528\u6237\u8fdb\u884c\u5171\u8bc6\u8fc7\u7a0b</li> </ol> </li> <li>\u62dc\u5360\u5ead\u5bb9\u9519\u7b97\u6cd5\u5206\u7c7b\uff1a</li> </ol> </li> <li> <p>\u786e\u5b9a\u6027\u7b97\u6cd5\uff1a\u4e00\u65e6\u5bf9\u67d0\u4e2a\u7ed3\u679c\u8fbe\u6210\u5171\u8bc6\uff0c\u5c31\u4e0d\u80fd\u66f4\u6539</p> </li> <li>\u6982\u7387\u6027\u7b97\u6cd5\uff1a\u5171\u8bc6\u7ed3\u679c\u6682\u65f6\u4e0d\u7a33\u5b9a\uff0c\u968f\u7740\u65f6\u95f4\u63a8\u79fb\u88ab\u63a8\u7ffb\u7684\u53ef\u80fd\u6027\u8d8a\u6765\u8d8a\u5c0f\uff0c\u6700\u540e\u79f0\u4e3a\u786e\u5b9a\u6027\u5171\u8bc6</li> <li>POW<ol> <li>\u5b9a\u4e49\uff1a\u6743\u76ca\u8bc1\u660e\u673a\u5236\uff0c\u4e5f\u79f0\u4e3a\u80a1\u4efd\u8bc1\u660e\u673a\u5236</li> <li>\u5b89\u5168\u6027\uff1a\u6765\u6e90\u4e8e\u62b5\u62bc\u7684\u7ecf\u6d4e\u4ef7\u503c</li> <li>\u5b9e\u73b0\u624b\u6bb5\uff1a\u5e01\u9f84 = \u6301\u6709\u6570\u91cf + \u6301\u6709\u65f6\u95f4</li> <li>\u53c2\u4e0e\u89d2\u8272\uff1a\u9a8c\u8bc1\u8005</li> <li>\u4f18\u70b9\uff1a\u4eba\u4eba\u53ef\u6316\u77ff\uff0c\u8282\u80fd\u73af\u4fdd\uff0c\u6027\u80fd\u9ad8\uff0c\u7f51\u7edc\u66f4\u5b89\u5168</li> </ol> </li> <li>\u4e0d\u53ef\u80fd\u4e09\u89d2(\u4e0d\u662f\u5b9a\u7406)\uff1a<ol> <li>\u53bb\u4e2d\u5fc3\u5316\uff0c\u5b89\u5168\uff0c\u6548\u7387\uff1a\u4e0d\u53ef\u80fd\u540c\u65f6\u90fd\u6ee1\u8db3</li> </ol> </li> <li>\u6bd4\u7279\u5e01\u8282\u70b9\u529f\u80fd\uff1a<ol> <li>\u94b1\u5305\u529f\u80fd</li> <li>\u5b8c\u6574\u533a\u5757\u94fe</li> <li>\u6316\u77ff\u529f\u80fd</li> <li>\u8def\u7531\u529f\u80fd(\u552f\u4e00\u5fc5\u987b)</li> </ol> </li> <li>\u6bd4\u7279\u5e01\u8282\u70b9\u5206\u7c7b<ol> <li>\u666e\u901a\u5168\u8282\u70b9\uff1a\u5b8c\u6574\u4e14\u6700\u65b0\u7684\u8282\u70b9\u6570\u636e</li> <li>bitcoin core\u5168\u8282\u70b9\uff1a\u529f\u80fd\u6700\u4e3a\u5168\u9762\u7684\u8282\u70b9</li> <li>SPV\u94b1\u5305\u8282\u70b9\uff1a\u8f7b\u8282\u70b9\uff0c\u53ea\u7528\u652f\u4ed8\u9a8c\u8bc1\uff0c\u6ce8\u610f\u4e0d\u662f\u4ea4\u6613\u9a8c\u8bc1\uff0c\u5e76\u4e14\u53ea\u7528\u4e0b\u8f7d\u533a\u5757\u5934</li> <li>\u72ec\u7acb\u6316\u77ff\u8282\u70b9</li> </ol> </li> <li>\u6bd4\u7279\u5e01\u8f7b\u8282\u70b9\u4e00\u5e74\u65b0\u589e\u7684\u6570\u636e\u91cf\uff1f<ol> <li>\u5047\u8bbe\u533a\u5757\u593480\u5b57\u8282</li> <li>10\u5206\u949f\u4e00\u5757</li> <li>\u4e00\u5e74\u65b0\u589e\u7684\u6570\u636e\u91cf\uff1a\\(80 * 6 * 24 *365 = 4MB\\)</li> </ol> </li> </ol> </li> </ol> </li> </ol>"},{"location":"TEST/blockchain/#_5","title":"\u7b2c\u4e03\u8282 \u533a\u5757\u94fe\u5e94\u7528","text":"<ol> <li>\u5e94\u7528\u7684\u573a\u666f<ol> <li>\u91d1\u878d\uff1a\u4ea4\u6613\uff0c\u652f\u4ed8</li> <li>\u516c\u76ca\uff1a\u516c\u76ca\u6350\u8d60</li> <li>\u6587\u5a31\uff1a\u6570\u5b57\u7248\u6743</li> <li>\u7269\u8054\u7f51\uff1a\u7269\u54c1\u6eaf\u6e90\uff0c\u9632\u4f2a</li> </ol> </li> </ol>"},{"location":"TEST/javaweb/","title":"javaweb","text":""},{"location":"TEST/javaweb/#_1","title":"\u8003\u8bd5\u8303\u56f4","text":"<p>1-6\u7ae0\uff0c10\u7ae0</p>"},{"location":"TEST/javaweb/#1","title":"\u7b2c1\u7ae0 \u7f51\u9875\u5f00\u53d1\u57fa\u7840","text":""},{"location":"TEST/javaweb/#html","title":"HTML","text":"<p>\u4f8b\u5b50\uff1a</p> ApacheConf<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n&lt;head&gt;\n    &lt;meta charset=\"UTF-8\"&gt;\n    &lt;title&gt;here for title&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <ol> <li>\u5b9a\u4e49\uff1a\u8d85\u6587\u672c\u6807\u8bb0\u8bed\u8a00</li> <li>\u540e\u7f00\u540d: html\u6216\u8005htm</li> <li>\u5143\u7d20\uff1a</li> <li>doctype: \u4e00\u6761\u6307\u4ee4\uff0c\u7528\u4e8e\u5411\u6d4f\u89c8\u5668\u8bf4\u660ehtml\u6587\u4ef6\u4f7f\u7528\u54ea\u79cdHTML\u89c4\u8303</li> <li>html\u6807\u7b7e: \u6839\u6807\u7b7e</li> <li>head\u6807\u7b7e: \u5934\u90e8\u6807\u7b7e</li> <li>body\u6807\u7b7e\uff1a\u4e3b\u4f53\u6807\u7b7e</li> <li>\u6807\u7b7e\u7c7b\u578b</li> <li>\u5355\u6807\u7b7e\uff1a&lt;\u6807\u7b7e\u540d /&gt;\u3002 \u4e0d\u9700\u8981\u9009\u62e9\u7684\u65f6\u5019\u5c31\u76f4\u63a5\u4f7f\u7528\u5355\u6807\u7b7e\u8fdb\u884c\u63cf\u8ff0</li> <li>\u53cc\u6807\u7b7e\uff1a &lt;\u6807\u7b7e\u540d&gt; &lt;/ \u6807\u7b7e\u540d&gt;</li> <li>\u6ce8\u91ca\u6807\u7b7e </li> <li>\u5e38\u89c1\u7684HTML\u6807\u7b7e</li> <li>\u6bb5\u843d\uff0c\u884c\u5185\uff0c\u6362\u884c\u6807\u7b7e</li> <li>\u6587\u672c\u6837\u5f0f\u6807\u7b7e</li> <li>\u8868\u683c\u6807\u7b7e</li> <li> <p>\u8868\u5355\u6807\u7b7e\uff1a\u7f51\u9875\u4e0a\u5141\u8bb8\u8f93\u5165\u4fe1\u606f\u7684\u533a\u57df</p> <ol> <li>\u8868\u5355\u57df\uff1aaction=url, method=post/get,name=\"xxx\"</li> <li>\u8868\u5355:<ol> <li>\u4f7f\u7528input\u5355\u6807\u7b7e</li> <li>\u6587\u672c\uff1atext; \u5355\u9009ratio; \u591a\u9009\uff1acheckbox; \u6587\u4ef6\u4e0a\u4f20\uff1afile; \u63d0\u4ea4: submit\uff1b\u91cd\u7f6e\uff1a reset</li> </ol> </li> <li>\u591a\u6587\u672c\u6807\u7b7e\uff1atextarea cols= rows=</li> <li> <p>\u5217\u8868\u6807\u7b7e\uff1a</p> </li> <li> <p>\u65e0\u5e8f\u5217\u8868\uff1aul + li</p> </li> <li>\u6709\u5e8f\u5217\u8868\uff1aol + li</li> <li>\u8d85\u94fe\u63a5\u6807\u7b7e</li> <li>\u56fe\u50cf\u6807\u7b7e</li> </ol> </li> </ol>"},{"location":"TEST/javaweb/#css","title":"CSS","text":"<ol> <li>\u5b9a\u4e49\uff1a\u5c42\u53e0\u6837\u5f0f\u8868</li> <li>\u5f15\u7528\u65b9\u5f0f\uff1a</li> <li>\u884c\u5185\u5f0f(\u5185\u8054\u5f0f)\uff1a\u6807\u7b7e + style</li> <li>\u5185\u5d4c\u5f0f\uff1a\u5c06css\u4ee3\u7801\u96c6\u4e2d\u5199\u5728head\u90e8\u5206\uff0c\u5e76\u7528style\u6807\u7b7e\u5b9a\u4e49</li> <li>\u5916\u94fe\u5f0f\uff1a\u5e38\u7528\uff0c\u5c06css\u6587\u4ef6\u7684\u94fe\u63a5\u6807\u7b7e(link)\u5199\u5728head\u6807\u7b7e\u4e2d\u3002\u9700\u8981\u5b9a\u4e49\uff1ahref\uff0ctype\uff0crelation</li> <li>\u5bfc\u5165\u5f0f\uff1a\u4e86\u89e3\u5373\u53ef</li> <li>\u9009\u62e9\u5668\u548c\u5e38\u7528\u5c5e\u6027</li> <li>\u7c7b\u578b\uff1a\u8303\u56f4\u4ece\u5927\u5230\u5c0f<ol> <li>\u901a\u914d\u7b26\u9009\u62e9\u5668\uff1a\u80fd\u5339\u914d\u6240\u6709\u5143\u7d20</li> <li>\u6807\u7b7e\u9009\u62e9\u5668\uff1a\u901a\u8fc7\u6807\u7b7e\u540d\u79f0\u6765\u9009\u62e9</li> <li>\u7c7b\u9009\u62e9\u5668\uff1a\u901a\u8fc7\u6807\u7b7e\u7684class\u5c5e\u6027\u9009\u62e9\uff0c\u53ef\u4ee5\u4e0d\u552f\u4e00</li> <li>id\u9009\u62e9\u5668\uff1a\u552f\u4e00\u6807\u8bc6\u67d0\u4e2a\u6807\u7b7e</li> </ol> </li> </ol>"},{"location":"TEST/javaweb/#js","title":"JS","text":"<ol> <li>\u5b9a\u4e49\uff1a\u4e00\u79cd\u811a\u672c\u8bed\u8a00\uff0c\u4e0d\u9700\u8981\u8fdb\u884c\u7f16\u8bd1\uff0c\u76f4\u63a5\u5d4c\u5165HTML\u9875\u9762\u4e2d\uff0c\u628a\u9759\u6001\u7684\u9875\u9762\u8f6c\u6362\u4e3a\u548c\u7528\u6237\u4ea4\u4e92\u7684\u52a8\u6001\u6548\u679c\u9875\u9762</li> <li>\u7ec4\u6210</li> <li>ES\uff1a\u8bed\u6cd5\u6807\u51c6</li> <li>DOM\uff1a\u6587\u6863\u5bf9\u8c61\u6a21\u578b\uff0c\u53ef\u5bf9\u9875\u9762\u7684\u5404\u79cd\u5143\u7d20\u4ea4\u4e92</li> <li>BOM\uff1a\u6d4f\u89c8\u5668\u5bf9\u8c61\u6a21\u578b\uff0c\u53ef\u4ee5\u901a\u8fc7BOM\u5bf9\u6d4f\u89c8\u5668\u8fdb\u884c\u4ea4\u4e92</li> <li>\u5f15\u5165\u65b9\u5f0f</li> <li>\u884c\u5185\u5f0f\uff1a\u6bd4\u5982\u5728input\u63a7\u4ef6\u4e2d\u5f15\u5165</li> <li>\u5185\u5d4c\u5f0f\uff1a\u901a\u8fc7script\u6807\u7b7e</li> <li>\u5916\u94fe\u5f0f\uff1a\u540c\u6837\u901a\u8fc7script\u6807\u7b7e + src \u6807\u7b7e\u90e8\u5206\u5f15\u5165JS\u6587\u4ef6</li> <li>\u6570\u636e\u7c7b\u578b</li> <li>Number</li> <li>String</li> <li>Boolean</li> <li>Object</li> <li>Null</li> <li>Undefined\uff1a\u6307\u53d8\u91cf\u88ab\u521b\u5efa\uff0c\u4f46\u662f\u6ca1\u6709\u88ab\u8d4b\u503c\u7684\u65f6\u5019\u6240\u62e5\u6709\u7684\u503c</li> <li>\u53d8\u91cf\uff1a\u7528var\u58f0\u660e</li> <li>DOM</li> <li>\u4f8b\u5982\u4e00\u4e2aHTML\u6587\u4ef6\u53ef\u4ee5\u505a\u51fa\u4e00\u4e2aDOM\u6811(P22)</li> <li>head\u548cbody\u662f\u4e24\u4e2a\u5206\u652f</li> <li>BOM</li> <li>\u7ec4\u6210<ol> <li>Document</li> <li>Location</li> <li>Navigator</li> <li>Screen</li> <li>History</li> </ol> </li> <li>\u6838\u5fc3\u662fWindow\uff0c\u5176\u4ed6\u662fWindow\u7684\u5b50\u5bf9\u8c61</li> </ol>"},{"location":"TEST/javaweb/#java-web","title":"\u7b2c\u4e8c\u7ae0 JAVA WEB\u6982\u8ff0","text":""},{"location":"TEST/javaweb/#xml","title":"XML","text":"<ol> <li>\u5b9a\u4e49\uff1a\u53ef\u6269\u5c55\u6807\u8bb0\u8bed\u8a00</li> <li>\u4e0eHTML\u533a\u522b</li> <li>HTML\u7528\u4e8e\u663e\u793a\u6570\u636e\uff0cXML\u7528\u4e8e\u4f20\u8f93\u6570\u636e</li> <li>HTML\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff0cXML\u533a\u5206\u5927\u5c0f\u5199</li> <li>XML\u4e0d\u4f1a\u8fc7\u6ee4\u7a7a\u683c</li> <li>XML\u53ef\u4ee5\u6269\u5c55\u6807\u7b7e</li> <li>\u8bed\u6cd5</li> <li>\u6587\u6863\u58f0\u660e\uff1aversion,encoding,standlone,\u5176\u4e2dversion\u662f\u5f3a\u5236\u6027\u58f0\u660e\u3002standlone\u9ed8\u8ba4\u503c\u662fno</li> <li>\u5143\u7d20\u5b9a\u4e49\uff1a\u4f7f\u7528\u6807\u7b7e\u5b9a\u4e49\uff0c\u6811\u5f62\u7ed3\u6784\u3002\u53ea\u6709\u4e00\u4e2a\u9876\u5c42\u5143\u7d20\uff0c\u4e3a\u6839\u5143\u7d20\u6216\u8005\u6587\u6863\u5143\u7d20</li> <li>\u5c5e\u6027\u5b9a\u4e49\uff1a\u540c\u6837\u4f7f\u7528\u6807\u7b7e\u5b9a\u4e49</li> <li>\u6ce8\u91ca</li> <li>DTD\u7ea6\u675f</li> <li>\u5b9a\u4e49\uff1a\u5bf9XML\u8bed\u6cd5\u8fdb\u884c\u7ea6\u675f</li> <li>\u5185\u5bb9\uff1a\u53ef\u4ee5\u5305\u542b\u5143\u7d20\u7684\u5b9a\u4e49\uff0c\u5143\u7d20\u4e4b\u95f4\u7684\u5173\u7cfb\uff0c\u5143\u7d20\u5c5e\u6027\u7684\u5b9a\u4e49\uff0c\u4ee5\u53ca\u5b9e\u4f53\u7b26\u53f7\u4e4b\u95f4\u7684\u5173\u7cfb</li> <li>\u5f15\u5165DTD\u7ea6\u675f\uff1a<ol> <li>SYSTEM</li> <li>PUBLIC \u516c\u53f8 + \u7248\u672c + \u8bed\u8a00</li> </ol> </li> <li>\u8bed\u6cd5<ol> <li> </li> <li>\u5b50\u5143\u7d20</li> <li>\u6df7\u5408\u5185\u5bb9\uff1a\u5305\u542b\u5b50\u5143\u7d20\uff0c\u4e5f\u5305\u542b\u5b57\u7b26\u4e32</li> <li>EMPTY\uff1a\u7a7a\u5143\u7d20</li> <li>ANY</li> </ol> </li> <li>\u5c5e\u6027\u5b9a\u4e49<ol> <li>\u8fd9\u91cc\u662f\u4e3a\u5143\u7d20\u5b9a\u4e49\u5c5e\u6027</li> <li>\u8bbe\u7f6e\u8bf4\u660e<ol> <li>REQUIRED:\u5fc5\u987b\u7684</li> <li>IMPLIED:\u53ef\u4ee5\u5305\u542b\u53ef\u4ee51\u4e0d\u5305\u542b</li> <li>FIXED\uff1a\u56fa\u5b9a\u7684\u9ed8\u8ba4\u503c</li> <li>\u9ed8\u8ba4\u503c</li> </ol> </li> <li>\u5c5e\u6027\u7c7b\u578b<ol> <li>CDATA\uff1a\u548c#PCDATA\u4e00\u6837\uff0c\u90fd\u662f\u6587\u672c\u5b57\u7b26\u4e32</li> <li>Enumbered:\u679a\u4e3e\u7c7b\u578b</li> <li>ID\uff1a\u552f\u4e00\u6807\u8bc6\u67d0\u4e2a\u5143\u7d20</li> <li>IDREF \u548cIDREFS\uff1a\u5143\u7d20 + \u8054\u7cfb</li> </ol> </li> </ol> </li> <li>schema\u7ea6\u675f<ol> <li>\u540e\u7f00\uff1axsd\u7ea6\u675f</li> <li>\u540d\u79f0\u7a7a\u95f4\uff1a\u5143\u7d20\u540d xmlns\uff1aprefixname=\"URL\"</li> <li>\u4f5c\u7528\uff1a\u5c06\u67d0\u4e00\u4e2a\u524d\u7f00\u7ed1\u5b9a\u5230\u67d0\u4e2aURL\u4e0a\uff0c\u7136\u540e\u5c06\u8be5\u524d\u7f00\u6dfb\u52a0\u5230\u5143\u7d20\u540d\u79f0\u524d\u9762\uff0c\u8bf4\u660e\u8be5\u5143\u7d20\u5c5e\u4e8e\u54ea\u4e2a\u6a21\u5f0f\u6587\u6863</li> </ol> </li> </ol>"},{"location":"TEST/javaweb/#pcdata","title":"PCDATA\uff1a\u8868\u793a\u5143\u7d20\u4f7f\u666e\u901a\u6587\u672c\u5b57\u7b26\u4e32","text":""},{"location":"TEST/javaweb/#_2","title":"\u7a0b\u5e8f\u5f00\u53d1\u4f53\u7cfb\u7ed3\u6784","text":"<ol> <li>\u4f53\u7cfb\u7ed3\u6784</li> <li>C/S\u6a21\u5f0f\uff1a\u76f4\u63a5\u5ba2\u6237\u7aef\u5230\u6570\u636e\u5e93</li> <li>B/S\u6a21\u5f0f\uff1a\u6d4f\u89c8\u5668 +WEB\u6d4f\u89c8\u5668 + \u6570\u636e\u5e93\u670d\u52a1\u5668\u3002\u5168\u9762\u53d6\u4ee3\u4e86C/S\u6a21\u5f0f</li> <li>Tomcat</li> <li>\u5b89\u88c5\uff1a\u5728\u53e6\u4e00\u4e2aidea\u4e2d\u8fdb\u884c\u7684\u521b\u5efa</li> </ol>"},{"location":"TEST/javaweb/#http","title":"\u7b2c\u4e09\u7ae0 HTTP\u534f\u8bae","text":""},{"location":"TEST/javaweb/#_3","title":"\u5185\u5bb9","text":"<ol> <li>\u5b9a\u4e49\uff1a\u8d85\u6587\u672c\u4f20\u8f93\u534f\u8bae</li> <li>\u7279\u70b9</li> <li>\u652f\u6301C/S\u6a21\u5f0f</li> <li>\u7b80\u5355\u5feb\u901f</li> <li>\u7075\u6d3b</li> <li>\u65e0\u72b6\u6001</li> <li>HTTP1.1\u5bf9HTTP1.0\u7684\u6539\u8fdb\uff1aHTTP1.1\u7684\u652f\u6301\u6301\u4e45\u8fde\u63a5\uff0c\u51cf\u5c11\u4e86\u5efa\u7acb\u548c\u5173\u95ed\u8fde\u63a5\u7684\u8017\u65f6</li> <li>\u8bf7\u6c42\u6d88\u606f</li> <li>\u8bf7\u6c42\u884c<ol> <li>\u683c\u5f0f\uff1aGET /index.html HTTP1.1</li> <li>\u8bf7\u6c42\u65b9\u5f0f \u8d44\u6e90\u8def\u5f84 \u4f7f\u7528\u7684HTTP\u7248\u672c</li> <li>\u53ea\u6709\u4e00\u79cd\u4f7f\u7528post\uff0c\u5c31\u662f\u63d0\u4ea4\u8868\u5355\u7684\u65f6\u5019\uff0c\u5176\u4f59\u90fd\u4f7f\u7528get\uff08\u6bd4\u5982\u8d85\u94fe\u63a5\uff09</li> </ol> </li> <li>\u8bf7\u6c42\u5934<ol> <li>k-v\u5bf9\u5f62\u5f0f</li> <li>\u5e38\u89c1\u8bf7\u6c42\u5934<ol> <li>Accept</li> <li>Accpet-Encoding\uff1a\u662f\u538b\u7f29\u65b9\u5f0f\u3002\u7528\u4e8e\u6307\u5b9a\u5ba2\u6237\u7aef\u80fd\u591f\u89e3\u7801\u7684\u6570\u636e\u7f16\u7801\u65b9\u5f0f .\u6709gzip\u548ccompress\u65b9\u5f0f</li> <li>HOST\uff1a\u7528\u4e8e\u6307\u5b9a\u8d44\u6e90\u6240\u5728\u7684\u8def\u5f84\u548c\u7aef\u53e3\u53f7</li> <li>If-Modifed-Since\uff1a\u4e0e\u672c\u5730\u7f13\u5b58\u6709\u5173\uff0c\u5982\u679c\u6ca1\u6709\u7f13\u5b58\u5219\u8fd4\u56de304\u72b6\u6001\u7801</li> <li>Referer\uff1a\u6d4f\u89c8\u5668\u5bf9\u670d\u52a1\u5668\u53d1\u8d77\u8bf7\u6c42\uff0c\u5bf9\u4e8e\u5355\u673a\u8d85\u94fe\u63a5\u7684\u60c5\u51b5\u4f1a\u6709Referer\uff0c\u53ef\u4ee5\u7528\u4e8e\u533a\u522b\u4e0d\u540c\u8bbf\u95ee\u65b9\u5f0f\uff0c\u5236\u4f5c\u9632\u76d7\u94fe\u3002</li> <li>User-Agent\uff1a\u6709Mozilla\u7cfb\u5217</li> </ol> </li> </ol> </li> <li>\u6d88\u606f\u5b9e\u4f53</li> <li>\u76f8\u5e94\u6d88\u606f</li> <li>\u54cd\u5e94\u884c<ol> <li>\u683c\u5f0f\uff1aHTTP1.1 200 OK</li> <li>\u7248\u672c\u53f7 \u72b6\u6001\u7801 \u63cf\u8ff0</li> <li>\u5e38\u89c1\u72b6\u6001\u7801<ol> <li>1xx\uff1a\u8bf7\u6c42\u5df2\u7ecf\u63a5\u53d7\uff0c\u53ef\u7ee7\u7eed\u5904\u7406</li> <li>2xx: \u8bf7\u6c42\u5df2\u88ab\u670d\u52a1\u5668\u6210\u529f\u63a5\u6536\uff0c\u7406\u89e3</li> <li>3xx: \u4e3a\u5b8c\u6210\u8bf7\u6c42\uff0c\u5ba2\u6237\u7aef\u9700\u8981\u8fdb\u4e00\u6b65\u7ec6\u5316\u8bf7\u6c42\u3002\u6bd4\u5982302\uff0c\u8bf7\u6c42\u91cd\u5b9a\u5411</li> <li>4xx: \u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\u6709\u9519\u8bef\uff0c\u6bd4\u5982404\uff0c\u670d\u52a1\u5668\u627e\u4e0d\u5230\u8d44\u6e90</li> <li>5xx\uff1a\u670d\u52a1\u5668\u51fa\u73b0\u9519\u8bef\uff0c\u6bd4500\uff0c\u670d\u52a1\u5668\u53d1\u751f\u9519\u8bef</li> </ol> </li> </ol> </li> <li>\u54cd\u5e94\u5934\uff1a<ol> <li>k-v\u683c\u5f0f</li> <li>\u5e38\u89c1\u76f8\u5e94\u5934<ol> <li>Location\uff1a\u901a\u77e5\u5ba2\u6237\u7aef\u8bf7\u6c42\u6587\u6863\u7684\u65b0\u5730\u5740\uff0c\u591a\u914d\u54083xx\u72b6\u6001\u7801\u4f7f\u7528\u3002\u4e0d\u80fd\u540c\u65f6\u51fa\u73b0Location\u548cContent-Type\u4e24\u4e2a\u5b57\u6bb5</li> <li>Server\uff1a\u6307\u5b9a\u670d\u52a1\u5668\u8f6f\u4ef6\u4ea7\u54c1</li> <li>Refresh\uff1a\u9875\u9762\u5237\u65b0\uff0c\u53ef\u4ee5\u5237\u65b0\u5230\u65b0\u7684\u5730\u5740\uff1a refresh ; 3 ; url=</li> <li>Content-Disposition: \u6ca1\u6709\u5728HTTP\u7684\u6807\u51c6\u89c4\u8303\u4e2d\u5b9a\u4e49\uff0c\u8ba9\u7528\u6237\u9009\u62e9\u628a\u54cd\u5e94\u5b9e\u4f53\u4fdd\u5b58\u5230\u4e00\u4e2a\u6587\u4ef6\u4e2d</li> <li>COntent-Encoding\uff1a\u76f8\u5e94\u6d88\u606f\u7684\u538b\u7f29\u65b9\u5f0f</li> </ol> </li> </ol> </li> <li>\u76f8\u5e94\u6d88\u606f\u4f53</li> </ol>"},{"location":"TEST/javaweb/#servlet","title":"\u7b2c\u56db\u7ae0 Servlet","text":"<p>\u89c1\u4ee3\u7801</p>"},{"location":"TEST/javaweb/#_4","title":"\u7b2c\u4e94\u7ae0 \u4f1a\u8bdd\u4e0e\u4f1a\u8bdd\u6280\u672f","text":"<ol> <li>\u4f1a\u8bdd\u6280\u672f</li> <li>\u5b9a\u4e49\uff1a\u6d4f\u89c8\u5668\u548c\u670d\u52a1\u5668\u8fdb\u884c\u4e00\u7cfb\u5217\u8bf7\u6c42\u548c\u54cd\u5e94\u7684\u8fc7\u7a0b</li> <li>\u7c7b\u522b\uff1aCookie\u548cSession</li> <li>Cookie\u5bf9\u8c61</li> <li>\u53ea\u6709\u5b83\u662f\u7528\u6237new\u7684</li> <li>\u5b9a\u4e49\uff1a\u7c7b\u4f3c\u4f1a\u5458\u5361\uff0c\u5f53\u7528\u6237\u8bbf\u95ee\u670d\u52a1\u5668\u7684\u65f6\u5019\uff0c\u670d\u52a1\u5668\u7ed9\u5ba2\u6237\u53d1\u9001\u7684\u4e00\u4e9b\u4fe1\u606f\uff0c\u90fd\u4fdd\u5b58\u5230Cookie\u4e2d\u3002\u5f53\u6d4f\u89c8\u5668\u518d\u6b21\u4f7f\u7528Cookie\u8bbf\u95ee\u670d\u52a1\u5668\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u4f5c\u51fa\u6b63\u786e\u7684\u76f8\u5e94\u3002\u4e5f\u5c31\u662f\u670d\u52a1\u5668\u7ed9\u6d4f\u89c8\u5668\u6253\u6807\uff0c\u7136\u540e\u6d4f\u89c8\u5668\u8bbf\u95ee\u6bcf\u6b21\u90fd\u9700\u8981\u5e26\u4e0a\u8fd9\u4e2a\u6807\u7b7e</li> <li>\u65b9\u5f0f\uff1a\u670d\u52a1\u5668\u8bbe\u7f6e\uff0c\u6d4f\u89c8\u5668\u4fdd\u5b58</li> <li>\u65b9\u6cd5<ol> <li>\u6784\u9020\u65b9\u6cd5\uff0c\u53ea\u6709\u4e00\u4e2a\uff0c\u540d\u79f0\u4e0d\u80fd\u4fee\u6539\uff0c\u503c\u53ef\u4ee5</li> </ol> </li> <li>Session\u5bf9\u8c61</li> <li>\u5b9a\u4e49\uff1a\u5c06\u6570\u636e\u4fdd\u5b58\u5230\u670d\u52a1\u5668\uff0c\u6bcf\u6b21\u7528\u6237\u767b\u5f55\uff0c\u4f7f\u7528cookie\u5b58\u50a8id\uff0c\u5219\u53ef\u4ee5\u5224\u65ad\u662f\u54ea\u4e2asession\u7684\u8303\u56f4</li> <li>4\u4e2a\u57df\u5bf9\u8c61\u7684\u5927\u5c0f\uff1a\u4ece\u5c0f\u5230\u5927<ol> <li>pageContext(JSP)</li> <li>HttpServletRequest</li> <li>HttpSession</li> <li>ServletContext</li> </ol> </li> <li>\u751f\u547d\u5468\u671f<ol> <li>\u751f\u6548\uff1a\u7b2c\u4e00\u6b21\u8bbf\u95eeJSP\u9875\u9762\u7684\u65f6\u5019\u751f\u6548</li> <li>\u5931\u6548<ol> <li>\u8d85\u65f6\u3002\u5982\u679c\u5728web.xml\u4e2d\u8bbe\u7f6e\u4e3a0\u6216\u8005\u8d1f\u6570\uff0c\u5c31\u4ee3\u8868\u6c38\u4e0d\u8d85\u65f6\uff0c\u9ed8\u8ba430\u5206\u949f</li> <li>invalidate</li> <li>\u5173\u95ed\u6d4f\u89c8\u5668</li> </ol> </li> </ol> </li> <li>\u7f16\u7801</li> <li>\u5b9e\u4f8b\uff1a\u8d2d\u4e66\u793a\u4f8b    \u4e00\u5171\u4f7f\u7528\u4e09\u4e2aServlet\uff0c\u7b2c\u4e00\u4e2alistBookServlet\u7528\u4e8e\u548c\u6570\u636e\u5e93\u4ea4\u4e92\uff0c\u83b7\u53d6\u6570\u636e\uff0c\u5e76\u901a\u8fc7\u70b9\u51fb\u8d85\u94fe\u63a5\u8f6c\u5230\u7b2c\u4e8c\u4e2aPurchaseServlet(    \u7528\u4e8e\u5bf9session\u7684\u5b58\u50a8\u7684k-v\u8fdb\u884c\u66f4\u65b0)\u3002\u6700\u540e\u8f6c\u5230BookServlet\uff0c\u7528\u4e8e\u5bf9\u8d2d\u7269\u8f66\u6570\u636e\u8fdb\u884c\u5c55\u793a\u3002</li> </ol> ApacheConf<pre><code>//\u7b2c1\u4e2a\n@WebServlet(name = \"listBookServlet\", value = \"/listBookServlet\")\npublic class ListBookServlet extends HttpServlet {\n    private static final long serialVersionUID = 1L;\n\n    @Override\n    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n        resp.setContentType(\"text/html;charset=UTF-8\");\n        PrintWriter writer = resp.getWriter();\n        Collection&lt;Book&gt; books = BookDB.getAll();\n        writer.println(\"books are\");\n        books.forEach(book -&gt; {\n            String url = \"purchaseServlet?id=\" + book.getId();\n            writer.write(book.getName() + \"&lt;a href='\" + url\n                    + \"'&gt;get it&lt;/a&gt;&lt;br&gt;\");\n        });\n\n    }\n    @Override\n    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n        doGet(req, resp);\n    }\n}\n\n//\u7b2c2\u4e2a\n@WebServlet(name = \"purchaseServlet\", value = \"/purchaseServlet\")\npublic class PurchaseServlet extends HttpServlet {\n    @Override\n    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n        String id = req.getParameter(\"id\");\n        if(id == null){\n            String url = \"/listBookServlet\";\n            resp.sendRedirect(url);\n            return;\n        }\n        Book book = BookDB.getBook(id);\n        HttpSession session = req.getSession();\n        List&lt;Book&gt; cart = (List&lt;Book&gt;) session.getAttribute(\"cart\");\n        if(cart == null){\n            cart = new ArrayList&lt;&gt;();\n            session.setAttribute(\"cart\", cart);\n        }\n        cart.add(book);\n        Cookie cookie = new Cookie(\"JSESSEIONID\", session.getId());\n        cookie.setMaxAge(60*30);\n        cookie.setPath(\"/\");\n        resp.addCookie(cookie);\n\n        String url = \"bookServlet\";\n        resp.sendRedirect(url);\n    }\n\n    @Override\n    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n        doGet(req, resp);\n    }\n}\n\n//\u7b2c3\u4e2a\n@WebServlet(name = \"bookServlet\", urlPatterns= \"/bookServlet\")\npublic class BookServlet extends HttpServlet {\n    public BookServlet() {\n        super();\n    }\n\n    @Override\n    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n        resp.setContentType(\"text/html;charset=UTF-8\");\n        final PrintWriter writer = resp.getWriter();\n        HttpSession session = req.getSession(false);\n        var flag = true;\n        List&lt;Book&gt; cart = null;\n        if(session == null){\n            flag = false;\n        }else{\n            cart = (List&lt;Book&gt;) session.getAttribute(\"cart\");\n            if(cart == null){\n                flag = false;\n            }\n        }\n\n        if(!flag){\n            writer.println(\"cart is empty\");\n        }else{\n            cart.forEach(book -&gt; {\n                writer.write(book.getName() + \"&lt;br&gt;\");\n            });\n        }\n    }\n\n    @Override\n    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n        doGet(req, resp);\n    }\n}\n</code></pre>"},{"location":"TEST/javaweb/#jsp","title":"\u7b2c\u516d\u7ae0 JSP\u6280\u672f","text":"<ol> <li>JSP    1.\u5b9a\u4e49\uff1a\u662fServlet\u66f4\u9ad8\u7ea7\u522b\u7684\u6269\u5c55\uff0c\u5728JSP\u6587\u4ef6\u4e2d\uff0cHTML\u4ee3\u7801\u548cJava\u4ee3\u7801\u5171\u540c\u5b58\u5728\uff0c\u5176\u4e2dHTML\u4ee3\u7801\u7528\u4e8e\u5b9e\u73b0\u7f51\u9875\u7684\u9759\u6001\u529f\u80fd\uff0c\u800cJava\u4ee3\u7801\u5b9e\u73b0\u52a8\u6001\u5185\u5bb9\u7684\u5c55\u793a\u3002\u6700\u7ec8\uff0cJSP\u6587\u4ef6\u4f1a\u5728Web\u670d\u52a1\u5668\u4e0a\u7684Web\u5bb9\u5668\u4e2d\u7f16\u8bd1\u6210\u4e3aServlet</li> <li>\u7279\u70b9<ol> <li>\u8de8\u5e73\u53f0</li> <li>\u4e1a\u52a1\u4ee3\u7801\u5206\u79bb</li> <li>\u7ec4\u4ef6\u91cd\u7528</li> <li>\u9884\u7f16\u8bd1</li> </ol> </li> <li>\u4f7f\u7528\uff1a\u5728web\u6587\u4ef6\u5939\u4e0b\u548c\u521b\u5efahtml\u4e00\u6837\uff0c\u521b\u5efajsp\u6587\u4ef6\u5e76\u4f7f\u7528</li> <li>JSP\u8fd0\u884c\u539f\u7406</li> <li>\u57fa\u4e8e\u8bf7\u6c42\uff0c\u54cd\u5e94\u6a21\u5f0f</li> <li>\u8fc7\u7a0b<ol> <li>\u9996\u5148\uff0c\u5ba2\u6237\u7aef\u53d1\u9001\u8bf7\u6c42\u6587\u4ef6\uff0c\u8bf7\u6c42\u8bbf\u95eeJSP\u6587\u4ef6</li> <li>JSP\u5c06JSP\u6587\u4ef6\u8f6c\u6362\u4e3aJava\u6e90\u6587\u4ef6(Servlet\u6e90\u7a0b\u5e8f)</li> <li>JSP\u5bb9\u5668\u5c06Java\u6e90\u6587\u4ef6\u7f16\u8bd1\u4e3a\u5b57\u8282\u7801\u6587\u4ef6</li> <li>Servlet\u5bb9\u5668\u5c06\u8be5\u6587\u4ef6\u52a0\u8f7d\uff0c\u521b\u5efaServlet\u5b9e\u4f8b(\u5e38\u9a7b\u5185\u5b58)\uff0c\u5e76\u6267\u884cjspInit\u65b9\u6cd5\u5b8c\u6210\u521d\u59cb\u5316(\u6267\u884c\u4e00\u6b21)</li> <li>JSP\u5bb9\u5668\u6267\u884cjspService\u65b9\u6cd5\u6765\u5904\u7406\u5ba2\u6237\u7aef\u8bf7\u6c42\uff0c\u5bf9\u6bcf\u4e2a\u8bf7\u6c42\uff0c\u521b\u5efa\u4e00\u4e2a\u7ebf\u7a0b\u6765\u5904\u7406\u5b83</li> <li>\u5904\u7406\u5b8c\u6210\uff0c\u54cd\u5e94\u5bf9\u8c61\u7531JSP\u5bb9\u5668\u63a5\u53d7\uff0c\u5c06HTML\u683c\u5f0f\u7684\u9759\u6001\u9875\u9762\u53d1\u9001\u7ed9\u5ba2\u6237\u7aef</li> </ol> </li> <li>JSP\u811a\u672c\u5143\u7d20<ol> <li>\u5b9a\u4e49\uff1a\u6307\u5d4c\u5957\u8fdb\u5165\u7684Java\u4ee3\u7801</li> <li>\u5206\u7c7b<ol> <li>JSP Scriptlets\uff1a&lt;% %&gt;\uff0c\u7528\u4e8e\u4f7f\u7528\u7b80\u5355\u7684\u8bed\u53e5\uff0c\u76f8\u5f53\u4e8e\u65b9\u6cd5\u5185\u5b9a\u4e49\u7684\u5c40\u90e8\u53d8\u91cf</li> <li>\u58f0\u660e\u6807\u8bc6:&lt;%\uff01 %&gt;,\u591a\u4e86\u4e2a\u5192\u53f7\u3002\u7528\u4e8e\u5b9a\u4e49\u6574\u4e2a\u9875\u9762\u9700\u8981\u7684\u4e1c\u897f\uff0c\u6bd4\u5982\u6210\u5458\u53d8\u91cf\uff0c\u65b9\u6cd5\u7b49\u3002\u5728\u5f53\u524d\u754c\u9762\u6709\u6548\u3002\u53ef\u4ee5\u5728head\u90e8\u5206\u58f0\u660e</li> <li>JSP\u8868\u8fbe\u5f0f\uff1a&lt;%= expression %&gt;,\uff0c\u7528\u4e8e\u5411\u9875\u9762\u8f93\u51fa\u4fe1\u606f</li> </ol> </li> </ol> </li> <li>JSP\u6307\u4ee4</li> <li>page\u6307\u4ee4\uff1a&lt;%@ page k1=v1,k2=v2 &gt;</li> <li>include\u6307\u4ee4\uff0c\u7528\u4e8e\u5305\u542b\u53e6\u4e00\u4e2a\u5143\u7d20</li> <li>JSP\u52a8\u4f5c\u5143\u7d20</li> <li>\u5b9a\u4e49\uff1a\u7528\u4e8e\u63a7\u5236JSP\u52a8\u4f5c\u7684\u884c\u4e3a\uff0c\u6267\u884c\u4e00\u4e9bJSP\u4f5c\u7528</li> <li>\u5143\u7d20<ol> <li>\u5305\u542b\u6587\u4ef6\u5143\u7d20,jsp:include page=\u53ef\u4ee5\u5f15\u5165\u52a8\u6001\u6587\u4ef6(\u6bd4\u5982\u53ef\u4ee5\u662fjsp)\u6216\u8005\u662f\u9759\u6001\u6587\u4ef6\uff0cflush\u9ed8\u8ba4\u503c\u662ffalse</li> <li>\u8bf7\u6c42\u8f6c\u53d1\u5143\u7d20\uff0cjsp:forward page=</li> </ol> </li> <li>\u4e24\u79cdinclude\u7684\u533a\u522b<ol> <li>include\u6307\u4ee4\u901a\u8fc7file\u5c5e\u6027\u6307\u5b9a\u6587\u4ef6\uff0cfile\u5c5e\u6027\u652f\u6301\u4efb\u4f55\u8868\u8fbe\u5f0f\uff0c\u540e\u8005\u4f7f\u7528page\u6307\u4ee4\uff0c\u652f\u6301\u8868\u8fbe\u5f0f</li> <li>\u4f7f\u7528\u524d\u8005\uff0c\u4f1a\u7f16\u8bd1\u6210\u4e00\u4e2a\u5b57\u8282\u7801\u6587\u4ef6\u3002\u540e\u8005\u4f1a\u5206\u522b\u7f16\u8bd1\u6210\u591a\u4e2a</li> <li>\u524d\u8005\u53d8\u91cf\u4e0d\u80fd\u91cd\u590d\uff0c\u540e\u8005\u53ef\u4ee5</li> </ol> </li> <li>\u9690\u5f0f\u5bf9\u8c61</li> <li>out\uff1a\u5e26\u7f13\u5b58\u7684PrintWriter</li> <li>request/response</li> <li>config</li> <li>session</li> <li>application</li> <li>page</li> <li>pageContext:4\u4e2a\u4f5c\u7528\u8303\u56f4\uff1apage,request,session,application</li> <li>exception:\u53ef\u4ee5\u6307\u5b9a\u9519\u8bef\u5904\u7406\u7684jsp\u4f4d\u7f6e</li> </ol>"},{"location":"TEST/javaweb/#jdbcservletjsp","title":"\u5927\u9898 JDBC+Servlet+JSP","text":""},{"location":"TEST/javaweb/#1connection","title":"1.\u5c01\u88c5Connection\u5de5\u5177\u7c7b","text":"<p>\u8fd9\u91cc\u7701\u7565</p>"},{"location":"TEST/javaweb/#2userbean","title":"2.\u521b\u5efaUserBean","text":"<p>\u5bf9\u5e94\u5b57\u6bb5\u8fdb\u884c\u5c01\u88c5\u7684bean\u5bf9\u8c61</p>"},{"location":"TEST/javaweb/#3loginjsp","title":"3.\u521b\u5efalogin.jsp","text":"ApacheConf<pre><code>&lt;%@ page contentType=\"text/html;charset=UTF-8\" language=\"java\" %&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;login&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;form action=\"LoginServlet\" method=\"post\" name=\"loginForm\"&gt;\n    \u7528\u6237\u540d:&lt;input name=\"username\" type=\"text\" id=\"username\" style=\"width: 200px\"/&gt;&lt;br&gt;&lt;br&gt;\n    \u5bc6\u7801:&lt;input name=\"password\" type=\"password\" id=\"password\" style=\"width: 200px\"/&gt;&lt;br&gt;&lt;br&gt;\n    input:&lt;input type=\"submit\" name=\"submit\" value=\"\u767b\u5f55\"&gt;\n&lt;/form&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"TEST/javaweb/#4-loginservlet","title":"4. \u521b\u5efaLoginServlet","text":"ApacheConf<pre><code>/**\n * ClassName: LoginServlet\n * Package: org.example.userlogin\n * Description:\n *\n * @author lx\n * @version 1.0\n */\n@WebServlet(name = \"LoginServlet\", urlPatterns = \"/LoginServlet\")\npublic class LoginServlet extends HttpServlet {\n\n    @Override\n    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n        req.setCharacterEncoding(\"UTF-8\");\n        resp.setCharacterEncoding(\"UTF-8\");\n        resp.setContentType(\"text/html;charset=utf-8\");\n        PrintWriter out = resp.getWriter();\n        String username = req.getParameter(\"username\");\n        String password = req.getParameter(\"password\");\n        if(userDao.checkuser(username, password)){\n            out.println(\"success\");\n        }else{\n            out.println(\"failure\");\n        }\n    }\n    @Override\n    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n        doGet(req, resp);\n    }\n}\n</code></pre>"},{"location":"TEST/javaweb/#5-daobeanorm","title":"5. DAO\u5c42\u5c01\u88c5\u4ece\u8868\u5230bean\u5bf9\u8c61\u7684\u903b\u8f91(ORM)","text":"ApacheConf<pre><code>/**\n * ClassName: userDao\n * Package: org.example.userlogin.DAO\n * Description:\n *\n * @author lx\n * @version 1.0\n */\npublic class userDao {\n    public static boolean checkuser(String username, String password){\n        Connection conn = getConnection();\n        if(conn==null){\n            return false;\n        }\n        var sql = \"select `passward` from userin.tb_user where username=\" + \"'\" + username + \"'\";\n        try(var statement = conn.createStatement()){\n            ResultSet resultSet = statement.executeQuery(sql);\n            while(resultSet.next()){\n                String pwd = resultSet.getString(\"passward\");\n                if(pwd.equals(password)){\n                    return true;\n                }\n            }\n        }catch(Exception e){\n            e.printStackTrace();\n        }\n        return false;\n    }\n}\n</code></pre>"},{"location":"TEST/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/","title":"\u6570\u5b57\u56fe\u50cf\u5904\u7406","text":""},{"location":"TEST/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/#_2","title":"\u7b2c\u4e00\u7ae0 \u5bfc\u8bba","text":"<ol> <li>\u56fe\u50cf\u5206\u7c7b</li> <li>\u6a21\u62df\u56fe\u50cf\uff1a\u53c8\u79f0\u4e3a\u5149\u5b66\u56fe\u50cf\uff0c\u7a7a\u95f4\u5750\u6807\u548c\u660e\u6697\u7a0b\u5ea6\u662f\u8fde\u7eed\u7684\uff0c\u8ba1\u7b97\u673a\u65e0\u6cd5\u76f4\u63a5\u5904\u7406</li> <li>\u6570\u5b57\u56fe\u50cf\uff1a\u7a7a\u95f4\u5750\u6807\u548c\u7070\u5ea6\u4e0d\u8fde\u7eed\uff0c\u53ef\u4ee5\u4f7f\u7528\u8ba1\u7b97\u673a\u5904\u7406</li> <li>\u6570\u5b57\u56fe\u50cf\u5b9a\u4e49</li> <li>\u56fe\u50cf\u53ef\u4ee5\u5b9a\u4e49\u4e3a\u4e8c\u7ef4\u51fd\u6570\\(f(x,y)\\),\u5176\u4e2dx,y\u662f\u7a7a\u95f4\u5750\u6807\uff0c\u800c\u5728x,y\u5904\u7684\u5e45\u503c\u4e3a\u8be5\u70b9\u7684\u5f3a\u5ea6\u6216\u8005\u7070\u5ea6\u3002\u5982\u679c\u79bb\u6563\uff0c\u5219\u4e3a\u7070\u5ea6\u56fe\u50cf</li> <li>\u56fe\u50cf\u7684\u57fa\u672c\u7ec4\u6210\u662f\u50cf\u7d20\uff0c\u6bcf\u4e2a\u50cf\u7d20\u90fd\u6709\u4f4d\u7f6e\u548c\u5e45\u503c</li> <li>\u6570\u5b57\u56fe\u50cf\u5904\u7406</li> <li>\u5b9a\u4e49\uff1a\u501f\u52a9\u4e8e\u6570\u5b57\u8ba1\u7b97\u673a\u6765\u5904\u7406\u6570\u5b57\u56fe\u50cf</li> <li>\u65b9\u5f0f\uff1a\u56fe\u50cf\u5230\u56fe\u50cf\uff0c\u56fe\u50cf\u5230\u975e\u56fe\u50cf</li> <li>\u7ec4\u6210\uff1a\u56fe\u50cf\u83b7\u53d6\u8bbe\u5907\uff0c\u4e13\u7528\u56fe\u50cf\u5904\u7406\u8bbe\u5907\u6216\u8005\u6709\u76f8\u5e94\u914d\u7f6e\u7684\u8ba1\u7b97\u673a\uff0c\u56fe\u5f62\u8f93\u51fa\u8bbe\u5907</li> <li>\u76ee\u7684<ol> <li>\u63d0\u9ad8\u56fe\u50cf\u7684\u89c6\u611f\u8d28\u91cf</li> <li>\u63d0\u53d6\u56fe\u50cf\u4e2d\u5305\u542b\u7684\u7279\u5f81\u548c\u4fe1\u606f</li> <li>\u56fe\u50cf\u6570\u636e\u7684\u53d8\u5316\uff0c\u7f16\u7801\u548c\u538b\u7f29\uff0c\u4fbf\u4e8e\u5b58\u50a8\u4e8e\u4f20\u8f93</li> </ol> </li> <li>\u610f\u4e49<ol> <li>\u6269\u5927\u4eba\u7684\u89c6\u89c9</li> <li>\u4ee3\u66ff\u4eba\u7684\u89c6\u89c9</li> <li>\u6253\u52a8\u4eba\u7684\u89c6\u89c9</li> </ol> </li> </ol>"},{"location":"TEST/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/#_3","title":"\u7b2c\u4e8c\u7ae0 \u57fa\u7840\u77e5\u8bc6","text":"<p>\u4e3b\u8981\u5206\u4e3a\u56fe\u50cf\u83b7\u53d6\u548c\u56fe\u50cf\u6570\u5b57\u5316\uff0c\u4e3b\u8981\u4e3a\u6570\u5b57\u5316</p> <ol> <li>\u6570\u5b57\u5316</li> <li>\u5b9a\u4e49\uff1a\u6240\u8c13\u56fe\u50cf\u6570\u5b57\u5316\uff0c\u662f\u5c06\u6a21\u62df\u56fe\u50cf\u7ecf\u8fc7\u79bb\u6563\u5316\u4e4b\u540e\uff0c\u5f97\u5230\u7528\u6570\u5b57\u8868\u793a\u7684\u56fe\u50cf\u3002       \u5305\u62ec\u4e86\u7a7a\u95f4\u79bb\u6563\u5316(\u91c7\u6837)\u548c\u660e\u6697\u8868\u793a\u6570\u636e\u7684\u79bb\u6563\u5316(\u91cf\u5316)</li> <li>\u91c7\u6837<ol> <li>\u95f4\u9694\u662f\u5173\u952e\uff0c\u592a\u5c0f\u4e86\u5219\u6570\u636e\u91cf\u592a\u5927\u3002\u592a\u5927\u4e86\u5219\u65e0\u6cd5\u8bc6\u522b\u7ec6\u8282</li> <li>\u539f\u7406\u662f\u5bf9\u8fde\u7eed\u56fe\u50cf\u751f\u6210\u626b\u63cf\u7ebf\uff0c\u5bf9\u6bcf\u4e2a\u7ebf\u8fdb\u884c\u53d6\u6837\u548c\u91cf\u5316</li> <li>\u65b9\u5f0f\uff1a\u6709\u7f1d\uff0c\u65e0\u7f1d\uff0c\u91cd\u53e0</li> </ol> </li> <li>\u6570\u5b57\u5316\u5904\u7406\u89c4\u5219<ol> <li>\u5bf9\u7f13\u6162\u53d8\u5316\u7684\u56fe\u50cf\uff0c\u7ec6\u91cf\u5316\uff0c\u7c97\u91c7\u6837</li> <li>\u7ec6\u8282\u4e30\u5bcc\u7684\u56fe\u50cf\uff0c \u7ec6\u91c7\u6837\uff0c\u7c97\u91cf\u5316</li> </ol> </li> <li>\u6570\u5b57\u56fe\u50cf\u8868\u793a<ol> <li>\u5982\u679c\u539f\u56fe\u50cf\u662ff(s,t) \u8fde\u7eed\u51fd\u6570\uff0c\u5219\u901a\u8fc7\u53d6\u6837\u548c\u91cf\u5316\uff0c\u5f97\u5230\u4e8c\u7ef4\u9635\u5217 f(x,y).</li> <li>\u65b9\u5f0f<ol> <li>\u51fd\u6570\u56fe</li> <li>\u7070\u5ea6\u56fe</li> <li>\u77e9\u9635</li> </ol> </li> <li>\u6ce8\u610f:x\u8f74\u5411\u4e0b\uff0cy\u8f74\u5411\u53f3</li> <li>\u63cf\u8ff0\u672f\u8bed<ol> <li>\u52a8\u6001\u8303\u56f4\uff1a\u6700\u5927\u7070\u5ea6\u548c\u6700\u5c0f\u7070\u5ea6\u7684\u6bd4\u503c</li> <li>\u9971\u548c\u5ea6\uff1a\u6307\u8d85\u8fc7\u8be5\u503c\u7684\u7070\u5ea6\u503c\u5c06\u88ab\u526a\u5207\u6389</li> <li>\u5bf9\u6bd4\u5ea6\uff1a\u6700\u5927\u7070\u5ea6\u548c\u6700\u5c0f\u7070\u5ea6\u7684\u5dee\u503c</li> </ol> </li> <li>\u5206\u8fa8\u7387<ol> <li>\u5b9a\u4e49\uff1a\u63cf\u8ff0\u56fe\u50cf\u4e2d\u7269\u4f53\u7684\u7ec6\u8282\u7a0b\u5ea6</li> <li>\u5206\u7c7b<ol> <li>\u7a7a\u95f4\u5206\u8fa8\u7387\uff1a\u91c7\u6837\u51b3\u5b9a\uff0c\u662f\u56fe\u50cf\u53ef\u8fa8\u522b\u7684\u6700\u5c0f\u7ec6\u8282\u7684\u5ea6\u91cf</li> <li>\u7070\u5ea6\u5206\u8fa8\u7387\uff1a\u91cf\u5316\u51b3\u5b9a\uff0c\u662f\u56fe\u50cf\u7070\u5ea6\u7ea7\u7684\u53ef\u5206\u8fa8\u7684\u6700\u5c0f\u53d8\u5316</li> </ol> </li> <li>\u7a7a\u95f4\u5206\u8fa8\u7387\u56e0\u7d20<ol> <li>\u662f\u7531\u91c7\u6837\u70b9\u6570\u51b3\u5b9a</li> <li>\u7070\u5ea6\u4e00\u5b9a\uff0c\u5219\u70b9\u6570\u548c\u5206\u8fa8\u7387\u6210\u6b63\u6bd4</li> </ol> </li> </ol> </li> <li>\u56fe\u50cf\u5185\u63d2<ol> <li>\u5b9a\u4e49\uff1a\u4f7f\u7528\u5df2\u77e5\u6570\u636e\u4f30\u8ba1\u672a\u77e5\u6570\u636e\u7684\u4e00\u79cd\u6570\u503c\u5904\u7406\u3002\u5c5e\u4e8e\u56fe\u50cf\u91cd\u91c7\u6837</li> <li>\u5206\u7c7b\uff1a\u8ba1\u7b97\u9898<ol> <li>\u6700\u4e34\u8fd1\u5185\u63d2\u6cd5\uff1a\u5c06\u539f\u56fe\u50cf\u4e2d\u6700\u8fd1\u90bb\u7684\u7070\u5ea6\u8d4b\u7ed9\u6bcf\u4e2a\u65b0\u4f4d\u7f6e</li> <li>\u53cc\u7ebf\u6027\u5185\u63d2\u6cd5\uff1a\\(v(x,y) = ax + by +cxy + d\\),\u5176\u4e2d\u7cfb\u6570\u7531\u56db\u4e2a\u6700\u90bb\u8fd1\u5143\u7d20\u51b3\u5b9a</li> <li>\u4e09\u6b21\u5185\u63d2\u6cd5</li> </ol> </li> </ol> </li> </ol> </li> <li>\u56fe\u50cf\u8fd0\u7b97<ol> <li>\u5b9e\u8d28\uff1a\u662f\u5bf9\u5e94\u4f4d\u7f6e\u50cf\u7d20\u4e4b\u95f4\u7684\u8fd0\u7b97</li> <li>\u8981\u6c42\uff1a\u56fe\u50cf\u5927\u5c0f\u76f8\u540c</li> <li>\u4f5c\u7528<ol> <li>\u76f8\u52a0\uff1a\u505a\u5e73\u6ed1\u566a\u58f0\u5904\u7406</li> <li>\u76f8\u51cf\uff1a\u589e\u5f3a\u5dee\u522b</li> <li>\u76f8\u4e58\u3001\u76f8\u9664\uff1a\u53ef\u4ee5\u7528\u4e8e\u77eb\u6b63\u9634\u5f71\u548c\u6a21\u677f\u64cd\u4f5c</li> </ol> </li> </ol> </li> <li>\u51e0\u4f55\u7a7a\u95f4\u53d8\u6362<ol> <li>\u7ec4\u6210\u8981\u7d20<ol> <li>\u5750\u6807\u7684\u7a7a\u95f4\u53d8\u6362</li> <li>\u7070\u5ea6\u5185\u63d2\uff0c\u5c31\u662f\u5bf9\u53d8\u6362\u540e\u7684\u50cf\u7d20\u8d4b\u4e88\u7070\u5ea6\u503c</li> </ol> </li> <li>\u5750\u6807\u53d8\u6362<ol> <li>\u516c\u5f0f\uff1a\\((x,y) = T(v,w)\\)</li> <li>\u6b63\u5411\u6620\u5c04\uff1a\u76f4\u63a5\u5bf9\u6bcf\u4e2a\u4f4d\u7f6e\u5e94\u7528\u516c\u5f0f</li> <li>\u53cd\u5411\u6620\u5c04\uff1a\u626b\u63cf\u8f93\u51fa\u4f4d\u7f6e\uff0c\u5bf9\u6bcf\u4e2a\u56fe\u50cf\u4f7f\u7528\\((v,w) = T^{-1}\uff08x,y)\\)\u5f97\u5230\u8f93\u5165\u56fe\u50cf\u7684\u4f4d\u7f6e\uff0c\u7136\u540e\u4f7f\u7528\u51b3\u5b9a\u8f93\u51fa\u50cf\u7d20\u7684\u7070\u5ea6\u503c</li> </ol> </li> <li>\u7c7b\u578b<ol> <li>\u4f4d\u7f6e\u53d8\u6362<ol> <li>\u5e73\u79fb\u53d8\u6362</li> <li>\u955c\u50cf\u53d8\u6362\uff1a\u6c34\u5e73\u6216\u8005\u5782\u76f4</li> <li>\u65cb\u8f6c\u53d8\u6362</li> </ol> </li> <li>\u5f62\u72b6\u53d8\u6362<ol> <li>\u6bd4\u4f8b\u53d8\u6362</li> <li>\u9519\u5207\u53d8\u6362</li> </ol> </li> <li>\u590d\u5408\u53d8\u6362</li> </ol> </li> </ol> </li> <li>\u56fe\u50cf\u653e\u5927<ol> <li>\u5b9e\u8d28\uff1a\u5bf9\u4fe1\u606f\u7684\u4f30\u8ba1</li> <li>\u65b9\u5f0f\uff1a\u6700\u8fd1\u90bb\u57df\u6cd5\u548c\u7ebf\u6027\u63d2\u503c\u6cd5</li> <li>\u6700\u8fd1\u90bb\u57df\u6cd5<ol> <li>\u601d\u60f3\uff1a\u5982\u679c\u9700\u8981\u5c06\u539f\u56fe\u50cf\u653e\u5927k\u500d\uff0c\u5219\u5c06\u539f\u56fe\u50cf\u4e2d\u7684\u6bcf\u4e2a\u50cf\u7d20\uff0c\u653e\u5165\\(k*k\\)\u7684\u5b50\u5757\u4e2d\u3002\u4f1a\u51fa\u73b0\u9a6c\u8d5b\u514b\u6548\u5e94</li> </ol> </li> <li>\u7ebf\u6027\u5185\u63d2\u6cd5<ol> <li>\u601d\u60f3\uff1a\u5f53\u6c42\u51fa\u7684\u5206\u6570\u5730\u5740\u548c\u50cf\u7d20\u70b9\u4e0d\u4e00\u81f4\u7684\u65f6\u5019\uff0c\u6c42\u51fa\u5468\u56f4\u50cf\u7d20\u70b9\u7684\u8ddd\u79bb\u6bd4\u503c\uff0c\u7531\u56db\u4e2a\u90bb\u57df\u7684\u50cf\u7d20\u7070\u5ea6\u503c\u8fdb\u884c\u7ebf\u6027\u63d2\u503c</li> <li>\u5bf9\u4e8e\\((x,y)\\),\u5219\u5468\u56f4\u56db\u4e2a\u50cf\u7d20\u70b9\u662f\\(([x],[y]),([x]+1,[y]),([x],[y]+1),([x]+1,[y]+1)\\).\u8fd9\u91cc\u7684\u5750\u6807\u662fy\u5411\u4e0b\uff0cx\u5411\u53f3</li> <li>\u8ba1\u7b97\u516c\u5f0f\uff1a\u5982\u679c\u56fe\u50cf\u56db\u4e2a\u89d2\u5206\u522b\u662fa,b,c,d\uff0c\u5219\u7ed3\u679c\u4e3aq(pd + (1-p)c) + (1-q)(pb + (1-p)a)</li> <li>\u5176\u4e2d\u6a2a\u5411\u4e3ap,1-p.\u7ad6\u5411\u4e3aq,-1q</li> <li>\u590d\u5408\u65cb\u8f6c\uff0c\u7b49\u4e8e\u4e58\u4ee5\u4e24\u6b21\u7684\u65cb\u8f6c\u7684\u77e9\u9635\u7684\u4e58\u79ef\u3002\u5355\u6b21\u65cb\u8f6c\u7684\u77e9\u9635\u662f\u5de6\u4e0a\u89d2\u56db\u4e2a\u4f4d\u7f6e\u662f     cos, sin,-sin,cos</li> </ol> </li> </ol> </li> </ol> <p>\u9898\u76ee</p> <p>\u4e00\u3001\u586b\u7a7a</p> <p>1\u3001\u82e5\u67d0\u4e00\u70b9\u7684\u50cf\u7d20\u4f4d\u7f6e\u8868\u793a\u4e3a(x, y),\u8bf7\u5c06\u8be5\u50cf\u7d20\u7684 4 \u90bb\u57df\u7684\u5750\u6807\u70b9\u8868\u793a\u51fa\u6765\uff0c</p> <p>\uff08 x+1,y\uff09     \u3001 (x,y+1)          \u3001 (x-1,y)           \u3001   (x,y-1)          \u3002</p> <p>2\u3001\u56fe\u50cf\u7684\u51e0\u4f55\u53d8\u6362\u4e0d\u6539\u53d8\u56fe\u50cf\u7684     \u50cf\u7d20\u548c\u7070\u5ea6\u503c       \uff0c\u800c\u6539\u53d8\u50cf\u7d20\u6240\u5728\u7684    \u4f4d\u7f6e           \u3002</p> <p>3\u3001     \u63d2\u503c    \u662f\u4e00\u4e2a\u5e7f\u6cdb\u7528\u4e8e\u653e\u5927\u3001\u7f29\u5c0f\u3001\u65cb\u8f6c\u548c\u51e0\u4f55\u6821\u6b63\u7b49\u5de5\u4f5c\u4e2d\u7684\u57fa\u672c\u5de5\u5177\u3002</p> <p>4\u3001\u5e38\u7528\u7684\u7070\u5ea6\u5185\u63d2\u6cd5\u6709       \u6700\u8fd1\u90bb\u57df\u6cd5          \u3001      \u53cc\u7ebf\u6027\u5185\u63d2\u6cd5          \u548c     \u53cc\u4e09\u6b21\u5185\u63d2\u6cd5            \u3002</p> <p>5\u3001\u56fe\u50cf\u7684\u6570\u5b57\u5316\u4e3b\u8981\u5305\u542b    \u91c7\u6837         \u3001         \u91cf\u5316       \u4e24\u4e2a\u8fc7\u7a0b\u3002\u91cf\u5316\u53ef \u4ee5\u5206\u6210       \u5747\u5300\u91cf\u5316         \u3001    \u975e\u5747\u5300\u91cf\u5316          \u4e24\u5927\u7c7b\u3002</p> <p>6\u3001   \u7070\u5ea6\u56fe\u50cf        \u662f\u6307\u6bcf\u4e2a\u50cf\u7d20\u7684\u4fe1\u606f\u7531\u4e00\u4e2a\u91cf\u5316\u7684\u7070\u5ea6\u7ea7\u6765\u63cf\u8ff0\u7684\u56fe\u50cf\uff0c\u6ca1\u6709\u5f69 \u8272\u4fe1\u606f\u3002</p> <p>7\u3001\u5728\u4e8c\u503c\u56fe\u50cf\u4e2d\uff0c\u6bcf\u4e2a\u50cf\u7d20\u4e3a 1bit;1\u8868\u793a\u4e3a\u767d\u8272\uff0c0 \u8868\u793a    \u9ed1\u8272          \u3002</p> <p>\u4e8c\u3001\u540d\u8bcd\u89e3\u91ca</p> <p>1\u3001\u56fe\u50cf\u91c7\u6837\uff1a\u5c06\u56fe\u50cf\u7684\u8fde\u7eed\u5750\u6807\u503c\u8fdb\u884c\u79bb\u6563\u5316\u7684\u64cd\u4f5c\u79f0\u4e3a\u91c7\u6837</p> <p>2\u3001\u56fe\u50cf\u91cf\u5316\uff1a\u628a\u7ecf\u8fc7\u91c7\u6837\u5f97\u5230\u7684\u8fde\u7eed\u4eae\u5ea6\u79bb\u6563\u5316</p> <p>3\u3001\u7070\u5ea6\u56fe\u50cf\uff1a\u6bcf\u4e2a\u50cf\u7d20\u7684\u4fe1\u606f\u90fd\u4f7f\u7528\u4e00\u4e2a\u91cf\u5316\u7684\u7070\u5ea6\u7ea7\u6765\u63cf\u8ff0\u7684\u56fe\u50cf</p> <p>4\u3001\u56fe\u50cf\u7a7a\u95f4\u5206\u8fa8\u7387\uff1a\u56fe\u50cf\u53ef\u5206\u8fa8\u7684\u6700\u5c0f\u7ec6\u8282\u7a0b\u5ea6</p> <p>\u4e09\u3001\u7b80\u7b54\u9898</p> <p>1\u3001\u56fe\u50cf\u51e0\u4f55\u6821\u6b63\u4e00\u822c\u5305\u62ec\u54ea\u51e0\u6b65\uff1f</p> <p>1.\u7a7a\u95f4\u5750\u6807\u53d8\u6362\uff0c\u91cd\u65b0\u6392\u5217\u56fe\u50cf\u5e73\u9762\u7684\u50cf\u7d20\u4ee5\u6062\u590d\u539f\u6709\u7684\u7a7a\u95f4\u5173\u7cfb</p> <p>2.\u56fe\u50cf\u7070\u5ea6\u503c\u7684\u786e\u5b9a</p> <p>2\u3001\u56fe\u50cf\u91cd\u91c7\u6837\u6709\u54ea\u4e9b\u65b9\u6cd5\uff1f\u5404\u6709\u4ec0\u4e48\u7279\u70b9\uff1f</p> <p>1.\u6700\u8fd1\u90bb\u5185\u63d2\u6cd5\uff1a\u901f\u5ea6\u6700\u5feb\uff0c\u4f46\u662f\u53ef\u80fd\u51fa\u73b0\u9a6c\u8d5b\u514b</p> <p>2.\u53cc\u7ebf\u6027\u5185\u63d2\u6cd5\uff1a\u66f4\u7cbe\u81f4\uff0c\u4f46\u662f\u6709\u4f4e\u901a\u6ee4\u6ce2\u7684\u6027\u8d28\uff0c\u4f1a\u635f\u5931\u8fb9\u7f18\u4fe1\u606f</p> <p>3.\u53cc\u4e09\u6b21\u5185\u63d2\u6cd5\uff1a\u8ba1\u7b97\u91cf\u5927\uff0c\u4f46\u662f\u6548\u679c\u6700\u597d</p> <p>\u56db\u3001\u7efc\u5408\u8ba1\u7b97</p> <p>1\u3001\u82e5f (1,1) = 1, f (1,2) = 5, f (2,1) = 3, f (2,2) = 4\u8bd5\u5206\u522b\u7528\u6700\u8fd1\u90bb\u57df\u6cd5\u548c\u53cc\u7ebf\u6027\u5185 \u63d2\u6cd5\u786e\u5b9a\u70b9f (1.2,1.6) \u7684\u7070\u5ea6\u503c\u3002</p> <p>\u6700\u8fd1\u90bb\u57df\u6cd5\uff1a\u76f4\u63a5\u8ba1\u7b97\u8ddd\u79bb\u5224\u65ad\u5373\u53ef\u3002</p> <p>\u53cc\u7ebf\u6027\u5185\u63d2\u6cd5\uff1a\u516c\u5f0f\u8ba1\u7b97\uff0c\u6700\u540e\u53d6\u6574\uff0c\u4e3a3\u3002</p> <p>2\u3001\uff081\uff09\u7ed9\u51fa\u5c06\u56fe\u50cf\u987a\u65f6\u9488\u65cb\u8f6c 45 \u5ea6\u7684\u53d8\u6362\u77e9\u9635\u3002</p> <p>Cos,sin</p> <p>-sin,cos</p> <p>\uff082\uff09\u5982\u4f55\u5229\u7528\u4e0a\u8ff0\u77e9\u9635\u5b9e\u73b0\u56fe\u50cf\u65cb\u8f6c\uff1f</p>"},{"location":"TEST/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/#_4","title":"\u7b2c\u4e09\u7ae0 \u7070\u5ea6\u53d8\u6362\u548c\u7a7a\u95f4\u6ee4\u6ce2","text":"<p>\u62cd\u96fe\u4e2d\u7684\u7167\u7247\uff0c\u6216\u8005\u9ed1\u591c\u7684\u7167\u7247\uff0c\u56e0\u4e3a\u4eae\u6697\u5dee\u522b\u4e0d\u662f\u5f88\u5927\uff0c\u5219\u753b\u9762\u6548\u679c\u4e0d\u597d</p> <p>\u6539\u6b63\u65b9\u6cd5\uff1a\u56fe\u50cf\u589e\u5f3a\u4e0e\u56fe\u50cf\u590d\u539f</p>"},{"location":"TEST/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/#_5","title":"\u5e38\u89c1\u7684\u63cf\u8ff0\u672f\u8bed","text":"<ul> <li>\u56fe\u50cf\u52a8\u6001\u8303\u56f4\uff1a\u56fe\u50cf\u4e2d\u6700\u5927\u7070\u5ea6\u548c\u6700\u5c0f\u7070\u5ea6\u7684\u6bd4\u503c</li> <li>\u5bf9\u6bd4\u5ea6\uff1a\u56fe\u50cf\u4e2d\u6700\u5927\u7070\u5ea6\u548c\u6700\u5c0f\u7070\u5ea6\u7684\u5dee\u503c</li> <li>\u7a7a\u95f4\u5206\u8fa8\u7387\uff1a\u56fe\u50cf\u53ef\u8fa8\u522b\u7684\u6700\u5c0f\u7ec6\u8282\u7684\u5ea6\u91cf</li> <li>\u7070\u5ea6\u5206\u8fa8\u7387\uff1a\u7070\u5ea6\u7ea7\u4e2d\u53ef\u5206\u8fa8\u7684\u6700\u5c0f\u53d8\u5316</li> </ul>"},{"location":"TEST/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/#_6","title":"\u56fe\u50cf\u589e\u5f3a","text":"<p>\u5b9a\u4e49\uff1a\u56fe\u50cf\u589e\u5f3a\u91c7\u7528\u4e00\u7cfb\u5217\u6280\u672f\u6539\u5584\u56fe\u50cf\u7684\u89c6\u89c9\u6548\u679c\uff0c\u6216\u8005\u8f6c\u6362\u4e3a\u9700\u8981\u7684\u4fbf\u4e8e\u5904\u7406\u7684\u5f62\u5f0f\u3002</p> <p>\u5206\u7c7b\uff1a\u4ece\u589e\u5f3a\u7684\u4f5c\u7528\u57df\u51fa\u53d1\uff0c\u5206\u4e3a\u7a7a\u95f4\u57df\u589e\u5f3a\u548c\u9891\u7387\u57df\u589e\u5f3a\u3002\u7a7a\u95f4\u57df\u589e\u5f3a\u662f\u76f4\u63a5\u5bf9\u56fe\u50cf\u5404\u50cf\u7d20\u8fdb\u884c\u5904\u7406\u3002\u800c\u9891\u7387\u57df\u589e\u5f3a\u662f\u5c06\u56fe\u50cf\u7ecf\u8fc7\u5085\u91cc\u53f6\u53d8\u6362\u4e4b\u540e\uff0c\u4ece\u7a7a\u57df\u8f6c\u6362\u4e3a\u9891\u57df(\u5176\u4e2d\u6bcf\u4e2a\u70b9\u8868\u793a\u56fe\u50cf\u4e2d\u4e0d\u540c\u9891\u7387\u6210\u5206\u7684\u5e45\u5ea6\u548c\u76f8\u4f4d\u4fe1\u606f)\uff0c\u4ece\u800c\u53ef\u4ee5\u5bf9\u4e0d\u540c\u7684\u9891\u57df\u8fdb\u884c\u64cd\u4f5c\u6216\u8005\u8fc7\u6ee4\uff0c\u6700\u540e\u518d\u8f6c\u6362\u4e3a\u7a7a\u57df\u5373\u53ef\u3002</p>"},{"location":"TEST/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/#_7","title":"\u7a7a\u95f4\u57df\u589e\u5f3a\uff1a\u7070\u5ea6\u76f4\u65b9\u56fe\u4e0e\u7a7a\u95f4\u6ee4\u6ce2","text":"<p>\u5206\u7c7b\uff1a\u4e3b\u8981\u5206\u4e3a\u7070\u5ea6\u53d8\u6362\u548c\u7a7a\u95f4\u6ee4\u6ce2\u4e24\u90e8\u5206\u3002\u5176\u4e2d\u7070\u5ea6\u53d8\u6362\u5728\u56fe\u50cf\u7684\u5355\u4e2a\u50cf\u7d20\u4e0a\u64cd\u4f5c\uff0c\u4e3b\u8981\u4ee5\u5bf9\u6bd4\u5ea6\u548c\u9608\u503c\u7684\u5904\u7406\u4e3a\u76ee\u7684\u3002\u800c\u7a7a\u95f4\u6ee4\u6ce2\u6d89\u53ca\u6539\u5584\u6027\u80fd\u7684\u64cd\u4f5c\uff0c\u6bd4\u5982\u901a\u8fc7\u56fe\u50cf\u4e2d\u7684\u6bcf\u4e2a\u50cf\u7d20\u7684\u90bb\u57df\u6765\u9510\u5316\u56fe\u50cf\u3002</p> <p>\u7edf\u4e00\u516c\u5f0f\uff1a\\(g(x,y) = T(f(x,y)))\\)\uff0c\u5219\u5176\u4e2dT\u662f\u5bf9\u70b9\\((x,y)\\)\u7684\u90bb\u57df\u8fdb\u884c\u5904\u7406\u7684\u7b97\u5b50\u3002\u5982\u4e3a\u964d\u4f4e\u566a\u58f0\u800c\u5bf9\u56fe\u50cf\u5e8f\u5217\u6267\u884c\u6bcf\u4e2a\u50cf\u7d20\u6c42\u548c\u7684\u64cd\u4f5c\u3002\u5bf9\u8fb9\u754c\uff0c\u9700\u8981\u8fdb\u884cpedding\u6216\u8005\u5176\u4ed6\u64cd\u4f5c\uff0c\u8fd9\u5c31\u662f\u7a7a\u95f4\u6ee4\u6ce2\u7684\u5b9a\u4e49\u3002</p> <p>\u7070\u5ea6\u53d8\u6362\uff1a</p> <ul> <li>\u7ebf\u6027\u7070\u5ea6\u53d8\u6362\uff1a\u8f93\u5165\u56fe\u50cf\u7684\u7070\u5ea6\u8303\u56f4[a,b]\uff0c\u8f93\u51fa\u56fe\u50cf\u7684\u7070\u5ea6\u8303\u56f4\u4e3a[c,d]\u3002\u8d85\u51fa\u539f\u8303\u56f4\u7684\u503c\u5168\u90e8\u53d8\u4e3a\u8fb9\u754c\u503c\uff0c\u4e2d\u95f4\u7684\u90e8\u5206\u4f7f\u7528\u7ebf\u6027\u53d8\u6362\u3002</li> <li>\u53cd\u7ebf\u6027\u53d8\u6362\uff1as = L - 1 - r</li> </ul> <p>\u5bf9\u6570\u53d8\u6362\uff1a\u901a\u7528\u5f62\u5f0f\u4e3as = \\(c * log(1 + r)\\),\u5176\u4e2dc\u662f\u5e38\u6570\uff0c\u5047\u8bbe\\(r &gt;= 0\\).\u8be5\u53d8\u6362\u53ef\u4ee5\u6269\u5c55\u6697\u50cf\u7d20\u7684\u503c\uff0c\u540c\u65f6\u538b\u7f29\u66f4\u9ad8\u7070\u5ea6\u7ea7\u7684\u503c\u3002\u53cd\u5bf9\u6570\u53d8\u6362\u7684\u4f5c\u7528\u76f8\u53cd\u3002\u53ef\u4ee5\u67e5\u770b\u524d\u540e\u7684\u9891\u8c31\u3002</p> <p>\u4f3d\u9a6c\u53d8\u6362\uff1a\\(s = c  r^{z}\\)\uff0c\u5176\u4e2d\u5982\u679c z&lt;1\uff0c\u63d0\u5347\u7070\u5ea6\uff0c\u56fe\u50cf\u53d8\u4eae\u3002z&gt;1\uff0c\u5219\u964d\u4f4e\u7070\u5ea6\u7ea7\uff0c\u56fe\u50cf\u53d8\u6697</p>"},{"location":"TEST/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/#_8","title":"\u65b9\u5f0f\u4e00\uff1a\u7070\u5ea6\u76f4\u65b9\u56fe\u5747\u8861","text":"<p>\u5b9a\u4e49\uff1a\u7070\u5ea6\u76f4\u65b9\u56fe\u662f\u8868\u8fbe\u56fe\u50cf\u7070\u5ea6\u5206\u5e03\u60c5\u51b5\u7684\u7edf\u8ba1\u56fe\u50cf\uff0c\u6a2a\u5750\u6807\u662f\u7070\u5ea6\u503c\uff0c\u7eb5\u5750\u6807\u662f\u6982\u7387\u5bc6\u5ea6(\u53ef\u7528\u6bd4\u503c\u8ba1\u7b97)\u3002\u5982\u679c\u8981\u5f52\u4e00\u5316\uff0c\u5c31\u662f\u9700\u8981\u9664\u4ee5\u603b\u50cf\u7d20\u6570\u91cfMN\u3002</p> <p>\u7070\u5ea6\u503c\u96c6\u4e2d\u504f\u5c0f\uff0c\u5219\u539f\u56fe\u50cf\u53d8\u6697\u3002\u7070\u5ea6\u503c\u96c6\u4e2d\u504f\u5927\uff0c\u5219\u539f\u56fe\u50cf\u53d8\u91cf\u3002\u5982\u679c\u8de8\u5ea6\u592a\u5927\uff0c\u5219\u52a8\u6001\u8303\u56f4\u5408\u9002</p> <p>\u76f4\u65b9\u56fe\u5747\u8861\uff1a\u76f4\u65b9\u56fe\u5747\u8861\u5316\u5df2\u7ecf\u662f\u5c06\u539f\u56fe\u50cf\u901a\u8fc7\u67d0\u79cd\u53d8\u6362\uff0c\u5f97\u5230\u4e00\u526f\u7070\u5ea6\u76f4\u65b9\u56fe\u4e3a\u5747\u5300\u5206\u5e03\u7684\u65b0\u56fe\u50cf\u7684\u65b9\u6cd5\u3002</p> <p>\u5bf9\u4e8e\u79bb\u6563\u503c\uff0c\u6211\u4eec\u7528\u6982\u7387\u548c\u6c42\u548c\u6765\u8ba1\u7b97\u3002\u5bf9\u4e8e\u4e00\u5e45\u56fe\u50cf\uff0c\u7070\u5ea6\u7ea7rk\u7684\u51fa\u73b0\u6982\u7387\u8fd1\u4f3c\u4e3a\\(nk / MN\\),\u4e5f\u5c31\u662f\u9891\u7387\u4ee3\u66ff\u6982\u7387\u3002\u5176\u4e2dMN\u662f\u56fe\u50cf\u7684\u603b\u50cf\u7d20\u6570\u91cf\uff0cnk\u4e3a\u7070\u5ea6\u503c\u4e3ark\u7684\u50cf\u7d20\u4e2a\u6570\u3002\u800csk\u7684\u8ba1\u7b97\u516c\u5f0f\u4e3a\\(s_{k}=T(r_{k})=(L-1)\\sum_{j=0}^{k}p_{r}(r_{j})=\\frac{(L-1)}{MN}\\sum_{j=0}^{k}n_{j},\\quad k=0,1,2,\\cdots,L-1\\)\uff0c\u8be5\u5f0f\u5b50\u5c06\u8f93\u5165\u7070\u5ea6\u7ea7\u4e3ark\u7684\u5404\u50cf\u7d20\u6620\u5c04\u5230\u8f93\u51fa\u56fe\u50cf\uff0c\u7070\u5ea6\u7ea7\u4e3ask\u3002\u8fd9\u91cc\u4f7f\u7528\u7684\u662f\u6c42\u548c\u903b\u8f91\u3002\u6700\u540e\u4e00\u4e2as\u5fc5\u7136\u662f1\u3002</p> <p>\u4f5c\u7528\uff1a\u9ad8\u6982\u7387\u589e\u5f3a\uff0c\u4f4e\u6982\u6291\u5236\uff0c\u7070\u5ea6\u7ea7\u7b80\u5355\u5408\u5e76\uff0c\u4e0d\u80fd\u4e25\u683c\u5747\u5300\uff0c\u5e76\u4e14\u91cd\u590d\u505a\u5c31\u65e0\u610f\u4e49</p>"},{"location":"TEST/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/#_9","title":"\u65b9\u5f0f\u4e8c\uff1a\u7a7a\u95f4\u6ee4\u6ce2","text":"<p>\u57fa\u7840\u77e5\u8bc6</p> <p>\u7a7a\u95f4\u6ee4\u6ce2\u662f\u6307\u5229\u7528\u50cf\u7d20\u4ee5\u53ca\u50cf\u7d20\u90bb\u57df\u7ec4\u6210\u7684\u7a7a\u95f4\u8fdb\u884c\u56fe\u50cf\u589e\u5f3a\u7684\u65b9\u6cd5\u3002</p> <p>\u539f\u7406\u662f\u5bf9\u56fe\u50cf\u8fdb\u884c\u6a21\u7248\u8fd0\u7b97\u3002\u57fa\u672c\u601d\u8def\u662f\u8d4b\u4e88\u67d0\u4e2a\u50cf\u7d20\u7684\u503c\u4e3a\u672c\u8eab + \u90bb\u57df\u7684\u7070\u5ea6\u503c\u7684\u51fd\u6570\u3002</p> <p>\u662f\u5426pedding: \u5982\u679c\u9700\u8981\u8f93\u5165\u8f93\u51fa\u7684\u5927\u5c0f\u4e00\u76f4\uff0c\u5219\u9700\u8981pedding</p> <p>\u5377\u79ef\u6a21\u677f</p> <p>\u6838\u5fc3\uff1a\u6ed1\u52a8\u7a97\u53e3 + \u70b9\u4e58</p> <p>\u5206\u7c7b</p> <p>\u6309\u7167\u7ebf\u6027\u5206\uff0c\u5206\u4e3a\u57fa\u4e8e\u5085\u91cc\u53f6\u53d8\u6362\u7684\u7ebf\u6027\u6ee4\u6ce2\u5668\uff0c\u4ee5\u53ca\u76f4\u63a5\u90bb\u57df\u64cd\u4f5c\u7684\u975e\u7ebf\u6027\u6ee4\u6ce2\u5668\u3002</p> <p>\u6309\u7167\u529f\u80fd\u5206\uff0c\u4e3b\u8981\u5206\u6210\u5e73\u6ed1\u6ee4\u6ce2\u548c\u9510\u5316\u6ee4\u6ce2\u3002</p> <p>\u5e73\u6ed1\u7a7a\u95f4\u6ee4\u6ce2</p> <p>\u7ebf\u6027\u6ee4\u6ce2\u5668\uff1a\u5747\u503c\u6ee4\u6ce2\u5668</p> <p>\u975e\u7ebf\u6027\u6ee4\u6ce2\u5668\uff1a\u6700\u5927\u503c\uff0c\u4e2d\u503c\uff0c\u6700\u5c0f\u503c\u6ee4\u6ce2\u5668(\u90fd\u662f\u7edf\u8ba1\u6392\u5e8f(\u975e\u7ebf\u6027)\u6ee4\u6ce2\u5668)\u3002\u5176\u4e2d\u7684\u4e2d\u503c\u6ee4\u6ce2\u5668\u7528\u4e8e\u53bb\u9664\u566a\u58f0\uff0c\u6700\u5927\u503c\u7528\u4e8e\u5bfb\u627e\u6700\u4eae\u70b9\uff0c\u6700\u5c0f\u503c\u7528\u4e8e\u5bfb\u627e\u6700\u6697\u70b9</p> <p>\u4e2d\u503c\u6ee4\u6ce2\u5668\uff1a3*3\u7684\u6a21\u677f\uff0c\u5219\u7b2c5\u5927\u7684\u662f\u4e2d\u503c</p> <p>\u9510\u5316\u7a7a\u95f4\u6ee4\u6ce2\u5668</p> <p>\u4f5c\u7528\uff1a\u7a81\u51fa\u56fe\u50cf\u7ec6\u8282\uff0c\u589e\u5f3a\u88ab\u6a21\u7cca\u7684\u7ec6\u8282\u3002\u79ef\u5206\u4ea7\u751f\u7684\u662f\u949d\u5316\u6548\u679c\uff0c\u800c\u5fae\u5206\u4ea7\u751f\u7684\u662f\u9510\u5316\u6548\u679c\u3002\u6700\u5e38\u7528\u7684\u65b9\u5f0f\u662f\u8ba1\u7b97\u68af\u5ea6</p> <p>\u5206\u7c7b\uff1a</p> <ul> <li>\u4e8c\u9636\u5fae\u5206\u6ee4\u6ce2\u5668-\u62c9\u666e\u62c9\u65af\u7b97\u5b50</li> <li>\u516c\u5f0f\uff1a  \\(f(x+1,y) + f(x-1,y) + f(x,y+1) + f(x,y-1) - 4f(x,y)\\)</li> <li>\u5982\u679c\u6a21\u677f\u7cfb\u6570\u4e3a\u8d1f\u53f7\uff0c\u5219\u51cf\u53bb\u7b97\u5b50\u503c\uff0c\u5426\u5219\u52a0\u4e0a\u7b97\u5b50\u503c</li> <li>\u4e00\u9636\u5fae\u5206\u6ee4\u6ce2\u5668-\u68af\u5ea6\u7b97\u5b50</li> <li></li> <li>\u5982\u4e0a\u56fe\uff0c\u5219\u68af\u5ea6\u8fd1\u4f3c\u8ba1\u7b97\uff1a\\(G(x) =  z6 - z5\\),\u800c\\(G(y) = z8 - z5\\)</li> </ul> <p>\u4e0d\u540c\u6ee4\u6ce2\u5668\u7684\u5bf9\u6bd4</p> <ul> <li>\u5bf9\u4e8e\u6912\u76d0\u566a\u58f0\uff0c\u662f\u6307\u56fe\u50cf\u4e2d\u7684\u67d0\u4e9b\u50cf\u7d20\u88ab\u968f\u673a\u8bbe\u7f6e\u4e3a\u6700\u5927\u503c\uff08\u767d\u8272\uff0c\u5373\u201c\u76d0\u201d\uff09\u6216\u6700\u5c0f\u503c\uff08\u9ed1\u8272\uff0c\u5373\u201c\u6912\u201d\uff09\u3002\u901a\u5e38\u4ee5\u4e00\u5b9a\u7684\u6982\u7387p\u6765\u51b3\u5b9a\u54ea\u4e9b\u50cf\u7d20\u4f1a\u88ab\u66ff\u6362\u3002   \u4e2d\u503c\u6ee4\u6ce2\u5bf9\u7c7b\u4f3c\u8109\u51b2\u566a\u58f0\u66f4\u6709\u6548\u679c\u3002\u800c\u6912\u76d0\u566a\u58f0\u5747\u503c\u4e0d\u4e3a0\uff0c\u4f7f\u7528\u5747\u503c\u6ee4\u6ce2\u4e0d\u80fd\u5f88\u597d\u53bb\u9664\u3002</li> <li>\u9ad8\u65af\u566a\u58f0\uff1a\u4e5f\u5c31\u662f\u566a\u58f0\u7b26\u5408\u6b63\u6001\u5206\u5e03\u7684\u566a\u58f0\u3002\u566a\u58f0\u901a\u5e38\u662f\u8fde\u7eed\u7684\u3002\u5219\u4f7f\u7528\u5747\u503c\u6ee4\u6ce2\u521a\u597d\u53ef\u4ee5\u5904\u7406</li> </ul> <p>\u9898\u76ee</p> <p>1.\u8bbe\u6709\u4e00\u526f\u56fe\u50cf\u6709\u5982\u8868 1 \u6240\u793a\u76f4\u65b9\u56fe\uff0c\u5bf9\u8be5\u56fe\u50cf\u8fdb\u884c\u76f4\u65b9\u56fe\u5747\u8861\u5316\uff0c\u5199\u51fa\u5747\u8861\u5316\u8fc7\u7a0b\uff0c\u5e76\u753b \u51fa\u5747\u8861\u5316\u540e\u7684\u76f4\u65b9\u56fe\u3002\u82e5\u5728\u539f\u56fe\u50cf\u4e00\u884c\u76f8\u90bb 8 \u4e2a\u50cf\u7d20\u7684\u7070\u5ea6\u503c\u5206\u522b\u4e3a\uff1a0\u30011\u30012\u30013\u30014\u30015\u3001 6\u30017\uff0c\u5219\u5747\u8861\u540e\uff0c\u5b83\u4eec\u7684\u7070\u5ea6\u503c\u4e3a\u591a\u5c11\uff1f</p> \u7070\u5ea6\u503c 0 1 2 3 4 5 6 7 p 0.174 0.088 0.086 0.08 0.068 0.058 0.062 0.384 <p>\u8868-1.\u76f4\u65b9\u56fe\u5bf9\u5e94\u8868\u683c</p> <p>2.\u8868-2 \u8868\u793a\u4e00\u526f 16 \u7ea7\u7070\u5ea6\u7684\u56fe\u50cf\u3002\u5199\u51fa\u5747\u503c\u6ee4\u6ce2\u548c\u4e2d\u503c\u6ee4\u6ce2\u7684 3 x 3 \u6ee4\u6ce2\u5668\uff0c\u8bf4\u660e\u8fd9\u4e24\u79cd</p> <p>\u6ee4\u6ce2\u5668\u5404\u81ea\u7684\u7279\u70b9\uff0c\u5e76\u5199\u51fa\u4e24\u79cd\u6ee4\u6ce2\u5668\u5bf9\u56fe\u50cf\u7684\u6ee4\u6ce2\u7ed3\u679c\uff08\u4e0d\u586b\u5145\uff09\u3002</p> 1 2 2 2 3 1 15 1 2 2 2 1 2 0 3 0 2 2 3 1 3 2 0 2 2 <p>\u8868-2 16 \u7ea7\u7070\u5ea6\u56fe\u50cf\u5bf9\u5e94\u8868\u683c</p> <p>3.\u56fe\u50cf\u5927\u5c0f\u4e0d\u53d8\u7684\u5377\u79ef\u64cd\u4f5c</p> <p>4.\u5047\u8bbe\u67d0\u56fe\u50cf\u539f\u7070\u5ea6\u5206\u5e03\u8303\u56f4\u4e3a[50,150],\u91c7\u7528\u7ebf\u6027\u62c9\u4f38\u7684\u65b9\u6cd5\u5c06\u8be5\u8303\u56f4\u62c9\u4f38\u81f3[0,255],\u8bd5 \u8ba1\u7b97\u5728\u539f\u56fe\u4e2d\u7070\u5ea6\u7ea7r = 70 \u7684\u50cf\u7d20\uff0c\u5728\u62c9\u4f38\u540e\u7684\u8303\u56f4\u4e2d\u7070\u5ea6\u7ea7\u7684\u503cs(\u8bf7\u5199\u51fa\u63a8\u5bfc\u8fc7\u7a0b)\u3002</p> <p>6.\u5bf9\u4e8e\u6912\u76d0\u566a\u58f0\uff0c\u4e3a\u4ec0\u4e48\u4e2d\u503c\u6ee4\u6ce2\u6548\u679c\u6bd4\u5747\u503c\u6ee4\u6ce2\u6548\u679c\u597d\uff1f</p> <p>7.\u5747\u503c\u6ee4\u6ce2\u5668\u5bf9\u9ad8\u65af\u566a\u58f0\u7684\u6ee4\u6ce2\u6548\u679c\u5982\u4f55\uff1f\u8bd5\u5206\u6790\u5176\u4e2d\u7684\u539f\u56e0 8.\u8bf4\u660e\u4e00\u5e45\u7070\u5ea6\u56fe\u50cf\u7684\u76f4\u65b9\u56fe\u4e0e\u5bf9\u6bd4\u5ea6\u4e4b\u95f4\u7684\u5173\u7cfb</p> <p>9 \u8bd5\u8ff0\u5404\u79cd\u7a7a\u57df\u5e73\u6ed1\u65b9\u6cd5\u7684\u529f\u80fd\u3001\u8bd5\u7528\u6761\u4ef6\u53ca\u4f18\u7f3a\u70b9\u3002</p> <p>10.\u540d\u8bcd\u89e3\u91ca\uff1a\uff081\uff09\u56fe\u50cf\u589e\u5f3a\uff1b\uff082\uff09\u7070\u5ea6\u76f4\u65b9\u56fe\uff1b\uff083\uff09\u4e2d\u503c\u6ee4\u6ce2\uff084\uff09\u76f4\u65b9\u56fe\u5747\u8861\u5316</p> <p>11.\u586b\u7a7a</p> <p>\uff081\uff09\u5bf9\u4e8e     \u6912\u76d0           \u566a\u58f0\uff0c\u4e2d\u503c\u6ee4\u6ce2\u6548\u679c\u6bd4\u5747\u503c\u6ee4\u6ce2\u6548\u679c\u597d\uff1f</p> <p>\uff082\uff09      \u76f4\u65b9\u56fe\u5747\u8861\u5316         \u65b9\u6cd5\u7684\u57fa\u672c\u601d\u60f3\u662f\uff0c\u5bf9\u5728\u56fe\u50cf\u4e2d\u50cf\u7d20\u4e2a\u6570\u591a\u7684\u7070\u5ea6\u7ea7\u8fdb\u884c\u5c55\u5bbd\uff0c\u800c\u5bf9 \u50cf\u7d20\u4e2a\u6570\u5c11\u7684\u7070\u5ea6\u7ea7\u8fdb\u884c\u7f29\u51cf\uff0c\u4ece\u800c\u8fbe\u5230\u6e05\u6670\u56fe\u50cf\u7684\u76ee\u7684\u3002</p> <p>\uff083\uff09\u56fe\u50cf\u9510\u5316\u7684\u76ee\u7684\u662f\u52a0\u5f3a\u56fe\u50cf\u4e2d\u666f\u7269\u7684       \u7ec6\u8282\uff0c\u8fb9\u7f18   \uff0c\u8f6e\u5ed3          \u548c                 \u3002</p> <p>\uff084\uff09\u76f4\u65b9\u56fe\u4fee\u6b63\u65b9\u6cd5\u5305\u62ec       \u76f4\u65b9\u56fe\u5747\u8861\u5316                \u548c       \u76f4\u65b9\u56fe\u89c4\u5b9a\u5316                \u4e24\u79cd\u65b9\u6cd5\u3002</p> <p>\uff085\uff09\u56fe\u50cf\u6ee4\u6ce2\u64cd\u4f5c\u662f     \u90bb\u57df          \u64cd\u4f5c\uff0c\u901a\u8fc7\u56fe\u50cf\u7684      \u5377\u79ef\u8fd0\u7b97                \u5b9e\u73b0\u3002</p> <p>\uff086\uff09\u7070\u5ea6\u76f4\u65b9\u56fe\u7684\u6a2a\u5750\u6807\u662f   \u7070\u5ea6\u7ea7                 \uff0c\u7eb5\u5750\u6807\u662f   \u8be5\u7070\u5ea6\u51fa\u73b0\u7684\u9891\u7387             \u3002</p> <p>\uff087\uff09\u4e00\u5e45\u66dd\u5149\u8fc7\u5ea6\u7684\u56fe\u50cf\uff0c\u5176\u7070\u5ea6\u96c6\u4e2d\u5728  \u9ad8\u4eae\u5ea6             \u8303\u56f4\u5185\uff0c\u800c\u66dd\u5149\u4e0d\u8db3\u7684\u56fe\u7247\uff0c\u5176 \u7070\u5ea6\u96c6\u4e2d\u5728       \u4f4e\u4eae\u5ea6         \u8303\u56f4\u5185\u3002</p> <p>\uff088\uff09\u56fe\u50cf\u5fae\u5206   \u589e\u5f3a\u4e86        \u4e86\u8fb9\u7f18\u548c\u5176\u4ed6\u7a81\u53d8\u7684\u4fe1\u606f\uff0c \u51cf\u5f31\u4e86          \u4e86\u7070\u5ea6\u53d8\u5316\u7f13\u6162\u7684\u4fe1\u606f\u3002</p> <p>\uff089\uff09\u5bf9\u6570\u53d8\u6362\u7684\u4e00\u822c\u8868\u8fbe\u5f0f\u4e3a         s = c * log(1 + r)           \u3002</p> <p>\uff0810\uff09\u53cd\u7ebf\u6027\u53d8\u6362\u7684\u57fa\u672c\u5f62\u5f0f\u4e3a        s = L - 1 -r                                   \u3002</p> <p>\uff0811\uff09\u6211\u4eec\u901a\u5e38\u4f7f\u7528         \u5bf9\u6570\u53d8\u6362                          \u6765\u51cf\u5c0f\u52a8\u6001\u8303\u56f4\u3002</p> <p>\uff0812\uff09\u7a7a\u57df\u6ee4\u6ce2\u5305\u62ec    \u5e73\u6ed1\u6ee4\u6ce2        \u548c     \u9510\u5316\u6ee4\u6ce2        \u3002\u5176\u8ba1\u7b97\u65b9\u6cd5\u4e3a     \u5377\u79ef          \u8fd0\u7b97\u3002</p> <p>\uff0813\uff09\u4e00\u4e2a\u5f52\u4e00\u5316\u7684\u76f4\u65b9\u56fe\u6240\u6709\u5206\u91cf\u4e4b\u548c\u5e94\u7b49\u4e8e     1        \u3002 12. \u9009\u62e9\u9898</p> <p>\uff081\uff09\u76f4\u65b9\u56fe\u7684\u7b97\u672f\u8fd0\u7b97\u4e0d\u80fd\u6539\u53d8( A )</p> <p>A\uff0e\u50cf\u7d20\u5206\u5e03\u7684\u7a7a\u95f4\u4f4d\u7f6e\uff1b B. \u56fe\u50cf\u4eae\u5ea6\uff1b</p> <p>C. \u56fe\u50cf\u5bf9\u6bd4\u5ea6\uff1b         D. \u56fe\u50cf\u7ec6\u8282\u3002</p> <p>\uff082\uff09\u4e2d\u503c\u6ee4\u6ce2\u5668\u53ef\u4ee5(  A  )</p> <p>A. \u6d88\u9664\u5b64\u7acb\u566a\u58f0\uff1b       B.\u68c0\u51fa\u8fb9\u7f18\uff1b</p> <p>C\uff0e\u8fdb\u884c\u6a21\u7cca\u56fe\u50cf\u6062\u590d\uff1b   D.\u6a21\u7cca\u56fe\u50cf\u7ec6\u8282\u3002</p> <p>\uff083\uff09\u4e0b\u5217\u5c5e\u4e8e\u975e\u7ebf\u6027\u7684\u7a7a\u95f4\u6ee4\u6ce2\u7684\u662f( D )</p> <p>A. \u9ad8\u901a\u6ee4\u6ce2\uff1b B. \u5e26\u901a\u6ee4\u6ce2\uff1b  C. \u4f4e\u901a\u6ee4\u6ce2\uff1b D.\u4e2d\u503c\u6ee4\u6ce2\u3002</p> <p>(5) \u9ad8\u901a\u6ee4\u6ce2\u53ef\u4ee5\u7528\u6765( A  )</p> <p>A\uff0e\u9510\u5316\u8fb9\u7f18\uff1b  B.\u53bb\u9664\u566a\u58f0\uff1b  C. \u76ee\u6807\u8bc6\u522b\uff1b  D.\u63d0\u9ad8\u4eae\u5ea6\u3002</p> <p>(6) \u56fe\u50cf\u4e0e\u5176\u7070\u5ea6\u76f4\u65b9\u56fe\u95f4\u7684\u5bf9\u5e94\u5173\u7cfb\u662f( B )</p> <p>A\uff0e\u4e00\u4e00\u5bf9\u5e94\uff1b  B.\u591a\u5bf9\u4e00\uff1b    C.\u4e00\u5bf9\u591a\uff1b    D. \u90fd\u4e0d\u5bf9\u3002</p>"},{"location":"TEST/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/#_10","title":"\u7b2c\u56db\u7ae0 \u9891\u57df\u6ee4\u6ce2","text":"<p>\u57fa\u672c\u6982\u5ff5</p> <p>\u6b63\u4ea4\u5411\u91cf\uff1a\u4e24\u5411\u91cf\u4e58\u4e3a0</p> <p>\u6b63\u4ea4\u77e9\u9635\uff1a\u662fN\u4e2a\u6b63\u4ea4\u5217\u5411\u91cf\u77e9\u9635\uff0c\u5fc5\u7136\u6ee1\u8db3\\(A^{T}A = I\\)</p> <p>\u4f7f\u7528\u6b63\u4ea4\u77e9\u9635\u5bf9\u4e00\u7ef4\u5411\u91cf\u8fdb\u884c\u53d8\u6362\u7684\u8fc7\u7a0b\u79f0\u4e3a\u6b63\u4ea4\u53d8\u6362\u3002\u4e5f\u5c31\u662f\\(g = Af\\)</p>"},{"location":"TEST/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/#_11","title":"\u56fe\u50cf\u53d8\u6362","text":"<p>\u5b9a\u4e49</p> <p>\u5c06\u56fe\u50cf\u770b\u505a\u7ebf\u6027\u53e0\u52a0\u7cfb\u7edf\uff0c\u56fe\u50cf\u53d8\u6362\u662f\u5c06\u56fe\u50cf\u4ece\u7a7a\u57df\u8f6c\u6362\u4e3a\u9891\u57df\u7b49\u7684\u6570\u5b66\u53d8\u6362\u3002</p> <p>\u597d\u5904\uff1a\u501f\u52a9\u6b63\u4ea4\u53d8\u6362\u7b49\u7279\u6027\u4f7f\u5f97\u5728\u7a7a\u57df\u4e0a\u96be\u89e3\u7684\u95ee\u9898\u5728\u9891\u57df\u4e0a\u5f97\u5230\u7b80\u5316</p> <p>\u5b9e\u8d28\uff1a\u5176\u5b9e\u56fe\u50cf\u5728\u7a7a\u95f4\u57df\u4e0a\u7684\u7070\u5ea6\u53d8\u5316\u5267\u70c8\u7a0b\u5ea6\uff0c\u6216\u8005\u8bf4\u68af\u5ea6\uff0c\u5c31\u662f\u8f6c\u6362\u5230\u9891\u7387\u57df\u7684\u9891\u7387\u3002\u8fd9\u5c31\u89e3\u91ca\u4e86\u4e3a\u4ec0\u4e48\u5e73\u6ed1\u5bf9\u5e94\u4f4e\u901a\u6ee4\u6ce2\uff0c\u800c\u9510\u5316\u5bf9\u5e94\u9ad8\u901a\u6ee4\u6ce2</p> <p>\u57fa\u672c\u6761\u4ef6</p> <p>\u6ee1\u8db3\u6b63\u4ea4\uff0c\u5b8c\u5907\u4e24\u4e2a\u6761\u4ef6\u7684\u51fd\u6570\u96c6\u5408\u6216\u8005\u77e9\u9635\u624d\u80fd\u7528\u4e8e\u56fe\u50cf\u7684\u5206\u6790</p> <p>\u5085\u91cc\u53f6\u53d8\u6362</p> <ul> <li>\u5b9a\u4e49\uff1a\u5c06\u6ee1\u8db3\u6761\u4ef6\u7684\u5468\u671f\u51fd\u6570\u4f7f\u7528\u4e0d\u540c\u9891\u7387\u7684\u6b63\u5f26\u548c\u4f59\u5f26\u51fd\u6570\u7684\u52a0\u6743\u548c\u6765\u8868\u793a\u3002\u975e\u5468\u671f\u51fd\u6570\u4e5f\u53ef\u4ee5\u5c55\u5f00\u4e3a\u5085\u91cc\u53f6\u7ea7\u6570\u3002</li> <li>\u6027\u8d28\uff1a</li> <li>\u5bf9\u51fd\u6570\\(f(x)\\),\u5219\u5176\u5085\u91cc\u53f6\u53d8\u6362\u662f\u5bf9\u79f0\u7684\uff0c\u4e5f\u5c31\u662f\\(F(u,v) = F(-u,-v)\\),\u9891\u8c31\u4e5f\u5bf9\u79f0\u7684</li> <li>\u5e73\u79fb\u4e0d\u5f71\u54cd\u5085\u91cc\u53f6\u53d8\u6362\u7684\u5e45\u503c</li> <li>\u7f29\u653e\u540c\u6b65</li> <li>\u65cb\u8f6c\u540c\u6b65</li> <li>\u53ea\u9700\u4e00\u4e2a\u5468\u671f\u7684\u53d8\u6362\u5c31\u53ef\u4ee5\u5168\u90e8\u786e\u5b9a</li> </ul>"},{"location":"TEST/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/#_12","title":"\u9891\u57df\u5904\u7406","text":"<p>\u516c\u5f0f\uff1a\\(G(u,v) = H(u,v)F(u,v)\\)</p> <p>\u57fa\u672c\u4f8b\u5b50</p> <ul> <li>\u9677\u6ce2\u6ee4\u6ce2\u5668</li> <li>\u516c\u5f0f:\\(H(u,v) = 0,\u5f53(u,v) = (M/2,N/2)\u7684\u65f6\u5019\uff0c\u5176\u4ed6\u65f6\u5019\u7b49\u4e8e1\\)</li> <li>\u6574\u4f53\u7070\u5ea6\u7b49\u7ea7\u964d\u4f4e</li> <li>\u4f4e\u901a(\u5e73\u6ed1)\u6ee4\u6ce2\u5668</li> <li>\u4f4e\u9891\u901a\u8fc7\uff0c\u9ad8\u9891\u8870\u51cf</li> <li>\u5e73\u6ed1\u5904\u7406</li> <li>\u9ad8\u901a(\u9510\u5316)\u6ee4\u6ce2\u5668</li> <li>\u9ad8\u9891\u901a\u8fc7\uff0c\u4f4e\u9891\u51cf\u5f31</li> <li>\u9510\u5316\u5904\u7406</li> </ul> <p>\u7a7a\u95f4\u57df\u6ee4\u6ce2\u548c\u9891\u7387\u57df\u6ee4\u6ce2\u4e4b\u95f4\u7684\u5173\u7cfb</p> <ul> <li>\u7a7a\u95f4\u57df\u4e58\u6cd5\u53ef\u4ee5\u901a\u8fc7\u9891\u7387\u57df\u5377\u79ef\u5f97\u5230</li> <li>\u7a7a\u95f4\u57df\u548c\u9891\u7387\u57df\u7684\u6ee4\u6ce2\u5668\u7ec4\u6210\u4e86\u5085\u91cc\u53f6\u53d8\u6362\u5bf9</li> <li>\u4f4e\u901a\u548c\u5e73\u6ed1\u7b49\u4ef7\uff0c\u9ad8\u901a\u548c\u9510\u5316\u7b49\u4ef7</li> </ul> <p>\u9891\u7387\u57df\u5e73\u6ed1\u6ee4\u6ce2\u5668</p> <ul> <li>\u7406\u60f3\u4f4e\u901a\u6ee4\u6ce2\u5668</li> <li>\u539f\u7406\uff1a\u622a\u65ad\u5085\u91cc\u53f6\u53d8\u6362\u6240\u6709\u7684\u9ad8\u9891\u90e8\u5206\uff0c\u5904\u4e8e\u6307\u5b9a\u8ddd\u79bbd\u4e4b\u5916\uff0c\u4e3a\u4e00\u4e2a\u5706\u5f62</li> <li>\u534a\u5f84d\u8d8a\u5c0f\uff0c\u6a21\u7cca\u8d8a\u5927\uff1b\u534a\u5f84d\u8d8a\u5927\uff0c\u6a21\u7cca\u8d8a\u5c0f</li> <li>ILPF</li> <li>\u5df4\u7279\u6c83\u601d\u4f4e\u901a\u6ee4\u6ce2\u5668</li> <li>\u5e94\u7528\uff1a\u53ef\u7528\u4e8e\u5e73\u6ed1\u5904\u7406\uff0c\u5982\u56fe\u50cf\u7531\u4e8e\u91cf\u5316\u4e0d\u8db3\u4ea7\u751f\u7684\u865a\u5047\u8f6e\u5ed3\uff0c\u53ef\u4ee5\u51cf\u5f31\u632f\u94c3\u73b0\u8c61</li> <li>BLPF</li> <li>\u9ad8\u65af\u4f4e\u901a\u6ee4\u6ce2\u5668</li> <li>GLPF</li> <li>\u6ca1\u6709\u632f\u94c3\u6548\u679c</li> <li>\u5e94\u7528\u5b9e\u4f8b</li> </ul> <p>\u9891\u7387\u57df\u5c16\u9510\u6ee4\u6ce2\u5668</p> <ul> <li>\u7406\u60f3\u9ad8\u901a\u6ee4\u6ce2\u5668</li> <li>\u5df4\u7279\u6c83\u601d\u9ad8\u901a\u6ee4\u6ce2\u5668</li> <li>\u9ad8\u65af\u9ad8\u901a\u6ee4\u6ce2\u5668</li> <li>\u9891\u7387\u57df\u7684\u62c9\u666e\u62c9\u65af\u7b97\u5b50</li> </ul> <p>\u5e38\u89c1\u95ee\u9898</p> <ol> <li>\u7070\u5ea6\u56fe\u50cf\u8fdb\u884c\u5085\u91cc\u53f6\u53d8\u6362\u4e4b\u7684\u9891\u8c31\u56fe\u4e2d\uff0c\u6700\u4eae\u7684\u90e8\u5206\u662f\u5bf9\u5e94\u539f\u59cb\u56fe\u50cf\u7684\uff1a\u6162\u53d8\u5316\u91cf\u3002    \u56e0\u4e3a\u9891\u8c31\u56fe\u4e2d\u4e2d\u5fc3\u4ee3\u8868\u4e86\u4f4e\u9891\u6210\u5206\uff0c\u6700\u4eae\uff0c\u53cd\u6620\u4e86\u56fe\u50cf\u7684\u6574\u4f53\u7ed3\u6784\u548c\u5927\u8303\u56f4\u4fe1\u606f    \u800c\u9ad8\u9891\u6210\u5206\u5728\u8fdc\u79bb\u4e2d\u5fc3\u7684\u90e8\u5206\uff0c\u8f83\u6697\uff0c\u53cd\u6620\u4e86\u56fe\u50cf\u7684\u7ec6\u8282\u548c\u8fb9\u7f18\u4fe1\u606f\uff0c\u5982\u7eb9\u7406\uff0c\u7ebf\u6761\uff0c\u566a\u58f0</li> <li>\u4e3a\u4ec0\u4e48\u4e8c\u503c\u56fe\u50cf\u7684\u5085\u91cc\u53f6\u53d8\u6362\u9891\u8c31\u662f\u7070\u5ea6\u56fe\u50cf\uff1a    \u5085\u91cc\u53f6\u53d8\u6362\u7684\u672c\u8d28\uff1a\u5085\u91cc\u53f6\u53d8\u6362\u5c06\u7a7a\u95f4\u57df\u4e2d\u7684\u56fe\u50cf\u8f6c\u6362\u4e3a\u9891\u7387\u57df\u4e2d\u7684\u8868\u793a\u3002\u5728\u9891\u7387\u57df\u4e2d\uff0c\u6bcf\u4e2a\u70b9\u7684\u503c\u4ee3\u8868\u4e86\u4e0d\u540c\u9891\u7387\u6210\u5206\u7684\u5e45\u5ea6\u548c\u76f8\u4f4d\u4fe1\u606f\u3002    \u5e45\u5ea6\u8c31\u4e0e\u76f8\u4f4d\u8c31\uff1a\u5085\u91cc\u53f6\u53d8\u6362\u7684\u7ed3\u679c\u901a\u5e38\u7531\u5e45\u5ea6\u8c31\u548c\u76f8\u4f4d\u8c31\u7ec4\u6210\u3002\u5e45\u5ea6\u8c31\u53cd\u6620\u4e86\u5404\u4e2a\u9891\u7387\u5206\u91cf\u7684\u5f3a\u5ea6\uff0c\u800c\u76f8\u4f4d\u8c31\u5219\u63cf\u8ff0\u4e86\u8fd9\u4e9b\u5206\u91cf\u7684\u76f8\u5bf9\u4f4d\u7f6e\u5173\u7cfb\u3002\u5f53\u6211\u4eec\u53ef\u89c6\u5316\u5085\u91cc\u53f6\u53d8\u6362\u7684\u7ed3\u679c\u65f6\uff0c\u901a\u5e38\u662f\u663e\u793a\u5e45\u5ea6\u8c31\uff0c\u56e0\u4e3a\u5b83\u66f4\u5bb9\u6613\u89e3\u91ca\u5e76\u4e14\u5177\u6709\u76f4\u89c2\u7684\u610f\u4e49\u3002    \u7070\u5ea6\u8868\u793a\uff1a\u7531\u4e8e\u5e45\u5ea6\u8c31\u662f\u4e00\u4e2a\u975e\u8d1f\u5b9e\u6570\u77e9\u9635\uff0c\u5176\u503c\u8303\u56f4\u4ece0\u5230\u67d0\u4e2a\u6700\u5927\u503c\u4e0d\u7b49\uff0c\u56e0\u6b64\u9002\u5408\u7528\u7070\u5ea6\u6765\u8868\u793a\u3002\u7070\u5ea6\u56fe\u50cf\u662f\u901a\u8fc7\u4e0d\u540c\u7684\u4eae\u5ea6\u7ea7\u522b\uff08\u4ece\u9ed1\u5230\u767d\uff09\u6765\u8868\u793a\u6570\u503c\u5927\u5c0f\u7684\u4e00\u79cd\u65b9\u5f0f\uff0c\u975e\u5e38\u9002\u5408\u7528\u6765\u5c55\u793a\u9891\u7387\u57df\u4e2d\u7684\u4fe1\u606f\u3002    \u4e8c\u503c\u56fe\u50cf\u7684\u7279\u70b9\uff1a\u867d\u7136\u539f\u59cb\u56fe\u50cf\u662f\u4e8c\u503c\u7684\uff08\u53ea\u6709\u9ed1\u767d\u4e24\u79cd\u989c\u8272\uff09\uff0c\u4f46\u5728\u9891\u7387\u57df\u4e2d\uff0c\u5b83\u5305\u542b\u4e86\u5404\u79cd\u9891\u7387\u7684\u4fe1\u606f\uff0c\u8fd9\u4e9b\u4fe1\u606f\u9700\u8981\u7528\u8fde\u7eed\u7684\u7070\u5ea6\u7ea7\u6765\u51c6\u786e\u8868\u793a\u3002\u5373\u4f7f\u8f93\u5165\u662f\u4e8c\u503c\u56fe\u50cf\uff0c\u7ecf\u8fc7\u5085\u91cc\u53f6\u53d8\u6362\u540e\u5f97\u5230\u7684\u9891\u8c31\u4e5f\u4e0d\u662f\u7b80\u5355\u7684\u4e8c\u503c\u5206\u5e03\uff0c\u800c\u662f\u590d\u6742\u7684\u591a\u7ea7\u7070\u5ea6\u6a21\u5f0f\u3002</li> </ol> <p>\u9898\u76ee</p> <p>1.1 \u4e00\u5e45\u4e8c\u503c\u56fe\u50cf\u7684\u5085\u91cc\u53f6\u53d8\u6362\u9891\u8c31\u662f(B )</p> <p>A\uff0e\u4e00\u5e45\u4e8c\u503c\u56fe\u50cf\uff1b \u4e00\u5e45\u7070\u5ea6\u56fe\u50cf\uff1b \u4e00\u5e45\u590d\u6570\u56fe\u50cf\uff1b\u4e00\u5e45\u5f69\u8272\u56fe\u50cf\u3002 1.2 \u5bf9\u4e8e\u4f4e\u901a\u548c\u9ad8\u901a\u5df4\u7279\u6c83\u65af\u6ee4\u6ce2\u5668\u53d9\u8ff0\u4e0d\u6b63\u786e\u7684\u662f(A )</p> <p>\u5747\u6709\u76f8\u540c\u7684\u622a\u6b62\u9891\u7387\uff1b\u5747\u80fd\u51cf\u5f31\u632f\u94c3\u6548\u5e94\uff1b\u5904\u7406\u540e\u7684\u56fe\u50cf\u5747\u6bd4\u4f4e\u901a\u548c\u9ad8\u901a\u5904\u7406\u7684\u8981\u5149\u6ed1\u4e00\u4e9b ; \u90fd\u53ef\u4ee5\u6d88\u9664\u865a\u5047\u8f6e\u5ed3</p> <p>1.3 \u60f3\u8981\u964d\u4f4e\u56fe\u50cf\u4e2d\u7684\u566a\u58f0\uff0c\u4e0b\u5217\u9891\u57df\u8fd0\u7b97\u4e2d\u7684\uff08 C\uff09\u6548\u679c\u597d\u4e00\u4e9b\u3002</p> <p></p> <p>1.4 \u4e0b\u9762\u8bf4\u6cd5\u6b63\u786e\u7684\u662f (B )</p> <p>A.\u57fa\u4e8e\u50cf\u7d20\u7684\u56fe\u50cf\u589e\u5f3a\u65b9\u6cd5\u662f\u4e00\u79cd\u7ebf\u6027\u7070\u5ea6\u53d8\u6362</p> <p>B.\u57fa\u4e8e\u50cf\u7d20\u7684\u56fe\u50cf\u589e\u5f3a\u65b9\u6cd5\u662f\u57fa\u4e8e\u7a7a\u95f4\u57df\u7684\u56fe\u50cf\u589e\u5f3a\u65b9\u6cd5\u7684\u4e00\u79cd</p> <p>C.\u57fa\u4e8e\u9891\u57df\u7684\u56fe\u50cf\u589e\u5f3a\u662f\u7531\u4e8e\u5e38\u7528\u5230\u5085\u91cc\u53f6\u53d8\u6362\u548c\u5085\u91cc\u53f6\u53cd\u53d8\u6362\uff0c\u6240\u4ee5\u603b\u6bd4\u57fa\u4e8e\u56fe\u50cf\u57df\u7684\u65b9 \u6cd5\u8ba1\u7b97\u590d\u6742\u6027\u9ad8</p> <p>B.\u57fa\u4e8e\u9891\u57df\u7684\u56fe\u50cf\u589e\u5f3a\u65b9\u6cd5\u6bd4\u57fa\u4e8e\u7a7a\u57df\u7684\u56fe\u50cf\u589e\u5f3a\u6548\u679c\u597d</p> <p>1.5 \u4e00\u5e45\u7070\u5ea6\u56fe\u50cf\u8fdb\u884c\u4e8c\u7ef4\u7684\u79bb\u6563\u5085\u91cc\u53f6\u53d8\u6362\u540e\u7684\u9891\u8c31\u56fe\u4e2d\uff0c\u6700\u4eae\u7684\u90e8\u5206\u5bf9\u5e94\u7740\u539f\u59cb\u56fe\u50cf\u7684 ( B )</p> <p>A.\u5feb\u53d8\u5316\u91cf;B. \u6162\u53d8\u5316\u91cf; C.\u6c34\u5e73\u53d8\u6362\u91cf; D.\u5782\u76f4\u53d8\u6362\u91cf</p> <p>1.6 \u56fe\u50cf\u6ee4\u6ce2\u7684\u65b9\u6cd5\u6309\u5904\u7406\u57df\u53ef\u5206\u4e3a         \u7a7a\u95f4\u6ee4\u6ce2              \u548c   \u65f6\u95f4\u6ee4\u6ce2                   \u3002</p> <p>1.7 \u56fe\u50cf\u9510\u5316\u9664\u4e86\u5728\u7a7a\u95f4\u57df\u8fdb\u884c\u5916\uff0c\u4e5f\u53ef\u4ee5\u5728        \u65f6\u95f4\u57df            \u8fdb\u884c\u3002</p> <p>1.8 \u6839\u636e\u5085\u91cc\u53f6\u53d8\u6362 \u7684       \u53ef\u5206\u79bb              \u7279\u6027 \uff0c\u53ef\u5c06\u4e8c\u7ef4\u5085\u91cc \u53f6\u53d8\u6362\u5206\u89e3\u6210 \u4e24\u4e2a\u4e00\u7ef4\u5085\u91cc\u53f6\u53d8\u6362 \u6765\u505a\u3002\u56fe\u50cf\u7684\u5085\u91cc\u53f6\u53d8\u6362\u9891\u8c31\u5b9a\u6027\u8868\u793a\u56fe\u50cf\u7684\u7eb9\u7406\u5206\u5e03\u7279\u5f81\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u82e5\u56fe\u50cf\u7684\u7eb9\u7406\u5206 \u5e03  \u7a00\u758f             \uff0c\u5219\u4f4e\u9891\u5206\u91cf\u591a\uff0c\u53cd\u4e4b\u82e5 \u5bc6\u96c6          \uff0c\u5219\u9ad8\u9891\u5206\u91cf\u591a\u3002</p> <p>1.9 \u4f4e\u901a\u6ee4\u6ce2\u662f\u4f7f   \u9ad8\u9891\u5206\u91cf           \u53d7\u5230\u6291\u5236\u800c\u8ba9\u4f4e\u9891\u5206\u91cf\u987a\u5229\u901a\u8fc7\uff0c\u4ece\u800c\u8ba9              \u987a\u5229\u901a\u8fc7\uff0c\u4ece \u800c\u5b9e\u73b0\u56fe\u50cf\u5e73\u6ed1\u3002</p> <p>1.10  \u5e38 \u7528 \u7684 \u4e09 \u79cd \u4f4e \u901a \u6ee4 \u6ce2 \u5668 \u4e3a           \u7406\u60f3\u4f4e\u901a\u6ee4\u6ce2\u5668\uff0c\u5df4\u7279\u6c83\u601d\u4f4e\u901a\u6ee4\u6ce2\u5668\uff0c\u9ad8\u65af\u4f4e\u901a\u6ee4\u6ce2\u5668</p> <p>1.11 \u5728\u9891\u57df\u6ee4\u6ce2\u4e2d\uff0c\u4fdd\u7559\u56fe\u50cf\u7684\u4f4e\u9891\u90e8\u5206\u6291\u5236\u9ad8\u9891\u90e8\u5206\u7684\u5904\u7406\u79f0\u4e3a       \u4f4e\u901a        \uff0c\u8d77\u5230 \u5e73\u6ed1\u4f5c\u7528\u3002</p> <p>1.12 \u4f7f\u7528\u6ee4\u6ce2\u5668  \u9ad8\u901a\u6ee4\u6ce2\u5668               \u53ef\u4ee5\u5b9e\u73b0\u56fe\u50cf\u7684\u9510\u5316\uff0c\u4f7f\u7528       \u4f4e\u901a        \u6ee4\u6ce2\u5668\u53ef\u4ee5 \u5b9e\u73b0\u56fe\u50cf\u7684\u5e73\u6ed1\u5904\u7406\u3002</p> <p>1.13 \u7a7a\u57df\u6ee4\u6ce2\u5668\u548c\u9891\u57df\u6ee4\u6ce2\u5668\u4e4b\u95f4\u6709\u4ec0\u4e48\u5bf9\u5e94\u5173\u7cfb\uff1f</p> <p>\u4f4e\u901a\u548c\u5e73\u6ed1\u7b49\u4ef7\uff0c\u9ad8\u901a\u548c\u9510\u5316\u7b49\u4ef7</p> <p>\u7a7a\u95f4\u57df\u4e58\u6cd5\u53ef\u4ee5\u901a\u8fc7\u9891\u7387\u57df\u5377\u79ef\u5f97\u5230</p> <p>\u7a7a\u95f4\u57df\u548c\u9891\u7387\u57df\u7684\u6ee4\u6ce2\u5668\u7ec4\u6210\u4e86\u5085\u91cc\u53f6\u53d8\u6362\u5bf9\uff0c\u53ef\u4ee5\u8fdb\u884c\u76f8\u4e92\u8f6c\u6362</p>"},{"location":"TEST/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/#_13","title":"\u56fe\u50cf\u7684\u590d\u539f\u548c\u91cd\u5efa","text":""},{"location":"TEST/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/#_14","title":"\u56fe\u50cf\u9000\u5316\u4e0e\u590d\u539f\u7684\u6a21\u578b","text":"<p>\u56fe\u50cf\u590d\u539f\u76ee\u7684\uff1a\u5728\u4e8e\u6d88\u9664\u548c\u51cf\u8f7b\u5728\u56fe\u50cf\u83b7\u53d6\u53ca\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u9020\u6210\u56fe\u50cf\u54c1\u8d28\u4e0b\u964d\u7684\u73b0\u8c61\uff0c\u6062\u590d\u56fe\u50cf\u672c\u6765\u9762\u76ee</p> <p>\u5178\u578b\u7684\u56fe\u50cf\u590d\u539f\u662f\u6839\u636e\u56fe\u50cf\u7684\u9000\u5316\u7684\u5148\u9a8c\u77e5\u8bc6\u5efa\u7acb\u4e00\u4e2a\u9000\u5316\u6a21\u578b\uff0c\u4ee5\u6b64\u6a21\u578b\u4e3a\u57fa\u7840\uff0c\u91c7\u7528\u5404\u79cd\u53cd\u9000\u5316\u5904\u7406\u65b9\u6cd5\uff0c\u4f7f\u5f97\u590d\u539f\u540e\u7684\u56fe\u50cf\u7b26\u5408\u67d0\u4e9b\u6807\u51c6\uff0c\u8d28\u91cf\u5f97\u5230\u6539\u5584\u3002</p> <p>\u548c\u56fe\u50cf\u589e\u5f3a\u7684\u4e0d\u540c\uff1a\u56fe\u50cf\u589e\u5f3a\u662f\u4e00\u4e2a\u4e3b\u89c2\u8fc7\u7a0b\uff0c\u800c\u56fe\u50cf\u590d\u539f\u662f\u4e00\u4e2a\u5ba2\u89c2\u8fc7\u7a0b\uff1b\u56fe\u50cf\u589e\u5f3a\u662f\u4e00\u79cd\u5bf9\u6bd4\u5ea6\u62c9\u4f38\uff0c\u800c\u56fe\u50cf\u590d\u539f\u8ffd\u6c42\u6062\u590d\u539f\u59cb\u56fe\u50cf\u7684\u6700\u4f18\u503c</p> <p>\u56fe\u50cf\u7684\u566a\u58f0\u9020\u6210\u4e86\u56fe\u50cf\u7684\u9000\u5316\uff0c\u5e38\u89c1\u7684\u566a\u58f0\u5982\u4e0b\uff1a</p> <p></p> <ul> <li>\u9ad8\u65af\u566a\u58f0\uff1a\u7b26\u5408\u9ad8\u65af\u5206\u5e03\uff0c\u6765\u6e90\u4e8e\u7535\u5b50\u7535\u8def\u566a\u58f0\uff0c\u6216\u8005\u4f4e\u7167\u660e\u5ea6\u6216\u8005\u9ad8\u6e29</li> <li>\u745e\u5229\u566a\u58f0\uff1a\u8ddd\u79bb\u539f\u70b9\u4f4d\u79fb\u662fa,\u51fd\u6570\u56fe\u50cf\u5411\u53f3\u53d8\u5f62\uff0c\u5bf9\u7279\u5f81\u5316\u566a\u58f0\u6709\u7528</li> <li>\u4f3d\u9a6c\u566a\u58f0\uff1a\u53c8\u79f0\u7231\u5c14\u5170\u566a\u58f0\uff0c\u7528\u4e8e\u6fc0\u5149\u6210\u50cf</li> <li>\u6307\u6570\u5206\u5e03\uff1a\u53cd\u51fd\u6570\u56fe\u50cf</li> <li>\u5747\u5300\u5206\u5e03\uff1a\u6a21\u62df\u968f\u673a\u6570\u751f\u6210\u5668</li> <li>\u8109\u51b2\u5206\u5e03\uff1a\u6709\u5355\u6781\u548c\u53cc\u6781\u4e4b\u5206\uff0c\u5176\u4e2d\u53cc\u6781\u79f0\u4e3a\u6912\u76d0\u566a\u58f0\u3002\u8d1f\u8109\u51b2\u662f\u9ed1\u70b9\uff0c\u6b63\u8109\u51b2\u662f\u767d\u70b9\u3002\u7528\u4e8e\u6210\u50cf\u7684\u77ed\u6682\u505c\u7559\uff0c\u5982\u9519\u8bef\u7684\u5f00\u5173\u64cd\u4f5c</li> <li>\u5468\u671f\u566a\u58f0\uff1a\u662f\u5728\u56fe\u50cf\u83b7\u53d6\u4e2d\u4ece\u7535\u529b\u6216\u8005\u673a\u7535\u5e72\u6270\u4e2d\u4ea7\u751f *</li> </ul>"},{"location":"TEST/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/#_15","title":"\u56fe\u50cf\u590d\u539f","text":"<p>\u7a7a\u95f4\u6ee4\u6ce2</p> <ul> <li>\u5747\u503c\u6ee4\u6ce2\u5668</li> <li>\u987a\u5e8f\u7edf\u8ba1\u6ee4\u6ce2\u5668\uff1a\u6700\u503c\uff0c\u4e2d\u503c\u6ee4\u6ce2\u5668</li> <li>\u4e2d\u503c\u6ee4\u6ce2\u5668\uff1a\u5bf9\u8109\u51b2\u566a\u58f0\u6548\u679c\u5f88\u597d</li> <li>\u6700\u503c\u6ee4\u6ce2\u5668\uff1a\u5bf9\u6912\u76d0\u566a\u58f0\u6548\u679c\u5f88\u597d</li> <li>\u4e2d\u70b9\u6ee4\u6ce2\u5668\uff1a\u5bf9\u9ad8\u65af\u6216\u8005\u5747\u5300\u968f\u673a\u5206\u5e03\u566a\u58f0\u6548\u679c\u5f88\u597d</li> <li>\u81ea\u9002\u5e94\u6ee4\u6ce2\u5668</li> </ul> <p>\u9891\u57df\u6ee4\u6ce2</p> <ul> <li>\u5e26\u963b\u6ee4\u6ce2\u5668</li> <li>\u4e09\u79cd\uff1a\u7406\u60f3\u5e26\u963b\u6ee4\u6ce2\u5668\uff0c\u5df4\u7279\u6c83\u601d\u5e26\u963b\u6ee4\u6ce2\u5668\uff0c\u9ad8\u65af\u5e26\u963b\u6ee4\u6ce2\u5668</li> <li>\u5e26\u901a\u6ee4\u6ce2\u5668</li> <li>\u548c\u5e26\u963b\u6ee4\u6ce2\u5668\u5bf9\u5e94\u4f4d\u7f6e\u51fd\u6570\u548c\u4e3a1</li> <li>\u901a\u5e38\u4e0d\u4f1a\u76f4\u63a5\u6267\u884c\uff0c\u800c\u662f\u5728\u4e00\u5e45\u56fe\u50cf\u4e2d\u5c4f\u853d\u9009\u4e2d\u7684\u9891\u6bb5\u5bfc\u81f4\u7684\u6548\u679c\u65f6\u975e\u5e38\u6709\u7528</li> <li>\u9677\u6ce2\u6ee4\u6ce2\u5668</li> <li>\u5fc5\u987b\u5173\u4e8e\u539f\u70b9\u5bf9\u79f0</li> <li>\u6700\u4f73\u9677\u6ce2\u6ee4\u6ce2\u5668</li> </ul> <p>\u5e38\u89c1\u9000\u5316\u6a21\u578b</p> <ul> <li>\u7ebf\u6027\uff1a\\(h(m,n) = 1 / d\\), \u662f\u7531\u4e8e\u76ee\u6807\u548c\u6210\u50cf\u7cfb\u7edf\u4e4b\u95f4\u7684\u76f8\u5bf9\u5300\u901f\u76f4\u7ebf\u8fd0\u52a8\u800c\u9020\u6210</li> <li>\u6563\u7126\u9000\u5316\u51fd\u6570\uff1a\\(h(u,v) = 1 / (\\pi R^{2})\\), \u5747\u5300\u5206\u5e03\u7684\u5149\u6591</li> <li>\u9ad8\u65af\u9000\u5316\u51fd\u6570</li> </ul> <p>\u4e09\u79cd\u8bc6\u522b\u9000\u5316\u51fd\u6570\u7684\u65b9\u6cd5\uff1a\u56fe\u50cf\u89c2\u5bdf\u6cd5\uff0c\u5b9e\u9a8c\u4f30\u8ba1\u6cd5\uff0c\u6570\u5b66\u5efa\u6a21\u6cd5</p> <p>\u6a21\u578b\u6d41\u7a0b\u5982\u4e0b\uff1a</p> <p></p> <p>\u5982\u679c\\(H(u,v)\\)\u5f88\u5c0f\uff0c\u5219\u6062\u590d\u53ea\u80fd\u5728\u9891\u57df\u4e2d\u5fc3\u8303\u56f4\u8fdb\u884c\u3002\u4e5f\u5c31\u662f\u4e00\u822c\u60c5\u51b5\u4e0b\u9006\u5411\u6ee4\u6ce2\u5668\u5e76\u4e0d\u6b63\u597d\u662f\\(1/H(u,v)\\)\uff0c\u800c\u662f\u67d0\u4e2a\u51fd\u6570\\(M(u,v)\\)\uff0c\u79f0\u4e3a\u6062\u590d\u8f6c\u79fb\u51fd\u6570\uff0c\u901a\u5e38\uff0c\u53ef\u4ee5\u5c06\u5176\u8868\u793a\u4e3a\u7528H\u8868\u793a\u7684\u5206\u6bb5\u51fd\u6570\uff1a</p> \\[ M(u,v)=\\left\\{ \\begin{matrix}   k;if H(u,v) &lt; d\\\\   1/H(u,v);other \\end{matrix} \\right. \\] <p>\u9006\u6ee4\u6ce2(\u590d\u539f)\u7684\u75c5\u6001\u6027</p> <p>\u4e0a\u8ff0\u5f0f\u5b50\\(g(x,y) = H(x,y) * f(x,y),\\)\u539f\u7406\u4e0a\u6062\u590d\u8fc7\u7a0b\u76f4\u63a5\u9664\u4ee5H(x,y)\u5373\u53ef\uff0c\u4f46\u662fH(x,y)\u53ef\u80fd\u67090\u503c\uff0c\u5bfc\u81f4\u51fa\u73b0\u5947\u5f02\u3002\u6240\u4ee5\u9006\u5411\u6ee4\u6ce2\u5668\u5fc5\u987b\u52a0\u4e0a\u67d0\u79cd\u7ea6\u675f\uff0c\u4f7f\u5f97\u9006\u5411\u6ee4\u6ce2\u5668(\u6062\u590d\u8f6c\u79fb\u51fd\u6570)\u7684\u6027\u8d28\u6bd4\u8f83\u597d\uff0c \u4e5f\u79f0\u4e3a\u6709\u7ea6\u675f\u590d\u539f\u6cd5\uff0c\u53ef\u4ee5\u89e3\u51b3\u75c5\u6001\u95ee\u9898\u3002</p> <p>\u6709\u7ea6\u675f\u590d\u539f\u6cd5</p> <ul> <li>\u80fd\u91cf\u7ea6\u675f\u590d\u539f\uff1a\u80fd\u91cf\u4fdd\u6301\u4e0d\u53d8</li> <li>\u5e73\u6ed1\u7ea6\u675f\u590d\u539f</li> <li>\u5747\u65b9\u8bef\u5dee\u6700\u5c0f\u6ee4\u6ce2\uff1a\u7ef4\u7eb3\u6ee4\u6ce2</li> </ul> <p>\u9898\u76ee</p> <p>1\u3001 \u56fe\u50cf\u9000\u5316\u5b9a\u4e49 \u662f\u6307\u56fe\u50cf\u5728\u5f62\u6210\uff0c\u4f20\u8f93\u548c\u8bb0\u5f55\u8fc7\u7a0b\u4e2d\uff0c\u7531\u4e8e\u6210\u50cf\u7cfb\u7edf\uff0c\u4f20\u8f93\u4ecb\u8d28\u548c\u8bbe\u5907\u7684\u4e0d\u5b8c\u5584\uff0c\u4f7f\u5f97\u56fe\u50cf\u7684\u8d28\u91cf\u53d8\u574f</p> <p>2\u3001 \u56fe\u50cf\u9000\u5316\u7684\u5178\u578b\u8868\u73b0 \u7531\u4e8e\u6210\u50cf\u7cfb\u7edf\u7279\u6027\u9020\u6210\u7684\u7578\u53d8</p> <p>\u566a\u58f0\u548c\u76f8\u5bf9\u8fd0\u52a8\u9020\u6210\u7684\u6a21\u7cca \u6e90\u81ea\u7535\u8def\u548c\u5316\u5b66\u56e0\u7d20\u7684\u566a\u58f0</p> <p>3\u3001 \u56fe\u50cf\u9000\u5316\u7684\u539f\u56e0 \u3002\u3002\u3002</p> <p>4\u3001 \u56fe\u50cf\u590d\u539f\u7684\u5b9a\u4e49 \u6839\u636e\u56fe\u50cf\u9000\u5316\u7684\u5148\u9a8c\u77e5\u8bc6\uff0c\u5efa\u7acb\u4e00\u4e2a\u9000\u5316\u6a21\u578b\uff0c\u5e76\u4ee5\u6b64\u6a21\u578b\u4e3a\u57fa\u7840\uff0c\u91c7\u7528\u5404\u79cd\u9006\u5411\u9000\u5316\u6280\u672f\u5bf9\u7406\u60f3\u56fe\u50cf\u8fdb\u884c\u66f4\u65b0\uff0c\u4f7f\u5f97\u56fe\u50cf\u8d28\u91cf\u5f97\u5230\u6539\u5584</p> <p>5\u3001 \u56fe\u50cf\u589e\u5f3a\u4e0e\u56fe\u50cf\u590d\u539f\u7684\u8054\u7cfb\u4e0e\u533a\u522b \u56fe\u50cf\u589e\u5f3a\u662f\u4e00\u4e2a\u4e3b\u89c2\u8fc7\u7a0b\uff0c\u800c\u56fe\u50cf\u590d\u539f\u662f\u4e00\u4e2a\u5ba2\u89c2\u8fc7\u7a0b\uff1b\u56fe\u50cf\u589e\u5f3a\u662f\u4e00\u79cd\u5bf9\u6bd4\u5ea6\u62c9\u4f38\uff0c\u800c\u56fe\u50cf\u590d\u539f\u8ffd\u6c42\u6062\u590d\u539f\u59cb\u56fe\u50cf\u7684\u6700\u4f18\u503c \u5982\u679c\u56fe\u50cf\u5df2\u7ecf\u9000\u5316\uff0c\u5219\u9700\u8981\u5148\u590d\u539f\uff0c\u518d\u589e\u5f3a</p> <p>6\u3001 \u6839\u636e\u7edf\u8ba1\u7279\u6027\uff0c\u566a\u58f0\u6709\u54ea\u4e9b\u91cd\u8981\u7c7b\u578b\uff1f \u9ad8\u65af\uff0c\u745e\u5229\uff0c\u4f3d\u9a6c\uff0c\u6307\u6570\u5206\u5e03\uff0c\u5747\u5300\u5206\u5e03\uff0c\u8109\u51b2</p> <p>7\u3001 \u5982\u4f55\u786e\u5b9a\u566a\u58f0\u7c7b\u578b\uff1f \u5468\u671f\u6027\u566a\u58f0\u53ef\u4ee5\u901a\u8fc7\u68c0\u6d4b\u56fe\u50cf\u7684\u5085\u91cc\u53f6\u8c31\u6765\u4f30\u8ba1</p> <p>\u566a\u58f0\u7684PDF\u53c2\u6570\u4e00\u822c\u4ece\u4f20\u611f\u5668\u4e2d\u8bf4\u660e\u5f97\u5230 8\u3001 \u5468\u671f\u566a\u58f0\u7684\u53c2\u6570\u5982\u4f55\u786e\u5b9a \u5468\u671f\u6027\u566a\u58f0\u53ef\u4ee5\u901a\u8fc7\u68c0\u6d4b\u56fe\u50cf\u7684\u5085\u91cc\u53f6\u8c31\u6765\u4f30\u8ba1</p> <p>9\u3001 \u5982\u4f55\u4f30\u8ba1\u9000\u5316\u51fd\u6570 \u89c2\u5bdf\u6cd5\uff0c\u5b9e\u9a8c\u6cd5\uff0c\u6570\u5b66\u5efa\u6a21\u6cd5</p> <p>10\u3001\u7b80\u8ff0\u56fe\u50cf\u9000\u5316\u6a21\u578b \u753b\u56fe</p> <p>11\u3001\u5747\u503c\u6ee4\u6ce2\u5668\u90fd\u6709\u90a3\u4e9b\u7c7b\u578b\uff1f</p> <p>12\u3001\u7ef4\u7eb3\u6ee4\u6ce2\u5668\u901a\u5e38\u7528\u4e8e (B)</p> <p>A.\u53bb\u566a   B.\u590d\u539f\u56fe\u50cf  C.\u51cf\u5c0f\u56fe\u50cf\u52a8\u6001\u8303\u56f4  D.\u5e73\u6ed1\u56fe\u50cf</p> <p>13\u3001\u4e00\u5e45\u56fe\u50cf\u4e2d\uff0c\u6709\u4e00\u79cd\u566a\u58f0\u5728\u56fe\u50cf\u83b7\u53d6\u4e2d\u4ece\u7535\u529b\u6216\u673a\u7535\u5e72\u6270\u4e2d\u4ea7\u751f\u7684\uff0c\u800c\u4e14\u8fd9 \u662f\u552f\u4e00\u7684\u4e00\u79cd\u7a7a\u95f4\u4f9d\u8d56\u578b\u566a\u58f0\uff0c\u8fd9\u79cd\u566a\u58f0\u662f(C)</p> <p>A\uff0e\u9ad8\u65af\u566a\u58f0    B.\u4f3d\u9a6c\u566a\u58f0    C.\u5468\u671f\u566a\u58f0    D.\u8109\u51b2\u566a\u58f0</p> <p>14\u3001\u4f7f\u7528\u540c\u6001\u6ee4\u6ce2\u65b9\u6cd5\u8fdb\u884c\u56fe\u50cf\u589e\u5f3a\u65f6\uff0c\u4e0d\u5305\u542b\u4ee5\u4e0b\u54ea\u4e2a\u8fc7\u7a0b\uff1f(C)</p> <p>A\uff0e\u901a\u8fc7\u5bf9\u56fe\u50cf\u53d6\u5bf9\u6570\uff0c\u5c06\u56fe\u50cf\u6a21\u578b\u4e2d\u7684\u7167\u5ea6\u5206\u91cf\u4e0e\u53cd\u5c04\u5206\u91cf\u7684\u4e58\u79ef\u9879\u5206\u5f00</p> <p>B\uff0e\u5c06\u5bf9\u6570\u56fe\u50cf\u901a\u8fc7\u5085\u91cc\u53f6\u53d8\u6362\u5230\u9891\u57df\uff0c\u5728\u9891\u57df\u9009\u62e9\u5408\u9002\u7684\u6ee4\u6ce2\u51fd\u6570\uff0c\u8fdb\u884c \u51cf\u5f31\u4f4e\u9891\u548c\u52a0\u5f3a\u9ad8\u9891\u7684\u6ee4\u6ce2</p> <p>C\uff0e\u8ba1\u7b97\u56fe\u50cf\u4e2d\u5404\u4e2a\u7070\u5ea6\u503c\u5f97\u7d2f\u79ef\u5206\u5e03\u6982\u7387</p> <p>D\uff0e\u5bf9\u6ee4\u6ce2\u7ed3\u679c\u8fdb\u884c\u5085\u91cc\u53f6\u9006\u53d8\u6362\u548c\u5bf9\u6570\u9006\u8fd0\u7b97</p>"},{"location":"TEST/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/#_16","title":"\u5f69\u8272\u56fe\u50cf\u5904\u7406","text":"<p>\u4e3a\u4f55\u5f69\u8272\u56fe\u50cf\u8981RGB\u5230HSI\u7684\u6a21\u578b\u8f6c\u6362\u624d\u80fd\u5904\u7406</p> <p>\u5982\u679c\u76f4\u63a5\u5bf9RGB\u6a21\u578b\u4e2d\u7684RGB\u5206\u91cf\u8fdb\u884c\u5904\u7406\uff0c\u5f88\u53ef\u80fd\u76f4\u63a5\u5f15\u8d77\u4e09\u4e2a\u91cf\u4e0d\u540c\u7a0b\u5ea6\u7684\u53d8\u5316\uff0c\u7531RGB\u6a21\u578b\u63cf\u8ff0\u7684\u5904\u7406\u56fe\u50cf\u5c31\u4f1a\u51fa\u73b0\u8272\u5dee\u95ee\u9898\uff0c\u989c\u8272\u4e0a\u53ef\u80fd\u4f1a\u6709\u4e25\u91cd\u5931\u771f\u3002\u56e0\u6b64\uff0c\u4eba\u4eec\u5728\u6b64\u57fa\u7840\u4e0a\u63d0\u51fa\u4e86HSI\u6a21\u578b\uff0c\u5b83\u7684\u51fa\u73b0\u4f7f\u5f97\u4fdd\u6301\u5f69\u8272\u65e0\u5931\u771f\u60c5\u51b5\u4e0b\u7684\u5904\u7406\u56fe\u50cf\u53d8\u4e3a\u53ef\u80fd</p> <p>\u901a\u8fc7\u5148\u5c06RGB\u6a21\u578b\u8f6c\u6362\u4e3aHSI\u6a21\u578b\uff0c\u5f97\u5230\u76f8\u5173\u6027\u8f83\u5c0f\u7684\u8272\u8c03\uff0c\u9971\u548c\u5ea6\uff0c\u4eae\u5ea6\uff0c\u7136\u540e\u5bf9\u5176\u4e2d\u7684\u4eae\u5ea6\u5206\u91cf\u8fdb\u884c\u5904\u7406\uff0c\u518d\u8f6c\u5316\u4e3aRGB\uff0c\u5219\u53ef\u4ee5\u907f\u514d\u76f4\u63a5\u5bf9RGB\u5206\u91cf\u8fdb\u884c\u5904\u7406\u800c\u9020\u6210\u7684\u5931\u771f\u3002</p> <p>RGB\u5149\u6ed1\u548cHSI\u5149\u6ed1\u7684\u533a\u522b</p> <ul> <li>RGB\u5149\u6ed1\u548cHSI\u5149\u6ed1\u7684\u4e3b\u8981\u533a\u522b\u5728\u4e8e\u5b83\u4eec\u6240\u57fa\u4e8e\u7684\u989c\u8272\u6a21\u578b\u4e0d\u540c\uff0c\u4ee5\u53ca\u5728\u56fe\u50cf\u5904\u7406\u4e2d\u7684\u5e94\u7528\u573a\u666f\u5dee\u5f02\uff1a   \u989c\u8272\u6a21\u578b\u4e0d\u540c\uff1a   RGB\u6a21\u578b\uff1a\u57fa\u4e8e\u7ea2\u3001\u7eff\u3001\u84dd\u4e09\u539f\u8272\u7684\u52a0\u8272\u6df7\u8272\u539f\u7406\u3002\u5b83\u76f4\u63a5\u5bf9\u5e94\u4e8e\u663e\u793a\u5668\u7684\u53d1\u5149\u7279\u6027\uff0c\u662f\u8bbe\u5907\u4f9d\u8d56\u7684\u989c\u8272\u6a21\u578b\u3002   HSI\u6a21\u578b\uff1a\u57fa\u4e8e\u8272\u8c03\uff08Hue\uff09\u3001\u9971\u548c\u5ea6\uff08Saturation\uff09\u548c\u5f3a\u5ea6\uff08Intensity\uff09\u3002\u66f4\u63a5\u8fd1\u4eba\u7c7b\u89c6\u89c9\u7cfb\u7edf\u5bf9\u989c\u8272\u7684\u611f\u77e5\u65b9\u5f0f\uff0c\u5176\u4e2d\u8272\u8c03\u8868\u793a\u989c\u8272\u7684\u79cd\u7c7b\uff0c\u9971\u548c\u5ea6\u8868\u793a\u989c\u8272\u7684\u7eaf\u5ea6\uff0c\u5f3a\u5ea6\u8868\u793a\u989c\u8272\u7684\u660e\u4eae\u7a0b\u5ea6\u3002   \u5149\u6ed1\u6548\u679c\u5dee\u5f02\uff1a   RGB\u5149\u6ed1\uff1a\u5728RGB\u7a7a\u95f4\u4e2d\u8fdb\u884c\u5149\u6ed1\u5904\u7406\u65f6\uff0c\u4e3b\u8981\u9488\u5bf9\u4e09\u4e2a\u5206\u91cf\uff08R\u3001G\u3001B\uff09\u5206\u522b\u6216\u8054\u5408\u8fdb\u884c\u6ee4\u6ce2\u64cd\u4f5c\u3002\u7531\u4e8eRGB\u5404\u5206\u91cf\u4e4b\u95f4\u7684\u76f8\u5173\u6027\u8f83\u5f31\uff0c\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u53ef\u80fd\u4f1a\u5bfc\u81f4\u989c\u8272\u5931\u771f\u3002   HSI\u5149\u6ed1\uff1a\u5728HSI\u7a7a\u95f4\u4e2d\u8fdb\u884c\u5149\u6ed1\u5904\u7406\u65f6\uff0c\u901a\u5e38\u53ea\u5bf9\u5f3a\u5ea6\uff08I\uff09\u5206\u91cf\u8fdb\u884c\u6ee4\u6ce2\uff0c\u800c\u4fdd\u6301\u8272\u8c03\uff08H\uff09\u548c\u9971\u548c\u5ea6\uff08S\uff09\u4e0d\u53d8\u3002\u8fd9\u6837\u53ef\u4ee5\u5728\u51cf\u5c11\u566a\u58f0\u7684\u540c\u65f6\u8f83\u597d\u5730\u4fdd\u7559\u989c\u8272\u4fe1\u606f\uff0c\u907f\u514d\u51fa\u73b0\u989c\u8272\u5931\u771f\u7684\u95ee\u9898\u3002   \u5e94\u7528\u573a\u666f\uff1a   RGB\u5149\u6ed1\uff1a\u9002\u7528\u4e8e\u9700\u8981\u4e25\u683c\u4fdd\u6301\u539f\u59cb\u8272\u5f69\u6bd4\u4f8b\u7684\u573a\u666f\uff0c\u5982\u533b\u5b66\u56fe\u50cf\u5904\u7406\u7b49\u3002   HSI\u5149\u6ed1\uff1a\u66f4\u9002\u5408\u4e8e\u81ea\u7136\u56fe\u50cf\u5904\u7406\uff0c\u5c24\u5176\u662f\u5f53\u5e0c\u671b\u5728\u53bb\u566a\u7684\u540c\u65f6\u5c3d\u91cf\u4fdd\u6301\u56fe\u50cf\u7684\u989c\u8272\u7279\u5f81\u65f6\u3002</li> </ul> <p>\u4e3a\u4ec0\u4e48\u8981\u7814\u7a76\u5f69\u8272\u56fe\u50cf\u5904\u7406</p> <ul> <li>\u7b26\u5408\u4eba\u7c7b\u7684\u89c6\u89c9\u7279\u70b9\uff0c\u4eba\u7c7b\u53ef\u4ee5\u5206\u522b\u51e0\u5343\u79cd\u989c\u8272\u8272\u8c03\u548c\u4eae\u5ea6\uff0c\u4f46\u662f\u53ea\u80fd\u5206\u8fa8\u51e0\u5341\u79cd\u7070\u5ea6\u5c42\u6b21</li> <li>\u4e0d\u4ec5\u53ef\u4ee5\u7b80\u5316\u76ee\u6807\u7269\u7684\u533a\u5206\uff0c\u8fd8\u53ef\u4ee5\u6839\u636e\u76ee\u6807\u7684\u989c\u8272\u7279\u5f81\u8fdb\u884c\u76ee\u6807\u8bc6\u522b</li> </ul>"},{"location":"TEST/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/#_17","title":"\u56fe\u50cf\u5206\u5272","text":""},{"location":"TEST/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/#_18","title":"\u5b9a\u4e49\u548c\u4f9d\u636e","text":"<p>\u5b9a\u4e49\uff1a\u5c06\u56fe\u50cf\u533a\u57df\u5206\u5272\u4e3a\u6ee1\u8db3\u67d0\u4e9b\u6761\u4ef6\u7684\u5b50\u533a\u57df</p> <p>\u7279\u6027\uff1a\u5b8c\u5907\u6027\uff0c\u72ec\u7acb\u6027\uff0c\u5355\u4e00\u6027\uff0c\u4e92\u65a5\u6027\uff0c\u8fde\u901a\u6027</p> <p>\u7070\u5ea6\u56fe\u50cf\u5206\u5272\u7684\u4f9d\u636e</p> <p>\u57fa\u4e8e\u50cf\u7d20\u7070\u5ea6\u503c\u7684\u4e24\u4e2a\u57fa\u672c\u7279\u6027</p> <ul> <li>\u4e0d\u8fde\u7eed\u6027\uff1a\u533a\u57df\u4e4b\u95f4\uff0c\u8fb9\u7f18\u50cf\u7d20\u5177\u6709\u4e0d\u8fde\u7eed\u6027\uff0c\u56e0\u6b64\u5148\u627e\u5230\u4ea4\u754c\u8fb9\u754c\uff0c\u518d\u786e\u5b9a\u533a\u57df\u3002</li> <li>\u76f8\u4f3c\u6027\uff1a\u533a\u57df\u5185\u90e8\uff0c\u540c\u4e00\u533a\u57df\u5185\u50cf\u7d20\u4e00\u822c\u5177\u6709\u7070\u5ea6\u76f8\u4f3c\u6027\uff0c\u636e\u6b64\u627e\u5230\u7070\u5ea6\u76f8\u4f3c\u533a\u57df\uff0c\u5916\u8f6e\u5ed3\u5c31\u662f\u5bf9\u8c61\u8fb9\u7f18</li> </ul>"},{"location":"TEST/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/#_19","title":"\u5206\u5272\u65b9\u6cd5","text":"<p>\u5206\u7c7b\uff1a\u6839\u636e\u7070\u5ea6\u7684\u4e0d\u8fde\u7eed\u6027\u548c\u76f8\u4f3c\u6027\uff0c\u5206\u4e3a\u4e24\u7c7b\uff1a</p> <ul> <li>\u8fb9\u7f18\u68c0\u6d4b\u6cd5</li> <li>\u533a\u57df\u751f\u6210\u6cd5</li> <li> <p>\u70b9\u68c0\u6d4b</p> </li> <li> <p>\u4f7f\u7528\u7a7a\u95f4\u57df\u7684\u9ad8\u901a\u6ee4\u6ce2\u5668\u6765\u68c0\u6d4b\u5b64\u7acb\u70b9</p> </li> <li>\u6bd4\u5982\u548c\u6a21\u677f\u8fdb\u884c\u8fd0\u7b97\u4e4b\u540e\uff0c\u67e5\u770b\u503c\u7684\u548c\u662f\u5426\u5927\u4e8e\u9608\u503c</li> <li> <p>\u7ebf\u68c0\u6d4b</p> </li> <li> <p>\u901a\u8fc7\u8ba1\u7b97\u6bd4\u8f83\u5178\u578b\u7684\u6a21\u677f\u7684\u8ba1\u7b97\u503c\uff0c\u786e\u5b9a\u67d0\u4e2a\u70b9\u662f\u5426\u5728\u67d0\u4e2a\u65b9\u5411\u7684\u7ebf\u4e0a</p> </li> <li>\u6a21\u677f\u7684\u7cfb\u6570\u548c\u4e3a0\uff0c\u800c\u611f\u5174\u8da3\u7684\u65b9\u5411\u7684\u7cfb\u6570\u503c\u8f83\u5927</li> <li> <p>\u8fb9\u7f18\u68c0\u6d4b</p> </li> <li> <p>\u57fa\u672c\u601d\u60f3\uff1a\u8ba1\u7b97\u5c40\u90e8\u5fae\u5206\u7b97\u5b50</p> </li> <li>\u53ef\u5206\u4e3a\u4e24\u6b65\uff1a<ul> <li>\u5bf9\u56fe\u50cf\u4e2d\u7684\u6bcf\u4e00\u4e2a\u50cf\u7d20\u65bd\u52a0\u68c0\u6d4b\u7b97\u5b50</li> <li>\u6839\u636e\u4e8b\u5148\u786e\u5b9a\u7684\u51c6\u5219\uff0c\u5bf9\u68c0\u6d4b\u7b97\u5b50\u7684\u8f93\u51fa\u8fdb\u884c\u5224\u5b9a\uff0c\u786e\u5b9a\u8be5\u50cf\u7d20\u70b9\u662f\u5426\u4e3a\u8fb9\u7f18\u70b9</li> </ul> </li> <li>\u5229\u7528\u4e00\u9636\u5bfc\u6570\u68c0\u6d4b\u8fb9\u7f18\u70b9\uff1a\u68af\u5ea6\u7b97\u5b50\u6cd5<ul> <li>Roberts\u68af\u5ea6\u7b97\u5b50\u6cd5(4\u70b9\u5dee\u5206\u6cd5)\uff1a\u7279\u70b9\u5c31\u662f\u75284\u70b9\u8fdb\u884c\u5dee\u5206\uff0c\u6c42\u5f97\u68af\u5ea6\uff0c\u65b9\u6cd5\u7b80\u5355\u3002\u7f3a\u70b9\u662f\u5bf9\u566a\u58f0\u654f\u611f\uff0c\u5e38\u7528\u4e8e\u4e0d\u542b\u566a\u58f0\u7684\u56fe\u50cf\u8fb9\u7f18\u70b9\u68c0\u6d4b</li> <li>\u5e73\u6ed1\u68af\u5ea6\u7b97\u5b50\u6cd5(\u5e73\u5747\u5dee\u5206\u6cd5)\uff1a</li> <li>Prewitt\u68af\u5ea6\u7b97\u5b50\u6cd5\uff1a\u5148\u6c42\u5e73\u5747\uff0c\u540e\u6c42\u68af\u5ea6</li> <li>Sobel\u7b97\u5b50\u6cd5\uff1a\u52a0\u6743\u5e73\u5747\u5dee\u5206\u6cd5</li> </ul> </li> <li>\u62c9\u666e\u62c9\u65af\u7b97\u5b50\u6cd5<ul> <li>LoG\u7b97\u5b50\uff1a\u9ad8\u65af\u578b\u62c9\u666e\u62c9\u65af\u7b97\u5b50</li> </ul> </li> </ul> <p>\u56fe\u50cf\u5904\u7406\u6a21\u677f\u7684\u7279\u70b9\uff1a</p> <ol> <li>\u5e73\u6ed1\u6a21\u677f\u7279\u70b9\uff1a\u6a21\u677f\u5185\u7cfb\u6570\u5168\u4e3a\u6b63\uff0c\u7cfb\u6570\u548c\u4e3a1</li> <li>\u8fb9\u7f18\u68c0\u6d4b\u6a21\u677f\u7279\u70b9\uff1a\u7cfb\u6570\u6709\u6b63\u6709\u8d1f\uff0c\u8868\u793a\u5dee\u5206\u8fd0\u7b97\uff0c\u7cfb\u6570\u548c\u4e3a0\u3002\u5bf9\u4e00\u822c\u56fe\u50cf\uff0c\u5904\u7406\u4e4b\u540e\u662f\u8fb9\u7f18\u70b9</li> <li>\u9510\u5316\u6a21\u677f\u7279\u70b9\uff1a\u540c\u6837\u6709\u6b63\u6709\u8d1f\uff0c\u7cfb\u6570\u548c\u4e3a1</li> </ol> <p>\u970d\u592b\u53d8\u6362</p> <ul> <li>\u95ee\u9898\u63d0\u51fa\uff1a\u5728\u8fb9\u754c\u70b9\u96c6\u6536\u96c6\u4e4b\u540e\uff0c\u9700\u8981\u8fdb\u884c\u8fde\u63a5\uff0c\u5f62\u6210\u5b8c\u6574\u7684\u8fb9\u754c</li> <li>\u529f\u80fd\uff1a\u53ef\u4ee5\u5c06\u5f85\u68c0\u6d4b\u66f2\u7ebf\u5bf9\u5e94\u50cf\u7d20\u95f4\u7684\u6574\u4f53\u5173\u7cfb\u68c0\u6d4b\u51fa\u5df2\u77e5\u5f62\u72b6\u7684\u66f2\u7ebf\uff0c\u5e76\u7528\u53c2\u6570\u65b9\u7a0b\u63cf\u8ff0\u51fa\u6765</li> <li>\u539f\u7406\uff1a\u56fe\u50cf\u7a7a\u95f4\u5f85\u68c0\u6d4b\u76f4\u7ebf -&gt; \u53c2\u6570\u7a7a\u95f4\u5cf0\u503c\u70b9</li> <li>\u5bf9\u5e94\u5173\u7cfb\uff1a</li> <li>\u56fe\u50cf\u4e2d\u7684\u4e00\u6761\u76f4\u7ebf\uff0c\u5bf9\u5e94\u53c2\u6570\u7a7a\u95f4\u4e2d\u7684\u4e00\u4e2a\u70b9</li> <li>\u56fe\u50cf\u7a7a\u95f4\u4e2d\u7684\u4e00\u4e2a\u70b9\uff0c\u5bf9\u5e94\u53c2\u6570\u7a7a\u95f4\u4e2d\u7684\u4e00\u6761\u6b63\u5f26\u66f2\u7ebf</li> <li>\u56fe\u50cf\u7a7a\u95f4\u4e2d\u7684\u4e00\u6761\u76f4\u7ebf\u7684\u591a\u4e2a\u5171\u7ebf\u70b9\uff0c\u6620\u5c04\u4e3a\u53c2\u6570\u7a7a\u95f4\u76f8\u4ea4\u4e8e\u4e00\u70b9\u7684\u591a\u6761\u6b63\u5f26\u66f2\u7ebf</li> <li>\u8fb9\u7f18\u8fde\u63a5\uff1a</li> <li>\u8ba1\u7b97\u56fe\u50cf\u68af\u5ea6-&gt;\u8bbe\u95e8\u9650-&gt;\u4e8c\u503c\u56fe\u50cf</li> <li>\u5728\u53c2\u6570\u5e73\u9762\u7ec6\u5206</li> <li>\u5bf9\u50cf\u7d20\u9ad8\u5ea6\u96c6\u4e2d\u7684\u5730\u65b9\uff0c\u68c0\u9a8c\u5176\u7d2f\u52a0\u5668\u5355\u5143\u6570\u76ee</li> <li>\u68c0\u9a8c\u9009\u62e9\u7684\u5355\u5143\u4e2d\u7684\u50cf\u7d20\u4e4b\u95f4\u7684\u5173\u7cfb\uff0c\u5982\u679c\u4e24\u70b9\u4e4b\u95f4\u8ddd\u79bb\u8d85\u8fc7\u67d0\u4e00\u95e8\u9650\uff0c\u5219\u4e0d\u8fde\u7eed</li> </ul> <p>\u95e8\u9650\u5316\u5206\u5272</p> <p>\u9996\u5148\u662f\u7b80\u5355\u7684\u5355\u503c\u9608\u503c\uff0c\u5728\u6570\u5b66\u4e0a\u63cf\u8ff0\u4e3a\\(g(x,y) = if(f(x,y)&gt;T) 1 else 0\\),\u5c06\u50cf\u7d20\u8fdb\u884c\u8f6c\u6362\uff0c\u4e3a\u4e8c\u503c\u56fe\u50cf</p> <p>\u4e5f\u53ef\u4ee5\u901a\u8fc7\u591a\u4e2a\u95e8\u65b9\u6cd5\u5c06\u56fe\u50cf\u5206\u5272\u4e3a\u4e0d\u540c\u7684\u76ee\u6807\u7269\u548c\u80cc\u666f\u533a\u57df</p> <p>\u533a\u57df\u5206\u5272\u6cd5</p> <p>\u539f\u7406\uff1a\u5229\u7528\u540c\u4e00\u533a\u57df\u5185\u7070\u5ea6\u503c\u76f8\u4f3c\u6027\uff0c\u5c06\u76f8\u4f3c\u7684\u533a\u57df\u5408\u5e76\uff0c\u628a\u4e0d\u76f8\u4f3c\u7684\u533a\u57df\u5408\u5e76\u3002\u5e38\u89c1\u7684\u5206\u7c7b\u6709\uff1a\u533a\u57df\u751f\u957f\u6cd5\uff0c\u5408\u5e76\u6cd5\uff0c\u7a7a\u95f4\u805a\u7c7b\u6cd5</p> <ul> <li>\u533a\u57df\u751f\u957f\u6cd5(\u7c7b\u4f3c\u805a\u7c7b)\uff1a</li> <li>\u539f\u7406\uff1a\u57fa\u4e8e\u76f8\u4f3c\u6027\u8fdb\u884c\u8d2a\u5fc3\u6269\u5f20\uff0c\u76f4\u5230\u4e0d\u80fd\u5408\u5e76\u5219\u505c\u6b62</li> <li>\u6b65\u9aa4\uff1a<ul> <li>\u786e\u5b9a\u8981\u5206\u5272\u533a\u57df\u7684\u6570\u76ee\uff0c\u5e76\u5728\u6bcf\u4e2a\u533a\u57df\u9009\u62e9\u4e00\u4e2a\u4ee3\u8868\u70b9</li> <li>\u9009\u62e9\u6709\u610f\u4e49\u7684\u7279\u5f81\u548c\u90bb\u57df\u65b9\u5f0f</li> <li>\u786e\u5b9a\u76f8\u4f3c\u6027\u51c6\u5219</li> </ul> </li> </ul> <p>\u76f4\u63a5\u770b\u9898</p> <ol> <li>\u5728\u5b9e\u9645\u91c7\u7528\u970d\u592b\u53d8\u6362\u68c0\u6d4b\u68c0\u6d4b\u76f4\u7ebf\u65f6\uff0c\u4e3a\u4ec0\u4e48\u4e0d\u91c7\u7528y = kx+ b\u7684\u8868\u793a\u5f62\u5f0f\uff1f    \u4f7f\u7528y = kx + b\u8868\u793a\u4e00\u6761\u76f4\u7ebf\u5e26\u6765\u7684\u95ee\u9898\u662f\uff0c\u5f53\u76f4\u7ebf\u63a5\u8fd1\u4e8e\u5782\u76f4\u7684\u65f6\u5019\uff0c\u76f4\u7ebf\u659c\u7387\u4f1a\u6210\u4e3a\u65e0\u7a77\u5927\uff0c\u9700\u8981\u5206\u7c7b\u8ba8\u8bba\u3002\u53ef\u4ee5\u4f7f\u7528\u6781\u5750\u6807\u76f4\u7ebf\u65b9\u7a0b\u89e3\u51b3</li> <li>\u4e3a\u4ec0\u4e48\u8981\u8fdb\u884c\u8fb9\u7f18\u8ddf\u8e2a\uff1f    \u5728\u4e00\u4e9b\u573a\u5408\uff0c\u4ec5\u4ec5\u5f97\u5230\u8fb9\u7f18\u70b9\u662f\u4e0d\u591f\u7684\uff0c\u7531\u4e8e\u566a\u58f0\u548c\u5149\u7167\u7b49\u56e0\u7d20\u4f1a\u4f7f\u5f97\u539f\u672c\u7684\u8fb9\u7f18\u51fa\u73b0\u95f4\u65ad\u73b0\u8c61\u3002    \u56e0\u6b64\uff0c\u5728\u4f7f\u7528\u8fb9\u7f18\u68c0\u6d4b\u7b97\u6cd5\u540e\uff0c\u6709\u5fc5\u8981\u91c7\u7528\u8fb9\u7f18\u8ffd\u8e2a\u7b97\u6cd5\u6765\u8f6c\u6362\u4e3a\u6709\u7528\u4fe1\u606f</li> <li>\u9608\u503c\u5206\u5272\u6280\u672f\u9002\u7528\u4e8e\u4ec0\u4e48\u573a\u666f\u4e0b\u7684\u56fe\u50cf\u5206\u5272\uff1f    \u7070\u5ea6\u9608\u503c\u5206\u5272\u6982\u5ff5 + \u901a\u5e38\u7528\u4e8e\u56fe\u50cf\u4e2d\u76ee\u6807\u548c\u80cc\u666f\u5177\u6709\u4e0d\u540c\u7684\u7070\u5ea6\u96c6\u5408\uff1a\u76ee\u6807\u7070\u5ea6\u96c6\u5408\u548c\u80cc\u666f\u7070\u5ea6\u96c6\u5408</li> <li>\u8fb9\u7f18\u68c0\u6d4b\u7684\u7406\u8bba\u4f9d\u636e\u662f\u4ec0\u4e48\uff1f\u6709\u54ea\u4e9b\u65b9\u6cd5\uff1f    \u8fb9\u7f18\u68c0\u6d4b\u57fa\u4e8e\u5e45\u5ea6\u4e0d\u8fde\u7eed\u6027\u8fdb\u884c\u7684\u5206\u5272\u65b9\u6cd5\uff0c\u901a\u5e38\u91c7\u7528\u5dee\u5206\uff0c\u68af\u5ea6\uff0c\u62c9\u666e\u62c9\u65af\u7b97\u5b50\u7b49\u9ad8\u901a\u6ee4\u6ce2\u65b9\u6cd5\u8fdb\u884c\u68c0\u6d4b</li> <li>\u6bd4\u8f83 Sobel \u7b97\u5b50\u3001Roberts \u7b97\u5b50\u3001LoG \u7b97\u5b50\u8fdb\u884c\u6027\u80fd\u6bd4\u8f83\u3002    \u5176\u4e2dRoberts\u7b97\u5b50\u7684\u5b9a\u4f4d\u7cbe\u5ea6\u9ad8\uff0c\u4f46\u5bb9\u6613\u4e22\u5931\u90e8\u5206\u8fb9\u7f18\uff0c\u6297\u566a\u80fd\u529b\u5dee\uff0c\u9002\u7528\u4e8e\u4f4e\u566a\u58f0\uff0c\u8fb9\u7f18\u9661\u5ced\u7684\u96c6\u5408    \u800cSobel\u7b97\u5b50\uff0c\u5bf9\u56fe\u50cf\u5148\u5e73\u6ed1\u518d\u6c42\u68af\u5ea6\uff0c\u6240\u4ee5\u53ef\u4ee5\u62b5\u6297\u4e00\u5b9a\u566a\u58f0\uff0c\u4f46\u662f\u4e0d\u80fd\u6392\u9664\u68c0\u6d4b\u7ed3\u679c\u7684\u865a\u62df\u8fb9\u7f18\uff0c\u5bb9\u6613\u5448\u73b0\u591a\u50cf\u7d20\u5bbd\u5ea6    LoG\u63d0\u9ad8\u4e86\u6297\u566a\u58f0\u80fd\u529b\uff0c\u4f46\u662f\u5c06\u9510\u5316\u7684\u8fb9\u7f18\u4fe1\u606f\u5e73\u6ed1\u4e86\uff0c\u751a\u81f3\u65e0\u6cd5\u68c0\u6d4b\u5230</li> <li>\u4e00\u4e2a\u597d\u7684\u8fb9\u7f18\u68c0\u6d4b\u7b97\u5b50\u5e94\u5177\u6709\u4e09\u4e2a\u6307\u6807?    \u4f4e\u5931\u8bef\u7387\uff1a\u51cf\u5c11\u8fb9\u7f18\u4e22\u5931\uff0c\u4e5f\u8981\u51cf\u5c11\u8bef\u5224    \u9ad8\u4f4d\u7f6e\u7cbe\u5ea6\uff1a\u8fb9\u7f18\u51fa\u73b0\u5728\u6b63\u786e\u7684\u4f4d\u7f6e\u4e0a    \u5bf9\u6bcf\u4e2a\u4f4d\u7f6e\u6709\u552f\u4e00\u76f8\u5e94</li> <li>\u970d\u592b\u53d8\u6362\u7684\u76ee\u7684\u3001\u601d\u60f3\u548c\u539f\u7406\u5206\u522b\u4e3a\u4ec0\u4e48\uff1f    \u539f\u7406\uff1a\u70b9-\u7ebf\u7684\u5bf9\u5076\u6027</li> <li>\u970d\u592b\u53d8\u6362\u7684\u6027\u8d28\uff1f    \u4e09\u4e2a\u6620\u5c04</li> <li>\u4ec0\u4e48\u662f\u533a\u57df\u5206\u5272\uff0c\u5e38\u7528\u7684\u533a\u57df\u5206\u5272\u65b9\u6cd5\u6709\u54ea\u4e9b\uff1f    \u6839\u636e\u4e8b\u5148\u786e\u5b9a\u7684\u76f8\u4f3c\u6027\u51c6\u5219\uff0c\u76f4\u63a5\u53d6\u51fa\u82e5\u5e72\u7279\u5f81\u76f8\u8fd1\u6216\u8005\u76f8\u540c\u7684\u50cf\u7d20\u7ec4\u6210\u533a\u57df\u3002\u5e38\u89c1\u7684\u5206\u7c7b\u6709\uff1a\u533a\u57df\u751f\u957f\u6cd5\uff0c\u5408\u5e76\u6cd5\uff0c\u7a7a\u95f4\u805a\u7c7b\u6cd5</li> <li>\u533a\u57df\u589e\u957f\u65b9\u6cd5\u7684\u539f\u7406\u548c\u6b65\u9aa4\uff1f     \u89c1\u4e0a</li> <li>\u57fa\u672c\u7684\u751f\u957f\u51c6\u5219\u548c\u65b9\u6cd5\u5305\u62ec\u54ea\u4e9b\uff1f     \u57fa\u4e8e\u533a\u57df\u7070\u5ea6\u5dee\uff0c\u57fa\u4e8e\u533a\u57df\u5185\u7070\u5ea6\u7edf\u8ba1\u5206\u5e03\u6027\u8d28\u548c\u57fa\u4e8e\u533a\u57df\u5f62\u72b6</li> </ol> <p>\u56fe\u50cf\u52a0\u51cf\u4e58\u9664\u7684matlab\u4f2a\u4ee3\u7801</p> ApacheConf<pre><code>% \u8bfb\u53d6\u4e24\u5f20\u76f8\u540c\u5927\u5c0f\u7684\u7070\u5ea6\u56fe\u50cf\nimg1 = imread('image1.jpg');\nimg2 = imread('image2.jpg');\n\n% \u5c06\u56fe\u50cf\u8f6c\u6362\u4e3a\u7070\u5ea6\u56fe\u50cf\uff08\u5982\u679c\u5b83\u4eec\u4e0d\u662f\u7070\u5ea6\u56fe\u50cf\uff09\nif size(img1, 3) == 3\n    img1 = rgb2gray(img1);\nend\nif size(img2, 3) == 3\n    img2 = rgb2gray(img2);\nend\n\n% \u786e\u4fdd\u4e24\u5f20\u56fe\u50cf\u5177\u6709\u76f8\u540c\u7684\u5927\u5c0f\nif size(img1) ~= size(img2)\n    error('\u4e24\u5f20\u56fe\u50cf\u7684\u5927\u5c0f\u5fc5\u987b\u76f8\u540c');\nend\n\n% \u83b7\u53d6\u56fe\u50cf\u7684\u5c3a\u5bf8\n[rows, cols] = size(img1);\n\n% \u56fe\u50cf\u52a0\u6cd5\nimgAdd = zeros(rows, cols, 'uint8');\nfor i = 1:rows\n    for j = 1:cols\n        % \u9632\u6b62\u6ea2\u51fa\n        imgAdd(i, j) = min(255, img1(i, j) + img2(i, j));\n    end\nend\n% \u663e\u793a\u52a0\u6cd5\u7ed3\u679c\nfigure;\nimshow(imgAdd);\ntitle('\u56fe\u50cf\u52a0\u6cd5');\n\n% \u56fe\u50cf\u51cf\u6cd5\nimgSubtract = zeros(rows, cols, 'uint8');\nfor i = 1:rows\n    for j = 1:cols\n        % \u9632\u6b62\u4e0b\u6ea2\n        imgSubtract(i, j) = max(0, img1(i, j) - img2(i, j));\n    end\nend\n% \u663e\u793a\u51cf\u6cd5\u7ed3\u679c\nfigure;\nimshow(imgSubtract);\ntitle('\u56fe\u50cf\u51cf\u6cd5');\n\n% \u56fe\u50cf\u4e58\u6cd5\nimgMultiply = zeros(rows, cols, 'uint8');\nfor i = 1:rows\n    for j = 1:cols\n        % \u9632\u6b62\u6ea2\u51fa\n        imgMultiply(i, j) = min(255, round(img1(i, j) * img2(i, j) / 255));\n    end\nend\n% \u663e\u793a\u4e58\u6cd5\u7ed3\u679c\nfigure;\nimshow(imgMultiply);\ntitle('\u56fe\u50cf\u4e58\u6cd5');\n\n% \u56fe\u50cf\u9664\u6cd5\nimgDivide = zeros(rows, cols, 'uint8');\nfor i = 1:rows\n    for j = 1:cols\n        % \u907f\u514d\u9664\u4ee5\u96f6\n        if img2(i, j) == 0\n            imgDivide(i, j) = 255; % \u6216\u8005\u5176\u4ed6\u9002\u5f53\u7684\u503c\n        else\n            imgDivide(i, j) = round(img1(i, j) * 255 / img2(i, j));\n        end\n    end\nend\n% \u663e\u793a\u9664\u6cd5\u7ed3\u679c\nfigure;\nimshow(imgDivide);\ntitle('\u56fe\u50cf\u9664\u6cd5');\n</code></pre> ApacheConf<pre><code>% \u8bfb\u53d6\u56fe\u50cf\nimg = imread('image.jpg');\n\n% \u5c06\u56fe\u50cf\u8f6c\u6362\u4e3a\u7070\u5ea6\u56fe\u50cf\uff08\u5982\u679c\u5b83\u662f\u5f69\u8272\u56fe\u50cf\uff09\nif size(img, 3) == 3\n    img = rgb2gray(img);\nend\n\n% \u83b7\u53d6\u56fe\u50cf\u7684\u5c3a\u5bf8\n[rows, cols] = size(img);\n\n% \u5bf9\u6570\u53d8\u6362\nc_log = 255 / log(1 + max(img(:)));\nimgLog = zeros(rows, cols, 'uint8');\nfor i = 1:rows\n    for j = 1:cols\n        imgLog(i, j) = c_log * log(1 + img(i, j));\n    end\nend\n\n% \u663e\u793a\u5bf9\u6570\u53d8\u6362\u540e\u7684\u56fe\u50cf\nfigure;\nimshow(imgLog);\ntitle('\u5bf9\u6570\u53d8\u6362\u540e\u7684\u56fe\u50cf');\n\n% \u4f3d\u9a6c\u53d8\u6362\ngamma = 0.5; % \u4f3d\u9a6c\u503c\uff0c\u53ef\u4ee5\u6839\u636e\u9700\u8981\u8c03\u6574\nc_gamma = 1; % \u5e38\u6570\uff0c\u901a\u5e38\u4e3a1\nimgGamma = zeros(rows, cols, 'uint8');\nfor i = 1:rows\n    for j = 1:cols\n        imgGamma(i, j) = c_gamma * (img(i, j) / 255) ^ gamma * 255;\n    end\nend\n\n% \u663e\u793a\u4f3d\u9a6c\u53d8\u6362\u540e\u7684\u56fe\u50cf\nfigure;\nimshow(imgGamma);\ntitle('\u4f3d\u9a6c\u53d8\u6362\u540e\u7684\u56fe\u50cf');\n</code></pre>"},{"location":"TEST/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/","title":"\u8f6f\u4ef6\u5de5\u7a0b","text":""},{"location":"TEST/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/#_2","title":"\u7b2c\u4e00\u7ae0 \u8f6f\u4ef6\u5de5\u7a0b\u6982\u8ff0","text":"<ol> <li> <p>\u4ec0\u4e48\u662f\u8f6f\u4ef6\uff1f\u8f6f\u4ef6\u548c\u7a0b\u5e8f\u7684\u533a\u522b\u662f\u4ec0\u4e48\uff1f</p> <ol> <li>\u8f6f\u4ef6\u5b9a\u4e49\uff1a\u7a0b\u5e8f\u3001\u6570\u636e\u4ee5\u53ca\u5f00\u53d1\u3001\u4f7f\u7528\u548c\u7ef4\u62a4\u7a0b\u5e8f\u9700\u8981\u7684\u6240\u6709\u6587\u6863\u7684\u96c6\u5408\uff0c\u4e5f\u6709\u5b9a\u4e49\u4e3a    \u8ba1\u7b97\u673a\u7a0b\u5e8f\u3001\u65b9\u6cd5\u3001\u89c4\u5219\u3001\u76f8\u5173\u7684\u6587\u6863\u8d44\u6599\u4ee5\u53ca\u5728\u8ba1\u7b97\u673a\u4e0a\u8fd0\u884c\u7a0b\u5e8f\u65f6\u6240\u5fc5\u987b\u7684\u6570\u636e</li> <li>\u7a0b\u5e8f\uff1a\u9488\u5bf9\u67d0\u4e2a\u7279\u5b9a\u95ee\u9898\u800c\u7528\u7a0b\u5e8f\u8bbe\u8ba1\u8bed\u8a00\u63cf\u8ff0\u7684\u9002\u5408\u8ba1\u7b97\u673a\u5904\u7406\u7684\u8bed\u53e5\u5e8f\u5217</li> <li>\u65b9\u6cd5\u548c\u89c4\u5219\uff1a\u901a\u5e38\u5728\u6587\u6863\u4e2d\u8bf4\u660e\uff0c\u5e76\u5728\u7a0b\u5e8f\u4e2d\u5b9e\u73b0</li> <li>\u6587\u6863\uff1a\u8f6f\u4ef6\u5f00\u53d1\u6d3b\u52a8\u7684\u8bb0\u5f55\uff0c\u4f9b\u4eba\u4eec\u4ea4\u6d41\u548c\u7814\u7a76</li> <li> <p>\u8003\u4ec0\u4e48\u662f\u8f6f\u4ef6\u751f\u5b58\u5468\u671f\uff1f\u5212\u5206\u751f\u5b58\u5468\u671f\u7684\u4e3b\u8981\u539f\u5219\u662f\u4ec0\u4e48\uff1f</p> </li> <li> <p>\u5b9a\u4e49:\u67d0\u4e2a\u8f6f\u4ef6\u4ece\u88ab\u63d0\u51fa\u6765\u5e76\u7740\u624b\u5b9e\u73b0\uff0c\u6700\u540e\u5230\u8be5\u8f6f\u4ef6\u62a5\u5e9f\u6216\u8005\u505c\u6b62\u4e3a\u6b62</p> </li> <li>\u6709\u4e09\u4e2a\u9636\u6bb5\uff1a\u8ba1\u5212\u65f6\u671f\uff0c\u5f00\u53d1\u65f6\u671f\uff0c\u8fd0\u7ef4\u65f6\u671f</li> <li>\u8ba1\u5212\u65f6\u671f\uff1a<ol> <li>\u95ee\u9898\u5b9a\u4e49</li> <li>\u53ef\u884c\u6027\u7814\u7a76</li> </ol> </li> <li>\u8f6f\u4ef6\u5f00\u53d1\u65f6\u671f\uff1a<ol> <li>\u9700\u6c42\u5206\u6790</li> <li>\u6574\u4f53\u8bbe\u8ba1</li> <li>\u8be6\u7ec6\u8bbe\u8ba1</li> <li>\u7f16\u7801</li> <li>\u6d4b\u8bd5</li> </ol> </li> <li>\u8f6f\u4ef6\u8fd0\u7ef4\u65f6\u671f</li> <li> <p>\u4f55\u8c13\u9762\u5411\u5bf9\u8c61\u8f6f\u4ef6\u5de5\u7a0b\uff1f\u7b80\u8ff0\u5b83\u548c\u4f20\u7edf\u8f6f\u4ef6\u5de5\u7a0b\u7684\u533a\u522b\u4e0e\u8054\u7cfb\u3002</p> </li> <li> <p>\u9762\u5411\u5bf9\u8c61\u7684\u5f00\u53d1\u91cd\u70b9\u653e\u5728\u8f6f\u4ef6\u7684\u751f\u5b58\u5468\u671f\u7684\u5206\u6790\u9636\u6bb5\uff0c\u5efa\u7acb\u4e86\u5bf9\u8c61\u6a21\u578b</p> </li> <li>\u7279\u70b9\uff1a\u5f00\u53d1\u9636\u6bb5\u6a21\u7cca\uff0c\u5f00\u53d1\u8fc7\u7a0b\u9010\u6b65\u6c42\u7cbe\uff0c\u5f00\u53d1\u6d3b\u52a8\u53cd\u590d\u8fed\u4ee3</li> <li>\u533a\u522b\u548c\u8054\u7cfb<ol> <li>\u533a\u522b\uff1a\u4f20\u7edf\u7684\u662f\u9762\u5411\u8fc7\u7a0b\uff0c\u800c\u9762\u5411\u5bf9\u8c61\u4e0d\u518d\u662f\u4ee5\u529f\u80fd\u5212\u5206\u4e3a\u5bfc\u5411\uff0c\u800c\u662f\u4ee5\u5bf9\u8c61\u4f5c\u4e3a\u6574\u4e2a\u95ee\u9898\u7684\u5206\u6790\u4e2d\u5fc3</li> <li>\u8054\u7cfb\uff1a\u4e24\u8005\u90fd\u6709\u5206\u6790\uff0c\u8bbe\u8ba1\uff0c\u7f16\u7801\uff0c\u6d4b\u8bd5\u7b49\u73af\u8282\uff0c\u4f46\u662f\u5404\u4e2a\u9636\u6bb5\u7684\u5177\u4f53\u4efb\u52a1\u4e0d\u540c</li> </ol> </li> <li>\u9762\u5411\u5bf9\u8c61\u7684\u4e3b\u8981\u5185\u5bb9\uff1a\u5bf9\u8c61 + \u7c7b + \u96c6\u6210 + \u901a\u8fc7\u6d88\u606f\u5f7c\u6b64\u901a\u4fe1</li> <li>\u4ec0\u4e48\u662f\u8f6f\u4ef6\u751f\u5b58\u5468\u671f\u6a21\u578b\uff1f\u8bd5\u6bd4\u8f83\u672c\u7ae0\u4ecb\u7ecd\u7684\u56db\u79cd\u6a21\u578b\u7684\u4f18\u7f3a\u70b9\uff0c\u8bf4\u660e\u6bcf\u79cd\u6a21\u578b\u7684\u4f7f\u7528\u8303\u56f4\u3002</li> </ol> </li> </ol> \u6a21\u578b \u5185\u5bb9 \u7279\u70b9 \u7011\u5e03\u6a21\u578b \u4e5f\u53eb\u751f\u5b58\u6a21\u578b\uff0c\u6216\u8005\u7ebf\u6027\u987a\u5e8f\u6a21\u578b\uff0c\u5c06\u8f6f\u4ef6\u751f\u5b58\u5468\u671f\u5404\u4e2a\u6d3b\u52a8\u89c4\u5b9a\u4e3a\u7ebf\u6027\u987a\u5e8f\u8fde\u63a5\u7684\u82e5\u5e72\u6a21\u578b\u3002\u662f\u4ee5\u6587\u6863\u4e3a\u9a71\u52a8\uff0c\u9002\u5408\u9700\u6c42\u5f88\u660e\u786e\u7684\u8f6f\u4ef6\u5f00\u53d1 \u7ecf\u5178\uff0c\u9700\u6c42\u53d8\u5316\u4e0d\u5927\uff0c\u65e0\u98ce\u9669\u7ba1\u63a7 \u5feb\u901f\u539f\u578b\u6a21\u578b \u9996\u5148\u5feb\u901f\u5efa\u7acb\u4e00\u4e2a\u6a21\u578b\uff0c\u7136\u540e\u518d\u7528\u6237\u4f7f\u7528\u57fa\u7840\u4e0a\u8fdb\u884c\u8fed\u4ee3\u6539\u8fdb \u5feb\u901f\u83b7\u53d6\u7528\u6237\u9700\u6c42 \u589e\u91cf\u6a21\u578b \u4e5f\u53eb\u6e10\u589e\u6a21\u578b\uff0c\u662f\u7011\u5e03\u6a21\u578b\u548c\u5feb\u901f\u539f\u578b\u6a21\u578b\u7684\u7ed3\u5408\uff0c\u662f\u4e00\u79cd\u975e\u6574\u4f53\u5f00\u53d1\u7684\u6a21\u578b\uff0c\u628a\u8f6f\u4ef6\u62c6\u5206\u4e3a\u4e00\u7cfb\u5217\u589e\u91cf\u7ec4\u4ef6\uff0c\u5f00\u53d1\u4e00\u90e8\u5206\uff0c\u4f7f\u7528\u4e00\u90e8\u5206 \u7075\u6d3b\uff0c\u5141\u8bb8\u8f6f\u4ef6\u53d8\u5316\uff0c\u65e0\u98ce\u9669\u7ba1\u63a7 \u87ba\u65cb\u6a21\u578b \u52a0\u5165\u4e86\u98ce\u9669\u5206\u6790\uff0c\u5c06\u7011\u5e03\u548c\u589e\u91cf\u4e24\u79cd\u6a21\u578b\u7ed3\u5408\u8d77\u6765\uff0c\u662f\u4e00\u79cd\u98ce\u9669\u9a71\u52a8\u7684\u6a21\u578b \u52a0\u5165\u98ce\u9669\u5206\u6790"},{"location":"TEST/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/#_3","title":"\u7b2c\u4e8c\u7ae0 \u53ef\u884c\u6027\u7814\u7a76","text":"<ol> <li> <p>\u5728\u8f6f\u4ef6\u5f00\u53d1\u65e9\u671f\u9636\u6bb5\u4e3a\u4ec0\u4e48\u8981\u8fdb\u884c\u53ef\u884c\u6027\u7814\u7a76\uff1f\u53ef\u884c\u6027\u7814\u7a76\u7684\u4efb\u52a1\u662f\u4ec0\u4e48\uff1f\u5e94\u8be5\u4ece\u54ea\u51e0\u4e2a\u65b9\u9762\u7814\u7a76\u76ee\u6807\u7cfb\u7edf\u7684\u53ef\u884c\u6027\uff1f</p> <ol> <li>\u76ee\u7684\uff1a\u5c31\u662f\u7528\u6700\u5c0f\u7684\u4ee3\u4ef7\u5728\u5c3d\u53ef\u80fd\u77ed\u7684\u65f6\u95f4\u5185\u786e\u5b9a\u95ee\u9898\u80fd\u5426\u89e3\u51b3\u3002 2. \u4efb\u52a1\uff1a\u9996\u5148\u8fdb\u884c\u6982\u8981\u7684\u5206\u6790\u7814\u7a76\uff0c\u521d\u6b65\u786e\u5b9a\u9879\u76ee\u7684\u89c4\u6a21\u548c\u76ee\u6807\uff0c\u786e\u5b9a\u9879\u76ee\u7684\u7ea6\u675f\u548c\u9650\u5236\uff0c\u5206\u6790\u51e0\u79cd\u53ef\u80fd\u89e3\u6cd5\u7684\u5229\u5f0a\uff0c\u4ece\u800c\u5224\u65ad\u539f\u5b9a\u7cfb\u7edf\u7684\u76ee\u6807\u548c\u89c4\u6a21\u662f\u5426\u73b0\u5b9e\uff0c\u7cfb\u7edf\u5b8c\u6210\u4e4b\u540e\u5e26\u6765\u7684\u6536\u76ca\u662f\u5426\u503c\u5f97\u6295\u8d44\u5f00\u53d1\u8fd9\u4e2a\u7cfb\u7edf( \u6982\u8981\u7814\u7a76\uff0c\u786e\u5b9a\u89c4\u6a21\uff0c\u786e\u5b9a\u7ea6\u675f\uff0c\u8def\u5f84\u5206\u6790\uff0c\u8fdb\u884c\u5224\u65ad\uff0c\u786e\u5b9aROI)</li> <li> <p>\u6210\u672c-\u6548\u76ca\u5206\u6790\u53ef\u7528\u54ea\u4e9b\u6307\u6807\u8fdb\u884c\u5ea6\u91cf\uff1f</p> </li> <li> <p>\u57fa\u672c\u6982\u5ff5\uff1a    \u6210\u672c\u6536\u76ca\u5206\u6790\uff1a\u4ece\u7ecf\u6d4e\u89d2\u5ea6\u8003\u8651\u8f6f\u4ef6\u662f\u5426\u53ef\u884c    \u6210\u672c\uff1a\u5f00\u53d1\u6210\u672c\u548c\u8fd0\u7ef4\u6210\u672c</p> </li> <li>\u8d27\u5e01\u7684\u65f6\u95f4\u4ef7\u503c\uff1a\u8bbe\u5b58\u5165\u8d27\u5e01\\(p\\)\u5143\uff0c\u5e74\u5229\u7387\\(i\\)\uff0c\u5219n\u5e74\u540e\u53ef\u4ee5\u5f97\u5230\u7684\u94b1\\(F = p (1 + ni)\\)    ,\u5176\u4e2d\u4e0d\u8ba1\u7b97\u590d\u5229\u3002\u5219\u73b0\u5728\u7684\u4ef7\u503c\u4e3a\\(p = F/(1 + ni)\\).</li> <li>\u6295\u8d44\u56de\u6536\u671f\uff1a\u5c31\u662f\u662f\u7d2f\u79ef\u7684\u7ecf\u6d4e\u6548\u76ca\u7b49\u4e8e\u6700\u521d\u7684\u6295\u8d44\u8d39\u7528\u6240\u9700\u8981\u7684\u65f6\u95f4\u3002\u8d8a\u77ed\u8d8a\u503c\u5f97\u6295\u8d44\u3002</li> <li>\u7eaf\u6536\u5165\uff1a\u5c31\u662f\u5728\u6574\u4e2a\u751f\u5b58\u5468\u671f\u5185\u7cfb\u7edf\u7684\u7d2f\u79ef\u7ecf\u6d4e\u6548\u76ca(\u6298\u5408\u4e3a\u73b0\u5728\u503c)\uff0c\u4e0e\u6295\u8d44\u4e4b\u5dee\u3002\u5982\u679c&lt;=0\uff0c\u5219\u4e0d\u503c\u5f97\u6295\u8d44\u5f00\u53d1\u3002</li> <li>\u4f8b\u5b50\uff1a\u5047\u8bbe\u4e00\u4e2a\u5e93\u5b58\u7cfb\u7edf\u5f00\u53d1\u6210\u672c5000\u5143\uff0c\u800c\u7cfb\u7edf\u5efa\u6210\u4e4b\u540e\u6bcf\u5e74\u53ef\u4ee5\u8282\u77012500\u5143\uff0c5\u5e74\u4e00\u5171\u8282\u770112500\u5143\u3002</li> <li> \u5e74 \u5c06\u6765\u503c \\((1 + ni)\\) \u73b0\u5728\u503c \u7d2f\u79ef\u73b0\u5728\u503c 1 2500 1.08 2314.81 2314.81 2 2500 1.16 2155.17 4469.98 3 2500 1.24 2016.12 6486.10 4 2500 1.32 1893.94 8380.04 5 2500 1.40 1785.71 10165.75 </li> </ol> </li> </ol> <p>\u5219\u6295\u8d44\u56de\u6536\u671f\uff1a\u7cfb\u7edf\u5728\u4e24\u5e74\u53ef\u4ee5\u8282\u77014469.98\u5143\uff0c\u5269\u4e0b\u7684530.03\u53ef\u4ee5\u5728\u7b2c\u4e09\u5e74\u7684\\(530.03/2016.12 = 0.26\\)\u5e74\u91cc\u5b8c\u6210\uff0c\u6240\u4ee5\u6295\u8d44\u56de\u6536\u671f\uff1a2.26\u5e74</p> <p>\u7eaf\u6536\u5165\uff1a10165.75 - 5000 = 5165.75\u5143\u3002\u6838\u5fc3\u8981\u70b9\uff1a\u5168\u90e8\u8f6c\u6362\u4e3a\u73b0\u5728\u503c\u6765\u8ba1\u7b97 3. \u6709\u4eba\u8ba4\u4e3a\uff0c\u53ea\u61c2\u6280\u672f\u7684\u5206\u6790\u5458\u4e0d\u4e00\u5b9a\u80fd\u5706\u6ee1\u5b8c\u6210\u53ef\u884c\u6027\u7814\u7a76\u7684\u4efb\u52a1\u3002\u4f60\u540c\u610f\u8fd9\u79cd\u770b\u6cd5\u5417\uff1f\u4e3a\u4ec0\u4e48\uff1f</p> Text Only<pre><code>1. \u540c\u610f\uff0c\u56e0\u4e3a\u9664\u4e86\u6280\u672f\u53ef\u884c\u6027\u4e4b\u5916\uff0c\u8fd8\u5305\u62ec\u7ecf\u6d4e\u53ef\u884c\u6027\uff0c\u64cd\u4f5c\u53ef\u884c\u6027\uff0c\u793e\u4f1a\u65b9\u9762\u7684\u53ef\u884c\u6027\u7814\u7a76\uff0c\u800c\u53ea\u61c2\u6280\u672f\u7684\u5206\u6790\u5458\u4e0d\u4e00\u5b9a\u80fd\u5706\u6ee1\u5b8c\u6210\u8fd9\u4e9b\u4efb\u52a1\u3002\n</code></pre> <ol> <li> <p>\u5728\u4f8b2.2\u4e2d\uff0c\u628a\u6295\u8d44\u6539\u4e3a6000\u5143\uff0c\u6bcf\u5e74\u8282\u7ea6\u91d1\u989d\u6539\u4e3a2000\u5143\uff0c\u5e74\u5229\u7387\u4e3a6%\uff0c\u8bd5\u8ba1\u7b97\u6295\u8d44\u56de\u6536\u671f\u548c\u7eaf\u6536\u5165\u3002</p> <ol> <li>\u6295\u8d44\u56de\u62a5\u671f\uff1a3.39\u5e74</li> <li>\u7eaf\u6536\u5165\uff1a2518.78\u5143</li> </ol> </li> </ol>"},{"location":"TEST/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/#_4","title":"\u7b2c\u4e09\u7ae0 \u9700\u6c42\u5206\u6790","text":"<p>\u8003\u5927\u9898\uff1a\u7ed9\u9700\u6c42\uff0c\u753b\u51fa\u6570\u636e\u6d41\u56fe\uff1b\u4f2a\u4ee3\u7801\u8f6c\u6362\u4e3a\u5224\u5b9a\u6811\uff0c\u5224\u5b9a\u8868</p> <ol> <li> <p>\u4e3a\u4ec0\u4e48\u8981\u8fdb\u884c\u9700\u6c42\u5206\u6790\uff1f\u9700\u6c42\u5206\u6790\u8981\u7ecf\u8fc7\u54ea\u4e9b\u6b65\u9aa4\uff1f</p> <ol> <li>\u76ee\u7684:\u786e\u5b9a\u7cfb\u7edf\u5fc5\u987b\u5b8c\u6210\u54ea\u4e9b\u5de5\u4f5c\uff0c\u662f\u4e00\u4e2a\u4e25\u683c\u63cf\u8ff0\u7cfb\u7edf\u505a\u4ec0\u4e48\u7684\u8fc7\u7a0b</li> <li>\u6b65\u9aa4\uff1a<ol> <li>\u786e\u5b9a\u5bf9\u7cfb\u7edf\u7684\u7efc\u5408\u9700\u6c42<ol> <li>\u529f\u80fd\u9700\u6c42</li> <li>\u6027\u80fd\u9700\u6c42</li> <li>......</li> </ol> </li> <li>\u5206\u6790\u7cfb\u7edf\u7684\u6570\u636e\u9700\u6c42<ol> <li>\u5efa\u7acb\u6570\u636e\u6a21\u578b\uff1a\u5b9e\u4f53\u5173\u7cfb\u56fe\uff1aE-R\u56fe</li> <li>\u63cf\u8ff0\u6570\u636e\u7ed3\u6784\uff1a\u5c42\u6b21\u65b9\u6846\u56fe</li> </ol> </li> <li>\u5efa\u7acb\u8f6f\u4ef6\u7684\u903b\u8f91\u6a21\u578b<ol> <li>\u6570\u636e\u6d41\u56fe</li> <li>\u6570\u636e\u5b57\u5178</li> <li>E-R\u56fe</li> <li>\u4e3b\u8981\u5904\u7406\u7b97\u6cd5</li> </ol> </li> <li>\u7f16\u5199\u8f6f\u4ef6\u9700\u6c42\u89c4\u683c\u8bf4\u660e\u4e66<ol> <li>\u76ee\u7684\uff1a\u660e\u786e\u5b9a\u4e49\u7cfb\u7edf\u5f97\u9700\u6c42\uff0c\u7cfb\u7edf\u6784\u6210\u4ee5\u53ca\u6709\u5173\u63a5\u53e3</li> <li>\u9700\u6c42\u8bf4\u660e\u76f8\u5f53\u4e8e\u4e00\u4efd\u6280\u672f\u5408\u540c\uff0c\u662f\u6d4b\u8bd5\u9a8c\u6536\u9636\u6bb5\u7684\u57fa\u51c6</li> </ol> </li> <li>\u9700\u6c42\u5206\u6790\u8bc4\u5ba1<ol> <li>\u53d1\u73b0\u9700\u6c42\u5206\u6790\u9636\u6bb5\u7684\u9519\u8bef\u548c\u7f3a\u9677\uff0c\u7136\u540e\u8fdb\u884c\u6539\u8fdb</li> </ol> </li> </ol> </li> <li> <p>\u9700\u6c42\u5206\u6790\u9636\u6bb5\u7684\u57fa\u672c\u4efb\u52a1\u662f\u4ec0\u4e48\uff1f\u600e\u6837\u7406\u89e3\u5206\u6790\u9636\u6bb5\u7684\u4efb\u52a1\u662f\u51b3\u5b9a\u201c\u505a\u4ec0\u4e48\u201d\uff0c\u800c\u4e0d\u662f\u201c\u600e\u6837\u505a\u201d\uff1f</p> </li> <li> <p>\u57fa\u672c\u4efb\u52a1\uff1a\u56de\u7b54\u7cfb\u7edf\u5fc5\u987b\u505a\u4ec0\u4e48</p> </li> <li>\u9700\u6c42\u5206\u6790\u5b9e\u9645\u4e0a\u662f\u8c03\u67e5\uff0c\u8bc4\u4ef7\u7528\u6237\u5bf9\u8f6f\u4ef6\u9700\u6c42\u7684\u8fc7\u7a0b\uff0c\u76ee\u7684\u5728\u4e8e\u51c0\u5316\u8f6f\u4ef6\u7684\u4f5c\u7528\u8303\u56f4\uff0c\u4e5f\u662f\u5206\u6790\u8f6f\u4ef6\u7cfb\u7edf\u6784\u6210\u7684\u8fc7\u7a0b\u3002\u56e0\u6b64\u9700\u6c42\u5206\u6790\u662f\u4e00\u4e2a\u5bf9\u7528\u6237\u610f\u56fe\u4e0d\u65ad\u8fdb\u884c\u63ed\u793a\u548c\u5224\u65ad\u7684\u8fc7\u7a0b\uff0c\u5b83\u5e76\u4e0d\u8003\u8651\u5177\u4f53\u5b9e\u73b0\uff0c\u800c\u662f\u5b8c\u6574\u5730\uff0c\u4e25\u5bc6\u5730\u63cf\u8ff0\u5e94\u8be5\u505a\u4ec0\u4e48\u7684\u8fc7\u7a0b\u3002</li> <li>\u5206\u6790\u4eba\u5458\uff1a\u9700\u8981\u5efa\u7acb\u4e00\u4e2a\u7531\u7528\u6237\u3001\u7cfb\u7edf\u5206\u6790\u5458\u548c\u9886\u57df\u4e13\u5bb6\u53c2\u52a0\u7684\u8054\u5408\u5206\u6790\u5c0f\u7ec4\uff0c\u7531\u9886\u57df\u4e13\u5bb6\u6765\u6c9f\u901a\u3002</li> <li>\u9700\u6c42\u5206\u6790\u89c4\u683c\u8bf4\u660e\u4e66\u5185\u5bb9<ol> <li>\u5f15\u8a00</li> <li>\u4efb\u52a1\u6982\u8ff0</li> <li>\u6570\u636e\u63cf\u8ff0</li> <li>\u529f\u80fd + \u6027\u80fd\u9700\u6c42 + \u8fd0\u884c\u9700\u6c42</li> <li>\u5176\u4ed6</li> </ol> </li> <li> <p>\u4ec0\u4e48\u662f\u7ed3\u6784\u5316\u5206\u6790\u65b9\u6cd5\uff1f\u8be5\u65b9\u6cd5\u4f7f\u7528\u4ec0\u4e48\u63cf\u8ff0\u5de5\u5177\uff1f</p> </li> <li> <p>\u5b9a\u4e49\uff1a\u7ed3\u6784\u5316\u5206\u6790\u662f\u4e00\u79cd\u4ece\u95ee\u9898\u7a7a\u95f4 \u5230\u67d0\u79cd\u8868\u793a\u7684\u6620\u5c04\u65b9\u6cd5\uff0c\u8f6f\u4ef6\u529f\u80fd\u7531\u6570\u636e\u6d41\u56fe\u8868\u793a\uff0c\u662f\u7ed3\u6784\u5316\u65b9\u6cd5\u4e2d\u91cd\u8981\u7684\uff0c\u88ab\u666e\u904d\u91c7\u7528\u7684\u65b9\u6cd5\u3002</p> </li> <li>\u7531\u6570\u636e\u6d41\u56fe\u548c\u6570\u636e\u5b57\u5178 \u6784\u6210\u7684\u903b\u8f91\u6a21\u578b\u3002</li> <li> <p>\u4ec0\u4e48\u662f\u6570\u636e\u6d41\u56fe\uff1f\u5176\u4f5c\u7528\u662f\u4ec0\u4e48\uff1f\u5176\u4e2d\u7684\u57fa\u672c\u7b26\u53f7\u5404\u8868\u793a\u4ec0\u4e48\u542b\u4e49\uff1f</p> </li> <li> <p>\u5b9a\u4e49\uff1a\u662f\u4e00\u79cd\u56fe\u5f62\u5316\u6280\u672f\uff0c\u7528\u4e8e\u8868\u793a\u7cfb\u7edf\u903b\u8f91\u6a21\u578b\u3002\u7b80\u79f0DFD</p> </li> <li>\u4f5c\u7528\uff1a\u4ee5\u76f4\u89c2\u5730\u5f62\u5f0f\u6e05\u6670\u63cf\u8ff0\u4e86\u7cfb\u7edf\u6570\u636e\u6d41\u52a8\u548c\u5904\u7406\u8fc7\u7a0b</li> <li>\u57fa\u672c\u7b26\u53f7\uff1a<ol> <li>\u6570\u636e\u6d41\uff1a$ -&gt; $ + \u6570\u636e\u6d41\u540d</li> <li>\u6570\u636e\u5b58\u50a8\uff1a$ =$ + \u6587\u4ef6\u540d</li> <li>\u6570\u636e\u5904\u7406\uff1a\u5706\u5708 + \u52a0\u5de5\u540d</li> <li>\u6570\u636e\u6e90\u70b9\u6216\u8005\u7ec8\u70b9\uff1a\u65b9\u6846 + \u5b9e\u4f53\u540d</li> </ol> </li> <li> <p>\u753b\u6570\u636e\u6d41\u56fe\u7684\u6b65\u9aa4\u662f\u4ec0\u4e48\uff1f\u5e94\u8be5\u6ce8\u610f\u4ec0\u4e48\u4e8b\u9879\uff1f</p> </li> <li> <p>\u6b65\u9aa4</p> <ol> <li>\u627e\u5230\u5916\u90e8\u5b9e\u4f53\uff0c\u4e5f\u5c31\u627e\u5230\u4e86\u7cfb\u7edf\u5f97\u6e90\u70b9\u548c\u7ec8\u70b9</li> <li>\u627e\u51fa\u5916\u90e8\u5b9e\u4f53\u7684\u8f93\u5165\u548c\u8f93\u51fa\u6570\u636e\u6d41</li> <li>\u5728\u56fe\u7684\u8fb9\u4e0a\u753b\u51fa\u7cfb\u7edf\u5f97\u5916\u90e8\u5b9e\u4f53</li> <li>\u4ece\u5916\u90e8\u5b9e\u4f53\u7684\u8f93\u51fa\u6d41\u5f00\u59cb\uff0c\u9010\u6b65\u753b\u51fa\u53d8\u6362\u6570\u636e\u7684\u52a0\u5de5\uff0c\u76f4\u5230\u5916\u90e8\u5b9e\u4f53\u6240\u9700\u7684\u8f93\u5165\u6d41\uff0c\u5f62\u6210\u6570\u636e\u6d41\u7684\u5c01\u95ed</li> <li>\u6309\u7167\u4e0a\u8ff0\u539f\u5219\u8fdb\u884c\u68c0\u67e5\uff0c\u4fee\u6539</li> <li>\u6309\u7167\u4e0a\u8ff0\u6b65\u9aa4\uff0c\u753b\u51fa\u5b50\u56fe</li> </ol> </li> <li>\u6ce8\u610f\u4e8b\u9879\uff1a<ol> <li>\u53ea\u8003\u8651\u9759\u6001\uff0c\u5e76\u4e14\u6210\u529f\u7684\u60c5\u51b5</li> <li>\u53ea\u8003\u8651\u5e38\u89c4\u72b6\u6001</li> <li>\u4e0d\u540c\u4e8e\u7a0b\u5e8f\u6d41\u7a0b\u56fe\uff0c\u6570\u636e\u6d41\u56fe\u66f4\u7c97\u7c92\u5ea6</li> <li>\u7236\u56fe\u5b50\u56fe\u8981\u5e73\u8861</li> </ol> </li> <li> <p>\u63cf\u8ff0\u52a0\u5de5\u903b\u8f91\u6709\u51e0\u79cd\u5de5\u5177\uff1f\u5404\u662f\u4ec0\u4e48\uff1f\u5199\u51fa\u5176\u4f18\u7f3a\u70b9</p> </li> <li> <p>\u7ed3\u6784\u5316\u8bed\u8a00</p> <ol> <li>\u7279\u70b9\uff1a\u4ecb\u4e8e\u81ea\u7136\u8bed\u8a00\u548c\u7a0b\u5e8f\u8bbe\u8ba1\u8bed\u8a00\u4e4b\u95f4</li> <li>\u65e2\u6709\u7ed3\u6784\u5316\u7a0b\u5e8f\u7684\u6e05\u6d17\u6613\u8bfb\u7684\u7279\u70b9\uff0c\u53c8\u6709\u81ea\u7136\u8bed\u8a00\u7b80\u5355\u6613\u61c2\u7684\u7279\u70b9</li> </ol> </li> <li>\u5224\u5b9a\u8868<ol> <li>\u4f7f\u7528\u573a\u666f\uff1a\u5f53\u7b97\u6cd5\u5305\u542b\u591a\u91cd\u5d4c\u5957\u7684\u6761\u4ef6\u9009\u62e9\u7684\u65f6\u5019\uff0c\u5224\u5b9a\u8868\u53ef\u4ee5\u6e05\u6670\u5730\u8868\u793a\u590d\u6742\u7684\u6761\u4ef6\u7ec4\u5408\u548c\u5bf9\u5e94\u52a8\u4f5c\u4e4b\u95f4\u7684\u5173\u7cfb</li> <li>\u7ec4\u6210\u90e8\u5206\uff1a\u6761\u4ef6\u7c7b\u522b\uff0c\u6761\u4ef6\u7ec4\u5408\uff0c\u64cd\u4f5c\u5b9a\u4e49\uff0c\u64cd\u4f5c\u6267\u884c</li> <li>\u5176\u4e2d\u6761\u4ef6\u7c7b\u522b\u548c\u6761\u4ef6\u7ec4\u5408\u53ef\u4ee5\u6253one-hot\u6765\u8fa8\u522b</li> </ol> </li> <li>\u5224\u5b9a\u6811<ol> <li>\u5b9a\u4e49\uff1a\u5224\u5b9a\u6811\u662f\u5224\u5b9a\u8868\u7684\u53d8\u79cd\uff0c\u4e5f\u80fd\u6e05\u6670\u7684\u8868\u793a\u590d\u6742\u6761\u4ef6\u7ec4\u5408\u4e0e\u5bf9\u5e94\u52a8\u4f5c\u4e4b\u95f4\u7684\u5173\u7cfb</li> <li>\u4e5f\u5c31\u662f\u4e0d\u540c\u6761\u4ef6\u8def\u5f84\u7ec4\u5408\u6210\u7684\u4ece\u6839\u5230\u53f6\u5b50\u7684\u8def\u5f84\uff0c\u5bf9\u5e94\u6bcf\u4e00\u6b65\u9009\u62e9</li> </ol> </li> <li> <p>\u67d0\u9ad8\u6821\u8ba1\u7b97\u673a\u6559\u6750\u8d2d\u9500\u7cfb\u7edf\u6709\u4ee5\u4e0b\u529f\u80fd</p> </li> <li> <p>\u76f4\u63a5\u770b\u7b54\u6848</p> </li> </ol> </li> </ol>"},{"location":"TEST/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/#_5","title":"\u7b2c\u56db\u7ae0 \u8f6f\u4ef6\u6574\u4f53\u8bbe\u8ba1","text":"<ol> <li> <p>\u7cfb\u7edf\u7684\u72ec\u7acb\u6027\uff0c\u53ef\u4ee5\u901a\u8fc7\u9ad8\u5185\u805a\uff0c\u4f4e\u8026\u5408\u8fdb\u884c\u5224\u65ad\uff0c\u5177\u4f53\u5982\u4e0b\uff1a</p> <ol> <li> <p>\u901a\u8fc7\u8026\u5408\u7a0b\u5ea6\u7684\u5ea6\u91cf\uff0c\u53ef\u4ee5\u628a\u8026\u5408\u7a0b\u5ea6\u5206\u4e3a</p> <ol> <li>\u65e0\u76f4\u63a5\u8026\u5408\uff0c\u4e5f\u5c31\u662f\u5b8c\u5168\u72ec\u7acb\uff0c\u4f46\u662f\u4e00\u4e2a\u7cfb\u7edf\u4e2d\u4e0d\u53ef\u80fd\u6240\u6709\u7684\u6a21\u5757\u4e4b\u95f4\u7684\u6ca1\u6709\u4efb\u4f55\u8fde\u63a5</li> <li>\u6570\u636e\u8026\u5408\uff1a\u5982\u679c\u4e24\u4e2a\u6a21\u5757\u4e4b\u95f4\u5f7c\u6b64\u901a\u8fc7\u53c2\u6570\u4ea4\u6362\u4fe1\u606f\uff0c\u5e76\u4e14\u4ec5\u4ec5\u4ea4\u6362\u7684\u662f\u6570\u636e\uff0c\u5219\u8fd9\u79cd\u6210\u4e3a\u6570\u636e\u8026\u5408\u3002**\u6570\u636e\u8026\u5408\u662f\u7406\u60f3\u7684\u76ee\u6807    **</li> <li>\u7279\u5f81\u8026\u5408\uff1a\u5982\u679c\u628a\u6574\u4e2a\u6570\u636e\u7ed3\u6784\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\uff0c\u800c\u4f7f\u7528\u7684\u6a21\u5757\u5e76\u4e0d\u4f7f\u7528\u5168\u90e8\uff0c\u5219\u51fa\u73b0\u4e86\u7279\u5f81\u8026\u5408</li> <li>\u63a7\u5236\u8026\u5408\uff1a\u5982\u679c\u4e24\u4e2a\u6a21\u5757\u4e4b\u95f4\u5f7c\u6b64\u4f20\u9012\u7684\u4fe1\u606f\u6709\u63a7\u5236\u4fe1\u606f\uff0c\u5219\u79f0\u4e3a\u63a7\u5236\u8026\u5408\u3002 \u63a7\u5236\u8026\u5408\u5f80\u5f80\u662f\u591a\u4f59\u7684\uff0c\uff0c\u628a\u6a21\u5757\u8fdb\u884c\u5206\u89e3\u4e4b\u540e\u53ef\u4ee5\u7528\u6570\u636e\u8026\u5408\u8fdb\u884c\u4ee3\u66ff</li> <li>\u516c\u5171\u73af\u5883\u8026\u5408\uff1a\u4e24\u4e2a\u7cfb\u7edf\u901a\u8fc7\u516c\u5171\u6570\u636e\u73af\u5883\u76f8\u4e92\u4f5c\u7528\uff0c\u6bd4\u5982\u5171\u4eab\u7f13\u51b2\u533a\u3002\u5982\u679c\u662f\u5355\u5411\u7684\u6d88\u8d39\u8005-\u751f\u4ea7\u8005\u6a21\u5f0f\uff0c\u5219\u662f\u677e\u8026\u5408\uff0c\u5982\u679c\u4e3a\u53cc\u5411\uff0c\u5219\u662f\u7d27\u5bc6\u8026\u5408    \u6bd4\u8f83\u590d\u6742\uff0c\u6709\u98ce\u9669</li> <li> <p>\u5185\u5bb9\u8026\u5408\uff1a\u6700\u9ad8\u7a0b\u5ea6\u7684\u8026\u5408\u3002\u6bd4\u5982\u4e00\u4e2a\u6a21\u5757\u8bbf\u95ee\u53e6\u4e00\u4e2a\u6a21\u5757\u7684\u5185\u90e8\u6570\u636e\uff0c\u6709\u4ee3\u7801\u4e4b\u95f4\u7684\u91cd\u590d\u7b49\u3002\u5b8c\u5168\u4e0d\u8981\u5185\u5bb9\u8026\u5408</p> <ol> <li>\u5185\u805a\uff1a\u6807\u5fd7\u4e00\u4e2a\u6a21\u5757\u5185\u90e8\u7684\u5404\u4e2a\u5143\u7d20\u5f7c\u6b64\u7ed3\u5408\u7684\u7d27\u5bc6\u7a0b\u5ea6\uff0c\u662f\u4fe1\u606f\u9690\u85cf\u548c\u5c40\u90e8\u5316\u6982\u5ff5\u7684\u81ea\u7136\u6269\u5c55\u3002\u7406\u60f3\u5185\u805a\u6a21\u5757\u53ea\u505a\u4e00\u4ef6\u4e8b\u60c5</li> </ol> </li> <li> <p>\u5076\u7136\u5185\u805a\uff0c\u4e00\u7ec4\u4efb\u52a1\u5f7c\u6b64\u4e4b\u95f4\u7684\u5173\u7cfb\u6bd4\u8f83\u677e\u6563\u3002</p> </li> <li>\u903b\u8f91\u5185\u805a\uff1a\u5982\u679c\u4e00\u4e2a\u6a21\u5757\u5b8c\u6210\u7684\u4efb\u52a1\u5728\u903b\u8f91\u4e0a\u5c5e\u4e8e\u76f8\u540c\u6216\u8005\u76f8\u4f3c\u7684\u4e00\u7c7b\uff0c\u5219\u6210\u4e3a\u903b\u8f91\u5185\u805a</li> <li>\u65f6\u95f4\u5185\u805a\uff1a\u5982\u679c\u4e00\u4e2a\u6a21\u5757\u5305\u542b\u7684\u4efb\u52a1\u5fc5\u987b\u5728\u540c\u4e00\u4e2a\u65f6\u95f4\u6bb5\u5185\u6267\u884c\uff0c\u5c31\u662f\u65f6\u95f4\u5185\u805a\u3002\u6b64\u6a21\u5757\u4e0d\u592a\u53ef\u80fd\u91cd\u7528</li> <li>\u901a\u4fe1\u5185\u805a\uff1a\u5982\u679c\u6240\u6709\u6a21\u5757\u4e2d\u6240\u6709\u5143\u7d20\u90fd\u4f7f\u7528\u540c\u4e00\u4e2a\u8f93\u5165\u548c\u8f93\u51fa\u6570\u636e\uff0c\u5219\u6210\u4e3a\u901a\u4fe1\u5185\u805a\uff0c\u5373\u5728\u540c\u4e00\u4e2a\u6570\u636e\u7ed3\u6784\u4e0a\u64cd\u4f5c\u3002\u4e0d\u80fd\u91cd\u7528\uff0c\u9700\u8981\u62c6\u5206</li> <li>\u987a\u5e8f\u5185\u805a\uff1a\u4e32\u884c\u6267\u884c</li> <li>\u529f\u80fd\u5185\u805a\uff1a\u6a21\u5757\u5185\u6240\u6709\u7684\u5904\u7406\u5143\u7d20\u5c5e\u4e8e\u4e00\u4e2a\u6574\u4f53\uff0c\u5b8c\u6210\u5355\u4e00\u7684\u529f\u80fd\u3002\u662f\u6700\u9ad8\u7a0b\u5ea6\u7684\u5185\u805a</li> <li>\u6df1\u5ea6\uff0c\u5bbd\u5ea6\uff0c\u6247\u5165\uff0c\u6247\u51fa\uff1a</li> </ol> </li> <li> <p>\u6df1\u5ea6\uff1a\u8f6f\u4ef6\u7ed3\u6784\u4e2d\u6a21\u5757\u7684\u5c42\u6570\uff0c\u5b83\u8868\u793a\u63a7\u5236\u7684\u5c42\u6570\uff0c\u5728\u4e00\u5b9a\u610f\u4e49\u80fd\u7c97\u7565\u5730\u53cd\u6620\u7cfb\u7edf\u7684\u89c4\u6a21\u548c\u590d\u6742\u7a0b\u5ea6</p> </li> <li>\u5bbd\u5ea6\uff1a\u540c\u4e00\u5c42\u6b21\u4e0a\u6a21\u5757\u7684\u6700\u5927\u4e2a\u6570</li> <li>\u6247\u5165\uff1a\u6709\u591a\u5c11\u4e2a\u4e0a\u7ea7\u6a21\u5757\u76f4\u63a5\u8c03\u7528\u5b83</li> <li>\u6247\u51fa\uff1a\u662f\u4e00\u4e2a\u6a21\u5757\u76f4\u63a5\u8c03\u7528\u7684\u6a21\u5757\u6570\u76ee\u3002\u7ecf\u9a8c\u8bc1\u660e\uff0c\u597d\u7684\u7cfb\u7edf\u7ed3\u6784\u7684\u5e73\u5747\u6247\u51fa\u6570\u4e00\u822c\u662f3-4\uff0c\u4e0d\u80fd\u8d85\u8fc75-9</li> <li>\u4e00\u822c\u8bbe\u8ba1\u7684\u6bd4\u8f83\u597d\u7684\u8f6f\u4ef6\u7ed3\u6784\uff0c\u9876\u5c42\u6247\u51fa\u9ad8\uff0c\u4e2d\u5c42\u6247\u51fa\u8f83\u5c11\uff0c\u5e95\u5c42\u6a21\u5757\u6709\u9ad8\u6247\u5165\u3002</li> <li>\u8f6f\u4ef6\u603b\u4f53\u8bbe\u8ba1\u8bf4\u660e\u4e66:    \u5f15\u8a00\uff0c\u4efb\u52a1\u6982\u8ff0\uff0c\u603b\u4f53\u8bbe\u8ba1\uff0c\u63a5\u53e3\u8bbe\u8ba1\uff0c\u6570\u636e\u7ed3\u6784\u8bbe\u8ba1\uff0c\u8fd0\u884c\u8bbe\u8ba1\uff0c\u51fa\u9519\u5904\u7406\u8bbe\u8ba1\uff0c\u5b89\u5168\u4fdd\u5bc6\u8bbe\u8ba1\uff0c\u7ef4\u62a4\u8bbe\u8ba1</li> </ol> </li> </ol>"},{"location":"TEST/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/#_6","title":"\u7b2c\u4e94\u7ae0 \u8f6f\u4ef6\u8be6\u7ec6\u8bbe\u8ba1","text":"<ol> <li>\u8f6f\u4ef6\u8be6\u7ec6\u8bbe\u8ba1\u7684\u57fa\u672c\u4efb\u52a1\u662f\u4ec0\u4e48\uff1f\u6709\u54ea\u51e0\u79cd\u63cf\u8ff0\u65b9\u6cd5\uff1f<ol> <li>\u4efb\u52a1\uff1a<ol> <li>\u786e\u5b9a\u6bcf\u4e2a\u6a21\u5757\u7684\u4f7f\u7528\u7684\u7b97\u6cd5</li> <li>\u6570\u636e\u7ed3\u6784</li> <li>\u63a5\u53e3\u7ec6\u8282</li> <li>\u6d4b\u8bd5\u7528\u4f8b</li> </ol> </li> <li>\u63cf\u8ff0\u65b9\u6cd5<ol> <li>\u56fe\u5f62\u5de5\u5177\uff1a\u7a0b\u5e8f\u6d41\u7a0b\u56fe\uff0c\u76d2\u56fe(N-S)\uff0c\u95ee\u9898\u5206\u6790\u56fe(PAD)</li> <li>\u8868\u683c\u5de5\u5177:  \u5224\u5b9a\u8868\uff0c\u5224\u5b9a\u6811</li> <li>\u8bed\u8a00\u5de5\u5177\uff1a\u8fc7\u7a0b\u8bbe\u8ba1\u8bed\u8a00\uff1aPDL</li> </ol> </li> </ol> </li> <li>\u7a0b\u5e8f\u7684\u4e09\u79cd\u57fa\u672c\u7ed3\u6784\uff1a\u987a\u5e8f\uff0c\u5faa\u73af\uff0c\u9009\u62e9</li> <li>\u4f2a\u4ee3\u7801\u8f6c\u6362\u4e3aN-S\u76d2\u56fe\uff0c\u4ee5\u53caPAD\u56fe<ol> <li>\u76d2\u56fe\uff1a<ol> <li>\u57fa\u672c\u6210\u5206\uff1a<ol> <li>\u987a\u5e8f</li> <li>if-then-else</li> <li>case\u578b\u591a\u5206\u652f</li> <li>\u5faa\u73af</li> <li>\u8c03\u7528\u5b50\u7a0b\u5e8f</li> </ol> </li> </ol> </li> <li>PAD\u56fe\uff1a<ol> <li>\u5b9a\u4e49\uff1a\u95ee\u9898\u5206\u6790\u56fe\uff0c\u4f7f\u7528\u4e8c\u7ef4\u6811\u5f62\u7ed3\u6784\uff0c\u53ea\u6709\u987a\u5e8f\uff0c\u5faa\u73af\uff0c\u9009\u62e9\u4e09\u90e8\u5206\u3002</li> <li>\u65b9\u5f0f\uff1a\u4f8b\u5982\u8fdb\u884c\u5012\u5e8f\u9009\u62e9\u6392\u5e8f\u7684\u65b9\u5f0f\uff1a\u9996\u5148\u628asort\u90e8\u5206\u5265\u79bb\u51fa\u6765\uff0c\u7136\u540e\u7528def\uff0c\u540c\u65f6\u628a\u5faa\u73af\u4e00\u5c42\u4e00\u5c42\u5206\u9694\u51fa\u6765\uff0c\u5c31\u662f\u7ed3\u679c\u3002</li> <li>\u65b9\u5411\uff1a\u4ece\u4e0a\u5230\u4e0b\uff0c\u4ece\u5de6\u5230\u53f3</li> </ol> </li> </ol> </li> </ol>"},{"location":"TEST/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/#_7","title":"\u7b2c\u4e03\u7ae0  \u8f6f\u4ef6\u6d4b\u8bd5","text":"<ol> <li> <p>\u8f6f\u4ef6\u6d4b\u8bd5\u7684\u57fa\u672c\u4efb\u52a1\u662f\u4ec0\u4e48\uff1f\u7b80\u8ff0\u6d4b\u8bd5\u7684\u76ee\u6807\u548c\u57fa\u672c\u539f\u5219</p> <ol> <li>\u8f6f\u4ef6\u6d4b\u8bd5\u7684\u57fa\u672c\u4efb\u52a1\uff1a    \u6839\u636e\u8f6f\u4ef6\u5f00\u53d1\u5404\u9636\u6bb5\u7684\u6587\u6863\u8d44\u6599\u548c\u7a0b\u5e8f\u5185\u90e8\u7ed3\u6784\uff0c\u7cbe\u5fc3\u8bbe\u8ba1\u4e00\u7ec4\u201c\u9ad8\u4ea7\u201d\u7684\u6d4b\u8bd5\u7528\u4f8b\uff0c\u5229\u7528\u8fd9\u4e9b\u7528\u4f8b\u6267\u884c\u7a0b\u5e8f\uff0c\u627e\u51fa\u8f6f\u4ef6\u4e2d\u6f5c\u5728\u7684\u5404\u79cd\u9519\u8bef\u7f3a\u9677</li> <li>\u6d4b\u8bd5\u4e00\u822c\u4e0d\u80fd\u53d1\u73b0\u5168\u90e8\u9519\u8bef\uff0c\u53ea\u80fd\u8bc1\u660e\u7a0b\u5e8f\u4e2d\u5b58\u5728\u9519\u8bef\uff0c\u4e0d\u80fd\u8bc1\u660e\u4e0d\u5b58\u5728\u9519\u8bef</li> <li>\u539f\u5219\uff1a\u8f93\u51fa\u8f93\u51fa\uff0c\u5408\u7406\u4e0d\u5408\u7406\u5168\u8986\u76d6\u3002\u7a0b\u5e8f\u5458\u5e94\u907f\u514d\u6d4b\u8bd5\u81ea\u5df1\u7684\u7a0b\u5e8f</li> <li> <p>\u7b80\u8ff0\u9759\u6001\u6d4b\u8bd5\u4e0e\u52a8\u6001\u6d4b\u8bd5\u7684\u542b\u4e49\u3002\u5b83\u4eec\u4e4b\u95f4\u6709\u4ec0\u4e48\u4e0d\u540c\u70b9\u548c\u76f8\u540c\u70b9</p> </li> <li> <p>\u9759\u6001\u6d4b\u8bd5\uff1a    \u6307\u88ab\u6d4b\u7a0b\u5e8f\u4e0d\u5728\u673a\u5668\u4e0a\u8fd0\u884c\uff0c\u5bf9\u6a21\u5757\u7684\u6e90\u4ee3\u7801\u8fdb\u884c\u7814\u8bfb\uff0c\u67e5\u627e\u9519\u8bef\u6216\u6536\u96c6\u4e00\u4e9b\u5ea6\u91cf\u6570\u636e\uff0c\u91c7\u7528\u4eba\u5de5\u68c0\u6d4b\u548c\u8ba1\u7b97\u673a\u8f85\u52a9\u9759\u6001\u5206\u6790\u624b\u6bb5    \u5bf9\u7a0b\u5e8f\u8fdb\u884c\u68c0\u6d4b\uff0c\u53ea\u8fdb\u884c\u7279\u6027\u5206\u6790</p> </li> <li>\u52a8\u6001\u6d4b\u8bd5\uff1a    \u901a\u8fc7\u8fd0\u884c\u7a0b\u5e8f\u53d1\u73b0\u9519\u8bef\uff0c\u4e00\u822c\u6240\u8bb2\u7684\u6d4b\u8bd5\u5927\u591a\u662f\u6307\u52a8\u6001\u6d4b\u8bd5\u3002\u4e00\u822c\u5305\u62ec\u9ed1\u76d2\u6d4b\u8bd5\u548c\u767d\u76d2\u6d4b\u8bd5</li> <li>\u5f02\u540c\u70b9<ol> <li>\u76f8\u540c\uff1a\u90fd\u53ef\u4ee5\u7528\u4e8e\u8fdb\u884c\u8f6f\u4ef6\u6d4b\u8bd5</li> <li>\u4e0d\u540c\uff1a\u4e00\u4e2a\u5728\u8fd0\u884c\u524d\uff0c\u4e00\u4e2a\u5728\u8fd0\u884c\u65f6\u3002\u524d\u8005\u7528\u4e8e\u9884\u9632\uff0c\u540e\u8005\u7528\u4e8e\u77eb\u6b63\u3002</li> </ol> </li> <li> <p>\u9ed1\u76d2\u6d4b\u8bd5\u7684\u6d4b\u8bd5\u65b9\u6cd5</p> </li> <li> <p>\u5b9a\u4e49\uff1a</p> <ol> <li>\u9ed1\u76d2\u6d4b\u8bd5\uff1a\u4e5f\u79f0\u529f\u80fd\u6d4b\u8bd5\u6216\u6570\u636e\u9a71\u52a8\u6d4b\u8bd5\uff0c\u5b83\u4e0d\u8003\u8651\u7a0b\u5e8f\u5185\u90e8\u7ed3\u6784\u548c\u5904\u7406\u8fc7\u7a0b\u3002\u628a\u88ab\u6d4b\u7a0b\u5e8f\u770b\u6210\u4e00\u4e2a\u9ed1\u76d2\u5b50\uff0c\u53ea\u5728\u8f6f\u4ef6\u63a5\u53e3\u5904\u8fdb\u884c\u6d4b\u8bd5\uff0c\u4f9d\u636e\u9700\u6c42\u89c4\u683c\u8bf4\u660e\u4e66\uff0c\u68c0\u67e5\u7a0b\u5e8f\u662f\u5426\u6ee1\u8db3\u529f\u80fd\u8981\u6c42</li> <li>\u767d\u76d2\u6d4b\u8bd5\uff1a\u4e5f\u79f0\u7ed3\u6784\u6d4b\u8bd5\u6216\u903b\u8f91\u9a71\u52a8\u6d4b\u8bd5\u3002\u5b83\u9700\u4e86\u89e3\u7a0b\u5e8f\u7684\u5185\u90e8\u7ed3\u6784\u548c\u5904\u7406\u8fc7\u7a0b\uff0c\u8981\u6c42\u5bf9\u7a0b\u5e8f\u7684\u7ed3\u6784\u7279\u6027\u505a\u5230\u4e00\u5b9a\u7a0b\u5ea6\u7684\u8986\u76d6</li> <li>\u4e24\u8005\u90fd\u4e0d\u53ef\u80fd\u505a\u7a77\u5c3d\u6d4b\u8bd5\uff0c\u53ea\u80fd\u8fdb\u884c\u9009\u62e9\u6d4b\u8bd5\u3002\u9ed1\u76d2\u6d4b\u8bd5\u662f\u786e\u8ba4\u6027\u6280\u672f\uff0c\u767d\u76d2\u6d4b\u8bd5\u662f\u9a8c\u8bc1\u6027\u6280\u672f\u3002<ol> <li>\u9ed1\u76d2\u6d4b\u8bd5    \u65b9\u6cd5\u6709\u4e09\u79cd\uff0c\u7b49\u4ef7\u5206\u7c7b\u6cd5\uff0c\u8fb9\u503c\u5206\u6790\u6cd5\uff0c\u9519\u8bef\u63a8\u6d4b\u6cd5</li> </ol> </li> </ol> </li> </ol> <p>\u7b49\u4ef7\u5206\u7c7b\u6cd5\uff1a\u628a\u7a0b\u5e8f\u7684\u8f93\u5165\u57df\u5212\u5206\u4e3a\u82e5\u5e72\u4e2a\u6570\u636e\u7c7b\uff0c\u636e\u6b64\u5bfc\u51fa\u6d4b\u8bd5\u7528\u4f8b\u3002\u4e5f\u5c31\u662f\u6bcf\u4e2a\u7b49\u4ef7\u8303\u56f4\u5185\uff0c\u53ea\u9009\u51e0\u4e2a\u7528\u4f8b\uff0c\u6700\u540e\u8986\u76d6\u5168\u90e8\u8303\u56f4\u3002\u9700\u8981\u7ecf\u5386\u5212\u5206\u7b49\u4ef7\u7c7b\uff0c\u9009\u62e9\u6d4b\u8bd5\u7528\u4f8b\u4e24\u6b65\u3002</p> <p>\u8fb9\u754c\u503c\u5206\u6790\u6cd5\uff1a\u9488\u5bf9\u5404\u79cd\u8fb9\u754c\u60c5\u51b5\u8bbe\u8ba1\u6d4b\u8bd5\u7528\u4f8b\uff0c\u53ef\u4ee5\u67e5\u51fa\u66f4\u591a\u9519\u8bef\u3002</p> <p>\u9519\u8bef\u63a8\u6d4b\u6cd5\uff1a\u8003\u76f4\u89c9\u548c\u7ecf\u9a8c\u63a8\u6d4b\u7a0b\u5e8f\u4e2d\u53ef\u80fd\u51fa\u73b0\u7684\u9519\u8bef\uff0c\u4ece\u800c\u6709\u9488\u5bf9\u6027\u7684\u7f16\u5199\u6d4b\u8bd5\u7528\u4f8b 4. \u8f6f\u4ef6\u6d4b\u8bd5\u8981\u7ecf\u8fc7\u54ea\u4e9b\u6b65\u9aa4\uff1f\u8fd9\u4e9b\u6d4b\u8bd5\u4e0e\u8f6f\u4ef6\u5f00\u53d1\u5404\u9636\u6bb5\u4e4b\u95f4\u6709\u4ec0\u4e48\u5173\u7cfb\uff1f</p> <ol> <li>\u5355\u5143\u6d4b\u8bd5\uff1a\u5bf9\u8f6f\u4ef6\u57fa\u672c\u7ec4\u6210\u5355\u5143\u7684\u6d4b\u8bd5\uff0c\u53d1\u73b0\u7684\u662f\u6a21\u5757\u5185\u7f16\u7801\u7684\u9519\u8bef\uff0c\u6d4b\u8bd5\u65b9\u6cd5\u4ee5\u767d\u76d2\u4e3a\u4e3b\uff0c\u4e5f\u5206\u9759\u6001\u548c\u52a8\u6001\u3002</li> <li>\u96c6\u6210\u6d4b\u8bd5\uff1a\u5c06\u5355\u5143\u6309\u7167\u8981\u6c42\u7ec4\u5408\u8d77\u6765\u8fdb\u884c\u6d4b\u8bd5\uff0c\u53d1\u73b0\u7684\u662f\u6a21\u5757\u7684\u9519\u8bef\uff0c\u5305\u62ec\u5b50\u7cfb\u7edf\u6d4b\u8bd5\u548c\u7cfb\u7edf\u6d4b\u8bd5\uff0c\u5206\u81ea\u9876\u5411\u4e0b\u548c\u81ea\u5e95\u5411\u4e0a\u3002</li> <li>\u786e\u8ba4\u6d4b\u8bd5\uff1a\u68c0\u67e5\u5f00\u53d1\u8f6f\u4ef6\u662f\u5426\u6ee1\u8db3\u89c4\u5219\u8bf4\u660e\u4e66\u6240\u786e\u5b9a\u7684\u529f\u80fd\u548c\u6027\u80fd\u9700\u6c42\uff0c\u53d1\u73b0\u7684\u662f\u9700\u6c42\u5206\u6790\u9636\u6bb5\u7684\u9519\u8bef</li> <li> <p>\u7ed9\u6d41\u7a0b\u56fe\uff0c\u8bbe\u8ba1\u767d\u76d2\u6d4b\u8bd5\u7528\u4f8b\u3002</p> </li> <li> <p>\u767d\u76d2\u6d4b\u8bd5\u5b9a\u4e49\uff1a\u6d4b\u8bd5\u7528\u4f8b\u662f\u6839\u636e\u7a0b\u5e8f\u7684\u5185\u90e8\u903b\u8f91\u6765\u8bbe\u8ba1\u7684\u3002\u5982\u679c\u60f3\u7528\u767d\u76d2\u6cd5\u53d1\u73b0\u7a0b\u5e8f\u4e2d\u6240\u6709\u7684\u9519\u8bef\uff0c\u5219\u81f3\u5c11\u5fc5\u987b\u4f7f\u7a0b\u5e8f\u4e2d\u6bcf\u79cd\u53ef\u80fd\u7684\u8def\u5f84\u90fd\u6267\u884c\u4e00\u6b21\u3002\u5bf9\u6240\u6709\u7684\u903b\u8f91\u5224\u5b9a\uff0c\u53d6\u201c\u771f\u201d\u4e0e\u53d6\u201c\u5047\u201d\u7684\u4e24\u79cd\u60c5\u51b5\u90fd\u81f3\u5c11\u6d4b\u8bd5\u4e00\u6b21</p> </li> <li>\u767d\u76d2\u6d4b\u8bd5\u5206\u4e24\u79cd\uff0c\u903b\u8f91\u8986\u76d6\u6d4b\u8bd5\uff0c\u4ee5\u53ca\u8def\u5f84\u6d4b\u8bd5\u3002\u524d\u8005\u628a\u6ce8\u610f\u529b\u653e\u5728\u6d41\u7a0b\u56fe\u7684\u5404\u4e2a\u5224\u5b9a\u6846\u4e0a\uff0c\u540e\u8005\u91cd\u89c6\u6d4b\u8bd5\u5bf9\u7a0b\u5e8f\u7684\u6267\u884c\u8def\u5f84\u7684\u8003\u5bdf</li> <li>\u903b\u8f91\u8986\u76d6\u6d4b\u8bd5\u6cd5\uff1a<ol> <li>\u5b9a\u4e49\uff1a\u903b\u8f91\u8986\u76d6\u6d4b\u8bd5\u6cd5\u7528\u6d41\u7a0b\u56fe\u6765\u8bbe\u8ba1\u6d4b\u8bd5\uff0c\u5b83\u8003\u5bdf\u7684\u91cd\u70b9\u662f\u56fe\u4e2d\u7684\u5224\u5b9a\u6846\uff08\u83f1\u5f62\u6846\uff09\u3002</li> <li>\u8986\u76d6\u5f3a\u5f31\uff1a<ol> <li>\u8bed\u53e5\u8986\u76d6\uff1a\u8981\u8d70\u8fc7\u6240\u6709\u7684\u83f1\u5f62\u548c\u77e9\u5f62\u3002\u5bf9\u6240\u6709\u53ef\u80fd\u6027\u7684\u8986\u76d6\u6700\u5c11</li> <li>\u5224\u5b9a\u8986\u76d6\uff1a\u4e5f\u5c31\u662f\u8d70\u8fc7\u6240\u6709\u7684\u83f1\u5f62\u548c\u77e9\u5f62\uff0c\u5e76\u4e14\u8981\u8d70\u904d\u6240\u6709\u7684\u83f1\u5f62\u5206\u652f\u3002\u4f46\u662f\u5bf9\u7a0b\u5e8f\u903b\u8f91\u7684\u8986\u76d6\u7a0b\u5ea6\u4ecd\u7136\u4e0d\u9ad8\u3002</li> <li>\u6761\u4ef6\u8986\u76d6\uff1a\u8981\u4f7f\u7528\u8db3\u591f\u7684\u6d4b\u8bd5\u7528\u4f8b\uff0c\u4f7f\u5f97\u8981\u8d70\u8fc7\u6240\u6709\u7684\u83f1\u5f62\u548c\u77e9\u5f62\uff0c\u5e76\u4e14\u5bf9\u83f1\u5f62\u6846\u4e2d\u7684\u6761\u4ef6\uff0c\u8981\u53d6\u5230\u5404\u79cd\u53ef\u80fd\u5f97\u7ed3\u679c</li> <li>\u5224\u5b9a\u6761\u4ef6\u8986\u76d6\uff1a\u540c\u65f6\u6ee1\u8db3\u5224\u5b9a\u8986\u76d6\u548c\u6761\u4ef6\u8986\u76d6</li> <li>\u6761\u4ef6\u7ec4\u5408\u8986\u76d6\uff1a\u4f7f\u7528\u8db3\u591f\u7684\u6d4b\u8bd5\u7528\u4f8b\uff0c\u4f7f\u5f97\u6bcf\u79cd\u83f1\u5f62\u7684\u6761\u4ef6\u7684\u5404\u79cd\u53ef\u80fd\u7ec4\u5408\u90fd\u51fa\u73b0\u81f3\u5c11\u4e00\u6b21\u3002**\u6761\u4ef6\u7ec4\u5408\u8986\u76d6\u4ecd\u7136\u4e0d\u80fd\u662f\u7a0b\u5e8f\u7684\u6240\u6709\u8def\u5f84\u90fd\u8986\u76d6\u5230    **</li> </ol> </li> </ol> </li> </ol> </li> </ol>"},{"location":"TEST/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/#_8","title":"\u7b2c\u516b\u7ae0 \u8f6f\u4ef6\u7ef4\u62a4","text":"<ol> <li>\u4e3a\u4ec0\u4e48\u8f6f\u4ef6\u9700\u8981\u7ef4\u62a4\uff1f\u7ef4\u62a4\u6709\u54ea\u51e0\u79cd\u7c7b\u578b\uff1f\u7b80\u8ff0\u5b83\u4eec\u7684\u7ef4\u62a4\u8fc7\u7a0b\u3002<ol> <li>\u539f\u56e0\uff1a\u6307\u8f6f\u4ef6\u7cfb\u7edf\u4ea4\u4ed8\u4f7f\u7528\u4ee5\u540e\uff0c\u4e3a\u4e86\u6539\u6b63\u8f6f\u4ef6\u8fd0\u884c\u9519\u8bef\uff0c\u6216\u8005\u56e0\u6ee1\u8db3\u65b0\u7684\u9700\u6c42\u800c\u52a0\u5165\u65b0\u529f\u80fd\u7684\u4fee\u6539\u8f6f\u4ef6\u7684\u8fc7\u7a0b\u3002</li> <li>\u7c7b\u578b\u548c\u8fc7\u7a0b\uff1a<ol> <li>\u6539\u6b63\u6027\u7ef4\u62a4\uff1a\u6539\u6b63\u8f6f\u4ef6\u6027\u80fd\u4e0a\u7684\u7f3a\u9677\uff0c\u800c\u8fdb\u884c\u8bca\u65ad\u548c\u6539\u6b63\u9519\u8bef\u7684\u8fc7\u7a0b\u5c31\u53eb\u505a\u6539\u6b63\u6027\u7ef4\u62a4</li> <li>\u9002\u5e94\u6027\u7ef4\u62a4\uff1a\u5916\u90e8\u73af\u5883\u53d1\u751f\u53d8\u5316\uff0c\u4e3a\u4f7f\u8f6f\u4ef6\u9002\u5e94\u8fd9\u79cd\u53d8\u5316\uff0c\u800c\u53bb\u4fee\u6539\u8f6f\u4ef6\u7684\u8fc7\u7a0b\u5c31\u53eb\u505a\u9002\u5e94\u6027\u7ef4\u62a4</li> <li>\u5b8c\u5584\u6027\u7ef4\u62a4\uff1a\u7528\u6237\u63d0\u51fa\u4e86\u65b0\u7684\u9700\u6c42\uff0c\u4e3a\u4e86\u6ee1\u8db3\u8fd9\u4e9b\u8981\u6c42\uff0c\u9700\u8981\u4fee\u6539\u6216\u518d\u5f00\u53d1\u8f6f\u4ef6\uff0c\u518d\u53bb\u4fee\u6539\u8f6f\u4ef6\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e0b\u8fdb\u884c\u7684\u7ef4\u62a4\u6d3b\u52a8\u53eb\u505a\u5b8c\u5584\u6027\u7ef4\u62a4</li> <li>\u9884\u9632\u6027\u7ef4\u62a4\uff1a\u4e3a\u4e86\u9632\u6b62\u8f6f\u4ef6\u5931\u6548\u800c\u628a\u8f6f\u4ef6\u8fdb\u884c\u4fee\u6539\u7684\u8fc7\u7a0b</li> </ol> </li> </ol> </li> </ol>"},{"location":"TEST/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/#_9","title":"\u7b2c\u4e5d\u7ae0 \u9762\u5411\u5bf9\u8c61","text":"<ol> <li>\u4f55\u8c13\u9762\u5411\u5bf9\u8c61\u8f6f\u4ef6\u5de5\u7a0b\uff1f\u7b80\u8ff0\u5b83\u548c\u4f20\u7edf\u8f6f\u4ef6\u5de5\u7a0b\u7684\u533a\u522b\u4e0e\u8054\u7cfb\u3002    1.5\u7b54\u6848</li> </ol>"},{"location":"TEST/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/#_10","title":"\u7b2c\u5341\u7ae0 \u9762\u5411\u5bf9\u8c61\u5206\u6790","text":"<ol> <li>\u9762\u5411\u5bf9\u8c61\u7684\u7528\u4f8b(\u529f\u80fd)\u6a21\u578b\u7684\u7528\u4f8b\u4e4b\u95f4\u7684\u5173\u7cfb(\u628a\u7528\u4f8b\u5168\u90e8\u7ffb\u8bd1\u6210\u529f\u80fd\u5c31\u53ef\u4ee5)<ol> <li>\u7528\u4f8b\u6a21\u578b\u7684\u5b9a\u4e49\uff1a\u7528\u4f8b\uff08\u529f\u80fd\uff09\u6a21\u578b\u5f80\u5f80\u662f\u4ece\u7528\u6237\u9700\u6c42\u7684\u89d2\u5ea6\u6765\u63cf\u8ff0\u7cfb\u7edf\uff0c\u6307\u660e\u7cfb\u7edf\u5e94\u8be5\u201c\u505a\u4ec0\u4e48\u201d\uff0c\u76f4\u63a5\u53cd\u6620\u7528\u6237\u5bf9\u76ee\u6807\u7cfb\u7edf\u7684\u9700\u6c42\uff0c\u63cf\u8ff0\u6570\u636e\u5728\u7cfb\u7edf\u4e2d\u7684\u53d8\u6362\u8fc7\u7a0b\u53ca\u7cfb\u7edf\u7684\u529f\u80fd\u3002</li> <li>\u4e00\u4e2a\u7528\u4f8b\u63cf\u8ff0\u7cfb\u7edf\u7684\u4e00\u9879\u529f\u80fd\uff0c\u662f\u53c2\u4e0e\u8005\u4f7f\u7528\u7cfb\u7edf\u6765\u8fbe\u6210\u76ee\u6807\u65f6\u4e00\u7ec4\u76f8\u5173\u7684\u6210\u529f\u573a\u666f\uff08Scenario\uff09\u548c\u5931\u8d25\u573a\u666f\u7684\u96c6\u5408</li> <li>\u7528\u4f8b(\u529f\u80fd)\u901a\u5e38\u662f\u7531\u67d0\u4e2a\u53c2\u4e0e\u8005\u6765\u9a71\u52a8\u6267\u884c\uff0c\u53ea\u6709\u5f53\u5916\u90e8\u7684\u53c2\u4e0e\u8005\u4e0e\u7cfb\u7edf\u4ea4\u4e92\u65f6\uff0c\u8be5\u529f\u80fd\u624d\u4f1a\u53d1\u751f\u4f5c\u7528</li> </ol> </li> <li>\u7528\u4f8b\u4e4b\u95f4\u7684\u5173\u7cfb\uff1a<ol> <li>\u5305\u542b\uff1a\u628a\u5171\u540c\u7684\u529f\u80fd\u5206\u79bb\u51fa\u6765\uff0c\u79f0\u4e3a\u4e00\u4e2a\u5355\u72ec\u7684\u88ab\u5305\u542b\u529f\u80fd\uff0c\u65b9\u4fbf\u88ab\u591a\u4e2a\u529f\u80fd\u590d\u7528</li> <li>\u6269\u5c55\uff1a\u4e5f\u5c31\u662f\u628a\u4e00\u4e2a\u529f\u80fd\u6dfb\u52a0\u4e00\u4e2a\u989d\u5916\u7684\u529f\u80fd</li> <li>\u6cdb\u5316\uff1a\u5b50\u529f\u80fd\u7ee7\u627f\u7236\u529f\u80fd\u7684\u884c\u4e3a\u548c\u542b\u4e49\uff0c\u8fd8\u53ef\u4ee5\u589e\u52a0\u7236\u529f\u80fd\u6ca1\u6709\u7684\u884c\u4e3a</li> <li>\u4f7f\u7528\uff1a\u50cf\u8c03\u7528\u51fd\u6570\u4e00\u6837\uff0c\u4f7f\u7528\u5176\u4ed6\u7684\u62bd\u8c61\u529f\u80fd(\u7528\u4f8b)</li> </ol> </li> <li>UML\u7c7b\u56fe\u4e2d\uff0c\u52a8\u6001\u884c\u4e3a\u6a21\u578b\u901a\u5e38\u7528\u54ea\u4e9b\u56fe\u5efa\u6a21\uff0c\u54ea\u4e2a\u56fe\u7528\u5728\u54ea\u4e2a\u573a\u666f\u4e2d\uff1f<ol> <li>\u4ea4\u4e92\u56fe\u5305\u62ec\u987a\u5e8f\u56fe\u548c\u901a\u4fe1\u56fe\uff0c\u72b6\u6001\u673a\u5305\u62ec\u6d3b\u52a8\u56fe\u548c\u72b6\u6001\u56fe</li> <li>\u987a\u5e8f\u56fe(idea\u63d2\u4ef6\u5c31\u662f\u8fd9\u4e2a)\uff1a<ol> <li>\u5b9a\u4e49\uff1a\u6309\u65f6\u95f4\u987a\u5e8f\u7684\u6d88\u606f\u4ea4\u6362\u8fc7\u7a0b\uff0c\u4f53\u73b0\u51fa\u7cfb\u7edf\u7528\u4f8b\u7684\u884c\u4e3a\uff0c\u663e\u793a\u53c2\u4e0e\u8005\u5982\u4f55\u91c7\u7528\u82e5\u5e72\u987a\u5e8f\u6b65\u9aa4\u4e0e\u7cfb\u7edf\u5bf9\u8c61\u4ea4\u4e92\u7684\u6a21\u578b</li> <li>\u573a\u666f\uff1a\u5728\u987a\u5e8f\u56fe\u4e2d\uff0c\u6240\u6709\u7684\u7cfb\u7edf\u90fd\u88ab\u5f53\u4f5c\u9ed1\u76d2\u5b50\u770b\u5f85\uff0c\u987a\u5e8f\u56fe\u7684\u91cd\u70b9\u662f\u53c2\u4e0e\u8005\u53d1\u8d77\u7684\u8de8\u8d8a\u7cfb\u7edf\u8fb9\u754c\u7684\u4e8b\u4ef6\u3002\u7cfb\u7edf\u884c\u4e3a\u63cf\u8ff0\u7cfb\u7edf\u505a\u4ec0\u4e48\uff0c\u800c\u4e0d\u89e3\u91ca\u7cfb\u7edf\u600e\u4e48\u505a</li> </ol> </li> <li>\u901a\u4fe1\u56fe\uff1a<ol> <li>\u5b9a\u4e49\uff1a\u63cf\u8ff0\u7c7b\uff08\u5bf9\u8c61\uff09\u4e4b\u95f4\u7684\u5173\u8054\u53ca\u5176\u5f7c\u6b64\u4e4b\u95f4\u7684\u6d88\u606f\u901a\u4fe1</li> <li>\u573a\u666f\uff1a\u901a\u4fe1\u56fe\u4e3b\u8981\u5173\u5fc3\u5bf9\u8c61\u4e4b\u95f4\u7684\u4ea4\u4e92</li> </ol> </li> <li>\u6d3b\u52a8\u56fe\uff1a<ol> <li>\u5b9a\u4e49\uff1a\u6d3b\u52a8\u56fe\u5728\u672c\u8d28\u4e0a\u662f\u4e00\u79cd\u6d41\u7a0b\u56fe\uff0c\u662f\u5b83\u7684\u4e00\u79cd\u6269\u5c55\uff0c\u4f46\u662f\u4e0d\u662f\u5b8c\u5168\u4e00\u6837</li> <li>\u573a\u666f\uff1a<ol> <li>\u6d3b\u52a8\u56fe\u80fd\u591f\u8868\u793a\u5e76\u53d1\u6d3b\u52a8\u7684\u60c5\u5f62\uff0c\u800c\u6d41\u7a0b\u56fe\u4e0d\u80fd\u3002\u6d3b\u52a8\u56fe\u662f\u9762\u5411\u5bf9\u8c61\u7684\uff0c\u800c\u6d41\u7a0b\u56fe\u662f\u9762\u5411\u8fc7\u7a0b\u7684</li> <li>\u548c\u72b6\u6001\u56fe\u7684\u533a\u522b\uff1a<ol> <li>\u6d3b\u52a8\u56fe\u7740\u91cd\u8868\u73b0\u4ece\u4e00\u4e2a\u6d3b\u52a8\u5230\u53e6\u4e00\u4e2a\u6d3b\u52a8\u7684\u63a7\u5236\u6d41\uff0c\u662f\u5185\u90e8\u5904\u7406\u9a71\u52a8\u7684\u6d41\u7a0b\u3002\u5b83\u7684\u8f6c\u6362\u662f\u81ea\u53d1\u5730\uff0c\u4e0d\u9700\u8981\u5916\u90e8\u4e8b\u4ef6\u7684\u9a71\u52a8</li> <li>\u72b6\u6001\u56fe\u7740\u91cd\u63cf\u8ff0\u4ece\u4e00\u4e2a\u72b6\u6001\u5230\u53e6\u4e00\u4e2a\u72b6\u6001\u7684\u6d41\u7a0b\uff0c\u4e3b\u8981\u6709\u5916\u90e8\u4e8b\u4ef6\u7684\u53c2\u4e0e\u3002</li> </ol> </li> </ol> </li> </ol> </li> <li>\u72b6\u6001\u56fe\uff1a<ol> <li>\u5b9a\u4e49\uff1a</li> <li>\u573a\u666f\uff1a</li> </ol> </li> </ol> </li> </ol>"},{"location":"backend/","title":"\u524d\u540e\u53f0\u6846\u67b6\u5b66\u4e60\u6587\u6863","text":"<p>\u5b9e\u4e60\u65f6\u5019\u5e73\u53f0\u7528\u7684\u662fPython Flask\uff0c\u4e3b\u8981\u662f\u56e0\u4e3a\u6709\u7b97\u6cd5\u751f\u6001\uff0c\u6bd4\u5982pytorch\uff0c\u6240\u4ee5\u7528Python\u6bd4\u8f83\u65b9\u4fbf\uff0c\u5185\u90e8SDK\u4e5f\u90fd\u662f\u4f18\u5148\u652f\u6301Python</p>"},{"location":"backend/#_2","title":"\u6280\u672f\u6808","text":"<ul> <li>\u540e\u53f0\u5f00\u53d1\u6846\u67b6 Springboot &amp; Flask</li> <li>\u524d\u540e\u53f0\u5f00\u53d1\u6846\u67b6 Vue</li> <li>\u5fae\u670d\u52a1\u601d\u60f3</li> </ul> <p>\u76f8\u5173\u6587\u6863\uff1a * Flask * SpingBoot * Docker &amp; K8s,\u8fd9\u91cc\u6ca1\u627e\u5230\u4e4b\u524d\u770b\u7684\u90a3\u4e2a</p>"},{"location":"backend/springboot-doc/","title":"springboot","text":""},{"location":"backend/springboot-doc/#_1","title":"\u5feb\u901f\u6784\u5efa\u9879\u76ee","text":""},{"location":"backend/springboot-doc/#_2","title":"\u542f\u52a8\u9879\u76ee","text":"<p>\u9996\u5148\uff0c\u521b\u5efa\u9879\u76ee\uff0c\u9009\u62e9\u5408\u9002\u7684\u7248\u672c\u4ee5\u53ca\u4f9d\u8d56\uff0c\u4e3a\u4e86\u7b80\u4fbf\u53ea\u9009\u62e9web\u4f9d\u8d56\uff0c\u7248\u672c\u4e3aspringboot3.3.1,\uff0cJDK17</p> <p>\u76ee\u5f55\u7ed3\u6784\u5982\u4e0a\u56fe\u6240\u793a\u3002</p> <p>\u9879\u76ee\u4ee3\u7801\u4e2d\u81ea\u52a8\u63d0\u4f9b\u5165\u53e3\u7a0b\u5e8f\uff1a</p> ApacheConf<pre><code>@SpringBootApplication\npublic class BootApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(BootApplication.class, args);\n    }\n\n}\n</code></pre> <p>\u5219\u5728\u540c\u7ea7\u76ee\u5f55\u4e0b\u521b\u5efa\u4e00\u4e2aHelloController\uff0c</p> ApacheConf<pre><code>/**\n * ClassName: HelloController\n * Package: com.lxbigdata.boot\n * Description:\n *\n * @author lx\n * @version 1.0\n */\n@RestController\npublic class HelloController {\n    @GetMapping(\"/hello\")\n    public String hello(){\n        return \"hello\";\n    }\n}\n</code></pre> <p>\u5176\u4e2d\u7684@RestController=@Controller+@ResponseBody,\u53ef\u4ee5\u6807\u8bc6\u4e00\u4e2aController\u5e76\u4e14\u4f7f\u7528JSON\u683c\u5f0f\u8fd4\u56de\u4fe1\u606f\u3002</p> <p>tomcat\u9ed8\u8ba48080\uff0c\u5219\u8bbf\u95eelocalhost:8080/hello\uff0c\u53ef\u4ee5\u5f97\u5230\u663e\u793a\u7684hello</p>"},{"location":"backend/springboot-doc/#_3","title":"\u9879\u76ee\u914d\u7f6e","text":"<p>\u4e4b\u6240\u4ee5\u8fd9\u4e48\u7b80\u5355\uff0c\u6838\u5fc3\u601d\u60f3\u662f\u7ea6\u5b9a\u4f18\u4e8e\u914d\u7f6e</p> <p>\u67e5\u770b\u9879\u76ee\u7684pom\u6587\u4ef6\u7684\u4f9d\u8d56\uff0c\u6838\u5fc3\u5c31\u4e00\u4e2a:</p> ApacheConf<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n</code></pre> <p>\u6b63\u5e38\u7684maven\u9879\u76ee\uff0c\u9700\u8981\uff1a\u6536\u96c6web\u6240\u7528\u7684jar\u5305\uff0c\u5c06\u5750\u6807\u6dfb\u52a0\u5230maven\u4f9d\u8d56\uff0c\u5e76\u4e0d\u65ad\u8c03\u6574\u7248\u672c\u76f4\u5230\u53ef\u4ee5\u8fd0\u884c\uff0c\u4f46\u662f\u73b0\u5728springboot\u63d0\u4f9b\u7ecf\u8fc7\u8c03\u8bd5\u7684\u4f9d\u8d56\u96c6\u5408\u3002\u5728\u521b\u5efa\u9879\u76ee\u7684\u65f6\u5019\uff0c\u9009\u62e9\u4e86\u4e00\u4e2aweb\u4f9d\u8d56\uff0c\u5219\u8fd9\u91cc\u5c31\u4e00\u4e2aweb-starter,\u514d\u53bb\u4e86\u53cd\u590d\u7c98\u8d34\u4f9d\u8d56\u5750\u6807\u96c6\u5408\u3002</p> <p>\u8fd8\u53ef\u4ee5\u505a\u4e00\u6b65\u9009\u62e9\uff0c\u5c31\u662f\u5c06Properties\u8f6c\u6362\u4e3ayaml\u6587\u4ef6\uff0c\u8fd9\u4e24\u8005\u7684\u533a\u522b\u5c31\u662fproperties\u662f\u6253\u5e73\u7684\uff0c\u4f46\u662fyaml\u4e3a\u5c42\u7ea7\u7ed3\u6784\uff0c\u66f4\u52a0\u6e05\u6670\u3002\u5982\u679c\u9879\u76ee\u4e2d\u8fd9\u4e24\u8005\u5171\u5b58\uff0c\u5219\u5148\u52a0\u8f7d\u7684yaml\u4f1a\u88ab\u540e\u52a0\u8f7d\u7684properties\u8986\u76d6\u3002</p>"},{"location":"backend/springboot-doc/#spring-mvc","title":"Spring MVC","text":""},{"location":"backend/springboot-doc/#mvc","title":"MVC","text":"<p>\u662f\u8f6f\u4ef6\u5de5\u7a0b\u4e2d\u4e00\u79cd\u8f6f\u4ef6\u67b6\u6784\u6a21\u5f0f\uff0c\u628a\u8f6f\u4ef6\u7cfb\u7edf\u5206\u4e3a\u4e09\u90e8\u5206</p> <ul> <li>\u6a21\u578bModel\uff0c\u7531\u4e00\u4e2a\u5b9e\u4f53bean\u5b9e\u73b0\uff0c\u662f\u6570\u636e\u7684\u8f7d\u4f53</li> <li>\u89c6\u56feView\uff0c\u5728\u524d\u540e\u7aef\u4e0d\u5206\u79bb\u7684\u60c5\u51b5\u4e0b\uff0c\u7531JSP\u62c5\u4efb\uff0c\u73b0\u5728\u5df2\u7ecf\u88ab\u524d\u7aef\u53d6\u4ee3\u3002\u8d1f\u8d23\u663e\u793a\u6570\u636e\u7ed9\u7528\u6237\uff0c\u5e76\u63a7\u5236\u7528\u6237\u7684\u8f93\u5165</li> <li>\u63a7\u5236\u5668Controller\uff0c\u5728JavaEE\u4e2d\uff0c\u53ef\u80fd\u662f\u4e00\u4e2aservlet\uff0c\u800c\u5728SpringMVC\u4e2d\uff0c\u6838\u5fc3\u662fDispatcherServlet\u3002\u7528\u4e8e\u5904\u7406\u7528\u6237\u8bf7\u6c42\uff0c\u8c03\u7528\u76f8\u5e94\u7684Model\u65b9\u6cd5\uff0c\u5e76\u8fd4\u56de\u76f8\u5e94\u7684View\u3002\u901a\u5e38\u662f\u5305\u542bHTTP\u8bf7\u6c42\u7684\u65b9\u6cd5(\u53ef\u4ee5\u4f7f\u7528\u6ce8\u89e3\u6807\u8bc6)\u7684\u7c7b\u3002</li> </ul>"},{"location":"backend/springboot-doc/#_4","title":"\u53c2\u6570\u63a5\u6536","text":"<p>\u6709\u56db\u79cd\u65b9\u5f0f\uff1a\uff1a\u65e0\u6ce8\u89e3\uff0c@RequestParam, @PathVariable, @RequestBody</p> <p>Spring MAC \u5e38\u7528\u6ce8\u89e3</p> \u6ce8\u89e3 \u4f5c\u7528\u57df \u8bf4\u660e @Controller \u7c7b Controller\u6807\u8bc6\uff0cSpring\u5bb9\u5668\u4f1a\u5728\u542f\u52a8\u7684\u65f6\u5019\u5c06\u5176\u521d\u59cb\u5316 @RequestMapping \u7c7b/\u65b9\u6cd5 URL\u6620\u5c04\uff0c\u8bbe\u7f6e\u63a5\u53e3\u7684\u8bbf\u95ee\u8def\u5f84 @ResponseBody \u7c7b/\u65b9\u6cd5 \u4ee5JSON\u683c\u5f0f\u8fd4\u56de\u6570\u636e\u3002\u5982\u679c\u4fee\u9970\u7c7b\uff0c\u5219\u5176\u6240\u6709\u65b9\u6cd5\u9ed8\u8ba4\u8fd4\u56deJSON @RequestParam \u53c2\u6570 \u4ee5\u540d\u5b57\u63a5\u6536\u53c2\u6570\uff0c\u76f8\u5f53\u4e8eServletRequest.getParameter() @RequestBody \u53c2\u6570 \u63a5\u6536JSON\u683c\u5f0f\u7684\u53c2\u6570\uff0c\u5e38\u7528\u4e8eAJAX\u8bf7\u6c42\uff0c\u524d\u540e\u7aef\u5206\u79bb\u573a\u666f\u4e0b @PathVariable \u53c2\u6570 \u63a5\u6536URL\u4e2d\u7684\u503c <p>\u7ec4\u5408\u6ce8\u89e3\uff1a</p> <p>@RestController=@Controller+@ResponseBody</p> <p>@GetMapping=@RequestMapping(method=RequestMethod.GET)\u3002\u53ef\u4ee5\u6620\u5c04\u4e00\u4e2a\u8bf7\u6c42\u8def\u5f84\uff0c\u5e76\u4e14\u8be5\u8def\u5f84\u53ea\u54cd\u5e94GET\u65b9\u6cd5</p> <p>@PostMapping=@RequestMapping(method=RequestMethod.POST)</p> <p>@PutMapping=@RequestMapping(method=RequestMethod.PUT)</p> <p>@PatchMapping=@RequestMapping(method=RequestMethod.PATCH)</p> <p>@DeleteMapping=@RequestMapping(method=RequestMethod.DELETE)</p> <p>AJAX\u8bf7\u6c42\uff1aJAX\uff08Asynchronous JavaScript and XML\uff09\u662f\u4e00\u79cd\u7528\u4e8e\u5728\u7f51\u9875\u4e0a\u8fdb\u884c\u5f02\u6b65\u6570\u636e\u4ea4\u6362\u7684\u6280\u672f\uff0c\u5141\u8bb8\u7f51\u9875\u5728\u4e0d\u91cd\u65b0\u52a0\u8f7d\u6574\u4e2a\u9875\u9762\u7684\u60c5\u51b5\u4e0b\u4e0e\u670d\u52a1\u5668\u8fdb\u884c\u901a\u4fe1\u3002\u867d\u7136AJAX\u6700\u521d\u4f7f\u7528XML\u4f5c\u4e3a\u6570\u636e\u683c\u5f0f\uff0c\u4f46\u73b0\u5728\u901a\u5e38\u4f7f\u7528JSON\u683c\u5f0f\uff0c\u56e0\u4e3a\u5b83\u66f4\u8f7b\u91cf\u4e14\u6613\u4e8e\u5904\u7406\u3002</p> <p>\u4f8b\u5b50</p> <p>\u5206\u522b\u521b\u5efaUser Data\u7c7b\uff0c\u4ee5\u53caController</p> ApacheConf<pre><code>@Data\n@AllArgsConstructor\npublic class User {\n    private String name;\n    private Integer age;\n}\n</code></pre> ApacheConf<pre><code>@RestController\npublic class ParamController {\n    //\u65e0\u53c2\u6570\n    //http://localhost:8080/noAnnotation?name=\uff20no\u65b9\u5f0f&amp;age=1\n    @GetMapping(\"/noAnnotation\")\n    public User noAnnotation(User user){\n        return user;\n    }\n    //@RequestParam\u6ce8\u89e3,\u76f8\u5f53\u4e8e\u8c03\u7528request.getParameter\u65b9\u6cd5\n    //http://localhost:8080/requestparam?name=\uff20RequestParam\u65b9\u5f0f&amp;age=2\n    @GetMapping(\"/requestParam\")\n    public User requestParam(@RequestParam String name, @RequestParam Integer age){\n        return new User(name,age);\n    }\n    //PathVariable\u6ce8\u89e3,\u4e24\u4e2a\u914d\u5408\u4ece\u8def\u5f84\u4e2d\u83b7\u53d6\u53c2\u6570\n    //http://localhost:8080/pathvariable/\uff20PathVariable\u65b9\u5f0f/3\n    @GetMapping(\"/pathVariable/{name}/{age}\")\n    public User pathVariable(@PathVariable String name, @PathVariable Integer age){\n        return new User(name,age);\n    }\n    //@RequestBody\u6ce8\u89e3,\u5c06\u8bf7\u6c42\u4f53\u4e2d\u7684json\u6570\u636e\u6620\u5c04\u4e3a\u5bf9\u8c61\n    //\u8fd9\u4e2a\u65b9\u5f0f\u9700\u8981post\u8bf7\u6c42\uff0c\u56e0\u4e3a\u662f\u4e0a\u4f20\u8d44\u6e90\n    @PostMapping(\"/requestBody\")\n    public User requestBody(@RequestBody User user){\n        return user;\n    }\n}\n</code></pre> <p>\u5219\u53ef\u4ee5\u901a\u8fc7\u5404\u79cd\u65b9\u5f0f\u89e3\u6790\u53c2\u6570\u3002\u6ce8\u610f\u6700\u540e\u4e00\u79cd\u65b9\u5f0f\uff0c\u7531\u4e8e\u662f\u4e0a\u4f20\u6570\u636e\uff0c\u4f7f\u7528POST\u65b9\u5f0f\uff0c\u53ef\u4ee5\u5728idea\u81ea\u5e26\u7684http\u5ba2\u6237\u7aef\u5199\u5982\u4e0b\u7684http\u8bf7\u6c42\uff0c\u53ef\u5728\u63a7\u5236\u53f0\u5f97\u5230\u8f93\u51fa</p> ApacheConf<pre><code>POST http://localhost:8080/requestBody\nContent-Type: application/json\n\n{\n  \"name\": \"Request Body\",\n  \"age\": 4\n}\n</code></pre>"},{"location":"backend/springboot-doc/#_5","title":"\u53c2\u6570\u6821\u9a8c","text":"<p>\u6b64\u5904\u53ea\u662f\u6700\u57fa\u672c\u7684\u53c2\u6570\u6821\u9a8c\u903b\u8f91</p> <p>\u53ea\u9700\u8981\u5f15\u5165validation-starter\uff0c\u5219\u53ef\u4ee5\u5728\u6570\u636e\u7c7b\u4e0a\u505a\u6821\u9a8c\u3002\u6bd4\u5982post\u4e0a\u4f20\u6570\u636e\u65f6\u5019\u5b57\u6bb5\u5c5e\u6027\u5982\u679c\u4e0d\u6b63\u786e\uff0c\u5219\u4f1a\u8f93\u51fa\u9519\u8bef\u65e5\u5fd7</p> ApacheConf<pre><code>@Data\n@AllArgsConstructor\npublic class User {\n    @NotBlank(message = \"name is not blank\")\n    private String name;\n    @Min(value = 1, message = \"age can not lower than 1\")\n    private Integer age;\n}\n</code></pre> <p>\u5e38\u89c1\u7684\u6ce8\u89e3</p> <p></p>"},{"location":"backend/springboot-doc/#_6","title":"\u539f\u7406\u89e3\u6790","text":"<p>\u6574\u4f53\u6d41\u7a0b</p> <p></p> <p>\u5047\u8bbe\u73b0\u5728\u6d4f\u89c8\u5668\u53d1\u8d77\u4e00\u4e2a\u8bf7\u6c42(\u5982\u5982http://localhost\uff1a8080/hello),\u5219\u4f1a\u7ecf\u5386\u5982\u4e0b\u6b65\u9aa4</p> <ol> <li>DispatcherServlet\u63a5\u6536\u7528\u6237\u8bf7\u6c42</li> <li>DispatcherServlet\u6839\u636e\u7528\u6237\u8bf7\u6c42\u7684HandlerMapping\u627e\u5230\u5bf9\u5e94\u7684Handler\uff0c\u5f97\u5230\u4e00\u4e2aHandlerExcutionChain</li> <li>DispatcherServlet\u901a\u8fc7HandlerAdapter\u8c03\u7528COntroller\u8fdb\u884c\u540e\u7eed\u4e1a\u52a1\u7684\u903b\u8f91\u5904\u7406\uff0c\u7b49\u5f854\u8fd4\u56de</li> <li>\u5904\u7406\u5b8c\u4e1a\u52a1\u903b\u8f91\uff0c\u5c06ModelAndView\u8fd4\u56de\u7ed9DispatcherServlet</li> <li>DispatcherServlet\u901a\u8fc7ViewResolver\u8fdb\u884c\u89c6\u56fe\u89e3\u6790\uff0c\u5e76\u8fd4\u56deview</li> <li>DispathcerServlet\u5bf9view\u8fdb\u884c\u6e32\u67d3</li> <li>\u6700\u7ec8\u5c06\u7ed3\u679c\u8fd4\u56de\u7ed9\u7528\u6237</li> </ol> <p>\u5f53\u8fd4\u56dejson\u7c7b\u578b\u6570\u636e\u7684\u65f6\u5019\uff0c\u4f1a\u7701\u53bb\u5bf9\u89c6\u56fe\u5904\u7406\u7684\u90e8\u5206\uff0c\u5e38\u89c1\u7684@RestController\u5c31\u6709\u8fd9\u4e2a\u529f\u80fd</p> <p>\u6838\u5fc3\u7ec4\u4ef6</p> <p>Handler\uff0cHandlerMapping\uff0cHandlerAdapter (\u548cNetty\u7b49\u67b6\u6784\u5f02\u66f2\u540c\u5de5)</p> <p>\u5176\u4e2dHandler\u662f\u7528\u6765\u5177\u4f53\u505a\u4e8b\u60c5\u7684\uff0c\u5bf9\u5e94Controller\u4e2d\u7684\u65b9\u6cd5\u3002\u6240\u6709\u6709\uff20RequestMapping\u7684\u65b9\u6cd5\u90fd\u53ef\u4ee5\u88ab\u770b\u4f5c\u4e00\u4e2aHandler\u3002</p> <p>\u800chandlerMapping\u662f\u7528\u6765\u627e\u5230Handler\u7684\uff0c\u662f\u8bf7\u6c42\u8def\u5f84\u548cHandler\u7684\u6620\u5c04\u5173\u7cfb</p> <p>\u800cHandlerAdapter\u662f\u4e00\u4e2a\u9002\u914d\u5668\uff0c\u7528\u6765\u548c\u5177\u4f53\u7684Handler\u914d\u5408\u4f7f\u7528\uff0c\u8be5\u63a5\u53e3\u7684\u6ce8\u91ca\u5982\u4e0b\uff1a</p> <p>MVC framework SPI, allowing parameterization of the core MVC workflow. Interface that must be implemented for each handler type to handle a request. This interface is used to allow the DispatcherServlet to be indefinitely extensible. The DispatcherServlet accesses all installed handlers through this interface, meaning that it does not contain code specific to any handler type. Note that a handler can be of type Object. This is to enable handlers from other frameworks to be integrated with this framework without custom coding, as well as to allow for annotation-driven handler objects that do not obey any specific Java interface. This interface is not intended for application developers. It is available to handlers who want to develop their own web workflow. Note: HandlerAdapter implementors may implement the org.springframework.core.Ordered interface to be able to specify a sorting order (and thus a priority) for getting applied by the DispatcherServlet. Non-Ordered instances get treated as the lowest priority.</p> <p>\u5728Netty\u4e2d\uff0c\u540c\u6837\u6709ChannelHandler\u548cHandlerAdapter\u7684\u914d\u5408\uff0c\u9002\u914d\u5668\u53ef\u4ee5\u5c06\u81ea\u5b9a\u4e49\u4e00\u4e2aHandler\u6240\u9700\u8981\u7684\u52aa\u529b\u505a\u5230\u6700\u4f4e\uff0c\u56e0\u4e3a\u4ed6\u4eec\u63d0\u4f9b\u4e86\u5927\u90e8\u5206\u65b9\u6cd5\u7684\u9ed8\u8ba4\u5b9e\u73b0\uff0c\u4f7f\u5f97\u5f00\u53d1\u8005\u53ea\u9700\u8981\u5173\u5fc3\u6838\u5fc3\u903b\u8f91\u5373\u53ef</p> <p>DispatcherServlet\u7684\u6838\u5fc3\u65b9\u6cd5\u662fdoDispatcher:</p> <p>Process the actual dispatching to the handler. The handler will be obtained by applying the servlet's HandlerMappings in order. The HandlerAdapter will be obtained by querying the servlet's installed HandlerAdapters to find the first that supports the handler class. All HTTP methods are handled by this method. It's up to HandlerAdapters or handlers themselves to decide which methods are acceptable. \u5f62\u53c2: request \u2013 current HTTP request response \u2013 current HTTP response \u629b\u51fa: Exception \u2013 in case of any kind of processing failure</p> <p>\u8be5\u65b9\u6cd5\u7684\u6838\u5fc3\u6b65\u9aa4\u5982\u4e0b\uff1a</p> ApacheConf<pre><code>// Determine handler for the current request.\nmappedHandler = getHandler(processedRequest);\n// Determine handler adapter for the current request.\nHandlerAdapter ha = getHandlerAdapter(mappedHandler.getHandler());\n// Actually invoke the handler.\nmv = ha.handle(processedRequest, response, mappedHandler.getHandler());\n//\nprocessDispatchResult(processedRequest, response, mappedHandler, mv, dispatchException);\n</code></pre> <p>\u9996\u5148\uff0c\u6839\u636e\u8bf7\u6c42\uff0c\u627e\u5230HandlerExecutionChain</p> <p>HandlerExecutionChain \u662f Spring MVC \u6846\u67b6\u4e2d\u7684\u4e00\u4e2a\u6838\u5fc3\u7c7b\uff0c\u7528\u4e8e\u5c01\u88c5\u5904\u7406\u8bf7\u6c42\u7684\u5904\u7406\u5668\uff08Handler\uff09\u4ee5\u53ca\u4e0e\u8be5\u5904\u7406\u5668\u5173\u8054\u7684\u62e6\u622a\u5668\uff08Interceptors\uff09\u3002\u5b83\u53ef\u4ee5\u5305\u542b\u4e00\u4e2aHandler\u548c\u591a\u4e2aInterceptor</p> <p>\u6839\u636emapping\uff0c\u53ef\u4ee5\u627e\u5230Chain\u3002\u7136\u540e\u6839\u636echain\uff0c\u5728\u8bf7\u6c42\u5230\u8fbe\u5904\u7406\u5668\u4e4b\u524d\uff0c\u8c03\u7528preHandle,\u5904\u7406\u4e4b\u540e\uff0c\u8c03\u7528postHandle\uff0c\u8bf7\u6c42\u5b8c\u6210\u4e4b\u540e\uff0c\u8c03\u7528afterCompletion\u65b9\u6cd5</p> <p>\u7136\u540e\u6839\u636e\u5176\u4e2d\u7684Handler\u627e\u5230HandlerAdapter</p> <p>\u7136\u540e\u5904\u7406\u8bf7\u6c42\u6d88\u606f\uff0c\u6700\u540e\u8fd4\u56de\u7ed3\u679c</p> <p>\u5176\u4e2d\u67e5\u627eHandlerExecutionChain\u7684\u65b9\u6cd5\u5982\u4e0b\uff1a</p> ApacheConf<pre><code>    protected HandlerExecutionChain getHandler(HttpServletRequest request) throws Exception {\n        if (this.handlerMappings != null) {\n            for (HandlerMapping mapping : this.handlerMappings) {\n                HandlerExecutionChain handler = mapping.getHandler(request);\n                if (handler != null) {\n                    return handler;\n                }\n            }\n        }\n        return null;\n    }\n</code></pre> <p>\u800c\u67e5\u627eAdpater\u7684\u65b9\u6cd5\u5982\u4e0b\uff1a</p> ApacheConf<pre><code>    protected HandlerAdapter getHandlerAdapter(Object handler) throws ServletException {\n        if (this.handlerAdapters != null) {\n            for (HandlerAdapter adapter : this.handlerAdapters) {\n                if (adapter.supports(handler)) {\n                    return adapter;\n                }\n            }\n        }\n        throw new ServletException(\"No adapter for handler [\" + handler +\n                \"]: The DispatcherServlet configuration needs to include a HandlerAdapter that supports this handler\");\n    }\n</code></pre>"},{"location":"backend/springboot-doc/#_7","title":"\u62e6\u622a\u5668","text":"<p>\u4f7f\u7528\u573a\u666f\uff1a\u767b\u5f55\u8ba4\u8bc1\uff0c\u6743\u9650\u8ba4\u8bc1\uff0c\u8bb0\u5f55\u65e5\u5fd7\uff0c\u6027\u80fd\u76d1\u63a7</p> <p>\u63a5\u53e3\u7ee7\u627f\u5173\u7cfb\u5982\u4e0b\uff1a</p> <p></p> <p>\u4e3b\u8981\u6709AsyncHandlerIntercptor,WebContentInterceptor,MappedInterceptor</p> <p>\u81ea\u5b9a\u4e49\u00b7\u4e00\u4e2a\u62e6\u622a\u5668\uff0c\u5b9e\u73b0\u5176\u6838\u5fc3\u65b9\u6cd5\u5373\u53ef\u3002</p> <p>\u591a\u4e2a\u62e6\u622a\u5668\u7684\u6267\u884c\u987a\u5e8f</p> <p>\u76f8\u5f53\u4e8e\u5b89\u88c5\u4e86\u591a\u4e2aInboundHanlder\u548cOutboundHandler\uff0c\u5219\u8fdb\u5165\u6309\u7167\u987a\u5e8f\uff0c\u800c\u51fa\u53bb\u5219\u5012\u5e8f\u3002</p> <p>in1        --------&gt;     in2</p> <p>out1     &lt;-------      out2</p>"},{"location":"backend/springboot-doc/#restful","title":"Restful","text":""},{"location":"backend/springboot-doc/#springdoc","title":"SpringDoc","text":"<p>SpringDoc\u662f\u4e00\u6b3e\u7528\u4e8e\u751f\u6210\u3001\u63cf\u8ff0\u3001\u8c03\u7528\u548c\u53ef\u89c6\u5316RESTful\u98ce\u683c\u7684Web\u670d\u52a1\u63a5\u53e3\u6587\u6863\u7684\u6846\u67b6\u3002\u6700\u5927\u7279\u70b9\u662f\u53ef\u4ee5\u4f7f\u63a5\u53e3\u6587\u6863\u548c\u4ee3\u7801\u5b9e\u65f6\u540c\u6b65\u3002</p> <p>\u63a5\u53e3\u6587\u6863\uff0c\u662f\u8054\u7cfb\u524d\u540e\u7aef\u5f00\u53d1\u7684\u67a2\u7ebd\u3002</p> <p>\u5177\u4f53\u914d\u7f6e\uff1a</p> ApacheConf<pre><code>        &lt;!-- springdoc --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n            &lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\n            &lt;version&gt;2.4.0&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre> ApacheConf<pre><code># springdoc\nspringdoc:\n  api-docs:\n    path: /v3/api-docs\n  swagger-ui:\n    doc-expansion: none\n    url: \"/v3/api-docs\"\n    path: /swagger-ui.html\n</code></pre> <p>\u5373\u53ef\u76f4\u63a5\u8bbf\u95ee\u63a5\u53e3\u6587\u6863\u3002</p> <p>todo</p> <p>\u5177\u4f53\u914d\u7f6e</p>"},{"location":"backend/springboot-doc/#rest","title":"Rest","text":"<p>\u5b9a\u4e49\uff1a\u8868\u73b0\u5c42\u8f6c\u6362\uff0c\u4e5f\u5c31\u662f\u7531HTTP\u64cd\u4f5c\u5f15\u8d77\u7684\u5404\u79cd\u8d44\u6e90\u72b6\u6001\u8f6c\u6362\u3002</p> <p>\u8d44\u6e90</p> <p>\u8d44\u6e90\u7684\u8303\u56f4\u6bd4\u8f83\u5bbd\u6cdb\uff0c\u6bd4\u5982\u4e00\u4e2a\u6587\u4ef6\uff08\u56fe\u7247\u3001\u6587\u6863\u3001\u97f3\u4e50\u7b49\uff09\u3001\u4e00\u6761\u6570\u636e\uff08\u7528\u6237\u4fe1\u606f\u3001\u8ba2\u5355\u7b49\uff09\u90fd\u53ef\u4ee5\u88ab\u770b\u4f5c\u8d44\u6e90\uff08\u6bcf\u4e2a\u8d44\u6e90\u90fd\u6709\u4e00\u4e2a\u5bf9\u5e94\u7684URI\uff09</p> <p>\u8868\u73b0\u5c42</p> <p>\u8d44\u6e90\u4ee5\u4ec0\u4e48\u6837\u7684\u5f62\u5f0f\u6765\u5c55\u73b0\u81ea\u5df1\u2014\u2014\u4f8b\u5982\uff0c\u6587\u672c\u53ef\u4ee5\u662fJSON\u6216XML\u683c\u5f0f\u7684\uff0c\u56fe\u7247\u53ef\u4ee5\u662fJPEG\u6216\u5176\u4ed6\u683c\u5f0f\u7684</p> <p>\u72b6\u6001\u8f6c\u6362</p> <p>\u7531HTTP\u7684\u5404\u79cd\u52a8\u4f5c\u5f15\u8d77\u7684\u72b6\u6001\u8f6c\u6362\u3002</p> <p>CRUD\u53ef\u4ee5\u5bf9\u5e94HTTP\u7684post\uff0cdelete\uff0cput\uff0cget</p> <p>HTTP\u5404\u79cd\u64cd\u4f5c\u7684\u5b89\u5168\u6027\u548c\u5e42\u7b49\u6027\u5982\u4e0b\uff1a</p> <p></p> <p>RestFul\u98ce\u683c</p> <p>\u8981\u6c42\uff1a\u7528URI\u5b9a\u4f4d\u8d44\u6e90\uff0cURI\u7531\u540d\u8bcd\u7ec4\u6210\uff0c\u4f7f\u7528HTTP\u64cd\u4f5c\u8d44\u6e90</p> <p>\u4f8b\u5982GET \"http:localhost:8080/rest/user/1\" \u5c31\u662f\u4e00\u4e2aRestful\u98ce\u683c\u7684\u64cd\u4f5c\uff0c\u5bf9\u5e94\u4ee3\u7801\u5982\u4e0b\uff1a</p> <p>\u793a\u4f8b</p> ApacheConf<pre><code>@RestController\npublic class restfulController {\n    //\u589e\n    @PostMapping(\"/user\")\n    @Operation(summary = \"add user\")\n    public boolean add(@RequestBody User user){\n        return user == null;\n    }\n    //\u5220\n    @DeleteMapping(\"/user/{id}\")\n    @Operation(summary = \"delete user by id\")\n    public boolean delete(@PathVariable Integer id){\n        return id == null;\n    }\n    //\u6539\u3002PATCH\u7528\u4e8e\u66f4\u65b0\u90e8\u5206\u5b57\u6bb5\uff0c\u800cPUT\u7528\u4e8e\u66f4\u65b0\u5168\u90e8\u5b57\u6bb5\n    @PutMapping(\"/user\")\n    @Operation(summary = \"update user\")\n    public boolean update(@RequestBody User user){\n        return user == null;\n    }\n    //\u67e5\n    @GetMapping(\"/user/{id}\")\n    @Operation(summary = \"get user by id\")\n    public User get(@PathVariable Integer id){\n        return new User(\"hhh\"+id, 18);\n    }\n}\n</code></pre>"},{"location":"backend/springboot-doc/#iocaop","title":"IOC\u548cAOP","text":"<p>Spring\u7684\u6838\u5fc3\u601d\u60f3\u662fIOC\u4ee5\u53caAOP\uff0c\u800cSpringBoot\u5728\u6b64\u57fa\u7840\u4e0a\u8fdb\u884c\u4e86\u81ea\u52a8\u914d\u7f6e\u3002</p>"},{"location":"backend/springboot-doc/#ioc","title":"IOC","text":"<p>Inversion of Control\uff0c\u63a7\u5236\u7ffb\u8f6c\uff0c\u662f\u4e00\u79cd\u7f16\u7a0b\u601d\u60f3\uff0c\u4e0d\u9700\u8981\u4efb\u4f55\u65b0\u7684\u6280\u672f\u3002\u901a\u5e38\u7684\u5b9e\u73b0\u65b9\u5f0f\u6709\u4e24\u79cd\uff1a\u4f9d\u8d56\u6ce8\u5165\u548c\u4f9d\u8d56\u67e5\u627e\u3002</p> <p>\u4f9d\u8d56\u67e5\u627e\uff1a\u4f9d\u8d56\u67e5\u627e\u4f1a\u4e3b\u52a8\u83b7\u53d6\uff0c\u5728\u9700\u8981\u7684\u65f6\u5019\u901a\u8fc7\u8c03\u7528\u6846\u67b6\u63d0\u4f9b\u7684\u65b9\u6cd5\u6765\u83b7\u53d6\u5bf9\u8c61\uff0c\u5e76\u4e14\u5728\u83b7\u53d6\u65f6\u9700\u8981\u63d0\u4f9b\u76f8\u5173\u7684\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\u3001key\u7b49\u4fe1\u606f\u6765\u786e\u5b9a\u83b7\u53d6\u5bf9\u8c61\u7684\u72b6\u6001\u3002</p> <p>\u4f9d\u8d56\u6ce8\u5165\uff1aSpringboot\u4e2d\u4f7f\u7528\u7684\u662f\u57fa\u4e8e\u6ce8\u89e3\u7684\u4f9d\u8d56\u8f93\u5165\u3002</p> <p>\u4e3a\u4ec0\u4e48\u8981\u6709\u63a7\u5236\u53cd\u8f6c\u8fd9\u79cd\u7f16\u7a0b\u6a21\u5f0f\uff1f</p> <p>Class A\u4ee3\u8868A\u662f\u4e00\u4e2a\u7c7b\uff0c\u800cA a=new A()\u4ee3\u8868\u521b\u5efa\u4e00\u4e2aA\u7c7b\u578b\u7684\u5bf9\u8c61a\u3002\u5728\u6ca1\u6709\u63a7\u5236\u53cd\u8f6c\u7684\u60c5\u51b5\u4e0b\uff0c\u5728A\u7c7b\u4e2d\u4f7f\u7528B\u7c7b\u7684b\u5bf9\u8c61\u65f6\uff0c\u9700\u8981\u5728A\u7c7b\u4e2d\u65b0\u5efa\u4e00\u4e2ab\u5bf9\u8c61\u3002\u5982\u679c\u6211\u4eec\u4f7f\u7528\u63a7\u5236\u53cd\u8f6c\uff0c\u5219\u53ea\u9700\u8981\u5148\u5728A\u7c7b\u4e2d\u58f0\u660e\u4e00\u4e2a\u79c1\u6709\u7684b\u5bf9\u8c61\uff0c\u5373private B b\uff0c\u7136\u540e\u5c06\u521b\u5efab\u5bf9\u8c61\u7684\u5de5\u4f5c\u4ea4\u7531\u5bb9\u5668\u6765\u5b8c\u6210\u3002\u5bb9\u5668\u4f1a\u6839\u636e\u6ce8\u89e3\u6216\u8005\u914d\u7f6e\u6587\u4ef6\u5c06b\u5bf9\u8c61\u6ce8\u5165A\u7c7b\u7684\u5b9e\u4f8b\u4e2d\u3002</p> <p>\u6bd4\u5982\u4e0b\u9762\u7684\u4f8b\u5b50\uff1a</p> <p>\u9996\u5148\uff0c\u662f\u5404\u79cd\u4ea4\u901a\u65b9\u5f0f\u7684\u63a5\u53e3\uff0c\u5f53\u4e00\u4e2aperson\u8981\u4fee\u6539\u5b83\u7684drive\u884c\u4e3a\u7684\u65f6\u5019\uff0c\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u9700\u8981\u8fdd\u53cd\u5f00\u95ed\u539f\u5219\uff0c\u4e0d\u65ad\u4fee\u6539\u5df2\u6709\u7684\u5185\u90e8\u4ee3\u7801\u3002</p> ApacheConf<pre><code>public interface Driveable {\n    void drive();\n}\n\nclass Car implements Driveable{\n    @Override\n    public void drive() {\n        System.out.println(\"Car drive\");\n    }\n}\n</code></pre> ApacheConf<pre><code>public class Person {\n    public void hangOut(){\n//        Driveable car = new Car();\n//        car.drive();\n        Driveable bike = new Bike();\n        bike.drive();\n    }\n}\n</code></pre> <p>\u5982\u679c\u4f7f\u7528\u4e86IOC\u65b9\u5f0f\uff0c\u5219\u53ef\u4ee5\u6539\u9020Person\u7c7b\uff0c\u5c06\u4ea4\u901a\u5de5\u5177\u4ece\u65b9\u6cd5\u4e2d\u63d0\u53d6\u51fa\u6765\uff0c\u53d8\u4e3aPerson\u7c7b\u7684\u79c1\u6709\u53d8\u91cf\uff1a</p> ApacheConf<pre><code>@AllArgsConstructor\npublic class Person {\n    private Driveable driveable;\n    public void hangOut(){\n        driveable.drive();\n    }\n}\n</code></pre> <p>\u6a21\u62dfSpringbean\u5bb9\u5668,\u5176\u7528\u4e00\u4e2amap\u7ef4\u62a4\u521d\u59cb\u5316\u7684\u65f6\u5019\u6ce8\u5165\u7684bean.</p> ApacheConf<pre><code>public class Container {\n    private Map&lt;Class&lt;?&gt;,Object&gt; beans = new ConcurrentHashMap&lt;&gt;();\n\n    /**\n     * \u83b7\u53d6\u8fd9\u4e2a\u5df2\u7ecf\u6ce8\u5165\u8fc7\u7684bean\n     * @param clazz\n     * @return\n     * @param &lt;T&gt;\n     */\n    public &lt;T&gt; T getBean(Class&lt;T&gt; clazz){\n        Object bean = beans.get(clazz);\n        if(bean == null || !clazz.isInstance(bean)){\n            return null;\n        }else{\n            return (T)bean;\n        }\n    }\n\n    /**\n     * \u5982\u679c\u5bb9\u5668\u4e2d\u4e0d\u5b58\u5728\uff0c\u5219\u6dfb\u52a0bean\n     * @param clazz\n     * @param bean\n     * @param &lt;T&gt;\n     */\n    public &lt;T&gt; void put(Class&lt;T&gt; clazz,T bean){\n        beans.putIfAbsent(clazz,bean);\n    }\n}\n</code></pre> <p>\u5219\u8fd9\u65f6\u5019\u5982\u679c\u4e00\u4e2a\u4eba\u5411\u52a8\u6001\u4fee\u6539\u5b83\u7684Drive\u884c\u4e3a\u7684\u542b\u4e49\uff0c\u5219\u53ef\u4ee5\u4e0d\u7528\u4fee\u6539\u5185\u90e8\u4ee3\u7801</p> ApacheConf<pre><code>public class IOCTest {\n    //bean\u5bb9\u5668\n    private Container container;\n    //\u6a21\u62dfSpring\u5bb9\u5668\u521d\u59cb\u5316\n    @BeforeEach\n    public void init(){\n        container = new Container();\n        container.put(Car.class,new Car());\n        container.put(Bike.class,new Bike());\n    }\n    @Test\n    public void test(){\n        //\u6a21\u62dfautowired\u6ce8\u5165\n        Bike bike = container.getBean(Bike.class);\n        Person a = new Person(bike);\n        a.hangOut();\n        //\u5982\u679c\u8981\u6362\u8f66\uff0c\u53ea\u9700\u8981\u4fee\u6539\u5bb9\u5668\u4e2d\u7684bean\u5373\u53ef,\u4e0d\u7528\u518d\u4fee\u6539Person\u7c7b\n        Car car = container.getBean(Car.class);\n        a = new Person(car);\n        a.hangOut();\n    }\n}\n</code></pre> <p>IOC\u7684\u610f\u4e49</p> <p>\u597d\u5904\u4e4b\u4e00\u5f53\u7136\u662f\u4e0d\u7528\u518d\u624b\u52a8\u521b\u5efa\u5bf9\u8c61\uff0c\u76f4\u63a5\u4f7f\u7528@Autowired\u6ce8\u89e3\u5c31\u53ef\u4ee5\u3002</p> <p>\u4f46\u662f\u6700\u6838\u5fc3\u7684\u597d\u5904\u662f\uff1a\u8ba9\u4ee3\u7801\u8131\u79bb\u4e86\u5bf9\u5177\u4f53\u5b9e\u73b0\u7684\u4f9d\u8d56\u3002\u539f\u59cb\u7684Person\u540c\u65f6\u4f9d\u8d56\u4e8eDriveable\u63a5\u53e3\u4ee5\u53ca\u5176\u5177\u4f53\u5b9e\u73b0\u3002\u4f46\u662f\u73b0\u5728\u4e0d\u4f9d\u8d56\u4e8e\u5177\u4f53\u5b9e\u73b0\u4e86\uff0c\u53ea\u4f9d\u8d56\u4e8e\u62bd\u8c61\u7684\u63a5\u53e3\u3002</p> <p></p>"},{"location":"backend/springboot-doc/#aop","title":"AOP","text":"<p>\u7a0b\u5e8f\u8bbe\u8ba1\u601d\u60f3\u76844\u7c7b\uff1a</p> <ul> <li>OOP\uff1a\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b</li> <li>AOP\uff1a\u9762\u5411\u5207\u9762\u7f16\u7a0b</li> <li>POP\uff1a\u9762\u5411\u8fc7\u7a0b\u7f16\u7a0b</li> <li>FP\uff1a\u51fd\u6570\u5f0f\u7f16\u7a0b</li> </ul> <p>\u800cAOP\u5176\u5b9e\u662fOOP\u7684\u4e00\u79cd\u6269\u5c55\u3002</p> <p>\u8003\u8651\u5982\u679c\u8ba9\u5728\u4e00\u6bb5\u7a0b\u5e8f\u4e2d\u52a0\u5165\u8ba1\u7b97\u8fd0\u884c\u65f6\u95f4\u7684\u903b\u8f91\uff0c\u76f4\u63a5\u679a\u4e3e\u5e76\u7f16\u7801\uff0c\u5219\u8fd8\u53ef\u4ee5\u63a5\u53d7\u3002\u4f46\u662f\u5f53\u6709\u51e0\u767e\u4e2a\u4e1a\u52a1\u903b\u8f91\uff0c\u5e76\u4e14\u7edf\u8ba1\u65f6\u95f4\u9891\u7e41\u53d8\u52a8\u7684\u65f6\u5019\uff0c\u5c31\u4e0d\u80fd\u8fd9\u6837\u4e86\u3002</p> <p>\u4f46\u662f\u901a\u8fc7\u89c2\u5bdf\uff0c\u70ed\u6cb3\u4e1a\u52a1\u903b\u8f91\u7684\u6267\u884c\u65f6\u95f4\u6240\u9700\u8981\u7684\u64cd\u4f5c\u90fd\u662f\u4e00\u6837\u7684\uff0c\u90fd\u662f\u7ed3\u675f\u65f6\u95f4-\u5f00\u59cb\u65f6\u95f4\uff0c\u6c42\u4e24\u4e2a\u65f6\u95f4\u70b9\u7684\u5dee\u503c\u3002\u5e38\u89c4\u601d\u8def\u5c31\u662f\u5c06\u5176\u5c01\u88c5\u4e3a\u4e00\u4e2a\u65b9\u6cd5\uff0c\u54ea\u91cc\u9700\u8981\u5c31\u5728\u54ea\u91cc\u8c03\u7528\u3002\u4f46\u662f\uff0c\u8fd9\u662f\u4e00\u79cd\u4ee3\u7801\u7684\u5165\u4fb5\u3002</p> <p>AOP\u5c31\u662f\u4e3a\u4e86\u5f25\u8865\u8fd9\u79cd\u4e0d\u8db3\uff0cOOP\u64c5\u957f\u89e3\u51b3\u7eb5\u5411\u7684\u4e1a\u52a1\u903b\u8f91\uff0c\u4f46\u662f\u5bf9\u4e8e\u6a2a\u5411\u7684\u516c\u5171\u64cd\u4f5c\u5374\u6bd4\u8f83\u4e4f\u529b\uff0c\u8fd9\u5c31\u9700\u8981AOP\u6765\u89e3\u51b3\u3002</p> <p>\u6bd4\u5982\u767b\u5f55\uff0c\u641c\u7d22\uff0c\u4e0b\u5355\u903b\u8f91\uff0c\u90fd\u9700\u8981\u6027\u80fd\u7edf\u8ba1\uff0c\u8bb0\u5f55\u65e5\u5fd7\uff0c\u6743\u9650\u68c0\u67e5\uff0c\u8fd9\u5c31\u53ef\u4ee5\u4f7f\u7528AOP\u64cd\u4f5c\u3002\u8fd9\u5c31\u662f\u76f8\u5f53\u4e8e\u5728\u591a\u4e2a\u7eb5\u5411\u67f1\u9762\u6a2a\u5411\u5207\u8fc7\u7684\u64cd\u4f5c</p> <p></p> <p>\u6838\u5fc3\u6982\u5ff5</p> <p>Advice\uff1a\u901a\u77e5\uff0c\u60f3\u8ba9AOP\u505a\u7684\u4e8b\u60c5\uff0c\u6bd4\u5982\u6027\u80fd\u7edf\u8ba1</p> <p>JoinPoint\uff1a\u8fde\u63a5\u70b9\uff0c\u5141\u8bb8AOP\u901a\u77e5\u7684\u5730\u65b9\uff0c\u6bd4\u5982\u5728\u65b9\u6cd5\u88ab\u8c03\u7528\u524d\u6267\u884c\u6743\u9650\u68c0\u67e5\uff0c\u5219JoinPoint\u5c31\u662f\u65b9\u6cd5\u8c03\u7528\u524d\u3002</p> <p>PointCut:  \u5207\u5165\u70b9\uff0c\u7528\u4e8e\u7b5b\u9009JoinPoint\u7684\u6761\u4ef6\uff0c\u5bf9Joinpoint\u505a\u4e00\u6b21filter,\u7136\u540e\u5bf9\u5269\u4e0b\u7684\u505aAdvice</p> <p>Aspect: \u5207\u9762\uff0c\u4e00\u4e2a\u5305\u542bPointCut\u4ee5\u53caAdvice\u7684\u96c6\u5408\uff0c\u5b8c\u6574\u7684\u5b9a\u4e49\u4e86\u5728\u4ec0\u4e48\u6761\u4ef6\u4e0b\u505a\u4ec0\u4e48\u4e8b\u60c5\u3002\u56fe\u4e2d\u7684\u6bcf\u4e2a\u6a2a\u7ebf\u5c31\u662f\u4e00\u4e2aApsect\u3002\u6bd4\u5982\u5f53\u4e0b\u5355\u63a5\u53e3\u88ab\u8c03\u7528\u7684\u65f6\u5019\u8fdb\u884c\u6743\u9650\u68c0\u67e5\u3002</p> <p>\u5e94\u7528\u573a\u666f</p> <p>\u4eceAdvice\u7684\u65f6\u673a\u6765\u770b\uff0c\u6709</p> <ul> <li>Before\uff1a\u5728\u76ee\u6807\u65b9\u6cd5\u6267\u884c\u524d\u8c03\u7528Advice</li> <li>After[finally]: \u76ee\u6807\u65b9\u6cd5\u6267\u884c\u7ed3\u675f\u540e</li> <li>After[Returning]\uff1a\u76ee\u6807\u65b9\u6cd5\u6267\u884c\u6210\u529f\u540e</li> <li>After-Throwing:\u76ee\u6807\u65b9\u6cd5\u629b\u51fa\u5f02\u5e38\u540e</li> <li>Around\uff1a\u73af\u7ed5/\u5305\u88f9\u76ee\u6807\u65b9\u6cd5\u8c03\u7528Advice,\u662f\u4e00\u4e2a\u53ef\u5b9a\u5236\u5316\u8c03\u7528\u7684Advice</li> </ul> <p>\u5e38\u89c1\u573a\u666f\uff1a</p> <ul> <li>\u53c2\u6570\u68c0\u67e5\uff0c\u65e5\u5fd7\u8bb0\u5f55\uff0c\u5f02\u5e38\u5904\u7406\uff0c\u6027\u80fd\u7edf\u8ba1</li> <li>\u4e8b\u52a1\u63a7\u5236\uff0c\u6743\u9650\u63a7\u5236\uff0c\u7f13\u5b58\u5904\u7406</li> </ul> <p>\u4f8b\u5b50</p> <p>\u9996\u5148\u5b9a\u4e49\u4e00\u4e2a\u6b63\u5e38\u7684Controller</p> ApacheConf<pre><code>@Slf4j\n@RestController\n@RequestMapping(\"/aspect\")\npublic class AspectController {\n    @GetMapping\n    public Result aspect(String message){\n        log.info(\"aspect controller\");\n        return Result.success(message);\n    }\n    @GetMapping(\"/exception\")\n    public Result exception(){\n        log.info(\"aspect controller\");\n        throw new RuntimeException(\"aspect exception\");\n    }\n}\n</code></pre> <p>\u7136\u540e\u5b9a\u4e49\u5207\u9762\uff0c\u53ef\u4ee5\u5bf9\u5339\u914d\u5230\u7684\u5207\u70b9\u7684\u524d\u540e\u6267\u884c\u64cd\u4f5c\uff0c\u800c\u4e0d\u5165\u4fb5\u6e90\u4ee3\u7801\u3002</p> ApacheConf<pre><code>@Slf4j\n@Aspect\n@Component\npublic class WebAspect {\n    /**\n     * \u5b9a\u4e49\u5207\u70b9\u96c6\u5408\n     * execution\u662f\u7528\u6765\u5339\u914d\u8fde\u63a5\u70b9\u7684\u6267\u884c\u65b9\u6cd5\n     * public \u8868\u793a\u5339\u914d\u65b9\u6cd5\u7684\u6743\u9650\u8303\u56f4\n     * * \u8868\u793a\u5339\u914d\u6240\u6709\u7c7b\u578b\u8fd4\u56de\u503c\n     * com.lxbigdata.boot.Controllers\u4e3a\u5305\u8def\u5f84\n     * *.*(..)\u8868\u793a\u5339\u914d\u5305\u4e0b\u7684\u6240\u6709\u7c7b\u7684\u6240\u7528\u65b9\u6cd5\u7684\u6240\u6709\u53c2\u6570\n     */\n    @Pointcut(\"execution(public * com.lxbigdata.boot.Controllers.*.*(..))\")\n    public void pointCut(){\n\n    }\n\n    /**\n     * \u83b7\u53d6\u8bf7\u6c42\u8def\u5f84\u7b49\u4fe1\u606f\n     * @param joinPoint\n     */\n    @Before(value = \"pointCut()\")\n    public void before(JoinPoint joinPoint){\n        String methodName = joinPoint.getSignature().getName();\n        String className = joinPoint.getTarget().getClass().getName();\n        Object[] args = joinPoint.getArgs();\n        String[] parameterNames = ((MethodSignature) joinPoint.getSignature()).getParameterNames();\n\n        HttpServletRequest request = ((ServletRequestAttributes) RequestContextHolder.getRequestAttributes()).getRequest();\n\n        Map&lt;String,Object&gt; paramMap = new HashMap&lt;&gt;();\n        for(int i = 0;i&lt;parameterNames.length;i++){\n            paramMap.put(parameterNames[i],args[i]);\n        }\n        log.info(\"brfore path:{}\",request.getServletPath());\n        log.info(\"class name:{}\",className);\n        log.info(\"method name:{}\",methodName);\n        log.info(\"param:{}\",paramMap.toString());\n    }\n\n    /**\n     * \u6253\u5370\u76ee\u6807\u65b9\u6cd5\u540d\n     * @param joinPoint\n     */\n    @After(value = \"pointCut()\")\n    public void After(JoinPoint joinPoint){\n        log.info(\"{} after\",joinPoint.getSignature().getName());\n    }\n\n    /**\n     * \u6253\u5370\u76ee\u6807\u65b9\u6cd5\u7684\u8fd4\u56de\u503c\n     * @param joinPoint\n     * @param result\n     */\n    @AfterReturning(value = \"pointCut()\",returning = \"result\")\n    public void AfterReturning(JoinPoint joinPoint,Object result){\n        log.info(\"{} afterReturning\",joinPoint.getSignature().getName());\n        log.info(\"result:{}\",result);\n    }\n\n    public void AfterThrowing(JoinPoint joinPoint,Exception e){\n        log.info(\"{} afterThrowing\",joinPoint.getSignature().getName());\n        log.info(\"exception:{}\",e.getMessage());\n    }\n}\n</code></pre> <p>\u6267\u884c\u987a\u5e8f</p> <p>\u540c\u4e00\u4e2a\u5207\u9762\u7684\u6267\u884c\u987a\u5e8f\uff1abefore -&gt; after[Returning,Throwing], after</p> <p>\u4e0d\u540c\u5207\u9762\u7684\u6267\u884c\u987a\u5e8f\uff1a\u548cAdapter\u4e00\u6837\uff0c\u4f7f\u7528inbound/outbound\u7684\u5b89\u88c5\u6267\u884c\u903b\u8f91</p> <p>\u539f\u7406\u89e3\u6790</p> <p>Spring\u7684AOP\u662f\u7528\u4ee3\u7406\u7684\u65b9\u5f0f\u5b9e\u73b0\u7684\u3002\u6bcf\u4e2a\u5207\u9762\u90fd\u662fSpring\u5bb9\u5668\u4e2d\u7684\u4e00\u4e2aBean\uff0c\u5728\u76ee\u6807\u65b9\u6cd5\u88ab\u8c03\u7528\u65f6\uff0cSpring\u628a\u5207\u9762\u5e94\u7528\u5230\u76ee\u6807\u5bf9\u8c61\u4e0a\uff0c\u4e3a\u76ee\u6807\u5bf9\u8c61\u52a8\u6001\u521b\u5efa\u4ee3\u7406\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u53eb\u4f5cWeaving\uff08\u7ec7\u5165\uff09\u3002\u5207\u9762\u4f1a\u5728\u6307\u5b9a\uff08\u7b26\u5408\u5207\u70b9\u6761\u4ef6\uff09\u7684\u8fde\u63a5\u70b9\u7ec7\u5165\u76ee\u6807\u5bf9\u8c61\u4e2d\u3002</p> <p>\u5f53\u8c03\u7528\u8005\u8c03\u7528\u76ee\u6807\u5bf9\u8c61\u65f6\uff0c\u8c03\u7528\u8bf7\u6c42\u4f1a\u88ab\u4ee3\u7406\u7c7b\u62e6\u622a\uff0c\u800c\u5728\u76ee\u6807\u5bf9\u8c61\u771f\u6b63\u88ab\u8c03\u7528\u4e4b\u524d\uff0c\u4f1a\u5148\u7ec7\u5165\u5207\u9762\u903b\u8f91\u3002\u5f53\u5e94\u7528\u9700\u8981\u76ee\u6807\u5bf9\u8c61\u65f6\uff0cSpring\u624d\u4f1a\u521b\u5efa\u4ee3\u7406\u5bf9\u8c61\uff0c\u56e0\u4e3aSpring\u91c7\u7528\u7684\u662f\u8fd0\u884c\u671f\u7ec7\u5165\u7684\u5b9e\u73b0\u65b9\u5f0f\u3002</p> <p>\u5f62\u8c61\u6765\u8bf4\uff0c\u5c31\u662f\u628a\u539f\u65b9\u6cd5\u5305\u4e00\u5c42\u3002</p> <p>weaving\u7684\u5b9e\u73b0\u7684\u53ef\u4ee5\u5728\u4e0d\u540c\u7684\u60c5\u51b5\u4e0b\u5b9e\u73b0\uff1a\u7f16\u8bd1\u671f\uff0c\u7c7b\u52a0\u8f7d\u5668\uff0c\u8fd0\u884c\u671f</p> <p></p>"},{"location":"backend/springboot-doc/#_8","title":"\u7a0b\u5e8f\u5165\u53e3","text":"<p>\u5728\u6ca1\u6709Springboot\u4e4b\u524d\uff0c\u90fd\u662f\u4f7f\u7528Web\u5bb9\u5668\uff0c\u5c06\u5e94\u7528\u6253\u5305\u5230\u5bb9\u5668\u7684\u76f8\u5e94\u76ee\u5f55\uff0c\u6700\u540e\u542f\u52a8\u5bb9\u5668\u3002</p> <p>\u6e90\u7801\u5982\u4e0b\uff1a</p> ApacheConf<pre><code>    public ConfigurableApplicationContext run(String... args) {\n        Startup startup = Startup.create();\n        if (this.registerShutdownHook) {\n            SpringApplication.shutdownHook.enableShutdownHookAddition();\n        }\n        DefaultBootstrapContext bootstrapContext = createBootstrapContext();\n        ConfigurableApplicationContext context = null;\n        configureHeadlessProperty();\n        SpringApplicationRunListeners listeners = getRunListeners(args);\n        listeners.starting(bootstrapContext, this.mainApplicationClass);\n        try {\n            ApplicationArguments applicationArguments = new DefaultApplicationArguments(args);\n            ConfigurableEnvironment environment = prepareEnvironment(listeners, bootstrapContext, applicationArguments);\n            Banner printedBanner = printBanner(environment);\n            context = createApplicationContext();\n            context.setApplicationStartup(this.applicationStartup);\n            prepareContext(bootstrapContext, context, environment, listeners, applicationArguments, printedBanner);\n            refreshContext(context);\n            afterRefresh(context, applicationArguments);\n            startup.started();\n            if (this.logStartupInfo) {\n                new StartupInfoLogger(this.mainApplicationClass).logStarted(getApplicationLog(), startup);\n            }\n            listeners.started(context, startup.timeTakenToStarted());\n            callRunners(context, applicationArguments);\n        }\n        catch (Throwable ex) {\n            throw handleRunFailure(context, ex, listeners);\n        }\n        try {\n            if (context.isRunning()) {\n                listeners.ready(context, startup.ready());\n            }\n        }\n        catch (Throwable ex) {\n            throw handleRunFailure(context, ex, null);\n        }\n        return context;\n    }\n</code></pre> <p>\u6b65\u9aa4\u5982\u4e0b\uff1a</p> <ol> <li>\u5e94\u7528\u542f\u52a8\u8ba1\u65f6\u5f00\u59cb</li> <li>\u58f0\u660e\u4e0a\u4e0b\u6587</li> <li>\u8bbe\u7f6e\u5c5e\u6027</li> <li>\u542f\u52a8\u76d1\u542c\u5668</li> <li>\u521d\u59cb\u5316\u9ed8\u8ba4\u5e94\u7528\u53c2\u6570</li> <li>\u51c6\u5907\u5e94\u7528\u73af\u5883</li> <li>\u6253\u5370Banner\uff08logo\uff09</li> <li>\u521b\u5efa\u4e0a\u4e0b\u6587\u58f0\u660e\uff0c\u6784\u5efa\u4e0a\u4e0b\u6587\uff0c\u5237\u65b0\u4e0a\u4e0b\u6587\uff0c\u5237\u65b0\u4e0a\u4e0b\u6587\u540e\u5904\u7406</li> <li>\u542f\u52a8\u8ba1\u65f6\u7ed3\u675f\uff0c\u6253\u5370\u542f\u52a8\u65e5\u5fd7</li> <li>\u53d1\u5e03\u4e0a\u4e0b\u6587\uff0c\u542f\u52a8\u5b8c\u6210\u4e8b\u4ef6</li> <li>\u8c03\u7528runners</li> <li>\u542f\u52a8\u5e94\u7528\u53d1\u751f\u5f02\u5e38\u7684\u5904\u7406</li> <li>\u53d1\u5e03\u4e0a\u4e0b\u6587\u5c31\u7eea\u4e8b\u4ef6</li> </ol>"},{"location":"backend/springboot-doc/#mybatis","title":"\u6574\u5408MyBatis","text":""},{"location":"backend/springboot-doc/#_9","title":"\u73af\u5883\u914d\u7f6e","text":"<p>\u9700\u8981\u5bfc\u5165\u7684\u4f9d\u8d56\u53ea\u6709\u4e24\u4e2a\uff0c\u4e00\u4e2astarter\u4ee5\u53ca\u4e00\u4e2ajdbc\u4f9d\u8d56</p> ApacheConf<pre><code>        &lt;!-- https://mvnrepository.com/artifact/com.mysql/mysql-connector-j --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n            &lt;version&gt;8.0.33&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.mybatis.spring.boot/mybatis-spring-boot-starter --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;\n            &lt;version&gt;3.0.4&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre> <p>\u7136\u540e\u914d\u7f6eapp.yaml</p> ApacheConf<pre><code># springboot\nspring:\n  application:\n    name:boot\n  datasource:\n    url: jdbc:mysql://localhost:3306/boot?serverTimezone=GMT%2B8&amp;characterEncoding=utf-8&amp;useSSL=false\n    username: root\n    password: 123456789\n    driver-class-name: com.mysql.cj.jdbc.Driver\n# springdoc\nspringdoc:\n  api-docs:\n    path: /v3/api-docs\n  swagger-ui:\n    doc-expansion: none\n    url: \"/v3/api-docs\"\n    path: /swagger-ui.html\n\n# mybatis\nmybatis:\n  mapper-locations: classpath:mapper/*.xml\n  configuration:\n    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl\n</code></pre> <p>\u5219\u53ef\u4ee5\u5199\u4ee3\u7801\u4e86\u3002</p>"},{"location":"backend/springboot-doc/#_10","title":"\u5177\u4f53\u64cd\u4f5c","text":""},{"location":"backend/springboot-doc/#db","title":"DB","text":"<p>\u5efa\u8868\u5982\u4e0b\uff1a</p> ApacheConf<pre><code>create database boot;\nuse boot;\n\nCREATE TABLE t_user_song(\n    `id` INT AUTO_INCREMENT COMMENT '\u5e8f\u53f7\uff0c\u81ea\u589e' ,\n    `name` VARCHAR(11)   COMMENT '\u7528\u6237\u59d3\u540d' ,\n    `sname` VARCHAR(20)   COMMENT '\u6b4c\u66f2\u540d\u79f0' ,\n    `stype` VARCHAR(10)   COMMENT '\u6b4c\u66f2\u7c7b\u578b' ,\n    `score` INT   COMMENT '\u6b4c\u66f2\u8bc4\u5206' ,\n    `songer` VARCHAR(20)   COMMENT '\u6b4c\u624b\u59d3\u540d' ,\n    `create_time` DATETIME   COMMENT '\u521b\u5efa\u65f6\u95f4' ,\n    PRIMARY KEY (id)\n)  COMMENT = '\u7528\u6237\u6b4c\u66f2\u8868';\n\nselect * from t_user_song;\n</code></pre>"},{"location":"backend/springboot-doc/#_11","title":"\u5b9e\u4f53\u7c7b","text":"<p>\u521b\u5efa\u4e00\u4e2a\u5b9e\u4f53\u7c7b\uff0c\u5bf9\u5e94\u6570\u636e\u5e93\u8868</p> ApacheConf<pre><code>@Data\npublic class UserSong {\n    private Integer id;\n    private String name;\n    private String sname;\n    private String stype;\n    private Integer score;\n    private String songer;\n    private Date createTime;\n}\n</code></pre> <p>\u5e76\u5c01\u88c5\u4e00\u4e2a\u7edf\u4e00\u76f8\u5e94\u7684\u6d88\u606f\u5b9e\u4f53\u7c7b</p> ApacheConf<pre><code>@Data\n@NoArgsConstructor\n@AllArgsConstructor\npublic class R&lt;T&gt; {\n    private Integer code;\n    private String msg;\n    private T data;\n\n    public static &lt;T&gt; R&lt;T&gt; ok(T data) {\n        return new R&lt;&gt;(0, \"success\", data);\n    }\n\n    public static &lt;T&gt; R&lt;T&gt; error(T data) {\n        return new R&lt;&gt;(1, \"fail\", data);\n    }\n}\n</code></pre>"},{"location":"backend/springboot-doc/#_12","title":"\u6301\u4e45\u5c42","text":"<p>\u5b9e\u73b0\u4e00\u4e2a\u5bf9\u5e94\u5b9e\u4f53\u64cd\u4f5c\u7684Dao\u63a5\u53e3\uff0c\u548cDB\u4ea4\u4e92\uff0c\u7528\u4e8eORM</p> ApacheConf<pre><code>public interface UserSongDao {\n    //\u589e\n    @Insert(\"insert into t_user_song(name,sname,stype,songer,score,create_time) values(#{name},#{sname},#{stype},#{songer},#{score},now())\")\n    Integer add(UserSong song);\n    //\u5220\n    @Delete(\"delete from t_user_song where id=#{id}\")\n    Integer deleteById(Integer id);\n    //\u6539\n    @Update(\"update t_user_song set sname=#{sname},stype=#{stype},songer=#{songer},score=#{score} where id=#{id}\")\n    Integer update(UserSong song);\n    //\u67e5\n    @Select(\"select * from t_user_song order by create_time desc\")\n    List&lt;UserSong&gt; all();\n}\n</code></pre>"},{"location":"backend/springboot-doc/#_13","title":"\u670d\u52a1\u5c42","text":"<p>\u7528\u4e8e\u5b9e\u73b0\u4e1a\u52a1\u903b\u8f91\u7684\u5904\u7406\uff0c\u53ef\u4ee5\u8c03\u7528\u591a\u4e2aDao\u65b9\u6cd5</p> ApacheConf<pre><code>public interface UserSongService {\n    //\u589e\n    R add(UserSong song);\n\n    //\u6539\n    R update(UserSong song);\n\n    //\u5220\n    R delete(Integer id);\n\n    //\u67e5\n    R queryAll();\n}\n</code></pre> <p>\u7136\u540eImpl\u4e00\u4e2a\u5177\u4f53\u7684\u7c7b\uff0c\u5176\u4e2d\u4f1a\u6ce8\u5165\u5177\u4f53\u7684dao\u7c7b</p> ApacheConf<pre><code>@Service\npublic class UserSongServiceImpl implements UserSongService {\n    @Resource\n    private UserSongDao dao;\n\n    @Override\n    public R add(UserSong song) {\n        return dao.add(song) &gt; 0 ? R.ok(song) : R.error(song);\n    }\n\n    @Override\n    public R update(UserSong song) {\n        return dao.update(song) &gt; 0 ? R.ok(song) : R.error(song);\n    }\n\n    @Override\n    public R delete(Integer id) {\n        return dao.deleteById(id) &gt; 0 ? R.ok(null) : R.error(null);\n    }\n\n    @Override\n    public R queryAll() {\n        return R.ok(dao.all());\n    }\n}\n</code></pre>"},{"location":"backend/springboot-doc/#_14","title":"\u63a7\u5236\u5c42","text":"<p>\u4e5f\u5c31\u662fcontroller\u7684\u4f4d\u7f6e\uff0c\u8c03\u7528service\u63a5\u53e3\u7684\u65b9\u6cd5\uff0c\u7136\u540e\u7b49\u5f85\u5177\u4f53\u5b9e\u73b0\u7c7b\u7684\u6ce8\u5165\u3002</p> ApacheConf<pre><code>@RestController\n@RequestMapping(\"/api/usersong/\")\npublic class UserSongController {\n    @Resource\n    private UserSongService service;\n\n    @PostMapping(\"save\")\n    public R save(@RequestBody UserSong song) {\n        return service.add(song);\n    }\n\n    @PostMapping(\"update\")\n    public R update(@RequestBody UserSong song) {\n        return service.update(song);\n    }\n\n    @PostMapping(\"delete\")\n    public R delete(Integer id) {\n        return service.delete(id);\n    }\n\n    @PostMapping(\"all\")\n    public R all() {\n        return service.queryAll();\n    }\n}\n</code></pre>"},{"location":"backend/springboot-doc/#_15","title":"\u6d4b\u8bd5","text":"<p>\u5177\u4f53\u903b\u8f91\u662f\u5148pos\u4e00\u4e2arecord\uff0c\u7136\u540e\u67e5\u8be2\u6570\u636e</p> <p>post\u90e8\u5206</p> ApacheConf<pre><code>POST http://localhost:8080/api/usersong/save\nContent-Type: application/json\n\n{\n  \"name\": \"lee\",\n  \"sname\" :\"spuerman\",\n  \"songer\": \"hello\",\n  \"stype\": \"rock\",\n  \"score\": 10\n}\n</code></pre> <p>query</p> ApacheConf<pre><code>POST http://localhost:8080/api/usersong/all\n</code></pre> <p>\u53ef\u4ee5\u5f97\u5230\u8f93\u51fa\u7684JSON\u683c\u5f0f\u7684\u76f8\u5e94\u7ed3\u679c</p> <p>\u67e5\u8be2\u6570\u636e\u8868\u9a8c\u8bc1</p> <p></p> <p>\u5219\u6574\u5408\u6210\u529f</p>"},{"location":"backend/springboot-doc/#kafka","title":"\u6574\u5408Kafka","text":"<p>\u53c2\u8003\u6587\u6863SpringBoot\u96c6\u6210Spring For Kafka\u64cd\u4f5cKafka\u8be6\u89e3 - \u5927\u6d6a\u4e0d\u60ca\u6d9b - \u535a\u5ba2\u56ed (cnblogs.com)</p>"},{"location":"backend/springboot-doc/#_16","title":"\u73af\u5883\u914d\u7f6e","text":"<p>\u5728linux\u6709Kafka\u96c6\u7fa4\u73af\u5883\uff0c\u4f46\u662f\u7248\u672c\u4e0d\u5bf9\u5e76\u4e14\u865a\u62df\u673a\u592a\u8017\u8d44\u6e90\u3002</p> <p>\u4e3a\u4e86\u65b9\u4fbf\uff0c\u76f4\u63a5\u5728windows\u4e0a\u5b89\u88c5\u5355\u673a\u7248\u5e76\u914d\u7f6e\u73af\u5883\u53d8\u91cf\u3002\u5176\u670d\u52a1\u76d1\u542c\u7aef\u53e3\u8fd8\u662f9092\u3002</p> <p>\u7136\u540e\u5728\u9879\u76ee\u4e2d\u5f15\u5165\u4f9d\u8d56\uff1a</p> ApacheConf<pre><code>        &lt;!-- kafka --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.kafka&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-kafka&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n</code></pre> <p>Kafka\u7248\u672c3.6.x\uff0c\u800cSpringboot\u7248\u672c3.3.1</p> <p>\u6700\u540e\u5728yaml\u6587\u4ef6\u4e2d\u914d\u7f6e\u8def\u5f84\uff1a</p> ApacheConf<pre><code>spring:\n  application:\n    name:boot\n  datasource:\n    url: jdbc:mysql://localhost:3306/boot?serverTimezone=GMT%2B8&amp;characterEncoding=utf-8&amp;useSSL=false\n    username: root\n    password: 123456789\n    driver-class-name: com.mysql.cj.jdbc.Driver\n  #kafka\n  kafka:\n    bootstrap-servers: localhost:9092\n    consumer:\n      group-id: group-1\n</code></pre> <p>\u5219\u73af\u5883\u914d\u7f6e\u5b8c\u6bd5\u3002</p>"},{"location":"backend/springboot-doc/#_17","title":"\u5177\u4f53\u5b9e\u73b0","text":"<p>\u76d1\u542ctopic\uff0c\u6b64\u5904\u4f5c\u4e3a\u6d88\u8d39\u8005</p> ApacheConf<pre><code>@Component\npublic class KafkaConsumer {\n    @KafkaListener(topics = \"boot\")\n    public void processMessage(String message){\n        System.out.println(\"Received message: \" + message);\n    }\n}\n</code></pre> <p>\u8fd9\u91cc\u4f7f\u7528\u4e86\u63d0\u4f9b\u7684\u6ce8\u89e3\u6765\u65b9\u4fbf\u76d1\u542c\u6307\u5b9a\u7684topic.\u8be5\u6ce8\u89e3\u7684\u53c2\u6570\u8f83\u591a\uff0c\u53ef\u4ee5\u652f\u6301\u5355\u4e2a\uff0c\u591a\u4e2a\uff0c\u6b63\u5219\u7b49\u65b9\u5f0f\u6307\u5b9atopic,\u5e76\u4e14\u53ef\u4ee5\u6307\u5b9agroup</p> <p>\u751f\u4ea7\u8005</p> ApacheConf<pre><code>@RestController\npublic class KafkaController {\n    @Resource\n    private KafkaTemplate&lt;String, String&gt; kafkaTemplate;\n\n    @PostMapping(\"/sendMessage\")\n    public void sendMessage(@RequestParam(value = \"message\") String message) {\n        var future = kafkaTemplate.send(\"boot\", message);\n        //\u56de\u8c03,\u5f02\u6b65\u53d1\u9001\u6d88\u606f\n        future.thenApply(result -&gt; {\n            System.out.println(\"\u6d88\u606f\u53d1\u9001\u6210\u529f\");\n            return result;\n        });\n    }\n}\n</code></pre> <p>\u8fd9\u91cc\u4f7f\u7528@Resource\u6ce8\u89e3/Autowire\u6ce8\u89e3\u6ce8\u5165bean\u5bf9\u8c61\uff0c\u7136\u540e\u4f7f\u7528post\u65b9\u6cd5\u4f20\u9001\u6d88\u606f\uff0c\u53ef\u4ee5\u4f7f\u7528KafkaTemplete\u4e2d\u7684\u591a\u79cd\u65b9\u6cd5\u6765\u5b9e\u73b0\u6d88\u606f\u7684\u53d1\u9001\u3002\u53ef\u4ee5\u5f02\u6b65\u53d1\u9001/\u540c\u6b65\u53d1\u9001\u3001</p>"},{"location":"backend/springboot-doc/#_18","title":"\u6d4b\u8bd5","text":"<p>\u4f7f\u7528\u81ea\u5e26\u7684http-client\u53d1\u9001\uff1a</p> Text Only<pre><code>POST http://localhost:8080/sendMessage?message=hello\n</code></pre> <p>\u5219\u53ef\u4ee5\u770b\u5230\u6d88\u606f\u5df2\u7ecf\u6210\u529f\u8fdb\u5165\u4e86\u6d88\u606f\u961f\u5217kafka\uff0c\u63a7\u5236\u53f0\u4e5f\u6709\u8f93\u51fa\u3002</p>"},{"location":"dataWarehouse/","title":"\u6570\u4ed3\u5f00\u53d1\u603b\u7ed3","text":"<p>\u76ee\u524d\u5185\u5bb9\u5982\u4e0b\uff1a</p> <ul> <li>kafka</li> <li>HDFS &amp; YARN</li> <li>\u5927\u6570\u636eSQL\u5256\u6790</li> <li>\u5b58\u50a8\u5f15\u64ce</li> <li>\u6570\u4ed3\u7406\u8bba</li> <li>Flink</li> </ul> <p>\u4e0b\u4e00\u6b65\u4f1a\u8fdb\u884c\u56fe\u6570\u636e\u5e93\u7684\u5b66\u4e60\uff0c\u5e76\u89e3\u6790\u4e00\u4e9b\u76f8\u5173\u751f\u6001\u7684\u6846\u67b6\u3002</p>"},{"location":"dataWarehouse/flink_learn/","title":"Flink\u603b\u7ed3","text":"<p>Apache Flink Documentation | Apache Flink</p> <p>Flink\u6d41\u5f0f\u8ba1\u7b97\u5728\u8282\u7701\u8d44\u6e90\u65b9\u9762\u7684\u7b80\u5355\u5206\u6790 </p> <p>\u5fc5\u987b\u58f0\u660e\u4e00\u70b9\uff0cFlink\u662f\u79fb\u52a8\u6570\u636e\u800c\u4e0d\u662f\u79fb\u52a8\u8ba1\u7b97\uff0cFlink\u548cSpark\u6a21\u578b\u6709\u672c\u8d28\u7684\u4e0d\u540c\u3002Spark\u4e4b\u6240\u4ee5\u8bf4\u662f\u79fb\u52a8\u8ba1\u7b97\uff0c\u662f\u56e0\u4e3a\u5728\u6279\u5904\u7406\u4efb\u52a1\u6267\u884c\u7684\u65f6\u5019\u5c06task\u53d1\u5230\u5c3d\u53ef\u80fd\u540c\u6570\u636e\u8fd1\u7684\u8282\u70b9\uff0c\u8fd9\u662f\u6279\u5904\u7406\u7684\u64cd\u4f5c\uff0c\u4e00\u4e2astage\u7ed3\u675f\u624d\u5f00\u59cb\u4e0b\u4e00\u4e2astage\uff0c\u6240\u4ee5\u6709\u673a\u4f1a\u6839\u636e\u8f93\u51fa/\u5b58\u50a8\u7684\u6570\u636e\u4f4d\u7f6e\u63a7\u5236task\u7684\u53d1\u9001\u4f4d\u7f6e\u3002\u4f46\u662fFlink\u7684\u6d41\u5904\u7406\u662f\u76f4\u63a5\u5f00\u542f\u6574\u4e2a\u8ba1\u7b97\u56fe\uff0c\u7136\u540e\u7b49\u5f85\u6570\u636e\u6d41\u5165\uff0c\u6240\u4ee5Flink\u672c\u8d28\u662f\u79fb\u52a8\u6570\u636e\u3002\u5f53\u7136\uff0c\u8fd9\u91cc\u7279\u6307\u5176\u6d41\u5904\u7406\u6a21\u5f0f\u3002\u5176\u5b9eFlink\u4e5f\u53ef\u4ee5\u8dd1\u6279\uff0c\u8fd9\u65f6\u5019\u5b83\u5c31\u4f1a\u63a7\u5236\u8ba1\u7b97\u4efb\u52a1\u662f\u4e00\u4e2a\u4e2a\u542f\u52a8\u800c\u4e0d\u662f\u5168\u90e8\u542f\u52a8\uff0c\u7c7b\u4f3cSpark\u7684\u65b9\u5f0f\u3002</p>"},{"location":"dataWarehouse/flink_learn/#flink-core","title":"Flink Core","text":""},{"location":"dataWarehouse/flink_learn/#flink_1","title":"Flink\u67b6\u6784","text":"<p>Flink \u67b6\u6784 | Apache Flink</p> <p>Flink\u67b6\u6784\u4e00\u5171\u5206\u4e3a\u4e09\u5c42\uff0c\u5206\u522b\u662f<code>Deploy</code>,<code>Runtime</code>,\u4ee5\u53ca<code>API</code>\u5c42\uff0c\u5982\u4e0b\u56fe\u6240\u793a:</p> <p></p>"},{"location":"dataWarehouse/flink_learn/#flink-runtime","title":"Flink Runtime","text":"<p>\u6838\u5fc3\u7ec4\u4ef6</p> <p>Flink\u662f\u4e00\u4e2a\u6807\u51c6\u7684\u4e3b\u4ece\u5206\u5e03\u5f0f\u5f15\u64ce\uff0c\u5176<code>Runtime</code>\u67b6\u6784\uff0c\u6838\u5fc3\u7ec4\u4ef6\u5305\u62ec: Client,JobManager,TaskManager.</p> <p>\u9996\u5148\u662f<code>Client</code>,\u5176\u53ea\u662f\u8d1f\u8d23\u51c6\u5907\u6570\u636e\u6d41\uff0c\u7136\u540e\u5c06\u5176\u53d1\u9001\u7ed9<code>JobManager</code>\u3002</p> <p>\u7136\u540e\u662f<code>JobManager</code>\uff0c\u5176\u5305\u62ec\u4e09\u5927\u6838\u5fc3\u7ec4\u4ef6:</p> <ul> <li><code>ResourceManager</code>\uff1a\u8d1f\u8d23\u96c6\u7fa4\u4e2d\u8d44\u6e90\u7ba1\u7406\u548c\u5206\u914d\uff0c\u6bd4\u5982<code>task-slots</code>\u3002Flink\u9488\u5bf9\u4e0d\u540c\u7684\u8d44\u6e90\u63d0\u4f9b\u8005\uff0c\u6bd4\u5982<code>YARN,K8s</code>\u90fd\u7279\u5316\u4e86\u4e0d\u540c\u7684<code>ResuorceManager</code>\u3002</li> <li><code>Dispatcher</code>\uff0c\u53ef\u4ee5\u4e3a\u63d0\u4ea4\u4e0a\u6765\u7684\u6bcf\u4e00\u4e2a<code>Job</code>\u542f\u52a8\u4e00\u4e2a<code>JobMaster</code>,\u540c\u65f6\u8fd0\u884c\u7740<code>Flink web-ui</code>\u3002</li> <li><code>JobMaster</code>\uff1a\u8d1f\u8d23\u5355\u4e2a<code>JobGraph</code>\u7684\u6267\u884c\u3002</li> </ul> <p>\u6700\u540e\u662f<code>TaskManager</code>\uff0c\u5176\u4e5f\u79f0\u4e3a<code>worker</code>\uff0c\u7528\u4e8e\u6267\u884c\u4f5c\u4e1a\u6d41\u7684<code>task</code>\uff0c\u5e76\u7f13\u5b58\u548c\u4ea4\u6362\u6570\u636e\u6d41\u3002\u5176\u4e0a\u8d44\u6e90\u8c03\u5ea6\u7684\u6700\u5c0f\u5355\u4f4d\u662f<code>task-slot</code>\uff0c\u4e00\u4e2a<code>slot</code>\u53ef\u4ee5\u6267\u884c\u4e00\u4e2a<code>task</code>\uff0c\u5f53\u7136\uff0c\u8fd9\u4e2a<code>task</code>\u53ef\u80fd\u6709\u591a\u4e2a\u7b97\u5b50(\u7b97\u5b50\u94fe\u7684\u60c5\u51b5)\u3002</p> <p>\u9488\u5bf9<code>TaskManager</code>\u8fd9\u70b9\uff0c\u8fd9\u91cc\u7740\u91cd\u8bf4\u660e\u4e00\u4e0b\u3002</p> <p>\u4e00\u4e2a<code>TasnManger</code>\u662f\u4e00\u4e2aJVM\u8fdb\u7a0b\uff0c\u800c\u4e00\u4e2a<code>TaskSlot</code>\u662f\u4e00\u4e2a\u6267\u884c\u7ebf\u7a0b\u3002\u8fd9\u91cc\u548c\u666e\u901a\u7ebf\u7a0b\u6c60\u4e0d\u540c\u5c31\u662f\u5176\u4f1a\u5c06\u8be5\u8fdb\u7a0b\u7684\u5185\u5b58\u8d44\u6e90\u5bf9\u6bcf\u4e2a<code>slot</code>\u8fdb\u884c\u5e73\u5747\uff0c\u4f46\u662f<code>CPU</code>\u8d44\u6e90\u5e76\u4e0d\u4f1a\u5e73\u5747\u5206\u914d\uff0c\u4f9d\u65e7\u662f\u4e00\u4e2a\u8fdb\u7a0b\u5185CPU\u5171\u4eab\u3002</p> <p>\u4e00\u4e2a\u8fdb\u7a0b\u5185\u7684<code>tasks</code>\u597d\u5904\u663e\u800c\u6613\u89c1\uff0c\u5b83\u4eec\u5171\u4eab<code>TCP\u8fde\u63a5\uff0c\u6587\u4ef6\u7f13\u5b58</code>\u7b49\u8d44\u6e90\uff0c\u51cf\u5c11\u4e86\u5f00\u9500\u3002</p> <p></p> <p><code>Flink</code>\u4e2d\u7684\u7b97\u5b50\u94fe\uff0c\u5176\u5b9e\u5c31\u662f<code>Spark</code>\u4e2d\u5bf9\u5e94\u7684<code>\u4e00\u4e2astage</code>\u4e2d\u7684<code>task</code>\uff0c\u5229\u7528\u5e76\u884c\u8ba1\u7b97\u5c06\u6548\u7387\u6700\u5927\u5316\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u4e00\u4e2a<code>chain task</code>\u53ef\u4ee5\u88ab\u6295\u653e\u5230\u4e00\u4e2a<code>backend</code>\u7684\u7ebf\u7a0b\u6c60\u7684\u4e00\u4e2a\u7ebf\u7a0b\u6267\u884c-\u5373<code>task-slot</code>\uff0c\u56e0\u4e3a\u64cd\u4f5c\u7cfb\u7edf\u7684\u6700\u5c0f\u6267\u884c\u5355\u4f4d\u662f\u7ebf\u7a0b\uff0c\u6240\u4ee5\u8be5\u96c6\u7fa4\u7684\u6700\u5c0f\u6267\u884c\u5355\u4f4d\u3001\u8d44\u6e90\u5206\u914d\u5355\u4f4d\u5c31\u662f<code>slot</code>\u3002</p> <p><code>Flink</code>\u5141\u8bb8\u4e00\u4e2a<code>job</code>\u5185\u7684\u6240\u6709<code>tasks</code>\u5171\u4eab<code>slot</code>\u3002</p> <p>\u96c6\u7fa4\u6240\u9700\u7684task slot == Job\u4e2d\u7684\u6700\u5927\u5e76\u884c\u5ea6</p> <p>\u4f5c\u4e1a\u63d0\u4ea4\u6d41\u7a0b</p> <p>\u5176\u4f5c\u4e1a\u7684\u63d0\u4ea4\u6d41\u7a0b\u5305\u62ec11\u6b65\uff0c\u5982\u4e0b:</p> <p></p> <p>\u7cbe\u786e\u5230\u6bcf\u4e00\u6b65:</p> <ol> <li>\u7f16\u5199Flink\u4ee3\u7801\uff0c\u5c06\u4f5c\u4e1a\u8fdb\u884csubmit,\u9996\u5148\u5230 Client\u3002</li> <li>Client\u4f1a\u5c06<code>Job</code>\u8fdb\u884c\u5207\u5206\uff0c\u8f6c\u6362\u4e3a<code>JobGraph</code>\uff08app\u6a21\u5f0f\u5728JobManager\u6267\u884c\u8fd9\u6b65\uff09\uff0c\u5c06\u5176\u63d0\u4ea4\u5230\u96c6\u7fa4\u4e2d\u7684<code>Dispatcher</code>\u3002</li> <li>\u96c6\u7fa4\u4e2d\u7684<code>Dispathcer</code>\u542f\u52a8\u4e00\u4e2a<code>JobMaster</code>\uff0c\u540e\u8005\u5c06\u4efb\u52a1\u903b\u8f91\u8fdb\u884c\u89e3\u6790\uff0c\u89e3\u6790\u4e3a<code>ExecutionGraph</code>\uff0c\u5176\u662f\u5728\u7269\u7406\u5c42\u9762\u5177\u6709\u5e76\u884c\u5ea6\u7684\u6267\u884c\u56fe\uff0c\u4e5f\u5c31\u662f\u8bf4\u5176\u53ef\u4ee5\u88ab\u5206\u53d1\u5230\u591a\u4e2a\u8282\u70b9\u8fdb\u884c\u5e76\u884c\u8ba1\u7b97\u3002\u540c\u65f6\u4f1a\u8fd0\u884c<code>Flink-webui</code>\u3002</li> <li><code>JobMaster</code>\u5411<code>ResuorceManager</code>\u7533\u8bf7\u6240\u9700\u8981\u7684\u8ba1\u7b97\u8282\u70b9\u8d44\u6e90\uff0c<code>ResourceManager</code>\u968f\u540e\u5411\u8d44\u6e90\u63d0\u4f9b\u6846\u67b6\uff0c\u6bd4\u5982<code>YARN</code>\u7533\u8bf7\u5bf9\u5e94\u8d44\u6e90\u3002</li> <li>\u968f\u540e\u5728\u96c6\u7fa4\u4e2d\u5f00\u542f<code>TaskManager</code>\u8fdb\u7a0b\uff0c\u7136\u540e\u5c06\u8d44\u6e90\u5212\u5206\uff0c\u5411<code>RM</code>\u6ce8\u518c<code>task-slot</code>\u3002</li> <li>\u968f\u540e\u544a\u8bc9<code>JobMaster</code>\u5176\u53ef\u7528\u7684<code>slot</code>\u8d44\u6e90\uff0c\u968f\u540e\u53ef\u4ee5\u5728\u5176\u4e0a\u6267\u884c\u4f5c\u4e1a\u3002\uff08\u901a\u8fc7rpc\uff09\u53d1\u5230\u5bf9\u5e94\u8282\u70b9\u5373\u53ef\u3002</li> </ol>"},{"location":"dataWarehouse/flink_learn/#2","title":"2\u79cd\u90e8\u7f72\u6a21\u5f0f","text":"<p>Pre-job\u6a21\u5f0f\u5df2\u7ecf\u5e9f\u5f03\uff0c\u6240\u4ee5\u4e0d\u603b\u7ed3</p> <p>Session\u6a21\u5f0f</p> <p>\u63d0\u524d\u51c6\u5907\u4e00\u4e2a<code>Flink</code>\u96c6\u7fa4\uff0c\u5e76\u5168\u5c40\u590d\u7528\u3002\u7528\u6237\u7684<code>Client</code>\u53ea\u7ba1\u63d0\u4ea4\u4f5c\u4e1a\u5373\u53ef\uff0c\u5176\u4f59\u7684<code>JobManager,taskManager</code>\u5747\u590d\u7528\u4e00\u4e2a\u96c6\u7fa4\u7684\u3002</p> <p>\u6ce8\u610f\u8fd9\u91cc\u7684Job\u89e3\u6790\u4e3a<code>JobGraph</code>\u540c\u6837\u662f\u5728Client\u7aef\u8fdb\u884c</p> <p>\u7279\u70b9\u5982\u4e0b:</p> <ul> <li>\u96c6\u7fa4\u548c\u4f5c\u4e1a\u58f0\u660e\u5468\u671f\u4e0d\u540c</li> <li>\u4e0d\u7528\u4f5c\u4e1a\u8d44\u6e90\u4e0d\u9694\u79bb</li> <li>\u4f5c\u4e1a\u90e8\u7f72\u901f\u5ea6\u5feb\uff0c\u8fd9\u662f\u4e3b\u8981\u76ee\u7684\uff0c\u6bd4\u5982\u5373\u5e2d\u67e5\u8be2\u573a\u666f</li> </ul> <p>Application\u6a21\u5f0f</p> <p>\u8fd9\u91cc\u7684<code>Job\u89e3\u6790\u4e3aJobGraph</code>\u5c31\u5728<code>JobManager</code>\u7aef\u6267\u884c\uff0c\u901a\u8fc7\u5b83\u6765\u89e3\u6790\u5e76\u4e0b\u8f7d\u4f9d\u8d56\uff0c\u4f7f\u5f97<code>Client</code>\u5341\u5206\u8f7b\u91cf\u7ea7\u3002</p> <p></p> <p>\u7279\u70b9\u5982\u4e0b:</p> <ul> <li>\u96c6\u7fa4\u548c\u4f5c\u4e1a\u751f\u547d\u5468\u671f\u76f8\u540c\u3002</li> <li>\u4e0d\u540cJob\u4e4b\u95f4\u8d44\u6e90\u5b8c\u5168\u9694\u79bb\uff0c\u6bcf\u4e2a\u90fd\u662f\u8d77\u4e00\u4e2a\u5c0f\u96c6\u7fa4\uff0c(\u8fd9\u662f\u4e3b\u8981\u7279\u70b9\uff0c\u5b8c\u5168\u9694\u79bb)</li> <li>\u90e8\u7f72\u901f\u5ea6\u6162</li> <li>\u8d44\u6e90\u62a2\u5360</li> </ul>"},{"location":"dataWarehouse/flink_learn/#datastream-api","title":"DataStream API","text":"<p><code>Flink</code>\u4e00\u5171\u6709\u56db\u79cdAPI</p> <ul> <li>code</li> <li>\u6709\u72b6\u6001\u6d41</li> <li>DataStream</li> <li>\u5173\u7cfb\u578b</li> <li>Table API</li> <li>SQL API</li> </ul>"},{"location":"dataWarehouse/flink_learn/#_1","title":"\u4ece\u5b98\u7f51\u4f8b\u5b50\u8fed\u4ee3","text":"<p>\u5b98\u7f51\u7684\u4f8b\u5b50\u662f\u9010\u6b65\u63a8\u8fdb\u7684\u6b3a\u8bc8\u68c0\u6d4b\u4f8b\u5b50\uff0c\u76f8\u6bd4\u5e38\u89c1\u7684<code>wordcount</code>\uff0c\u5b83\u66f4\u6709\u4ee3\u8868\u6027\u3002</p> <p>\u6574\u4f53\u7684\u601d\u8def\uff0c\u5c31\u662f\u57fa\u4e8e\u5148\u9a8c\u77e5\u8bc6\uff0c\u8fdb\u884c\u5f02\u5e38\u70b9\u68c0\u6d4b\uff0c\u53d1\u73b0\u5f02\u52a8\u70b9\u3002</p> <p>\u4e3b\u7a0b\u5e8f</p> <p>\u9996\u5148\u6765\u770b\u4e3b\u7a0b:</p> Java<pre><code>public class FraudDetectionJob {\n    public static void main(String[] args) throws Exception {\n        //\n        StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n        DataStream&lt;Transaction&gt; transactions = env\n            .addSource(new TransactionSource())\n            .name(\"transactions\");\n        DataStream&lt;Alert&gt; alerts = transactions\n                .keyBy(x -&gt; x.getAccountId())\n                .process(new FraudDetector())\n                .name(\"fraud-detector\");\n        alerts\n            .addSink(new AlertSink())\n            .name(\"send-alerts\");\n\n        env.execute(\"Fraud Detection\"); //\u4e0d\u80fd\u5fd8\u4e86\n    }\n}\n</code></pre> <p>\u9996\u5148\u5c31\u662f\u521b\u5efa\u4e00\u4e2a<code>env</code>\uff0c\u521b\u5efa<code>Flink</code>\u8fd0\u884c\u73af\u5883\u3002\u5982\u679c\u8981\u6709<code>web-ui</code>\uff0c\u5219\u9700\u8981\u914d\u7f6e<code>rest-port</code>\u3002</p> <p>\u7136\u540e\u662f\u6dfb\u52a0\u6570\u636e\u6d41\uff0c\u8fd9\u91cc\u4f7f\u7528<code>Flink</code>\u5185\u7f6e\u7684<code>mock</code>\u6570\u636e\u6e90\uff0c\u5176\u6709\u4e09\u4e2a\u5b57\u6bb5:</p> <ul> <li>accountId</li> <li>timestamp</li> <li>amount</li> </ul> <p>\u7136\u540e\u5bf9\u6570\u636e\u6d41\u8fdb\u884c\u8f6c\u6362\u64cd\u4f5c\uff0c\u9996\u5148\u8fdb\u884c<code>keyby</code>\uff0c\u5176\u521b\u5efa\u4e00\u4e2a<code>keyedStream</code>\uff0c\u540e\u7eed\u7684\u51fd\u6570\u4f1a\u5206\u522b\u4f5c\u7528\u4e8e\u6bcf\u4e2a\u6d41\u4e4b\u4e0a\u3002\u5176\u5b9e\u5c31\u662f\u8981\u8fdb\u884c\u4e00\u6b21<code>exchange</code>\uff0c\u4fdd\u8bc1\u540e\u7eed\u7684\u6bcf\u4e2a\u5e76\u884c<code>task</code>\u6d41\u5165\u7684\u6570\u636e\u662f\u540c\u4e00\u4e2a<code>key</code>\u3002\u540c\u65f6\uff0c<code>keyBy</code>\u64cd\u4f5c\u53ef\u4ee5\u4fdd\u8bc1\u7528\u6237\u8ffd\u8e2a\u6d41\u7684\u72b6\u6001\u4e0a\u4e0b\u6587\u7b49\u7ec6\u7c92\u5ea6\u63a7\u5236\u3002</p> <p>\u7136\u540e\u5c31\u662f\u5bf9\u6bcf\u4e2a\u6d41(key\u76f8\u540c)\u8fdb\u884c\u4e1a\u52a1\u903b\u8f91\u7684\u5904\u7406\uff0c\u5c31\u662f\u8fd9\u91cc\u4f20\u5165\u7684\u81ea\u5b9a\u4e49\u5904\u7406\u903b\u8f91\uff0c\u968f\u540e\u518d\u770b\u3002</p> <p>\u6700\u540e\u5c06\u6bcf\u4e2a\u6d41\u8f93\u51fa\u7684\u7ed3\u679c\u6dfb\u52a0\u5230\u81ea\u5b9a\u4e49<code>sink</code>\u4e2d\u3002</p> <p>\u8ba1\u7b97\u56fe\u4ece\u4e00\u5f00\u59cb\u5c31\u5168\u90e8\u542f\u52a8\uff0c\u7b49\u5f85\u6570\u636e\u6d41\u5165\uff0c\u8fd9\u70b9\u548c<code>Spark\u6279\u5904\u7406</code>\u5f88\u4e0d\u76f8\u540c\u3002</p> <p>\u7b2c\u4e00\u7248\u4e1a\u52a1\u903b\u8f91</p> Java<pre><code>public class FraudDetector extends KeyedProcessFunction&lt;Long,Transaction,Alert&gt;{\n    private static final long serialVersionUID = 1L;\n    private static final double SMALL_AMOUNT = 1.00;\n    private static final double LARGE_AMOUNT = 500;\n    private transient ValueState&lt;Boolean&gt; flagState; //\u7ef4\u62a4\u4e00\u4e2a\u6d41\u7684state\uff0c\u5176\u7a7f\u900fcontext\n    //\u6bcf\u4e2a\u6d41\u5f00\u4e00\u6b21\uff0c\u64cd\u4f5c\u5176\u5168\u5c40\u53d8\u91cf\u4e0e\u72b6\u6001\n    @Override\n    public void open(Configuration parameters) throws Exception {\n        //\u4e00\u4e2avalueState\u63cf\u8ff0\u7b26\uff0c\u4f5c\u7528\u7c7b\u6bd4 fd\uff0c\u6216\u8005handle\u3002\n        //\u7ed9\u672c\u6d41\u6ce8\u518c\u4e00\u4e2astate\n        ValueStateDescriptor&lt;Boolean&gt; flag = new ValueStateDescriptor&lt;&gt;(\"flag\", Types.BOOLEAN);\n        flagState = this.getRuntimeContext().getState(flag);\n    }\n\n    @Override\n    public void processElement(Transaction value, Context ctx, Collector&lt;Alert&gt; out) throws Exception {\n        Boolean lastTransWasSmall = flagState.value();\n        if(lastTransWasSmall != null){\n            if(value.getAmount() &gt; LARGE_AMOUNT){\n                Alert alert = new Alert();\n                alert.setId(value.getAccountId());\n                out.collect(alert);\n            }\n            flagState.clear();\n        }\n        if(value.getAmount() &lt; SMALL_AMOUNT){\n            flagState.update(true);\n        }\n    }\n}\n</code></pre> <p>\u8fd9\u662f\u4e00\u4e2a\u4f5c\u7528\u4e8e<code>keyedStream</code>\u4e0a\u7684\u51fd\u6570\uff0c\u6240\u4ee5\u53ef\u4ee5\u7ef4\u62a4<code>state</code>\u3002\u8fd9\u91cc\u4f7f\u7528\u4e00\u4e2a<code>ValueState</code>\u6765\u8bb0\u5f55\u4e0a\u4e00\u4e2a\u7684\u91d1\u989d\u662f\u5426\u6ee1\u8db3\u4e86\u6761\u4ef6\u3002</p> <p>\u6240\u4ee5\u5b83\u4e0d\u65ad\u5339\u914d\u7b2c\u4e00\u4e2a\u6ee1\u8db3\u6761\u4ef6\u7684\u5c0f\u91d1\u989d\uff0c\u7136\u540e\u5728\u4e4b\u540e\u5c06\u72b6\u6001\u673a\u8f6c\u6362\uff0c\u5f00\u59cb\u5339\u914d\u4e0b\u4e00\u4e2a\u5927\u91d1\u989d\u3002</p> <p>\u770b\u51fa\u6765\u5176\u7528CEP\u5199\u5e94\u8be5\u4f1a\u5f88\u7b80\u5355\uff0c\u540e\u7eed\u4f1a\u4e13\u95e8\u4f7f\u7528CEP\u5199\u4e00\u6b21\u3002</p> <p>\u4e0a\u8ff0\u903b\u8f91\u5df2\u7ecf\u6bd4\u8f83\u5b8c\u5907\uff0c\u552f\u4e00\u7f3a\u70b9\u5c31\u662f\u6ca1\u6709\u65f6\u6548\u6027\u4fdd\u8bc1\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u4e00\u65e6\u5339\u914d\u5230\u7b2c\u4e00\u4e2a\u5c0f\u91d1\u989d\uff0c\u72b6\u6001\u673a\u5c31\u4e0d\u4f1a\u56de\u9000\uff0c\u4f1a\u4e00\u76f4\u7b49\u5230\u4e0b\u4e00\u4e2a\u5927\u91d1\u989d\uff0c\u54ea\u6015\u65f6\u95f4\u95f4\u9694\u662f\u4e00\u5e74\u3002\u6240\u4ee5\u4f1a\u6709\u4e0b\u8ff0\u7684\u7b2c\u4e8c\u7248\u3002</p> <p>\u7b2c\u4e8c\u7248-\u5f15\u5165\u65f6\u95f4</p> <p>\u4f9d\u65e7\u662f\u56e0\u4e3a<code>keyedStream</code>\uff0c\u6240\u4ee5\u53ef\u4ee5\u6709\u5b9a\u4e49\u903b\u8f91\u7684\u64cd\u4f5c\uff0c\u4e5f\u5c31\u662f\u5728\u7279\u6b8a\u65f6\u95f4\u89e6\u53d1\u56de\u8c03\u51fd\u6570\u3002\u663e\u7136\uff0c\u8be5\u4e1a\u52a1\u903b\u8f91\u7684\u5b9a\u65f6\u56de\u8c03\u51fd\u6570\u5e94\u8be5\u662f\u6e05\u7a7a\u4e4b\u524d\u5339\u914d\u7684\u5c0f\u6570\u636e\uff0c\u4ece\u5934\u5f00\u59cb\uff0c\u56e0\u4e3a\u8fc7\u671f\u4e86\u3002</p> Java<pre><code>public class FraudDetector extends KeyedProcessFunction&lt;Long,Transaction,Alert&gt;{\n    private static final long serialVersionUID = 1L;\n    private static final double SMALL_AMOUNT = 1.00;\n    private static final double LARGE_AMOUNT = 500;\n    private transient ValueState&lt;Boolean&gt; flagState; //\u7ef4\u62a4\u4e00\u4e2a\u6d41\u7684state\uff0c\u5176\u7a7f\u900fcontext\n    private transient ValueState&lt;Long&gt; timerState;\n    //\u6bcf\u4e2a\u6d41\u5f00\u4e00\u6b21\uff0c\u64cd\u4f5c\u5176\u5168\u5c40\u53d8\u91cf\u4e0e\u72b6\u6001\n    @Override\n    public void open(Configuration parameters) throws Exception {\n        //\u4e00\u4e2avalueState\u63cf\u8ff0\u7b26\uff0c\u4f5c\u7528\u7c7b\u6bd4 fd\n        //\u7ed9\u672c\u6d41\u6ce8\u518c\u4e00\u4e2astate\n        ValueStateDescriptor&lt;Boolean&gt; flagD = new ValueStateDescriptor&lt;&gt;(\"flag\", Types.BOOLEAN);\n        flagState = this.getRuntimeContext().getState(flagD);\n\n        //\u540c\u6837\u64cd\u4f5c\uff0c\u6ce8\u518c\u4e00\u4e2atimer\u5e76\u62ff\u5230\u5176fd\n        ValueStateDescriptor&lt;Long&gt; timerD = new ValueStateDescriptor&lt;&gt;(\"timer-state\", Types.LONG);\n        timerState = this.getRuntimeContext().getState(timerD);\n    }\n\n    @Override\n    public void processElement(Transaction value, Context ctx, Collector&lt;Alert&gt; out) throws Exception {\n        Boolean lastTransWasSmall = flagState.value();\n        if(lastTransWasSmall != null){\n            if(value.getAmount() &gt; LARGE_AMOUNT){\n                Alert alert = new Alert();\n                alert.setId(value.getAccountId());\n                out.collect(alert);\n            }\n            flagState.clear();\n        }\n        if(value.getAmount() &lt; SMALL_AMOUNT){\n            flagState.update(true);\n\n            //\u6ce8\u518c\u4e00\u4e2atimer\uff0c\u5230\u65f6\u95f4\u5c31\u89e6\u53d1onTimer\u56de\u8c03\u3002\n            //\u8fd9\u91cc\u4e4b\u6240\u4ee5\u989d\u5916\u7ef4\u62a4\u4e00\u4e2astate\u4f5c\u4e3atimer\uff0c\u662f\u56e0\u4e3a\u5b9a\u65f6\u4efb\u52a1\u662f\u4e8b\u4ef6\u5339\u914d\u6240\u9a71\u52a8\u7684\u3002\n            long timer = ctx.timerService().currentProcessingTime() + 1000 * 60;\n            ctx.timerService().registerProcessingTimeTimer(timer);\n        }\n    }\n\n    @Override\n    public void onTimer(long timestamp, KeyedProcessFunction&lt;Long, Transaction, Alert&gt;.OnTimerContext ctx, Collector&lt;Alert&gt; out) throws Exception {\n        timerState.clear();\n        flagState.clear();\n    }\n\n}\n</code></pre>"},{"location":"dataWarehouse/flink_learn/#source","title":"Source","text":"<p>\u7b80\u5355\u6570\u636e\u6e90</p> <p>\u5bf9\u4e8e\u5df2\u6709\u7c7b\u578b\u7684\u7b80\u5355\u6570\u636e\u6e90\uff0c\u4f7f\u7528<code>fromData</code>\u5373\u53ef.</p> Java<pre><code>        ArrayList&lt;Integer&gt; integers = new ArrayList&lt;&gt;(10);\n        for (int i = 0; i &lt; 10; i++) {\n            integers.add(i);\n        }\n        DataStreamSource&lt;Integer&gt; integerDataStreamSource = env.fromData(integers);\n</code></pre> <p>\u81ea\u5b9a\u4e49\u6570\u636e\u6e90</p> Java<pre><code>    public static class Order {\n        public int id;\n        public int num;\n        public String name;\n    }\n\n    //\u81ea\u5b9a\u4e49\u6570\u636e\u6e90\n    private static class UserDefinedSource implements ParallelSourceFunction&lt;Tuple3&lt;Integer, Long, Order&gt;&gt; {\n        private volatile boolean running = true;\n\n        @Override\n        public void run(SourceContext&lt;Tuple3&lt;Integer, Long, Order&gt;&gt; ctx) throws Exception {\n            while (running) {\n                int id = RandomUtils.nextInt(0, 100);\n                int num = RandomUtils.nextInt(0, 999);\n                String name = RandomStringUtils.randomAlphabetic(5);\n                Order order = new Order();\n                order.id = id;\n                order.num = num;\n                order.name = name;\n                ctx.collect(Tuple3.of(id, System.currentTimeMillis(), order));\n                Thread.sleep(3000);\n            }\n        }\n\n        @Override\n        public void cancel() {\n            running = false;\n        }\n    }\n</code></pre> <p>\u53ea\u9700\u8981\u5b9e\u73b0\u5404\u79cd<code>SourceFunction</code>\u63a5\u53e3\u7684\u4e24\u4e2a\u65b9\u6cd5\uff0c\u5206\u522b\u662f\u8f93\u51fa\u6570\u636e\u548c\u6d41\u7684\u5173\u95ed\u903b\u8f91\u4e5f\u5c31\u662f<code>run\u548ccancel\u51fd\u6570</code>\u3002</p> <p>Kafka\u6570\u636e\u6e90</p> <p>\u8fd9\u91cc\u9700\u8981\u989d\u5916\u6dfb\u52a0\u4f9d\u8d56\uff0c\u53ef\u4ee5\u6307\u5b9a\u4e3b\u9898\u8fdb\u884c\u6d88\u8d39\u3002</p> Java<pre><code>public class FlinkKafkaUtils {\n\n    public static Properties getProducerProperties(String brokers) {\n        Properties properties = getCommonProperties();\n        properties.setProperty(\"bootstrap.servers\", brokers);\n        properties.setProperty(\"metadata.broker.list\", brokers);\n        properties.setProperty(\"zookeeper.connect\", Constants.HOST_NAME+\":\"+Constants.ZOOKEEPER_PORT);\n        return properties;\n    }\n\n    public static Properties getCommonProperties() {\n        Properties properties = new Properties();\n        properties.setProperty(\"linger.ms\", \"100\");\n        properties.setProperty(\"retries\", \"100\");\n        properties.setProperty(\"retry.backoff.ms\", \"200\");\n        properties.setProperty(\"buffer.memory\", \"524288\");\n        properties.setProperty(\"batch.size\", \"100\");\n        properties.setProperty(\"max.request.size\", \"524288\");\n        properties.setProperty(\"compression.type\", \"snappy\");\n        properties.setProperty(\"request.timeout.ms\", \"180000\");\n        properties.setProperty(\"max.block.ms\", \"180000\");\n        return properties;\n    }\n\n    public static FlinkKafkaConsumer&lt;String&gt; getKafkaEventSource(String topic){\n        Properties props = getProducerProperties(Constants.BROKERS);\n        props.setProperty(\"auto.offset.reset\", \"latest\");\n        //\u6307\u5b9aTopic\n        FlinkKafkaConsumer&lt;String&gt; source = new FlinkKafkaConsumer&lt;&gt;(topic, new SimpleStringSchema(), props);\n        return source;\n    }\n\n    public static FlinkKafkaConsumer&lt;String&gt; getKafkaEventSource(){\n        Properties props = getProducerProperties(Constants.BROKERS);\n        props.setProperty(\"auto.offset.reset\", \"latest\");\n        //\u6307\u5b9aTopic\n//        FlinkKafkaConsumer&lt;String&gt; source = new FlinkKafkaConsumer&lt;&gt;(Constants.CLIENT_LOG, new SimpleStringSchema(), props);\n        FlinkKafkaConsumer&lt;String&gt; source = new FlinkKafkaConsumer&lt;&gt;(Constants.STOCK_LOG, new SimpleStringSchema(), props);\n        return source;\n    }\n}\n</code></pre>"},{"location":"dataWarehouse/flink_learn/#operator-","title":"Operator-\u6982\u8ff0","text":"<p>\u6982\u89c8 | Apache Flink</p> <p>\u6570\u636e\u6d41\u8f6c\u6362</p> <ul> <li>map</li> <li>flatmap</li> <li>filter</li> <li>keyBy\uff0c<code>\u6570\u7ec4\uff0c\u4ee5\u53ca\u6ca1\u6709\u91cd\u5199hashCode\u65b9\u6cd5\u7684POJO\u7c7b</code>\u4e0d\u80fd\u4f5c\u4e3akey</li> <li>reduce\uff0c\u5c06\u5c40\u90e8\u6d41\u6570\u636e\u8fdb\u884c\u6eda\u52a8\u805a\u5408</li> <li>window\uff1a\u5bf9\u952e\u63a7\u6d41\u5bf9\u6bcf\u4e2a\u6d41\u4e0a\u8fdb\u884c\u5f00\u7a97\uff0c\u5f00\u7a97\u5c31\u662f\u6839\u636e\u67d0\u4e9b\u7279\u5f81\u5bf9\u6d41\u6570\u636e\u8fdb\u884c\u5206\u7ec4(\u6bcf\u7ec4\u6570\u636e\u662f\u4e00\u4e2a<code>iterator</code>)\uff0c\u6d41\u8f6c\u6362\u4e3a<code>WindowedStream</code></li> <li>windowAll\uff1a\u5bf9\u666e\u901a\u6d41\u7684\u6240\u6709\u6570\u636e\u8fdb\u884c\u5f00\u7a97,\u6d41\u8f6c\u6362\u4e3a<code>AllWindowedStream</code></li> <li>window apply\uff1a\u5bf9\u6d41\u7684\u6bcf\u4e2a\u5f00\u7a97\u4f7f\u7528<code>function</code>\uff0c\u6b64\u5904\u9700\u8981\u662f<code>[All]WindowFunction</code></li> <li>window reduce\uff1a\u5bf9\u6d41\u7684\u6bcf\u4e2a\u5f00\u7a97\u505a<code>reduce</code>\u5e76\u8fd4\u56de\u7ed3\u679c</li> <li>union\uff1a\u540c\u7c7b\u578b\u591a\u6d41\u5408\u5e76\uff0c\u53ea\u4fdd\u8bc1\u5355\u6d41\u6570\u636e\u76f8\u5bf9\u4f4d\u7f6e\u4e0d\u53d8</li> <li>connect: \u4e0d\u540c\u7c7b\u578b\u591a\u6d41\u5408\u5e76</li> <li>window join\uff1a\u6839\u636e\u6307\u5b9a\u7684<code>key</code>\u548c<code>\u7a97\u53e3</code>\u5bf9\u6570\u636e\u8fdb\u884c<code>join</code>\u3002\u662f<code>type JOIN = (DataStream,DataStream) =&gt; DataStream</code></li> <li>interval join : \u5e76\u4e0d\u548c\u5f00\u7a97\u8026\u5408\uff0c\u53ea\u662f\u5c06\u4e24\u4e2a\u952e\u63a7\u6d41\u4e2d<code>\u67d0\u4e2akey</code>\u76f8\u7b49\u5e76\u4e14\u5728\u6307\u5b9a\u8303\u56f4\u5185\u7684\u6570\u636e\u8fdb\u884c<code>Join</code></li> <li>......</li> </ul> <p>\u7269\u7406\u5206\u533a\u5206\u5e03</p> <ul> <li>partitionCustom\uff1a\u81ea\u5b9a\u4e49\u5206\u533a\uff0c\u53ef\u4f20\u5165\u5206\u533a\u5668</li> <li>shuffle\uff1a\u968f\u673a\u5206\u533a</li> <li>broadcast\uff1a\u5c06\u8be5\u6d41\u5143\u7d20\u5e7f\u64ad\u5230\u6bcf\u4e2a\u5206\u533a</li> </ul> <p>\u8d44\u6e90\u9694\u79bb</p> <p>\u591a\u4e2a\u7b97\u5b50\u5728\u7279\u5b9a\u60c5\u51b5\u53ef\u4ee5\u8fdb\u884cchain,\u7136\u540e\u53ef\u4ee5\u5728\u540c\u4e00\u4e2a\u7ebf\u7a0b\u4e2d\u6267\u884c\uff08slot\uff09\u3002\u9ed8\u8ba4\u5f00\u542f\u7b97\u5b50\u94fe\u6a21\u5f0f\u3002</p> <p>\u90a3\u4e48\u5982\u4f55\u7981\u7528\u5462?</p> <p>\u53ea\u9700\u8981\u540e\u8ddf\u4e00\u4e2a<code>disableChaining</code>\u5373\u53ef\uff0c\u5373\u53ef\u5c06\u7b97\u5b50\u94fe\u6253\u65ad\u3002</p> <p>\u5982\u4f55\u63a7\u5236\u7b97\u5b50\u6267\u884c\u7684<code>slot</code>\u5462?</p> <p>\u53ef\u4ee5\u901a\u8fc7<code>slotSharingGroup(\"name\")</code>\u6765\u5c06\u67d0\u4e9b\u7b97\u5b50\u653e\u5165\u540c\u4e00\u4e2a<code>slot</code>\u4e2d\u53bb\u6267\u884c\u3002</p>"},{"location":"dataWarehouse/flink_learn/#_2","title":"\u4ece\u300a\u6d41\u5f0f\u7cfb\u7edf\u300b\u770b\u7b97\u5b50","text":"<p>\u7ed3\u5408\u300a\u6d41\u5f0f\u7cfb\u7edf\u300b\u4e66\u7c4d\u8fdb\u884c\u603b\u7ed3</p> <p>\u6570\u636e\u7684\u5904\u7406\uff0c\u901a\u5e38\u53ef\u4ee5\u901a\u8fc7<code>what,where,when,how</code>\u6a21\u5f0f\u8fdb\u884c\u603b\u7ed3\u3002</p> <ul> <li>what\uff1a\u8ba1\u7b97\u8f93\u51fa\u4ec0\u4e48\u7ed3\u679c</li> <li>where\uff1a\u4ee5\u4e8b\u4ef6\u65f6\u95f4\u8ba1\uff0c\u7ed3\u679c\u5728\u4f55\u5904\u88ab\u8ba1\u7b97</li> <li>when\uff1a\u4ee5\u5904\u7406\u65f6\u95f4\u8ba1\uff0c\u7ed3\u679c\u5728\u4f55\u65f6\u88ab\u7269\u5316</li> <li>how\uff1a\u7ed3\u679c\u7684\u6539\u8fdb/\u4fee\u6b63\u5982\u4f55\u76f8\u4e92\u5173\u8054\u3002\u662f\u4e22\u5f03\uff0c\u7d2f\u79ef\uff0c\u8fd8\u662f\u66ff\u6362?</li> </ul> <p>what</p> <p>\u8fd9\u4e2a\u95ee\u9898\u901a\u8fc7\u5177\u4f53\u4f7f\u7528\u7684\u5f00\u7a97\u51fd\u6570\u8fdb\u884c\u56de\u7b54\uff0c\u4e5f\u5c31\u662f\u5bf9\u6bcf\u4e2a\u7a97\u53e3\u7684\u5904\u7406\u903b\u8f91\u3002</p> <p>\u5f00\u7a97\u51fd\u6570\u6709\u5982\u4e0b\u51e0\u79cd\uff0c\u63a7\u5236\u7a0b\u5ea6\u4f9d\u6b21\u589e\u52a0:</p> <ul> <li>reduce\uff1a\u8f93\u5165\u8f93\u51fa\u7c7b\u578b\u4e00\u76f4\uff0c\u4ece\u5de6\u5230\u53f3\u5377\u3002</li> <li>aggregate:\u8f93\u5165\u8f93\u51fa\u7c7b\u578b\u53ef\u4ee5\u4e0d\u540c\uff0c\u6700\u7ec8\u57fa\u4e8e\u7d2f\u52a0\u5668\u8ba1\u7b97\u51fa\u8f93\u51fa\u7ed3\u679c\uff0c\u7c92\u5ea6\u66f4\u7ec6\u3002</li> <li>process:\u524d\u4e24\u8005\u90fd\u662f\u8fb9\u6765\u8fb9\u66f4\u65b0\uff0c\u8fd9\u4e2a\u51fd\u6570\u662f\u5230\u89e6\u53d1\u65f6\u95f4\u65f6\u62ff\u5230\u6570\u636e\u7684<code>iterator</code>\u4ee5\u53ca\u4e0a\u4e0b\u6587\uff0c\u53ef\u4ee5\u8fdb\u884c\u4efb\u610f\u903b\u8f91\u7684\u8ba1\u7b97\u3002</li> </ul> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u5176\u5b9e<code>process</code>\u662f\u5728\u8868\u8fbe\u80fd\u529b\u548c\u6027\u80fd\u4e4b\u95f4\u505a\u4e86\u6743\u8861\uff0c\u66b4\u9732\u7ed9\u7528\u6237\u66f4\u5f3a\u7684\u64cd\u63a7\u529b\u3002</p> <p><code>ProcessWindowFunction</code>\u8fd8\u53ef\u4ee5\u8ba9\u7528\u6237\u62ff\u5230\u5f53\u524d\u6d41\u751a\u81f3\u6240\u6709\u6d41\u7684\u5f53\u524d\u7a97\u53e3\u7684state\uff0c\u8fdb\u884c\u66f4\u5f3a\u7684\u64cd\u4f5c\u3002</p> <p>where</p> <p>\u5f00\u7a97\uff0c\u56de\u7b54\u7684\u5c31\u662fwhere\u3002</p> <p>\u5f00\u7a97\u662f\u5904\u7406\u65e0\u754c\u6d41\u7684\u5173\u952e\uff0c\u56e0\u4e3a\u5b83\u53ef\u4ee5\u5c06\u6ee1\u8db3\u4e00\u5b9a\u7279\u5f81\u7684\u6570\u636e\u88c5\u5165\u5927\u5c0f\u6709\u9650\u7684\u6876\u4e2d\uff0c\u518d\u5bf9\u6bcf\u4e2a\u6876\u8fdb\u884c\u5904\u7406\u3002\u8fd9\u5c31\u662f\u4e0a\u9762\u7684\u6982\u8ff0\u6240\u8bf4\u7684\u5f00\u7a97\u5c31\u662f\u4f9d\u636e\u67d0\u4e2a\u7279\u5f81\u5bf9\u6570\u636e\u6d41\u8fdb\u884c\u5206\u7ec4\u3002</p> <p>\u5f00\u7a97\u53ef\u4ee5\u4f5c\u7528\u4e8e\u666e\u901a\u6d41\uff0c\u4ee5\u53ca\u952e\u63a7\u6d41\uff0c\u901a\u5e38\u90fd\u662f\u4f7f\u7528\u952e\u63a7\u6d41\u518d\u5f00\u7a97\uff0c\u8fd9\u6837\u7684\u6d41\u5177\u6709\u5e76\u884c\u5904\u7406\u7a97\u53e3\u51fd\u6570\u7684\u80fd\u529b\u3002</p> <p>\u7a97\u53e3\u7684\u751f\u547d\u5468\u671f: \u5728\u7b2c\u4e00\u4e2a\u5c5e\u4e8e\u8be5\u7a97\u53e3\u7684\u5143\u7d20\u5230\u8fbe\u7684\u65f6\u5019\u521b\u5efa\uff0c\u7136\u540e\u5728\u65f6\u95f4\u8d85\u8fc7\u7a97\u53e3\u7684\u622a\u6b62\u65f6\u95f4\u6233 + \u7528\u6237\u5b9a\u4e49\u7684<code>allowed-lateness</code>\u4e4b\u540e\u88ab\u5b8c\u5168\u5220\u9664\u3002\u5f53\u7136\uff0c\u8fd9\u91cc\u6e05\u7a7a(<code>purge</code>)\u7684\u7684\u662f\u7a97\u53e3\u7684\u6570\u636e\u5143\u7d20\uff0c\u5e76\u4e0d\u662f\u7a97\u53e3\u5143\u6570\u636e\uff0c\u4e5f\u5c31\u8bf4\uff0c\u7a97\u53e3\u4e5f\u53ef\u80fd\u4f1a\u8fdb\u5165\u65b0\u7684\u6570\u636e\u3002</p> Java<pre><code>stream\n       .keyBy(...)               &lt;-  \u4ec5 keyed \u7a97\u53e3\u9700\u8981\n       .window(...)              &lt;-  \u5fc5\u586b\u9879\uff1a\"assigner\"\n      [.trigger(...)]            &lt;-  \u53ef\u9009\u9879\uff1a\"trigger\" (\u7701\u7565\u5219\u4f7f\u7528\u9ed8\u8ba4 trigger)\n      [.evictor(...)]            &lt;-  \u53ef\u9009\u9879\uff1a\"evictor\" (\u7701\u7565\u5219\u4e0d\u4f7f\u7528 evictor)\n      [.allowedLateness(...)]    &lt;-  \u53ef\u9009\u9879\uff1a\"lateness\" (\u7701\u7565\u5219\u4e3a 0)\n      [.sideOutputLateData(...)] &lt;-  \u53ef\u9009\u9879\uff1a\"output tag\" (\u7701\u7565\u5219\u4e0d\u5bf9\u8fdf\u5230\u6570\u636e\u4f7f\u7528 side output)\n       .reduce/aggregate/apply()      &lt;-  \u5fc5\u586b\u9879\uff1a\"function\"\n      [.getSideOutput(...)]      &lt;-  \u53ef\u9009\u9879\uff1a\"output tag\"\n</code></pre> <p>\u5982\u4f55\u6309\u7167\u65f6\u95f4\u8fb9\u754c\u6765\u5212\u5206\u591a\u6761\u6570\u636e\u6d41\u5462?</p> <p>\u901a\u5e38\u6709\u4e09\u79cd\u65b9\u5f0f:</p> <ul> <li>\u6eda\u52a8\u7a97\u53e3/\u56fa\u5b9a\u7a97\u53e3(Tumbing Windows)</li> <li>\u6ed1\u52a8\u7a97\u53e3(Sliding Windows)</li> <li>\u4f1a\u8bdd\u7a97\u53e3(Session Windows)</li> </ul> <p></p> <p>\u5728Flink\u4e2d\uff0c\u53ef\u4ee5\u901a\u8fc7<code>Window Assigners</code>\u8fdb\u884c\u6307\u5b9a\uff0c\u4e5f\u5c31\u662f\u6307\u5b9a<code>key</code>\u88ab\u5212\u5206\u5230\u4ec0\u4e48\u4f4d\u7f6e.</p> <p>\u6bd4\u5982\u8fd8\u662f\u5b98\u7f51\u7684\u4f8b\u5b50\uff0c\u4f7f\u7528<code>Transcation\u6570\u636e\u6e90</code>\uff0c\u6570\u636e\u5f62\u5f0f\u5982\u4e0b:</p> Text Only<pre><code>7&gt; Transaction{accountId=1, timestamp=1546272000000, amount=188.23}\n8&gt; Transaction{accountId=2, timestamp=1546272360000, amount=374.79}\n9&gt; Transaction{accountId=3, timestamp=1546272720000, amount=112.15}\n</code></pre> <p>\u5219\u5982\u679c\u8981\u5bf9\u5176\u8fdb\u884c\u56fa\u5b9a\u5f00\u7a97(\u6eda\u52a8\u5f00\u7a97),\u5219\u53ef\u4ee5\u5982\u4e0b\u65b9\u5f0f:</p> Java<pre><code>        stream\n                .keyBy(Transaction::getAccountId)\n                .window(TumblingEventTimeWindows.of(Time.seconds(5)))\n</code></pre> <p>\u5982\u679c\u662f\u6ed1\u52a8\u7a97\u53e3\uff0c\u5219\u662f<code>SlidingEventTimeWindows.ofxxx</code>\u3002</p> <p>\u4f1a\u8bdd\u7a97\u53e3\u7684\u8bdd\uff0c\u53ef\u4ee5\u6709\u4e0d\u540c\u7b56\u7565\uff0c\u5206\u522b\u662f\u56fa\u5b9a\u95f4\u9694\uff0c\u52a8\u6001\u95f4\u9694\u7b49\u3002</p> <p>when</p> <p>\u89e6\u53d1\u5668(trigger)\u5c31\u662f\u7528\u6765\u5b9e\u73b0\u6bcf\u4e2a\u7a97\u53e3\u7684\u7ed3\u679c\uff0c\u4ee5\u5904\u7406\u65f6\u95f4\u8ba1(\u6216\u8005\u5176\u4ed6\u6807\u51c6)\uff0c\u8be5\u4f55\u65f6\u7269\u5316\u8f93\u51fa\u7684\u3002</p> <p>\u4e3b\u8981\u7684\u89e6\u53d1\u5668\u6709\u4e24\u7c7b\uff1a</p> <ul> <li>\u5b8c\u6574\u6027\u89e6\u53d1\u5668:\u5230\u8fbe\u67d0\u4e2a\u9608\u503c\u4e00\u6b21\u6027\u8f93\u51fa\u6700\u7ec8\u7ed3\u679c\u3002\u8bed\u4e49\u7c7b\u4f3c\u4e8e\u6279\u5904\u7406\u3002</li> <li>\u91cd\u590d\u66f4\u65b0\u89e6\u53d1\u5668:\u5bf9\u6bcf\u4e2a\u6570\u636e\u8fdb\u6765\uff0c\u6240\u8ba1\u7b97\u7684\u4e2d\u95f4\u7ed3\u679c\uff0c\u90fd\u8f93\u51fa\u4e0b\u6765\uff0c\u8fd9\u4e2a\u6700\u5e38\u89c1\u3002</li> </ul> <p>\u524d\u8005\u5230\u67d0\u4e2a\u9608\u503c\u4e4b\u540e\u76f4\u63a5\u8f93\u51fa\u6700\u7ec8\u7ed3\u679c\uff0c\u800c\u540e\u8005\u4f1a\u8f93\u51fa\u6bcf\u4e2a\u6570\u636e\u5230\u6765\u4e4b\u540e\u7684\u7ed3\u679c\u3002</p> <p>\u5982\u679c\u4f60\u719f\u6089<code>Scala</code>\uff0c\u5219\u5b8c\u6574\u6027\u89e6\u53d1\u5668\u6548\u679c\u5c31\u662f<code>reduce</code>\uff0c\u800c\u91cd\u590d\u66f4\u65b0\u89e6\u53d1\u5668\u6548\u679c\u5c31\u662f<code>scanLeft</code>\u3002</p> <p>\u800cFlink\u4e2d\uff0c\u5206\u914d\u7a97\u53e3\u7684\u65f6\u5019\u4f1a\u5206\u914d\u9ed8\u8ba4\u89e6\u53d1\u5668\uff0c\u8fd9\u4e2a\u9ed8\u8ba4\u89e6\u53d1\u5668\u662f<code>\u5b8c\u6574\u6027\u89e6\u53d1\u5668</code>\u3002\u5206\u522b\u6709<code>ProcessingTime</code>\u8bed\u4e49\u548c<code>eventTime</code>\u8bed\u4e49\u3002</p> <p>\u5982\u4f55\u6307\u5b9a<code>\u91cd\u590d\u66f4\u65b0\u89e6\u53d1\u5668</code>\u5462?</p> <p>Flink\u4e2d\u6709\u4e00\u4e2a<code>CountTrigger</code>\uff0c\u53ef\u4ee5\u57fa\u4e8e\u6570\u91cf\u6765\u89e6\u53d1\u7a97\u53e3\u8ba1\u7b97\u3002</p> <p>Flink\u4e2d\u53ea\u6709\u4f7f\u7528<code>event-time</code>\u7684\u65f6\u5019\u624d\u6709watermark(\u5176\u5b9e\u662f\u542f\u53d1\u5f0f\u6c34\u4f4d)\uff0c\u5176\u4f59\u90e8\u5206\u90fd\u662f\u56fa\u5b9a\u7684\uff0c\u4e5f\u5c31\u662f\u7a97\u53e3\u5728\u7ed3\u675f\u7684\u65f6\u95f4\u7ebf\u7edf\u4e00\u89e6\u53d1\u8f93\u51fa\u3002</p>"},{"location":"dataWarehouse/flink_learn/#watermark","title":"watermark","text":"<p><code>Flink</code>\u4e0d\u540c\u4e8e<code>Spark</code>\uff0c\u5b83\u7684\u8ba1\u7b97\u56fe\u4e00\u65e6\u6784\u6210\uff0c\u5c31\u4f1a\u5168\u90e8\u542f\u52a8\uff0c\u6240\u4ee5\u4f1a\u6709\u4eba\u8bf4<code>Flink</code>\u662f\u79fb\u52a8\u6570\u636e\u800c\u4e0d\u662f\u79fb\u52a8\u8ba1\u7b97\uff0c\u56e0\u4e3a\u5b83\u6574\u4f53\u6765\u770b\u662f\u6570\u636e\u4ece\u56fa\u5b9a\u6d41\u56fe\u4e2d\u8fdb\u884c\u6d41\u52a8\u3002\u800c\u4e0d\u662f\u548cSpark\u4e00\u6837\u6574\u4f53\u4e0a\u6765\u770b\u662f\u4e32\u884c\u542f\u52a8\u3002</p> <p>\u800c\u6570\u636e\u7684\u6d41\u52a8\uff0c\u9760\u7684\u5c31\u662f<code>watermark</code>\u3002</p> <p>\u4f5c\u7528</p> <p>\u5173\u4e8e\u6d41\u5f0f\u6570\u636e\u5904\u7406\u7684<code>when</code>\u90e8\u5206\uff0c\u4e0a\u9762\u5df2\u7ecf\u4ecb\u7ecd\u4e86\u662f\u901a\u8fc7<code>trigger</code>\u6765\u8fdb\u884c\u89e6\u53d1\u3002</p> <p>\u90a3\u4e48<code>trigger</code>\u5230\u5e95\u6839\u636e\u4ec0\u4e48\u53ef\u4ee5\u5224\u5b9a\u6570\u636e\u6d41\u7684\u67d0\u4e2a\u7a97\u53e3\u4e0d\u4f1a\u518d\u6709\u6570\u636e\u8fdb\u6765\u4e86(\u4ece\u800c\u5f00\u59cb\u89e6\u53d1\u8ba1\u7b97)\u5462\uff1f</p> <p>\u7b54\u6848\u5c31\u662f<code>watermark</code>\uff0c\u5b83\u7ed9<code>trigger</code>\u4e00\u4e2a\u65ad\u8a00(assert\uff09\uff0c\u8ba9\u5176\u53ef\u4ee5\u653e\u5fc3\u8fdb\u884c\u8f93\u51fa\u6700\u7ec8\u7ed3\u679c/\u5173\u95ed\u7a97\u53e3\u3002\u5b83\u4e5f\u662f\u63a8\u52a8\u65e0\u754c\u6d41\u5904\u7406\u8fdb\u5ea6\u7684\u6838\u5fc3\u6982\u5ff5\u3002</p> <p>\u5177\u4f53\u800c\u8a00\uff0c\u6c34\u4f4d\u544a\u8bc9<code>trigger</code>\uff0c\u5f53\u524d\u7cfb\u7edf\u7684\u6570\u636e\u4e0d\u4f1a\u518d\u6709\u6bd4\u65f6\u95f4<code>T</code>\u66f4\u665a\u7684\u6570\u636e\u8fdb\u6765\u3002</p> <p>\u6027\u8d28</p> <p>\u901a\u5e38\uff0c\u6211\u4eec\u90fd\u662f\u5229\u7528\u6c34\u4f4d\u6240\u63d0\u4f9b\u7684\u65ad\u8a00\u6027\u8d28\uff0c\u6765\u5b9e\u73b0\u4e24\u65b9\u9762\u7684\u9700\u6c42:</p> <ul> <li>\u8fdb\u884c\u7a97\u53e3\u7684\u6700\u7ec8\u8ba1\u7b97/\u89e6\u53d1\u8ba1\u7b97\uff0c\u4ee5\u53ca\u5173\u95ed\u7a97\u53e3</li> <li>\u5bf9\u6570\u636e\u8fdb\u884c\u6392\u67e5\uff0c\u770b\u54ea\u90e8\u5206\u6570\u636e\u63a8\u8fdb\u7684\u6162/\u6709\u95ee\u9898</li> </ul> <p>\u5206\u7c7b</p> <p>\u6839\u636e<code>watermark</code>\u6240\u63d0\u4f9b\u7684\u65ad\u8a00\u5230\u5e95\u51c6\u4e0d\u51c6\uff0c\u53ef\u4ee5\u5206\u4e3a<code>\u5b8c\u7f8e\u6c34\u4f4d\u548c\u542f\u53d1\u5f0f\u6c34\u4f4d</code>\u3002\u8fd9\u662f\u4e00\u4e2a\u6743\u8861\u7684\u827a\u672f\u3002</p> <p>\u800c\u6c34\u4f4d\u5230\u5e95\u51c6\u4e0d\u51c6\uff0c\u4e3b\u8981\u548c\u4e00\u4e2a\u56e0\u7d20\u6709\u5173\uff0c\u5c31\u662f<code>timestamp</code>\u7684\u8bed\u4e49\uff0c\u5230\u5e95\u662f<code>event-time</code>,<code>injection-time</code>,\u8fd8\u662f<code>process-time</code>\u3002</p> <p><code>injection-time</code>\u672c\u8eab\u53c8\u662f\u4e00\u4e2a\u6743\u8861\u7684\u4ea7\u7269\u3002</p> <p>\u56e0\u4e3a\u771f\u5b9e\u7684\u6570\u636e\u7684\u4ea7\u751f\u6765\u81ea\u5916\u90e8\u7cfb\u7edf\uff0c<code>Flink</code>\u4e0d\u53ef\u80fd\u638c\u63e1\u5916\u90e8\u7cfb\u7edf\u7684\u6240\u6709\u4fe1\u606f(\u7531\u4e8e\u5916\u90e8\u7cfb\u7edf\u672c\u8eab\uff0c\u7f51\u7edc\u62e5\u5835\u7b49\u539f\u56e0)\u3002\u6240\u4ee5\u6211\u4eec\u5f97\u51fa\u4e00\u4e2a\u7ed3\u8bba\uff0c\u5c31\u662f\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u4f7f\u7528<code>event-time</code>\u8bed\u4e49\u4e0d\u53ef\u80fd\u8fbe\u6210\u5b8c\u7f8e\u6c34\u4f4d\u3002</p> <p>\u5982\u679c\u8981\u5b8c\u7f8e\u6c34\u4f4d\uff0c\u5219\u6709\u4e24\u79cd\u65b9\u6cd5:</p> <ul> <li>\u4f7f\u7528<code>injection-time/process-time</code>\u8bed\u4e49\uff0c\u8ba9<code>Flink</code>\u638c\u63a7\u5168\u5c40\u6570\u636e\u63a8\u8fdb\u3002</li> <li>\u4f7f\u7528\u9759\u6001\u7684\uff0c\u6309<code>event-time</code>\u6392\u5e8f\u7684\u6570\u636e\u96c6\u3002</li> </ul> <p>\u542f\u53d1\u5f0f\u6c34\u4f4d\u7684\u521b\u5efa(\u9488\u5bf9<code>event-time\u8bed\u4e49</code>)\uff0c\u5176\u6548\u679c\u7684\u5dee\u8ddd\u4f1a\u5f88\u5927\uff0c\u56e0\u4e3a\u7ec8\u7a76\u4f1a\u6709\u8fdf\u5230\u7684\u6570\u636e\u3002\u8981\u5efa\u7acb\u4e00\u4e2a\u597d\u7684\u542f\u53d1\u5f0f\u6c34\u4f4d\uff0c\u5219\u6709\u5982\u4e0b\u65b9\u5f0f:</p> <ul> <li>\u4f7f\u7528\u52a8\u6001\u7684\uff0c\u6309\u7167<code>event-time</code>\u6392\u5e8f\u7684\u52a8\u6001\u6570\u636e\u96c6(\u65b9\u4fbf\u5bf9\u6570\u636e\u6574\u4f53\u8fdb\u884c\u4f30\u7b97\uff0c\u6765\u4f18\u5316\u542f\u53d1\u5f0f\u6c34\u4f4d\u8bbe\u7f6e)\uff0c\u8bf4\u7684\u5c31\u662f<code>Kafka</code>\u3002</li> </ul> <p>\u518d\u6b21\u5f3a\u8c03\uff0cFlink\u7684watermark\u7279\u6307\u542f\u53d1\u5f0f\u6c34\u4f4d\uff0c\u9488\u5bf9<code>event-time</code>\u8bed\u4e49\u3002</p> <p>Flink\u4e2d\u7684\u5185\u7f6e\u7684\u57fa\u4e8e\u4e8b\u4ef6\u65f6\u95f4\u7684\u6c34\u4f4d\u751f\u6210\u5668\u7b56\u7565\u6709\u4e24\u79cd\u3002</p> <ul> <li>forMonoTimeStamps\uff1a\u9002\u7528\u4e8e\u6570\u636e\u6e90\u6570\u636e\u6309\u7167\u4e8b\u4ef6\u65f6\u95f4\u6709\u5e8f\u5b58\u50a8,\u6bd4\u5982Kafka</li> <li>forBoundOutofOrderness\uff1a\u9002\u7528\u4e8e\u8003\u8651\u5ef6\u8fdf(\u6216\u8005\u6570\u636e\u6e90\u4e71\u5e8f\u5b58\u50a8)\u7684\u60c5\u51b5\uff0c\u5c06\u6570\u636e\u7684\u6c34\u4f4d\u63a8\u8fdb\u5ef6\u8fdf\u4e00\u6bb5\u65f6\u95f4\u3002</li> </ul> <p>\u591astage\u4f20\u9012</p> <p>\u5bf9\u4e8e\u4e0d\u540cstage(\u7ecf\u8fc7exchange)\u800c\u8a00(Stage\u5185\u90e8\u662f\u5e76\u884c\u903b\u8f91\uff0c\u53ef\u4ee5\u7edf\u4e00\u89c6\u4f5c\u4e00\u4e2a\u5927\u7b97\u5b50\u94fe)</p> <ul> <li>\u5176\u8f93\u5165\u7684\u6c34\u4f4d\u662f<code>\u4e0a\u6e38\u5404\u6570\u636e\u6e90Stage\u7684event-time</code>\u6700\u5c0f\u503c\u3002</li> <li>\u5176\u8f93\u51fa\u7684\u6c34\u4f4d\u662f\u4ee5\u4e0b\u4e09\u8005\u7684\u6700\u5c0f\u503c</li> <li>\u8f93\u5165\u6c34\u4f4d</li> <li>\u72b6\u6001\u7ec4\u4ef6\u6c34\u4f4d</li> <li>\u8f93\u51fa\u7f13\u51b2\u533a\u6c34\u4f4d</li> </ul> Java<pre><code>public class watermarkDemo {\n    public static void main(String[] args) throws Exception {\n        Configuration conf = new Configuration();\n        conf.setString(\"rest.port\", \"9091\");\n        conf.setBoolean(\"web.ui.enable\", true);\n        StreamExecutionEnvironment env = StreamExecutionEnvironment.createLocalEnvironmentWithWebUI(conf);\n        //\u542f\u53d1\u5f0f\u6c34\u4f4d\u7684\u6807\u51c6\u5b9e\u73b0\u4e4b\u4e00:\u5047\u5b9a\u6570\u636e\u6e90\u6570\u636e\u6309\u65f6\u95f4\u6233\u9012\u589e\u5b58\u50a8(Kafka\u5c31\u5b8c\u7f8e\u7b26\u5408)\n        WatermarkStrategy&lt;Transaction&gt; strategy01 = WatermarkStrategy.&lt;Transaction&gt;forMonotonousTimestamps()\n                .withTimestampAssigner((element, Timestamp) -&gt; element.getTimestamp()); //\u5982\u4f55\u4ece\u5143\u6570\u636e\u4e2d\u83b7\u53d6\u65f6\u95f4\u6233\n        //\u5982\u679c\u6570\u636e\u6e90\u5b58\u50a8\u8fd8\u65f6\u95f4\u4e71\u5e8f\u7684\u8bdd,\u6216\u8005\u7f51\u7edc\u53d1\u9001\u4e71\u5e8f\uff0c\u5219\u9700\u8981\u4f7f\u7528forBoundedOutOfOrderness\u5b9e\u73b0\n        WatermarkStrategy&lt;Transaction&gt; strategy02 = WatermarkStrategy.&lt;Transaction&gt;forBoundedOutOfOrderness(Duration.ofSeconds(1))\n                .withTimestampAssigner((element, Timestamp) -&gt; element.getTimestamp());\n        DataStream&lt;Transaction&gt; stream = env.addSource(new TransactionSource())\n                .assignTimestampsAndWatermarks(strategy01); //\u901a\u5e38\u6c34\u4f4d\u76f4\u63a5\u5728\u6e90\u7aef\u8bbe\u7f6e\n        stream\n                .keyBy(Transaction::getAccountId)\n                .window(TumblingEventTimeWindows.of(Duration.ofSeconds(10)))\n                .aggregate(new AggregateFunction&lt;Transaction, Tuple2&lt;Double, Integer&gt;, Double&gt;() {\n                    @Override\n                    public Tuple2&lt;Double, Integer&gt; createAccumulator() {\n                        return new Tuple2&lt;&gt;(0.0, 0);\n                    }\n\n                    @Override\n                    public Tuple2&lt;Double, Integer&gt; add(Transaction value, Tuple2&lt;Double, Integer&gt; accumulator) {\n                        return new Tuple2&lt;&gt;(accumulator.f0 + value.getAmount(), accumulator.f1 + 1);\n                    }\n\n                    @Override\n                    public Double getResult(Tuple2&lt;Double, Integer&gt; accumulator) {\n                        var total = accumulator.f0;\n                        var count = accumulator.f1;\n                        if (count == 0) return 0.0;\n                        return total / count;\n                    }\n\n                    @Override\n                    public Tuple2&lt;Double, Integer&gt; merge(Tuple2&lt;Double, Integer&gt; a, Tuple2&lt;Double, Integer&gt; b) {\n                        return new Tuple2&lt;&gt;(a.f0 + b.f0, a.f1 + b.f1);\n                    }\n                })\n                .filter(x -&gt; x &gt; 1000)\n                .print();\n\n        env.execute();\n    }\n}\n</code></pre>"},{"location":"dataWarehouse/flink_learn/#sink","title":"Sink","text":"<p>\u4e5f\u5c31\u662f\u5904\u7406\u4e4b\u540e\u7684\u6570\u636e\u90fd\u53d1\u9001/\u5b58\u50a8\u5230\u54ea\u91cc\u3002</p> <ul> <li>\u6253\u5370\u5230\u63a7\u5236\u53f0\uff0c\u5219strean.print()</li> <li>\u53d1\u9001\u5230<code>Kafka</code>\uff0c\u5219\u5148\u521b\u5efa\u4e00\u4e2aSinkFunction\uff0c\u5b83\u662f\u4e00\u4e2a<code>Kafka\u751f\u4ea7\u8005</code>\uff0c\u7136\u540estream.addSink\u5373\u53ef\u3002</li> <li>\u81ea\u5b9a\u4e49Sink,\u5219\u9700\u8981\u5b9e\u73b0<code>SinkFunction</code>\u63a5\u53e3\u7684<code>invoke</code>\u65b9\u6cd5\u3002</li> </ul> Java<pre><code>    public static class MySink implements SinkFunction&lt;Integer&gt;{\n        @Override\n        public void invoke(Integer value, Context context) throws Exception {\n            System.out.println(value);\n        }\n    }\n</code></pre>"},{"location":"dataWarehouse/flink_learn/#_3","title":"\u7b97\u5b50\u6570\u636e\u4f20\u8f93\u7b56\u7565","text":"<p>\u4e00\u5171\u67098\u79cd\u6570\u636e\u4f20\u8f93\u7b56\u7565\u3002</p> <ul> <li>Forward: \u4e0a\u6e38\u4e00\u4e2asubtask\u53ea\u6d41\u5411\u4e0b\u6e38\u4e00\u4e2asubtask\uff0cFlink\u5728\u80fd<code>Forward</code>\u7684\u60c5\u51b5\u4e0b\u90fd\u4f1a\u4f7f\u7528\u5b83</li> <li>Rebalance\uff1a\u4e0a\u6e38\u7684\u4e00\u4e2asubtask\u6570\u636e\u5747\u5300\u53d1\u9001\u5230\u4e0b\u6e38\u6bcf\u4e2asubtask\uff0c\u4e00\u822c\u7528\u4e8e\u6570\u636e\u503e\u659c\u5904\u7406(\u6253\u6563)\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u4ed6\u4e00\u822c\u4e5f\u662f\u7528\u4e8e\u591a\u7ebf\u5e76\u884c\u7684\u60c5\u51b5\uff0c\u53ea\u4e0d\u8fc7\u8be5\u53d8\u4e86\u6570\u636e\u5206\u5e03\u800c\u5df2\uff0c\u8ba1\u7b97\u903b\u8f91\u7167\u5e38\u3002\u5b83\u53ef\u4ee5\u5904\u7406\u4e0a\u4e0b\u6e38\u5e76\u884c\u5ea6\u76f8\u540c\u7684\u95ee\u9898\uff0c\u4e5f\u53ef\u4ee5\u5904\u7406\u4e0a\u4e0b\u6e38\u5e76\u884c\u5ea6\u4e0d\u540c\u7684\u60c5\u51b5(\u9ed8\u8ba4\u5c31\u662frebalance)\u3002</li> <li>Shuffle\uff1a\u53ea\u662f\u548c<code>rebalance</code>\u7684\u5206\u53d1\u903b\u8f91\u4e0d\u540c\uff0c\u4e00\u4e2a\u662f<code>round-robin</code>\uff0c\u4e00\u4e2a\u662f<code>random</code>.\u5176\u4f59\u5b8c\u5168\u4e00\u81f4\u3002</li> <li>KeyGroup\uff1a\u4f7f\u7528<code>keyby</code>\u4e4b\u540e\uff0c\u4e0a\u4e0b\u6e38\u4f20\u8f93\u903b\u8f91\u5c31\u662f<code>keyGroup</code>\uff0c\u4e00\u822c\u901a\u8fc7<code>Hash</code>\u6765\u51b3\u5b9a\u53d1\u9001\u5230\u4e0b\u6e38\u54ea\u4e2a<code>subtask</code>\uff0c\u4e00\u5b9a\u4f1a\u4fdd\u8bc1\u540c\u4e00\u4e2akey\u7684\u5168\u90e8\u5728\u4e00\u4e2a<code>subtask</code>\u4e2d\u3002\u8981\u6ce8\u610f\u5b83\u548c<code>rebalance\u4ee5\u53cashuffle</code>\u5b8c\u5168\u4e0d\u540c\uff0c\u8fd9\u91cc\u8981\u548c<code>spark</code>\u533a\u5206\u5f00\u3002</li> <li>Rescale\uff1a\u5c06\u4e0a\u6e38<code>subtask</code>\u7684\u6570\u636e\u5747\u5300\u53d1\u9001\u7ed9\u4e0b\u6e38\u7684<code>subtask</code>\uff0c\u4e0d\u8fc7\u5e76\u4e0d\u662f\u5168\u90e8\u7684\uff0c\u800c\u662f\u4e0b\u6e38\u5c40\u90e8\u7684<code>subtask</code>\u3002</li> <li>Broadcast\uff1a\u4e0a\u6e38\u4e00\u4e2a<code>subtask</code>\u6570\u636e\u4f1a\u5168\u90e8\u53d1\u9001\u7ed9\u6240\u6709\u7684\u4e0b\u6e38<code>subtask</code>\u3002</li> <li>Global: \u5c06\u4e0a\u6e38\u6240\u6709<code>subtask</code>\u6570\u636e\u6c47\u805a\u5230\u4e0b\u6e38\u4e00\u4e2a<code>subtask</code>\u4e2d\u3002</li> </ul>"},{"location":"dataWarehouse/flink_learn/#richfunction","title":"RichFunction","text":"<p>\u6587\u6863\u4e2d\u7684\u5b9a\u4e49\u5982\u4e0b:</p> <p>An base interface for all rich user-defined functions. This class defines methods for the life cycle of the functions, as well as methods to access the context in which the functions are executed.</p> <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u901a\u8fc7<code>RichFunction</code>\uff0c\u6211\u4eec\u53ef\u4ee5\u63a7\u5236\u8fd9\u4e2a\u51fd\u6570\u7684\u6574\u4e2a\u751f\u547d\u5468\u671f\u7684\u884c\u4e3a\u3002</p> <p>\u5176\u4e2d\u7684<code>open/close</code>\uff0c\u662f\u6bcf\u4e2a<code>subtask</code>\u521d\u59cb\u5316\u3001\u7ed3\u675f\u65f6\u5019\u4f1a\u6267\u884c\u4e00\u6b21\u3002</p> <p>\u800c<code>getRuntieContext</code>\uff0c\u5c31\u662f\u672c<code>subtask</code>\u7684\u6267\u884c\u4e0a\u4e0b\u6587\u3002</p> <p>\u6ce8\u610f\u8fd9\u91cc\u4e3a\u4ec0\u4e48\u662fsubtask\uff0c\u56e0\u4e3a<code>Flink</code>\u662f\u6d41\u5904\u7406\uff0c\u4f1a\u76f4\u63a5\u5f00\u591a\u5e76\u884c\u5ea6\u7684\u5168\u5c40\u8ba1\u7b97\u56fe\u3002\u800c\u540c\u4e00\u4e2astage(\u6bd4\u5982Map[x])\u4e2d\u4f1a\u6709\u591a\u4e2a\u5e76\u884c\u7684subtask\uff0c\u8fd9\u91cc\u6bcf\u4e2a<code>subtask</code>\u90fd\u8981\u521d\u59cb\u5316\u4e00\u6b21\u3002</p>"},{"location":"dataWarehouse/flink_learn/#join","title":"\u53cc\u6d41Join","text":"<p>Flink\u8fdb\u884c\u53cc\u6d41Join\u7684\u7b97\u5b50\u6709\u4e24\u4e2a:</p> <ul> <li>window join\uff1a\u6839\u636e\u6307\u5b9a\u7684 key \u548c\u7a97\u53e3 join \u4e24\u4e2a\u6570\u636e\u6d41\u3002</li> <li>interval join\uff1a\u6839\u636e key \u76f8\u7b49\u5e76\u4e14\u6ee1\u8db3\u6307\u5b9a\u7684\u65f6\u95f4\u8303\u56f4\u5185\uff08<code>e1.timestamp + lowerBound &lt;= e2.timestamp &lt;= e1.timestamp + upperBound</code>\uff09\u7684\u6761\u4ef6\u5c06\u5206\u522b\u5c5e\u4e8e\u4e24\u4e2a keyed stream \u7684\u5143\u7d20 e1 \u548c e2 Join \u5728\u4e00\u8d77\u3002</li> </ul> <p>\u5176\u4e2d,</p> <ul> <li><code>type window-join = \uff08DataStream,DataStream\uff09 =&gt; DataStream</code></li> <li><code>type interval-join = \uff08KeyedStream,KeyedStream\uff09 =&gt; DataStream</code></li> </ul> <p>window join</p> <p>\u5982\u4e0b\u4f8b\u5b50:</p> <p>\u5bf9\u4e24\u4e2a\u6d41\u8fdb\u884cJoin\uff0c\u5f00\u7a97\u4e3a\u5904\u7406\u65f6\u95f4\u7684\u56fa\u5b9a\u7a97\u53e3\uff0c\u957f\u5ea6\u4e3a5\u3002\u5b83\u4f1a\u5c06\u4e24\u4e2a\u6d41\u4e2d\u76f8\u540c\u7a97\u53e3\u5185\u7684\u6307\u5b9a\u952e\u4e00\u76f4\u7684\u6570\u636e\u505a\u7b1b\u5361\u5c14\u79ef(\u4e00\u4e00\u5904\u7406)\uff0c\u7136\u540e\u8f93\u51fa\u3002</p> Java<pre><code>public class DoubleJoinDemo {\n    public static void main(String[] args) {\n        Configuration conf = new Configuration();\n        conf.setString(\"rest.port\", \"9091\");\n        conf.setBoolean(\"web.ui.enable\", true);\n        StreamExecutionEnvironment env = StreamExecutionEnvironment.createLocalEnvironmentWithWebUI(conf);\n        env.setParallelism(2);\n        DataStreamSource&lt;Transaction&gt; stream01 = env.addSource(new TransactionSource());\n        DataStreamSource&lt;Transaction&gt; stream02 = env.addSource(new TransactionSource());\n        stream01\n                .join(stream02)\n                .where(Transaction::getAccountId).equalTo(Transaction::getAccountId)\n                .window(TumblingProcessingTimeWindows.of(Duration.ofSeconds(5)))\n                .apply(new JoinFunction&lt;Transaction, Transaction, String&gt;(){\n\n                    @Override\n                    public String join(Transaction first, Transaction second) throws Exception {\n                        return first.getAmount() + \"\" + second.getAmount();\n                    }\n                })\n                .filter(x -&gt; x.startsWith(\"1\"))\n                .print();\n        try {\n            env.execute();\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre> <p></p> <p>interval join</p> <p>\u8fd9\u79cdjoin\u548c\u7a97\u53e3\u6ca1\u6709\u5173\u7cfb\uff0c\u6216\u8005\u8bf4\u5b83\u662f\u4e24\u8fb9\u7a97\u53e3\u65e0\u9650\u5927\u7684\u60c5\u51b5\u3002\u56e0\u4e3a\u901a\u5e38\u67d0\u4e9b\u64cd\u4f5c\u5fc5\u7136\u6709\u5148\u540e\u987a\u5e8f\uff0c\u4e0d\u4f1a\u5212\u5206\u5230\u540c\u4e00\u7a97\u53e3\u3002</p> <p>interval join\u53ea\u652f\u6301<code>event-time</code>\u3002ok\uff0c\u90a3\u4e48\u5fc5\u7136\u8981\u6307\u5b9a<code>watermarkStateagy</code>\u3002\u5e76\u4e14\u53ef\u4ee5\u6307\u5b9a\u7a97\u53e3\u5de6\u53f3\u533a\u95f4\u5305\u542b\u4e0d\u5305\u542b\u3002</p> Java<pre><code>public class IntervalJoinDemo {\n    public static void main(String[] args) {\n        Configuration conf = new Configuration();\n        conf.setString(\"rest.port\", \"9091\");\n        conf.setBoolean(\"web.ui.enable\", true);\n        StreamExecutionEnvironment env = StreamExecutionEnvironment.createLocalEnvironmentWithWebUI(conf);\n        env.setParallelism(2);\n\n        WatermarkStrategy&lt;Transaction&gt; strategy = WatermarkStrategy.&lt;Transaction&gt;forMonotonousTimestamps()\n                .withTimestampAssigner((element, timestamp) -&gt; element.getTimestamp());\n\n       DataStream&lt;Transaction&gt; stream01 = env.addSource(new TransactionSource()).assignTimestampsAndWatermarks(strategy);\n        DataStream&lt;Transaction&gt; stream02 = env.addSource(new TransactionSource()).assignTimestampsAndWatermarks(strategy);\n        KeyedStream&lt;Transaction, Long&gt; keyedStream01 = stream01.keyBy(Transaction::getAccountId);\n        KeyedStream&lt;Transaction, Long&gt; keyedStream02 = stream02.keyBy(Transaction::getAccountId);\n\n        keyedStream01\n                .intervalJoin(keyedStream02)\n                .between(Duration.ofMillis(-500), Duration.ofMillis(500))\n                .lowerBoundExclusive()\n                .upperBoundExclusive()\n                .process(new ProcessJoinFunction&lt;Transaction, Transaction, Double&gt;() {\n                    @Override\n                    public void processElement(Transaction left, Transaction right, Context ctx, Collector&lt;Double&gt; out) throws Exception {\n                        out.collect(left.getAmount() + right.getAmount());\n                    }\n                })\n                .filter(x -&gt; x &gt; 1000)\n                .print();\n        try {\n            env.execute();\n        } catch (Exception e){\n            e.printStackTrace();\n        }\n\n    }\n}\n</code></pre> <p></p>"},{"location":"dataWarehouse/flink_learn/#_4","title":"\u6570\u636e\u4e71\u5e8f","text":"<p>\u6570\u636e\u4e71\u5e8f\u662f\u5bfc\u81f4\u5b8c\u7f8e\u6c34\u4f4d\u65e0\u6cd5\u4ea7\u751f\u7684\u6839\u672c\u539f\u56e0\u3002</p> <p>\u4ea7\u751f\u539f\u56e0</p> <ul> <li>\u6570\u636e\u6e90\u672c\u8eab\u4e71\u5e8f\u5b58\u50a8</li> <li>\u6570\u636e\u6e90\u7684\u4ea7\u751f\u5c31\u662f\u4e71\u5e8f\uff0c\u6bd4\u5982\u7528\u6237\u7a81\u7136\u5f00\u542f\u98de\u884c\u6a21\u5f0f</li> <li>\u5171\u4eab\u8d44\u6e90\u9650\u5236\uff0c\u6bd4\u5982\u7f51\u7edc\u62e5\u585e</li> </ul> <p>\u53ef\u80fd\u7684\u89e3\u51b3\u65b9\u6848</p> <ul> <li>\u8ba9\u6c34\u4f4d\u5ef6\u8fdf\u63a8\u8fdb: forboundedOutOfOrderness</li> <li>\u6c34\u4f4d\u6b63\u5e38\u63a8\u8fdb\uff0c\u4f46\u662f\u7a97\u53e3\u5ef6\u8fdf\u5173\u95ed\uff0c\u4ecd\u7136\u53ef\u4ee5\u91cd\u65b0\u89e6\u53d1\u8ba1\u7b97: allowLateness</li> <li>\u65c1\u8def\u8f93\u51fa</li> </ul> <p>\u6ce8\u610f\u51e0\u8005\u53ef\u4ee5\u7ed3\u5408\u63d0\u9ad8\u6548\u7387\u3002</p> <p>\u6ce8\u610fallLateness\u5728Flink\u4e2d\u7684\u5b9e\u73b0\u662f\u91cd\u65b0\u8f93\u51fa\u65b0\u7ed3\u679c\uff0c\u5e76\u4e0d\u4f1a\u8986\u76d6\u65e7\u7ed3\u679c\u3002\u5b83\u4f1a\u5c06\u539f\u6709\u6570\u636e\u5b58\u50a8\u5728subtask\u672c\u5730\u72b6\u6001\u4e2d\uff0c\u7b49\u5f85\u7ed3\u5408\u8f93\u51fa\u65b0\u7684\u7ed3\u679c\u3002\u663e\u7136\uff0c\u4f1a\u5bfc\u81f4\u72b6\u6001\u5b58\u50a8\u8fc7\u5927\u7684\u95ee\u9898\u3002</p> <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u540c\u4e00\u4e2a\u7a97\u53e3\u53ef\u80fd\u4f1a\u9001\u7ed9\u4e0b\u6e38\u591a\u4e2a\u7ed3\u679c\uff0c\u9700\u8981\u4e0b\u6e38\u8fdb\u884c\u53d6\u820d/\u66f4\u65b0\u7ed3\u679c\u3002</p> <p>\u6392\u67e5\u601d\u8def</p> <ol> <li>\u6570\u636e\u5904\u7406\u524d\uff0c\u5bf9\u6570\u636e\u4e71\u5e8f\u7a0b\u5ea6\u8fdb\u884c\u6392\u67e5\uff0c\u770b\u770b\u4e71\u5e8f\u7684\u9650\u5ea6\u5230\u5e95\u6709\u591a\u5927(\u4e0d\u65ad\u8c03\u6574\u5ef6\u8fdf\u8ba9\u6570\u636e\u4e22\u5931\u6700\u5c11\uff0c\u5c31\u53ef\u4ee5\u770b\u51fa\u6700\u5927\u5ef6\u8fdf)</li> <li>\u6570\u636e\u5904\u7406\u65f6\uff0c\u53ca\u65f6\u76d1\u63a7\u4e71\u5e8f\u7a0b\u5ea6\u4ee5\u53ca\u6c34\u4f4d\u63a8\u8fdb\u60c5\u51b5\u3002\u4f7f\u7528<code>Flink-metric</code>\u4f53\u7cfb\u8fdb\u884c\u76d1\u63a7</li> <li>\u6570\u636e\u5904\u7406\u540e\uff0c\u6839\u636e\u7ed3\u679c\u53ca\u65f6\u8c03\u6574\u524d\u9762\u8bbe\u7f6e\u7684\u53c2\u6570\uff0c\u4fdd\u969c\u4e0b\u4e00\u6b21\u4ea7\u51fa\u3002</li> </ol>"},{"location":"dataWarehouse/flink_learn/#_5","title":"\u72b6\u6001","text":"<p>\u8fd9\u91cc\u5f53\u524d\u57fa\u4e8e\u7684\u7248\u672c\u662f<code>Flink1.20</code>\uff0c\u800c<code>Flink2.0</code>\u7684\u7248\u672c\u5f15\u5165\u4e86\u5b58\u7b97\u5206\u79bb\u548c\u5f02\u6b65\u72b6\u6001API\uff0c\u5728\u540e\u9762\u518d\u5206\u6790\u3002</p>"},{"location":"dataWarehouse/flink_learn/#_6","title":"\u5b9e\u73b0\u601d\u8def","text":"<p>\u4e3b\u8981\u6709\u4e09\u70b9:</p> <ul> <li>\u72b6\u6001\u672c\u5730\u6301\u4e45\u5316</li> <li>\u7cbe\u786e\u4e00\u6b21\u7684\u4e00\u81f4\u6027\u5feb\u7167\u4fdd\u8bc1\u5f02\u5e38\u5bb9\u9519</li> <li>\u7edf\u4e00API\u63a5\u53e3</li> </ul> <p>\u72b6\u6001\u672c\u5730\u6301\u4e45\u5316</p> <p><code>Flink</code>\u7684\u72b6\u6001\u6570\u636e\uff0c\u5b58\u50a8\u5728<code>subtask</code>\u7684\u672c\u5730\u673a\u5668\u7684\u5185\u5b58\u4e0e\u78c1\u76d8\u4e0a\u3002</p> <p>\u8fd9\u6837\u53ef\u4ee5\u5728\u5bf9\u72b6\u6001\u8fdb\u884c\u66f4\u65b0\u3001\u8bbf\u95ee\u7684\u65f6\u5019\u4f7f\u5f97\u5ef6\u8fdf\u8fbe\u5230\u6700\u4f4e\u3002</p> <p>\u4f46\u662f\u72b6\u6001\u672c\u5730\u5316\u7684\u540c\u65f6\u5e26\u6765\u95ee\u9898\uff0c\u5982\u679c\u8ba1\u7b97\u8282\u70b9\u5b95\u673a\uff0c\u5219\u72b6\u6001\u5b58\u50a8\u4f1a\u4e00\u5e76\u4e22\u5931-\u5bb9\u9519\u5f88\u96be\u505a\u3002</p> <p>\u72b6\u6001\u96c6\u4e2d\u7ba1\u7406\u7684\u5173\u7cfb\u578b\u6570\u636e\u5e93\u7684\u5bb9\u9519\u7ba1\u7406\u76f8\u6bd4\u4e4b\u4e0b\u5c31\u65b9\u4fbf\u4e00\u4e9b\u3002</p> <p>\u90a3\u600e\u4e48\u89e3\u51b3\u5462\uff1f</p> <p>Flink\u91c7\u7528\u4e86\u5feb\u7167\u673a\u5236\uff0c\u5b9a\u65f6\u5c06\u72b6\u6001\u5feb\u7167\uff0c\u7edf\u4e00\u5b58\u50a8\u5230\u8fdc\u7aef\uff0c\u6bd4\u5982HDFS\u4e0a\u3002\u8fd9\u6837\u8282\u70b9\u5b95\u673a\u4e4b\u540e\u7684\u72b6\u6001\u6062\u590d\u538b\u529b\u51cf\u5c0f\u5f88\u591a\u3002</p> <p>\u7cbe\u786e\u4e00\u6b21\u7684\u4e00\u81f4\u6027\u5feb\u7167</p> <p>Flink\u5b9e\u73b0\u4e86\u4e00\u4e2a\u540d\u4e3a<code>checkpoint</code>\u7684\u5206\u5e03\u5f0f\u8f7b\u91cf\u7ea7\u5f02\u6b65\u5feb\u7167\uff0c\u4fdd\u8bc1\u4e86\u7cbe\u786e\u4e00\u6b21\u7684\u6570\u636e\u5904\u7406\uff0c\u4ee5\u53ca\u4e00\u81f4\u6027\u72b6\u6001\u3002\u5176\u5b9e\u4e3b\u8981\u5b58\u50a8\u7684\u5c31\u662f<code>state</code>\u3002</p> <p>\u901a\u8fc7\u5b83\u5b9e\u73b0\u4e86\u5904\u7406\u6570\u636e\u903b\u8f91\uff0c\u548c\u5f02\u5e38\u5bb9\u9519\u673a\u5236\u7684\u89e3\u8026\uff0c\u7528\u6237\u53ea\u9700\u8981\u5728\u4f7f\u7528\u72b6\u6001\u63a5\u53e3\u7684\u65f6\u5019\u5f00\u542f<code>checkpoint</code>\u5373\u53ef\u3002</p> <p>\u5f53\u6709\u72b6\u6001\u7b97\u5b50\u5e76\u884c\u5ea6\u53d1\u751f\u53d8\u5316\u600e\u4e48\u529e\uff1f\u5982\u4f55\u5c06\u78c1\u76d8\u4e2d\u5b58\u50a8\u7684\u6570\u636e\u91cd\u65b0\u5206\u914d\uff1f</p> <p>Flink\u5c06\u72b6\u6001\u8fdb\u884c\u4e86\u5206\u7c7b:</p> <ul> <li>\u7b97\u5b50\u72b6\u6001:\u53ef\u4ee5\u5e73\u5747\u5206\u5272</li> <li>\u952e\u503c\u72b6\u6001\uff1a\u81ea\u52a8\u6839\u636e\u952e\u503c\u548c\u6700\u5927\u5e76\u884c\u5ea6\u8fdb\u884c\u5206\u914d</li> </ul> <p>\u5f53\u4efb\u52a1\u4e2d\u589e\u52a0\u3001\u51cf\u5c11\u4e86\u7b97\u5b50\uff0c\u8be5\u600e\u4e48\u529e\uff1f</p> <p>Flink\u63d0\u51fa<code>savepoint</code>\u673a\u5236\uff0c\u4e5f\u5c31\u662f\u7528\u6237\u624b\u52a8\u89e6\u53d1\u7684<code>checkpoint</code>\u3002</p>"},{"location":"dataWarehouse/flink_learn/#_7","title":"\u4e24\u79cd\u72b6\u6001","text":"<p>Flink\u72b6\u6001\u53ef\u4ee5\u5206\u4e3a\u4e24\u7c7b\uff0c\u5206\u522b\u662f\u7b97\u5b50\u72b6\u6001\uff0c\u548c\u952e\u503c\u72b6\u6001\u3002\u4ee5\u53ca\u4e00\u79cd\u7279\u5316\u7684\u7b97\u5b50\u72b6\u6001-\u5e7f\u64ad\u72b6\u6001</p> <p>\u7b97\u5b50\u72b6\u6001</p> <p>\u6700\u5e38\u89c1\u7684\u573a\u666f\u5c31\u662f\u6570\u636e\u6e90\u8fde\u63a5</p> <p>\u56e0\u4e3a\u72b6\u6001\u672c\u5730\u5316\u7684\u539f\u56e0\uff0cFlink\u4e2d\u6bcf\u4e2asubtask\u53ea\u80fd\u8bbf\u95ee\u672c\u5730\u7684\u72b6\u6001\u6570\u636e\u3002\u6240\u4ee5\u4e00\u4e2a\u7a7f\u900f\u5f53\u524d<code>subtask</code>\u7684\u72b6\u6001\u5c31\u662f\u7b97\u5b50\u72b6\u6001\u3002</p> <p>Flink\u5185\u7f6e\u7684KafkaConsumer\u5c31\u4f7f\u7528\u4e86\u7b97\u5b50\u72b6\u6001\uff0c\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u5176\u5bf9\u6bcf\u4e2a<code>partition</code>\u5f00\u4e00\u4e2a<code>Source[x]</code>\uff0c\u4e5f\u5c31\u662f\u4e00\u4e2asubtask,\u7136\u540e\u5728\u8be5subtask\u5185\u7ef4\u62a4\u6d88\u8d39\u7684<code>offset</code>\u3002</p> <p>\u6240\u4ee5Flink\u548cKafka\u7684\u7ed3\u5408\u5c5e\u4e8e\u5916\u90e8\u7ef4\u62a4offset\uff0c\u5728\u6211\u7684kafka\u6587\u6863\u4e2d\u5206\u6790\u8fc7\u8fd9\u79cd\u60c5\u51b5</p> <p>\u5177\u4f53API:</p> <ul> <li>ListState</li> <li>UnionListState</li> </ul> <p>\u952e\u503c\u72b6\u6001</p> <p>\u952e\u503c\u72b6\u6001\u9488\u5bf9\u952e\u63a7\u6d41\u3002</p> <p>\u56e0\u4e3a\u867d\u7136\u662f\u8fdb\u884c\u4e86<code>keyBy</code>\uff0c\u4f46\u662f\u4e00\u4e2asubtask\u5e76\u4e0d\u662f\u53ea\u4f1a\u6d41\u4e00\u79cdkey(\u5176\u5b9e<code>Spark</code>\u4e5f\u4e00\u6837\uff0c\u603b\u4e0d\u80fd\u5e76\u884c\u5ea6\u4e0a\u4ebf\u5427)\u3002\u90a3\u4e48\u5982\u4f55\u7ed9\u4e0a\u5c42\u7528\u6237\u63d0\u4f9b\u5355\u4e2akey\u5904\u7406\u7684\u5047\u8c61\u5462\uff1f</p> <p>\u8003\u8651Java\u5e76\u53d1\u7f16\u7a0b\u4e2d\u7684<code>theadLocal</code>\uff0c\u5b83\u5c31\u662f\u4e00\u4e2a\u5168\u5c40\u7684\u5b58\u50a8\u5728\u5806\u4e0a\u7684Map\uff0c\u7ef4\u62a4\u6bcf\u4e2a\u7ebf\u7a0b\u5bf9\u5e94\u7684\u526f\u672c\u503c\u3002</p> <p>\u5230\u4e86\u8fd9\u91cc\u7c7b\u4f3c\uff0c\u5728<code>subtask</code>\u4e2d\u7ef4\u62a4\u4e00\u4e2aMap\uff0c\u7ed9\u6bcf\u4e2akey\u5bf9\u5e94\u7684state\u90fd\u5b58\u50a8\u4e0a\u3002</p> <p>\u4e5f\u5c31\u8bf4\uff0c\u8fd9\u4e2a\u72b6\u6001\u503c\u7c92\u5ea6\u88ab\u7f29\u5c0f\u5230\u4e86<code>\u4e00\u4e2asubtask\u7684\u4e00\u79cdkey</code>\uff0c\u6240\u4ee5\u79f0\u4e3a\u952e\u503c\u72b6\u6001\u3002</p> <p>\u952e\u503c\u72b6\u6001\u66f4\u5e38\u89c1:</p> <ul> <li>ValueState</li> <li>MapState</li> <li>ListState</li> <li>ReducingState</li> <li>AggregatingState</li> </ul> <p>\u5e7f\u64ad\u72b6\u6001</p> <p>\u5e7f\u64ad\u72b6\u6001\u4f5c\u7528\u7c92\u5ea6\u540c\u6837\u662f\u4e00\u4e2a<code>subtask</code>.</p> <p>\u5176\u901a\u5e38\u7528\u5728\u89c4\u5219\u65e5\u5fd7\u6d41\u4e2d\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u83b7\u53d6\u6700\u65b0\u7684\u4e00\u6761\u89c4\u5219\u65e5\u5fd7\u6d41\uff0c\u7136\u540e\u5c06\u5f53\u524d\u6b63\u5728\u5904\u7406\u7684\u6d41\u548c\u5176\u8fdb\u884c\u5173\u8054(connect)</p> <p>\u7136\u540e\u5c31\u53ef\u4ee5\u5c06\u5f53\u524d\u89c4\u5219\u5e7f\u64ad\u5230\u6240\u6709\u5904\u7406(process)\u7b97\u5b50\u5f53\u4e2d\u3002</p> <p>\u9700\u8981\u5f00\u81ea\u5b9a\u4e49\u7b97\u5b50</p>"},{"location":"dataWarehouse/flink_learn/#_8","title":"\u7cbe\u786e\u4e00\u6b21\u6027\u4e0e\u5feb\u7167","text":"<p>\u9996\u5148\u662f\u5904\u7406\u7cfb\u7edf\u5185\u90e8\u7cbe\u786e\u4e00\u6b21\u6027\uff0c\u7136\u540e\u662f\u7aef\u5230\u7aef\u7cbe\u786e\u4e00\u81f4\u6027\u3002</p> <p>\u5355\u673a\u7cfb\u7edf</p> <p>\u9996\u5148\u770b\u5355\u673a\u7cfb\u7edf\u3002</p> <p>\u4e00\u4e2a\u5355\u673a\u7cfb\u7edf\u7684\u6570\u636e\u5904\u7406\uff0c\u53ef\u4ee5\u5206\u4e3a\u6570\u636e\u8bfb\u53d6\uff0c\u6570\u636e\u5904\u7406\uff0c\u72b6\u6001\u5b58\u50a8\uff0c\u6570\u636e\u8f93\u51fa\u3002</p> <p>\u56e0\u4e3a\u6570\u636e\u8bfb\u53d6\u5230\u5185\u5b58-\u6570\u636e\u5904\u7406-\u72b6\u6001\u5b58\u50a8 \u8fd9\u4e2a\u8fc7\u7a0b\u5e76\u4e0d\u662f\u539f\u5b50\u6027\u7684\uff0c\u6240\u4ee5\u5fc5\u7136\u4f1a\u6709\u95ee\u9898\u3002\uff08Kafka\u7684\u6d88\u8d39\u95ee\u9898\u4e5f\u662f\u8fd9\u4e2a\u539f\u56e0\uff09</p> <p>\u90a3\u53d1\u751f\u5355\u673a\u6545\u969c\u5728\u6062\u590d\u7684\u65f6\u5019\uff0c\u4f1a\u6709\u4ec0\u4e48\u540e\u679c\u5462\uff1f</p> <ul> <li>\u81f3\u591a\u4e00\u6b21</li> <li>\u81f3\u5c11\u4e00\u6b21</li> <li>\u7cbe\u786e\u4e00\u6b21</li> </ul> <p>\u9996\u5148\u662f\u81f3\u591a\u4e00\u6b21. \u5b83\u53ea\u4f9d\u9760\u72b6\u6001\u6301\u4e45\u5316\u3002\u4f1a\u4e22\u6570\u636e\uff0c\u4e5f\u5c31\u662f\u6570\u636e\u8bfb\u53d6\u8fdb\u6765\u4f46\u662f\u6ca1\u6709\u5904\u7406\uff0c\u4f46\u662f\u6570\u636e\u6e90\u6ca1\u6709\u4efb\u4f55\u6807\u8bb0\uff0c\u8ba4\u4e3a\u5176\u5df2\u7ecf\u5904\u7406\u5b8c\u6bd5\u3002</p> <p>\u7136\u540e\u662f\u81f3\u5c11\u4e00\u6b21\uff0c\u5b83\u4f9d\u9760\u72b6\u6001\u6301\u4e45\u5316 + \u6570\u636e\u6e90<code>offset</code>\u3002\u8fd9\u6837\u53ef\u4ee5\u505a\u5230\u6570\u636e\u91cd\u653e\uff0c\u8d77\u7801\u4e0d\u4f1a\u4e22\u6570\u636e\u3002\u4f46\u662f\u4e0d\u80fd\u5224\u5b9a\u6570\u636e\u5230\u5e95\u6709\u6ca1\u6709\u5904\u7406\u8fc7\uff0c\u6240\u4ee5\u53ef\u80fd\u4f1a\u91cd\u590d\uff0c\u4e5f\u5c31\u662f\u81f3\u5c11\u4e00\u6b21\u3002</p> <p>\u6700\u7ec8\u662f\u7cbe\u786e\u4e00\u6b21\u3002\u5b83\u4f9d\u9760\u72b6\u6001-\u5bf9\u5e94<code>offset</code>\u6301\u4e45\u5316 \u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u628a<code>offset</code>\u7684\u7ba1\u7406\u548c\u72b6\u6001\u7ba1\u7406\u7edf\u4e00\u8d77\u6765\u3002\u8fd9\u6837\u6bcf\u6b21\u6062\u590d\uff0c\u90fd\u77e5\u9053\u5f53\u524d\u5df2\u7ecf\u6709\u7684\u72b6\u6001\uff0c\u4ee5\u53ca\u8be5\u4ece\u54ea\u91cc\u91cd\u653e\u3002\u9700\u8981\u6ce8\u610f\uff0c\u8fd9\u91cc\u7684\u6301\u4e45\u5316\u9700\u8981\u548c\u6570\u636e\u5904\u7406\u64cd\u4f5c\uff0c\u4e5f\u5c31\u662f\u72b6\u6001\u4fee\u6539\u662f\u4e92\u65a5\u7684\uff0c\u4e0d\u80fd\u5e76\u884c\u6267\u884c\u3002</p> <p>\u5219\u5355\u673a\u7cfb\u7edf\u7684\u7cbe\u786e\u4e00\u6b21\u6027\u5b9e\u73b0\u6d41\u7a0b\u5982\u4e0b:</p> <ul> <li>\u6570\u636e\u6e90\u7aef</li> <li>\u6709\u91cd\u653e\u7684\u6570\u636e\u6e90\uff0c\u6bd4\u5982Kafka</li> <li>\u6570\u636e\u5904\u7406\u7aef</li> <li>\u6709\u8fdc\u7aef\u6301\u4e45\u5316\u5b58\u50a8:\u5982\u6bd4HDFS\u3002</li> <li>\u4e00\u81f4\u6027\u5feb\u7167\u7531\u5355\u673a\u5e94\u7528\u81ea\u8eab\u5b9a\u671f\u89e6\u53d1\uff0c\u540c\u65f6\u6301\u4e45\u5316\u72b6\u6001\u548c\u5bf9\u5e94\u7684\u6570\u636e\u6e90\u504f\u79fb\u91cf\uff0c\u5e76\u548c\u72b6\u6001\u4fee\u6539\u4fdd\u6301\u4e92\u65a5\u3002</li> <li>\u5b95\u673a\u6062\u590d\u7684\u65f6\u5019\u5148\u8bfb\u53d6\u6301\u4e45\u5316\u72b6\u6001\uff0c\u518d\u5bf9\u6570\u636e\u6e90\u4ece\u5bf9\u5e94\u504f\u79fb\u91cf\u5f00\u59cb\u8fdb\u884c\u91cd\u653e\u3002</li> </ul> <p>\u5982\u6b64\uff0c\u53ef\u4ee5\u5b8c\u7f8e\u5b9e\u73b0\u5355\u673a\u7684\u7cbe\u786e\u4e00\u6b21\u6027\u3002</p> <p>\u5206\u5e03\u5f0f\u7cfb\u7edf</p> <p>Flink\u7cbe\u786e\u4e00\u6b21\u6027\u7684\u672c\u8d28\uff0c\u5176\u5b9e\u662f\u5206\u5e03\u5f0f\u4e8b\u52a1\u3002</p> <p>\u5206\u5e03\u5f0f\u7cfb\u7edf\u5982\u4f55\u5b9e\u73b0\u5185\u90e8\u7684\u7cbe\u786e\u4e00\u6b21\u6027\u5904\u7406\u5462\uff1f</p> <p>\u5bf9\u4e8e\u5206\u5e03\u5f0f\u7cfb\u7edf\uff0c\u6bd4\u5982Flink\u6765\u8bf4\uff0c\u53ea\u9700\u8981\u770b\u903b\u8f91\u6570\u636e\u6d41\u56fe\u5373\u53ef\u3002\u56e0\u4e3a\u6267\u884c\u5c42\u9762\u7684\u6bcf\u4e2a\u7b97\u5b50\u5185\u7684<code>subtask</code>\u53ea\u6709\u6570\u636e\u7684\u533a\u522b\uff0c\u5176\u4ed6\u5b8c\u5168\u4e00\u81f4\u3002</p> <p>\u6240\u4ee5\u6574\u4f53\u7684\u5206\u5e03\u5f0f\u4fdd\u8bc1\u53ef\u4ee5\u4ece\u4e09\u90e8\u5206\u770b\uff1a</p> <ul> <li>\u6570\u636e\u6e90(Source)</li> <li>\u8f6c\u6362\u8fc7\u7a0b</li> <li>\u6570\u636e\u6c47</li> </ul> <p>\u6570\u636e\u6e90(Source)\uff0c\u53ef\u4ee5\u76f4\u63a5\u7167\u642c\u5355\u673a\u7684\u7cbe\u786e\u4e00\u6b21\u6027\u6a21\u5f0f\u3002\u5176\u5b9e\u6570\u636e\u6e90\u653e\u5728\u5916\u90e8\u6570\u636e\u7cfb\u7edf\uff0c\u6bd4\u5982<code>Kafka</code>\u6765\u8bf4\uff0c\u5c31\u662f\u6d88\u8d39\u8005\u3002\u5f53\u7136\u53ef\u4ee5\u91c7\u7528\u4e0a\u9762\u7684\u4f8b\u5b50\u3002</p> <p>\u5177\u4f53\u6765\u8bf4\uff0cSource\u9700\u8981\u5728\u8fdb\u884ccheckpoint\u7684\u65f6\u5019\u76f4\u63a5\u8fdb\u884c\u5feb\u7167\uff0c\u540c\u65f6\u6301\u4e45\u5316offset\u3002\u7b49\u5230\u6545\u969c\u6062\u590d\u7684\u65f6\u5019\u5230\u5bf9\u5e94\u7684offset\u5f00\u59cb\u8fdb\u884c\u6570\u636e\u91cd\u653e\u3002</p> <p>\u90a3\u4e48\u4e2d\u95f4\u7684Transform\u7b97\u5b50\u53ef\u4e0d\u53ef\u4ee5\u7167\u642c\u5462\uff1f</p> <p>\u4e2d\u95f4\u7684Transform\u7b97\u5b50\u4f7f\u7528chandy-lamport\u7b97\u6cd5,\u901a\u8fc7marker\u673a\u5236/barrier\u673a\u5236\u6765\u8fdb\u884c\u7cbe\u786e\u4e00\u6b21\u6027\u3002</p> <p>\u5f53\u7136\u4e0d\u53ef\u4ee5\u3002\u56e0\u4e3a\u7f51\u7edc\u4fe1\u9053\u672c\u8d28\u662f\u4e0d\u53ef\u56de\u6eaf\u7684\u3002</p> <p>\u5047\u8bbe\u73b0\u5728Transform\u7b97\u5b50\u4e5f\u53ef\u4ee5\u8bb0\u5f55\u4e0a\u6e38\u7684<code>offset</code>\uff0c\u4f46\u662f\u8fd8\u662f\u4f1a\u51fa\u95ee\u9898\u3002\u56e0\u4e3a\u7cfb\u7edf\u5185\u90e8\uff0c\u4e0a\u6e38\u65e0\u6cd5\u786e\u5b9a\u53d1\u9001\u7ed9\u4e0b\u6e38\u7684\u6570\u636e\u662f\u5426\u4e3a\u6536\u5230\uff0c\u4e5f\u5c31\u662f\u5904\u4e8e<code>unknow</code>\u72b6\u6001\u3002\u90a3\u4e48\u4e0a\u6e38\u53ea\u80fd\u8ba4\u4e3a\u5df2\u7ecf\u53d1\u9001\uff0c\u800c\u4e0b\u6e38\u5e76\u6ca1\u6709\u6536\u5230\u3002\u8fd9\u6837\u4e0b\u6e38\u8bb0\u5f55\u7684\u4e0a\u6e38\u7684<code>offset</code>\u548c\u4e0a\u6e38\u8bb0\u5f55\u81ea\u8eab\u7684<code>offset</code>\u4f1a\u5b58\u5728\u4e0d\u4e00\u81f4\uff0c\u5bfc\u81f4\u6570\u636e\u4e22\u5931\u3002</p> <p>\u5e76\u4e14\u65e0\u6cd5\u91cd\u53d1-\u56e0\u4e3a\u4e0a\u6e38\u65e0\u6cd5\u4ece\u4e0b\u6e38/\u5f88\u96be\u4ece\u4e0b\u6e38\u83b7\u53d6\u5230\u5e95\u54ea\u4e2a\u6570\u636e\u4e22\u5931\u4e86\u3002</p> <p>\u4e00\u4e2a\u53ef\u884c\u7684\u89e3\u51b3\u529e\u6cd5\u5c31\u662f\uff0c\u4e0b\u6e38\u7b97\u5b50\u5728\u505c\u6b62\u5904\u7406\u6570\u636e\u5e76\u5c06\u72b6\u6001\u6301\u4e45\u5316\u7684\u65f6\u5019\uff0c\u5c06\u7f51\u7edc\u4fe1\u9053\u7684\u6570\u636e\u5168\u90e8\u63a5\u53d7\uff0c\u4e00\u5e76\u6301\u4e45\u5316\uff0c\u9632\u6b62\u5b83\u4eec\u4e22\u5931\u5728\u4fe1\u9053\u4e2d\u3002</p> <p>barrier\u7684\u4f5c\u7528\u548cwatermark\u7c7b\u4f3c</p> <p>\u90a3\u4e48\u4e0b\u6e38\u7b97\u5b50\u5230\u5e95\u7b49\u5f85\u591a\u957f\u65f6\u95f4\u5462\uff1f\u5f53<code>Source</code>\u7b97\u5b50\u5f00\u59cb\u8fdb\u884c\u72b6\u6001\u6301\u4e45\u5316\u7684\u65f6\u5019\uff0c\u4e5f\u5c31\u662f\u5176\u8ba4\u4e3a\u6570\u636e\u88ab\u5904\u7406\u5b8c\u6bd5\u4e4b\u540e\uff0c\u5411\u4e0b\u6e38\u53d1\u9001\u4e00\u6761<code>barrier</code>\u7684\u7279\u6b8a\u6570\u636e\u4f5c\u4e3a\u4fe1\u53f7\uff0c\u5219\u4e0b\u6e38\u53ef\u4ee5\u8ba4\u4e3a\u4fe1\u9053\u6e05\u7a7a\u4e86\u3002</p> <p>\u4e0a\u8ff0\u64cd\u4f5c\uff0c\u5c31\u53ef\u4ee5\u5c06\u4e0a\u4e0b\u6e38\u7684<code>offset</code>\u8fdb\u884c\u5bf9\u9f50\u3002\u4ed4\u7ec6\u601d\u8003\uff0c\u4e0b\u6e38\u5176\u5b9e\u5c31\u53ef\u4ee5\u4e0d\u7528\u5b58\u50a8<code>offset</code>\u4e86\uff0c\u56e0\u4e3a\u72b6\u6001\u8fde\u5e26\u4e0b\u6b21\u6062\u590d\u8981\u8ba1\u7b97\u7684\u6570\u636e\u5168\u90e8\u5df2\u7ecf\u6301\u4e45\u5316\u4e86\u3002</p> <p>\u6700\u540e\u662fSink\u3002Sink\u7b97\u5b50\u4e0a\u6e38\u662f\u7b97\u5b50\uff0c\u7b49\u540c\u4e8eTransform\u7b97\u5b50\u3002</p> <p>\u540c\u6837\u662f\u8fdb\u884c\u5feb\u7167\uff0c\u540c\u65f6\u4e0d\u505c\u6b62\u5904\u7406\u6570\u636e\uff0c\u7b49\u5230\u6570\u636e\u5168\u90e8\u6536\u5230\u4e4b\u540e\u6301\u4e45\u5316\u3002</p> <p>\u4f18\u5316</p> <p>\u4e0a\u9762\u662f\u5c06\u72b6\u6001\u548c\u540e\u7eed\u5230\u8fbe\u6570\u636e\u5168\u90e8\u6301\u4e45\u5316\uff0c\u53ef\u4e0d\u53ef\u4ee5\u76f4\u63a5\u63a5\u7740\u8ba1\u7b97\u5462\uff1f</p> <p>\u5f53\u7136\u53ef\u4ee5\uff0c\u53ea\u8981\u5c06\u8ba1\u7b97\u5ef6\u957f\u81f3<code>barrier</code>\u6570\u636e\u5230\u8fbe\u4e4b\u524d\u5373\u53ef\u3002</p> <p>\u6700\u7ec8\u7684Flink checkpoint\u673a\u5236</p> <ul> <li>\u89e6\u53d1\uff1a\u7531<code>JobMaster</code>\u5185\u90e8\u7684\u534f\u8c03\u5668\u7edf\u4e00\u53d1\u9001\u547d\u4ee4\uff0c\u7ed9\u6700\u4e0a\u6e38\u7684<code>Source</code>\u7b97\u5b50\u7684\u6240\u6709<code>subtask</code>\u5f00\u59cb\u8fdb\u884c\u4e00\u81f4\u6027\u5feb\u7167\u3002</li> <li>\u72b6\u6001\u5b58\u50a8: <code>Source</code>\u7b97\u5b50\u5b58\u50a8<code>state + \u5bf9\u5e94offset</code>\uff0c\u800c\u5176\u4f59\u7b97\u5b50\u5b58\u50a8<code>state</code>\u5373\u53ef</li> <li>\u6d41\u7a0b:</li> <li><code>Source</code>\u7b97\u5b50\u5728\u6536\u5230\u534f\u8c03\u5668\u53d1\u9001\u7684<code>event</code>\u4e4b\u540e\uff0c\u505c\u6b62\u53d1\u9001\u6570\u636e\uff0c\u540c\u65f6\u5c06<code>barrier</code>\u53d1\u9001/\u5e7f\u64ad\u7ed9\u4e0b\u6e38\u7684subtask\uff0c\u5f00\u59cb\u8fdb\u884c\u6301\u4e45\u5316\u3002</li> <li>\u4e0b\u6e38\u7b97\u5b50\u6b63\u5e38\u5904\u7406\u6570\u636e\uff0c\u76f4\u5230<code>barrier</code>\uff0c\u505c\u6b62\u5904\u7406\u5e76\u7ee7\u7eed\u5411\u4e0b\u6e38\u53d1\u9001<code>barrier</code>\uff0c\u540c\u65f6\u8fdb\u884c\u6301\u4e45\u5316\u3002</li> <li>\u6700\u7ec8\u534f\u8c03\u5668\u6536\u5230\u6240\u6709subtask\u53d1\u9001\u7684<code>event</code>\uff0c\u5219\u8ba4\u4e3acheckpoint\u7ed3\u675f\u3002</li> </ul> <p>\u4e0b\u8ff0\u662f\u7ed3\u5408chandy-lamport\u7b97\u6cd5\u7684\u603b\u7ed3</p> <p>\u6240\u8c13\u5206\u5e03\u5f0f\u5feb\u7167\uff0c\u5c31\u662f\u5728\u7279\u5b9a\u65f6\u95f4\u70b9\u8bb0\u5f55\u4e0b\u6765\u7684\u5206\u5e03\u5f0f\u7cfb\u7edf\u7684\u5168\u5c40\u72b6\u6001\uff0c\u8fd9\u4e2a\u5168\u5c40\u72b6\u6001\u65e2\u5305\u542b\u6240\u6709\u8fdb\u7a0b\u7684\u72b6\u6001\u4e5f\u5305\u62ec\u94fe\u8def\u7684\u72b6\u6001\uff0c\u4e3b\u8981\u7528\u4e8e\u5206\u5e03\u5f0f\u7cfb\u7edf\u7684\u6545\u969c \u6062\u590d\u3001\u6b7b\u9501\u68c0\u6d4b\u548c\u5783\u573e\u6536\u96c6\u7b49\u3002\u7531\u4e8e\u94fe\u8def\u672c\u8eab\u53ea\u8d1f\u8d23\u4f20\u9012\u6d88\u606f\uff0c\u5176\u72b6\u6001\u4e0d\u5bb9\u6613\u88ab\u8bb0\u5f55\uff0c\u6240\u4ee5\u5f88\u96be\u5728\u540c\u4e00\u77ac\u95f4\u6355\u6349\u6240\u6709\u8fdb\u7a0b\u548c\u94fe\u8def\u7684\u72b6\u6001\uff0c\u800cChandy-Lamport \u7b97\u6cd5\u5219\u901a\u8fc7<code>\u6bcf\u4e2a\u8fdb\u7a0b\u8bb0\u5f55\u4e0e\u81ea\u5df1\u76f8\u5173\u7684\u72b6\u6001</code>\uff0c\u5e76\u6700\u7ec8\u5408\u5e76\u51fa\u5168\u5c40\u72b6\u6001\u6765\u8fbe\u5230\u4e86\u540c\u6837\u7684\u6548\u679c\u3002</p> <p>\u5047\u8bbe\u5206\u5e03\u5f0f\u7cfb\u7edf\u6709\u5982\u4e0b\u4e09\u90e8\u5206\u7ec4\u6210\uff1a * \u8282\u70b9\u8fdb\u7a0bi * \u8282\u70b9\u8fdb\u7a0bj * \u4fe1\u9053\u8fdb\u7a0bCij</p> <p>\u5982\u679c\u8981\u5bf9\u6b64\u7cfb\u7edf\u505a\u5feb\u7167\uff0c\u5219\u6700\u7b80\u5355\u7684\u662f\u5206\u522b\u7684\u4e09\u4e2a\u8fdb\u7a0b\u4fdd\u5b58\u72b6\u6001\u3002\u4f46\u662f\u6709\u5982\u4e0b\u95ee\u9898\uff1a</p> <ul> <li>\u7cfb\u7edf\u65e0\u6cd5\u5168\u90e8\u6682\u505c</li> <li>\u53d1\u9001\u6d88\u606f\u53ef\u80fd\u4e0d\u540c\u6b65\u3002\u6bd4\u5982\u8282\u70b9i\u548c\u4fe1\u9053Cij\u540c\u65f6\u6536\u5230\u6d88\u606f\uff0c\u8fdb\u884c\u5feb\u7167\uff0c\u800cj\u540e\u6536\u5230\u6d88\u606f\uff0c\u5df2\u7ecf\u6d88\u8d39\u5b8cCij\u7684msg\u4e86\u624d\u8fdb\u884c\u5feb\u7167\u3002\u5219\u6b64\u65f6\u4fe1\u9053Cij\u7684msg\u5c31\u88ab\u91cd\u590d\u6d88\u8d39\u4e86\u3002</li> </ul> <p>\u800cChandy-Lpamport\u7b97\u6cd5\u53ef\u4ee5\u89e3\u51b3\u4e0a\u8ff0\u95ee\u9898\u3002</p> <p>\u8be5\u7b97\u6cd5\u53ef\u4ee5\u5206\u62103\u4e2a\u9636\u6bb5\uff0c\u4e0b\u9762\u5206\u522b\u8fdb\u884c\u63cf\u8ff0\uff1a</p> <ul> <li>\u7cfb\u7edf\u4e2d\u7684\u4efb\u4f55\u4e00\u4e2a\u8282\u70b9\u90fd\u53ef\u4ee5\u53d1\u8d77\u5feb\u7167\u64cd\u4f5c\u3002</li> <li> <p>\u5bf9\u4e8e\u53d1\u8d77\u5feb\u7167 \u64cd\u4f5c\u7684\u8282\u70b9 i:</p> </li> <li> <p>\u8282\u70b9i\u5bf9\u672c\u5730\u8fdb\u7a0b\u751f\u6210\u5feb\u7167</p> </li> <li>\u5411\u5176\u4ed6\u6240\u6709\u8282\u70b9\u53d1\u9001<code>Marker</code>\u6d88\u606f</li> <li>\u5bf9\u4e8e\u6d41\u5165\u4fe1\u9053\u7684\u6d88\u606f\u751f\u6210\u5feb\u7167</li> <li>\u5982\u679c\u6b64\u8282\u70b9\u6536\u5230\u4e86\u4eceNode j (j != i)\u53d1\u9001\u8fc7\u6765\u7684\u4e00\u6761<code>Marker</code>\u6d88\u606f\uff0c\u5219\u505c\u6b62\u8bb0\u5f55\u4fe1\u9053Node j-&gt;Node i\u4e0a\u7684\u6d88\u606f\u3002</li> <li>\u5bf9\u4e8e\u5176\u4ed6\u8282\u70b9Node j (j != i)</li> <li>\u5982\u679cNode j\u7b2c\u4e00\u6b21\u4ece\u4fe1\u9053Ck-&gt;j (k != j)\u4e0a\u6536\u5230\u4e86<code>Marker</code>\u6d88\u606f\uff0c\u5219\u5bf9\u672c\u5730\u8fdb\u7a0b\u751f\u6210\u5feb\u7167\uff0c\u7136\u540e\u7ed9\u6240\u6709\u5176\u4ed6\u8282\u70b9\u53d1\u9001\u4e00\u6761<code>Marker</code>\u6d88\u606f</li> <li>\u5bf9\u4e8e\u6240\u6709\u4ece\u5176\u4ed6\u8282\u70b9l (l != k)\u53d1\u9001\u8fc7\u6765\u7684\u6d88\u606f\uff0c\u548c\u672c\u5730\u5feb\u7167\u4e00\u5e76\u8bb0\u5f55\u4e0b\u6765</li> <li>\u5982\u679c\u6b64\u8282\u70b9\u4e0a\u6536\u5230\u4e86\u4eceNode l (l != k)\u53d1\u9001\u8fc7\u6765\u7684\u4e00\u6761<code>Marker</code>\u6d88\u606f\uff0c\u5219\u505c\u6b62\u8bb0\u5f55\u4fe1\u9053Node l-&gt;Node j\u4e0a\u7684\u6d88\u606f\u3002</li> <li>\u5f53\u6240\u6709\u7684\u8282\u70b9\u90fd\u4ece\u5176\u4ed6\u8282\u70b9\u6536\u5230\u4e86<code>Marker</code>\u4ee5\u540e\uff0c\u7b97\u6cd5\u505c\u6b62\uff0c\u5206\u5e03\u5f0f\u7cfb\u7edf\u7684\u5feb\u7167\u751f\u6210\u5b8c\u6210</li> <li>\u5728\u4e00\u4e2a\u7cfb\u7edf\u4e2d\u53ef\u4ee5\u6709\u591a\u4e2a\u5feb\u7167\u540c\u65f6\u8fdb\u884c\uff0c\u53d1\u8d77\u8282\u70b9\u4e5f\u53ef\u4ee5\u4e0d\u540c\uff0c\u53ea\u8981\u5728\u53d1\u8d77\u5feb\u7167\u65f6\u7ed9\u5b83\u8d4b\u4e88\u4e00\u4e2a\u5168\u5c40\u552f\u4e00\u7684ID\uff0c\u7136\u540e\u53d1\u8d77\u8282\u70b9\u628a\u8fd9\u4e2aID\u9644\u5728<code>Marker</code>\u6d88\u606f\u4e0a\uff0c\u540c\u65f6\u6bcf\u4e2a\u8282\u70b9\u5728\u505a\u672c\u5730\u5feb\u7167\u65f6\u5728\u5feb\u7167\u526f\u672c\u4e0a\u8bb0\u5f55\u8fd9\u662f\u5bf9\u4e8e\u54ea\u4e00\u4e2aID\u751f\u6210\u7684\u526f\u672c\uff0c\u7136\u540e\u4e5f\u628aID\u9644\u5728\u53d1\u9001\u51fa\u7684<code>Marker</code>\u6d88\u606f\u4e0a.</li> </ul> <p>\u8fd9\u5c31\u662fChandy-Lamport\u5206\u5e03\u5f0f\u5feb\u7167\u7684\u5b9e\u73b0\u539f\u7406\u3002</p> <p>Flink\u4ee5\u8be5\u7b97\u6cd5\u4e3a\u57fa\u7840\uff0c\u5b9e\u73b0\u4e86\u5f02\u6b65\u5c4f\u969c\u5feb\u7167\u7b97\u6cd5\u3002\u7b80\u5355\u7684\u8bf4\uff0cFlink\u7684JobManager\u4f1a\u5468\u671f\u6027\u7684\u5411\u6bcf\u4e2aSourceTask\u53d1\u9001\u4e00\u6761\u5305\u542b\u4e00\u4e2a\u65b0checkpointId \u7684\u6d88\u606f\uff0c\u95f4\u9694\u65f6\u95f4\u7531\u914d\u7f6eenv.enableCheckpointing(\u95f4\u9694\u65f6\u95f4\u6beb\u79d2)\u63a7\u5236\uff0c\u4ee5\u521d\u59cb\u5316\u4e00\u4e2acheckpoint\u3002\u5f53SourceTask\u6536\u5230\u8fd9\u6761\u6d88\u606f\u65f6\u5c31\u4f1a\u505c\u6b62\u5411\u4e0b\u6e38\u53d1\u9001 \u6d88\u606f\uff0c\u5e7f\u64ad\u4e00\u79cd\u7279\u6b8a\u7684\u8bb0\u5f55checkpoint barrier(\u4f5c\u7528\u7c7b\u4f3c\u4e8eChandy-Lamport\u7b97\u6cd5\u4e2d\u7684\u7279\u6b8a\u6807\u8bb0\u4fe1\u606f)\uff0c\u5e76\u5728StateBackend\u751f\u6210\u4e00\u4e2a\u5305\u542b\u672c\u5730\u72b6\u6001\u7684checkpoint\u3002</p> <p>Flink\u5185\u90e8\u7684\u5206\u5e03\u5f0f\u5feb\u7167\u673a\u5236\u5982\u4e0b\uff1a</p> <ol> <li>\u4f5c\u4e1a\u72b6\u6001\u521d\u59cb\u5316</li> <li>\u6570\u636e\u6d41\u5165</li> <li>\u6267\u884c\u5feb\u7167\u3002</li> <li>\u6b64\u65f6JobManager\u89e6\u53d1\u6267\u884c\u5feb\u7167\uff0c\u5e76\u5c06\u547d\u4ee4\u53d1\u9001\u7ed9\u6240\u6709\u8282\u70b9\u7684SubTask\u3002</li> <li>Source\u7b97\u5b50\u7684Subtask\uff1a\u6536\u5230\u547d\u4ee4\u505c\u6b62\u5904\u7406\u6570\u636e\uff0c\u4fdd\u5b58\u672c\u5730\u72b6\u6001\uff0c\u5411\u6240\u6709\u4e0b\u6e38\u7b97\u5b50\u53d1\u9001barrier\u3002</li> <li>KeyBy/Reduce\u7b97\u5b50\u7684Subtask\uff1a\u6536\u5230\u547d\u4ee4\u540e\uff0c\u5c06\u4e0a\u6e38\u7684\u6bcf\u4e2a\u4fe1\u9053\u6570\u636e\u4f9d\u65e7\u6536\u96c6\uff0c\u76f4\u5230\u8be5\u4fe1\u9053\u7684barrier\u4f20\u5165\u3002\u7136\u540e\u5411\u6240\u6709\u4e0b\u6e38\u53d1\u9001barrier,\u5e76\u672c\u5730\u4fdd\u5b58\u72b6\u6001\u3002</li> <li>Sink\u7b97\u5b50\u7684Subtask\uff1a\u6536\u5230\u547d\u4ee4\u4e4b\u540e\u505c\u6b62\u5904\u7406\u6570\u636e\u3002\u7136\u540e\u6536\u5230\u4e0a\u6e38barrier\u4e4b\u540e\uff0c\u5c06\u4fe1\u9053\u6570\u636e\u6301\u4e45\u5316\u5230\u72b6\u6001\u540e\u7aef\u4e2d\u3002</li> <li>\u5feb\u7167\u5b8c\u6210\uff0cJobMannager\u6536\u5230\u6240\u6709\u7684subtask\u90fd\u6267\u884c\u5b8c\u6bd5\uff0c\u5219\u4e00\u6b21checkpoint\u5b8c\u6210\u3002</li> </ol> <p>\u7aef\u5230\u7aef\u7cbe\u786e\u4e00\u6b21\u6027</p> <p>\u73b0\u5728\u7cfb\u7edf\u5185\u90e8\u53ef\u4ee5\u5b9e\u73b0\u7cbe\u786e\u4e00\u6b21\u6027\uff0c\u5982\u4f55\u7aef\u5230\u7aef\u7cbe\u786e\u4e00\u6b21\u6027\u5462\uff1f</p> <ul> <li>Sink\uff1a\u9762\u4e34\u7684\u4e3b\u8981\u95ee\u9898\u662f\u6570\u636e\u91cd\u590d\uff0c\u4e5f\u5c31\u662f\u4e13\u95e8\u6307\u7684\u662f\u4e24\u6b21\u5feb\u7167\u4e4b\u95f4\u7684\u6570\u636e(\u672a\u88ab\u6301\u4e45\u5316\u7684\u4e2d\u95f4\u6001\u6570\u636e)\u3002</li> <li>\u4e0b\u6e38\u5b58\u50a8\u4e2d\u7684\u9009\u578b\uff0c\u9700\u8981\u652f\u6301\u8fdb\u884c\u5e42\u7b49\u5199\u5165\uff0c\u4e5f\u5c31\u662f\u4e2d\u95f4\u6001\u6570\u636e\u53ef\u4ee5\u91cd\u590d\u5199\u5165\u5230\u4e0b\u6e38\u5b58\u50a8\u4e2d\uff0c\u800c\u552f\u4e00/\u5e42\u7b49\u6027\u64cd\u4f5c\u5728\u4e0b\u6e38\u8fdb\u884c\u4fdd\u8bc1\u3002\u6bd4\u5982\u901a\u8fc7Redis\u8fdb\u884c\u5e42\u7b49\u5199\u5165\uff0c\u540c\u4e00\u4e2akey\u8fdb\u884c\u65e7\u503c\u8986\u76d6\u3002\u4f46\u662f\u5b83\u672c\u8d28\u4e0a\u5e76\u6ca1\u6709\u89e3\u51b3\u6570\u636e\u91cd\u590d\u8f93\u51fa\u7684\u95ee\u9898\uff0c</li> <li> <p>\u4ece\u6839\u672c\u4e0a\u89e3\u51b3\u91cd\u590d\u8f93\u51fa\uff0c\u4e5f\u5c31\u662f\u5728Sink\u548c\u4e0b\u6e38\u5b58\u50a8\u4e2d\u6784\u5efa\u5206\u5e03\u5f0f\u4e8b\u52a1\uff0c\u8ba9\u4e2d\u95f4\u672a\u6301\u4e45\u5316\u7684\u6570\u636e\uff0c\u8981\u4e48\u88ab\u5b8c\u6574\u5199\u5165\uff0c\u8981\u4e48\u5b8c\u5168\u4e0d\u88ab\u5199\u5165\u3002\u90a3\u4e48\u6784\u5efa\u5206\u5e03\u5f0f\u4e8b\u52a1\u7684\u65b9\u5f0f\uff1f\u9996\u5148\uff0c\u53ef\u4ee5\u4f7f\u7528WAL\u5b9e\u73b0(\u63d0\u5347\u7cbe\u786e\u4e00\u6b21\u6982\u7387\uff0c\u4f46\u662f\u4e0d\u80fd\u5b8c\u5168\u7cbe\u786e\u4e00\u6b21\u6027\uff0c\u539f\u56e0\u5728\u4e8e\u4fdd\u5b58\u5728\u672c\u5730\u548c\u53d1\u9001\u4e0b\u6e38\uff0c\u8fd9\u4e24\u6b65\u5e76\u4e0d\u662f\u539f\u5b50\u6027\u7684)\u3002\u4e5f\u5c31\u662f\u5728\u4e24\u6b21\u5feb\u7167\u95f4\u9694\u4e4b\u95f4\uff0c\u5148\u4e0d\u628a\u6570\u636e\u53d1\u9001\u5230\u4e0b\u6e38\u5b58\u50a8\uff0c\u800c\u662f\u5b58\u50a8\u5230Sink\u4e2d\u72b6\u6001\u4e2d\u3002\u5f53\u5feb\u7167\u6267\u884c\u5b8c\u6bd5\uff0c\u5219\u7edf\u4e00\u5c06Sink\u4fdd\u5b58\u7684\u6570\u636e\u53d1\u9001\u5230\u4e0b\u6e38\u5b58\u50a8\u5f15\u64ce\u4e2d\uff0cWAL\u65e5\u5fd7\u529f\u80fdFlink\u6709\u4e13\u95e8\u62bd\u8c61\u7c7b\u3002\u5176\u6b21\uff0c\u53ef\u4ee5\u901a\u8fc7\u4e24\u9636\u6bb5\u63d0\u4ea4\u6784\u5efa\u5206\u5e03\u5f0f\u4e8b\u52a1(\u76f8\u6bd4\u4e8eWAL\u6548\u679c\u66f4\u597d)\u3002\u5728\u4e24\u6b21\u5feb\u7167\u95f4\u9694\u4e2d\uff0c\u4e2d\u95f4\u7684\u6570\u636e\u5e76\u4e0d\u662f\u7a33\u5b9a\u7684\uff0c\u4f46\u662f\u8fd9\u65f6\u5019\u5c31\u5c06\u5176\u8f93\u51fa\u5230\u4e0b\u6e38\u5b58\u50a8\u5f15\u64ce\u4e2d(prepare\u9636\u6bb5)\u3002\u5f53\u7b2c\u4e8c\u6b21\u5feb\u7167\u6267\u884c\u5b8c\u6bd5\uff0c\u5219\u8ba4\u4e3a\u6b64\u6b21\u7684\u4e2d\u95f4\u64cd\u4f5c\u6570\u636e\u6709\u6548\uff0c\u53ef\u4ee5\u63d0\u4ea4\uff0c\u901a\u77e5\u4e0b\u6e38\u5b58\u50a8\u8fdb\u884c\u63d0\u4ea4(ommmit\u9636\u6bb5)\u3002</p> </li> <li> <p>\u800cSource\u6bd4\u8f83\u7b80\u5355\uff0c\u53ea\u8981\u652f\u6301\u6570\u636e\u91cd\u653e\uff0c\u5e76\u4e14\u5728checkpoint\u7684\u65f6\u5019\u5c06offset\u4fdd\u5b58\u4e0b\u6765\u5c31\u53ef\u4ee5\u3002</p> </li> </ul>"},{"location":"dataWarehouse/flink_learn/#_9","title":"\u72b6\u6001\u540e\u7aef","text":"<p>\u9664\u4e86\u8fdc\u7aef\u5b58\u50a8\uff0c<code>subtask</code>\u672c\u5730\u7684\u72b6\u6001\u5982\u4f55\u5b58\u50a8\u5462\uff1f</p> <p><code>Flink</code>\u5185\u7f6e\u4e24\u79cd\u72b6\u6001\u540e\u7aef:</p> <ul> <li>HashMap - \u5185\u5b58</li> <li>RockDB - \u78c1\u76d8\uff0c\u7c7b\u4f3cleveldb,\u90fd\u662f\u672c\u5730LSM KV\u5b58\u50a8\u5f15\u64ce</li> </ul> <p>\u4ece2.0\u5f00\u59cb\u8fd8\u6709\u65b0\u7684\u72b6\u6001\u540e\u7aef</p> Java<pre><code>        Configuration conf = new Configuration();\n        conf.set(StateBackendOptions.STATE_BACKEND,\"hashmap\");\n//        conf.set(StateBackendOptions.STATE_BACKEND,\"rocksdb\");\n        StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment(conf);\n</code></pre> <p>\u914d\u7f6e\u5982\u4e0a\u3002\u9ed8\u8ba4\u662f<code>hashmap</code>\u3002</p>"},{"location":"dataWarehouse/flink_learn/#_10","title":"\u6709\u72b6\u6001\u6d41\u4e0e\u4e8b\u4ef6\u9a71\u52a8","text":"<p>\u4e8b\u4ef6\u9a71\u52a8\u5e94\u7528 | Apache Flink</p> <p>\u5176\u5b9e\u6700\u5f00\u59cb\u7684\u5b98\u7f51\u6b3a\u8bc8\u68c0\u6d4b\u5217\u5b50\uff0c\u4f7f\u7528\u7684\u5c31\u662f\u6709\u72b6\u6001\u6d41API\u3002</p> <p>\u5b83\u4e0d\u540c\u4e8e\u7a97\u53e3\u51fd\u6570\uff0c\u53ef\u4ee5\u63d0\u4f9b\u4efb\u610f\u7c92\u5ea6\u7684\u65f6\u95f4\u63a7\u5236\uff0c\u6bd4\u5982\u81ea\u5b9a\u65f6\u8fc7\u671f\u65f6\u95f4\u6765\u91cd\u65b0\u6539\u53d8\u72b6\u6001\u673a\u8fdb\u884c\u65f6\u95f4\u5339\u914d\u3002</p> Java<pre><code>public class FraudDetector extends KeyedProcessFunction&lt;Long,Transaction,Alert&gt;{\n    private static final long serialVersionUID = 1L;\n    private static final double SMALL_AMOUNT = 1.00;\n    private static final double LARGE_AMOUNT = 500;\n    private transient ValueState&lt;Boolean&gt; flagState; //\u7ef4\u62a4\u4e00\u4e2a\u6d41\u7684state\uff0c\u5176\u7a7f\u900fcontext\n    private transient ValueState&lt;Long&gt; timerState;\n    //\u6bcf\u4e2a\u6d41\u5f00\u4e00\u6b21\uff0c\u64cd\u4f5c\u5176\u5168\u5c40\u53d8\u91cf\u4e0e\u72b6\u6001\n    @Override\n    public void open(Configuration parameters) throws Exception {\n        //\u4e00\u4e2avalueState\u63cf\u8ff0\u7b26\uff0c\u4f5c\u7528\u7c7b\u6bd4 fd\n        //\u7ed9\u672c\u6d41\u6ce8\u518c\u4e00\u4e2astate\n        ValueStateDescriptor&lt;Boolean&gt; flagD = new ValueStateDescriptor&lt;&gt;(\"flag\", Types.BOOLEAN);\n        flagState = this.getRuntimeContext().getState(flagD);\n\n        //\u540c\u6837\u64cd\u4f5c\uff0c\u6ce8\u518c\u4e00\u4e2atimer\u5e76\u62ff\u5230\u5176fd\n        ValueStateDescriptor&lt;Long&gt; timerD = new ValueStateDescriptor&lt;&gt;(\"timer-state\", Types.LONG);\n        timerState = this.getRuntimeContext().getState(timerD);\n    }\n\n    @Override\n    public void processElement(Transaction value, Context ctx, Collector&lt;Alert&gt; out) throws Exception {\n        Boolean lastTransWasSmall = flagState.value();\n        if(lastTransWasSmall != null){\n            if(value.getAmount() &gt; LARGE_AMOUNT){\n                Alert alert = new Alert();\n                alert.setId(value.getAccountId());\n                out.collect(alert);\n            }\n            flagState.clear();\n        }\n        if(value.getAmount() &lt; SMALL_AMOUNT){\n            flagState.update(true);\n\n            //\u6ce8\u518c\u4e00\u4e2atimer\uff0c\u5230\u65f6\u95f4\u5c31\u89e6\u53d1onTimer\u56de\u8c03\u3002\n            //\u8fd9\u91cc\u4e4b\u6240\u4ee5\u989d\u5916\u7ef4\u62a4\u4e00\u4e2astate\u4f5c\u4e3atimer\uff0c\u662f\u56e0\u4e3a\u5b9a\u65f6\u4efb\u52a1\u662f\u4e8b\u4ef6\u5339\u914d\u6240\u9a71\u52a8\u7684\u3002\n            long timer = ctx.timerService().currentProcessingTime() + 1000 * 60;\n            ctx.timerService().registerProcessingTimeTimer(timer);\n        }\n    }\n\n    @Override\n    public void onTimer(long timestamp, KeyedProcessFunction&lt;Long, Transaction, Alert&gt;.OnTimerContext ctx, Collector&lt;Alert&gt; out) throws Exception {\n        timerState.clear();\n        flagState.clear();\n    }\n\n}\n</code></pre> <p>\u5177\u4f53\u67095\u79cd\u6709\u72b6\u6001\u6d41\u5904\u7406\u51fd\u6570:</p> <ul> <li>KeyedProcessFunction,\u4e13\u95e8\u4f5c\u7528\u4e8e\u952e\u63a7\u6d41</li> <li>CoProcessFunction\uff0c\u4f5c\u7528\u4e8e\u8fdb\u884cconncect\u4e4b\u540e\u7684\u6d41</li> <li>ProcessWindowFunction\uff1a\u4f5c\u7528\u4e8e\u7a97\u53e3\u6570\u636e\uff0c\u53ef\u62ff\u5230\u72b6\u6001</li> <li>ProcessJoinFunction\uff1a\u4f5c\u7528\u4e8e<code>interval-join</code>\u4e4b\u540e\u7684\u6570\u636e\u3002\u8fd9\u79cdJoin\u4e5f\u53ea\u80fd\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u8fdb\u884c\u5904\u7406\u3002</li> <li>BroadcastProcessFunction\uff1a\u4f5c\u7528\u4e8e\u5e7f\u64ad\u72b6\u6001\u573a\u666f\u3002</li> </ul> Java<pre><code>        keyedStream01\n                .intervalJoin(keyedStream02)\n                .between(Duration.ofMillis(-500), Duration.ofMillis(500))\n                .lowerBoundExclusive()\n                .upperBoundExclusive()\n                .process(new ProcessJoinFunction&lt;Transaction, Transaction, Double&gt;() {\n                    @Override\n                    public void processElement(Transaction left, Transaction right, Context ctx, Collector&lt;Double&gt; out) throws Exception {\n                        out.collect(left.getAmount() + right.getAmount());\n                    }\n                })\n                .filter(x -&gt; x &gt; 1000)\n                .print();\n        try {\n            env.execute();\n        } catch (Exception e){\n            e.printStackTrace();\n        }\n</code></pre>"},{"location":"dataWarehouse/flink_learn/#_11","title":"\u5e7f\u64ad\u72b6\u6001","text":"<p>Broadcast State \u6a21\u5f0f | Apache Flink</p> <p>\u5e7f\u64ad\u72b6\u6001\uff0c\u901a\u5e38\u7528\u4e8e\u4e00\u4e2a\u7b80\u5355\u7684\u89c4\u5219\u6d41\u53d1\u5e03\u7684\u573a\u666f\uff0c\u53ef\u4ee5\u505a\u7b80\u5355\u7684\u5339\u914d\uff0c\u6216\u5355\u7eaf\u7684\u8fc7\u6ee4\u3002</p> Java<pre><code>public class BroadCastDemo {\n    public static void main(String[] args) {\n        Configuration conf = new Configuration();\n        conf.setString(\"rest.port\", \"9091\");\n        conf.setBoolean(\"web.ui.enable\", true);\n        StreamExecutionEnvironment env = StreamExecutionEnvironment.createLocalEnvironmentWithWebUI(conf);\n        DataStreamSource&lt;Transaction&gt; datastream = env.addSource(new TransactionSource());\n        DataStreamSource&lt;Rule&gt; rulestream = env.addSource(new RuleStreamSource());\n        KeyedStream&lt;Transaction, Long&gt; userPartitionedStream = datastream.keyBy(Transaction::getAccountId);\n        MapStateDescriptor&lt;String, Rule&gt; descriptor = new MapStateDescriptor&lt;&gt;(\"ruleBroadcastState\", String.class, Rule.class);\n        BroadcastStream&lt;Rule&gt; ruleBroadcastStream = rulestream.broadcast(descriptor);\n\n        SingleOutputStreamOperator&lt;String&gt; processed = userPartitionedStream\n                .connect(ruleBroadcastStream)\n                .process(new KeyedBroadcastProcessFunction&lt;Long, Transaction, Rule, String&gt;() {\n                    private MapStateDescriptor&lt;String, Rule&gt; descriptor = new MapStateDescriptor&lt;&gt;(\"ruleBroadcastState\", String.class, Rule.class);\n                    //\u5904\u7406\u4e3b\u6570\u636e\u6d41\u5143\u7d20\n                    @Override\n                    public void processElement(Transaction value, ReadOnlyContext ctx, Collector&lt;String&gt; out) throws Exception {\n                        Rule rule = ctx.getBroadcastState(descriptor).get(\"rule\");\n                        if (rule != null) {\n                            if (rule.isValid(value)) {\n                                out.collect(value.toString());\n                            }\n                        }\n                    }\n                    //\u5904\u7406\u5e7f\u64ad\u89c4\u5219\u6d41\u5143\u7d20\n                    @Override\n                    public void processBroadcastElement(Rule value, Context ctx, Collector&lt;String&gt; out) throws Exception {\n                        ctx.getBroadcastState(descriptor).put(\"rule\", value);\n                    }\n                });\n        processed.print();\n        try {\n            env.execute();\n        } catch (Exception e) {\n            throw new RuntimeException(e);\n        }\n    }\n    private static class RuleStreamSource implements SourceFunction&lt;Rule&gt; {\n        private boolean running = true;\n        @Override\n        public void run(SourceContext&lt;Rule&gt; ctx) throws Exception {\n            while(running){\n                Thread.sleep(500);\n                ctx.collect(new Rule(RandomUtils.nextDouble()));\n            }\n        }\n        @Override\n        public void cancel() {\n            running = false;\n        }\n    }\n    public static class Rule{\n        private Double amountLimit;\n        public Rule(Double amountLimit){\n            this.amountLimit = amountLimit;\n        }\n        public boolean isValid(Transaction transaction) {\n            return transaction.getAmount() &lt; amountLimit;\n        }\n    }\n}\n</code></pre> <p>\u8fd9\u4e2a\u5b9e\u4f8b\u5bf9<code>Flink</code>\u5b98\u7f51\u4f8b\u5b50\u8fdb\u884c\u4fee\u6539\uff0c\u901a\u8fc7\u5185\u7f6e\u6570\u636e\u6e90\u53bb\u505a\u5e7f\u64ad\u6d41\u3002\u4f7f\u7528\u65b9\u6cd5:</p> <ul> <li>\u4e3a\u5e7f\u64ad\u6d41\u5206\u914d\u4e00\u4e2a\u72b6\u6001fd</li> <li>\u7136\u540e\u548c\u4e3b\u6570\u636e\u6d41(\u901a\u5e38\u4e3a\u952e\u63a7\u6d41)\u8fdb\u884cconnect</li> <li>\u5bf9\u6d41\u8fdb\u884cprocess\uff0c\u6b64\u65f6\u4e00\u4e2a<code>subtask</code>\u53ef\u4ee5\u540c\u65f6\u62ff\u5230\u6700\u65b0\u7684rule\uff0c\u4ee5\u53ca\u6700\u65b0\u7684\u6570\u636e\u3002\u4f46\u662f\u4e24\u8005\u5728\u4e24\u4e2a\u51fd\u6570\u5185\uff0c\u600e\u4e48\u4ea4\u4e92\u5462\uff1f   \u5c31\u662f\u901a\u8fc7\u4e00\u4e2a<code>subtask</code>\u5185\u7684\u5168\u90e8\u53d8\u91cf-state\u6765\u4ea4\u4e92\u3002\u8fd9\u91cc\u7684\u72b6\u6001fd\u548c\u7b2c\u4e00\u6b65\u5b9a\u4e49\u7684\u9700\u8981\u5b8c\u5168\u4e00\u81f4\u3002\u7136\u540e\u5c31\u53ef\u4ee5\u5728\u4e3b\u6570\u636e\u6d41\u5904\u7406\u903b\u8f91\u4e2d\u4f7f\u7528\u4e86\u3002</li> </ul>"},{"location":"dataWarehouse/flink_learn/#_12","title":"\u5b9e\u65f6\u6570\u4ed3\u4e00\u822c\u67b6\u6784","text":"<p>\u603b\u7ed3\u81ea\u6b64\u6587\u7ae0\uff1ahttps://developer.aliyun.com/article/1189954</p>"},{"location":"dataWarehouse/flink_learn/#_13","title":"\u5b9e\u65f6\u6570\u4ed3\u4f7f\u7528\u573a\u666f","text":"<ol> <li>\u5927\u578b\u6d3b\u52a8\u7684\u6307\u6807\u7edf\u8ba1\uff0c\u767e\u4e07\u7ea7\u522bQPS</li> <li>\u4e1a\u52a1\u6838\u5fc3\u770b\u677f</li> <li>\u63a8\u8350\u573a\u666f\uff0c\u9700\u8981\u6570\u636e\u4e0d\u65ad\u6d41(\u5f53\u7136\u4f7f\u7528Flink)\u6765\u8bad\u7ec3\u6a21\u578b</li> </ol> <p>\u57fa\u4e8eLambda\u67b6\u6784\u4e0b\u7684\u6570\u4ed3\uff0c\u4e00\u822c\u5b9e\u65f6\u94fe\u8def\u91c7\u7528Kafka + Flink\u3002</p> <p>Kafka\u8d1f\u8d23\u6570\u636e\u5b58\u50a8\uff0c\u800cFlink\u8d1f\u8d23\u6570\u636e\u8ba1\u7b97\u3002\u4e00\u822c\u7ef4\u5ea6\u8868\u8fd8\u4f1a\u5b58\u50a8\u5728KV DB\u4e2d\u3002</p>"},{"location":"dataWarehouse/flink_learn/#_14","title":"\u5206\u5c42\u5efa\u8bbe","text":""},{"location":"dataWarehouse/flink_learn/#ods","title":"ODS\u5c42","text":"<p>ODS\u5c42\u76f4\u63a5\u5bf9\u5e94\u539f\u59cb\u6570\u636e\uff0c\u6d41\u91cf\u5927\uff0c\u591a\u4e1a\u52a1\u590d\u7528\uff0c\u683c\u5f0f\u590d\u6742\u3002\u4e00\u822c\u4f1a\u8fdb\u884c\u5982\u4e0b\u64cd\u4f5c\uff1a</p> <ol> <li>\u65e5\u5fd7\u683c\u5f0f\u8f6c\u6362\u62c6\u89e3\u3002</li> <li>\u6570\u636e\u5206\u6d41\uff0c\u5c06\u6570\u636e\u5206\u4e3a\u4e0d\u540c\u7684\u4e3b\u9898\u57df(\u4eceKafka\u8bfb\uff0c\u7ecf\u8fc7\u4e1a\u52a1\u5904\u7406\uff0c\u518d\u5199\u5165Kafka\u4e2d)\u3002</li> </ol> <p>\u6bd4\u5982\uff0ckafka Topic\u6570\u636e\u6e90\u5305\u62ec\u6240\u6709\u7528\u6237\u7684\u9500\u552e\u8ba2\u5355\u4fe1\u606fInputModel\u3002\u9500\u552e\u8ba2\u5355\u5305\u62ec\u4f53\u80b2\u4f1a\u573a\uff0c\u7f8e\u5986\u4f1a\u573a\uff0c\u670d\u88c5\u4f1a\u573a\u7684\u3002\u6211\u4eec\u73b0\u5728\u9700\u8981\u5c06\u5176\u62c6\u5206\u5230\u4e0d\u540c\u7684Kafka Topic\u4e2d\uff0c\u5e38\u89c1\u65b9\u6848\u6709\u5982\u4e0b\u51e0\u79cd\uff1a</p> <ol> <li>\u521b\u5efa\u4e09\u4e2a\u6d41\uff0c\u4f7f\u7528filter\u5206\u522b\u51fa\u4e09\u4e2aTopic\u7684\u6570\u636e\uff0c\u518d\u5206\u522b\u53d1\u9001\u5230\u4e0d\u540c\u7684Sink\u7b97\u5b50\u4e2d\u3002\u8fd9\u79cd\u65b9\u5f0f\u5e76\u4e0d\u5408\u9002\uff0c\u56e0\u4e3aSource\u5982\u679c\u8f93\u5165\u662f100W QPS\uff0c\u90a3\u4e48Source\u7684\u8f93\u51fa\u5c31\u4f1a\u662f300W QPS\uff0c\u6210\u500d\u6570\u589e\u957f\u3002</li> <li>\u4f7f\u7528\u4e00\u4e2a\u6d41\uff0c\u4f7f\u7528\u6709\u72b6\u6001\u51fd\u6570\u8fdb\u884c\u4fa7\u5199(<code>ctx.output(tag, value)</code>)\uff0c\u4e0b\u6e38sink\u53ea\u9700\u8981\u6267\u884c(sink.geSideOutput(tag).print())\uff0c\u5c31\u53ef\u4ee5\u6e90\u6e90\u4e0d\u65ad\u8f93\u51fa\u5bf9\u5e94\u7684\u6570\u636e\u3002</li> </ol>"},{"location":"dataWarehouse/flink_learn/#dwd","title":"DWD\u5c42","text":"<p>DWD\u5c42\uff0c\u4e00\u822c\u4f1a\u5c06\u4e8b\u5b9e\u8868\u548c\u7ef4\u5ea6\u8868\u8fdb\u884c\u5173\u8054(JOIN)\u5efa\u8bbe\uff0c\u6bd4\u5982\u76f4\u64ad\u751f\u4ea7DWD\u8868\uff0c\u4ee5\u53ca\u76f4\u64ad\u4fa7\u7ef4\u8868\u8fdb\u884c\u5173\u8054\u3002</p> <p>\u7ef4\u5ea6\u5173\u8054\u7684\u65b9\u6848\u6709\u5982\u4e0b\u51e0\u79cd\uff1a</p> <ol> <li>\u7ef4\u5ea6\u8868\u6bd4\u8f83\u7a33\u5b9a\uff0c\u4f7f\u7528KV\u5b58\u50a8\uff0c\u501f\u52a9UDF\u8fdb\u884c\u5173\u8054\u3002</li> <li>\u7ef4\u5ea6\u8868\u53d8\u5316\u5f88\u5927\u5e76\u4e14\u65f6\u6548\u6027\u8981\u6c42\u8f83\u9ad8\uff0c\u5219\u4f7f\u7528<code>interval join</code>\u3002</li> <li>\u7ef4\u5ea6\u8868\u53d8\u5316\u5f88\u5927\u5e76\u4e14\u7a33\u5b9a\u6027\u8981\u6c42\u8f83\u9ad8\uff0c\u5219\u4f7f\u7528\u81ea\u5b9a\u4e49\u65b9\u6848\u3002</li> </ol> <p>\u4e00\u822cDWS\u5c42\u4e5f\u4e0d\u9700\u8981\u5efa\u7acb\uff0c\u53ef\u4ee5\u76f4\u63a5\u5230ADS\u5c42\u3002</p>"},{"location":"dataWarehouse/flink_learn/#ads","title":"ADS\u5c42","text":"<p>\u3002\u3002\u3002\u672a\u5b8c\u5f85\u7eed</p>"},{"location":"dataWarehouse/flink_learn/#flink_2","title":"Flink\u5e38\u89c1\u95ee\u9898","text":""},{"location":"dataWarehouse/flink_learn/#_15","title":"\u7a97\u53e3\u65e0\u7ed3\u679c","text":"<p>event-time window\u4e0d\u8f93\u51fa\u7ed3\u679c\u3002</p> <ul> <li>\u7528\u6237\u7f16\u7801\u95ee\u9898\u3002\u53ef\u80fd\u6839\u672c\u6ca1\u6709\u901a\u8fc7assignTimestampsAndWatermarks\u8bbe\u7f6ewatermark\u7b56\u7565\u3002</li> <li>\u4e0a\u6e38\u6570\u636e\u592a\u5c11/\u4e2d\u95f4\u5904\u7406\u5b8c\u6bd5\u4e4b\u540e\u7ed3\u679c\u6570\u636e\u592a\u5c11\uff0c\u5bfc\u81f4watermark\u63a8\u8fdb\u4e0d\u4e86\u3002</li> <li>watermark\u4e0d\u5bf9\u9f50\uff0c\u4e5f\u5c31\u662f\u4e0a\u6e38\u591a\u4e2awatermark\u7684\u6700\u5c0f\u503c\u592a\u5c0f\u4e86\u3002</li> </ul> <p>\u89e3\u51b3\u65b9\u6848\u5982\u4e0b\uff1a</p> <ul> <li>\u6b63\u786e\u7f16\u7801</li> <li>\u5728\u6570\u636e\u6e90\u90e8\u5206\u5c31\u8bbe\u7f6ewatermark\uff0c\u800c\u4e0d\u662f\u4e2d\u95f4\u8bbe\u7f6e\u3002\u6bd4\u5982\u76f4\u63a5\u4f7f\u7528FlinkKafkaConsumer\u7684\u53c2\u6570\u6765\u8bbe\u7f6ewatermark\u3002</li> </ul>"},{"location":"dataWarehouse/flink_learn/#_16","title":"\u6570\u636e\u4e71\u5e8f","text":"<p>\u6570\u636e\u4e71\u5e8f\u5bfc\u81f4\u7684\u95ee\u9898\uff1a\u7a97\u53e3\u8ba1\u7b97\u7ed3\u679c\u9519\u8bef\u3002\u6bd4\u5982\u901a\u8fc71min \u4e8b\u4ef6\u65f6\u95f4\u8ba1\u7684\u6eda\u52a8\u7a97\u53e3\uff0c\u5219\u5982\u679c\u7a97\u53e3\u5224\u65ad\u53ef\u4ee5\u7ed3\u675f\u4e86\uff0c\u800c\u540e\u7eed\u8fd8\u6709\u8fdf\u5230\u7684\u6570\u636e\uff0c\u5219\u8ba1\u7b97\u7ed3\u679c\u5ba2\u89c2\u6765\u770b\u662f\u9519\u8bef\u7684\u3002</p> <p>\u672c\u8d28\u539f\u56e0\u6709\u4e24\u4e2a\uff1a</p> <ol> <li>\u539f\u59cb\u6570\u636e\u4e71\u5e8f</li> <li>Flink\u672c\u8eab\u673a\u5236\u95ee\u9898\uff0c\u5c31\u662f\u91c7\u7528\u7684\u542f\u53d1\u5f0f\u6c34\u4f4d\uff0c\u5b58\u5728\u8fdf\u5230\u6570\u636e\u88ab\u629b\u5f03\u7684\u60c5\u51b5\u3002</li> </ol> <p>\u89e3\u51b3\u65b9\u6848\u5982\u4e0b\uff1a</p> <ol> <li>\u4ece\u6e90\u5934\u907f\u514d\u4e71\u5e8f\u3002\u672c\u8d28\u4e0a\u662f\u4e0d\u80fd\u907f\u514d\u7684\u3002</li> <li>\u8ba9\u8fdf\u5230\u6570\u636e\u88ab\u8ba1\u7b97\u3002</li> </ol> <p>\u7b2c\u4e8c\u79cd\u65b9\u6848\u7684\u601d\u8def\uff1a</p> <ul> <li>\u4f7f\u7528forBounded\u6c34\u4f4d\u7b56\u7565</li> <li>allowLateness()\u51fd\u6570\uff0c\u5141\u8bb8\u5ef6\u8fdf(\u4f46\u662f\u4e0d\u8981\u592a\u957f\uff0c\u9632\u6b62\u72b6\u6001\u7d2f\u79ef\u8fc7\u5927)</li> <li>\u5c06\u4e71\u5e8f\u6570\u636e\u653e\u5165\u4fa7\u5199\u6d41\u3002\u8fd9\u4e2a\u51fd\u6570\u8c03\u7528\u653e\u5230\u7a97\u53e3\u51fd\u6570\u4e4b\u524d\u5c31\u53ef\u4ee5\u5b9e\u73b0\u3002</li> </ul>"},{"location":"dataWarehouse/flink_learn/#sql","title":"\u6d41\u5f0fSQL","text":""},{"location":"dataWarehouse/flink_learn/#_17","title":"\u7406\u8bba\u57fa\u7840","text":"<p>\u6d41\u5f0fSQL\u7684\u6838\u5fc3\uff0c\u662f\u5728\u7ecf\u5178SQL\u57fa\u7840\u4e4b\u4e0a\uff0c\u5f15\u5165\u4e86\u65f6\u53d8\u5173\u7cfb\u3002</p> <p>\u5982\u679c\u628a\u7ecf\u5178\u5173\u7cfb\u770b\u505a\u7531x-y\u8f74\u7ec4\u6210\u7684\u4e8c\u7ef4\u8868\uff0c\u90a3\u4e48\u65f6\u53d8\u5173\u7cfb\u5c31\u662f\u5f15\u5165z\u8f74\u6765\u968f\u7740\u65f6\u95f4\u7684\u53d8\u5316\u6355\u6349\u4e8c\u7ef4\u8868\u7684\u4e0d\u540c\u7248\u672c(\u5feb\u7167)\u3002</p> <p>\u5047\u5982\u8bf4\u67d0\u4e2a\u65f6\u523b\uff0c\u4e8c\u7ef4\u5173\u7cfb\u662f\u5982\u4e0b\u72b6\u6001,\u5176\u4e2d\u7684time\u662fprocess_time\u8bed\u4e49\u3002</p> SQL<pre><code>12:07&gt; SELECT * FROM UserScores;\n--------------------------\n| Name  | Score | Time   |\n--------------------------\n| Julie | 7     | 12:01  |\n| Frank | 3     | 12:03  |\n| Julie | 1     | 12:03  |\n| Julie | 4     | 12:07  |\n--------------------------\n</code></pre> <p>\u4f46\u662f\u53ef\u80fd\u572812:01\u7684\u65f6\u5019\uff0c\u5173\u7cfb\u662f\u5982\u4e0b\u7684\uff1a</p> SQL<pre><code>12:01&gt; SELECT * FROM UserScores; \n-------------------------\n| Name  | Score | Time  |\n-------------------------\n| Julie | 7     | 12:01 |\n-------------------------\n</code></pre> <p>\u6574\u4f53\u968f\u7740\u65f6\u95f4\u7684\u63a8\u79fb\uff0c\u65f6\u53d8\u5173\u7cfb\u5982\u4e0b\uff0c\u4e5f\u5c31\u662fz\u8f74\u65b9\u5411\u6392\u52174\u5f20\u8868\u3002</p> SQL<pre><code>12:07&gt; SELECT TVR * FROM UserScores;\n---------------------------------------------------------\n|       [-inf, 12:01)       |       [12:01, 12:03)      |\n| ------------------------- | ------------------------- |\n| | Name  | Score | Time  | | | Name  | Score | Time  | |\n| ------------------------- | ------------------------- |\n| |       |       |       | | | Julie | 7     | 12:01 | |\n| |       |       |       | | |       |       |       | |\n| |       |       |       | | |       |       |       | |\n| |       |       |       | | |       |       |       | |\n| ------------------------- | ------------------------- |\n---------------------------------------------------------\n|       [12:03, 12:07)      |       [12:07, now)        |\n| ------------------------- | ------------------------- |\n| | Name  | Score | Time  | | | Name  | Score | Time  | |\n| ------------------------- | ------------------------- |\n| | Julie | 7     | 12:01 | | | Julie | 7     | 12:01 | |\n| | Frank | 3     | 12:03 | | | Frank | 3     | 12:03 | |\n| | Julie | 1     | 12:03 | | | Julie | 1     | 12:03 | |\n| |       |       |       | | | Julie | 4     | 12:07 | |\n| ------------------------- | ------------------------- |\n---------------------------------------------------------\n</code></pre> <p>\u5982\u679c\u6211\u4eec\u8981\u5bf9\u65f6\u53d8\u5173\u7cfb\u8fdb\u884c\u5173\u7cfb\u4ee3\u6570\u8fd0\u7b97(SQL\u7684\u8fc7\u6ee4\uff0c\u9009\u62e9\uff0c\u5206\u7ec4\u805a\u5408)\u7b49\u64cd\u4f5c\uff0c\u90a3\u4e48\u5176\u5b9e\u5c31\u662f\u5bf9\u6bcf\u4e2a\u4e8c\u7ef4\u5173\u7cfb\u5feb\u7167\u7684\u64cd\u4f5c\u3002</p> <p>\u90a3\u4e48\u548c\u6d41\u6709\u4ec0\u4e48\u5173\u7cfb\u5462\uff1f\u6d41\u5e76\u4e0d\u80fd\u6355\u6349\u5230\u6bcf\u4e2a\u72b6\u6001\u5feb\u7167\uff0c\u5b83\u662f\u6355\u6349\u7684\u6bcf\u4e2a\u5bfc\u81f4\u72b6\u6001\u5feb\u7167\u53d1\u751f\u53d8\u5316\u7684\u53d8\u52a8\u5e8f\u5217(\u64cd\u4f5c\u5e8f\u5217\uff0c\u6216\u8005\u8bf4\u662f\u589e\u91cf\u53d8\u66f4)\u3002</p> <p>\u4e3e\u4f8b\u5982\u4e0b,\u5206\u522b\u662f\u8868\u7248\u672c\u548c\u6d41\u7248\u672c\u7684\u793a\u4f8b\uff1a</p> SQL<pre><code>                                          12:01&gt; SELECT STREAM Name, \n12:03&gt; SELECT TABLE Name,                          SUM(Score) as Total,\n         SUM(Score) as Total,                      MAX(Time) as Time,\n         MAX(Time) as Time                         Sys.Undo as Undo\n       FROM UserScores GROUP BY Name;            FROM UserScores GROUP BY Name;\n-------------------------                 --------------------------------\n| Name  | Total | Time  |                 | Name  | Total | Time  | Undo |\n-------------------------                 --------------------------------\n| Julie | 8     | 12:03 |                 | Julie | 7     | 12:01 |      |\n| Frank | 3     | 12:03 |                 | Frank | 3     | 12:03 |      |\n-------------------------                 | Julie | 7     | 12:03 | undo |\n                                          | Julie | 8     | 12:03 |      |\n                                          ........ [12:01, 12:03] ........ \n</code></pre> <p>\u6240\u4ee5\u8bf4\uff0c\u6d41\u548c\u8868\u5176\u5b9e\u662f\u4e00\u4f53\u4e24\u9762\u3002</p>"},{"location":"dataWarehouse/flink_learn/#beam","title":"Beam\u6a21\u578b","text":"<p>\u300a\u6d41\u5f0f\u7cfb\u7edf\u300b\u4e2d \u4ecb\u7ecd\u7684Beam\u6a21\u578b\uff0c\u5c31\u662f\u4e00\u79cd\u6d41\u504f\u597d\u7684\u6a21\u578b\uff1a\u5bf9\u6d41\u8fdb\u884c\u8f6c\u6362\uff0c \u5f97\u5230\u65b0\u7684\u6d41</p> <p>\u5bf9\u4e8eBeam\u6a21\u578b\uff0c\u5176\u8f6c\u6362\u64cd\u4f5c\u90fd\u662f\u901a\u8fc7\u6d41\u7684\u5f62\u5f0f\u6765\u8fdb\u884c\u7684\uff0c\u800c\u8868\u603b\u662f\u88ab\u7279\u6b8a\u5bf9\u5f85\uff1a\u8981\u4e48\u662fSource/Sink\u7aef\u7684\u62bd\u8c61\uff0c\u8981\u4e48\u662f\u5728\u5904\u7406\u8fc7\u7a0b\u4e2d\u88ab\u9690\u85cf\uff0c\u4e5f\u5c31\u662f\u8bf4Beam\u5728\u4efb\u4f55\u6d89\u53ca\u5230\u8868\u7684\u5730\u65b9\uff0c\u90fd\u5c06\u5176\u9690\u85cf\u5728\u4e24\u4e2a\u8f6c\u6362\u4e4b\u95f4\u3002</p>"},{"location":"dataWarehouse/flink_learn/#sql_1","title":"SQL\u6a21\u578b","text":"<p>SQL\u6a21\u578b\u4e00\u76f4\u90fd\u662f\u8868\u504f\u597d\u7684\u6a21\u578b\uff0c\u5bf9\u8868\u8fdb\u884c\u8f6c\u6362\uff0c\u5f97\u5230\u65b0\u7684\u8868\u3002</p> <p>\u5bf9\u4e8eSQL\u6a21\u578b\uff0c\u5176\u8f6c\u6362\u64cd\u4f5c\u90fd\u662f\u901a\u8fc7\u8868\u7684\u65b9\u5f0f\u8fdb\u884c\u7684\uff0c\u800c\u6d41(\u6bd4\u5982select \u8fc7\u7a0b\u4e2d\u7684\u4e00\u4e2a\u4e2arecord)\u603b\u662f\u88ab\u9690\u85cf\u3002</p>"},{"location":"dataWarehouse/flink_learn/#_18","title":"\u6d41\u8868\u6df7\u5408","text":"<p>\u5982\u679c\u8f93\u5165\u6709\u8868\uff0c\u53c8\u6709\u6d41\uff0c\u90a3\u4e48\u8f93\u51fa\u5e94\u8be5\u662f\u8868\u8fd8\u662f\u6d41\u5462\uff1f</p> <p>\u7ed3\u8bba\u5982\u4e0b\uff1a</p> <ol> <li>\u5982\u679c\u6240\u6709\u8f93\u5165\u90fd\u662f\u8868\uff0c\u8f93\u51fa\u624d\u4f1a\u4f7f\u8868</li> <li>\u5982\u679c\u6709\u4e00\u4e2a\u8f93\u5165\u662f\u6d41\uff0c\u8f93\u51fa\u5c31\u4f1a\u662f\u6d41</li> </ol>"},{"location":"dataWarehouse/flink_learn/#_19","title":"\u64cd\u4f5c\u57fa\u7840","text":"<p>\u6807\u51c6\u7684Flink SQL\u64cd\u4f5c\u903b\u8f91\u5982\u4e0b\uff1a</p> <ol> <li>\u8f93\u5165\u6d41\u8f6c\u6362\u4e3aSQL \u52a8\u6001\u8f93\u5165\u8868</li> <li>\u6267\u884c\u8fde\u7eed\u67e5\u8be2\uff0c\u4ea7\u751f\u52a8\u6001\u8f93\u51fa\u8868\uff0c\u8fde\u7eed\u67e5\u8be2\u8fc7\u7a0b\u4e2d\u901a\u5e38\u662f\u6709\u72b6\u6001\u7684</li> <li>\u5c06\u52a8\u6001\u8f93\u51fa\u8868\u6620\u5c04\u4e3a\u8f93\u51fa\u6d41\uff0c\u7136\u540e\u5c06\u8f93\u51fa\u6d41\u5b58\u50a8\u5230\u4e0b\u6e38Sink\u4e2d</li> </ol> <p>Source\u8868</p> SQL<pre><code>CREATE TABLE employee_information (\n    emp_id INT,\n    name VARCHAR,\n    dept_id INT\n) WITH ( \n    'connector' = 'filesystem',\n    'path' = '/path/to/something.csv',\n    'format' = 'csv'\n);\n</code></pre> <p>\u4ee5\u8868\u5f62\u5f0f\u5b58\u5728\u7684\u6570\u636e\u6e90\uff0c\u6bcf\u5f53\u6709\u65b0\u6570\u636e\u5199\u5165\u65f6\uff0c\u90fd\u53ef\u4ee5\u88ab\u64cd\u4f5c\u3002</p> <p>\u5982\u679c\u5bf9\u5f53\u524d\u8868\u6267\u884c\u8fde\u7eed\u64cd\u4f5c\uff1a</p> SQL<pre><code>SELECT * from employee_information WHERE dept_id = 1;\n</code></pre> <p>\u5219\u5f53source\u8868\u6bcf\u8fdb\u6765\u4e00\u884c\u6570\u636e\uff0c\u5219\u4f1a\u7acb\u5373\u8bfb\u53d6\u5e76\u8f93\u51fa\u7ed3\u679c\u3002</p> <p>\u6280\u672f\u5b9e\u73b0\u4e0a\uff0cFlink\u91c7\u7528\u52a8\u6001\u8868\u7684\u6280\u672f\uff0c\u5b9e\u73b0\u8f93\u5165\u8f93\u51fa\u548c\u8868\u7684\u6620\u5c04\u3002</p> <p>\u8fde\u7eed\u67e5\u8be2</p> SQL<pre><code>SELECT \n   dept_id,\n   COUNT(*) as emp_count \nFROM employee_information \nGROUP BY dept_id;\n</code></pre> <p>\u5b83\u4f1a\u5bf9\u6e90\u8868\u6bcf\u4e2a\u65b0\u6765\u7684\u6570\u636e\u8fdb\u884c\u8bfb\u53d6\uff0c\u5e76\u66f4\u65b0\u805a\u5408\u7ed3\u679c\u3002</p> <p>\u6280\u672f\u5b9e\u73b0\u4e0a\uff0cFlink\u901a\u8fc7\u7c7b\u4f3c\u7269\u5316\u89c6\u56fe\u7684\u65b9\u5f0f\u6765\u5b9e\u73b0\u8f6c\u6362\u64cd\u4f5c\u3002\u8bb0\u5f55\u5bf9\u6e90\u8868(\u52a8\u6001\u8868)\u7684\u64cd\u4f5c(INSERT, UPDATE, DELETE)\u5e8f\u5217,\u4e5f\u5c31\u662f\u4e00\u4e2a\u66f4\u65b0\u65e5\u5fd7\u6d41\uff0c\u5219\u4e0d\u65ad\u5bf9\u7269\u5316\u89c6\u56fe\u5e94\u7528\u66f4\u65b0\u65e5\u5fd7\u6d41\uff0c\u5f97\u5230\u4e0d\u65ad\u66f4\u65b0\u7684\u7269\u5316\u89c6\u56fe\u3002</p> <p>sink\u8868 \u6bd4\u5982\u5982\u4e0bsql:</p> SQL<pre><code>INSERT INTO department_counts\nSELECT \n   dept_id,\n   COUNT(*) as emp_count \nFROM employee_information\nGROUP BY dept_id;\n</code></pre> <p>sink\u8868\u4f1a\u5c06\u805a\u5408\u7ed3\u679c\u6e90\u6e90\u4e0d\u65ad\u5199\u5165\u5230\u6307\u5b9a\u7684\u8868\u4e2d(\u5bf9\u5e94\u805a\u5408\u7ed3\u679c\u76f4\u63a5\u66ff\u6362\uff0c\u6bd4\u5982\u4ece20 -&gt; 30)\u3002</p> <p>sink\u8868\u4f1a\u67093\u79cd\u5e95\u5c42\u5b9e\u73b0\uff1a</p> <ol> <li>append-only \u65e5\u5fd7\u6d41\uff0c\u4e5f\u5c31\u662f\u6bcf\u4e2a\u65e5\u5fd7\u64cd\u4f5c\u7684record\u8303\u56f4\u4e0d\u4f1a\u91cd\u53e0\u3002</li> <li>retract-only \u65e5\u5fd7\u6d41\uff0c\u4e5f\u5c31\u662f\u5305\u542b\u65b0\u589e\u65e5\u5fd7\u64cd\u4f5c\u548cundo\u65e5\u5fd7\u64cd\u4f5c\uff0c\u4fdd\u8bc1\u65e5\u5fd7\u8f93\u51fa\u4e00\u76f4\u6700\u65b0\u7684\u7ed3\u679c\u3002\u5219insert\u662f\u4e00\u6b21\u65b0\u589e\uff0c\u800cdelete\u4e00\u6b21undo\uff0c\u800cupdate\u4e00\u6b21undo\u548c\u4e00\u6b21\u65b0\u589e\u3002</li> <li>upsert-only \u65e5\u5fd7\u6d41\uff0c\u8bed\u4e49\u540c\u5176\u4ed6\u6570\u636e\u5e93\u7684upsert\u8bed\u4e49\u3002</li> </ol> <p>\u518d\u6bd4\u5982\u4f7f\u7528SQL\u7edf\u8ba1\u6bcf\u79cd\u5546\u54c1\u7684\u5386\u53f2\u7d2f\u79ef\u9500\u552e\u989d\uff1a</p> SQL<pre><code>//source\u8868\nCREATE TABLE source_table (\n    pId BIGINT,\n    income BIGINT\n) WITH (\n    ...\n);\n//sink\u8868\nCREATE TABLE sink_table(\n    pId BIGINT,\n    all BIGINT\n) WITH (\n    ...\n)\n//\u8fde\u7eed\u67e5\u8be2\nINSERT INTO sink_table\nSELECT \n    pId,\n    SUM(income) as all\nFROM source_table\nGROUP BY PId;\n</code></pre> <p>\u5219\u5f53\u52a8\u6001\u8f93\u5165\u8868\u6570\u636e\u4e00\u884c\u4e00\u884c\u63d2\u5165\u7684\u65f6\u5019\uff0c\u8fde\u7eed\u67e5\u8be2\u7ed3\u679c\u4f1a\u4e00\u76f4\u66f4\u65b0\uff0c\u540c\u65f6\u52a8\u6001\u8f93\u51fa\u8868\u7684\u7ed3\u679c\u4e5f\u662f\u4e00\u76f4\u66f4\u65b0\u7684\u3002</p> <p>\u518d\u6bd4\u5982\u6bcf\u79cd\u5546\u54c1\u6bcf1min\u7684\u9500\u552e\u989d\uff0c\u5219\u6d41\u7a0b\u5982\u4e0b\uff1a \u53ef\u4ee5\u770b\u5230\uff0c\u53ea\u8981\u65f6\u95f4\u7a97\u53e3\u7b49\u914d\u7f6e\u6e05\u695a\uff0csql\u4f9d\u65e7\u662f\u76f4\u63a5\u4ece\u8bed\u4e49\u8f6c\u6362\u5c31\u53ef\u4ee5\uff0c\u76f8\u5f53\u76f4\u89c2\u3002</p> SQL<pre><code>//source\u8868\nCREATE TABLE source_table(\n    pId BIGINT,\n    income BIGINT,\n    time BIGINT, //ms\n    row_time AS TO_TIMESTAMP(time,3), //\u4ecetime\u5b57\u6bb5\u6784\u5efa\u4e8b\u4ef6\u65f6\u95f4\u6233\n    WATERMARK FOR row_time AS row_time - INTERVAL '5' SECOND\n) WITH (\n    ...\n);\n\n//sink\u8868\n//\u8fd9\u91cc\u7684\u8f93\u51fa\u5176\u5b9e\u662fappnend only\u7684\uff0c\u56e0\u4e3a\u65f6\u95f4\u7a97\u53e3\u5e76\u4e0d\u80fd\u56de\u6eaf\nCREATE TABLE sink_table(\n    pId BIGINT,\n    sum_income BIGINT\n    minutes STRING\n) WITH (\n    ...\n);\n\n//\u6267\u884c\u67e5\u8be2\uff0c\u5f53\u672c\u5730\u4e8b\u4ef6\u65f6\u95f4\u7684watermark &gt;= \u7a97\u53e3\u7684end\uff0c\u624d\u4f1a\u89e6\u53d1\u7a97\u53e3\u8f93\u51fa\uff0c\u800c\u4e0d\u662f\u6765\u4e00\u6761\u8f93\u51fa\u4e00\u4e2a\u7ed3\u679c\nINSERT INTO sink_table\nSELECT \n    pId,\n    SUM(income) AS sum_income,\n    TUMBLE(row_time, INTERVAL '1' MINUTES) AS minutes\nFROM source_table\nGROUP BY pId,TUMBLE(row_time, INTERVAL '1' MINUTES)\n</code></pre>"},{"location":"dataWarehouse/graphDB/","title":"\u56fe\u6570\u636e\u5e93\u603b\u7ed3","text":"<p>\u53c2\u8003\u5b34\u56fe\u56e2\u961f\u6240\u521b\u7684\u300a\u56fe\u6570\u636e\u5e93\u539f\u7406\uff0c\u67b6\u6784\u4e0e\u5e94\u7528\u300b</p>"},{"location":"dataWarehouse/graphDB/#_2","title":"\u57fa\u7840\u548c\u539f\u7406","text":"<p>\u56fe\u6570\u636e\u5e93\u6709\u4e09\u5927\u6838\u5fc3\u7ec4\u4ef6\uff0c\u56fe\u8ba1\u7b97\uff0c\u56fe\u5b58\u50a8\u548c\u56fe\u67e5\u8be2\u8bed\u8a00\u3002\u4f20\u7edf\u7684\u6570\u636e\u5e93\u67b6\u6784\u90fd\u662f\u4ee5\u5b58\u50a8\u4e3a\u4e2d\u5fc3\u7684\uff0c\u800c\u8ba1\u7b97\u901a\u5e38\u662f\u4f9d\u9644\u7740\u5b58\u50a8\u5f15\u64ce\u6765\u505a\u7684\u3002\u4f46\u662f\u56fe\u6570\u636e\u5e93\u4e2d\u56e0\u4e3a\u8981\u89e3\u51b3\u590d\u6742\u904d\u5386\u4e0e\u67e5\u8be2\u8ba1\u7b97\u7684\u6548\u7387\u95ee\u9898\uff0c\u6240\u4ee5\u56fe\u8ba1\u7b97\u4e5f\u662f\u4e00\u4e2a\u6838\u5fc3\u7ec4\u4ef6\u3002\u751a\u81f3\u53ef\u4ee5\u8bf4\uff0c\u56fe\u6570\u636e\u5e93\u5c31\u662f\u505a\u56fe\u8ba1\u7b97\u7684\u3002</p>"},{"location":"dataWarehouse/graphDB/#_3","title":"\u56fe\u8ba1\u7b97","text":"<p>\u56fe\u8ba1\u7b97\u7684\u672c\u8d28\uff0c\u5c31\u662f\u9762\u5411\u590d\u6742\u7684\u7f51\u7edc\u8fdb\u884c\u8ba1\u7b97\uff0c\u6216\u8005\u8bf4\u662f\u9762\u5411\u5173\u8054\u6570\u636e\u548c\u5173\u8054\u5173\u7cfb\u4e4b\u95f4\u7684\u8ba1\u7b97\u3002\u56fe\u6570\u636e\u5e93\uff0c\u53ef\u4ee5\u770b\u505a\u4e00\u79cd\u9ad8\u7ef4\u6570\u636e\u5e93\uff0c\u800c\u4f20\u7edf\u7684\u5173\u7cfb\u578b\u6570\u636e\u5e93\u5c31\u662f\u4e8c\u7ef4\u6570\u636e\u5e93\u3002</p> <p>\u67e5\u8be2\u6a21\u5f0f</p> <p>\u7b2c\u4e00\uff0c\u4ece\u5173\u8054\u6216\u8005\u79bb\u6563\u89d2\u5ea6\u6765\u770b\uff0c\u5206\u4e3a\u79bb\u6563\u67e5\u8be2\u548c\u5173\u8054\u67e5\u8be2\u3002</p> <p>\u5bf9\u4e8e\u79bb\u6563\u67e5\u8be2\uff0c\u5c31\u662f\u9762\u5411\u5143\u6570\u636e\u7684\u67e5\u8be2\u3002\u8fd9\u91cc\u7684\u5143\u6570\u636e(meta-data)\u6307\u7684\u662f\u9876\u70b9\u548c\u8fb9,\u8fd9\u4e24\u4e2a\u662f\u6700\u5c0f\u7c92\u5ea6\u7684\u6570\u636e\uff0c\u901a\u5e38\u7528\u552f\u4e00\u7684ID\u6765\u6807\u8bc6\uff0c\u4e0d\u80fd\u8fdb\u4e00\u6b65\u7ec6\u5206\u4e86</p> <p>\u5176\u4e2d\u7684\u8fb9ID\u5176\u5b9e\u4f7f\u7528\u4e24\u4e2a\u70b9ID\u4ee5\u53ca\u8fb9\u6392\u5e8f\u503c\u4e00\u8d77\u7ec4\u6210\u7684\u3002</p> <p>\u5bf9\u4e8e\u5173\u8054\u67e5\u8be2\uff0c\u5176\u662f\u56fe\u6570\u636e\u5e93\u6700\u5177\u7279\u8272\u7684\u56fe\u8ba1\u7b97\u64cd\u4f5c\u3002\u4f8b\u5982\uff0c\u8def\u5f84\u67e5\u8be2\uff0cK\u90bb\u8fd1\u67e5\u8be2\uff0c\u5b50\u56fe\u67e5\u8be2\u7b49\u90fd\u5c5e\u4e8e\u5173\u8054\u67e5\u8be2\u3002\u5176\u901a\u5e38\u662f\u4ece\u67d0\u4e2a\u9876\u70b9\u51fa\u53d1\uff0c\u901a\u8fc7\u5bf9\u8fb9\uff0c\u70b9\uff0c\u4ee5\u53ca\u4ed6\u4eec\u5404\u81ea\u7684\u5c5e\u6027\u8fdb\u884c\u8fc7\u6ee4\uff0c\u7136\u540e\u8fd4\u56de\u7ed3\u679c\u3002</p> <p>\u7b2c\u4e8c\uff0c\u4ece\u904d\u5386\u64cd\u4f5c\u6765\u770b\uff0c\u662fBFS\u548cDFS\u3002</p> <p>\u6570\u636e\u7ed3\u6784</p> <ol> <li>\u9876\u70b9\u3002\u67d0\u4e2a\u7c7b\u578b(Tag)\u7684\u9876\u70b9\u96c6\u5408\uff0c\u53ef\u4ee5\u770b\u505a\u4f20\u7edf\u6570\u636e\u5e93\u4e2d\u7684\u4e00\u5f20\u8868(\u6bd4\u5982Person(name,age))\u3002\u800c\u9876\u70b9\u95f4\u7684\u57fa\u4e8e\u8def\u5f84/\u5c5e\u6027\u7684\u5173\u8054\u5173\u7cfb\uff0c\u53ef\u4ee5\u770b\u4f5c\u4f20\u7edf\u6570\u636e\u5e93\u7684JOIN\u64cd\u4f5c\u3002</li> <li>\u8fb9\uff0c\u4e5f\u5c31\u662f\u5173\u7cfb\u3002\u4e00\u822c\u8fde\u63a5\u7684\u662f\u4e24\u4e2a\u9876\u70b9\u3002</li> <li>\u8def\u5f84\uff0c\u8868\u8fbe\u7684\u662f\u4e00\u7ec4\u76f8\u8fde\u7684\u9876\u70b9\u548c\u8fb9\u7684\u7ec4\u5408\uff0c\u591a\u6761\u8def\u5f84\u53ef\u4ee5\u6784\u6210\u4e00\u5f20\u7f51\u7edc\uff0c\u4e5f\u79f0\u4e3a\u5b50\u56fe\u3002</li> </ol> <p>\u4f20\u7edf\u7684\u56fe\u5b58\u50a8\u7684\u4e09\u79cd\u65b9\u5f0f\uff1a\u76f8\u90bb\u94fe\u8868\uff0c\u76f8\u90bb\u77e9\u9635\uff0c\u5173\u8054\u77e9\u9635\u3002\u800c\u5de5\u4e1a\u754c\u7684\u56fe\u6570\u636e\u5e93\u6781\u5c11\u7528\u8fd9\u4e09\u79cd\u6570\u636e\u7ed3\u6784\uff0c\u800c\u662f\u57fa\u4e8e\u4ee5\u4e0a\u6570\u636e\u7ed3\u6784\u7684\u6539\u9020\u3002</p> <ol> <li>\u76f8\u90bb\u94fe\u8868\uff0c\u901a\u5e38\u8bb0\u5f55\u7740\u4ee5\u67d0\u4e2a\u70b9\u4e3a\u8d77\u70b9\uff0c\u5176\u90bb\u70b9\u53ca\u8fb9\u4fe1\u606f\u3002\u4f46\u662f\u53cd\u8fc7\u6765\u7684\u8bdd\u9700\u8981\u5b58\u50a8\u989d\u5916\u4fe1\u606f\u3002</li> <li>\u90bb\u63a5\u77e9\u9635\uff0c\u901a\u5e38\u8bb0\u5f55\u7740\u6240\u6709\u70b9\u4e4b\u95f4\u7684\u8fb9\u4fe1\u606f\uff0c\u4f46\u662f\u5b58\u50a8\u7a7a\u95f4\u5927\uff0c\u4e14\u67e5\u627e\u6548\u7387\u4f4e\u3002\u56e0\u4e3a\u77e9\u9635\u5f80\u5f80\u662f\u5f88\u7a00\u758f\u7684\uff0c\u800c\u7a00\u758f\u77e9\u9635\u9700\u8981\u7279\u6b8a\u7684\u5b58\u50a8\u65b9\u5f0f\uff0c\u53ea\u4f7f\u7528\u5e38\u89c4\u77e9\u9635\u5b58\u50a8\uff0c\u5219\u4f1a\u5bfc\u81f4\u7a7a\u95f4\u6d6a\u8d39\u3002</li> </ol> <p>\u9488\u5bf9\u5b58\u50a8\u95ee\u9898\uff0c\u901a\u5e38\u4f7f\u7528\u90bb\u63a5\u94fe\u8868\u8868\u793a\u6bd4\u8f83\u597d\u3002</p> <p>\u9488\u5bf9\u67e5\u8be2\u95ee\u9898\uff0c\u90bb\u63a5\u94fe\u8868\u7684\u904d\u5386\u4f1a\u6709\u70ed\u70b9\u95ee\u9898\uff0c\u4f1a\u968f\u7740\u6700\u957f\u94fe\u7684\u589e\u52a0\u800c\u589e\u52a0\uff0c\u4e3aO(n)\u3002\u4f46\u662f\u90bb\u63a5\u77e9\u9635\u5c31\u662f\u6052\u5b9a\u7684O(1)\u3002\u540c\u65f6\u94fe\u8868\u5e76\u53d1\u80fd\u529b\u5f88\u5f31\u3002\u6240\u4ee5Facebook\u4f7f\u7528\u90bb\u63a5\u94fe\u8868\u5b58\u50a8\u7684\u65f6\u5019\uff0c\u9650\u5236\u4e86\u5355\u4e2a\u8282\u70b9\u5bf9\u5e94\u94fe\u8868\u957f\u5ea6\u4e0d\u8d85\u8fc76000(\u4e5f\u5c31\u662f\u5173\u6ce8\u4e0d\u80fd\u8d85\u8fc76000\u4eba)\uff0c\u5176\u4ed6\u793e\u4ea4\u7528\u6237\u4e5f\u6709\u7c7b\u4f3c\u8bbe\u8ba1\u3002</p> <p>\u90a3\u4e48\u5982\u4f55\u89e3\u51b3\u8fd9\u4e24\u4e2a\u95ee\u9898\u5462\uff1f\u4e5f\u5c31\u662f\u5728\u5b58\u50a8\u7ef4\u5ea6\uff0c\u4f7f\u7528\u66f4\u53ef\u63a7\u7684\uff0c\u5360\u7528\u66f4\u5c0f\u7a7a\u95f4\u7684\u6570\u636e\u7ed3\u6784\u6765\u5b58\u50a8\u5927\u91cf\u6570\u636e\u3002\u800c\u5728\u8ba1\u7b97\u7ef4\u5ea6\uff0c\u4f4e\u5ef6\u8fdf\u8bbf\u95ee\uff0c\u5e76\u4e14\u5e76\u53d1\u80fd\u529b\u9ad8\u3002</p> <p>\u8003\u8651\u8bbe\u8ba1\u4e00\u79cd\u65b0\u7684\u6570\u636e\u7ed3\u6784\uff0c\u6709\u5982\u4e0b\u5f62\u5f0f\uff1a</p> <ol> <li>\u8bbf\u95eeVertex\u7684\u4e3aO(1)</li> <li>\u8bbf\u95eeedge\u4e3aO(2)\u6216\u8005O(1)</li> </ol> <p>\u5982\u679c\u4f7f\u7528\u54c8\u5e0c\u51fd\u6570\u6765\u5b58\u50a8\uff0c\u5219\u901a\u8fc7Vertex ID\u53ef\u4ee5\u5728O(1)\u5185\u8bbf\u95ee\u5230\u5bf9\u5e94\u7684Vertex\u3002\u800c\u901a\u8fc7edge ID\uff0c\u5219\u53ef\u4ee5\u5728O(1)\u5185\u8bbf\u95ee\u5230\u5bf9\u5e94\u7684edge(\u901a\u8fc7in-node ID\u548cout node ID\uff0c\u5219\u53ef\u4ee5\u5728O(2)\u65f6\u95f4\u590d\u6742\u5ea6\u5185\u8bbf\u95ee)\u3002\u8fd9\u4e00\u90e8\u5206\u4f7f\u7528\u5e38\u89c4\u7684unordered_map\u6765\u5b58\u50a8\u5f88\u597d\uff0c\u4f46\u662f\u4f1a\u4e27\u5931\u5e76\u53d1\u6027\u3002\u6240\u4ee5\u8fd8\u9700\u8981\u4ece\u8bbe\u8ba1\u5e76\u53d1\u6027\u6570\u636e\u7ed3\u6784\uff0c\u4ee5\u53ca\u4f7f\u7528\u5e76\u53d1\u6027\u7b97\u6cd5\u7684\u4e24\u4e2a\u5173\u952e\u89d2\u5ea6\u6765\u8003\u8651\u3002</p>"},{"location":"dataWarehouse/graphDB/#_4","title":"\u56fe\u5b58\u50a8","text":"<p>\u57fa\u7840\u6982\u5ff5</p> <p>\u5b58\u50a8\u65b9\u5f0f\u6709\u5f88\u591a\u3002</p> <p>\u4e3b\u6d41\u5b58\u50a8\u5f15\u64ce\uff0c\u5c31\u662f\u57fa\u4e8eB-Tree\u7684\u8bfb\u591a\u5199\u5c11\u5b58\u50a8\u5f15\u64ce\uff0c\u4ee5\u53caLSM-Tree\u7684\u5199\u591a\u8bfb\u5c11\u5b58\u50a8\u5f15\u64ce(\u524d\u8005mutable,\u540e\u8005immutable)</p> <p>\u9664\u6b64\u4e4b\u5916\uff0c\u8fd8\u6709\u57fa\u4e8e\u6587\u4ef6\u7684\uff0c\u57fa\u4e8e\u5806\u7684\uff0c\u57fa\u4e8ehash buckets\uff0c\u4ee5\u53ca\u57fa\u4e8eISAM(\u5f88\u65e9\u4e4b\u524d\u7684)\u7684\u5b58\u50a8\u5f15\u64ce\u3002</p> <p>\u8fd9\u91cc\u8be6\u60c5\u53ef\u4ee5\u770b\u6211\u7684\u5b58\u50a8\u5f15\u64ce\u603b\u7ed3\uff1a\u5b58\u50a8\u5f15\u64ce\u603b\u7ed3</p> <p>\u56fe\u7684\u5b58\u50a8\uff0c\u4e3b\u8981\u5c31\u662f\u5b58\u50a8\u9876\u70b9\u548c\u8fb9\u3002</p> <ul> <li> <p>\u9876\u70b9\uff1a\u6bcf\u4e2a\u9876\u70b9\u53ef\u4ee5\u770b\u4f5c\u5185\u90e8\u5143\u7d20\u6709\u7740\u67d0\u79cd\u89c4\u5219\u6392\u5217\u7684\u6570\u7ec4(<code>Vertex(id,values)</code>)\uff0c\u800c\u591a\u4e2a\u9876\u70b9\u7684\u7ec4\u5408\u5c31\u662f\u4e00\u4e2a\u4e8c\u7ef4\u6570\u7ec4(<code>Array[Vertex]</code>)</p> </li> <li> <p>\u8fb9\uff1a\u8fb9\u7684\u6570\u636e\u7ed3\u6784\u8f83\u4e3a\u590d\u6742\uff0c\u901a\u5e38\u662f\u56db\u5143\u7ec4(<code>Edge(EdgeType,from,to,rank)</code>)\u3002\u5355\u4e2aEdage\u5c31\u662f\u957f\u5ea6\u56fa\u5b9a\u7684\u6570\u503c\uff0c\u800c\u591a\u4e2a\u8fb9\u7684\u96c6\u5408\u5c31\u662f\u4e8c\u7ef4\u6570\u7ec4(<code>Array[Edge]</code>)</p> </li> </ul> <p>\u5982\u679c\u9876\u70b9\u548c\u8fb9\u5b8c\u5168\u9759\u6001\uff0c\u5219\u53ef\u4ee5\u590d\u7528\u4f20\u7edf\u5b58\u50a8\u5f15\u64ce\u3002\u539f\u56e0\u5c31\u662f\u4f20\u7edf\u5b58\u50a8\u5f15\u64ce\u9002\u5408\u8bfb\u591a\u5199\u5c11\u7684\u573a\u666f\uff0c\u800c\u5b8c\u5168\u9759\u6001\uff0c\u5219\u521a\u597d\u9002\u5408\u6b64\u573a\u666f\uff0c\u9759\u6001\u6570\u636e\u53ef\u4ee5\u88ab\u6709\u6548\u7ec4\u7ec7\uff0c\u4ee5\u53ca\u9884\u5148\u6784\u5efa\u7d22\u5f15\u6765\u4f18\u5316\u3002\u4f46\u662f\u73b0\u5b9e\u4e2d\u5e76\u4e0d\u662f\u8fd9\u4e48\u505a\u7684\u3002</p> <p>\u4e0b\u9762\u6765\u8bf4\u539f\u751f\u56fe &amp; \u975e\u539f\u751f\u56fe\u7684\u6982\u5ff5\u3002\u6240\u8c13\u975e\u539f\u751f\u56fe\u662f\u6307\u5b83\u7684\u5b58\u50a8\u548c\u8ba1\u7b97\u662f\u901a\u8fc7\u4f20\u7edf\u7684\u8868\u7ed3\u6784(\u884c/\u5217\u6570\u636e\u5e93)\u7684\u65b9\u5f0f\u8fdb\u884c\uff0c\u4e5f\u5c31\u662f\u6a21\u62df\u8868\u7ed3\u6784\u3002\u800c\u539f\u751f\u56fe\u57fa\u4e8e<code>Vertex &amp; Edge</code>\u4e3a\u57fa\u672c\u5355\u4f4d\uff0c\u4e3a\u7279\u5316\u7684\u5b58\u50a8\u6548\u7387\u3002</p> <p>\u975e\u539f\u751f\u56fe\u7684\u5b58\u50a8\u7ed3\u6784\uff0c\u4e3e\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\u3002</p> <p>\u73b0\u5728\u6709\u5458\u5de5\u8868\uff0c\u5458\u5de5-\u90e8\u95e8\u5bf9\u5e94\u8868\uff0c\u90e8\u95e8\u8868\uff0c\u5219\u5982\u679c\u67e5\u8be2\u67d0\u4e2a\u5458\u5de5\u6240\u5728\u7684\u90e8\u95e8\u4fe1\u606f\uff0c\u5219\u5b9a\u4f4d\u5458\u5de5<code>O(logN)</code>,\u901a\u5e38\u6811\u6700\u9ad8\u4e3a4\uff0c\u4e5f\u5c31\u662fO(4)\u3002\u7136\u540e\u5b9a\u4f4d\u5bf9\u5e94\u5173\u7cfb\uff0c\u5982\u679c\u6709\u4e09\u7ec4\u5173\u7cfb\uff0c\u5219\u9700\u8981<code>3 * O(logN)</code>\u3002\u5219\u5bf9\u5e94\u90e8\u95e8\u5177\u4f53\u4fe1\u606f\uff0c\u4e5f\u5c31\u662f<code>3 * O(logN)</code>\u3002\u7efc\u5408\u4e0b\u6765\uff0c\u4f1a\u6709O(40)\u5de6\u53f3\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u3002\u5c31\u8fd9\u8fd8\u662f\u4e0d\u8003\u8651\u78c1\u76d8\u5b9a\u4f4d\u5bfb\u5740\u7684\u60c5\u51b5\u4e0b\u3002</p> <p>\u800c\u5982\u679c\u4f7f\u7528\u539f\u751f\u56fe<code>\u8fd1\u90bb\u65e0\u7d22\u5f15</code>\u7684\u5b58\u50a8\u65b9\u5f0f\uff0c\u5219\u53ea\u6709<code>O(4) + 3*O(1)</code>\u7684\u590d\u6742\u5ea6\uff0c\u8fdc\u8fdc\u5c0f\u4e8e\u975e\u539f\u751f\u56fe\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u3002</p> <p>\u901a\u5e38\uff0c\u67e5\u8be2\u590d\u6742\u5ea6\u6bcf\u589e\u52a0\u4e00\u5c42(\u4e5f\u5c31\u662f\u4e00\u4e2ahop\uff0c\u4e5f\u5c31\u662f\u4ece\u4e00\u4e2a\u9876\u70b9\u51fa\u53d1\uff0c\u6cbf\u7740\u8fb9\u8bbf\u95ee\u90bb\u63a5\u9876\u70b9\uff0c\u6bcf\u7ecf\u8fc7\u4e00\u6761\u8fb9\u5c31\u662f\u4e00\u4e2ahop\uff0c\u589e\u52a0\u4e00\u5c42)\uff0c\u539f\u751f\u56fe\u6548\u7387\u4f1a\u6bd4\u975e\u539f\u751f\u56fe\u6548\u7387\u589e\u52a03\u500d\u3002\u5e76\u4e14\u5230\u4e865\u5c42\u4e4b\u540e\uff0c\u975e\u539f\u751f\u56fe\u5df2\u7ecf\u4e0d\u80fd\u8fd4\u56de\u4e86\u3002</p> <p>\u56fe\u7684\u5b58\u50a8\u7ed3\u6784\u548c\u6784\u56fe</p> <p>SQL\u5e76\u4e0d\u9002\u5408\u5b58\u50a8\u5f02\u6784\u6570\u636e\uff0c\u5e76\u4e14\u8d85\u8fc72\u5c42\u7684JOIN\u4e5f\u4e0d\u88ab\u63a8\u8350\u3002</p> <p>\u539f\u751f\u56fe\u7684\u5b58\u50a8\uff0c\u6838\u5fc3\u5728\u4ee5\u4e0b\u51e0\u70b9\uff1a</p> <ul> <li>\u5143\u6570\u636e\uff0c\u8fd9\u91cc\u6307\u7684\u662f\u6700\u5c0f\u7c92\u5ea6\u7684\u6570\u636e\uff0c\u4e5f\u5c31\u662f\u9876\u70b9 &amp; \u8fb9\u3002</li> <li>\u6b21\u751f\u6570\u636e\uff0c\u4e5f\u5c31\u662f\u5b9e\u4f53\u5c5e\u6027\u6570\u636e\u548c\u5173\u7cfb\u5c5e\u6027\u6570\u636e(\u6bd4\u5982Vertex(ID\uff0cvalues)\u4e2d\u7684value)</li> <li>\u884d\u751f\u6570\u636e\uff0c\u4e5f\u5c31\u662f\u9ad8\u7ef4\u7ec4\u5408\u6570\u636e\uff0c\u6bd4\u5982\u5171\u540c\u597d\u53cb\u6570\u7684\u8ba1\u7b97\u3002</li> </ul> <p>\u8fd9\u91cc\u4e3b\u8981\u5173\u6ce8\u5143\u6570\u636e\uff0c\u4e5f\u5c31\u662f\u6700\u5c0f\u7c92\u5ea6\u6570\u636e\u7684\u5b58\u50a8\u3002</p> <p>\u70b9\u53ef\u4ee5\u89c6\u4f5c\u884c\u6765\u5b58\u50a8\uff0c\u5c5e\u6027\u4f5c\u4e3a\u5217\u3002\u4f46\u662f\u8fb9\u5462\uff1f\u5982\u679c<code>EdgeID,start,from,other</code>\u4f5c\u4e3a\u5217\uff0c\u90a3\u4e48\u5982\u4f55\u8868\u8fbe\u53cd\u5411\u8fb9(\u9006\u8fb9)?</p> <p>\u901a\u5e38\uff0c\u9488\u5bf9\u53cd\u5411\u8fb9\u7684\u5b58\u50a8\uff0c\u53ef\u4ee5\u4ee5\u8fb9\u4e3a\u6838\u5fc3\u8fdb\u884c\u5b58\u50a8\u3002\u4e5f\u5c31\u662f\u5b58\u50a8\u4e24\u4e2a\u8fb9\uff0c\u4e00\u4e2a\u6b63\u5411\u8fb9\uff0c\u4e00\u4e2a\u53cd\u5411\u8fb9\u3002</p> <p>\u5de5\u4e1a\u754c\u7684\u5b9e\u73b0\u901a\u5e38\u662f\u901a\u8fc7\u5b9e\u73b0\u8fb9\u7684\u4e2d\u5fc3\uff0c\u4ee5\u53ca\u591a\u8fb9\u56fe\u7684\u5b58\u50a8\u6765\u5b9e\u73b0\u3002</p>"},{"location":"dataWarehouse/graphDB/#_5","title":"\u9ad8\u6027\u80fd\u56fe\u5b58\u50a8","text":""},{"location":"dataWarehouse/graphDB/#_6","title":"\u5b58\u7b97\u5206\u79bb","text":"<p>\u5b58\u7b97\u5206\u79bb\u67b6\u6784\uff0c\u662f\u73b0\u5728\u7684\u4e3b\u63a8\u67b6\u6784\uff0c\u4e5f\u5c31\u662f\u5c06\u5b58\u50a8\u5c42\u548c\u8ba1\u7b97\u5c42\u5206\u79bb\u5f00\uff0c\u5c06\u5b58\u50a8\u5c42\u548c\u8ba1\u7b97\u5c42\u5206\u522b\u90e8\u7f72\u5728\u4e0d\u540c\u7684\u670d\u52a1\u5668\u4e0a\uff0c\u7136\u540e\u901a\u8fc7\u7f51\u7edc\u8fdb\u884c\u901a\u4fe1\u3002</p> <ul> <li> <p>\u5b58\u50a8\u5c42\u8d1f\u8d23\u56fe\u7684\u6301\u4e45\u5316\u7ba1\u7406\uff0c\u652f\u6301\u9ad8\u6548\u7684\u5143\u7d20\u67e5\u8be2\u4e0e\u626b\u63cf\u3002\u901a\u5e38\u901a\u8fc7KV Store\u6765\u5b58\u50a8\u56fe\u6570\u636e\u3002</p> </li> <li> <p>\u8ba1\u7b97\u5c42\u8d1f\u8d23\u56fe\u7684\u8ba1\u7b97\uff0c\u8d1f\u8d23\u56fe\u8bed\u4e49\u89e3\u6790\uff0c\u67e5\u8be2\u8ba1\u5212\u751f\u6210\uff0c\u56fe\u7b97\u6cd5\u6267\u884c\u3002</p> </li> </ul> <p></p> <p>\u8003\u8651\u7684\u4e3b\u8981\u56e0\u7d20\u4e3b\u8981\u6709\uff1a\u5185\u5916\u5b58\u5360\u6bd4\uff0c\u7f13\u5b58\u7684\u4f7f\u7528\uff0c\u6392\u5e8f\u7684\u4f7f\u7528\uff0c\u6570\u636e\u7684\u53d8\u66f4\u7684\u7ec6\u8282\u3002</p> <p>\u8fd9\u91cc\u4e3b\u8981\u5173\u6ce8\u6392\u5e8f\u7684\u4f7f\u7528\uff0c\u4ee5\u53ca\u6570\u636e\u53d8\u66f4\u7684\u7ec6\u8282\u90e8\u5206\u3002</p> <ul> <li> <p>\u6392\u5e8f\u7684\u4f7f\u7528\uff0c\u5206\u4e3a\u8fde\u7eed\u5b58\u50a8\u548c\u975e\u8fde\u7eed\u5b58\u50a8\u3002\u8fde\u7eed\u5b58\u50a8\uff0c\u901a\u5e38\u8868\u73b0\u4e3a\u6709\u5e8f\u6570\u7ec4 + \u7d22\u5f15\u3002\u53ea\u6709\u5220\u9664\u6709\u7f3a\u70b9\uff0c\u4f1a\u662fO(n)\u7684\u3002\u8fd9\u65f6\u5019\u9700\u8981\u4f7f\u7528(switch-on-delete)\uff0c\u4e5f\u5c31\u662f\u5c06\u8981\u5220\u9664\u7684\u6570\u636e\u79fb\u52a8\u5230\u672b\u5c3e\u518d\u5220\u9664\uff0c\u53ef\u4f18\u5316\u4e3aO(1)\u3002\u800c\u975e\u8fde\u7eed\u5b58\u50a8(\u94fe\u8868\uff0c\u901a\u5e38\u662fTree\u7b49)\uff0c\u5220\u9664\u6548\u7387\u4e5f\u8f83\u9ad8\uff0c\u4f46\u662f\u8fde\u7eed\u8bfb\u53d6\u6548\u7387\u8f83\u4f4e:<code>K(logN)</code>\u3002\u5e38\u89c1\u7684\u4f18\u5316\u5b9e\u73b0\uff0c\u5c31\u662fWiskkey\u3002\u5b83\u4e13\u95e8\u9762\u5411SSD\u8fdb\u884c\u4f18\u5316\uff0c\u5c06key\u5206\u79bb\u51fa\u6765\uff0c\u53ea\u6709key\u9700\u8981\u6392\u5e8f\u3002\u5f53key\u7684\u5b58\u50a8\u4e3a4KB\u53ca\u4ee5\u4e0a\uff0c\u5219\u6027\u80fd\u63d0\u5347\u8f83\u5927\uff0c\u800ckey\u4e3a1kB\u7684\u65f6\u5019\uff0c\u548cLSM-Tree\u6027\u80fd\u5dee\u8ddd\u4e0d\u5927\u3002</p> </li> <li> <p>COW,\u4e5f\u5c31\u662fcopy on write(\u5199\u65f6\u590d\u5236)\uff0c\u662f\u4e00\u79cd\u65e0\u9501\u4fee\u6539\u6280\u5de7\u3002\u521d\u59cb\u72b6\u6001\u662f\u591a\u4e2a\u8fdb\u7a0b\u5171\u4eab\u4e00\u4efd\u6570\u636e\uff0c\u6570\u636e\u53ea\u8bfb\u3002\u5219\u8bfb\u53d6\u8bf7\u6c42\u7684\u65f6\u5019\uff0c\u65e0\u9700\u590d\u5236\u3002\u800c\u5bf9\u4e8e\u5199\u5165\u8bf7\u6c42\uff0c\u5219\u5982\u679c\u67d0\u4e2a\u8fdb\u7a0b\u9700\u8981\u4fee\u6539\u6570\u636e\uff0c\u5219\u7cfb\u7edf\u5148\u590d\u5236\u4e00\u4e2a\u526f\u672c\uff0c\u4fee\u6539\u53ea\u4f5c\u7528\u4e8e\u526f\u672c\uff0c\u5176\u4ed6\u8fdb\u7a0b\u4ecd\u7136\u8bfb\u53d6\u539f\u59cb\u6570\u636e\u3002\u5f53\u6240\u6709\u8fdb\u7a0b\u5b8c\u6210\u4fee\u6539\u540e\uff0c\u518d\u628a\u526f\u672c\u66ff\u6362\u6210\u539f\u59cb\u6570\u636e(\u8fd9\u4e00\u6b65\u662fCAS\u64cd\u4f5c\uff0c\u662f\u539f\u5b50\u7684)\u3002\u8fd9\u91cc\u5168\u7a0b\u662fimmutable\u66f4\u65b0\uff0cKV Store\u4e00\u822c\u4f1a\u91c7\u7528\u8fd9\u79cd\u3002</p> </li> </ul> <p></p>"},{"location":"dataWarehouse/graphDB/#scalable","title":"Scalable","text":"<p>\u9996\u5148\u6765\u770b\u5782\u76f4\u6269\u5c55</p> <p>\u4e00\u4e2a\u5e38\u8bc6\u6027\u77e5\u8bc6\u662f\uff0c\u53ea\u6709\u5728\u5782\u76f4\u6269\u5c55\u6ca1\u6709\u53ef\u80fd\u7684\u65f6\u5019\uff0c\u624d\u53bb\u8ffd\u6c42\u6c34\u5e73\u53ef\u6269\u5c55\u7cfb\u7edf\u7684\u6784\u5efa\u548c\u8fed\u4ee3\u3002\u56e0\u4e3a\u6269\u5c55\u5355\u673a(Monolithic)\u5fc5\u7136\u6bd4\u6269\u5c55\u96c6\u7fa4\u66f4\u52a0\u7b80\u5355\uff0c\u6548\u679c\u4e5f\u5f88\u597d\u3002</p> <p>\u4f20\u7edf\u610f\u4e49\u4e0a\u7684\u5782\u76f4\u6269\u5c55\uff0c\u5c31\u662f\u5bf9\u5355\u673a\u7684\u5b58\u50a8\uff0c\u8ba1\u7b97\uff0c\u7f51\u7edc\u4e09\u5927\u6838\u5fc3\u8fdb\u884c\u6269\u5c55\u3002</p> <ul> <li>\u5b58\u50a8\uff1a\u5185\u5b58\uff0c\u5916\u5b58</li> <li>\u8ba1\u7b97\uff1aCPU\uff0cGPU</li> <li>\u7f51\u7edc\uff1a\u7f51\u5361\uff0c\u7f51\u5173\uff0c\u8def\u7531\u5668\u7b49</li> </ul> <p>\u5728\u8fd9\u672c\u4e66\u4e2d\uff0c\u7b14\u8005\u5efa\u8bae\u6362\u4e00\u4e2a\u89d2\u5ea6\u8fdb\u884c\u601d\u8003\uff0c\u4ece\u7ec8\u6781\u76ee\u6807-\u5e76\u53d1\u8f6f\u4ef6\u7684\u8bbe\u8ba1\u6765\u770b\uff0c\u6709\u5982\u4e0b\u6838\u5fc3\uff1a</p> <ul> <li>\u5e76\u53d1\u601d\u7ef4,\u7528\u4e8e\u601d\u8003\u5230\u5e95\u8be5\u4ece\u54ea\u65b9\u9762\u8fdb\u884c\u6269\u5c55\uff0c\u53c8\u5982\u4f55\u534f\u4f5c\u3002</li> <li>lock &amp; shared mutable memory</li> <li>algorithm &amp; data structure</li> </ul> <p>\u6709\u4e00\u4e2a\u7ecf\u5178\u7684\u4f8b\u5b50\uff1a\u5c0f\u6587\u4ef6\u4f8b\u5b50\uff0c\u4e5f\u5c31\u662f\u752810Gbit/s\u4f20\u8f93100\u4e07\u4e2a\u5c0f\u6587\u4ef6\uff0c\u6bcf\u4e2a\u6587\u4ef64KB\u3002\u4ee5\u53ca\u4f20\u8f93\u4e00\u4e2a\u5927\u6587\u4ef6\uff0c4GB\uff0c\u4e24\u8005\u7684\u65f6\u95f4\u5dee\u8ddd\u662f\u591a\u5c11\uff1f</p> <ul> <li> <p>\u7406\u60f3\u60c5\u51b5\u4e0b\uff0c\u4e5f\u5c31\u662f\u4e24\u8005\u6570\u636e\u91cf\u76f8\u7b49\uff0c\u5219\u4f20\u8f93\u65f6\u95f4\u76f8\u540c\u3002</p> </li> <li> <p>\u5b9e\u9645\u60c5\u51b5\uff0c\u540e\u8005\u6bd4\u524d\u8005\u53ef\u80fd\u5feb100\u500d\u53ca\u4ee5\u4e0a\u3002</p> </li> </ul> <p>\u56e0\u4e3a\u7406\u8bba\u6570\u636e\u91cf\u4e00\u6837\uff0c\u4f46\u662f\u4ece\u7cfb\u7edf\u7684\u5b58\u50a8\u548c\u7f51\u7edc\u4e24\u4e2a\u6838\u5fc3\u6765\u8003\u8651\u5c31\u4f1a\u5b8c\u5168\u4e0d\u540c\u3002</p> <ul> <li>\u4ece\u5b58\u50a8\u6765\u770b\uff0c\u5219\u6bcf\u4e2a\u5c0f\u6587\u4ef6(\u8fd9\u91cc\u521a\u597d\u662f\u4e00\u4e2ablock\u5927\u5c0f)\u90fd\u9700\u8981\u8fdb\u884c\u4e00\u6b21IO\uff0c\u5219\u76f8\u5f53\u4e8e100\u4e07\u6b21IO\u3002\u5355\u6b21IO\u65f6\u95f4\u662f\u51e0\u4ebf\u4e2a\u65f6\u949f\u5468\u671f\uff0c\u4e5f\u5c31\u662fms\u7ea7\u522b\u3002\u5219\u603b\u65f6\u95f4\u53ef\u80fd\u8fbe\u5230\u51e0\u767es\u7684\u7ea7\u522b\u3002</li> <li>\u4ece\u7f51\u7edc\u6765\u770b\uff0c\u5219\u9700\u8981\u4e00\u6b21TCP\u8fde\u63a5\uff0c\u4e00\u6b21TCP\u6570\u636e\u4f20\u8f93\uff0c\u4e00\u6b21TCP\u65ad\u5f00(\u4e0d\u8003\u8651\u8fde\u63a5\u590d\u7528\u7684\u60c5\u51b5\u4e0b)\u3002</li> </ul> <p>\u663e\u7136\uff0c\u5728\u8fd9\u91cc\u7f51\u7edc\u5e26\u5bbd\u5e76\u4e0d\u662f bottleneck\uff0c\u800cIO\u624d\u662f(s\u7ea7\u522b vs 100 s\u7ea7\u522b)</p> <p>\u4e0b\u9762\u6765\u770b\u6c34\u5e73\u6269\u5c55</p> <p>\u6c34\u5e73\u6269\u5c55\uff0c\u901a\u5e38\u6307\u7684\u5c31\u662f\u5206\u5e03\u5f0f\u6269\u5c55\u3002\u6838\u5fc3\u6709\u5982\u4e0b\u90e8\u5206\uff1a</p> <ul> <li>\u591a\u5b9e\u4f8b\u7684\u4efb\u52a1\u5206\u89e3</li> <li>\u591a\u5b9e\u4f8b\u7684\u76f8\u4e92\u5408\u4f5c</li> <li>\u591a\u5b9e\u4f8b\u7684\u540c\u6b65/\u4e00\u81f4\u6027(\u4f9d\u8d56\u591a\u5b9e\u4f8b\u7684\u5171\u8bc6\u7b97\u6cd5)</li> </ul> <p>\u9488\u5bf9\u591a\u5b9e\u4f8b\u7684\u6570\u636e/\u72b6\u6001\u540c\u6b65\uff0c\u5176\u5b9e\u5c31\u662f\u5728\u591a\u5b9e\u4f8b\u7684\u5171\u8bc6\u8fbe\u6210\u4e4b\u540e\u8fdb\u884c\u7684\u4ea7\u7269\uff0c\u800c\u5171\u8bc6\u7b97\u6cd5\u8fd9\u90e8\u5206\u6bd4\u8f83\u590d\u6742\uff0c\u5177\u4f53\u53ef\u4ee5\u770b\u6700\u597d\u7684paxos\u6765\u719f\u6089\u3002</p> <p>\u540c\u6b65/\u4e00\u81f4\u6027\u662f\u4e00\u79cd\u9006\u71b5\u8fc7\u7a0b\uff0c\u901a\u5e38\u5206\u4e3a\u5982\u4e0b\u51e0\u79cd\uff1a</p> <ol> <li>\u8bfb\u540c\u6b65</li> <li>\u5199\u540c\u6b65</li> <li>\u5168\u91cf\u6570\u636e\u540c\u6b65</li> </ol> <p>\u4e00\u81f4\u6027\u975e\u5e38\u91cd\u8981\uff0c\u662f\u5206\u5e03\u5f0f\u7cfb\u7edf\u6240\u6709\u7279\u6027\u7684\u57fa\u7840\u3002\u6bd4\u5982\u5bb9\u9519\u6027\u9700\u8981\u4fdd\u8bc1\u5197\u4f59\u5b58\u50a8\u7684\u6570\u636e\u4e00\u81f4\u6027\u3002</p>"},{"location":"dataWarehouse/hadoop/","title":"HDFS  \u4e0e YARN","text":"<p><code>HDFS</code>\u4ee5\u53ca<code>Yarn</code>\u76ee\u524d\u5df2\u7ecf\u5206\u522b\u662f\u5927\u6570\u636e\u96c6\u7fa4\u7684\u5b58\u50a8\u4ee5\u53ca\u8c03\u5ea6\u7684\u4e8b\u5b9e\u6807\u51c6\u4e86\uff0c\u800c<code>MapRecude</code>\u53ef\u80fd\u4f1a\u5728\u4f9d\u65e7\u4f7f\u7528<code>Hive on MapReduce</code>\u7684\u65f6\u5019\u624d\u4f7f\u7528\u4e86\uff0c\u5e76\u4e14<code>API</code>\u5f88\u5c11\u5199\uff0c\u5b8c\u5168\u53ef\u4ee5\u88ab<code>Spark</code>\u6dd8\u6c70\uff0c\u6240\u4ee5\u6682\u65f6\u4e0d\u603b\u7ed3\u3002</p>"},{"location":"dataWarehouse/hadoop/#hdfs","title":"HDFS","text":"<p>HDFS\u8bde\u751f\u4e8eGFS\u8bba\u6587\uff0c\u5176\u662f\u4e00\u4e2a\u5de5\u7a0b\u7279\u6027\u5f88\u5f3a\u7684\u5206\u5e03\u5f0f\u6587\u4ef6\u7cfb\u7edf\uff0c\u5b83\u505a\u4e86\u5f88\u591a\u5de5\u7a0b\u6280\u5de7\u7684\u7ec4\u5408\u3002</p>"},{"location":"dataWarehouse/hadoop/#master","title":"\u5355Master","text":"<p>\u6ca1\u6709\u5f15\u5165<code>zookeeper</code>\u4e0b\u7684HDFS\u662f\u4e00\u4e2a\u5355Master\u7684\u4e3b\u4ece\u67b6\u6784\uff0c\u5e76\u4e0d\u662f\u4e00\u4e2a\u771f\u6b63\u7684\u9ad8\u53ef\u7528\u7cfb\u7edf\u3002\u4f46\u662f\uff0cHDFS\u901a\u8fc7\u5f88\u591a\u8bbe\u8ba1\u6765\u5c3d\u91cf\u4fdd\u8bc1\u4e86HDFS\u7684\u53ef\u9760\u6027\u3002</p> <p>\u4ece\u4e0d\u540c\u7684\u89d2\u5ea6\u770bHDFS\uff0c\u8fd9\u4e2aMaster\u5206\u522b\u8d77\u7740<code>\u76ee\u5f55\u670d\u52a1</code>\uff0c<code>\u4e3b\u4ece\u540c\u6b65\u590d\u5236\u7684\u4e3b\u8282\u70b9</code>\uff0c<code>\u4e3b\u4ece\u5f02\u6b65\u590d\u5236\u7684\u4e3b\u8282\u70b9</code>\u7684\u4f5c\u7528\u3002</p>"},{"location":"dataWarehouse/hadoop/#_1","title":"\u76ee\u5f55\u670d\u52a1","text":"<p>HDFS\uff0c\u9996\u5148\u5fc5\u7136\u662f\u4e00\u4e2a<code>File System</code>\u3002\u90a3\u4e48\u5c31\u548c\u5176\u4ed6\u7684\u4efb\u4f55\u6587\u4ef6\u7cfb\u7edf\u4e00\u6837\uff0c\u901a\u8fc7\u76ee\u5f55\u53ef\u4ee5\u5b9a\u4f4d\u8d44\u6e90\u3002</p> <p>\u5355\u673a\u4e0b\u7684\u6587\u4ef6\u7cfb\u7edf\u7684\u76ee\u5f55\u670d\u52a1\u52a0\u8f7d\u5728\u4e3b\u5b58\uff0c\u800c\u5b9e\u9645\u7684\u6570\u636e\u5728\u78c1\u76d8\uff0c\u5e76\u4e14\u53ef\u4ee5\u901a\u8fc7\u5185\u5b58\u4e2d\u7684<code>inode number</code>\uff0c\u5bf9\u5e94\u5230\u78c1\u76d8\u4e2d<code>super block</code>\u7684<code>inode</code>\uff0c\u7136\u540e\u901a\u8fc7<code>index</code>\u4ece<code>block</code>\u4e2d\u67e5\u627e\u6570\u636e\u3002</p> <p>\u800cHDFS\u505a\u4e86\u6269\u5c55\uff0c\u76ee\u5f55\u670d\u52a1\u5728<code>NodeManager</code>\u8282\u70b9\uff0c\u5b9e\u9645\u7684\u6570\u636e\u5b58\u50a8\u5728\u4e0a\u5343\u4e2a\u7ed3\u70b9\u7684\u78c1\u76d8\u4e2d\uff0c\u7531\u5176\u4e0a\u7684<code>DataNode</code>\u7ef4\u62a4\u3002\u540c\u65f6\uff0c\u6bcf\u4e2a<code>chunk</code>\u505a\u4e86\u5197\u4f59\u5b58\u50a8\uff1a\u9632\u6b62\u4e22\u6570\u636e\uff0c\u540c\u65f6\u5c06\u8bfb\u5199\u538b\u529b\u5206\u644a\u5230\u6bcf\u4e2a\u8282\u70b9\u3002</p> <p>\u800c<code>NodeManagr</code>\uff0c\u4e5f\u5c31\u662f<code>master</code>\uff0c\u5219\u4f1a<code>\u5185\u5b58\u4e2d</code>\u7ef4\u62a4\u6574\u4e2a\u6587\u4ef6\u7cfb\u7edf\u7684\u4e09\u7ea7\u5143\u6570\u636e\u4fe1\u606f\uff0c\u5982\u4e0b\uff1a</p> <ul> <li><code>Namespace</code>\uff1a\u6709\u54ea\u4e9b\u6587\u4ef6</li> <li><code>File to chunk Handle</code>\uff1a\u5355\u4e2a<code>File</code>\u6709\u54ea\u51e0\u4e2a<code>chunk</code>\uff0c\u4e5f\u5c31\u662f<code>split</code></li> <li><code>chunk Handle to chunkServer</code>\uff1a\u5355\u4e2a<code>chunk</code>\u5728\u54ea\u4e2a<code>chunkServer(DataNode)</code>\u4e0a</li> </ul> <p>\u8bfb\u6570\u636e\u8bf7\u6c42</p> <p>\u800c\u5f53<code>client</code>\u53d1\u51fa\u8bfb\u5199\u8bf7\u6c42(\u4e00\u822c\u662f<code>offset + length</code>)\u4e4b\u540e\uff0c<code>master</code>\u901a\u8fc7\u4e09\u7ea7\u5143\u6570\u636e\u4fe1\u606f\uff0c\u627e\u5230<code>client</code>\u8981\u64cd\u4f5c\u7684<code>chunk handle</code>\u4ee5\u53ca<code>server \u4f4d\u7f6e</code>\uff0c\u5305\u62ec\u4e86\u6240\u6709\u526f\u672c\uff0c\u6240\u4ee5\u662f\u591a\u4efd\u3002</p> <p>\u7136\u540e<code>client</code>\u5411\u5176\u4e2d\u6700\u4f18\u7684<code>server</code>\u8fdb\u884c\u901a\u4fe1\uff0c\u5411\u5176\u8bf7\u6c42\u5177\u4f53\u7684<code>chunk\u7684\u67d0\u4e2a\u8303\u56f4</code>\uff0c\u7136\u540e<code>server</code>\u8fd4\u56de\u6570\u636e\u3002</p> <p>\u5199\u6570\u636e\u8bf7\u6c42</p> <p><code>client</code>\u5411<code>master</code>\u4ea4\u4e92\uff0c\u4e4b\u540e\u5f97\u5230<code>\u6240\u6709\u526f\u672c\u7684server</code>\u4f4d\u7f6e\u3002</p> <p>\u800c<code>client</code>\u9700\u8981\u628a\u6570\u636e\u5199\u5230\u62ff\u5230\u7684\u6240\u6709<code>server</code>\u4e2d\u3002\u8fd9\u91cc<code>client</code>\u4e0e<code>server</code>\u91c7\u7528\u7684\u662f<code>pipeline</code>\u65b9\u5f0f\u5c06\u6240\u6709\u6570\u636e\u9001\u5230\u6bcf\u4e2a<code>server</code>\u7684<code>buffer</code>\uff0c\u7136\u540e\u7531\u4e3b\u526f\u672c\u8282\u70b9\u5c06\u5199\u8bf7\u6c42\u6309\u7167\u7edf\u4e00\u987a\u5e8f\u5206\u53d1\uff0c\u7136\u540e\u6240\u6709<code>server</code>\u5c06\u6570\u636e\u843d\u76d8\u3002</p>"},{"location":"dataWarehouse/hadoop/#_2","title":"\u5bb9\u707e\u5907\u4efd\u4e0e\u5feb\u901f\u542f\u52a8","text":"<p><code>master</code>\u6240\u6709\u7684\u6570\u636e\u5b58\u50a8\u4e8e<code>\u5185\u5b58</code>\uff0c\u8fd9\u6837\u7684\u8003\u8651\u662f\u57fa\u4e8e\u53ef\u7528\u6027\u6765\u8bf4\u7684\uff0c\u4f46\u662f\u5355\u5355\u5b58\u50a8\u5728\u5185\u5b58\uff0c\u5bf9\u4e8e\u53ef\u9760\u6027\u6ca1\u6709\u4efb\u4f55\u4fdd\u8bc1\u3002</p> <p>checkpoint and edit log</p> <p>\u6240\u4ee5\u5f15\u5165\u4e86<code>checkpoint</code>\uff0c\u4e5f\u5c31\u662f<code>\u68c0\u67e5\u70b9or\u5feb\u7167</code>\u673a\u5236\u3002\u5728<code>HDFS\u4e2d\u79f0\u4e3a FSImage</code>\u3002\u987e\u540d\u601d\u4e49\uff0c\u5c31\u662f\u7ed9<code>master</code>\u6240\u7ef4\u62a4\u7684\u4e09\u7ea7\u5143\u6570\u636e\u4fe1\u606f\u5b9a\u671f\u5b8c\u5168\u5907\u4efd\u4e00\u4efd\uff0c\u6240\u4ee5\u53ef\u4ee5\u770b\u5230\u5b9e\u9645\u4e0a<code>FSImage</code>\u5c31\u662f\u4e00\u4e2a<code>\u76ee\u5f55\u7ed3\u6784</code>\u7684\u6587\u4ef6\u3002</p> <p>\u5e76\u4e14\uff0c\u5f15\u5165<code>edit log</code>\uff0c\u5c06\u6bcf\u6b21\u68c0\u67e5\u70b9\u4e4b\u540e\u7684\u64cd\u4f5c\u65e5\u5fd7\u8bb0\u5f55\u4e0b\u6765\uff0c\u8fd9\u6837\uff0c\u4efb\u4f55\u65f6\u523b\u53ea\u8981\u62ff\u5230<code>FSImage</code>\uff0c\u5e76<code>redo  edit log</code>\uff0c\u5219\u53ef\u4ee5\u5f97\u5230\u6700\u65b0\u72b6\u6001\u7684<code>master</code>\u3002</p> <p>backup node</p> <p><code>HDFS</code>\u540c\u6837\u652f\u6301<code>backup node</code>\u7684\u529f\u80fd:Apache Hadoop 3.4.1 \u2013 HDFS \u7528\u6237\u6307\u5357</p> <p>\u8fd9\u91cc<code>HDFS</code>\u5c31\u662f\u505a\u4e86\u4e3b\u4ece\u540c\u6b65\u590d\u5236\uff0c<code>buckup node</code>\u9700\u8981\u548c\u4e3b\u8282\u70b9\u5b8c\u5168\u4e00\u81f4\uff0c\u5e76\u4e14\u540c\u6b65\u5199\u5b8c\u624d\u80fd\u8fd4\u56de\u3002</p> <p>shadow node</p> <p>\u53c8\u79f0\u8f85\u52a9<code>namenode</code>\uff0c<code>2NN</code>\u3002</p> <p>\u8fd9\u91cc<code>HDFS</code>\u505a\u4e86\u4e3b\u4ece\u5f02\u6b65\u590d\u5236\uff0c<code>shadow node</code>\u6bcf\u6b21\u62ff\u5230\u7684\u90fd\u662f<code>master</code>\u4e2d\u7684<code>FSImage</code>\u4ee5\u53ca<code>edit</code>\uff0c\u7136\u540e\u5728\u81ea\u5df1\u8fd9\u91cc\u8fdb\u884c\u5408\u5e76\uff0c\u90a3\u4e48\u4e3b\u8282\u70b9\u53ef\u4ee5\u5728\u9700\u8981\u7684\u65f6\u5019\u8bfb\u53d6\u8be5\u5f71\u5b50\u8282\u70b9\u5408\u5e76\u597d\u7684\u7ed3\u679c\uff0c\u800c\u4e0d\u662f\u81ea\u5df1\u8fdb\u884c\u5408\u5e76\u3002\u5f02\u6b65\u4efb\u52a1\u7684\u4f18\u52bf\u5728\u8fd9\u4f53\u73b0\u7684\u5f88\u5145\u5206\u3002</p>"},{"location":"dataWarehouse/hadoop/#io","title":"\u7f51\u7edcIO","text":""},{"location":"dataWarehouse/hadoop/#pipeline","title":"pipeline","text":"<p>\u76f8\u6bd4\u4e8e\u786c\u76d8\u7684\u8bfb\u5199\u901f\u5ea6\uff0c\u771f\u6b63\u7684\u74f6\u9888\u5728\u7f51\u7edcIO\u3002</p> <p>\u76f8\u6bd4\u4e8e\u5168\u90e8\u4f9d\u9760<code>client</code>\u7684\u4e2d\u5fc3\u5316\u6a21\u5f0f\uff0c\u53bb\u4e2d\u5fc3\u5316\u4e5f\u5c31\u662f<code>p2p</code>\u7684\u6d41\u6c34\u7ebf\u6a21\u5f0f\u53ef\u4ee5\u5c06\u603b\u4f53\u541e\u5410\u91cf\u589e\u52a0<code>n</code>\u500d\uff0c\u5982\u679c\u4e00\u5171\u6709<code>n</code>\u4e2a\u8282\u70b9\u7684\u8bdd\u3002</p>"},{"location":"dataWarehouse/hadoop/#_3","title":"\u4e00\u81f4\u6027","text":"<p>\u8fd9\u91cc\u6307\u7684\u5c31\u662f\u6bcf\u4e2a<code>chunk</code>\u7684\u591a\u4e2a\u526f\u672c\u4e4b\u95f4\u7684\u4e00\u81f4\u6027\u3002</p>"},{"location":"dataWarehouse/hadoop/#_4","title":"\u5199\u5165\u5931\u8d25","text":"<p>\u5199\u5165\u5931\u8d25\uff0c\u7531\u4e8e\u4e0d\u662f\u4e8b\u52a1\uff0c\u5219HDFS\u4e2d\u6570\u636e\u5fc5\u7136\u4f1a\u6709\u4e0d\u4e00\u81f4\u3002</p>"},{"location":"dataWarehouse/hadoop/#_5","title":"\u987a\u5e8f\u5199\u5165\u6210\u529f","text":"<p>\u987a\u5e8f\u5199\u5165\uff0c\u5219\u6587\u4ef6\u4e2d\u6570\u636e\u662f\u4e00\u81f4\uff0c\u5e76\u4e14\u786e\u5b9a\u7684\u3002</p>"},{"location":"dataWarehouse/hadoop/#_6","title":"\u5e76\u53d1\u5199\u5165\u6210\u529f","text":"<p>\u7531\u4e8e\u6ca1\u6709\u539f\u5b50\u6027\u4ee5\u53ca\u4e8b\u52a1\u7684\u4fdd\u8bc1\uff0c\u540c\u6837\u4f1a\u51fa\u73b0\u548c\u9884\u671f\u4e0d\u4e00\u81f4\uff0c\u4ee5\u53ca\u8986\u76d6\u7684\u60c5\u51b5\u3002\u6240\u4ee5\u9700\u8981\u5728\u5e94\u7528\u5c42\u4fdd\u8bc1\u6570\u636e\u5199\u5165\u662f\u4e00\u81f4\u7684\u3002</p>"},{"location":"dataWarehouse/hadoop/#_7","title":"\u8ffd\u52a0\u5199\u5165","text":"<p>\u4e5f\u5c31\u662f\u8fd9\u91cc\u5e76\u4e0d\u6307\u5b9a\u8981\u5728<code>chunk</code>\u7684\u54ea\u4e2a\u4f4d\u7f6e\u5199\u5165\u6570\u636e\uff0c\u800c\u662f\u4ea4\u7ed9<code>\u4e3b\u526f\u672c\u6240\u5728\u7684server</code>\u6765\u534f\u8c03\uff0c\u5219\u8fd9\u91cc\u56e0\u4e3a\u6709\u4e86\u4e3b\u526f\u672c\u8282\u70b9\u7684\u540c\u4e00\u63a7\u5236\uff0c\u5219\u907f\u514d\u4e86\u5e76\u53d1\u5199\u5165\u7684\u8986\u76d6\u95ee\u9898\uff0c\u5355\u4e2a<code>chunk</code>\u7684\u5199\u5165\u6700\u7ec8\u90fd\u662f\u534f\u8c03\u987a\u5e8f\u4e4b\u540e\u7684\u7ed3\u679c\u3002</p> <p>\u800c\u5982\u679c\u8fd9\u4e2a<code>chunk</code>\u6709\u526f\u672c\u5199\u5165\u5931\u8d25\uff0c\u5219\u4e3b\u526f\u672c\u8282\u70b9\u4f1a\u544a\u8bc9<code>client</code>\u91cd\u65b0\u5199\u5165\uff0c\u5219\u518d\u6b21\u5728\u8be5<code>chunk\u7684\u6240\u6709\u526f\u672c\u8ffd\u52a0\u5199\u5165</code>\u3002</p> <p>\u6240\u4ee5<code>HDFS</code>\u4fdd\u8bc1\u7684\u662f\u81f3\u5c11\u4e00\u6b21\uff0c\u4e5f\u5c31\u662f\u5bf9\u4e8e\u8981\u5199\u5165HDFS\u96c6\u7fa4\u7684\u8fd9\u4e2a<code>chunk</code>\u4e2d\u7684\u6570\u636e\u800c\u8a00\uff0c\u8fd9\u4e2a\u6570\u636e\u5728\u6bcf\u4e2a\u526f\u672c\u4e2d\u81f3\u5c11\u4fdd\u5b58\u4e86\u4e00\u6b21\uff0c\u800c\u8ffd\u52a0\u987a\u5e8f\u53ef\u4ee5\u4e0d\u4e00\u81f4\uff0c\u526f\u672c\u4e0e\u526f\u672c\u53ef\u4ee5\u662f\u4e0d\u4e00\u81f4\u3002</p> <p>\u9488\u5bf9\u91cd\u590d\u7684\u6570\u636e\uff0c\u5e94\u7528\u5c42\u53ef\u4ee5\u505a\u989d\u5916\u7684\u5904\u7406\uff0c\u6bd4\u5982\u52a0\u5165ID\u4ee5\u53ca\u65f6\u95f4\u6233\uff0c\u6700\u540e\u5bf9\u6570\u636e\u53bb\u91cd\u5373\u53ef\u3002</p>"},{"location":"dataWarehouse/hadoop/#yarn","title":"YARN","text":"<p>Apache Hadoop 3.3.6 \u2013 Apache Hadoop YARN - Hadoop \u6846\u67b6</p>"},{"location":"dataWarehouse/hadoop/#_8","title":"\u67b6\u6784","text":""},{"location":"dataWarehouse/hadoop/#_9","title":"\u57fa\u672c\u601d\u60f3","text":"<p>YARN \u7684\u57fa\u672c\u601d\u60f3\u662f\u5c06\u8d44\u6e90\u7ba1\u7406\u548c\u4f5c\u4e1a\u8c03\u5ea6/\u76d1\u63a7\u7684\u529f\u80fd\u62c6\u5206\u4e3a\u5355\u72ec\u7684\u5b88\u62a4\u7a0b\u5e8f\u3002\u8fd9\u4e2a\u60f3\u6cd5\u662f\u62e5\u6709\u4e00\u4e2a\u5168\u5c40 ResourceManager (RM) \u548c\u6bcf\u4e2a\u5e94\u7528\u7a0b\u5e8f\u7684 ApplicationMaster (AM)\u3002\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u662f\u5355\u4e2a\u4f5c\u4e1a\u6216\u4f5c\u4e1a\u7684 DAG\u3002</p> <p>ResourceManager \u548c NodeManager \u6784\u6210\u4e86\u6570\u636e\u8ba1\u7b97\u6846\u67b6\u3002</p> <p>ResourceManager \u662f\u6700\u7ec8\u6743\u5a01\uff0c\u5b83\u5728\u7cfb\u7edf\u4e2d\u7684\u6240\u6709\u5e94\u7528\u7a0b\u5e8f\u4e4b\u95f4\u4ef2\u88c1\u8d44\u6e90\u3002</p> <p>NodeManager \u662f\u6bcf\u4e2a\u673a\u5668\u7684\u6846\u67b6\u4ee3\u7406\uff0c\u8d1f\u8d23\u5bb9\u5668(Container)\uff0c\u76d1\u89c6\u5b83\u4eec\u7684\u8d44\u6e90\u4f7f\u7528\u60c5\u51b5\uff08CPU\u3001\u5185\u5b58\u3001\u78c1\u76d8\u3001\u7f51\u7edc\uff09\uff0c\u5e76\u5c06\u8fd9\u4e9b\u4fe1\u606f\u62a5\u544a\u7ed9 ResourceManager/Scheduler\u3002</p> <p>\u6bcf\u4e2a\u5e94\u7528\u7a0b\u5e8f\u7684 ApplicationMaster \u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a\u7279\u5b9a\u4e8e\u6846\u67b6(\u6bd4\u5982Spark,Flink)\u7684\u5e93\uff0c\u8d1f\u8d23\u4ece ResourceManager \u534f\u5546\u8d44\u6e90\uff0c\u5e76\u4e0e NodeManager \u5408\u4f5c\u6267\u884c\u548c\u76d1\u89c6\u4efb\u52a1\u3002</p>"},{"location":"dataWarehouse/hadoop/#_10","title":"\u7ec4\u4ef6","text":"<p><code>ResourceManager</code>\u4e3b\u8981\u6709\u4e24\u4e2a\u7ec4\u4ef6\uff0c<code>Scheduler</code>\u4ee5\u53ca<code>ApplicationsManager</code></p> <p><code>Scheduler</code>\u8d1f\u8d23\u6839\u636e\u5bb9\u91cf\u3001\u961f\u5217\u7b49\u5e38\u89c1\u7ea6\u675f\u5c06\u8d44\u6e90\u5206\u914d\u7ed9\u5404\u79cd\u6b63\u5728\u8fd0\u884c\u7684\u5e94\u7528\u7a0b\u5e8f\u3002\u5176\u8c03\u5ea6\u7b56\u7565\u662f\u53ef\u63d2\u62d4\u7684\uff0c\u6700\u7ec8\u6709\u516c\u5e73\u8c03\u5ea6\u5668\uff0c\u5bb9\u91cf\u8c03\u5ea6\u5668\u7b49\u3002</p> <p><code>ApplicationsMaster</code>\u8d1f\u8d23\u63a5\u6536\u4f5c\u4e1a\u63d0\u4ea4\uff0c\u534f\u5546\u7528\u4e8e\u6267\u884c\u7279\u5b9a\u4e8e\u5e94\u7528\u7a0b\u5e8f\u7684 <code>ApplicationMaster</code>\u7684\u7b2c\u4e00\u4e2a\u5bb9\u5668\uff0c\u5e76\u63d0\u4f9b\u5728\u53d1\u751f\u6545\u969c\u65f6\u91cd\u65b0\u542f\u52a8 <code>ApplicationMaster</code> \u5bb9\u5668\u7684\u670d\u52a1\u3002</p> <p><code>ApplicationMaster</code>\u662f\u4e00\u4e2a\u4e0e\u5177\u4f53\u6846\u67b6\u8026\u5408\u7684\u8fdb\u7a0b\uff0c\u6bd4\u5982\u4e00\u4e2a\u96c6\u7fa4\u53ef\u4ee5\u8fd0\u884c<code>Spark &amp; Flink</code>\u4efb\u52a1\uff0c\u4f46\u662f\u5355\u4e2a<code>Job</code>\u7684<code>AM</code>\u5c31\u662f\u63d0\u4ea4<code>Job</code>\u4e4b\u540e\u6839\u636e\u5177\u4f53\u6846\u67b6\u4e0e\u4efb\u52a1\u624d\u521b\u5efa\u7684\u3002</p>"},{"location":"dataWarehouse/hadoop/#_11","title":"\u8c03\u5ea6","text":"<p>\u8c03\u5ea6\u7b56\u7565\u6709\u516c\u5e73\u8c03\u5ea6\u5668\uff0c\u4ee5\u53ca\u5bb9\u91cf\u8c03\u5ea6\u5668\uff0c\u53ef\u4ee5\u5728<code>yarn-default.xml</code>\u6587\u4ef6\u4e2d\u914d\u7f6e\u9ed8\u8ba4\u8c03\u5ea6\u3002</p> <p>\u5177\u4f53\u8c03\u5ea6\u5728<code>yarn-site.xml</code>\u4e2d\u914d\u7f6e\u3002</p> <p>CapacityScheduler</p> <p>\u6838\u5fc3\u7279\u70b9\u662f\u591a\u79df\u6237\uff0c\u4e5f\u5c31\u662f\u4e0d\u540c\u7684\u7ec4\u7ec7\u4e0e\u90e8\u95e8\uff0c\u8fd0\u884c\u4e0d\u540c\u7684\u4efb\u52a1\uff0c\u53ef\u4ee5\u5f39\u6027\u5171\u7528\u4e00\u5957<code>YARN</code>\u96c6\u7fa4\u3002</p> <p>\u6838\u5fc3\u7ed3\u6784\u662f\u4e00\u4e2a\u8d44\u6e90\u7684\u591a\u7ea7\u961f\u5217\uff0c\u4e00\u4e2a\u7ec4\u7ec7\u7684\u961f\u5217\u4e4b\u95f4\u53ef\u4ee5\u4e92\u76f8\u5171\u4eab\u8d44\u6e90\u3002</p> <p>\u4efb\u52a1\u7684\u4f18\u5148\u7ea7\u53ea\u652f\u6301FIFO</p> <p>FairScheduler</p> <p>\u6240\u54df\u7684\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u516c\u5e73\u7684\u5171\u4eab\u96c6\u7fa4\u4e2d\u7684\u8d44\u6e90\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u53ea\u6839\u636e<code>\u5185\u5b58</code>\u8fdb\u884c\u5224\u65ad\uff0c\u4f46\u662f\u4e5f\u53ef\u4ee5\u4fee\u6539\u4e3a\u57fa\u4e8e<code>\u5185\u5b58 + cpu</code>\u8fdb\u884c\u5224\u65ad\u3002</p> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u3002\u6240\u6709\u4efb\u52a1\u90fd\u4f4d\u4e8e\u4e00\u4e2a<code>default</code>\u961f\u5217\u4e2d\uff0c\u5f53\u7136\u4e5f\u53ef\u4ee5\u6301\u591a\u7ea7\u5c42\u6b21\u961f\u5217\uff0c\u4ee5<code>root</code>\u4e3a\u9876\u5c42\u961f\u5217\u3002</p> <p>\u6bcf\u4e2a\u961f\u5217\u4e2d\uff0c\u9ed8\u8ba4\u662f\u901a\u8fc7\u57fa\u4e8e\u5185\u5b58\u7684\u516c\u5e73\u8c03\u5ea6\u539f\u5219\u6765\u8c03\u5ea6\u4efb\u52a1\uff0c\u4f46\u662f\u4e5f\u53ef\u4ee5\u914d\u7f6eFIFO\u3002</p> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5141\u8bb8\u6240\u6709\u4efb\u52a1\u8fd0\u884c\uff0c\u4f46\u662f\u4e5f\u53ef\u4ee5\u9650\u5236\u7279\u5b9a\u7528\u6237\u4ee5\u53ca\u6bcf\u4e2a\u961f\u5217\u7684\u4efb\u52a1\u6570\u91cf\u4e0a\u9650\uff0c\u9632\u6b62\u67d0\u4e2a\u7528\u6237\u72ec\u5360\u96c6\u7fa4\u3002</p>"},{"location":"dataWarehouse/hadoop/#app","title":"\u901a\u7528app\u521b\u5efa","text":"<p>\u4e00\u822c\u6982\u5ff5\u662f\u5e94\u7528\u7a0b\u5e8f\u63d0\u4ea4\u5ba2\u6237\u7aef\u5411 YARN ResourceManager (RM) \u63d0\u4ea4\u5e94\u7528\u7a0b\u5e8f\u3002\u8fd9\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e<code>YarnClient</code>\u5bf9\u8c61\u6765\u5b8c\u6210\u3002\u5728\u542f\u52a8<code>YarnClient</code>\u540e\uff0c\u5ba2\u6237\u7aef\u53ef\u4ee5\u8bbe\u7f6e\u5e94\u7528\u7a0b\u5e8f\u4e0a\u4e0b\u6587\uff0c\u51c6\u5907\u5305\u542bApplicationMaster (AM) \u7684\u5e94\u7528\u7a0b\u5e8f\u7684\u7b2c\u4e00\u4e2a\u5bb9\u5668\uff0c\u7136\u540e\u63d0\u4ea4\u5e94\u7528\u7a0b\u5e8f\u3002\u60a8\u9700\u8981\u63d0\u4f9b\u8bf8\u5982\u5e94\u7528\u7a0b\u5e8f\u8fd0\u884c\u6240\u9700\u672c\u5730\u6587\u4ef6/jar \u7684\u8be6\u7ec6\u4fe1\u606f\u3001\u9700\u8981\u6267\u884c\u7684\u5b9e\u9645\u547d\u4ee4\uff08\u5e26\u6709\u5fc5\u8981\u7684\u547d\u4ee4\u884c\u53c2\u6570\uff09\u3001\u4efb\u4f55\u64cd\u4f5c\u7cfb\u7edf\u73af\u5883\u8bbe\u7f6e\uff08\u53ef\u9009\uff09\u7b49\u4fe1\u606f\u3002</p> <p><code>\u5b9e\u9645\u4e0a\uff0c\u60a8\u9700\u8981\u63cf\u8ff0\u9700\u8981\u4e3a\u60a8\u7684 ApplicationMaster \u542f\u52a8\u7684 Unix \u8fdb\u7a0b</code>\u3002</p> <p>\u7136\u540e\uff0cYARN ResourceManager \u5c06\u5728\u5df2\u5206\u914d\u7684\u5bb9\u5668\u4e0a\u542f\u52a8 ApplicationMaster\uff08\u5982\u6307\u5b9a\uff09\u3002ApplicationMaster \u4e0e YARN \u96c6\u7fa4\u901a\u4fe1\uff0c\u5e76\u5904\u7406\u5e94\u7528\u7a0b\u5e8f\u6267\u884c\u3002\u5b83\u4ee5\u5f02\u6b65\u65b9\u5f0f\u6267\u884c\u64cd\u4f5c\u3002</p> <p>\u5728\u5e94\u7528\u7a0b\u5e8f\u542f\u52a8\u671f\u95f4\uff0cApplicationMaster \u7684\u4e3b\u8981\u4efb\u52a1\u662f\uff1a</p> <p>1.\u4e0e ResourceManager \u901a\u4fe1\u4ee5\u534f\u5546\u548c\u5206\u914d\u672a\u6765\u5bb9\u5668\u7684\u8d44\u6e90</p> <p>2.\u5728\u5bb9\u5668\u5206\u914d\u540e\uff0c\u4e0e YARN NodeManager\uff08NM\uff09\u901a\u4fe1\u4ee5\u5728\u5b83\u4eec\u4e0a\u542f\u52a8\u5e94\u7528\u7a0b\u5e8f\u5bb9\u5668\u3002</p> <p>\u4efb\u52a1 1 \u53ef\u4ee5\u901a\u8fc7<code>AMRMClientAsync</code>\u5bf9\u8c61\u5f02\u6b65\u6267\u884c\uff0c\u4e8b\u4ef6\u5904\u7406\u65b9\u6cd5\u6307\u5b9a\u5728<code>AMRMClientAsync.CallbackHandler</code>\u7c7b\u578b\u7684\u4e8b\u4ef6\u5904\u7406\u7a0b\u5e8f\u4e2d\u3002\u9700\u8981\u5c06\u4e8b\u4ef6\u5904\u7406\u7a0b\u5e8f\u660e\u786e\u5730\u8bbe\u7f6e\u4e3a\u5ba2\u6237\u7aef\u3002</p> <p>\u4efb\u52a1 2 \u53ef\u4ee5\u901a\u8fc7\u542f\u52a8\u4e00\u4e2a\u53ef\u8fd0\u884c\u5bf9\u8c61\u6765\u6267\u884c\uff0c\u8be5\u5bf9\u8c61\u5728\u5206\u914d\u5bb9\u5668\u65f6\u542f\u52a8\u5bb9\u5668\u3002\u4f5c\u4e3a\u542f\u52a8\u6b64\u5bb9\u5668\u7684\u4e00\u90e8\u5206\uff0cAM \u5fc5\u987b\u6307\u5b9a\u5177\u6709\u542f\u52a8\u4fe1\u606f\uff08\u4f8b\u5982\u547d\u4ee4\u884c\u89c4\u8303\u3001\u73af\u5883\u7b49\uff09\u7684<code>ContainerLaunchContext</code>\u3002</p> <p>\u5728\u5e94\u7528\u7a0b\u5e8f\u6267\u884c\u671f\u95f4\uff0cApplicationMaster \u901a\u8fc7<code>NMClientAsync</code>\u5bf9\u8c61\u4e0e NodeManager \u901a\u4fe1\u3002\u6240\u6709\u5bb9\u5668\u4e8b\u4ef6\u90fd\u7531\u4e0e<code>NMClientAsync</code>\u5173\u8054\u7684<code>NMClientAsync.CallbackHandler</code>\u5904\u7406\u3002\u5178\u578b\u7684\u56de\u8c03\u5904\u7406\u7a0b\u5e8f\u5904\u7406\u5ba2\u6237\u7aef\u542f\u52a8\u3001\u505c\u6b62\u3001\u72b6\u6001\u66f4\u65b0\u548c\u9519\u8bef\u3002ApplicationMaster \u8fd8\u901a\u8fc7\u5904\u7406<code>AMRMClientAsync.CallbackHandler</code>\u7684<code>getProgress()</code>\u65b9\u6cd5\u5411 ResourceManager \u62a5\u544a\u6267\u884c\u8fdb\u5ea6\u3002</p>"},{"location":"dataWarehouse/interview/","title":"\u67e5\u7f3a\u8865\u6f0f","text":"<p>\u8bb0\u5f55\u6bcf\u4e00\u6b21\u9762\u8bd5\u4e2d\u6709\u7591\u60d1\uff0c\u6216\u8005\u89c9\u5f97\u6709\u610f\u601d\u7684\u95ee\u9898</p>"},{"location":"dataWarehouse/interview/#_2","title":"\u5927\u6570\u636e\u7ec4\u4ef6","text":""},{"location":"dataWarehouse/interview/#spark","title":"Spark","text":"<p>nsdi12-final138.pdf (usenix.org)</p>"},{"location":"dataWarehouse/interview/#resilientor","title":"resilient:\u590d\u539f\u6027or\u5f39\u6027","text":"<p>\u9762\u8bd5\u88ab\u95ee\u5230\u4e86Spark\u7684RDD\uff0c\u4e5f\u5c31\u662f\u901a\u5e38\u88ab\u7ffb\u8bd1\u4e3a<code>\u5f39\u6027\u5206\u5e03\u5f0f\u6570\u636e\u96c6</code>\u7684\u62bd\u8c61\u7c7b\u3002</p> <p>RDD\u7684\u4e2d\u7684\u5f39\u6027\uff0c\u5230\u5e95\u662f\u4ec0\u4e48\u5462\uff1f\u6211\u5bf9\u8fd9\u4e2a\u72af\u4e86\u8ff7\u7cca\u3002\u6536\u5230\u5f39\u6027\u4e91\u8ba1\u7b97\u7b49\u6982\u5ff5\u7684\u5f71\u54cd\uff0c\u6211\u5f00\u59cb\u5f80Spark\u7684\u79fb\u52a8\u8ba1\u7b97\u4e0e\u4fdd\u6301\u6570\u636e<code>local</code>\u7684\u7279\u6027\u53bb\u8bf4\u3002\u663e\u7136\uff0c\u6ca1\u8bf4\u5230\u70b9\u4e0a\u3002</p> <p>\u5176\u5b9e\u6253\u5f00\u8bba\u6587\u770b\u6807\u9898(\u6807\u9898\u771f\u7684\u5f88\u91cd\u8981\uff0c\u800c\u4e0d\u662f\u57fa\u4e8e\u7ecf\u9a8c\u76f4\u63a5\u770b\u5185\u5bb9)\u3002</p> <p>Resilient Distributed Datasets: A Fault-Tolerant Abstraction for In-Memory Cluster Computing</p> <p>\u8bba\u6587\u9898\u76ee\u5c31\u8bf4\u4e86\uff0cRDD-\u6709\u5bb9\u9519\u7684\uff0c\u9762\u5411\u57fa\u4e8e\u5185\u5b58\u7684\u96c6\u7fa4\u8ba1\u7b97\u7684\u4e00\u79cd\u62bd\u8c61\u3002\u6240\u4ee5\u5f88\u91cd\u8981\u4e00\u70b9\uff0c\u5c31\u662f<code>\u5bb9\u9519</code>\u3002\u67e5\u770b<code>resilient</code>\u7ffb\u8bd1\uff0c\u53d1\u73b0\u9996\u8981\u7684\u89e3\u91ca\u4e5f\u662f\u53ef\u6062\u590d\u7684\uff0c\u6709\u9002\u5e94\u529b\u7684\u3002\u90a3\u4e48\u4e00\u5207\u90fd\u89e3\u91ca\u7684\u901a\u4e86\u3002</p> <p>In contrast to these systems, RDDs provide an interface based on coarse-grained transformations (e.g., map, filter and join) that apply the same operation to many data items. This allows them to efficiently provide fault tolerance by logging the transformations used to build a dataset (its lineage) rather than the actual data.1 If a partition of an RDD is lost, the RDD has enough information about how it was derived from other RDDs to recompute 1Checkpointing the data in some RDDs may be useful when a lineage chain grows large, however, and we discuss how to do it in \u00a75.4. just that partition. Thus, lost data can be recovered, often quite quickly, without requiring costly replication.</p> <p>\u5176\u5b9e\u8fd9\u91cc\u7684\u8bdd\u5c31\u662f\u89e3\u91ca\u4e86\u5b83\u7684\u9002\u5e94\u6027\u7684\u771f\u6b63\u542b\u4e49\uff0c\u4e5f\u5c31\u662fRDD\u7684\u67d0\u4e9b<code>partition</code>\u6570\u636e\u4e22\u4e86\uff0c\u53ef\u4ee5\u91cd\u65b0\u89e6\u53d1\u8fd9\u90e8\u5206\u7684\u8ba1\u7b97(\u53ef\u4ee5\u901a\u8fc7\u628ashuffle_0_0_0.data/index\u5220\u9664\u4e86\u6765\u6a21\u62df\u3002\u7136\u540e\u4e0b\u6e38<code>task</code>\u53d1\u73b0\u6839\u636e<code>mapstatus</code>\u627e\u4e0d\u5230<code>block</code>\uff0c\u4e5f\u5c31\u62ff\u4e0d\u5230\u8fed\u4ee3\u5668\u4e4b\u540e\uff0c\u4f1a\u89e6\u53d1\u7f3a\u5931\u6587\u4ef6\u7684\u91cd\u65b0\u751f\u6210\uff09\u3002</p>"},{"location":"dataWarehouse/interview/#tez","title":"Tez","text":"<p>Apache Tez \u2013 Welcome to Apache TEZ\u00ae</p> <p>HIVE\u6267\u884c\u5f15\u64ceTEZ\u5b66\u4e60\u4ee5\u53ca\u5b9e\u9645\u4f7f\u7528 - \u4f2f\u5b89\u77e5\u5fc3 - \u535a\u5ba2\u56ed (cnblogs.com)</p>"},{"location":"dataWarehouse/interview/#_3","title":"\u4f7f\u7528\u539f\u7406\u4e0e\u573a\u666f","text":"<p>\u8fd9\u4e2a\u7ec4\u4ef6\u4e4b\u524d\u53ea\u5728\u4e66\u4e0a\u770b\u5230\u8fc7\u4e00\u6b21\uff0c\u5c45\u7136\u88ab\u95ee\u5230\u4e86\u3002\u5176\u5b9e\u5728Hive\u547d\u4ee4\u884c\u767b\u5f55\u7684\u65f6\u5019\u6bcf\u6b21\u90fd\u4f1a\u770b\u5230\u8fd9\u4e2a\u7ec4\u4ef6\u7684\u63d0\u793a(Hive2.x\u4e4b\u540e\u63a8\u8350Tez\u548cSpark\uff0c\u800c\u4e0d\u662fHive on MR)</p> <p>\u5b83\u901a\u8fc7DAG\u8fdb\u884c\u8c03\u5ea6\u4efb\u52a1\uff0c\u5176API\u5176\u5b9e\u66f4\u50cfFlink\uff0c\u6709Source\uff0cSink\uff0cProcessorOperator\u7b49\u6982\u5ff5\u3002\u5177\u4f53\u5c31\u4e0d\u5c55\u5f00\u4e86\u3002</p> <p>\u7279\u70b9</p> <p>\u548c<code>YARN</code>\u4e0e<code>Hive</code>\u5f3a\u5236\u7ed1\u5b9a\uff0c\u5c31\u662f\u4e3a\u5176\u7279\u5316\u7684\u589e\u5f3a\u6267\u884c\u5f15\u64ce\u3002\u5f53\u7136\u540c\u65f6\u548c<code>Spark</code>\u5bf9\u6bd4\uff0c\u4e5f\u53ef\u4ee5\u89c6\u4f5c\u7f3a\u70b9\u3002\u56e0\u4e3a\u6709<code>Spark on k8s</code>\uff0c\u5e76\u4e14<code>SparkSQL</code>\u548c<code>Hive</code>\u4ea4\u4e92\u4e5f\u662f\u6bd4\u8f83\u6d41\u7545\u3002</p>"},{"location":"dataWarehouse/interview/#flink","title":"Flink","text":""},{"location":"dataWarehouse/interview/#cep","title":"\u5e7f\u64ad\u6d41\u548cCEP","text":"<p>\u9488\u5bf9\u5e7f\u64ad\u6d41\u7684\u4f7f\u7528\uff0c\u6211\u66f4\u65b0\u4e86<code>Flink\u603b\u7ed3</code>\u4e2d\u7684\u5185\u5bb9\uff0c\u8be6\u7ec6\u5b9e\u73b0\u4e86\u4e00\u4e2a<code>Demo</code>\uff0c\u5982\u4e0b:</p> Java<pre><code>public class BroadCastDemo {\n    public static void main(String[] args) {\n        Configuration conf = new Configuration();\n        conf.setString(\"rest.port\", \"9091\");\n        conf.setBoolean(\"web.ui.enable\", true);\n        StreamExecutionEnvironment env = StreamExecutionEnvironment.createLocalEnvironmentWithWebUI(conf);\n        DataStreamSource&lt;Transaction&gt; datastream = env.addSource(new TransactionSource());\n        DataStreamSource&lt;Rule&gt; rulestream = env.addSource(new RuleStreamSource());\n        KeyedStream&lt;Transaction, Long&gt; userPartitionedStream = datastream.keyBy(Transaction::getAccountId);\n        MapStateDescriptor&lt;String, Rule&gt; descriptor = new MapStateDescriptor&lt;&gt;(\"ruleBroadcastState\", String.class, Rule.class);\n        BroadcastStream&lt;Rule&gt; ruleBroadcastStream = rulestream.broadcast(descriptor);\n\n        SingleOutputStreamOperator&lt;String&gt; processed = userPartitionedStream\n                .connect(ruleBroadcastStream) //connect\u4e24\u4e2a\u6d41\n                .process(new KeyedBroadcastProcessFunction&lt;Long, Transaction, Rule, String&gt;() {\n                    private MapStateDescriptor&lt;String, Rule&gt; descriptor = new MapStateDescriptor&lt;&gt;(\"ruleBroadcastState\", String.class, Rule.class);\n                    //\u5904\u7406\u4e3b\u6570\u636e\u6d41\u5143\u7d20\n                    @Override\n                    public void processElement(Transaction value, ReadOnlyContext ctx, Collector&lt;String&gt; out) throws Exception {\n                        Rule rule = ctx.getBroadcastState(descriptor).get(\"rule\");\n                        if (rule != null) {\n                            if (rule.isValid(value)) {\n                                out.collect(value.toString());\n                            }\n                        }\n                    }\n                    //\u5904\u7406\u5e7f\u64ad\u89c4\u5219\u6d41\u5143\u7d20\n                    @Override\n                    public void processBroadcastElement(Rule value, Context ctx, Collector&lt;String&gt; out) throws Exception {\n                        ctx.getBroadcastState(descriptor).put(\"rule\", value);\n                    }\n                });\n        processed.print();\n        try {\n            env.execute();\n        } catch (Exception e) {\n            throw new RuntimeException(e);\n        }\n    }\n    private static class RuleStreamSource implements SourceFunction&lt;Rule&gt; {\n        private boolean running = true;\n        @Override\n        public void run(SourceContext&lt;Rule&gt; ctx) throws Exception {\n            while(running){\n                Thread.sleep(500);\n                ctx.collect(new Rule(RandomUtils.nextDouble()));\n            }\n        }\n        @Override\n        public void cancel() {\n            running = false;\n        }\n    }\n    public static class Rule{\n        private Double amountLimit;\n        public Rule(Double amountLimit){\n            this.amountLimit = amountLimit;\n        }\n        public boolean isValid(Transaction transaction) {\n            return transaction.getAmount() &lt; amountLimit;\n        }\n    }\n</code></pre> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u5e7f\u64ad\u6d41\u7684\u63a7\u5236\u5176\u5b9e\u4e5f\u662f\u53ef\u4ee5\u5f88\u5f3a\u7684\uff0c\u751a\u81f3\u53ef\u4ee5\u505a\u72b6\u6001\u673a\u5339\u914d(\u5b98\u7f51\u4f8b\u5b50\u66f4\u52a0\u590d\u6742\uff0c\u53ef\u662f\u6ca1\u6709\u5b8c\u6574\u4ee3\u7801)\u3002</p> <p>\u5728<code>Flink</code>\u9879\u76ee\u4e2d\uff0c\u5c31\u88ab\u95ee\u5230\u4e86\u4e24\u8005\u7684\u533a\u522b\uff0c\u4ee5\u53ca\u5b9e\u73b0\u903b\u8f91\uff0c\u603b\u7ed3\u5982\u4e0b:</p> <ul> <li>Flink \u5e7f\u64ad\u6d41\uff0c\u662f\u53ef\u4ee5\u6ee1\u8db3\u52a8\u6001\u4fee\u6539\u7b80\u5355\u89c4\u5219\u7684\u573a\u666f\u7684\u3002\u540c\u6837\u662f\u5c06Kafka\u6216\u8005\u5173\u7cfb\u6570\u636e\u5e93\u7684\u89c4\u5219\u8868\u4f5c\u4e3aSource\u5c31\u53ef\u4ee5\u3002</li> <li>Flink CEP\uff0c\u4e13\u95e8\u7528\u4e8e\u5339\u914d\u590d\u6742\u7684\u4e8b\u4ef6\u89c4\u5219\uff0c\u5c24\u5176\u662f\u975e\u786e\u5b9a\u6709\u9650\u72b6\u6001\u673a(\u5176\u5b9eCEP\u5c31\u6765\u6e90\u4e8e\u8fd9\u4e2a\u6982\u5ff5)\u3002\u5982\u679c\u9700\u8981\u52a8\u6001\u4fee\u6539<code>Pattern</code>\uff0c\u5219\u9700\u8981\u4e8c\u6b21\u5f00\u53d1</li> <li>\u4e24\u8005\u7684\u6838\u5fc3\u533a\u522b\u5b9e\u9645\u5c31\u662f<code>Operator</code>\u5bf9<code>State</code>\u7684\u62bd\u8c61\u63a7\u5236\u7684\u7a0b\u5ea6\u3002</li> </ul> <p>\u90a3\u4e48\u4e3a\u4ec0\u4e48\u9700\u8981\u52a8\u6001CEP\u5462\uff0c\u5176\u5b9e\uff0c\u6211\u8ba4\u4e3a\u8fd9\u662f\u4e00\u4e2a\u7f16\u7801\u590d\u6742\u5ea6\u7684\u95ee\u9898\u3002</p> <p>\u5982\u679c\u662f\u7b80\u5355\u7684\u6d41\u8fc7\u6ee4\uff0c\u6216\u8005\u72b6\u6001\u673a\u72b6\u6001\u5f88\u5c11\u3002\u5219\u76f4\u63a5\u4f7f\u7528<code>Flink</code>\u5e7f\u64ad\u6d41\u5c31\u53ef\u4ee5\u3002</p> <p>\u4f46\u662f\u5982\u679c\u72b6\u6001\u673a\u72b6\u6001\u6570\u91cf\u5f88\u591a\uff0c\u89c4\u5219\u590d\u6742\uff0c\u90a3\u9700\u8981\u4f7f\u7528<code>Flink-CEP</code>\u3002\u5982\u679c\u8fd8\u9700\u8981\u4e0d\u505c\u673a\u66f4\u65b0\uff0c\u5219\u9700\u8981\u8fdb\u884c\u4e8c\u6b21\u5f00\u53d1\uff0c\u5b9e\u73b0\u52a8\u6001CEP\u3002</p> <p>\u800c\u5177\u4f53\u52a8\u6001CEP\u7684\u5b9e\u73b0\uff0c\u53c8\u6709\u4e24\u79cd:</p> <ul> <li>Flink\u5e7f\u64ad\u6d41\u5e7f\u64ad\u89c4\u5219</li> <li>Flink\u534f\u8c03\u5668\u5206\u53d1\u89c4\u5219</li> </ul> <p>\u8fd9\u5176\u5b9e\u662f\u4e24\u79cd\u601d\u8def\uff0c\u5176\u5b9e\u5728<code>task</code>\u7aef\u57fa\u672c\u4e00\u81f4\uff0c\u53ea\u662f\u5728<code>master</code>\u7aef\uff0c\u4e00\u4e2a\u9700\u8981\u65b0\u5efa\u5e7f\u64ad\u6d41<code>source</code>\uff0c\u4e00\u4e2a\u9700\u8981\u5f00\u53d1\u534f\u8c03\u5668\u626b\u6570\u636e\u5e93\u3002<code>FILP200</code>\u63a8\u8350\u7684\u662f\u540e\u8005\uff0c\u539f\u56e0\u5f88\u7b80\u5355\uff0c\u5c31\u662f\u4fdd\u6301<code>FLink</code>\u67b6\u6784\u6e05\u6670\uff0c\u5e76\u4e14\u534f\u8c03\u5668\u672c\u6765\u5c31\u662f\u505a<code>subtask</code>\u534f\u8c03\u7684\u3002</p>"},{"location":"dataWarehouse/interview/#_4","title":"\u6570\u4ed3\u7406\u8bba","text":""},{"location":"dataWarehouse/interview/#_5","title":"\u5206\u5c42","text":"<p>\u6570\u4ed3\u7684\u672c\u8d28\u5c31\u662f\u63d0\u4f9b\u6570\u636e\u670d\u52a1\uff0c\u800c\u5176\u4e2d\u7684\u5206\u5c42\u662f\u4e00\u95e8\u827a\u672f\uff0c\u5176\u5177\u4f53\u7684\u5206\u51e0\u5c42\uff0c\u600e\u4e48\u5206\uff0c\u5176\u5b9e\u90fd\u548c\u4e1a\u52a1\u9700\u6c42/\u7528\u6570\u9700\u6c42\u7d27\u5bc6\u7ed3\u5408\u3002</p> <p>\u6240\u4ee5\u6211\u8ba4\u4e3a\u4e00\u5207\u4ece\u9700\u6c42\u51fa\u53d1\uff0c\u8003\u8651\u6bcf\u4e2a\u8868\u8be5\u653e\u7684\u4f4d\u7f6e\u3002</p> <p>\u5176\u5b9e\u5b9e\u65f6\u6570\u4ed3\u751a\u81f3\u6709\u4e0d\u5206\u5c42\u7684\uff0c\u5c31\u662f\u4e3a\u4e86\u4f4e\u5ef6\u8fdf\u3002</p>"},{"location":"dataWarehouse/interview/#_6","title":"\u7ef4\u5ea6\u9000\u5316\u540e\u8868\u7684\u4f4d\u7f6e","text":"<p>\u8fd9\u91cc\u4e86\u89e3\u5230\u5b9e\u9645\u4e0a<code>ODS</code>\u5c42\u4e00\u822c\u4ec0\u4e48\u90fd\u4e0d\u505a\uff0c\u751a\u81f3\u8fde\u7b80\u5355\u7684\u6e05\u6670\u90fd\u4e0d\u7528\u505a\u3002</p> <p>\u8fd9\u91cc\u662f\u4e00\u4e2a\u573a\u666f\uff0c\u4e5f\u5c31\u662f<code>ODS</code>\u5c42\u5c06\u6570\u636e\u63a5\u8fc7\u6765\u4e4b\u540e\uff0c\u5982\u679c\u73b0\u5728\u8981\u5bf9\u8be5\u8868\u6269\u5145\u7ef4\u5ea6(\u4ece\u516c\u5171\u7ef4\u5ea6\u8868\u505a\u7ef4\u5ea6\u9000\u5316)\uff0c\u8fd9\u5f20\u8868\u8be5\u653e\u5728<code>ODS</code>\u8fd8\u662f<code>DWD</code>\u3002</p> <p>OK\uff0c\u8fd9\u91cc\u601d\u8def\u5c31\u662f\uff0c\u4ece\u6570\u4ed3\u7684\u672c\u8d28\u51fa\u53d1\u3002\u5b83\u662f\u63d0\u4f9b\u6570\u636e\u670d\u52a1\u7684\uff0c\u6240\u4ee5\uff1a</p> <ol> <li>\u9996\u5148\uff0c\u6211\u4eec\u5148\u7edf\u8ba1\u4e0b\u6e38\u7528\u6570\u9700\u6c42\uff0c\u770b\u4e00\u770b\u8fd9\u4e2a\u8868\u5927\u6982\u5f97\u4f7f\u7528\u9891\u6b21\uff0c\u4ee5\u53ca\u4f7f\u7528\u8303\u56f4\u7684\u60c5\u51b5\u3002</li> <li>\u5176\u6b21\uff0c\u5982\u679c\u786e\u5b9a\u7ef4\u5ea6\u8868\u53ef\u4ee5\u9000\u5316(<code>\u8fd9\u70b9\u5f88\u91cd\u8981\uff0c\u56e0\u4e3a\u6709\u7684\u7ef4\u5ea6\u8868\u4e0d\u9002\u5408\u9000\u5316</code>)\uff0c\u5219\u505a\u60f3\u8981\u7684\u9000\u5316\u3002</li> <li>\u6700\u540e\uff0c\u6570\u636e\u8868\u653e\u5728\u54ea\u91cc\u5462\uff1f\u8fd9\u91cc\u5c31\u662f\u6536\u96c6\u9700\u6c42\uff0c\u5206\u5c42\u6c89\u6dc0\u7684\u610f\u4e49\u4e86\uff0c\u5982\u679c\u57fa\u4e8e\u8fd9\u5f20\u8868\u7684\u4e0d\u540c\u7c7b\u578b\u670d\u52a1\u9700\u6c42\u8d8a\u591a\uff0c\u5c31\u8d8a\u5e94\u8be5\u6c89\u6dc0(\u6cdb\u5316\u800c\u4e0d\u662f\u7279\u5316)\u3002    \u5177\u4f53\u6c89\u6dc0\u4f4d\u7f6e\uff0c\u4e0d\u9700\u8981\u53ea\u9650\u5236\u5728<code>DWS-ADS</code>\uff0c\u5176\u5b9e\u6bcf\u4e00\u5c42\u90fd\u53ef\u4ee5\u505a\uff0c\u53ea\u8981\u7ecf\u8fc7\u8bc4\u4f30\u4e4b\u540e\u53ef\u4ee5\u66f4\u65b9\u4fbf\u590d\u7528/\u66f4\u65b9\u4fbf\u6301\u4e45\u5f00\u53d1\u5373\u53ef\u3002</li> </ol> <p>\u7136\u540e\uff0c\u5c31\u662f\u5230\u5e95\u53ef\u4e0d\u53ef\u4ee5/\u8981\u4e0d\u8981\u7ef4\u5ea6\u9000\u5316:</p> <ul> <li>\u53ef\u4ee5\u9000\u5316\uff1a\u4e5f\u5c31\u662f\u7ef4\u5ea6\u8868\u7b80\u5355\uff0c\u6216\u8005\u6570\u636e\u91cf\u5f88\u5c0f\uff0c\u6216\u8005\u4e0d\u9700\u8981\u5386\u53f2\u53d8\u5316\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u9000\u5316\u3002</li> <li>\u4e0d\u5e94\u8be5\u9000\u5316:\u7ef4\u5ea6\u8868\u53ef\u80fd\u53d8\u5316/\u6269\u5c55\uff0c\u9700\u8981\u4fdd\u7559\u7ef4\u5ea6\u8868\u7684\u5386\u53f2\u53d8\u5316\uff0c\u6216\u8005\u9700\u8981\u4fdd\u6301\u6570\u636e\u4e00\u81f4\u6027(\u9000\u5316\u5c31\u5bfc\u81f4\u6709\u526f\u672c\u4e86\uff0c\u975e\u539f\u5b50\u64cd\u4f5c\u5fc5\u7136\u4f1a\u51fa\u95ee\u9898)\u3002</li> </ul>"},{"location":"dataWarehouse/interview/#_7","title":"\u6570\u636e\u76f8\u5173","text":""},{"location":"dataWarehouse/interview/#_8","title":"\u7ed3\u6784\u5316\u6570\u636e\u548c\u975e\u7ed3\u6784\u5316\u6570\u636e","text":"<p>\u8fd9\u4e2a\u662f\u8ba9\u611f\u53d7\u5f88\u6df1\u7684\u4e00\u4e2a\u8bdd\u9898\uff0c\u9762\u8bd5\u5b98\u9488\u5bf9\u8fd9\u4e2a\u95ee\u9898\u7ed9\u6211\u8bb2\u4e8610\u5206\u949f\u3002</p> <p>\u4e24\u8005\u7684\u672c\u8d28\u533a\u522b\u662f\u4ec0\u4e48\u5462\uff1f</p> <p></p> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u7ed3\u6784\u5316\u7684\u6570\u636e\u7684\u6765\u6e90\u5355\u4e00\uff0c\u4f46\u662f\u975e\u7ed3\u6784\u5316\u6570\u636e\u6765\u6e90\u591a\u6837\uff0c\u901a\u5e38\u6709\u5982\u4e0b\u79cd\u7c7b:</p> <ul> <li>\u6587\u672c\u6587\u5b57</li> <li>\u56fe\u50cf\uff0c\u56fe\u7247</li> <li>\u89c6\u9891\u6d41\uff0c\u7535\u89c6\u6d41</li> </ul> <p>\u5e76\u4e14\u8fd8\u6709\u5f88\u91cd\u8981\u4e00\u70b9\uff0c\u5c31\u662f\u975e\u7ed3\u6784\u5316\u6570\u636e\u7684\u589e\u901f\u7279\u522b\u5feb\u3002\u589e\u901f\u5feb\uff0c\u6765\u6e90\u591a\u6837\uff0c\u5c31\u8bf4\u660e\u5f80\u5f80\u6570\u636e\u7684<code>\u4ef7\u503c\u5bc6\u5ea6</code>\u662f\u5f88\u4f4e\u7684\u3002</p> <p>\u6240\u4ee5\u5c31\u53ef\u4ee5\u4e24\u4e2a\u65b9\u9762\u53bb\u8bf4:</p> <ul> <li><code>\u5b58\u50a8</code>\uff1a\u975e\u7ed3\u6784\u5316\u6570\u636e\u6bd4\u7ed3\u6784\u5316\u6570\u636e\u66f4\u597d\u5b58\u50a8\u3002\u6bd4\u5982\u6587\u6863\uff0c\u56fe\u7247\u7b49\u968f\u4fbf\u5b58\u50a8\u3002\u4f46\u662f\u7ed3\u6784\u5316\u6570\u636e\uff0c\u6bd4\u5982\u5173\u7cfb\u578b\u6570\u636e\u5e93\uff0c\u5b58\u50a8\u7684\u6210\u672c\u662f\u5f88\u9ad8\u7684\u3002\u5b83\u66f4\u52a0\u8981\u6c42\u6570\u636e\u5b58\u50a8\u7684\u7cbe\u786e\u7ec4\u7ec7\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u4f60\u60f3\u7ed9\u5176\u4ed6\u4eba\u53d1\u9001\u4fe1\u606f\uff0c\u76f4\u63a5\u5199\u4e2a\u6587\u6863\u53d1\u9001\u8fc7\u53bb\u5c31\u53ef\u4ee5\u3002\u4f46\u662f\u5173\u7cfb\u578b\u6570\u636e\u5e93\u5e76\u4e0d\u662f\u8fd9\u6837\uff0c\u4f60\u5fc5\u987b\u8003\u8651\u6027\u80fd\u548c\u7cbe\u786e\u6027\u6765\u8fdb\u884c\u5b58\u50a8\u3002</li> <li><code>\u4f7f\u7528</code>\uff1a\u7ed3\u6784\u5316\u6570\u636e\u6bd4\u975e\u7ed3\u6784\u5316\u6570\u636e\u66f4\u597d\u7528\u3002\u8fd9\u5c31\u662f\u7ed3\u6784\u5316\u6570\u636e\u7684<code>\u4ef7\u503c\u5bc6\u5ea6\u9ad8</code>\uff0c\u5206\u6790\u8d77\u6765\u4f7f\u7528<code>SQL</code>\u5c31\u591f\u4e86\u3002\u4f46\u662f\u975e\u7ed3\u6784\u5316\u6570\u636e\u4e0d\u884c\uff0c\u5b83\u7684<code>\u4ef7\u503c\u5bc6\u5ea6\u4f4e</code>\uff0c\u5e76\u4e14\u683c\u5f0f\u591a\u6837\u3002\u5fc5\u987b\u7ecf\u8fc7<code>ETL</code>\u4e4b\u540e\uff0c\u4f7f\u7528<code>Flink/Spark/\u5927\u6a21\u578b</code>\u7b49\u8fdb\u884c\u4e13\u95e8\u5206\u6790\uff0c\u624d\u6709\u6548\u679c\u3002</li> </ul>"},{"location":"dataWarehouse/interview/#_9","title":"\u6570\u636e\u7ed3\u6784\u4e0e\u7b97\u6cd5","text":""},{"location":"dataWarehouse/interview/#_10","title":"\u6570\u636e\u7ed3\u6784","text":""},{"location":"dataWarehouse/interview/#btree","title":"\u4ece\u4e8c\u53c9\u6811\u5230B+Tree","text":"<p>\u8fd9\u4e2a\u5176\u5b9e\u6211\u5728\u81ea\u5df1\u7684\u7b14\u8bb0\u4e2d\u6709\u603b\u7ed3\uff0c\u8fd9\u91cc\u8d34\u51fa\u94fe\u63a5</p> <p>\u5b58\u50a8\u5f15\u64ce - lx-bigdata (melodylx666.github.io)</p>"},{"location":"dataWarehouse/kafka/","title":"Kafka\u603b\u7ed3","text":""},{"location":"dataWarehouse/kafka/#api","title":"API","text":"<p>\u603b\u7ed3\u5404\u79cdAPI\u7684\u4f7f\u7528\u65b9\u6cd5</p> <p>\u9700\u8981\u5f15\u5165\u548cKafka\u7248\u672c\u5bf9\u5e94\u7684\u4f9d\u8d56\uff1a</p> Java<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.kafka&lt;/groupId&gt;\n            &lt;artifactId&gt;kafka-clients&lt;/artifactId&gt;\n            &lt;version&gt;3.6.2&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>"},{"location":"dataWarehouse/kafka/#topic","title":"Topic","text":"<p>\u5bf9\u4e8eTopic\u7684\u7ba1\u7406\uff0c\u4e3b\u8981\u901a\u8fc7<code>KafkaAdminClient</code>\u7c7b\u6765\u5b9e\u73b0\uff0c\u5b83\u662f\u4e00\u4e2a\u7ebf\u7a0b\u5b89\u5168\u7684\u5ba2\u6237\u7aef\u7ba1\u7406\u7c7b\u3002</p> <p>\u57fa\u672c\u903b\u8f91\uff1a\u64cd\u4f5c\u8be5\u7c7bAPI\uff0c\u8fd4\u56de\u7684\u7ed3\u679c\u5168\u90e8\u662f<code>kafka</code>\u5185\u90e8\u5bf9<code>JDK8 Future</code>\u7684\u5c01\u88c5\u7684<code>kafkaFuture</code>\u96c6\u5408\u3002\u542f\u52a8\u7684\u662f\u5f02\u6b65\u4efb\u52a1\uff0c\u5e76\u4e14\u5b89\u88c5\u7684\u56de\u8c03\u53ea\u6709<code>thenApply</code>\u65b9\u6cd5\uff0c\u5728\u8fd9\u91cc\u6b64\u65b9\u6cd5\u9ed8\u8ba4\u5728\u5f02\u6b65\u7ebf\u7a0b\u6267\u884c\uff0c\u5e76\u8fd4\u56de<code>future</code>\u7ed9main\u7ebf\u7a0b\u3002</p>"},{"location":"dataWarehouse/kafka/#_1","title":"\u521b\u5efa","text":"<p>\u4f7f\u7528<code>KafkaAdminClinet::createTopics</code></p> Java<pre><code>    public void createTopicDemo() {\n        //1.\u81ea\u52a8\u5206\u914d,\u9700\u8981\u6307\u5b9apartition\u6570\u91cf\u4ee5\u53ca\u526f\u672c\u6570\u91cf\n        NewTopic topic01 = new NewTopic(\"test01\", 1, (short) 1);\n        //2.\u5982\u679c\u9700\u8981\u6307\u5b9apartition\u6570\u91cf\uff0c\u4ee5\u53ca\u6bcf\u4e2apartition\u7684\u526f\u672c\u6570\u91cf\uff0c\u5219\n//        var map = new HashMap&lt;Integer, List&lt;Integer&gt;&gt;();\n//        map.put(0,List.of(0));//0\u53f7\u5206\u533a\uff0c\u5206\u52300\u53f7broker\u4e0a\n//        NewTopic topic02 = new NewTopic(\"test02\",map);\n\n        //\u521b\u5efa\u4e3b\u9898\uff0c\u62ff\u5230\u7684\u662f\u4e00\u7ec4Future\n        CreateTopicsResult result = adminClient.createTopics(List.of(topic01));\n        //\u5bf9\u8fd9\u7ec4future\u7684\u63a7\u5236\u53ef\u4ee5\u7cbe\u786e\u5230\u6bcf\u4e00\u4e2afuture\uff0c\u4e5f\u53ef\u4ee5\u63a7\u5236\u6574\u4e2a\u64cd\u4f5c\n        KafkaFuture&lt;String&gt; future = result.all().thenApply(v -&gt; {\n            return \"ok\";\n        });\n        try {\n            System.out.println(future.get());\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre>"},{"location":"dataWarehouse/kafka/#_2","title":"\u5220\u9664","text":"<p>\u5728windows\u7248\u672c\u4e0a\u5220\u9664API\u6709bug\u3002</p> Java<pre><code>    //\u5220\u9664topic,\u5728windows\u4e0a\u5220\u9664topic\u6709Bug\n    @Test\n    public void deleteTopicDemo() {\n        KafkaFuture&lt;Void&gt; voidKafkaFuture = adminClient.deleteTopics(List.of(\"test01\")).all().whenComplete((v, e) -&gt; {\n            if (e == null) {\n                System.out.println(\"\u5220\u9664\u6210\u529f\");\n            } else {\n                System.out.println(\"\u5220\u9664\u5931\u8d25\");\n            }\n        });\n        try {\n            voidKafkaFuture.get();\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre>"},{"location":"dataWarehouse/kafka/#_3","title":"\u67e5\u770b","text":"Java<pre><code>   public void listTopicDemo() {\n        ListTopicsResult listTopicsResult = adminClient.listTopics();\n        KafkaFuture&lt;String&gt; future = listTopicsResult.namesToListings().thenApply(v -&gt; {\n            v.forEach((k, v1) -&gt; {\n                System.out.println(k + \":\" + v1.name());\n                    }\n            );\n            return \"ok\";\n        });\n        try {\n            System.out.println(future.get());\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre>"},{"location":"dataWarehouse/kafka/#producer","title":"Producer","text":""},{"location":"dataWarehouse/kafka/#_4","title":"\u521b\u5efa","text":"Java<pre><code>    private static final KafkaProducer&lt;String,String&gt; producer;\n    static {\n        Properties props = new Properties();\n        props.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, \"localhost:9092\");\n        props.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, \"org.apache.kafka.common.serialization.StringSerializer\");\n        props.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, \"org.apache.kafka.common.serialization.StringSerializer\");\n\n        producer = new KafkaProducer&lt;String,String&gt;(props);\n    }\n</code></pre> <p>\u5176\u4e2d\uff0c\u4e00\u4e2a<code>record</code>\u7684<code>key-value</code>\u5e8f\u5217\u5316\u683c\u5f0f\u662f\u5fc5\u987b\u6307\u5b9a\u7684\u3002</p> <p>\u5176\u4f59\u5e38\u89c1\u53c2\u6570\uff1a</p> <ul> <li><code>acks</code> \u5176\u4e2d-1\u662fall</li> <li><code>retries</code>:\u53d1\u9001\u5931\u8d25\u91cd\u8bd5\u6b21\u6570</li> <li><code>batch.size</code>\uff1a\u6570\u636e\u53d1\u9001\u6279\u6b21\u5927\u5c0f</li> <li><code>max.request.size</code>\uff1a\u4e00\u6b21\u8bf7\u6c42\u7684\u6570\u636e\u91cf\u4e0a\u9650</li> <li><code>linger.ms</code>\uff1a\u6570\u636e\u5728\u7f13\u51b2\u533a\u4fdd\u5b58\u7684\u65f6\u95f4</li> <li><code>buffer.memory</code>\uff1a\u751f\u4ea7\u8005\u7684\u7f13\u51b2\u533a\u5927\u5c0f</li> </ul>"},{"location":"dataWarehouse/kafka/#_5","title":"\u53d1\u9001\u6d88\u606f","text":"<p>\u751f\u4ea7\u8005\u5e76\u4e0d\u548c<code>topic</code>\u7ed1\u5b9a\uff0c\u4e00\u4e2a\u751f\u4ea7\u8005\u53ef\u4ee5\u968f\u610f\u5411\u4e0d\u540c\u7684<code>topic</code>\u53d1\u9001<code>record</code>\u3002\u800c<code>record</code>\u548c<code>topic</code>\u7ed1\u5b9a</p> <p>Kafka\u6240\u63d0\u4f9b\u7684\u662f\u4e00\u4e2a\u8fd4\u56de\u503c\u4e3a<code>JDK5 Future</code>\u7684<code>send</code>API\uff0c\u4f46\u662f\u5728\u6b64\u57fa\u7840\u4e4b\u4e0a\u5c01\u88c5\u4e86\u53ef\u4ee5\u5b89\u88c5\u56de\u8c03\u7684\u65b9\u6cd5\uff0c\u5e76\u4e14\u9ed8\u8ba4\u662f\u5f02\u6b65\u56de\u8c03\uff0c\u5728I/O\u7ebf\u7a0b\u6267\u884c\u3002</p> <p>\u90a3\u4e48\u5982\u679c\u5f02\u6b65\u7684\u56de\u8c03\u5f88\u91cd\uff0cKafka\u5b98\u65b9\u6587\u6863\u5982\u4e0b\u6240\u793a\uff1a</p> <p>Note that callbacks will generally execute in the I/ O thread of the producer and so should be reasonably fast or they will delay the sending of messages from other threads. If you want to execute blocking or computationally expensive callbacks it is recommended to use your own java. util. concurrent. Executor in the callback body to parallelize processing.</p> <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u53ef\u4ee5\u901a\u8fc7\u6a2a\u5411\u518d\u6b21\u4f7f\u7528\u5f02\u6b65\u7ebf\u7a0b\uff0c\u5c06\u5f02\u6b65\u56de\u8c03\u7684\u6267\u884c\u4f4d\u7f6e\u548cI/O\u7ebf\u7a0b\u8fdb\u884c\u9694\u79bb\uff0c\u5c06\u56de\u8c03\u4efb\u52a1\u7684\u6267\u884c\u653e\u5728\u81ea\u5df1\u7ef4\u62a4\u7684\u7ebf\u7a0b\u6c60\u4e2d\u3002\u8fd9\u6837\u4fdd\u8bc1\u4e86\u6700\u6838\u5fc3\u7684\u53d1\u9001\u6d88\u606f\u4e0d\u53d7\u5f71\u54cd\u3002</p> Java<pre><code>    public void sendMsgDemo() throws Exception {\n        for(int i = 0; i &lt; 10; i++){\n            ProducerRecord&lt;String, String&gt; record = new ProducerRecord&lt;&gt;(\"test01\", i + \"\", \"hello kafka\" + i);\n            Callback callback = new Callback(){\n                @Override\n                public void onCompletion(RecordMetadata metadata, Exception exception) {\n                    String topic = metadata.topic();\n                    int partition = metadata.partition();\n                    System.out.println(\"topic:\"+topic+\" partition:\"+partition);\n                }\n            };\n            producer.send(record,callback);\n        }\n        producer.flush();\n        producer.close();\n    }\n</code></pre>"},{"location":"dataWarehouse/kafka/#consumer","title":"consumer","text":""},{"location":"dataWarehouse/kafka/#_6","title":"\u521b\u5efa","text":"<p>\u6b64\u65f6\u5c31\u662f\u6d88\u606f\u7684\u53cd\u5e8f\u5217\u5316\u662f\u5fc5\u987b\u7684\u4e86\u3002</p> Java<pre><code>    private static final KafkaConsumer&lt;String,String&gt; kafkaConsumer;\n    static {\n        Properties props = new Properties();\n        props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG,\"localhost:9092\");\n        props.put(ConsumerConfig.GROUP_ID_CONFIG,\"group1\");\n        props.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG,\"org.apache.kafka.common.serialization.StringDeserializer\");\n        props.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG,\"org.apache.kafka.common.serialization.StringDeserializer\");\n        props.put(ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG,\"true\");\n\n        kafkaConsumer = new KafkaConsumer&lt;String,String&gt;(props);\n    }\n</code></pre>"},{"location":"dataWarehouse/kafka/#_7","title":"\u6d88\u8d39","text":"<p>\u4e0b\u9762\u57fa\u4e8e\u7684\u662f<code>subscribe</code>\u65b9\u5f0f,\u53ef\u4ee5\u57fa\u4e8e\u7ed9\u5b9a\u679a\u4e3e\u503c\uff0c\u4e5f\u53ef\u4ee5\u57fa\u4e8e\u6b63\u5219\u8868\u8fbe\u5f0f\u3002</p> <p>\u6d88\u8d39\u7684\u6a21\u5f0f\u662f<code>poll</code>\u7684\u65b9\u5f0f\u3002</p> <p>\u8fd9\u4e2a\u65b9\u6cd5\u662f\u540c\u6b65\u963b\u585e\u7684\u65b9\u6cd5\u3002</p> Java<pre><code>    //subscribe\u65b9\u5f0f\n    //\u8303\u56f4\uff1a\u9759\u6001\uff1atopicList \u52a8\u6001\uff1apattern\n    @Test\n    public void subscribeDemo() throws Exception{\n        kafkaConsumer.subscribe(List.of(\"test01\"));\n//        kafkaConsumer.subscribe(Pattern.compile(\"test.*\"));\n        ConsumerRecords&lt;String, String&gt; records = kafkaConsumer.poll(Duration.ofMillis(10000));\n        records.forEach(record-&gt;{\n            System.out.println(record.topic()+\" \"+record.offset()+\" \"+record.key()+\" \"+record.value());\n        });\n        kafkaConsumer.close();\n    }\n</code></pre>"},{"location":"dataWarehouse/kafka/#_8","title":"\u6d88\u8d39\u4f4d\u7f6e\u4e0e\u624b\u52a8\u63d0\u4ea4","text":"<p>\u8fd9\u4e2a\u5f88\u91cd\u8981\uff0c\u6bd4\u5982\u73b0\u5728\u5148\u5f00\u542f\u4e00\u4e2a\u751f\u4ea7\u8005\uff0c\u751f\u4ea7100\u6761\u6570\u636e\uff0c\u7136\u540e\u505c\u6389\u3002\u518d\u5f00\u542f\u6d88\u8d39\u8005\uff0c\u6d88\u8d39\u8005\u662f\u6d88\u8d39\u4e0d\u5230\u8fd9100\u6761\u6570\u636e\u7684\u3002</p> <p>\u539f\u56e0\u5c31\u662f\u6d88\u8d39\u8005\u6bcf\u6b21\u6d88\u8d39\u5b8c\u4e4b\u540e\u4f1a\u6709\u6d88\u8d39\u504f\u79fb\u91cf\u7684\u8bb0\u5f55\u3002\u800c\u5982\u679c\u9762\u5bf9\u4e00\u4e2a\u5168\u65b0\u7684\u6570\u636e\uff0c\u662f\u6ca1\u6709\u8fd9\u4e2a\u6d88\u8d39\u8005\u7684<code>offset</code>\u8bb0\u5f55\u7684\uff0c\u8fd9\u65f6\u5019\u5c31\u9700\u8981\u6839\u636e<code>auto.offset.reset</code>\u6765\u5224\u65ad\u5c06<code>offset</code>\u91cd\u7f6e\u4e3a\u4ec0\u4e48\uff0c\u8be5\u503c\u9ed8\u8ba4\u662f<code>latest</code>\uff0c\u5c31\u662f\u9ed8\u8ba4\u4ece\u8be5\u6d88\u8d39\u8005\u8ba2\u9605\u8be5\u4e3b\u9898\u5f00\u59cb\u751f\u4ea7\u7684\u7b2c\u4e00\u6761\u6570\u636e\u5f00\u59cb\u6d88\u8d39\u3002\u53ef\u4ee5\u6839\u636e\u9700\u8981\u8bbe\u7f6e\u4e3a<code>earliest</code>\u3002</p> <p>\u800c\u5982\u679c\u8bbe\u7f6e\u4e86<code>enable.auto.commit</code>\u4e3a<code>true</code>\uff0c\u5219\u6d88\u8d39\u65f6\u4f1a\u9ed8\u8ba4<code>5s</code>\u63d0\u4ea4\u4e00\u6b21<code>offset</code>\u3002\u8fd9\u4e2a\u903b\u8f91\u662f\u653e\u5728\u4e86<code>poll</code>\u65b9\u6cd5\u91cc\u9762\u505a\u7684\uff0c\u4e5f\u5c31\u662f\u5f53\u518d\u6b21\u8bf7\u6c42\u7684\u65f6\u5019\uff0c\u63d0\u4ea4\u7684\u662f\u4e0a\u4e00\u6b21\u622a\u6b62\u7684<code>offset</code>\u3002\u95ee\u9898\u5c31\u51fa\u73b0\u5728\u8fd9\u91cc\uff0c<code>consume(\u8fd9\u91cc\u53ea\u662fpoll\u903b\u8f91)</code>\u548c<code>offset</code>\u7684\u5b9e\u9645\u63d0\u4ea4\u5e76\u4e0d\u662f<code>atomic</code>\u7684\uff0c\u8fd9\u5c31\u5fc5\u7136\u4f1a\u5bfc\u81f4\u4e0b\u9762\u7684\u60c5\u51b5\uff1a</p> <ul> <li><code>consume</code>\u505a\u4e86\uff0c\u4f46\u662f<code>offset</code>\u4e22\u4e86\u3002\u5219\u5e26\u6765\u7684\u662f\u91cd\u590d\u6d88\u8d39\u3002</li> </ul> <p>\u5982\u679c\u66f4\u8fdb\u4e00\u6b65\uff0c\u5982\u679c\u5c06\u4e1a\u52a1\u903b\u8f91\u7684\u5904\u7406\u5b8c\u6bd5\u4f5c\u4e3a\u5b9e\u9645\u7684<code>consume</code>\u903b\u8f91\uff0c\u800c\u4e0d\u662f\u7b80\u5355\u7684<code>poll</code>\u5b8c\u6bd5\u3002\u8003\u8651\u5b9e\u9645\u5904\u7406\u4e1a\u52a1\u903b\u8f91\u7684\u7ebf\u7a0b\u5f88\u91cd\uff0c\u4ea4\u7ed9\u4e86\u4e00\u4e2a\u7ebf\u7a0b\u6c60\u7ef4\u62a4\uff0c\u800c\u8fd9\u91cc\u7684<code>consumer</code>\u53ea\u8d1f\u8d23\u62c9\u53d6\u6d88\u606f\u5e76\u5b58\u50a8\u5230\u5171\u4eab\u5b58\u50a8\u4e2d(\u6bd4\u5982\u4e00\u4e2a<code>blockingQueue</code>)\u4e2d\uff0c\u8fd9\u65f6\u5019\u7684\u4e1a\u52a1\u548c\u62c9\u53d6\u7684\u4e24\u4e2a\u7ebf\u7a0b\u5b9e\u9645\u6784\u6210\u4e86\u6d88\u8d39\u8005-\u751f\u4ea7\u8005\u6a21\u5f0f\u3002\u800c\u5176\u4e2d\u7684\u5171\u4eab\u5b58\u50a8\u53ea\u662f\u4e00\u4e2a\u5185\u5b58\u96c6\u5408\uff0c\u5e76\u6ca1\u6709\u505a\u4efb\u4f55\u7684\u9ad8\u53ef\u7528\u903b\u8f91\uff0c\u8fd9\u5c31\u5bfc\u81f4\u8fd9\u5757\u7684\u903b\u8f91\u6839\u672c\u4e0d\u53ef\u9760\uff0c\u6d88\u606f\u4e22\u5931\u4e5f\u5c31\u5728\u6240\u96be\u514d\u3002\u800c\u5728<code>poll</code>\u4e4b\u540e\u7684<code>offset</code>\u63d0\u4ea4\u663e\u7136\u5c31\u662f\u4e0d\u7b26\u5408<code>consume</code>\u505a\u5b8c\u5c31\u539f\u5b50\u6027\u63d0\u4ea4<code>offset</code>\u7684\u8981\u6c42\u3002\u6240\u4ee5\u5404\u79cd\u65b9\u5f0f\u7684\u7b56\u7565\u6c38\u8fdc\u53ea\u662f\u6298\u4e2d\u6743\u8861\u4e4b\u540e\u7684\u7ed3\u679c\uff0c\u6ca1\u6709\u901a\u7528\u7684\u529e\u6cd5\u3002<code>kafka</code>\u4e0d\u53ef\u80fd\u628a\u4e1a\u52a1\u903b\u8f91\u4ec0\u4e48\u7684\u5168\u90e8\u8003\u8651\u5728\u5185\uff0c\u66b4\u9732\u7684\u7ec6\u7c92\u5ea6API\u4e5f\u6b63\u662f\u4e3a\u4e86\u5c06\u5b9e\u73b0\u8f6c\u6362\u5230\u7279\u5b9a\u7684\u4e1a\u52a1\u5b9e\u73b0\u8005\u8eab\u4e0a\u3002</p> <p>\u6240\u4ee5\u539f\u751f\u7684<code>kafka</code>\u6240\u63d0\u4f9b\u7684\u4f9d\u636e<code>poll</code>\u6765\u63d0\u4ea4<code>offset</code>\u7684\u903b\u8f91\u5e76\u4e0d\u53ef\u9760\uff0c\u8fd9\u65f6\u5019\u53ef\u4ee5\u8003\u8651\u624b\u52a8\u63d0\u4ea4\u3002</p> <p>\u624b\u52a8\u63d0\u4ea4\u7684\u65b9\u5f0f</p> <p>\u63d0\u4ea4\u7684<code>offset</code>\u5c31\u662f\u4e0b\u4e00\u6b21\u5f00\u59cb\u6d88\u8d39\u7684<code>offset</code></p> <p>\u540c\u6b65\u63d0\u4ea4</p> <ul> <li><code>commitSync</code>\uff1a\u663e\u7136\uff0c\u5c31\u662f\u540c\u6b65\u963b\u585e\u7b49\u5f85\u63d0\u4ea4\u5b8c\u6bd5\uff0c\u6216\u8005\u5982\u4e0b\u4f7f\u7528\u6307\u5b9a\u4e3b\u9898\u548c\u5206\u533a\u7c92\u5ea6\u7684\u540c\u6b65\u63d0\u4ea4(`)\u3002</li> <li><code>@Override      public void commitSync(final Map&lt;TopicPartition, OffsetAndMetadata&gt; offsets) {          commitSync(offsets, Duration.ofMillis(defaultApiTimeoutMs));      }</code></li> </ul> <p>\u5f02\u6b65\u63d0\u4ea4</p> <ul> <li><code>commitAsync</code>\uff1a\u5f00\u542f\u5f02\u6b65\u7ebf\u7a0b\u6267\u884c<code>commit</code>\u4efb\u52a1\uff0c\u5e76\u4e14\u53ef\u4ee5\u5b89\u88c5\u56de\u8c03</li> </ul> <p>\u8fd9\u91cc\u5c31\u662f\u628a\u63d0\u4ea4\u7684\u4efb\u52a1\u540c\u6837\u653e\u5230\u5f02\u6b65\u7ebf\u7a0b\u4e2d\u53bb\u505a\uff0c\u8fd9\u6837\u7684\u8bdd\u6548\u7387\u6781\u9ad8\uff0c\u4f46\u662f\u5bf9\u51c6\u786e\u6027\u7684\u4fdd\u969c\u66f4\u5c11\u4e86\u3002\u540c\u65f6\uff0c\u53ef\u4ee5\u5b89\u88c5\u5f02\u6b65\u56de\u8c03\u3002</p> <p>\u8fd8\u6709\u4e00\u79cd\u60c5\u51b5\uff1a\u8fd9\u91cc\u5982\u679c\u9700\u8981\u5728\u5916\u90e8\u7ef4\u62a4\u5b58\u50a8\u4efb\u52a1\u7684<code>offset</code>\uff0c\u6bd4\u5982\u5b58\u50a8\u5230DB\u4e2d\uff0c\u5219\u8fd9\u91cc\u5b98\u65b9\u7684API\u6587\u6863\u4e24\u79cd\u63d0\u4ea4\u65b9\u5f0f\u90fd\u6709\u5982\u4e0b\u8bf4\u660e\uff1a</p> <p>This commits offsets only to Kafka. The offsets committed using this API will be used on the first fetch after every rebalance and also on startup. As such, if you need to store offsets in anything other than Kafka, this API should not be used.</p> <p>\u8fd9\u91cc\u4f3c\u4e4e\u6ca1\u6709\u529e\u6cd5\u89e3\u51b3\uff0c\u4f46\u662f\u6211\u611f\u89c9\u901a\u8fc7<code>seek</code>\u65b9\u6cd5\u6bcf\u6b21\u5c06DB\u4e2d<code>offset</code>\u8bfb\u51fa\u6765\u4e4b\u540e\uff0c\u76f4\u63a5<code>seek</code>\u5230\u6307\u5b9a\u4f4d\u7f6e\u5373\u53ef\u3002</p>"},{"location":"dataWarehouse/kafka/#_9","title":"\u67b6\u6784\u8bbe\u8ba1","text":""},{"location":"dataWarehouse/kafka/#paxosraft","title":"Paxos\u4e0eRaft","text":""},{"location":"dataWarehouse/kafka/#paxos","title":"Paxos","text":"<p>\u6700\u7ecf\u5178\u7684\u5171\u8bc6\u7b97\u6cd5\u5f53\u7136\u662f<code>PAXOS</code>,\u800c\u6700\u7ecf\u5178\u7684\u8bba\u6587\u5f53\u7136\u662f\u8bfb\u4e0d\u61c2\u7684\uff0c\u4e0b\u9762\u662f\u76ee\u524d\u627e\u5230\u7684\u6700\u5b8c\u5907\u7684<code>paxos</code>\u8d44\u6599\uff1a</p> <p>\u6838\u5fc3\u5c31\u662f\u591a\u6570\u6d3e\u8bfb\u5199\u3002</p> <p>\u53ef\u9760\u5206\u5e03\u5f0f\u7cfb\u7edf-paxos\u7684\u76f4\u89c2\u89e3\u91ca - OpenACID Blog</p>"},{"location":"dataWarehouse/kafka/#raft","title":"Raft","text":"<p>\u80fd\u627e\u5230\u7684\u901a\u4fd7\u6613\u61c2\u7684\u6587\u7ae0\u5982\u4e0b\uff1a</p> <p>Raft\u7b97\u6cd5\u8be6\u89e3 - \u77e5\u4e4e (zhihu.com)</p> <p>Raft\u4ece\u591a\u526f\u672c\u72b6\u6001\u673a\u7684\u89d2\u5ea6\u51fa\u53d1\uff0c\u5c06\u4e00\u81f4\u6027\u95ee\u9898\u8fdb\u884c\u62c6\u5206\uff0c\u5206\u4e3a<code>leader</code>\u9009\u4e3e\uff0c\u65e5\u5fd7\u540c\u6b65\uff0c\u5b89\u5168\u6027\uff0c\u65e5\u5fd7\u538b\u7f29\uff0c\u6210\u5458\u53d8\u66f4\u7b49\u3002</p> <p>\u4e0b\u9762\u603b\u7ed3\u6700\u6838\u5fc3\u7684<code>leader\u9009\u4e3e</code>\u4ee5\u53ca\u65e5\u5fd7\u53d8\u66f4\u3002</p> <p>leader\u9009\u4e3e</p> <p>\u96c6\u7fa4\u901a\u8fc7\u5fc3\u8df3\u6765\u7ef4\u62a4\u9009\u4e3e\u7684\u89e6\u53d1\u3002\u5f53\u4e00\u4e2a<code>follower</code>\u957f\u65f6\u95f4\u6ca1\u6709\u611f\u77e5\u5230<code>leader</code>\u7684<code>heartbeat</code>\uff0c\u5219\u4f1a\u8ba4\u4e3a\u5176\u5df2\u7ecf\u6302\u6389\uff0c\u4e8e\u662f\u5f00\u542f\u4e00\u6b21\u9009\u4e3e\u3002\u9009\u4e3e\u591a\u6570\u6d3e\u4e3a<code>leader</code>\uff0c\u5e76\u4e14<code>leader</code>\u5fc5\u7136\u6709\u6700\u65b0\u7684<code>log</code>. \u4e00\u4e2a<code>leader</code>\u7edf\u6cbb\u7684\u65f6\u95f4\u79f0\u4e3a\u4e00\u4e2a<code>term</code></p> <p>\u65e5\u5fd7\u540c\u6b65</p> <p>\u5178\u578b\u7684\u5199\u591a\u8bfb\u5c11\u7684\u67b6\u6784\uff0c\u90fd\u4f1a\u4f7f\u7528<code>LSM Tree</code>\u8fdb\u884c\u5b58\u50a8\u3002\u7b2c\u4e00\u6b21\u63a5\u89e6\u5230\u8fd9\u4e2a\u8bcd\u8fd8\u662f\u5728\u6df1\u5165\u6d45\u51fa\u5b58\u50a8\u5f15\u64ce (\u8c46\u74e3) (douban.com)\u8fd9\u672c\u4e66\u4e2d\u3002\u4e0e\u4e4b\u5bf9\u5e94\u7684\u662f\u5199\u5c11\u8bfb\u591a\u7684<code>b+ tree</code>\u3002Kafka\u4e0d\u540c\u4e8e\u4f20\u7edf\u7684\u6d88\u606f\u961f\u5217\uff0c\u5b83\u4f7f\u7528\u4e86\u78c1\u76d8\u5b58\u50a8\uff0c\u5176\u6027\u80fd\u4e5f\u5f97\u76ca\u4e8e\u548c\u5185\u5b58\u5b58\u50a8\u76f8\u5dee\u65e0\u51e0\u7684\u78c1\u76d8\u987a\u5e8f\u8bfb\u5199\uff0c\u4ee5\u53ca<code>zero copy</code>\u3002</p> <p>LSM\u7684\u6838\u5fc3\u5c31\u662f\u65e5\u5fd7\u6bb5 +WAL\u9884\u5199\u65e5\u5fd7\u3002</p> <p>\u800cRaft\u4e2d\uff0c\u540c\u6837<code>leader</code>\u63a5\u6536<code>client</code>\u8bf7\u6c42\uff0c\u5c06\u65e5\u5fd7\u8fdb\u884c\u5bf9<code>follower</code>\u591a\u6570\u6d3e\u5199\u4e4b\u540e\u5e76\u786e\u4fddok\u4e4b\u540e\uff0c\u518d\u6267\u884ccommit\u3002</p> <p></p> <p><code>leader</code>\u5411\u96c6\u7fa4\u53d1\u51faRPC\u8bf7\u6c42\uff0c\u5c06\u6700\u65b0\u7684<code>log entry</code>\u5168\u90e8\u5199\u5230<code>follower</code>.</p> <p>\u96c6\u7fa4\u6574\u4f53\u7684\u65e5\u5fd7\u6982\u89c8\u5982\u4e0b\uff1a</p> <p></p> <p>Raft\u4e2d\u7684\u65e5\u5fd7\u5b58\u50a8\uff0c\u6709\u4e24\u70b9\u91cd\u8981\u6027\u8d28</p> <ul> <li>\u6a2a\u7740\u770b\uff0c\u5bf9\u4e8e\u4e00\u4e2aleader\u6216\u8005\u662f\u4e00\u4e2afollower\uff0c\u4fdd\u8bc1\u5982\u679c\u51fa\u73b0\u4e86\u4e24\u4e2alog entry\u62e5\u6709\u540c\u6837\u7684log index\u4ee5\u53catermID,\u5219\u5b83\u4eec\u5b58\u50a8\u7684\u547d\u4ee4\u662f\u76f8\u540c\u7684(\u552f\u4e00\u6027)\u3002</li> <li>\u7ad6\u7740\u770b\uff0c\u51fa\u73b0\u4e86\u4e24\u4e2alog entry\u62e5\u6709\u540c\u6837\u7684log index\u4ee5\u53catermID\uff0c\u5219\u5b83\u4eec\u4e4b\u524d\u7684\u6240\u6709log entry\u5b8c\u5168\u76f8\u540c\u3002</li> </ul> <p>\u6027\u8d281\u662f\u56e0\u4e3aleader\u5728\u4e00\u4e2aterm\u5185\u5bf9\u4e8e\u7ed9\u5b9a\u7684log index\u6700\u591a\u521b\u5efa\u4e00\u4e2alog entry\uff0c\u800c\u8be5log entry\u5728\u65e5\u5fd7\u4e2d\u76f8\u5bf9\u4f4d\u7f6e\u6c38\u8fdc\u4e0d\u53d8</p> <p>\u6027\u8d282\u662f\u56e0\u4e3a\u8fdb\u884c\u65e5\u5fd7\u590d\u5236\u7684Rpc(AppendEntries RPC)\u7684\u65f6\u5019\uff0cleader\u4f1a\u628a\u65b0\u7684log entry\u5305\u62ec\u7684\u4e0a\u4e00\u4e2alog entry\u7684log index\u548cterm\u4e00\u8d77\u53d1\u9001\uff0c\u5982\u679c\u5728follower\u4e2d\u6ca1\u6709\u76f8\u5e94log entry\uff0c\u5219\u4ed6\u4f1a\u62d2\u7edd\u65b0\u7684log entry</p> <p>\u5982\u679c\u8fdb\u884c\u4e86<code>leader</code>\u7684\u9009\u4e3e\uff0c\u65e5\u5fd7\u5206\u5e03\u53ef\u80fd\u5982\u4e0b\u6240\u793a\uff1a</p> <p></p> <p>\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u4e00\u4e2aleader\u88ab\u9009\u4e3e\u51fa\u6765\uff0c\u5176\u65e5\u5fd7\u4e0d\u4e00\u5b9a\u662f\u6700\u65b0\u7684\u3002\u4e00\u4e2afollower\u53ef\u80fd\u4f1a\u7f3a\u5c11leader\u4e2d\u7684\u4e00\u4e9blog- entry,\u4e5f\u53ef\u80fd\u6bd4\u9009\u4e3e\u51fa\u6765\u7684leader\u65e5\u5fd7\u8fd8\u591a</p> <p>\u8fd9\u65f6\u5019\uff0cleader\u91c7\u53d6\u5f3a\u5236follower\u590d\u5236\u5b83\u7684\u65e5\u5fd7\u6765\u5904\u7406\u65e5\u5fd7\u4e0d\u4e00\u81f4\uff0cfollower\u4e0a\u7684\u4e0d\u4e00\u81f4\u65e5\u5fd7\u4f1a\u88ab\u5f3a\u5236\u8986\u76d6\u3002\u5177\u4f53\u64cd\u4f5c\u662fleader\u627e\u5230followers\u6700\u957f\u5339\u914d\u524d\u7f00\uff0c\u4fdd\u7559\u4e0d\u53d8\uff0c\u5e76\u8986\u76d6\u4e4b\u540e\u7684\u4f4d\u7f6e\u4e3aleader\u4f4d\u7f6e\u7684\u5185\u5bb9\u3002</p>"},{"location":"dataWarehouse/kafka/#_10","title":"\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u8bbe\u8ba1","text":"<p>sender thread\u5b9e\u9645\u4e0a\u5e94\u8be5\u79f0\u4e3a<code>I/O thread</code></p> <p></p>"},{"location":"dataWarehouse/kafka/#_11","title":"\u751f\u4ea7\u8005","text":"<p>\u6d88\u606f\u53d1\u9001</p> <p>\u6838\u5fc3\u65b9\u6cd5\u662f\u4e3b\u7ebf\u7a0b\u8c03\u7528\u7684<code>dosend</code>\u65b9\u6cd5\u3002</p> <p>\u8be5\u65b9\u6cd5\u9996\u5148\u83b7\u53d6<code>topic</code>\u7684\u5143\u6570\u636e\u4fe1\u606f\uff0c\u7136\u540e\u5c06k-v\u5e8f\u5217\u5316\uff0c\u9009\u62e9\u53d1\u9001\u7684<code>partition</code>,\u7136\u540e\u5c06\u6d88\u606f\u53d1\u9001\u5230\u7f13\u51b2\u533a<code>accmulator</code>\uff0c\u5176\u4e2d\u4e00\u4e2a<code>batch.size</code>\u9ed8\u8ba4\u662f<code>16KB</code>\u3002\u5982\u679c\u7f13\u51b2\u533a\u6ee1\u4e86\uff0c\u5219\u5524\u9192<code>sender</code>\u7ebf\u7a0b\u5f02\u6b65\u53d1\u9001\u6d88\u606f\uff0c\u540c\u65f6\u8fd4\u56de\u4e00\u4e2a<code>Future</code></p> <p>\u800c\u6700\u4e3a\u6838\u5fc3\u7684sender\uff0c\u672c\u8d28\u4e0a\u662f\u4e00\u4e2a<code>Runnable\u5b9e\u73b0\u7c7b</code>\uff0c\u4e5f\u5c31\u662f\u4e00\u4e2aRunnable\u4efb\u52a1\uff0c\u800c\u6700\u540e\u8fd8\u662f\u9700\u8981\u4f9d\u6258\u4e8e<code>Thread</code>\u5b9e\u4f53\u6765\u8fd0\u884c\uff0c\u4e5f\u5c31\u662f\u5982\u4e0b\u6240\u793a\uff1a</p> Java<pre><code>            String ioThreadName = NETWORK_THREAD_PREFIX + \" | \" + clientId;\n            this.ioThread = new KafkaThread(ioThreadName, this.sender, true);\n</code></pre> <p>\u5176\u5b9e\u901a\u8fc7\u524d\u9762\u7684\u56de\u8c03\u6d4b\u8bd5\uff0c\u5c31\u53ef\u4ee5\u770b\u51fa\u56de\u8c03\u51fd\u6570\u7684\u6267\u884c\u4f4d\u7f6e\uff1a<code>kafka-producer-network-thread | producer-1</code>\uff0c\u4e5f\u5c31\u662f\u771f\u6b63\u7684\u8d1f\u8d23\u53d1\u9001\u6570\u636e\u7684<code>I/O</code>\u7ebf\u7a0b\u3002Kafka\u5b98\u65b9\u4e5f\u4e00\u76f4\u628a\u5b83\u53eb\u505a<code>I/O thread</code>\uff0c\u800c\u8fd9\u91cc\u7684\u548c\u96c6\u7fa4\u901a\u4fe1\u4f7f\u7528\u7684\u662f<code>JDK NIO</code>.</p> <p>\u5e94\u7b54\u673a\u5236</p> <p>\u901a\u8fc7<code>acks</code>\u53c2\u6570\u6765\u8fdb\u884c\u63a7\u5236\u3002\u6709\u4ee5\u4e0b\u4e09\u79cd\u60c5\u51b5\uff1a\u5176\u4e2d\u7684\u53c2\u6570\u5927\u5c0f\u4ee3\u8868\u7740\u9700\u8981\u5e94\u7b54\u7684broker\u7684\u6570\u91cf\u3002</p> <ul> <li>acks=0,\u7b49\u540c\u4e8e<code>fire and forget</code></li> <li>acks=1,\u7b49\u540c\u4e8e\u53ea\u9700\u8981<code>leader</code> \u8fdb\u884cWAL\u5373\u53ef\u3002</li> <li>acks=all/-1\uff0c\u7b49\u540c\u4e8e\u9700\u8981<code>leader</code>\u4e0e<code>follower</code>\u8bfb\u5199\u4e4b\u540e\u518d\u786e\u8ba4\uff0c\u540c\u6837\u4f1a\u4e22\u6570\u636e</li> </ul>"},{"location":"dataWarehouse/kafka/#_12","title":"\u6d88\u8d39\u8005","text":"<p>\u8c03\u7528\u6a21\u578b</p> <p>\u6d88\u8d39\u901a\u8fc7<code>poll</code>\u65b9\u6cd5\u8fdb\u884c\uff0c\u5185\u90e8\u8c03\u7528\u94fe\u4e3a<code>Consumer -&gt; NetworkClient -&gt; Selector -&gt; NIO selctor</code>\u540c\u6837\u5e95\u5c42\u4f7f\u7528NIO\u8fdb\u884c\u901a\u4fe1\u3002</p> <p>\u540c<code>partition</code>\u95f4\u7684\u5173\u7cfb</p> <p>\u81f3\u4e8e\u548c<code>partition</code>\u4e4b\u95f4\u7684\u5173\u7cfb\uff0c\u6838\u5fc3\u5c31\u662f\u5728\u4e00\u4e2a\u6d88\u8d39\u8005\u7ec4\u5185\uff0c\u6570\u636e\u6e90\u7684\u540c\u4e00\u4e2a<code>partition</code>\u4e0d\u80fd\u88ab\u4e24\u4e2a<code>consumer</code>\u540c\u65f6\u6d88\u8d39\uff0c\u663e\u800c\u6613\u89c1\uff0c\u662f\u56e0\u4e3a\u53ef\u80fd\u51fa\u73b0\u6d88\u8d39\u987a\u5e8f\u95ee\u9898\u3002\u800c\u4e0d\u540c\u7684\u6d88\u8d39\u8005\u7ec4\u4e4b\u95f4\u662f\u76f8\u4e92\u9694\u79bb\u4e92\u4e0d\u5f71\u54cd\u7684\u3002</p> <p><code>rebalance</code></p> <p>\u7531<code>coordinator</code>\u8d1f\u8d23\uff0c\u5177\u4f53\u65b9\u5f0f\u662f\uff1a\u5bf9\u4e8e\u8be5\u6d88\u8d39\u8005\u7ec4\u6765\u8bf4\uff0c\u5728<code>broker</code>\u4e2d\u9009\u62e9\u4e00\u4e2a<code>coordinator</code>\uff0c\u518d\u5728\u8be5\u6d88\u8d39\u8005\u7ec4\u4e2d\u9009\u62e9\u4e00\u4e2a\u4f5c\u4e3a<code>leader</code>\uff0c\u8fdb\u884c\u901a\u4fe1\u5e76\u9009\u62e9\u7279\u5b9a\u65f6\u673a\u89e6\u53d1<code>rebalance</code></p> <p>\u8d1f\u8d23\u540c\u4e00\u4e2a\u6d88\u8d39\u8005\u7ec4\u5185\u5206\u533a\u7684\u5206\u914d\uff0c\u89e6\u53d1\u65f6\u673a\u4e3a\uff1a</p> <ul> <li>\u7ec4\u6210\u5458\u53d1\u751f\u53d8\u66f4</li> <li>\u6b63\u5219\u8868\u8fbe\u5f0f\u8ba2\u9605<code>topic</code>\u5bfc\u81f4<code>topic</code>\u6570\u91cf\u53d8\u4e86</li> <li><code>topic</code>\u672c\u8eab\u53d8\u5316</li> </ul> <p>\u5206\u914d\u65b9\u5f0f\uff1a</p> <ul> <li><code>range</code>: \u5047\u8bbe\u8be5<code>consumer group</code>\u67092\u4e2a<code>consumer</code>\uff0c\u8ba2\u9605\u4e86<code>2\u4e2atopic</code>\uff0c\u5219\u5206\u522b\u9488\u5bf9\u6bcf\u4e2a<code>topic</code>\u8fdb\u884c\u5e73\u5747\u5212\u5206\uff0c\u7ad9\u5728<code>topic</code>\u7684\u89d2\u5ea6\uff0c\u6bcf\u4e2a<code>consumer</code>\u83b7\u5f97\u7684<code>range</code>\u5927\u5c0f\u7c7b\u4f3c\u3002</li> <li><code>round-robin</code>:\u5c06\u6240\u6709<code>topic</code>\u7684<code>partition</code>\u6c47\u805a\uff0c\u8f6e\u8be2\u53d1\u7ed9\u6bcf\u4e2a<code>consumer</code></li> <li><code>sticky</code>\uff1a\u5c3d\u91cf\u4fdd\u6301\u539f\u6709\u5173\u7cfb\u4e0d\u53d8</li> </ul>"},{"location":"dataWarehouse/kafka/#_13","title":"\u5197\u4f59\u5b58\u50a8\u4e0e\u4e00\u81f4\u6027","text":"<p>\u4e0b\u9762\u4e3a\u65e7\u7248\u672c\u7684<code>kafka</code></p> <p><code>kafka</code>\u662f\u4e00\u4e2aAP\u7cfb\u7edf\uff0c\u9002\u5f53\u653e\u5bbd\u4e86\u4e00\u81f4\u6027\u7684\u6761\u4ef6\u3002</p> <p>\u5197\u4f59\u5b58\u50a8\u7684\u7c7b\u522b(\u4e00\u4e2a<code>partition</code>\u53ef\u80fd\u7684\u8eab\u4efd)\u5982\u4e0b\uff1a</p> <ul> <li><code>leader</code>\uff1a\u54cd\u5e94<code>client\u8bfb\u5199\u7684\u526f\u672c</code></li> <li><code>follower</code>:\u88ab\u52a8\u63a5\u53d7<code>leader</code>\u7684\u540c\u6b65</li> <li><code>ISR</code>\u526f\u672c\uff1a<code>leader</code>\u526f\u672c\u4ee5\u53ca\u6240\u6709\u548c<code>leader\u4fdd\u6301\u540c\u6b65\u7684\u526f\u672c</code></li> </ul> <p>\u6240\u6709\u7684\u526f\u672c\u90fd\u6709\u4e24\u4e2a\u5c5e\u6027\uff1aLEO\u4ee5\u53caHW</p> <ul> <li><code>LEO</code>:<code>log end offset</code>\uff0c\u8bb0\u5f55\u4e86\u8be5\u526f\u672c\u7684<code>log</code>\u7684\u4e0b\u4e00\u6761\u6d88\u606f\u7684<code>offset</code>\u4f4d\u7f6e\u3002\u5982\u679c\u4e00\u4e2a\u6d88\u606f\u5360\u636e\u4e00\u4e2a\u4f4d\u7f6e\uff0c\u5219<code>LEO=10</code>\u8868\u793a\u8be5\u526f\u672c\u5b58\u50a8\u4e8610\u6761\u6d88\u606f\uff0c<code>offset</code>\u8303\u56f4\u4e3a0\u52309</li> <li><code>HW</code>\uff0c\u540c<code>Flink</code>\u4e2d\u7684\u6c34\u4f4d\u7ebf\u6982\u5ff5\u4e00\u81f4\uff0c\u4e0d\u8fc7\u4e00\u4e2a\u662f\u57fa\u4e8e\u65f6\u95f4\uff0c\u4e00\u4e2a\u662f\u57fa\u4e8e\u4f4d\u7f6e\u3002\u662f\u4e00\u4e2a<code>assert</code>\uff0c\u65ad\u8a00\u7eb5\u5411\u6765\u770b\u6240\u6709\u7684\u526f\u672c\u4e4b\u540e\u53ea\u4f1a\u6bd4\u8fd9\u4e2a\u4f4d\u7f6e\u5927\uff0c\u800c\u4e0d\u4f1a\u51fa\u73b0\u8fd8\u6709\u7684\u6ca1\u6709\u5230\u8fbe\u8fd9\u4e2a\u4f4d\u7f6e\u3002</li> </ul> <p>\u800c<code>consumer</code>\u6d88\u8d39\u7684\u6d88\u606f\u8303\u56f4\u5c31\u662f<code>leader</code>\u7684HW\u4ee5\u5185\u7684\u6240\u6709\u6d88\u606f\u3002</p> <p>LEO</p> <p>\u9996\u5148\u6765\u770b<code>follower-leo</code></p> <p>Kafka\u6709\u4e24\u5957<code>follower-leo</code>\uff0c\u5206\u522b\u5b58\u50a8\u5728<code>leader</code>\u7aef\uff0c\u4ee5\u53ca\u5bf9\u5e94\u7684<code>follower</code>\u7aef\u3002</p> <p>\u5728\u8be5<code>follower</code>\u7aef\u672c\u8eab\u5b58\u50a8\u7684<code>leo</code>\uff0c\u4f1a\u5728\u5176\u81ea\u5df1\u63a5\u6536\u5230<code>leader</code>\u7aef\u7ed9\u81ea\u5df1\u7684<code>log</code>\u7684\u65f6\u5019\u66f4\u65b0<code>leo</code></p> <p>\u800c\u5728<code>leader</code>\u7aef\u5b58\u50a8\u7684<code>leo</code>\uff0c\u5b83\u66f4\u65b0\u7684\u4f9d\u636e\u5c31\u662f<code>follower</code>\u7aef\u5411\u81ea\u5df1\u53d1\u9001\u8bf7\u6c42\uff0c\u5b83\u5c31\u8ba4\u4e3a\u8fd9\u4e2a<code>follower</code>\u5df2\u7ecf\u6709\u4e86\u8fd9\u4e2a<code>log</code>\uff0c\u5e76\u66f4\u65b0\u81ea\u5df1\u8fd9\u8fb9\u7ef4\u62a4\u7684\u8fd9\u4e2a<code>follower-leo</code>\u3002</p> <p>\u8fd9\u91cc\u5176\u5b9e\u7c7b\u4f3c\u4e8e\u524d\u9762\u6d88\u8d39\u8005\u90a3\u91cc\u7684\u95ee\u9898\uff0c\u7531\u4e8e\u8fc7\u7a0b\u4e0d\u662f\u539f\u5b50\u7684\uff0c\u5e76\u4e14<code>poll</code>\u4e5f\u4e0d\u662f\u771f\u6b63\u7684<code>consume</code>\u903b\u8f91\uff0c\u5219\u5fc5\u7136\u4f1a\u51fa\u95ee\u9898\u3002</p> <p>\u7136\u540e\u662f<code>leader-leo</code>\uff0c\u5b83\u7684\u66f4\u65b0\u903b\u8f91\u5f88\u7b80\u5355\uff0c\u81ea\u5df1\u5199<code>log</code>\u7684\u65f6\u5019\u5c31\u76f4\u63a5\u66f4\u65b0\u4e86\u3002</p> <p>HW</p> <p>\u9996\u5148\u662f<code>follower-hw</code>.\u5728\u66f4\u65b0\u5b8c<code>follower-leo</code>\u4e4b\u540e\uff0c\u5c06\u5176\u4e0e<code>leader-hw</code>\u5bf9\u6bd4\uff0c\u5219<code>follower-leo.min(leader-hw)</code>\u4e3a\u81ea\u8eab\u7684<code>hw</code>\u3002</p> <p>\u800c<code>leader-hw</code>\u4ee3\u8868\u7740\u6700\u7ec8\u7cfb\u7edf\u53ef\u4f9b\u6d88\u8d39\u7684\u6570\u636e\u7ebf\uff0c\u662f\u6700\u4e3a\u6838\u5fc3\u7684\u6982\u5ff5\u3002<code>leader-hw</code>\u5c31\u662f\u5728<code>leader</code>\u7aef\u6240\u7ef4\u62a4\u7684\u6240\u6709\u6709\u6548\u526f\u672c\u7684<code>leo</code>\u7684\u6700\u5c0f\u503c\uff0c\u4e5f\u5c31\u662f\u7eb5\u5411\u6765\u770b\u7684\u6700\u957f\u5339\u914d\u524d\u7f00\u3002</p> <p>\u8fd9\u91cc\u53ef\u4ee5\u770b\u5230\u51e0\u4e4e\u4e0eraft\u7684\u539f\u7406\u4e00\u81f4\u3002</p>"},{"location":"dataWarehouse/kafka/#_14","title":"\u5e42\u7b49\u6027","text":"<p>kafka\u4e2d\u5f00\u542f\u5e42\u7b49\u6027\uff1a</p> <ul> <li>enable.idempotence = true</li> <li>retries &gt; 0</li> <li>max.in.flight.requests.per.connection&lt;=5</li> <li>acks = -1/all</li> </ul> <p>\u8fd9\u91cc\u7684\u5e42\u7b49\u6027\u662f\u6307\u6570\u636e\u4e0d\u4f1a\u88ab\u91cd\u590d\u53d1\u9001(\u5355\u4e2a\u5206\u533a\u5185)\u3002</p> <p>\u5b9e\u73b0\u601d\u8def\u5f88\u7b80\u5355\uff0c\u52a0\u4e0a\u552f\u4e00\u6807\u8bc6\u5373\u53ef\uff0c\u4e5f\u5c31\u662f\u7ed9\u6bcf\u4e2a<code>producer</code>\u52a0\u4e0a<code>id</code>,\u7136\u540e\u7ed9\u6bcf\u4e2a\u6d88\u606f\u52a0\u4e0a\u81ea\u589e<code>id</code>\uff0c\u5219\u8fd9\u6837\u4e24\u8005\u7ec4\u6210\u7684\u4e8c\u5143\u7ec4\u53ef\u4ee5\u552f\u4e00\u6807\u8bc6\u6bcf\u6761\u6d88\u606f\u3002\u5982\u679c\u91cd\u8bd5\uff0c\u5219\u518d\u6b21\u53d1\u9001\u7684\u6d88\u606f\u7684\u552f\u4e00\u6807\u8bc6\u548c\u4e0a\u6b21\u7684\u4e00\u6837\uff0c\u5219\u4f1a\u88ab\u5e42\u7b49\u8fc7\u6ee4\u6389\u3002</p>"},{"location":"dataWarehouse/kafka/#_15","title":"\u6027\u80fd","text":"<p>\u6027\u80fd\u7684\u5f71\u54cd\u56e0\u7d20\uff0c\u8fd9\u91cc\u4e3b\u8981\u662f<code>append-only</code>\u4ee5\u53ca<code>zero-copy</code>\u3002</p>"},{"location":"dataWarehouse/kafka/#append-only","title":"append-only","text":"<p>\u987a\u5e8f\u5199\u7684\u901f\u5ea6\u8981\u8fdc\u5927\u4e8e\u968f\u673a\u5199\uff0c\u800c\u78c1\u76d8(\u6216\u8005SSD)\u7684\u987a\u5e8f\u5199\u67d0\u4e9b\u60c5\u51b5\u4e0b\u751a\u81f3\u53ef\u4ee5\u8fbe\u5230\u5185\u5b58\u7684\u968f\u673a\u5199\uff0c\u8fd9\u662f<code>append-only</code>\u7684\u65b9\u5f0f\u6765\u5e94\u5bf9\u5927\u91cf\u5199\u7684\u5173\u952e\u3002</p> <p>\u5173\u4e8e\u987a\u5e8f\u78c1\u76d8IO\u6bd4\u5185\u5b58\u968f\u673aIO\u5feb\u7684\u8ba8\u8bba - huxihx - \u535a\u5ba2\u56ed (cnblogs.com)</p>"},{"location":"dataWarehouse/kafka/#zero-cpoy","title":"zero-cpoy","text":"<p>\u5f7b\u5e95\u641e\u61c2\u96f6\u62f7\u8d1d\u6280\u672f( DMA\u3001PageCache) - \u77e5\u4e4e (zhihu.com)</p> <p>\u5185\u6838\u6001\u4e0e\u7528\u6237\u6001\u7684\u5207\u6362\uff0c\u672c\u8d28\u4e0a\u901a\u8fc7\u6539\u53d8CPU\u7684\u7279\u5b9a\u5bc4\u5b58\u5668\uff0c\u53ef\u4ee5\u63a7\u5236CPU\u7684\u7279\u6743\u7b49\u7ea7\uff0c\u4ece\u800c\u6267\u884c\u4e0d\u540c\u7b49\u7ea7\u7684\u6307\u4ee4\uff0c\u5e76\u4e14\u53ef\u4ee5\u63a7\u5236\u8bbf\u95ee\u7531\u64cd\u4f5c\u7cfb\u7edf\u6240\u7ef4\u62a4\u7684\u4e0d\u540c\u7684\u5185\u5b58\u533a\u57df\u4ee5\u53ca\u6570\u636e\u3002\u5173\u4e8e\u78c1\u76d8\u7684\u8bfb\u5199\uff0c\u5fc5\u987b\u662f\u7279\u6743\u6307\u4ee4\uff0c\u4ee5\u4fdd\u8bc1OS\u7684\u5b89\u5168\u3002\u4f46\u662f\u5982\u679c\u7528\u6237\u8fdb\u7a0b\u6709\u8bfb\u53d6\u8bf7\u6c42\uff0c\u90a3\u4e48\u53ef\u4ee5\u901a\u8fc7\u7cfb\u7edf\u8c03\u7528\u6765\u9677\u5165\u5185\u6838\u6001\uff0c\u6267\u884c\u6307\u5b9a\u7684\u64cd\u4f5c\u3002\u5f53\u7136\u5207\u6362\u7684\u65f6\u5019\u4f34\u968f\u7740\u4e0a\u4e0b\u6587\u5207\u6362\u3002</p> <p>\u8003\u8651\u4e00\u4e2a\u5b8c\u6574\u7684IO\u6d41\u7a0b\uff1a\u4ece\u78c1\u76d8\u8bfb\u53d6\u6570\u636e\uff0c\u7ecf\u8fc7\u7528\u6237\u5904\u7406\u4e4b\u540e\u4ece\u518d\u7f51\u5361\u53d1\u9001\u51fa\u53bb\u3002</p> <p>\u800c\u4f20\u7edf\u7684I/O\uff0c\u6570\u636e\u62f7\u8d1d\u90fd\u9700\u8981\u7531<code>cpu</code>\u6765\u505a\u3002</p> <p>4\u6b21\u5207\u6362\uff0c4\u6b21\u62f7\u8d1d(2 DMA, 2CPU)</p> <p>\u800c\u5982\u679c\u8003\u8651<code>DMA</code>\u4e4b\u540e,\u76f8\u5f53\u4e8e<code>cpu</code>\u628a\u8bfb\u5199\u8bf7\u6c42\u505a\u4e00\u4e2a\u5f02\u6b65\u4efb\u52a1\u653e\u5230<code>DMA</code>\u4e0a\uff0c\u53ef\u4ee5\u6781\u5927\u51cf\u8f7b<code>cpu</code>\u7684\u538b\u529b\u3002\u8fd9\u65f6\u5019\u4e00\u6b21\u5b8c\u6574\u7684IO\u8bf7\u6c42\u4e00\u5171\u67094\u6b21\u6570\u636e\u62f7\u8d1d\uff0c<code>DMA</code>\u4e24\u6b21\uff0c<code>cpu</code>\u4e24\u6b21\u3002\u4f46\u662f\u6d88\u8017\u4e0d\u53d8\uff0c\u53ea\u662f\u53ef\u4ee5\u5c06CPU\u538b\u529b\u51cf\u5c0f\uff0c\u8f6c\u79fb\u5230DMA\u4e0a\u3002</p> <p>\u5219\u8017\u65f6\u7684\u5730\u65b9\u5c31\u662f<code>\u7528\u6237\u6001\u4e0e\u5185\u6838\u6001\u7684\u4e0a\u4e0b\u6587\u5207\u6362</code>\u4ee5\u53ca<code>\u6570\u636e\u62f7\u8d1d</code>\u3002\u6ce8\u610f\u8fd9\u91cc\u7528\u5230\u4e86\u5185\u6838\u7f13\u51b2\u533a\uff0c\u800c\u5927\u6587\u4ef6\u4f20\u8f93\u53ef\u4ee5\u4e0d\u540c\u5185\u6838\u7f13\u51b2\u533a\uff0c\u5b83\u4e0d\u662f\u5fc5\u9700\u54c1\uff0c\u53ea\u662f\u52a0\u901f\u5de5\u5177\u3002</p> <p>mmap+write</p> <p>4\u6b21\u5207\u6362\uff0c3\u6b21\u62f7\u8d1d(2 DMA,1CPU)</p> <p>\u800c\u7528\u6237\u8fdb\u7a0b\u5982\u679c\u53ef\u4ee5\u76f4\u63a5\u64cd\u4f5c\u5185\u6838\u7f13\u51b2\u533a\u7684\u6570\u636e\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u51cf\u5c11\u6570\u636e\u7684\u62f7\u8d1d\u3002\u8fd9\u5c31\u662f<code>mmap</code>(memo map)\u7684\u601d\u8def\u3002</p> <p><code>mmap</code>\u4f1a\u76f4\u63a5\u628a\u5185\u6838\u7f13\u51b2\u533a\u7684\u6570\u636e\u5171\u4eab\u5230\u5185\u5b58\u7a7a\u95f4\uff0c\u8fd9\u6837\u53ef\u4ee5\u5148\u51cf\u5c11\u5207\u6362\u7684\u4e24\u6b21\u7684\u7528\u6237\u6001/\u5185\u6838\u6001\u5207\u6362\u7684<code>\u6570\u636e\u62f7\u8d1d</code>\uff0c\u540c\u65f6\u589e\u52a0\u4e00\u4e2a\u4ece<code>\u7f13\u51b2\u533a\u5230socket\u7f13\u51b2\u533a</code>\u7684<code>\u6570\u636e\u62f7\u8d1d</code>\uff0c\u6700\u7ec8\u51cf\u5c11\u4e861\u6b21<code>\u6570\u636e\u62f7\u8d1d</code>\u3002\u8fd9\u91cc\u8fd8\u662f\u4f1a\u4f7f\u7528DMA</p> <p>\u800c\u7cfb\u7edf\u8c03\u7528\u8fd8\u662f\u4e24\u6b21\uff0c\u4e5f\u5c31\u662f\u5185\u6838\u6001/\u7528\u6237\u6001\u5207\u6362\u8fd8\u662f4\u6b21\u3002</p> Java<pre><code>    @Test\n    public void mmapTest() throws Exception {\n        Path path = Path.of(\"F:\\\\workspace_scala\\\\miniSpark\\\\data\\\\hamlet.txt\");\n        RandomAccessFile raf = new RandomAccessFile(path.toFile(), \"rw\");\n        FileChannel channel = raf.getChannel();\n        // \u76f4\u63a5\u6620\u5c04\u5230\u5185\u5b58\uff0c\u5e76\u4e14\u662f\u5185\u6838\u6001\u7684\u76f4\u63a5\u5185\u5b58\uff0c\u4e0d\u662f\u7528\u6237\u6001\u5185\u5b58\uff0c\u5806\u5185\u5b58(HeapByteBuffer)\u3002\n        MappedByteBuffer buffer = channel.map(FileChannel.MapMode.READ_ONLY, 0, channel.size());\n    }\n</code></pre> <p>sendfile</p> <p>2\u6b21\u5207\u6362\uff0c3\u6b21\u62f7\u8d1d(2 DMA, 1CPU)</p> <p>\u548c<code>mmap + write</code>\u533a\u522b\u5c31\u662f\u4e24\u4e2a\u7cfb\u7edf\u8c03\u7528\u5408\u5e76\u3002</p> <p>zero copy</p> <p>2\u6b21\u5207\u6362\uff0c2\u6b21\u62f7\u8d1d(2DMA)</p> <p>\u8fd9\u91cc\u5728\u8fdb\u884c\u7f51\u7edc\u901a\u4fe1\u7684\u65f6\u5019\u4e0d\u518d\u662f\u5c06\u6570\u636e\u4ece<code>mmap</code>\u4f4d\u7f6e\u5199\u5230<code>socket\u7f13\u51b2\u533a</code>\uff0c\u800c\u662f\u5c06\u63cf\u8ff0\u4fe1\u606f\u53d1\u9001\u8fc7\u53bb\uff0c\u4e0d\u8017<code>cpu</code>\u3002\u6700\u540e<code>DMA</code>\u76f4\u63a5\u4ece<code>mmap</code>\u4f4d\u7f6e\u7684\u7f13\u51b2\u533a\u628a\u6570\u636e\u8bfb\u8d70\u5c31\u53ef\u4ee5\u3002\u4e5f\u5c31\u662f\u6570\u636e\u4ece\u78c1\u76d8\u8bfb\u53d6\u5230\u5185\u6838\u6001\u7f13\u51b2\u533a\u4e4b\u540e\uff0c\u59cb\u7ec8\u4f4d\u7f6e\u4e0d\u53d8\uff0c\u76f4\u5230\u6700\u540e\u76f4\u63a5\u88ab<code>DMA</code>\u53d1\u9001\u5230\u7f51\u5361\u6700\u540e\u6253\u51fa\u53bb\u3002</p> Java<pre><code>    @Test\n    public void zeroCopyTest() throws Exception {\n        Path path = Path.of(\"F:\\\\workspace_scala\\\\miniSpark\\\\data\\\\hamlet.txt\");\n        File file = path.toFile();\n        RandomAccessFile raf = new RandomAccessFile(file, \"rw\");\n        FileChannel channel = raf.getChannel();\n        SocketChannel socketChannel = SocketChannel.open(new InetSocketAddress(\"localhost\", 9999));\n        channel.transferTo(0, channel.size(), socketChannel);\n    }\n</code></pre> <p>\u7136\u540e\u53ef\u4ee5\u5728<code>port 9999</code>\u8bfb\u53d6\u53d1\u9001\u8fc7\u6765\u7684\u6570\u636e.</p> Java<pre><code>    @Test\n    public void getSocketData(){\n        try(ServerSocket serverSocket = new ServerSocket(9999)) {\n            Socket clientSocket = serverSocket.accept();\n            BufferedReader in = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));\n            String line;\n            while((line = in.readLine()) != null){\n                System.out.println(line);\n            }\n            in.close();\n            clientSocket.close();\n            System.out.println(\"\u7ed3\u675f\");\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre> <p>\u5927\u6587\u4ef6</p> <p>\u5927\u6587\u4ef6\u7684IO\u5c31\u4e0d\u4f7f\u7528\u5185\u6838\u7f13\u51b2\u533a\u4e86\uff0c\u7528\u5f02\u6b65IO\u76f4\u63a5\u4ece\u78c1\u76d8\u6587\u4ef6\u8bfb\u53d6\u5230\u7528\u6237\u7f13\u51b2\u533a\u5373\u53ef\u3002</p>"},{"location":"dataWarehouse/learn_db_from_paper/","title":"\u4ece\u8bba\u6587\u5b66\u9694\u79bb\u7ea7\u522b","text":"<p>https://www.microsoft.com/en-us/research/wp-content/uploads/2016/02/tr-95-51.pdf</p> <p>https://tidb.net/blog/765da817</p>"},{"location":"dataWarehouse/learn_db_from_paper/#_2","title":"\u6838\u5fc3\u603b\u7ed3","text":"<p>\u8fd9\u91cc\u6709\u5f88\u591a\u6df7\u4e71\u7684\u6982\u5ff5\uff0c\u7edf\u4e00\u603b\u7ed3\u5982\u4e0b\uff1a</p> <p>\u9694\u79bb\u7ea7\u522b\uff0c\u662f\u968f\u7740\u89e3\u51b3\u5e38\u89c1\u7684\u5f02\u5e38\u73b0\u8c61(\u8bfb\u5199\uff0c\u5199\u5199\u95ee\u9898)\u7684\u7a0b\u5ea6\u4f9d\u6b21\u4e0a\u5347\u7684\u3002</p> <p>\u800c\u9694\u79bb\u7ea7\u522b\u7684\u5b9e\u73b0\uff0c\u901a\u5e38\u6709<code>\u5355\u7248\u672c\u6570\u636e\u6a21\u578b</code>\u548c<code>\u591a\u7248\u672c\u6570\u636e\u6a21\u578b</code>\u4e24\u79cd\u3002</p> <ul> <li>\u5355\u7248\u672c\u6570\u636e\u6a21\u578b\uff0c\u5168\u7a0b\u901a\u8fc7\u9501\u673a\u5236\u6765\u5b9e\u73b0\uff0c\u4e5f\u5c31\u662f\u672c\u6587\u4e0a\u9762\u7684Table\u6240\u4ecb\u7ecd\u7684\uff0c\u901a\u8fc7\u89c4\u5b9a\u9501\u7684\u884c\u4e3a\u5e76\u7ec4\u5408\u8d77\u6765\uff0c\u89e3\u51b3\u8bfb\u5199 &amp; \u5199\u5199\u95ee\u9898\uff0c\u5b9e\u73b0\u4e0d\u540c\u7684\u9694\u79bb\u7ea7\u522b\u3002</li> <li>\u591a\u7248\u672c\u6570\u636e\u6a21\u578b\uff0c\u4e5f\u5c31\u662f\u5f15\u5165\u591a\u6570\u636e\u7248\u672c\u673a\u5236\uff0c\u4e5f\u5c31\u662fMVCC\u3002\u6b64\u65f6MVCC\u673a\u5236\u914d\u5408\u5176\u4ed6\u4f18\u5316\u673a\u5236\uff0c\u53ef\u4ee5\u4e00\u8d77\u89e3\u51b3\u8bfb\u5199 &amp; \u5199\u5199\u95ee\u9898\uff0c\u4ece\u800c\u5b9e\u73b0\u4e0d\u540c\u7684\u9694\u79bb\u7ea7\u522b\u3002\u9488\u5bf9\u8bfb\u5199\u95ee\u9898\uff0c\u4e5f\u5c31\u662fDirty Read\uff0cFuzzy Read\uff0c\u4ee5\u53caPhantom\uff0c\u90fd\u53ef\u4ee5\u901a\u8fc7\u53ea\u901a\u8fc7MVCC\u673a\u5236\u6765\u89e3\u51b3\uff0c\u5b83\u7684\u76ee\u7684\u5c31\u662f\u4fdd\u8bc1\u8bfb\u4e0d\u963b\u585e\u5199\uff0c\u5199\u4e0d\u963b\u585e\u8bfb(\u9488\u5bf9\u5e7b\u8bfb\u6bd4\u8f83\u7279\u6b8a\uff0c\u5b9e\u9645\u4e0a\u4e5f\u662f\u4f7f\u7528\u4e86<code>predicate Lock</code>\uff0c\u6216\u8005\u8bf4\u662f<code>gap lock</code>\u624d\u80fd\u89e3\u51b3)\u3002\u800c\u81f3\u4e8e\u5199\u5199\u95ee\u9898\uff0c\u6700\u4e3b\u8981\u5c31\u662fLost update\u95ee\u9898\uff0c\u53ef\u4ee5\u901a\u8fc7First commiter Wins\uff0c\u4ee5\u53caFirst updater wins\u6765\u89e3\u51b3\u3002\u524d\u8005\u662f\u4e50\u89c2\u9501\uff0c\u540c\u65f6\u5e94\u7528\u591a\u4e2a\u66f4\u6539\uff0c\u5728\u63d0\u4ea4\u7684\u65f6\u5019\u68c0\u6d4b\u51b2\u7a81\uff0c\u540e\u63d0\u4ea4\u7684\u76f4\u63a5abort\u3002\u4e4b\u6240\u4ee5\u4e50\u89c2\u5c31\u662f\u56e0\u4e3a\u5b83\u5047\u8bbe\u5927\u90e8\u5206\u5199\u5199\u5e76\u4e0d\u51b2\u7a81\u3002\u540e\u8005\u662f\u60b2\u89c2\u9501\uff0c\u5355\u6b21\u53ea\u80fd\u5e94\u7528\u4e00\u4e2a\u66f4\u6539\uff0c\u4e5f\u5c31\u662f\u5728\u5199\u7684\u65f6\u5019\u5c31\u76f4\u63a5\u68c0\u6d4b\u51b2\u7a81\uff0c\u4e4b\u6240\u4ee5\u60b2\u89c2\u5c31\u662f\u56e0\u4e3a\u5b83\u5047\u8bbe\u8ba4\u4e3a\u5927\u90e8\u5206\u5199\u5199\u662f\u51b2\u7a81\u7684\u3002</li> </ul> <p>\u6ce8\u610f\u8fd9\u91cc\u7684Lost update\uff0c\u5e76\u4e0d\u662fDirty Write\u3002\u540e\u8005\u6307\u7684\u662f\u4e24\u4e2a\u4e8b\u52a1\u672a\u63d0\u4ea4\u524d\u4e92\u76f8\u66f4\u65b0\u51b2\u7a81\uff0c\u800c\u524d\u8005\u6307\u7684\u662f\u540e\u63d0\u4ea4\u7684\u4e8b\u52a1\u8986\u76d6\u524d\u4e8b\u52a1\u7684\u4fee\u6539\u3002</p>"},{"location":"dataWarehouse/learn_db_from_paper/#ansi-sql-92","title":"ANSI SQL-92 \u9694\u79bb\u7ea7\u522b\u5b9a\u4e49","text":"<p>SQL-92\uff0c\u901a\u8fc7\u89e3\u51b3\u4e09\u7c7b\u73b0\u8c61\uff0c\u5b9a\u4e49\u4e86\u56db\u79cd\u9694\u79bb\u7ea7\u522b\u3002\u9694\u79bb\u7ea7\u522b\u7684\u5b9e\u73b0\u5e76\u4e0d\u9650\u5b9a\u5b9e\u73b0\u65b9\u5f0f(\u65e0\u8bba\u662f\u9501\u8fd8\u662fMVCC)</p> <p>P1 (Dirty Read): Transaction T1 modifies a data item. Another transaction T2 then reads that data item before T1 performs a COMMIT or ROLLBACK. If T1 then performs a ROLLBACK, T2 has read a data item that was never committed and so never really existed.</p> <p>\u73b0\u8c611\uff1aDirty Read\uff0c\u53c8\u79f0\u4e3a\u810f\u8bfb\u3002</p> <ul> <li>\u5bbd\u6cdb\u89e3\u91caP : w1[x]...r2[x]...\uff08(c1 or a1) ... (c2 or a2) in any order\uff09</li> <li>\u4e25\u683c\u89e3\u91caA : w1[x]...r2[x]...a1 and c2\uff08T1 \u56de\u6eda(rollback or abort)\u540e T2 \u5df2\u63d0\u4ea4\uff09</li> </ul> <p>P2 (Non-repeatable or Fuzzy Read): Transaction T1 reads a data item. Another transaction T2 then modifies or deletes that data item and commits. If T1 then attempts to reread the data item, it receives a modified value or discovers that the data item has been deleted.</p> <p>\u73b0\u8c612\uff1aFuzzy Read\uff0c\u53c8\u79f0\u4e3a\u4e0d\u53ef\u91cd\u590d\u8bfb\u3002</p> <ul> <li>\u5bbd\u6cdb\u89e3\u91caP : r1[x]...w2[x]...\uff08(c1 or a1) ... (c2 or a2) in any order\uff09</li> <li>\u4e25\u683c\u89e3\u91caA : r1[x]...w2[x]...c2...r1[x]...c1\uff08T1 \u4e24\u6b21\u8bfb\u4e4b\u95f4 T2 \u63d0\u4ea4</li> </ul> <p>P3 (Phantom): Transaction T1 reads a set of data items satisfying some \"search condition\". Transaction T2 then creates data items that satisfy T1\u2019s \"search condition\" and commits. If T1 then repeats its read with the same \"search condition\", it gets a set of data items different from the first read.</p> <p>\u73b0\u8c613\uff1aPhantom, \u53c8\u79f0\u4e3a\u5e7b\u8bfb\u3002</p> <ul> <li>\u5bbd\u6cdb\u89e3\u91caP : r1[P]...w2[y in P]...\uff08(c1 or a1) ... (c2 or a2) in any order\uff09</li> <li>\u4e25\u683c\u89e3\u91caA : r1[P]...w2[y in P]...c2...r1[P]...c1\uff08T1 \u7b2c\u4e8c\u6b21\u67e5\u8be2\u524d T2 \u63d0\u4ea4\uff09</li> </ul> <p>\u5176\u4e2dA\u8868\u793a\u4e00\u5b9a\u4f1a\u53d1\u751f\u95ee\u9898\u7684\u4e25\u683c\u60c5\u51b5\uff0c\u800cP\u8868\u793a\u53ef\u80fd\u53d1\u751f\u95ee\u9898</p> <p>\u6839\u636e\u89e3\u51b3\u7684\u73b0\u8c61\uff0c\u5b9a\u4e49\u56db\u79cd\u9694\u79bb\u7ea7\u522b\uff1a </p> <p>ANSI-SQL-92\u7684\u5b9a\u4e49\u662f\u7531\u95ee\u9898\u7684\u3002\u5b9e\u9645\u4e0a\uff0c\u53ea\u89e3\u51b3\u4e86\u8fd9\u4e09\u79cd\u95ee\u9898\uff0c\u5e76\u5230\u4e0d\u4e86\u4e32\u884c\u5316\u7684\u7ea7\u522b\u3002 \u8fd8\u9700\u8981\u989d\u5916\u89e3\u51b3\u4e00\u4e9b\u5176\u4ed6\u5f02\u5e38(A)\u3002\u5e76\u4e14\uff0c\u8fd9\u91cc\u7684P &amp; A\u5b9a\u4e49\u662f\u57fa\u4e8e<code>\u5355\u7248\u672c\u6570\u636e\u6a21\u578b</code>(\u57fa\u4e8e\u9501\u7684\u60b2\u89c2\u5e76\u53d1\u63a7\u5236)\uff0c\u800c\u5b9e\u9645\u4e0a\u8fd8\u6709\u57fa\u4e8eMVCC\uff0c\u4ee5\u53ca\u4e50\u89c2\u7684\u5e76\u53d1\u63a7\u5236(\u4e5f\u5c31\u662f<code>\u591a\u7248\u672c\u6570\u636e\u6a21\u578b</code>)\u7684\u5b9e\u73b0\u3002</p>"},{"location":"dataWarehouse/learn_db_from_paper/#_3","title":"\u57fa\u4e8e\u9501\u7684\u60b2\u89c2\u5e76\u53d1\u63a7\u5236","text":""},{"location":"dataWarehouse/learn_db_from_paper/#_4","title":"\u9501\u7684\u5206\u7c7b","text":"<p>\u6570\u636e\u5e93\u4e2d\u7684\u9501\uff0c\u5206\u4e3a\u5171\u4eab\u9501(\u8bfb\u9501)\u548c\u6392\u4ed6\u9501(\u5199\u9501)\u3002\u53ea\u6709<code>read lock &amp; read lock</code>\u662f\u4e0d\u51b2\u7a81\u7684\u3002</p> <p>\u5bf9\u4e8e\u8fd9\u4e24\u79cd\u9501\uff0c\u53c8\u90fd\u53ef\u4ee5\u5206\u4e3aPredicate lock &amp; item lock\uff0c\u4e5f\u5c31\u662f\u8c13\u8bcd\u9501\u548c\u8bb0\u5f55\u9501\u3002\u524d\u8005\u9501\u4f4f\u6ee1\u8db3\u6761\u4ef6\u7684\u6240\u6709\u8bb0\u5f55\uff0c\u4ee5\u53ca\u95f4\u9699(\u9488\u5bf9\u5e7b\u5f71\u6570\u636e)\u3002\u800c\u540e\u8005\u53ea\u662f\u9501\u5b9a\u7279\u6b8a\u8bb0\u5f55\u3002</p>"},{"location":"dataWarehouse/learn_db_from_paper/#_5","title":"\u9501\u7684\u884c\u4e3a\u89c4\u8303","text":"<p>A transaction has well-formed writes (reads) if it requests a Write (Read) lock on each data item or predicate before writing (reading) that data item, or set of data items defined by a predicate. The transaction is well-formed if it has well-formed writes and reads. A transaction has twp phase writes (reads) if it does not set a new Write (Read) lock on a data item after releasing a Write (Read) lock. A transaction exhibits two-phase locking if it does not request any new locks after releasing some lock.</p> <p>\u4e00\u4e2a\u4e8b\u52a1\u662fwell-formed\u7684\uff0c\u9700\u8981\u6ee1\u8db3\u4ee5\u4e0b\u6761\u4ef6\uff1a</p> <ul> <li>\u5199\u5165\u4e4b\u524d\u5fc5\u987b\u5148\u83b7\u53d6\u5199\u9501(Predicate lock or item lock)</li> <li>\u8bfb\u53d6\u4e4b\u524d\u5fc5\u987b\u5148\u83b7\u53d6\u8bfb\u9501(Predicate lock or item lock)</li> </ul> <p>\u4e00\u4e2a\u4e8b\u52a1\u662ftwo-phase-read/write\u7684\uff0c\u9700\u8981\u6ee1\u8db3\u4ee5\u4e0b\u6761\u4ef6\uff1a</p> <ul> <li>\u4e0d\u80fd\u5728\u5bf9\u4e00\u4e2adata item \u91ca\u653e\u4e00\u4e2a\u5199\u9501\u4e4b\u540e\u518d\u83b7\u53d6\u4e00\u4e2a\u5199\u9501</li> <li>\u4e0d\u80fd\u5728\u5bf9\u4e00\u4e2adata item \u91ca\u653e\u4e00\u4e2a\u8bfb\u9501\u4e4b\u540e\u518d\u83b7\u53d6\u4e00\u4e2a\u8bfb\u9501</li> </ul> <p>\u800c\u9501\u7684\u6301\u7eed\u65f6\u95f4\uff0c\u6709\u5982\u4e0b\u5b9a\u4e49:</p> <ul> <li>Long Duration Lock: \u9501\u88ab\u8be5\u4e8b\u52a1\u6301\u6709\uff0c\u76f4\u5230\u8be5\u4e8b\u52a1\u63d0\u4ea4\u6216\u8005\u56de\u6eda\u3002</li> <li>Short Duration Lock: \u9501\u88ab\u8be5\u4e8b\u52a1\u6301\u6709\uff0c\u8be5\u64cd\u4f5c\u5b8c\u6210\u76f4\u63a5\u91ca\u653e\u9501\u3002</li> </ul> <p>\u901a\u8fc7\u4e0a\u8ff0\u9501\u7684\u884c\u4e3a\u63cf\u8ff0\uff0c\u53ef\u4ee5\u5c06\u9501\u5b9e\u73b0\u7684\u9694\u79bb\u7ea7\u522b\u8fdb\u884c\u5982\u4e0b\u63cf\u8ff0:</p> <p></p> <p>\u8fd9\u91cc\u548cANSI-SQL-92\u6709\u4e00\u4e9b\u6838\u5fc3\u533a\u522b\uff1a</p> <ul> <li>\u7b49\u7ea7\u5212\u5206\u8fd8\u662f4\u79cd\uff0c\u4f46\u662f\u5747\u6bd4ANSI-SQL-92\u4e25\u683c</li> <li>\u9488\u5bf9Repeatable Read\uff0cASNI\u5141\u8bb8Phantom\u51fa\u73b0\uff0c\u4f46\u662fLocking\u4e0d\u5141\u8bb8\u3002</li> </ul> <p>\u5b9e\u9645\u4e0a\uff0cANSI\u7684Repeatable Read\uff0c\u5e76\u4e0d\u80fd\u963b\u6b62\u5e7b\u8bfb\u51fa\u73b0\u3002\u524d\u8005\u805a\u7126\u4e8eitem,\u800c\u540e\u8005\u805a\u7126\u4e8epredicate\u3002 \u5982\u679c\u7ad9\u5728\u662f\u5426<code>Repeatable</code>\uff0c\u5219ANSI\u7684Repeatable Read\u5b9e\u9645\u4e0a\u5e76\u4e0d\u80fd\u9632\u6b62predicate\u60c5\u51b5\u4e0b\u7684\u5e7b\u8bfb\uff0c\u540e\u8005\u5c42\u6b21\u66f4\u9ad8\uff0c\u9700\u8981\u66f4\u4e25\u683c\u7684\u63a7\u5236\u3002</p>"},{"location":"dataWarehouse/learn_db_from_paper/#_6","title":"\u7ea7\u522b\u7684\u4fee\u6b63\u4e0e\u91cd\u65b0\u5b9a\u4e49","text":"<p>\u8fd9\u91cc\u4ece<code>Dirty Write</code>\u90e8\u5206\u5f00\u59cb\u8003\u8651\u3002</p> <p>\u5b9a\u4e49<code>Dirty Write</code>\uff1aw1[x]...w2[x]...\uff08T1 \u548c T2 \u7684\u63d0\u4ea4/\u56de\u6eda\u987a\u5e8f\u4efb\u610f\uff09\uff0c\u6240\u6709\u7684\u9694\u79bb\u7ea7\u522b\u90fd\u5e94\u8be5\u7981\u6b62\u810f\u5199\u3002\u4e00\u822c\u662f\u901a\u8fc7\u9501\u673a\u5236\u6765\u9632\u6b62\u7684\u3002</p> <p>\u6b63\u786e\u7684\u9694\u79bb\u7ea7\u522b\u5e94\u8be5\u91c7\u7528P\u63cf\u8ff0\u800c\u4e0d\u662fA\u63cf\u8ff0\uff0c\u4e5f\u5c31\u662f\u5bbd\u6cdb\u800c\u4e0d\u662f\u4e25\u683c\u3002\u4fee\u6b63\u4e4b\u540e\u7684\u9694\u79bb\u7ea7\u522b\u5982\u4e0b\uff1a</p> <p></p> <p>\u8fd9\u4e2a\u65b0\u7248\u672c\u5c31\u662f\u9501\u673a\u5236\u7684\u53c8\u4e00\u79cd\u8868\u8fbe\u65b9\u5f0f\uff0c\u5b83\u4eec\u4e00\u4e00\u5bf9\u5e94\u3002</p>"},{"location":"dataWarehouse/learn_db_from_paper/#snapshot-isolation","title":"Snapshot Isolation","text":"<p>Snapshot Isolation\uff0c\u4e5f\u5c31\u662f\u5feb\u7167\u9694\u79bb\u3002\u6bcf\u4e2a\u4e8b\u52a1\u90fd\u4eceReadView\u4e2d\u83b7\u53d6\u6570\u636e\uff0c\u8fd9\u4e2aView\u662f\u67d0\u4e2a\u65f6\u95f4\u6233(Start_timestamp)\u4e4b\u524d\u7684\u5feb\u7167\u3002 \u8fd0\u884c\u5728\u5feb\u7167\u9694\u79bb\u4e0b\u7684\u4e8b\u52a1\uff0c\u8bfb\u53d6\u7684\u65f6\u5019\u4e0d\u4f1a\u53d7\u5230\u9501\u7684\u963b\u585e\uff0c\u5199\u5165\u7684\u65f6\u5019\u4e5f\u662f\u4fee\u6539\u7684\u5feb\u7167\u6570\u636e\uff0c\u4e0d\u4f1a\u7acb\u523b\u5f71\u54cd\u5176\u4ed6\u4e8b\u52a1\u3002</p> <p>\u4e00\u4e2a\u4f8b\u5b50\uff1ar1[x0=50] w1[x1=10] r2[x0=50] r2[y0=50] c2 r1[y0=50] w1[y1=90] c1</p> <p>\u91c7\u7528First-committer-wins \uff1a\u5f53T1\u51c6\u5907commit\u7684\u65f6\u5019\uff0c\u4f1a\u83b7\u5f97Commit-TimeStamp,\u8be5\u503c\u5927\u4e8e\u6240\u6709\u5df2\u7ecf\u5b58\u5728\u7684start_timestamp\uff0c\u4ee5\u53cacommit_stamp\u3002 \u5f53\u6ca1\u6709T2\u5728[T1 start, T1 Commit]\u533a\u95f4\u5185\u5199\u8fc7T1\u4e5f\u5199\u8fc7\u7684\u6570\u636e\u65f6\u5019\uff0cT1\u624d\u80fdcommit\u6210\u529f\uff0c\u5426\u5219T1\u88ababort\u3002T1 commit\u4e4b\u540e\uff0c\u5176\u66f4\u6539\u5bf9\u6240\u6709start-ts &gt; t1.commit_ts\u7684\u4e8b\u52a1\u53ef\u89c1\u3002 \u91c7\u7528\u8be5\u89c4\u5219\u7684\u6838\u5fc3\u662f\u4e3a\u4e86\u907f\u514d\u66f4\u65b0\u4e22\u5931\u3002</p> <p>\u5feb\u7167\u9694\u79bb\u5e76\u4e0d\u662f\u7b49\u4ef7\u4e8e\u5b8c\u5168\u53ef\u4e32\u884c\u5316\u7684\u6548\u679c\uff0c\u5176\u963b\u6b62\u4e86\u5e7b\u8bfb\uff0c\u4f46\u662f\u6ca1\u6709\u963b\u6b62Write Skew\u3002\u800crepeatable read\u5219\u963b\u6b62\u4e86\u5e7b\u8bfb\uff0c\u4f46\u662f\u6ca1\u6709\u963b\u6b62Write Skew\u3002 \u7531\u6b64\u53ef\u89c1\uff0c\u4e24\u8005\u662f\u540c\u4e00\u6c34\u5e73\u7684\u9694\u79bb\u3002\u4e8b\u5b9e\u4e0a\uff0cMySQL\u5982\u4eca\u5ba3\u79f0\u7684\u5b9e\u73b0\u7684RR\u7ea7\u522b\uff0c\u5176\u5b9e\u5b9e\u73b0\u4e86SI\u7ea7\u522b\u7684\u9694\u79bb\u3002</p> <p></p>"},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/","title":"\u5927\u6570\u636eSQL\u5256\u6790","text":""},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/#_1","title":"\u7f16\u8bd1\u672c\u8d28","text":""},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/#antlr","title":"ANTLR\u4e0e\u7f16\u8bd1","text":"<p>\u901a\u5e38\u610f\u4e49\u4e0a\u7684SQL\uff0c\u7b97\u662f\u4e00\u79cdDSL\uff0c\u4e5f\u5c31\u662f\u7279\u5b9a\u9886\u57df\u8bed\u8a00\uff0c\u5176\u5728\u5b8c\u5907\u6027\u4e0a\u4e0e\u901a\u7528\u8bed\u8a00\uff0c\u5982<code>Java,Scala</code></p> <p>\u7b49\u5b58\u5728\u5dee\u8ddd\uff0c\u4f46\u662f\u64c5\u957f\u7279\u5b9a\u9886\u57df\u7684\u5de5\u4f5c\u3002</p> <p>\u5b83\u7684\u6784\u5efa\u4e0e\u901a\u7528\u8bed\u8a00\u7c7b\u4f3c\uff0c\u5206\u4e0b\u9762\u4e24\u90e8\uff1a</p> <ul> <li>\u8bbe\u8ba1\u8bed\u6cd5\uff0c\u4ee5\u53ca\u8bed\u4e49\uff0c\u5b9a\u4e49DSL\u4e2d\u5177\u4f53\u5143\u7d20</li> <li>\u5b9e\u73b0\u8bcd\u6cd5\u5206\u6790\u5668<code>Lexer</code>\u4ee5\u53ca\u8bed\u6cd5\u5206\u6790\u5668<code>Parser</code>\uff0c\u5b8c\u6210\u5bf9DSL\u7684\u89e3\u6790\uff0c\u6700\u540e\u6267\u884c</li> </ul> <p>\u800c<code>ANTLR</code>\uff0c\u4e00\u79cd\u8bed\u6cd5\u5206\u6790\u5de5\u5177\uff0c\u5c31\u662f\u7528\u4e8e\u751f\u6210<code>Lexer,Parser</code>\uff0c\u4ee5\u53ca\u57fa\u4e8e\u76d1\u542c\u5668\u4ee5\u53ca\u8bbf\u95ee\u8005\u6a21\u5f0f\u7684\u6811\u904d\u5386\u5668\u3002</p>"},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/#_2","title":"\u6838\u5fc3\u6982\u5ff5","text":"<p>token</p> <p>\u4ee5\u8bfb\u4e66\u4e3a\u4f8b\u5b50\uff0c\u901a\u5e38\uff0c\u6211\u4eec\u5e76\u4e0d\u662f\u4e00\u4e2a\u5b57\u7b26\u4e00\u4e2a\u5b57\u7b26\u7684\u8bfb\u4e00\u53e5\u8bdd\uff0c\u800c\u662f\u901a\u8fc7\u5148\u5c06\u5b57\u7b26\u805a\u5408\u4e3a\u5355\u8bcd\u7c92\u5ea6\uff0c\u7136\u540e\u83b7\u53d6\u6bcf\u4e2a\u5355\u8bcd\u7684\u610f\u601d\u4ece\u800c\u7406\u89e3\u6574\u4e2a\u53e5\u5b50\u3002</p> <p>\u5c06\u5b57\u7b26\u805a\u96c6\u4e3a\u7b26\u53f7\u7c92\u5ea6(<code>token\uff1a\u8bcd\u6cd5\u7b26\u53f7</code>)\u7684\u8fc7\u7a0b\uff0c\u79f0\u4e3a\u8bcd\u6cd5\u5206\u6790\uff0c\u5176\u901a\u8fc7\u8bcd\u6cd5\u5206\u6790\u5668<code>lexer</code>\u6765\u5b9e\u73b0\uff0c\u5b83\u53ef\u4ee5\u5c06<code>token</code>\u5f52\u7c7b\uff0c\u6bd4\u5982<code>Int,Double\uff0cval</code>\u7b49\u3002</p> <p>\u4e00\u4e2a<code>token</code>\u5305\u542b\uff1a<code>token\u5bf9\u5e94\u7684\u6587\u672c\u4e0e\u5176\u5bf9\u5e94\u7684\u7c7b\u578b(ID)</code>\uff0c\u5176\u5b9e\u4e00\u4e2atype\u5c31\u662f\u4e00\u4e2a\u6574\u6570\uff0c\u800c\u5bf9\u5e94\u7684\u6587\u672c\u5c31\u662f\u4e00\u7ec4\u5b57\u7b26\u3002</p> <p>\u6bd4\u5982\u5728\u4e00\u4e2a\u5927\u6570\u636e\u5f15\u64ce\u7684<code>SqlBase.g4</code>\u6587\u4ef6\u4e2d\uff0c\u901a\u8fc7ANTLR\u751f\u6210\u7684<code>.tokens</code>\u6587\u4ef6\u4e2d\uff0c<code>JOIN=48</code>\uff0c\u5c31\u662f\u5982\u6b64\uff0c\u4e00\u822c<code>tokens</code>\u6587\u4ef6\u4e5f\u5c31\u662f\u51e0\u767e\u4e2a\u8fd9\u6837\u7684\u7b49\u5f0f\u7ec4\u6210\u3002</p> <p>lexer</p> <p>\u8bcd\u6cd5\u5206\u6790\u5668\uff0c\u5c06\u8bed\u8a00\u6587\u672c\u6c47\u805a\u4e3a\u4e00\u4e2a\u4e2a\u7684<code>token</code></p> <p>parser</p> <p>\u6839\u636e<code>.g4\u8bed\u6cd5\u6587\u4ef6</code>\uff0c\u6d88\u8d39\u89e3\u6790\u51fa\u7684<code>token</code>\u6d41\uff0c\u5c06\u5176\u8f6c\u6362\u4e3a\u4e00\u4e2a\u8bed\u6cd5\u5206\u6790\u6811(<code>parse tree</code>)\u3002\u8fd9\u4e2a\u6811\u7684\u6839\u8282\u70b9\u6c38\u8fdc\u662f<code>\u8f93\u5165\u7684token</code>\uff0c\u4ece\u800c\u8868\u8fbe\u51fa\u8fd9\u4e2a\u8bcd\u7ec4\u7684\u542b\u4e49\u3002</p> <p><code>parse tree</code>\u7684\u5b50\u6811\u6839\u8282\u70b9\u662f<code>\u8bed\u6cd5\u89c4\u5219</code>\uff0c\u800c\u53f6\u5b50\u7ed3\u70b9\u662f<code>token</code></p> <p>\u8981\u6ce8\u610f\uff0c\u6574\u4e2a\u7684\u8fc7\u7a0b\uff0c\u662f\u4e00\u4e2a<code>lazy</code>\u7684\u8fc7\u7a0b\uff0c\u4e5f\u5c31\u662f\u5982\u679c\u4e0d\u88ab\u6d88\u8d39\uff0c\u5219\u4e0d\u4f1a\u6709<code>token</code>\u751f\u6210\u3002</p> <p>listener &amp; visitor</p> <p>\u8fd9\u4e2a\u662f\u4e24\u79cd\u8bbf\u95ee\u8bed\u6cd5\u6811\u7684\u65b9\u5f0f\u3002</p> <p><code>\u8bbf\u95ee\u8005\u6a21\u5f0f</code>,\u662f\u4e00\u79cd\u5c06\u7b97\u6cd5\u4e0e\u5bf9\u8c61\u7ed3\u6784\u5206\u79bb\u7684\u6a21\u5f0f\u3002\u5bf9\u8c61\u7ed3\u6784\u4e2d\u7684\u6bcf\u4e2a\u5bf9\u8c61\uff0c\u53ef\u4ee5\u4ee5\u4e0d\u540c\u7684\u65b9\u5f0f\u8fdb\u884c\u5904\u7406\u3002\u904d\u5386\u7684\u6574\u4e2a\u5bf9\u8c61\u7ed3\u6784\uff0c\u6bcf\u4e2a\u4f4d\u7f6e\u7684\u5bf9\u8c61\u901a\u8fc7\u8c03\u7528<code>accept</code>\u65b9\u6cd5\uff0c\u5c06<code>visitor</code>\u5305\u542b\u8fdb\u6765\uff0c\u7136\u540e\u518d\u5728\u5185\u90e8\u901a\u8fc7<code>visitor::visit</code>\u65b9\u6cd5\u8fdb\u884c\u4e0d\u540c\u903b\u8f91\u7684\u5904\u7406\u3002</p>"},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/#sparksql-parser","title":"SparkSQL Parser","text":"<p>DonnyZone/ANTLR4-SqlBase: \u5265\u79bb\u7684\u6a21\u5757\uff0c\u7528\u4e8e\u67e5\u770bSpark SQL\u751f\u6210\u7684\u8bed\u6cd5\u6811 (github.com)</p> <p>\u901a\u8fc7\u5265\u79bb\u5f00\u7684<code>sparksql</code>\u7684g4\u6587\u4ef6\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7<code>ANTLR</code>\u751f\u6210<code>lexer,parser,listener,visitor\u7b49\u7c7b\u6587\u4ef6</code>\uff0c\u5e76\u4e14\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u3002</p> <p>Demo</p> <p>\u5c06\u6587\u672c\u8f6c\u5316\u4e3a<code>tokens</code>\u6d41</p> Java<pre><code>    @Test\n    public void tokenTest(){\n        String query = \"SELECT `name` FROM `user` WHERE `age`&gt;18 ORDER BY `id` DESC\" ;\n        SqlBaseLexer lexer = new SqlBaseLexer(new ANTLRInputStream(query));\n        CommonTokenStream commonTokenStream = new CommonTokenStream(lexer);\n        SqlBaseParser parser = new SqlBaseParser(commonTokenStream);\n        commonTokenStream.fill();\n        List&lt;Token&gt; tokens = commonTokenStream.getTokens();\n        tokens.forEach(token-&gt; System.out.println(token.getText()+\" \"+token.getType()));\n    }\n</code></pre> <p>\u4e0a\u8ff0\u7684\u6d4b\u8bd5\u4ee3\u7801\u7684\u6574\u4e2a\u6d41\u7a0b\uff1a</p> <ul> <li>\u7528\u6237\u8f93\u5165SQL\u6587\u672c</li> <li>\u4f7f\u7528<code>lexer</code>\uff0c\u5c06\u5176\u8f6c\u6362\u4e3a<code>token stream</code></li> <li>\u5f3a\u8feb\u5c06<code>token</code>\u52a0\u8f7d\uff0c\u56e0\u4e3a\u9ed8\u8ba4\u662f\u61d2\u52a0\u8f7d\u5c31\u770b\u4e0d\u5230\u4e86\u3002</li> <li>\u6253\u5370\u8f93\u51fa\uff0c\u7ed3\u679c\u5982\u4e0b</li> </ul> Text Only<pre><code>SELECT 8\n  241\n`name` 238\n  241\nFROM 9\n  241\n`user` 238\n  241\nWHERE 14\n  241\n`age` 238\n&gt; 122\n18 233\n  241\nORDER 21\n  241\nBY 16\n  241\n`id` 238\n  241\nDESC 40\n&lt;EOF&gt; -1\n</code></pre> <p>\u53ef\u4ee5\u63a8\u6d4b\u51fa\uff0c\u7a7a\u683c\u662f<code>241</code>\u3002\u8be5\u7ed3\u679c\u5b8c\u7f8e\u7b26\u5408<code>.tokens</code>\u6587\u4ef6\u3002</p> <p>\u4f7f\u7528\u8bbf\u95ee\u8005\u6a21\u5f0f\u8bbf\u95ee<code>parse tree</code>\uff0c\u6839\u636e\u5177\u4f53\u6846\u67b6\uff0c\u6709\u5177\u4f53\u7684<code>visitor</code>\u5b9e\u73b0\u7c7b\uff0c\u4ece\u800c\u5f97\u5230\u60f3\u8981\u7684\u4e1c\u897f\u3002</p> Java<pre><code>        String query = \"SELECT `name` FROM `user` WHERE `age`&gt;18 ORDER BY `id` DESC\" ;\n//        String query2 = \"SELECT `id`, COUNT(`name`) FROM `user` GROUP BY `id`\";\n        SqlBaseLexer lexer = new SqlBaseLexer(new ANTLRInputStream(query));\n        CommonTokenStream commonTokenStream = new CommonTokenStream(lexer);\n        SqlBaseParser parser = new SqlBaseParser(commonTokenStream);\n        MyVisitor visitor = new MyVisitor();\n        String res = visitor.visitSingleStatement(parser.singleStatement());\n        System.out.println(\"res=\"+res);\n</code></pre> <p>\u4f7f\u7528<code>idea\u63d2\u4ef6</code>\u53ef\u4ee5\u770b\u5230\u6574\u4e2a<code>parser tree</code></p> <p></p> <p>\u5bf9\u5e94\u5230<code>SparkSQL</code>\u4e2d\uff0c\u5176\u4e2d\u7684<code>ASTBuilder</code>\u5c31\u662f\u4e00\u4e2a<code>visitor</code>,\u5176\u4f1a\u6839\u636e<code>parse tree</code>\uff0c\u751f\u6210\u672a\u89e3\u6790\u7684<code>logic plan\uff08\u672a\u7ed1\u5b9a\u5177\u4f53\u6570\u636e\u7684plan\uff09</code>\uff0c\u4e5f\u5c31\u662f\u903b\u8f91\u7b97\u5b50\u6811\u3002</p> <p>\u7136\u540e\uff0c\u4f7f\u7528<code>Analyzer</code>\u5bf9\u6bcf\u4e2a\u8282\u70b9\u7ed1\u5b9a\u6570\u636e\u4fe1\u606f\uff0c\u751f\u6210<code>analyzed tree</code></p> <p><code>sparksql</code>\u7684AST\u5c31\u6709<code>logic plan</code>\u8fd9\u79cd\u5f62\u5f0f\uff0c\u7136\u540e\u8fdb\u884c\u903b\u8f91\u4f18\u5316\uff0c\u4ee5\u53ca\u7269\u7406\u4f18\u5316\u3002</p> <p></p> <p>\u5173\u4e8eAST tree\u4e0eParse tree\u7684\u533a\u522b\uff0c\u524d\u8005\u662f\u540e\u8005\u7684\u6d53\u7f29\uff0c\u8be6\u89c1\u4e0b\u6587\uff1a</p> <p>compiler construction - What's the difference between parse trees and abstract syntax trees (ASTs)? - Stack Overflow</p>"},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/#hivesql","title":"HiveSQL\u6982\u8ff0","text":"<p>\u903b\u8f91\u540c\u4e0a\uff0c\u8fd9\u91cc\u6267\u884c\u5230Hive\u81ea\u5df1\u7684AST\u6811\u8868\u8fbe\u5f62\u5f0f\u3002</p> <p>\u540c\u6837\u9700\u8981\u6267\u884c<code>analyze</code>\u7684\u90e8\u5206\uff0c\u5c06<code>AST tree</code>\u8f6c\u6362\u4e3a\u7ed1\u5b9a\u6570\u636e\u4fe1\u606f\u7684\u4e00\u4e2a<code>logic plan\uff08operator tree\uff09</code>\uff0c\u79f0\u4e3a\u903b\u8f91\u7b97\u5b50\u6811\uff0c\u4e4b\u540e\u8fdb\u884c\u903b\u8f91\u4f18\u5316\uff0c\u4ee5\u53ca\u7269\u7406\u4f18\u5316\u3002</p>"},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/#sparksql","title":"SparkSQL\u6982\u8ff0","text":"<p>Spark SQL\u5185\u6838\u5256\u6790 (\u8c46\u74e3) (douban.com)</p> <p>\u6211\u5199\u7684\u89e3\u8bfb\u5f88\u5927\u4e00\u90e8\u5206\u77e5\u8bc6\u6765\u6e90\u4e8e\u4e0a\u8ff0\u8fd9\u672c\u4e66\uff0c\u8fd9\u91cc\u6211\u5e76\u4e0d\u4f1a\u518d\u53bb\u5927\u7bc7\u5e45\u7684\u6458\u6284\uff0c\u800c\u662f\u7cbe\u7b80\u6982\u8ff0\u6240\u9700\u8981\u7684\u90e8\u5206\u3002</p> <p><code>Catalog</code>\u5c31\u662f\u96c6\u7fa4\u73af\u5883\u4e2d\u7684\u5404\u79cd\u51fd\u6570\uff0c\u4ee5\u53ca\u5143\u6570\u636e\u4fe1\u606f(\u5e93\uff0c\u8868\uff0c\u5206\u533a\uff0c\u89c6\u56fe\u7b49)\u7684\u7edf\u4e00\u62bd\u8c61\u3002\u5177\u4f53\u5305\u62ec\u4e86:</p> <ul> <li>\u5168\u5c40\u4e34\u65f6\u89c6\u56fe\u7ba1\u7406</li> <li>\u51fd\u6570\u8d44\u6e90\u52a0\u8f7d\u5668(UDF,\u4ee5\u53caHive Func\uff0c\u901a\u8fc7jar\u5305\u63d0\u4f9b\uff0c\u6240\u4ee5\u9700\u8981\u52a0\u8f7d)</li> <li>\u51fd\u6570\u6ce8\u518c\u63a5\u53e3</li> <li>\u5916\u90e8\u5b58\u50a8\u7684<code>Catalog</code>\uff0c\u6bd4\u5982<code>Hive Catalog</code>\uff0c\u6216\u8005\u57fa\u4e8e\u5185\u5b58\u7684<code>InMemory Catalog</code></li> </ul> <p><code>unresovled logic plan</code>\u5f97\u5230\u4e4b\u540e\uff0c\u9700\u8981\u8fdb\u884c\u5177\u4f53\u7684\u6570\u636e\u4fe1\u606f\u7ed1\u5b9a\uff0c\u8fd9\u91cc\u662f\u901a\u8fc7<code>SparkSQL</code>\u4e2d\u5168\u5c40\u7ef4\u62a4\u7684<code>Catalog</code>\u6765\u5b9e\u73b0\u7684\uff0c\u6570\u636e\u4fe1\u606f\u4e5f\u53ea\u6709\u4ece\u90a3\u91cc\u53ef\u4ee5\u62ff\u5230\u3002</p> <p>\u8fd9\u91cc\u7740\u91cd\u63cf\u8ff0<code>Analyze</code>\u7684\u903b\u8f91\uff0c\u56e0\u4e3a\u5177\u4f53\u7684\u4f18\u5316\u4ee5\u53ca\u7269\u7406\u8ba1\u5212<code>Hive</code>\u4e0e<code>Spark</code>\u5e76\u4e0d\u540c\uff0c\u540e\u7eed\u4f18\u5316\u5206\u6790\u7684\u65f6\u5019\u8fd8\u4f1a\u5c55\u5f00\u3002</p> <p><code>Analyzer</code>\u57fa\u4e8e\u5185\u7f6e\u76846\u7c7b\u89c4\u5219\u6765\u5bf9AST\u8282\u70b9\u8fdb\u884c6\u79cd\u5904\u7406\u903b\u8f91\uff1a</p> <ul> <li>\u66ff\u6362\u64cd\u4f5c</li> <li>\u5177\u4f53\u7b97\u5b50\u7684\u89e3\u6790</li> <li>\u5bf9UDF\u8fdb\u884c\u5904\u7406</li> <li>null\u503c\u5904\u7406</li> <li>\u5220\u9664\u65e0\u7528\u522b\u540d</li> <li>PullOutNondeterm inistic\uff1a// todo\u6ca1\u770b\u61c2\u8fd9\u4e2a</li> </ul> <p>\u7528\u6237\u53ef\u4ee5\u89c4\u5b9a\u8fed\u4ee3\u6b21\u6570\uff0c\u4e0d\u65ad\u4f7f\u7528<code>Analyzer</code>\u5bf9<code>plan</code>\u8fdb\u884c\u8f6c\u6362\u3002\u5728<code>Spark3.3.3</code>\u4e2d\uff0c\u8fed\u4ee3\u6b21\u6570\u9ed8\u8ba4<code>100</code>\u3002</p> <p>\u7136\u540e\u540e\u7eed\u5c31\u662f\u6700\u6838\u5fc3\u7684<code>optimizer</code>\uff0c\u8fd9\u91cc\u662f<code>RBO</code>\uff0c\u4e5f\u5c31\u662f<code>rule based optimize</code>\uff0cSparkSQL\u4e0ehiveSQL\u90fd\u5185\u7f6e\u4e86\u4e00\u7cfb\u5217\u89c4\u5219\uff0c\u540c\u6837\u7528\u4e8e\u5bf9\u6811\u8282\u70b9\u8fdb\u884c\u8f6c\u6362\u3002</p> <p>\u7136\u540e\u5c31\u662f\u7269\u7406\u8ba1\u5212\uff0c\u8fd9\u91cc\u7684\u8bdd\u4e00\u822c\u4f1a\u8fdb\u884c<code>CBO</code>\uff0c\u4e5f\u5c31\u662f<code>cost based optimize</code>\uff0c\u5176\u5206\u4e3a\u4e24\u4e2a\u90e8\u5206\uff0c\u5206\u522b\u662f\u4fe1\u606f\u7edf\u8ba1\uff0c\u4ee5\u53ca\u4ee3\u4ef7\u6a21\u578b\u3002\u6700\u540e\u8fdb\u8fc7\u8bc4\u4f30\uff0c\u9009\u62e9\u6700\u4f18\u7684\u8def\u5f84\u8fdb\u884c\u6267\u884c\u3002</p>"},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/#rbocbo","title":"RBO\u4e0eCBO","text":""},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/#rbo","title":"RBO","text":"<p>RBO\u901a\u5e38\u57fa\u4e8e\u4e00\u7ec4\u56fa\u5b9a\u7684\u89c4\u5219\uff0c\u7528\u4e8e\u5bf9<code>logical plan</code>\u8fdb\u884c\u8f6c\u6362\u3002</p> <p>\u5728<code>SparkSQL</code>\u4e2d\uff0c\u8fd9\u4e9b\u89c4\u5219\u88ab\u5c01\u88c5\u4e3a\u4e00\u4e2a\u4e2a\u7684<code>batch</code>\uff0c\u5728<code>Optimizer</code>\u7c7b\u4e2d\u53ef\u4ee5\u5177\u4f53\u67e5\u770b\u3002</p> <p>\u4e00\u4e9b\u5e38\u89c1\u7684<code>\u8c13\u8bcd\u4e0b\u63a8\uff0c\u5217\u88c1\u526a\uff0c\u7b80\u5355\u7b49\u4ef7\u91cd\u5199</code>\u5747\u5728RBO\u3002</p> <p>\u603b\u7ed3\u4e00\u4e0b\uff0cRBO\u6709\u5982\u4e0b\u51e0\u79cd\u65b9\u5f0f\uff1a</p> <ol> <li>\u5e38\u91cf\uff1a\u6bd4\u5982\u5e38\u91cf\u4f20\u9012\u3002</li> <li>\u8868\u8fbe\u5f0f\uff1a\u6bd4\u5982bool,if else,\u8c13\u8bcd\u4e0b\u63a8</li> <li>\u7ed3\u6784\uff0c\u6bd4\u5982\u5217\u88c1\u526a</li> </ol> <p>\u8fd9\u91cc\u7684\u8c13\u8bcd\u4e0b\u63a8\uff0c\u5206\u4e3a\u4ece\u6784\u5efa\u8868\u548c\u6d41\u5f0f\u8868\u4e24\u8005\u6765\u770b\u3002\u4e00\u822c\u5728\u6784\u5efa\u8fc7\u7a0b\u4e2d\u5c31\u5224\u65ad\u662f\u5426\u80fd\u591f\u8fdb\u884c\u8c13\u8bcd\u4e0b\u63a8\uff0c\u4e5f\u5c31\u662f\u6b64\u65f6where,on\u90fd\u53ef\u4ee5\u4f5c\u7528\u4e8e\u6784\u5efa\u8868\uff0c\u8fdb\u884c\u4e0b\u63a8\uff0c\u4f46\u662fon\u4e0d\u80fd\u4f5c\u7528\u4e8e\u6d41\u8868\u3002</p>"},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/#cbo","title":"CBO","text":"<p>\u57fa\u4e8e\u6210\u672c\u7684\u4f18\u5316\u5668 - Azure Databricks | Microsoft Learn</p> <p>\u5927\u6570\u636eSQL\u5728\u8fd9\u91cc\u7684\u5904\u7406\u4f9d\u65e7\u5f88\u521d\u671f\uff0c\u96c6\u4e2d\u4e8e\u4e00\u7ec4Join\u6392\u5e8f\u7684\u4f18\u5316\u3002\u800c\u5173\u7cfb\u578b\u6570\u636e\u5e93\u5728\u6b64\u5904\u53d1\u5c55\u5b8c\u5907\u3002</p> <p>\u8fd9\u91cc\u56e0\u4e3aRBO\u6ca1\u529e\u6cd5\u62ff\u5b9e\u9645\u6570\u636e\u91cf\u4fe1\u606f\uff0c\u6240\u4ee5\u9700\u8981\u5728\u6b64\u9636\u6bb5\u8fdb\u884c\u4fe1\u606f\u7edf\u8ba1\uff0c\u5e76\u5e94\u7528\u4e8e\u4ee3\u4ef7\u6a21\u578b\u6765\u9009\u53d6\u6700\u4f73\u8ba1\u5212\u3002</p> <p>\u4e3a\u4e86\u9632\u6b62\u7edf\u8ba1\u4fe1\u606f\u8fc7\u671f\uff0c\u53ef\u4ee5\u624b\u52a8\u6536\u96c6\u4fe1\u606f\uff0c\u5c31\u662f\u4f7f\u7528:</p> SQL<pre><code>ANALYZE TABLE table_name [ PARTITION clause ]\n    COMPUTE [ DELTA ] STATISTICS [ NOSCAN | FOR COLUMNS col1 [, ...] | FOR ALL COLUMNS ]\n\nANALYZE TABLES [ { FROM | IN } schema_name ] COMPUTE STATISTICS [ NOSCAN ]\n</code></pre> <p>\u5982\u679c\u73af\u5883\u66f4\u4e3a\u590d\u6742\uff0c\u8fd8\u53ef\u4ee5\u52a8\u6001\u91c7\u6837\uff0c\u6bd4\u5982\u4f7f\u7528<code>Sample</code>\u7b97\u5b50\uff0c\u4f46\u8fd9\u662f\u540c\u6b65\u963b\u585e\u7684\u64cd\u4f5c\uff0c\u6240\u4ee5\u8981\u4e25\u683c\u63a7\u5236\u3002</p> <p>\u53ef\u4ee5\u8bc4\u4f30\u4e00\u4e9b\u6307\u6807\uff0c\u6bd4\u5982\uff1a</p> <ul> <li>\u7f51\u7edcIO +\u78c1\u76d8IO\uff1a\u4e00\u5b57\u8282\u4eceHDFS\u8bfb\u8fc7\u6765\u7684\u65f6\u95f4\uff0c\u8868\u6709\u591a\u5c11\u5b57\u8282\u3002</li> <li>CPU\uff1a\u4e00\u4e2a\u6700\u5c0f\u64cd\u4f5c\u7684<code>CPU</code>\u6d88\u8017\u65f6\u95f4</li> </ul> <p>\u7136\u540e\u901a\u8fc7\u8ba1\u7b97\u516c\u5f0f\uff0c\u5c06\u5176\u5e94\u7528\u5728\u6bcf\u4e2a\u6811\u8282\u70b9\uff0c\u6700\u540e\u76f8\u52a0\u5219\u4e3a\u67d0\u4e2a\u8ba1\u5212\u7684<code>cost</code>\u3002</p> <p>\u4ece\u4e2d\u9009\u53d6<code>cost</code>\u6700\u5c0f\u7684<code>plan</code>\u5373\u53ef\u3002</p>"},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/#_3","title":"\u805a\u5408","text":""},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/#aggregate","title":"aggregate","text":"<p>\u8fd9\u91cc\u6267\u884c\u7684\u662f\u4e0d\u5305\u542b\u7a97\u53e3\u7684\u805a\u5408\u3002</p>"},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/#_4","title":"\u805a\u5408\u6a21\u5f0f","text":"<p><code>SparkSQL</code>\u4e2d\uff0c\u805a\u5408\u4e00\u5171\u67094\u79cd\u6a21\u5f0f</p> <p>Partial + Final</p> <p>\u5176\u4e2d<code>partial</code>\u662f\u5c40\u90e8\u805a\u5408\uff0c\u901a\u5e38\u5728<code>map</code>\u9636\u6bb5\u3002\u5c06\u8f93\u5165\u8f6c\u6362\u4e3a\u4e2d\u95f4\u805a\u5408\u7684\u7ed3\u679c\u3002</p> <p>\u800c<code>final</code>\u662f\u6700\u7ec8\u805a\u5408\uff0c\u901a\u5e38\u5728<code>reduce</code>\u9636\u6bb5\u3002\u5c06\u4e2d\u95f4\u7ed3\u679c\u6c47\u805a\uff0c\u5e76\u8fdb\u884c\u518d\u6b21\u805a\u5408\u3002</p> <p>\u901a\u5e38\u4e00\u4e9b\u4f18\u5316\u601d\u8def\u4e2d\uff0c\u5f00\u542f\u9884\u5148\u805a\u5408\uff0c\u5c31\u662f\u4f7f\u7528\u7684\u8fd9\u79cd\u6a21\u5f0f\u3002</p> <p>\u6bd4\u5982SQL\u8bed\u53e5\u5982\u4e0b:</p> SQL<pre><code>select A, sum(B) from T group by A;\n</code></pre> <p>\u5219\u5728\u4e0a\u6e38stage\u7684\u6bcf\u4e2atask\u4e2d\uff0c\u4f1a\u5148\u5c06\u6570\u636e\u8fdb\u884c\u9884\u5148\u805a\u5408\uff0c\u4e5f\u5c31\u662f<code>partial</code>\u805a\u5408\u6a21\u5f0f\u3002\u7ecf\u8fc7shuffle\u4e4b\u540e\uff0c\u5728\u4e0b\u6e38stage\uff0c\u6bcf\u4e2atask\u4f1a\u8fdb\u884c<code>final</code>\u805a\u5408\u6a21\u5f0f\u3002\u6838\u5fc3\u5c31\u662f\u51cf\u5c11shuffle IO\u5e26\u6765\u7684\u5f71\u54cd\u3002</p> <p>Complete</p> <p>\u5c31\u662f\u76f4\u63a5\u5c06\u6570\u636e\u62c9\u5230<code>reducer</code>\u9636\u6bb5\u8fdb\u884c\u805a\u5408\uff0c\u901a\u5e38\u7528\u5728\u4e0d\u652f\u6301\u5c40\u90e8\u805a\u5408\u7684\u805a\u5408\u51fd\u6570\u4e2d\u3002</p> SQL<pre><code>select A, sum(B) from T group by A;\n</code></pre> <p>\u540c\u6837\u7684SQL\uff0c\u5219\u6570\u636e\u884c\u4e0d\u4f1a\u5728\u4e0a\u6e38Stage\u7684task\u4e2d\u8fdb\u884c\u9884\u805a\u5408\uff0c\u800c\u662fShuffle\u5b8c\u6bd5\uff0c\u5728\u4e0b\u6e38Stage\u7684task\u4e2d\u8fdb\u884c\u805a\u5408\u3002</p> <p>PartialMerge</p> <p>\u8fd9\u79cd\u64cd\u4f5c\u4e3b\u8981\u7528\u5728<code>distinct</code>\u64cd\u4f5c\u4e2d\uff0c\u7528\u4e8e\u5bf9\u4e2d\u95f4\u7684\u7ed3\u679c\u7f13\u51b2\u533a\u5408\u5e76\uff0c\u4f46\u4ecd\u4e0d\u662f\u6700\u7ec8\u7ed3\u679c\u3002</p> <p>\u8fd9\u91cc\u6ce8\u610f\uff0cSpark\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5c31\u5bf9distinct\u8fdb\u884c\u4e86\u4f18\u5316\uff0c\u5e95\u5c42\u5b9e\u73b0\u5176\u5b9e\u5c31\u662f\u591a\u9636\u6bb5\u805a\u5408\u3002 \u50cfHive on MR\uff0c\u5b83\u6267\u884ccount(distinct)\u5c31\u53ea\u4f1a\u5c06\u6240\u6709\u6570\u636e\u62c9\u53d6\u5230\u4e00\u4e2aReduce Task\u4e2d\u8fdb\u884c\u53bb\u91cd\u805a\u5408\uff0c\u975e\u5e38\u4f4e\u6548\u3002\u901a\u5e38\u9700\u8981\u624b\u52a8\u8fdb\u884c\u591a\u9636\u6bb5\u805a\u5408\u3002</p> <p><code>distinct</code>\u4e00\u822c\u53c8\u4f1a\u88ab\u5206\u4e3a<code>\u5355distinct</code>\u548c<code>\u591adistinct</code>\u4e24\u79cd\u3002\u8fd9\u91cc\u53ea\u770b<code>\u5355distinct</code>\u3002</p> <p>\u6bd4\u5982\u8bed\u53e5</p> SQL<pre><code>select A, count(disctinct C) from T group by A;\nselect A, sum(B), count(disctinct C) from T group by A;\n</code></pre> <p>\u6267\u884c\u94fe\u8def\u4e00\u822c\u5982\u4e0b\uff1a Partial -&gt; PartialMerge -&gt; Partial -&gt; Final</p> <p>\u9996\u5148\uff0c\u5bf9\u4e8e\u53ea\u6709\u5355\u4e2acount(distinct a), \u6ca1\u6709\u5176\u4ed6\u805a\u5408\u51fd\u6570\u6765\u8bf4\uff0c\u6b65\u9aa4\u5982\u4e0b\uff1a</p> <ol> <li>Partial\uff0c\u4e5f\u5c31\u662f\u6309\u7167(A,C)\u4e3akey\uff0c\u8fdb\u884c\u5c40\u90e8\u805a\u5408(\u5176\u5b9e\u8fd9\u91cc\u5c31\u662f\u53bb\u91cd\u4e86\uff0c\u56e0\u4e3a\u6ca1\u6709\u805a\u5408\u5b57\u6bb5\u3002\u53ef\u4ee5\u770b\u505a\u901a\u8fc7HashMap\u8fdb\u884c\u805a\u5408\uff0c\u4f46\u662f\u53ea\u4fdd\u7559keys)\u3002</li> <li>Shuffle\uff0c\u6309\u7167(A,C)\u4e3akey</li> <li>PartialMerge\u3002\u5c06Shuffle Read\u8fc7\u6765\u7684\u6570\u636e\u518d\u6b21\u8fdb\u884c\u805a\u5408(\u5c31\u662f\u53bb\u91cd)\u3002\u6b64\u65f6\uff0c(A,C)\u5df2\u7ecf\u88ab\u5168\u5c40\u53bb\u91cd\uff0c\u7b49\u540c\u4e8eA\u7c92\u5ea6\u4e0b\u4e3aC\u7684record\u552f\u4e00\u3002</li> <li>Partial\uff0c\u6b64\u65f6A\u4e0bC\u7684\u6bcf\u79cd\uff0c\u5bf9\u5e94\u4e00\u884crecord\uff0c\u53ef\u4ee5\u5c06\u5176map\u4e3a(A,1)\u3002\u5219\u6b64\u65f6\u6309\u7167A\u7c92\u5ea6\u8fdb\u884c\u805a\u5408\uff0c\u5219\u8f93\u51fa\u4e3a(A,3)\u3002\u540e\u8005\u4e3a(A,C)\u7c92\u5ea6\u4e0b\uff0cC\u7684\u79cd\u7c7b\u3002</li> <li>Shuffle\uff0c\u6309\u7167A\u4e3akey</li> <li>Final\uff0c\u5219\u6309\u7167a\u4e3akey,\u805a\u5408\u4e4b\u540e\uff0c\u5219\u53ef\u4ee5\u77e5\u9053A\u7c92\u5ea6\u4e0bC\u7684\u79cd\u7c7b\u5168\u5c40\u4e3a\u591a\u5c11\u3002\u6700\u7ec8\u8f93\u51fa\u7ed3\u679c\u5c31\u53ef\u4ee5\u3002</li> </ol> <p>\u800c\u5982\u679c\u8fd8\u6709\u5176\u4ed6\u805a\u5408\u51fd\u6570\uff0c\u5219\u8bed\u4e49\u53d8\u4e3a\u5982\u4e0b\uff1a</p> <p>Partial -&gt; PartialMerge -&gt; Partial -&gt; Final</p> <ol> <li>(A,C) \u805a\u5408\uff0c\u5f97\u5230\u5c40\u90e8B\u503c</li> <li>shuffle,\u6309\u7167(A,C)\u4e3akey hash</li> <li>(A,C) \u805a\u5408 \uff0c\u5219\u6b64\u65f6\u5f97\u5230(A,C)\u4e3akey\u7684B\u7684\u5168\u5c40\u503c\u3002</li> <li>merge\uff0c\u6309\u7167A\u4e3akey,\u5c06C\u8fdb\u884c\u53bb\u91cd\u8ba1\u6570\uff0c\u800cB\u8fdb\u884c\u5c40\u90e8\u805a\u5408\u3002</li> <li>shuffle\uff0c\u6309\u7167A\u7c92\u5ea6\u4e3ahash key</li> <li>\u6b64\u65f6\u8fdb\u884c\u805a\u5408\uff0c\u5219\u5f97\u5230\u7684\u662f\u5168\u5c40\u6bcf\u79cdA\u4e0b\u7684C\u7684\u79cd\u7c7b\uff0c\u4ee5\u53ca\u6309\u7167A\u4e3a\u7c92\u5ea6B\u7684\u603b\u548c\uff0c\u4e5f\u5c31\u662fSQL\u7ed3\u679c\u3002</li> </ol> <p>\u5bf9\u4e00\u5f20<code>person</code>\u8868\uff0c\u6267\u884c</p> SQL<pre><code>select\n    `person`.id,\n    sum(`person`.score),\n    count(distinct `person`.handsome)\nfrom `person`\ngroup by `person`.id;\n</code></pre> <p>\u8fd9\u65f6\u5019\uff0c\u540c\u65f6\u51fa\u73b0\u4e86<code>sum</code>\u4ee5\u53ca<code>count distinct</code>\uff0c\u5219\u4f1a\u4f7f\u7528\u5230<code>partialMerge</code>\u6a21\u5f0f\u3002</p> <p>\u7269\u7406\u6267\u884c\u8ba1\u5212\u5982\u4e0b\u6240\u793a\uff1a</p> Text Only<pre><code>== Physical Plan ==\n*(3) HashAggregate(keys=[id#17], functions=[sum(cast(score#23 as double)), count(distinct handsome#22)], output=[id#17, sum(score)#34, count(DISTINCT handsome)#33L])\n+- Exchange hashpartitioning(id#17, 200), ENSURE_REQUIREMENTS, [plan_id=52]\n   +- *(2) HashAggregate(keys=[id#17], functions=[merge_sum(cast(score#23 as double)), partial_count(distinct handsome#22)], output=[id#17, sum#39, count#42L])\n      +- *(2) HashAggregate(keys=[id#17, handsome#22], functions=[merge_sum(cast(score#23 as double))], output=[id#17, handsome#22, sum#39])\n         +- Exchange hashpartitioning(id#17, handsome#22, 200), ENSURE_REQUIREMENTS, [plan_id=47]\n            +- *(1) HashAggregate(keys=[id#17, handsome#22], functions=[partial_sum(cast(score#23 as double))], output=[id#17, handsome#22, sum#39])\n               +- FileScan csv [id#17,handsome#22,score#23] Batched: false, DataFilters: [], Format: CSV, Location: InMemoryFileIndex(1 paths)[file:/F:/workspace_scala/miniSpark/data/person.csv], PartitionFilters: [], PushedFilters: [], ReadSchema: struct&lt;id:string,handsome:string,score:string&gt;\n</code></pre> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u5bf9\u4e8e<code>sum</code>\u4ee5\u53ca<code>count distinct</code>\uff0c\u5206\u522b\u4ece\u5c40\u90e8\u5230\u5168\u5c40\u8fdb\u884c\u5904\u7406\u3002\u9996\u5148\uff0c\u6ce8\u91cd<code>sum</code>\u903b\u8f91\uff0c\u7136\u540e\u5c06\u5206\u7ec4\u4e5f\u5c31\u662f<code>hash</code>\u7684\u952e\u505a\u6539\u53d8\uff0c\u518d\u6ce8\u91cd<code>count distinct</code>\u903b\u8f91\uff0c\u6700\u540e\u5168\u5c40\u505a\u4e00\u6b21\u6c47\u603b\u3002</p> <p></p>"},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/#_5","title":"\u805a\u5408\u7b97\u5b50","text":"<p>\u6709\u4e24\u79cd\u6a21\u5f0f\u7684\u805a\u5408\u7b97\u5b50\uff0c\u5206\u522b\u662f<code>SortAggregateExec</code>\u4ee5\u53ca<code>HashAggregateExec</code>.</p> <p>SortAggregateExec</p> <p>\u5177\u4f53\u5b9e\u73b0\uff0c\u5c31\u662f\u5bf9\u4e8e\u6570\u636e\u8fdb\u884c\u6309\u7167<code>group id</code>\u8fdb\u884c\u5206\u533a\uff0c\u4e4b\u540e\u5206\u533a\u5185\u6392\u5e8f\uff0c\u76f8\u540c\u952e\u76f8\u90bb\uff0c\u7136\u540e\u8fdb\u884c\u805a\u5408\u5373\u53ef\u3002</p> <p>HashAggregateExec</p> <p>\u5177\u4f53\u5b9e\u73b0\u76f8\u5bf9\u590d\u6742\uff0c\u5927\u81f4\u601d\u8def\u5c31\u662f\u5728\u5185\u5b58\u4e2d\u5f00\u4e00\u4e2a<code>Map</code>(Spark\u4e2d\u6709\u7279\u6b8a\u7684<code>AppendOnlyMap</code>)\uff0c\u7136\u540e\u4e0d\u65ad\u5bf9\u6570\u636e\u8fdb\u884c\u805a\u5408\u6216\u8005\u6dfb\u52a0\uff0c\u6ee1\u4e86\u5c31\u6ea2\u51fa\u5199\u5165\u78c1\u76d8\u3002\u6ea2\u51fa\u7684\u65f6\u5019\u9700\u8981\u6392\u5e8f\u5e76\u5408\u5e76\u3002</p>"},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/#window","title":"window","text":"<p>\u4e4b\u524d\u8df3\u8fc7\u4e86\uff0c\u73b0\u5728\u8865\u4e0a\u3002</p> <p></p> <p>\u5176\u4e0e\u666e\u901a<code>group by</code>\u7684\u5982\u4e0b\uff1a</p> <ul> <li>\u884c\u6570\u53d8\u5316\uff1a<code>group by</code>\u805a\u5408\u884c\u6570\u51cf\u5c0f\uff0c\u4f46\u662f\u5f00\u7a97\u51fd\u6570\u4e0d\u53d8\uff0c\u4e3a\u6bcf\u884c\u8f93\u51fa\u7ed3\u679c</li> <li>\u529f\u80fd\u589e\u52a0\uff1a<code>group by</code>\u9488\u5bf9\u4e00\u4e2a\u5206\u533a\u53ea\u80fd\u8f93\u51fa\u4e00\u79cd\u7ed3\u679c\uff0c\u4f46\u662f\u5f00\u7a97\u51fd\u6570\u53ef\u4ee5\u5728\u5206\u7ec4\u7a97\u53e3\u5185\u505a\u7d2f\u79ef\u7b49\u903b\u8f91\uff0c\u8f93\u51fa\u4e0d\u540c\u7ed3\u679c\u3002\u5e76\u4e14\u652f\u6301\u7684\u805a\u5408\u51fd\u6570\u66f4\u591a\u3002</li> <li>\u805a\u5408\u6a21\u5f0f\u4e0d\u540c\uff1a<code>group by</code>\u53ef\u4ee5<code>partial + final</code>\uff0c\u800c<code>window</code>\u53ea\u80fd<code>complete</code>\u6a21\u578b\u8fd0\u884c\uff0c\u805a\u5408\u903b\u8f91\u5168\u5c40\u5728<code>reducer</code>\u7aef\u3002</li> <li>\u805a\u5408\u7b97\u5b50\u4e0d\u540c\uff1a<code>group by</code>\u53ef\u4ee5<code>hash or sort</code>,\u4f46\u662f<code>window</code>\u53ea\u80fd<code>sort</code>\uff0c\u56e0\u4e3a\u7a97\u53e3\u9ed8\u8ba4\u90fd\u6709\u6392\u5e8f\u8981\u6c42\u3002</li> </ul> <p>\u5177\u4f53\u6765\u8bf4\uff0c\u6b65\u9aa4\u5982\u4e0b:</p> <ol> <li>\u5bf9\u8981\u5f00\u7a97\u7684\u8868\u7684\u6570\u636e\uff0c\u8fdb\u884cshuffle\u4e4b\u540e\uff0c\u6bcf\u4e2a\u5206\u533a\u5185\u6392\u5e8f(partition by xxx)\u3002</li> <li>\u5bf9\u6bcf\u4e2a\u6392\u5e8f\u7684\u5206\u533a\uff0c\u4e0d\u65ad\u8fdb\u884c\u5f00\u7a97\u64cd\u4f5c\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u4e0d\u65ad\u5728\u8fd9\u4e00\u4e2a\u7f13\u51b2\u6570\u7ec4(<code>RowBuffer</code>)\u4e0a\u505a\u6587\u7ae0\u3002</li> <li>\u6700\u7ec8\u5c06\u6240\u6709\u5206\u533a\u7684\u7ed3\u679c\u62fc\u5230\u4e00\u8d77\u3002</li> </ol> <p>\u800c\u5bf9\u6bcf\u4e2a\u6392\u5e8f\u7684\u5206\u533a\u64cd\u4f5c\uff0c\u5c31\u662f\u7a97\u53e3\u51fd\u6570\u8bed\u4e49\u7684\u4e8b\u60c5\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u6709\u4e24\u4e2a\u6838\u5fc3\u70b9:</p> <ul> <li>\u7a97\u53e3\u8303\u56f4</li> <li>\u7a97\u53e3\u5185\u4f5c\u7528\u51fd\u6570</li> </ul> <p>\u9996\u5148\u662f\u7a97\u53e3\u8303\u56f4(\u9488\u5bf9\u7684\u662f\u5355\u4e2a\u5206\u533a)\uff0c\u4e00\u5171\u67095\u79cd\uff1a</p> <ul> <li>\u5168\u5c40\u7a97\u53e3-unbound preceding and unbound following</li> <li>\u6269\u5f20\u7a97\u53e3-unbound preceding and xxx\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u7a97\u53e3\u968f\u7740\u884c\u7684\u904d\u5386\uff0c\u5f00\u59cb\u7aef\u4e00\u76f4\u90fd\u662f\u7b2c\u4e00\u884c\uff0csize\u662f\u5355\u8c03\u9012\u589e\u7684\u3002</li> <li>\u6536\u7f29\u7a97\u53e3-shrink Frame\uff1axxx and unbound following \uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u7a97\u53e3\u968f\u7740\u884c\u7684\u904d\u5386\uff0c\u9010\u6e10\u903c\u8fd1\u6700\u540e\u4e00\u884c\uff0csize\u5355\u8c03\u9012\u51cf\u3002</li> <li>\u79fb\u52a8\u7a97\u53e3- xx preceding and yy following\uff0c\u6bcf\u6b21\u6709\u8fdb\u6709\u51fa</li> <li>\u504f\u79fb\u7a97\u53e3- \u4e5f\u5c31\u662f\u7279\u5b9a\u504f\u79fb\u91cf\u7684\u884c\uff0c\u4e00\u5bf9\u4e00\u3002</li> </ul> <p>\u5982\u679c\u7a97\u53e3\u51fd\u6570\u548cGroup By\u4e00\u8d77\u4f1a\u600e\u4e48\u6837\uff1f</p> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u4e5f\u5c31\u662f\u5148\u8fdb\u884cgroup by \uff0c\u5c40\u90e8\u805a\u5408\u548c\u5168\u5c40\u805a\u5408\u4e4b\u540e\uff0c\u5728\u5b83\u7684\u57fa\u7840\u4e0a\uff0c\u56e0\u4e3a\u5df2\u7ecf\u5206\u597d\u533a\u4e86(\u5206\u533a\u7c92\u5ea6\u4e0d\u540c\u7684\u8bdd\u5e94\u8be5\u8fd8\u662f\u4f1a\u518dshuffle)\uff0c\u76f4\u63a5\u505awindow\u64cd\u4f5c\u5c31\u53ef\u4ee5\u3002</p> SQL<pre><code>== Physical Plan ==\nWindow [count(1) windowspecdefinition(lesson#315, specifiedwindowframe(RowFrame, unboundedpreceding$(), unboundedfollowing$())) AS count#2662L], [lesson#315]\n+- *(2) Sort [lesson#315 ASC NULLS FIRST], false, 0\n   +- *(2) HashAggregate(keys=[lesson#315], functions=[])\n      +- Exchange hashpartitioning(lesson#315, 200)\n         +- *(1) HashAggregate(keys=[lesson#315], functions=[])\n            +- *(1) FileScan json [lesson#315] Batched: false, Format: JSON, Location: InMemoryFileIndex[file:/tmp/score.json], PartitionFilters: [], PushedFilters: [], ReadSchema: struct&lt;lesson:string&gt;\n</code></pre>"},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/#olap","title":"olap","text":""},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/#_6","title":"\u4e0a\u5377\u4e0e\u4e0b\u94bb","text":"<p>Sparksql\u4e2d\uff0c\u652f\u6301<code>\u4e0a\u5377</code>\u4ee5\u53ca<code>\u4e0b\u94bb</code>\uff0c\u5e76\u6709\u7279\u5b9a\u7684\u8bed\u6cd5\u652f\u6301\u3002</p> <p>grouping sets</p> SQL<pre><code>select\n  `person`.score,\n  `person`.handsome,\n  count(`person`.id) as id_count\nfrom\n  `person`\ngroup by\n  `person`.score,\n  `person`.handsome grouping sets (\n    (`person`.score, `person`.handsome),\n    (`person`.score),\n    (`person`.handsome)\n  );\n</code></pre> <p>\u6548\u679c\u4e0a\u7b49\u540c\u4e8e\u5c06\u4e0d\u540c\u7c92\u5ea6\u7684\u805a\u5408\u64cd\u4f5c\u901a\u8fc7<code>union</code>\u62fc\u63a5\u5728\u4e00\u8d77\u3002</p> <p>cube</p> SQL<pre><code>select\n  `person`.score,\n  `person`.handsome,\n  count(`person`.id) as id_count\nfrom\n  `person`\ngroup by\n  cube(\n    `person`.score,\n    `person`.handsome\n  );\n</code></pre> <p>\u4e0b\u94bb\u64cd\u4f5c</p> <p><code>cube(a,b,c) = grouping sets((a,b,c),(a,b),(a,c),(b,c),(a),(b),(c),())</code></p> <p>rollup</p> <p>\u4e0a\u5377\u64cd\u4f5c</p> <p><code>rollup(a,b,c) = grouping sets((),(a),(a,b),(a,b,c))</code></p> <p>null\u503c</p> <p>\u6267\u884c\u4e2d\u7684<code>null</code>\u503c\uff0c\u4e0e\u5b9e\u9645\u751f\u4ea7\u4e2d\u7684<code>null</code>\u503c\uff0c\u901a\u8fc7<code>grouping</code>\u51fd\u6570\u5904\u7406\u3002\u5176\u8fd4\u56de\u7684\u7ed3\u679c\u5982\u679c\u662f1\uff0c\u5219\u4ee3\u8868\u662fgrouping\u7684null\u503c\u3002\u5982\u679c\u662f0\uff0c\u5219\u662f\u672c\u8eab\u7684null\u503c\u3002</p>"},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/#_7","title":"\u5e95\u5c42\u539f\u7406","text":"<p><code>grouping sets</code>\u5b9e\u8d28\u4e0a\u662f<code>Project + Expand + Aggregate</code>\u8282\u70b9\u7ec4\u5408\u3002</p> <p>\u4e0a\u8ff0\u7684<code>sql</code>\u7684<code>resolved logical plan</code>\u5982\u4e0b\uff1a</p> Text Only<pre><code>== Analyzed Logical Plan ==\nscore: string, final_name: string, id_count: bigint\nAggregate [score#37, handsome#38, spark_grouping_id#36L], [score#37, concat(handsome#38, -, hello) AS final_name#31, count(id#17) AS id_count#32L]\n+- Expand [[id#17, name#18, age#19, height#20, weight#21, handsome#22, score#23, score#34, handsome#35, 0], [id#17, name#18, age#19, height#20, weight#21, handsome#22, score#23, score#34, null, 1], [id#17, name#18, age#19, height#20, weight#21, handsome#22, score#23, null, handsome#35, 2]], [id#17, name#18, age#19, height#20, weight#21, handsome#22, score#23, score#37, handsome#38, spark_grouping_id#36L]\n   +- Project [id#17, name#18, age#19, height#20, weight#21, handsome#22, score#23, score#23 AS score#34, handsome#22 AS handsome#35]\n      +- SubqueryAlias person\n         +- View (`person`, [id#17,name#18,age#19,height#20,weight#21,handsome#22,score#23])\n            +- Relation [id#17,name#18,age#19,height#20,weight#21,handsome#22,score#23] csv\n</code></pre> <p>\u7ecf\u8fc7<code>optimize</code>\u4e4b\u540e\u5982\u4e0b\uff1a</p> Text Only<pre><code>Aggregate [score#37, handsome#38, spark_grouping_id#36L], [score#37, concat(handsome#38, -, hello) AS final_name#31, count(id#17) AS id_count#32L]\n+- Expand [[id#17, score#23, handsome#22, 0], [id#17, score#23, null, 1], [id#17, null, handsome#22, 2]], [id#17, score#37, handsome#38, spark_grouping_id#36L]\n   +- Project [id#17, score#23, handsome#22]\n      +- Relation [id#17,name#18,age#19,height#20,weight#21,handsome#22,score#23] csv\n</code></pre> <p>\u5176\u4e2d<code>Project</code>\u90e8\u5206\u5c31\u5bf9\u5e94\u7740\u6570\u636e\u6e90\u8fdb\u884c\u9009\u62e9\uff0c\u4ee5\u53ca\u5217\u88c1\u526a\u4e4b\u540e\u7684\u90e8\u5206\u3002</p> <p>\u800c<code>Expand</code>\u90e8\u5206\u4e2d\u7684\u7ed3\u679c\uff0c\u5c31\u662f\u6dfb\u52a0\u7279\u6b8a\u7684\u5206\u7ec4\u6807\u7b7e\u3002\u5176\u5bf9\u6bcf\u884c\u6570\u636e\u5e94\u7528\u6295\u5f71\u64cd\u4f5c\uff0c\u8f93\u51fa\u591a\u884c\u6570\u636e\u3002\u800c\u8f93\u51fa\u7684\u884c\u6570\uff0c\u5c31\u662f\u8fd9\u91cc\u989d\u5916\u6dfb\u52a0\u7684\u5206\u7ec4\u6807\u7b7e\u3002\u4e0d\u7528\u7684\u5217\u4f1a\u5c06\u5176\u4f5c\u4e3a<code>null</code>\u7136\u540e\u8fdb\u884c\u64cd\u4f5c\u3002\u91cc\u9762\u4e00\u4e2a<code>Seq[Seq[Expression]]</code>\uff0c\u5177\u4f53\u6bcf\u79cd\u5206\u7ec4\u7b56\u7565\u90fd\u5c55\u793a\u51fa\u6765\u4e86\uff0cID\u6709<code>0,1,2</code>\u3002</p> <p>\u6700\u540e\u7684<code>Aggregate</code>\u5c31\u662f\u9488\u5bf9\u6bcf\u79cd\u7ec4\u5408\uff0c\u4e5f\u5c31\u662f<code>score,handsome,[0,1,2]</code>\uff0c\u5206\u522b\u8fdb\u884c\u805a\u5408\u64cd\u4f5c\uff0c\u6700\u540e\u6c47\u603b\u3002</p> <p>\u5176\u7269\u7406\u8ba1\u5212\u5982\u4e0b\uff1a</p> <p>\u7531\u4e8e<code>count</code>\u652f\u6301\u5c40\u90e8\u805a\u5408\uff0c\u6240\u4ee5\u662f<code>partial + final</code>\uff0c\u6709\u9884\u5148\u805a\u5408\u3002</p> Text Only<pre><code>== Physical Plan ==\n*(2) HashAggregate(keys=[score#37, handsome#38, spark_grouping_id#36L], functions=[count(id#17)], output=[score#37, final_name#31, id_count#32L])\n+- Exchange hashpartitioning(score#37, handsome#38, spark_grouping_id#36L, 200), ENSURE_REQUIREMENTS, [plan_id=47]\n   +- *(1) HashAggregate(keys=[score#37, handsome#38, spark_grouping_id#36L], functions=[partial_count(id#17)], output=[score#37, handsome#38, spark_grouping_id#36L, count#50L])\n      +- *(1) Expand [[id#17, score#23, handsome#22, 0], [id#17, score#23, null, 1], [id#17, null, handsome#22, 2]], [id#17, score#37, handsome#38, spark_grouping_id#36L]\n         +- FileScan csv [id#17,handsome#22,score#23] Batched: false, DataFilters: [], Format: CSV, Location: InMemoryFileIndex(1 paths)[file:/F:/workspace_scala/miniSpark/data/person.csv], PartitionFilters: [], PushedFilters: [], ReadSchema: struct&lt;id:string,handsome:string,score:string&gt;\n</code></pre>"},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/#_8","title":"\u8fde\u63a5","text":""},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/#_9","title":"\u6267\u884c\u8ba1\u5212","text":"<p>\u6267\u884c\u4e00\u4e2a<code>person</code>\u8868\u548c<code>person_info</code>\u8868\u7684<code>join</code>\uff1a</p> SQL<pre><code>select\n  `person`.id,\n  `person`.name,\n  `person_info`.class_name\nfrom\n  `person`\n  join `person_info` on `person`.id = `person_info`.id\nwhere `person`.score &gt; 90;\n</code></pre> <p>\u6267\u884c\u8ba1\u5212\u5982\u4e0b\uff1a</p> Text Only<pre><code>== Parsed Logical Plan ==\n'Project ['person.id, 'person.name, 'person_info.class_name]\n+- 'Filter ('person.score &gt; 90)\n   +- 'Join Inner, ('person.id = 'person_info.id)\n      :- 'UnresolvedRelation [person], [], false\n      +- 'UnresolvedRelation [person_info], [], false\n\n== Analyzed Logical Plan ==\nid: string, name: string, class_name: string\nProject [id#17, name#18, class_name#70]\n+- Filter (cast(score#23 as int) &gt; 90)\n   +- Join Inner, (id#17 = id#69)\n      :- SubqueryAlias person\n      :  +- View (`person`, [id#17,name#18,age#19,height#20,weight#21,handsome#22,score#23])\n      :     +- Relation [id#17,name#18,age#19,height#20,weight#21,handsome#22,score#23] csv\n      +- SubqueryAlias person_info\n         +- View (`person_info`, [id#69,class_name#70])\n            +- Relation [id#69,class_name#70] csv\n\n== Optimized Logical Plan ==\nProject [id#17, name#18, class_name#70]\n+- Join Inner, (id#17 = id#69)\n   :- Project [id#17, name#18]\n   :  +- Filter ((isnotnull(score#23) AND (cast(score#23 as int) &gt; 90)) AND isnotnull(id#17))\n   :     +- Relation [id#17,name#18,age#19,height#20,weight#21,handsome#22,score#23] csv\n   +- Filter isnotnull(id#69)\n      +- Relation [id#69,class_name#70] csv\n\n== Physical Plan ==\n*(2) Project [id#17, name#18, class_name#70]\n+- *(2) BroadcastHashJoin [id#17], [id#69], Inner, BuildRight, false\n   :- *(2) Project [id#17, name#18]\n   :  +- *(2) Filter ((isnotnull(score#23) AND (cast(score#23 as int) &gt; 90)) AND isnotnull(id#17))\n   :     +- FileScan csv [id#17,name#18,score#23] Batched: false, DataFilters: [isnotnull(score#23), (cast(score#23 as int) &gt; 90), isnotnull(id#17)], Format: CSV, Location: InMemoryFileIndex(1 paths)[file:/F:/workspace_scala/miniSpark/data/person.csv], PartitionFilters: [], PushedFilters: [IsNotNull(score), IsNotNull(id)], ReadSchema: struct&lt;id:string,name:string,score:string&gt;\n   +- BroadcastExchange HashedRelationBroadcastMode(List(input[0, string, false]),false), [plan_id=116]\n      +- *(1) Filter isnotnull(id#69)\n         +- FileScan csv [id#69,class_name#70] Batched: false, DataFilters: [isnotnull(id#69)], Format: CSV, Location: InMemoryFileIndex(1 paths)[file:/F:/workspace_scala/miniSpark/data/person_info.csv], PartitionFilters: [], PushedFilters: [IsNotNull(id)], ReadSchema: struct&lt;id:string,class_name:string&gt;\n</code></pre> <p>\u4ece\u903b\u8f91\u8ba1\u5212\u770b\u51fa\uff0c\u4f9d\u6b21\u8fdb\u884c\u4e86\u6570\u636e\u7ed1\u5b9a\uff0c\u53d8\u4e3a<code>resolved</code>\u3002</p> <p>\u7136\u540e\u8fdb\u884c\u5217\u88c1\u526a\uff0c\u4ee5\u53ca<code>push down\uff08\u8c13\u8bcd\u4e0b\u63a8\u5230\u9760\u8fd1\u6570\u636e\u6e90\uff09</code>\u64cd\u4f5c\uff0c\u53d8\u4e3a\u4f18\u5316\u597d\u7684<code>optimized plan\u3002</code></p>"},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/#5join","title":"5\u79cdJOIN","text":""},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/#_10","title":"\u5177\u4f53\u7c7b\u578b","text":"<ul> <li>BoardcastHashJoin</li> <li>ShuffleHashJoin</li> <li>SortMergeJoin</li> <li>BoardcastNestedLoopJoin</li> <li>CartesionProductJoin</li> </ul>"},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/#_11","title":"\u5212\u5206\u4f9d\u636e","text":"<p>\u6570\u636e\u8868\u80fd\u5426\u88ab\u5e7f\u64ad</p> <p>\u9002\u7528\u4e8e<code>\u5c0f\u5c0f\u8868</code></p> <p>\u901a\u8fc7<code>spark.sql.autoBoardcastJoinThreshold</code>\u53c2\u6570\u8bbe\u7f6e\u5e7f\u64ad\u8868\u5927\u5c0f\u3002\u9ed8\u8ba4<code>10MB</code>.</p> <p>BuildSide</p> <p>\u4e5f\u5c31\u662f\u5de6\u8868/\u53f3\u8868\u80fd\u5426\u88ab\u7279\u6b8a\u4f5c\u7528\uff0c\u8fd9\u91cc\u5176\u5b9e\u662f\u770b\u5de6\u53f3\u4e24\u8fb9\u54ea\u4e2a\u662f\u6d41\u5f0f\u8868\uff0c\u54ea\u4e2a\u662f\u6784\u5efa\u8868\u3002</p> <p>\u80fd\u5426\u6784\u5efaHashMap</p> <p>\u5728\u5355\u4e2a\u5206\u533a\u4e0a\u521b\u5efa<code>HashMap</code>\u4ee5\u7528\u6765\u8fdb\u884c\u5355\u5206\u533a\u7684JOIN\uff0c\u6709\u5185\u5b58\u9650\u5236\uff0c\u6240\u4ee5\u9700\u8981\u5224\u65ad\u6761\u4ef6\u3002</p>"},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/#_12","title":"\u6784\u5efa\u7ec6\u8282","text":"<ul> <li>canboardcast  &amp;canBuild=&gt; BoardcastHashJoin</li> <li>canbuildLocalHashMap &amp; \u65e0\u6392\u5e8f &amp; canBuild  &amp; muchsmaller=&gt; ShuffleHashJoin</li> <li>\u8981\u6392\u5e8f || \u975e\u7b49\u503cJoin =&gt; sortMergeJoin</li> <li>\u7b1b\u5361\u5c14\u79ef =&gt; ca......</li> <li>\u6700\u540e\uff1aBoardcastLoopJoin</li> </ul> <p>\u6d41\u5f0f\u8868\u548c\u6784\u5efa\u8868</p> <p>SparkSQL\u5305\u62ec\u5176\u4ed6\u5927\u6570\u636eSQL\u5f88\u591a\u90fd\u9075\u5faa\u8fd9\u6837\u4e00\u4e2a\u539f\u5219\uff0c\u5c31\u662f\u5c06<code>A join B</code>\u7684\u4e24\u4e2a\u8868\u533a\u5206\u5f00\u6765\u3002</p> <p><code>\u6d41\u5f0f\u8868</code>:\u62ff\u5230\u7684\u662f<code>streaming iter</code>\uff0c\u662f\u904d\u5386\u6bcf\u6761\u6570\u636e</p> <p><code>\u6784\u5efa\u8868</code>:\u62ff\u5230\u7684\u662f<code>build iter</code>\uff0c\u662f\u6839\u636e<code>key</code>\u627e\u5230\u5bf9\u5e94\u7684\u6570\u636e</p> <p>\u5219\u5982\u679c<code>build table</code>\u5728\u53f3\u4fa7\uff0c\u5c31\u6210\u4e3a\u8fd9\u4e2aJoin\u662f<code>build right</code>\u3002</p> <p>\u5404\u79cdJoin\u7684build\u89c4\u5b9a</p> <p><code>BuildRight</code>:<code>left join,left semi join,inner join</code></p> <p><code>BuildLeft</code>\uff1a<code>right join, right semi join,inner join</code></p>"},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/#_13","title":"\u6267\u884c\u673a\u5236","text":"<p>BroadcastHashJoin</p> <p>\u6570\u4ed3\u4e2d\u7684\u8868\u4e00\u822c\u5206\u4e3a\u4e8b\u5b9e\u8868\u4ee5\u53ca\u7ef4\u5ea6\u8868\uff0c\u800c\u5bf9\u5e94\u7684\u5c31\u662f\u5927\u8868\u548c\u5c0f\u5c0f\u8868\u3002</p> <p>\u4e3a\u4e86\u907f\u514d<code>shuffle</code>\uff0c\u5219\u53ef\u4ee5\u9009\u62e9\u7531<code>Driver</code>\u6536\u96c6\u5e76\u5e7f\u64ad\u5c0f\u5c0f\u8868(<code>build table</code>)\uff0c\u5219\u5927\u8868\u7684\u5206\u533a\u6570\u636e\u53ef\u4ee5\u5728\u672c\u5730\u8fdb\u884c<code>join</code>.</p> <p>\u5047\u8bbesql\u5982\u4e0b\uff1a</p> SQL<pre><code>select\n   /*+ BROADCASTJOIN(person_info) */\n  `person`.id,\n  `person`.name,\n  `person_info`.class_name\nfrom\n  `person`\n  left join `person_info` on `person`.id = `person_info`.id\nwhere `person`.score &gt; 90;\n</code></pre> <p>\u5219\u7269\u7406\u6267\u884c\u8ba1\u5212\u5982\u4e0b\uff1a</p> Text Only<pre><code>== Physical Plan ==\n*(2) Project [id#17, name#18, class_name#70]\n+- *(2) BroadcastHashJoin [id#17], [id#69], LeftOuter, BuildRight, false\n   :- *(2) Project [id#17, name#18]\n   :  +- *(2) Filter (isnotnull(score#23) AND (cast(score#23 as int) &gt; 90))\n   :     +- FileScan csv [id#17,name#18,score#23] Batched: false, DataFilters: [isnotnull(score#23), (cast(score#23 as int) &gt; 90)], Format: CSV, Location: InMemoryFileIndex(1 paths)[file:/F:/workspace_scala/miniSpark/data/person.csv], PartitionFilters: [], PushedFilters: [IsNotNull(score)], ReadSchema: struct&lt;id:string,name:string,score:string&gt;\n   +- BroadcastExchange HashedRelationBroadcastMode(List(input[0, string, false]),false), [plan_id=116]\n      +- *(1) Filter isnotnull(id#69)\n         +- FileScan csv [id#69,class_name#70] Batched: false, DataFilters: [isnotnull(id#69)], Format: CSV, Location: InMemoryFileIndex(1 paths)[file:/F:/workspace_scala/miniSpark/data/person_info.csv], PartitionFilters: [], PushedFilters: [IsNotNull(id)], ReadSchema: struct&lt;id:string,class_name:string&gt;\n</code></pre> <p>\u53ef\u4ee5\u770b\u5230\u662f\u5c06\u53f3\u8868\u5e7f\u64ad\u7684\uff0c\u8fdb\u884c\u4e86Exchange\uff0c\u7136\u540e\u5c06\u4e24\u8005\u8fdb\u884chash join\u3002</p> <p>ShuffleHashJoin</p> <p>\u6784\u5efa\u6761\u4ef6\u6bd4\u8f83\u4e25\u82db\u3002\u9700\u8981<code>canBuildHashMap</code> &amp; \u6709\u660e\u663e\u6570\u636e\u91cf\u5dee(\u6bd4\u503c&gt;=3) &amp; \u4e0d\u80fd\u88ab<code>ShuffleSortMergeJoin\u62a2\u5148</code>\u3002</p> <p>\u7ecf\u8fc7\u8003\u8651\uff0c\u76f4\u63a5\u52a0\u5165<code>Hint</code>\u5f3a\u5236\u8fdb\u884c<code>ShuffleHashJoin</code>,\u4f46\u662f\u8fd9\u91cc<code>buildSide</code>\u4e0d\u5f3a\u5236\u662f\u67d0\u4e2a\u8868\uff0c\u8ba9Spark\u81ea\u5df1\u9009\uff0c\u7136\u540e\u6784\u5efa<code>HashMap</code>\u3002</p> <p>\u8fd9\u91cc\u5df2\u7ecf\u5173\u6389\u4e86<code>AQE</code></p> SQL<pre><code>select\n   /*+SHUFFLE_HASH(person,person_info)*/\n  `person`.id,\n  `person`.name,\n  `person_info`.class_name\nfrom\n  `person`\n  left join `person_info` on `person`.id = `person_info`.id\nwhere `person`.score &gt; 90;\n</code></pre> <p>\u7269\u7406\u6267\u884c\u8ba1\u5212\u5982\u4e0b\uff1a</p> Text Only<pre><code>== Physical Plan ==\n*(3) Project [id#17, name#18, class_name#70]\n+- *(3) ShuffledHashJoin [id#17], [id#69], LeftOuter, BuildRight\n   :- Exchange hashpartitioning(id#17, 200), ENSURE_REQUIREMENTS, [plan_id=116]\n   :  +- *(1) Project [id#17, name#18]\n   :     +- *(1) Filter (isnotnull(score#23) AND (cast(score#23 as int) &gt; 90))\n   :        +- FileScan csv [id#17,name#18,score#23] Batched: false, DataFilters: [isnotnull(score#23), (cast(score#23 as int) &gt; 90)], Format: CSV, Location: InMemoryFileIndex(1 paths)[file:/F:/workspace_scala/miniSpark/data/person.csv], PartitionFilters: [], PushedFilters: [IsNotNull(score)], ReadSchema: struct&lt;id:string,name:string,score:string&gt;\n   +- Exchange hashpartitioning(id#69, 200), ENSURE_REQUIREMENTS, [plan_id=121]\n      +- *(2) Filter isnotnull(id#69)\n         +- FileScan csv [id#69,class_name#70] Batched: false, DataFilters: [isnotnull(id#69)], Format: CSV, Location: InMemoryFileIndex(1 paths)[file:/F:/workspace_scala/miniSpark/data/person_info.csv], PartitionFilters: [], PushedFilters: [IsNotNull(id)], ReadSchema: struct&lt;id:string,class_name:string&gt;\n</code></pre> <p>\u53ef\u4ee5\u770b\u5230\u4e24\u8005\u90fd\u8fdb\u884c\u4e86<code>shuffle</code>\uff0c\u7136\u540e\u5728\u6bcf\u4e2a\u5206\u533a\u4e0a\u8fdb\u884c<code>hashjoin</code>\u3002</p> <p>SortMergeJoin</p> <p>\u901a\u5e38\u7528\u4e8e\u5927\u8868\u5bf9\u5927\u8868\u3002</p> <p>\u4e0d\u7528\u5c06\u4efb\u4f55\u8868\u7684\u6570\u636e\u5b8c\u5168\u52a0\u8f7d\u5230\u5185\u5b58\u3002\u9996\u5148\u5c06\u4e24\u4e2a\u8868\u7684\u6570\u636e\u8fdb\u884c<code>shuffle</code>\uff0c\u7136\u540e\u5728\u5206\u533a\u5185\u8fdb\u884c\u6392\u5e8f\u3002\u6b64\u65f6\u4e24\u4e2a\u8868\u7684\u5bf9\u5e94\u4f4d\u7f6e\u5747\u5df2\u6392\u597d\u5e8f\u3002\u5219\u8fdb\u884c\u5f52\u5e76\u6392\u5e8f\u5e76join\u7ed3\u679c\u5373\u53ef\u3002</p>"},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/#_14","title":"\u53c2\u6570\u8c03\u4f18","text":"<p>\u8fd9\u91cc\u4e3b\u8981\u6682\u65f6\u8bb0\u8f7d\u6ca1\u6709\u9ed8\u8ba4\u5f00\u542f\u6216\u8005\u7279\u6b8a\u5316\u7684\u4f18\u5316\u624b\u6bb5\u3002</p> <p>\u5e38\u89c4\u7684\u52a0\u8d44\u6e90\uff0c\u52a0\u5e76\u884c\u5ea6\u4ee5\u53ca\u4e00\u4e9b\u9ed8\u8ba4\u5f00\u542f\u7684\u4f18\u5316\u624b\u6bb5\u5c31\u4e0d\u8bb0\u8f7d\u4e86\u3002</p>"},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/#hint","title":"Hint","text":"<p>\u63d0\u793a - Azure Databricks - Databricks SQL | Microsoft Learn</p> <p>\u7edf\u4e00\u8bed\u6cd5\u5982\u4e0b\uff1a</p> SQL<pre><code>/*+ { partition_hint | join_hint | skew_hint } [, ...] */\n</code></pre>"},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/#partition","title":"partition","text":"SQL<pre><code>&gt; SELECT /*+ COALESCE(3) */ * FROM t;\n\n&gt; SELECT /*+ REPARTITION(3) */ * FROM t;\n\n&gt; SELECT /*+ REPARTITION(c) */ * FROM t;\n\n&gt; SELECT /*+ REPARTITION(3, c) */ * FROM t;\n\n&gt; SELECT /*+ REPARTITION_BY_RANGE(c) */ * FROM t;\n\n&gt; SELECT /*+ REPARTITION_BY_RANGE(3, c) */ * FROM t;\n\n&gt; SELECT /*+ REBALANCE */ * FROM t;\n\n&gt; SELECT /*+ REBALANCE(c) */ * FROM t;\n\n-- When a column name has been occluded by an alias you must refere to it by the alias name.\n&gt; SELECT /*+ REBALANCE(d) */ * FROM t AS s(d);\n\n-- multiple partitioning hints\n&gt; EXPLAIN EXTENDED SELECT /*+ REPARTITION(100), COALESCE(500), REPARTITION_BY_RANGE(3, c) */ * FROM t;\n== Parsed Logical Plan ==\n'UnresolvedHint REPARTITION, [100]\n+- 'UnresolvedHint COALESCE, [500]\n   +- 'UnresolvedHint REPARTITION_BY_RANGE, [3, 'c]\n      +- 'Project [*]\n         +- 'UnresolvedRelation [t]\n\n== Analyzed Logical Plan ==\nname: string, c: int\nRepartition 100, true\n+- Repartition 500, false\n   +- RepartitionByExpression [c#30 ASC NULLS FIRST], 3\n      +- Project [name#29, c#30]\n         +- SubqueryAlias spark_catalog.default.t\n            +- Relation[name#29,c#30] parquet\n\n== Optimized Logical Plan ==\nRepartition 100, true\n+- Relation[name#29,c#30] parquet\n\n== Physical Plan ==\nExchange RoundRobinPartitioning(100), false, [id=#121]\n+- *(1) ColumnarToRow\n   +- FileScan parquet default.t[name#29,c#30] Batched: true, DataFilters: [], Format: Parquet,\n      Location: CatalogFileIndex[file:/spark/spark-warehouse/t], PartitionFilters: [],\n      PushedFilters: [], ReadSchema: struct&lt;name:string&gt;\n</code></pre> <p>\u5176\u4e2d\uff1a</p> <p><code>REBALANCE</code> \u63d0\u793a\u53ef\u7528\u4e8e\u91cd\u65b0\u5e73\u8861\u67e5\u8be2\u7ed3\u679c\u8f93\u51fa\u5206\u533a\uff0c\u4f7f\u6bcf\u4e2a\u5206\u533a\u7684\u5927\u5c0f\u5408\u7406\uff08\u4e0d\u5c0f\u4e5f\u4e0d\u5927\uff09\u3002 \u5b83\u53ef\u4ee5\u5c06\u5217\u540d\u4f5c\u4e3a\u53c2\u6570\uff0c\u5e76\u5c3d\u91cf\u6309\u8fd9\u4e9b\u5217\u5bf9\u67e5\u8be2\u7ed3\u679c\u8fdb\u884c\u5206\u533a\u3002 \u8fd9\u9879\u5de5\u4f5c\u5c5e\u4e8e\u5c3d\u529b\u800c\u4e3a\uff1a\u5982\u679c\u5b58\u5728\u503e\u659c\uff0cSpark \u4f1a\u62c6\u5206\u503e\u659c\u7684\u5206\u533a\uff0c\u4ee5\u4f7f\u8fd9\u4e9b\u5206\u533a\u4e0d\u4f1a\u592a\u5927\u3002 \u5f53\u9700\u8981\u5c06\u6b64\u67e5\u8be2\u7684\u7ed3\u679c\u5199\u5165\u8868\u65f6\uff0c\u6b64\u63d0\u793a\u5f88\u6709\u7528\uff0c\u53ef\u907f\u514d\u6587\u4ef6\u8fc7\u5c0f/\u8fc7\u5927\u3002 \u5982\u679c\u672a\u542f\u7528 AQE\uff0c\u5219\u5ffd\u7565\u6b64\u63d0\u793a\u3002</p>"},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/#join","title":"join","text":"<ul> <li><code>BROADCAST ( table_name )</code>   \u4f7f\u7528\u5e7f\u64ad\u8054\u63a5\u3002 \u65e0\u8bba <code>autoBroadcastJoinThreshold</code> \u5982\u4f55\uff0c\u90fd\u5c06\u5e7f\u64ad\u5e26\u6709\u63d0\u793a\u7684\u8054\u63a5\u7aef\u3002 \u5982\u679c\u8054\u63a5\u7684\u4e24\u7aef\u90fd\u5177\u6709\u5e7f\u64ad\u63d0\u793a\uff0c\u5219\u5e7f\u64ad\u8f83\u5c0f\u7684\u4e00\u7aef\uff08\u6839\u636e\u7edf\u8ba1\u4fe1\u606f\u786e\u5b9a\uff09\u3002</li> <li><code>MERGE ( table_name )</code>   \u4f7f\u7528\u968f\u673a\u6392\u5e8f\u5408\u5e76\u8054\u63a5(SortMergeJoin)\u3002</li> <li><code>SHUFFLE_HASH ( table_name )</code>   \u4f7f\u7528\u968f\u673a\u54c8\u5e0c\u8054\u63a5\u3002 \u5982\u679c\u4e24\u7aef\u90fd\u6709\u968f\u673a\u54c8\u5e0c\u63d0\u793a\uff0cDatabricks SQL \u4f1a\u9009\u62e9\u8f83\u5c0f\u7684\u4e00\u7aef\u4f5c\u4e3a\u751f\u6210\u7aef\uff08\u6839\u636e\u7edf\u8ba1\u4fe1\u606f\u786e\u5b9a\uff09\u3002</li> <li><code>SHUFFLE_REPLICATE_NL ( table_name )</code>   \u4f7f\u7528\u968f\u673a\u590d\u5236\u5d4c\u5957\u5faa\u73af\u8054\u63a5\u3002</li> </ul> <p>\u8fd9\u4e9bHint\u53ef\u4ee5\u4e00\u6b21\u5199\u591a\u4e2a\uff0c\u4f46\u662fSparkSQL\u4f1a\u9009\u62e9\u4f18\u5148\u7ea7\u9ad8\u7684:</p> <p><code>BroadcastJoin &gt; sortMergeJoin &gt; ShuffleHashJoin &gt; NLJoin</code>\u3002</p> SQL<pre><code>-- Join Hints for broadcast join\n&gt; SELECT /*+ BROADCAST(t1) */ * FROM t1 INNER JOIN t2 ON t1.key = t2.key;\n&gt; SELECT /*+ BROADCASTJOIN (t1) */ * FROM t1 left JOIN t2 ON t1.key = t2.key;\n&gt; SELECT /*+ MAPJOIN(t2) */ * FROM t1 right JOIN t2 ON t1.key = t2.key;\n\n-- Join Hints for shuffle sort merge join\n&gt; SELECT /*+ SHUFFLE_MERGE(t1) */ * FROM t1 INNER JOIN t2 ON t1.key = t2.key;\n&gt; SELECT /*+ MERGEJOIN(t2) */ * FROM t1 INNER JOIN t2 ON t1.key = t2.key;\n&gt; SELECT /*+ MERGE(t1) */ * FROM t1 INNER JOIN t2 ON t1.key = t2.key;\n\n-- Join Hints for shuffle hash join\n&gt; SELECT /*+ SHUFFLE_HASH(t1) */ * FROM t1 INNER JOIN t2 ON t1.key = t2.key;\n\n-- Join Hints for shuffle-and-replicate nested loop join\n&gt; SELECT /*+ SHUFFLE_REPLICATE_NL(t1) */ * FROM t1 INNER JOIN t2 ON t1.key = t2.key;\n\n-- When different join strategy hints are specified on both sides of a join, Databricks SQL\n-- prioritizes the BROADCAST hint over the MERGE hint over the SHUFFLE_HASH hint\n-- over the SHUFFLE_REPLICATE_NL hint.\n-- Databricks SQL will issue Warning in the following example\n-- org.apache.spark.sql.catalyst.analysis.HintErrorLogger: Hint (strategy=merge)\n-- is overridden by another hint and will not take effect.\n&gt; SELECT /*+ BROADCAST(t1), MERGE(t1, t2) */ * FROM t1 INNER JOIN t2 ON t1.key = t2.key;\n\n-- When a table name is occluded by an alias you must use the alias name in the hint\n&gt; SELECT /*+ BROADCAST(t1), MERGE(s1, s2) */ * FROM t1 AS s1 INNER JOIN t2 AS s2 ON s1.key = s2.key;\n</code></pre>"},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/#skew","title":"skew","text":""},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/#aqe","title":"AQE","text":""},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/#_15","title":"\u539f\u7406","text":"<p><code>AQE</code>\u662f\u5728\u67e5\u8be2\u6267\u884c\u671f\u95f4\u53d1\u751f\u7684\u67e5\u8be2\u91cd\u65b0\u4f18\u5316\u3002</p> <p>\u8fd0\u884c\u65f6\u91cd\u65b0\u4f18\u5316\u7684\u63a8\u52a8\u56e0\u7d20\u662f<code>SparkSQL</code>\u5728\u968f\u673a\u548c\u5e7f\u64ad\u4ea4\u6362\uff08\u5728 AQE \u4e2d\u79f0\u4e3a\u67e5\u8be2\u9636\u6bb5(\u76f8\u5bf9\u7684\u662f<code>\u8bfb\u6570\u636e\u9636\u6bb5</code>)\uff09\u7ed3\u675f\u65f6\u5177\u6709\u6700\u65b0\u7684\u51c6\u786e\u7edf\u8ba1\u4fe1\u606f\u3002 \u56e0\u6b64\uff0c<code>SparkSQL</code> \u53ef\u4ee5\u9009\u62e9\u66f4\u597d\u7684\u7269\u7406\u7b56\u7565\u3001\u9009\u62e9\u6700\u4f73\u7684\u968f\u673a\u540e\u5206\u533a\u5927\u5c0f\u548c\u6570\u76ee\uff0c\u6216\u6267\u884c\u4ee5\u524d\u9700\u8981<code>Hint</code>\u7684\u4f18\u5316\uff08\u4f8b\u5982\u503e\u659c\u8054\u63a5\u5904\u7406\uff09\u3002</p> <p>\u8fd9\u5728\u672a\u542f\u7528\u7edf\u8ba1\u4fe1\u606f\u6536\u96c6\u529f\u80fd\u6216\u7edf\u8ba1\u4fe1\u606f\u8fc7\u65f6\u7684\u60c5\u51b5\u4e0b\u4f1a\u975e\u5e38\u6709\u7528\u3002 \u5728\u9759\u6001\u6d3e\u751f\u7684\u7edf\u8ba1\u4fe1\u606f\u4e0d\u51c6\u786e\u7684\u60c5\u51b5\u4e0b\uff08\u4f8b\u5982\u5728\u590d\u6742\u67e5\u8be2\u7684\u8fc7\u7a0b\u4e2d\u6216\u5728\u53d1\u751f\u6570\u636e\u503e\u659c\u4e4b\u540e\uff09\uff0c\u4e5f\u5f88\u6709\u7528\u3002</p>"},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/#_16","title":"\u529f\u80fd\u548c\u8303\u56f4","text":"<p>\u5f00\u542f</p> SQL<pre><code>set spark.sql.adaptive.enabled = true\n</code></pre> <p>\u4ece<code>Spark3.2</code>\u5f00\u59cb\u5c31\u9ed8\u8ba4\u5f00\u542f\u3002</p> <p>\u529f\u80fd</p> <ul> <li>\u5c06<code>SortMergeJoin -&gt; BroadcastHashJoin</code></li> <li>\u5728\u968f\u673a\u4ea4\u6362\u540e\u5c06\u5206\u533a\u8fdb\u884c\u52a8\u6001\u8054\u5408\uff08\u5c06\u5c0f\u5206\u533a\u5408\u5e76\u4e3a\u5927\u5c0f\u5408\u7406\u7684\u5206\u533a\uff09\u3002 \u975e\u5e38\u5c0f\u7684\u4efb\u52a1\u5177\u6709\u8f83\u5dee\u7684 I/O \u541e\u5410\u91cf\uff0c\u5e76\u4e14\u5f80\u5f80\u4f1a\u4ea7\u751f\u66f4\u591a\u8ba1\u5212\u5f00\u9500\u548c\u4efb\u52a1\u8bbe\u7f6e\u5f00\u9500\u3002 \u5408\u5e76\u5c0f\u578b\u4efb\u52a1\u53ef\u8282\u7701\u8d44\u6e90\u5e76\u63d0\u9ad8\u7fa4\u96c6\u541e\u5410\u91cf\u3002</li> <li>\u52a8\u6001\u5904\u7406<code>ShuffleSortMergeJoin\u4e0eShuffleHashJoin</code>\u4e2d\u7684\u503e\u659c\uff0c\u65b9\u6cd5\u662f\u5c06\u503e\u659c\u7684\u4efb\u52a1\u62c6\u5206\uff08\u5982\u679c\u9700\u8981\uff0c\u8fd8\u8981\u8fdb\u884c\u590d\u5236\uff09\u4e3a\u5927\u5c0f\u5927\u81f4\u76f8\u7b49\u7684\u4efb\u52a1\u3002</li> <li>\u52a8\u6001\u68c0\u6d4b\u5e76\u4f20\u64ad\u7a7a\u5173\u7cfb\u3002</li> </ul> <p>\u8303\u56f4</p> <ul> <li>\u975e\u6d41\u5f0f\u5904\u7406</li> <li>\u81f3\u5c11\u6709\u4e00\u4e2a<code>exchange</code>\u6216\u8005\u4e00\u4e2a<code>subquery</code></li> </ul>"},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/#_17","title":"\u5176\u4ed6","text":"<p>\u81ea\u9002\u5e94\u67e5\u8be2\u6267\u884c - Azure Databricks | Microsoft Learn</p>"},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/#ddp","title":"DDP","text":"<p>[SPARK][SQL] \u804a\u4e00\u804aSpark 3.0\u4e2d\u7684DPP\u7279\u6027 - \u77e5\u4e4e (zhihu.com)</p>"},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/#spj","title":"SPJ","text":"<p>\u6027\u80fd\u8c03\u4f18 - Spark 4.0.0-preview2 Documentation (apache.org)</p>"},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/#_18","title":"\u706b\u5c71\u6a21\u578b\u4e0e\u5411\u91cf\u5316","text":""},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/#_19","title":"\u706b\u5c71\u6a21\u578b","text":""},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/#_20","title":"\u539f\u7406","text":"<p>\u7269\u7406\u6267\u884c\u5f15\u64ce\u4e4b\u706b\u5c71\u5f15\u64ce - \u300aAndy \u7684\u7814\u7a76\u7b14\u8bb0\u300b - \u6781\u5ba2\u6587\u6863 (geekdaxue.co)</p> <p>\u706b\u5c71\u6a21\u578b\u8bde\u751f\u7684\u65f6\u5019\uff0c\u4eba\u4eec\u6ce8\u91cd\u4e8e\u4f18\u5316IO\u7684\u6548\u7387\u3002</p> <p>\u5176\u5c06\u5173\u7cfb\u4ee3\u6570\u4e2d\u7684\u6bcf\u4e2a\u64cd\u4f5c\u62bd\u8c61\u4e3a<code>Operator</code>\uff0c\u5e76\u6784\u5efa\u4e3a\u6811\u3002\u7136\u540e\u4ece\u6839\u5f00\u59cb\u9012\u5f52\u8c03\u7528<code>next</code>\uff0c\u5c31\u53ef\u4ee5\u5f97\u5230\u8f93\u51fa\u7684<code>tuple</code>\u3002</p> <p>SparkSQL\u4e2d\u7684\u6267\u884c\u8ba1\u5212\u4e5f\u4f53\u73b0\u4e86\u8fd9\u4e00\u70b9\u3002</p>"},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/#_21","title":"\u7f3a\u70b9","text":"<p>\u706b\u5c71\u6a21\u578b\u4e00\u6b21\u5904\u7406\u4e00\u884c\uff0c\u7f3a\u70b9\u5982\u4e0b\uff1a</p> <ul> <li>\u865a\u51fd\u6570\u8c03\u7528\u8fc7\u591a\uff0c\u6d88\u8017CPU\u3002Java\u7684\u865a\u51fd\u6570\u4e0e\u666e\u901a\u51fd\u6570\u7684\u8c03\u7528\u533a\u522b\u5c31\u662f\u5176\u662f\u4e00\u4e2a\u95f4\u63a5\u8c03\u7528\uff0c\u4f1a\u591a\u4e00\u6b21\u538b\u6808\u51fa\u6808\u7684\u8fc7\u7a0b\uff0c\u5e76\u4e14CPU\u65e0\u6cd5\u9884\u6d4b\u8df3\u8f6c\u4f4d\u7f6e\u3002\u8fd9\u6837CPU\u5f00\u9500\u662f\u7ffb\u500d\u7684\u3002</li> <li>\u7f13\u5b58\u4e0d\u53cb\u597d\uff0c\u6bcf\u6b21\u53ea\u80fd\u62c9\u53d6\u4e00\u884c\u6570\u636e\uff0c\u5e76\u4e14\u5f53\u524d\u7b97\u5b50\u7684\u7f13\u5b58\u53ef\u80fd\u88ab\u4e0b\u5c42\u7b97\u5b50\u51b2\u6389\u3002</li> </ul>"},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/#_22","title":"\u6539\u8fdb","text":"<p>\u95ee\u9898\u4e00</p> <p>\u9488\u5bf9\u865a\u51fd\u6570\u8c03\u7528\u8fc7\u591a\u7684\u95ee\u9898\uff0c<code>SparkSQL</code>\u91c7\u7528\u4e86\u4ee3\u7801\u751f\u6210\u6765\u89e3\u51b3\uff0c\u81ea\u52a8\u751f\u6210\u4ee3\u7801\u6765\u6267\u884c<code>Operator\u7684\u903b\u8f91</code>\uff0c\u907f\u514d\u865a\u51fd\u6570\u8c03\u7528\u3002\u5176\u5c06\u4e00\u4e2a<code>stage</code>\u4e2d\u7684<code>operator</code>\u5168\u90e8\u538b\u7f29\u4e3a\u5355\u4e2a\u51fd\u6570\u8c03\u7528\uff0c\u662f\u4e00\u4e2a\u5927\u7684<code>for-loop</code>\u3002</p> <p><code>SparkSQL</code>\u4e2d\u4f7f\u7528\u5982\u4e0b\u53c2\u6570\u5f00\u542f\u548c\u5173\u95ed\uff1a</p> SQL<pre><code>set spark.sql.codegen.wholeStage = true / false;\n</code></pre> <p>\u95ee\u9898\u4e8c</p> <p>\u6bcf\u6b21\u5904\u7406\u4e00\u884c\u6570\u636e\uff0c\u5219\u53ef\u4ee5\u6539\u4e3aSIMD\u6307\u4ee4\u5e76\u884c\uff0c\u4e00\u6b21\u5904\u7406\u591a\u884c\u6570\u636e\uff0c\u5e76\u4e14\u7f13\u5b58\u5bf9\u9f50\u3002\u5df2\u7ecf\u6709\u5f00\u6e90\u9879\u76ee\u652f\u6301\u8be5\u529f\u80fd\u3002</p>"},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/#_23","title":"\u5411\u91cf\u5316","text":"<p>\u89e3\u51b3\u7684\u5c31\u662f\u95ee\u9898\u4e8c\u3002</p> <p>kwai/blaze\uff1a\u8d85\u5feb\u7684\u67e5\u8be2\u6267\u884c\u5f15\u64ce\u4f7f\u7528 Apache Spark \u8bed\u8a00\uff0c\u5e76\u4ee5 Arrow-DataFusion \u4e3a\u6838\u5fc3\u3002 (github.com)</p> <p>apache/incubator-gluten: Gluten is a middle layer responsible for offloading JVM-based SQL engines' execution to native engines. (github.com)</p>"},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/#_24","title":"\u5e38\u89c1\u95ee\u9898","text":""},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/#spark","title":"Spark","text":""},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/#spark-and-mr","title":"Spark and MR","text":"<p>Spark\u5df2\u7ecf\u662f\u4e8b\u5b9e\u4e0a\u7684\u6279\u5904\u7406\u6807\u51c6\u5f15\u64ce\u4e86\uff0c\u5b83\u6bd4MR\u6765\u8bf4\u6709\u5982\u4e0b\u51e0\u70b9\u7a81\u7834\uff1a</p> <ul> <li>\u4ece\u8bed\u4e49\u4e0a\u6765\u8bf4\uff0c\u591a\u4e2aMR\u4efb\u52a1\u7b49\u4ef7\u4e8e\u4e00\u4e2aSpark\u4efb\u52a1\u3002\u800c\u591a\u4e2aMR\u4efb\u52a1\u4e2d\u7684\u6bcf\u4e2a\u4efb\u52a1\uff0c\u7ed3\u679c\u90fd\u8981\u843d\u76d8\u3002\u4f46\u662fSpark\u4efb\u52a1\u7684\u4e2d\u95f4\u7f13\u5b58\u673a\u5236\u66f4\u52a0\u5b8c\u5584\uff0c\u67d0\u4e9btask\u53ef\u4ee5\u7f13\u5b58\u4e2d\u95f4\u6570\u636e\uff0c\u907f\u514d\u5927\u91cf\u7684\u78c1\u76d8IO\u3002</li> <li>Shuffle\uff0c\u8fd9\u4e2a\u662f\u6838\u5fc3\u3002</li> <li>\u6392\u5e8f\u53ef\u9009\uff1a\u5bf9\u4e8eMR\u6765\u8bf4\uff0cShuffle write\u9636\u6bb5\u5fc5\u987b\u6309\u7167parition + key\u6392\u5e8f\u3002\u4f46\u662f\u6709\u4e9b\u64cd\u4f5c\u7b26\uff0c\u6bd4\u5982groupByKey\uff0c\u4e0d\u9700\u8981\u6392\u5e8f\u3002Spark\u5c31\u53ef\u4ee5\u6309\u7167partition\u8fdb\u884c\u7ec4\u7ec7(\u4e4b\u6240\u4ee5\u8fd8\u8981\u6309\u7167paritition\u6392\u5e8f\u662f\u4e3a\u4e86\u5b9e\u73b0SortedBasedShuffle)\uff0c\u6216\u8005\u6309\u7167partition + key\u8fdb\u884c\u6392\u5e8f\uff0c\u5b9e\u73b0\u66f4\u52a0\u7075\u6d3b\u3002</li> <li>\u5728\u7ebf\u805a\u5408\u3002MR\u7684\u805a\u5408\uff0c\u90fd\u662f\u6570\u636e\u5148\u7edf\u4e00\u653e\u5165\u5185\u5b58/\u78c1\u76d8\uff0c\u518d\u5355\u72ec\u542f\u52a8\u805a\u5408\u9636\u6bb5\u3002\u800cSpark\u6784\u5efa\u7279\u6b8a\u7ed3\u6784AppendOnlyMap\uff0c\u5229\u7528hashMap\u7684\u7279\u6027\uff0c\u5b9e\u65f6\u66f4\u65b0\u6570\u636e\u3002</li> <li> <p>\u4e34\u65f6\u6587\u4ef6\u6570\u91cf\u5c0f\u3002\u5bf9\u4e8eMR\u6765\u8bf4\uff0c\u4e0a\u6e38\u6709M\u4e2a\u4efb\u52a1\uff0c\u4e0b\u6e38\u6709N\u4e2a\u4efb\u52a1\uff0c\u90a3\u4e48MR\u7684\u4e34\u65f6\u6587\u4ef6\u6570\u91cf\u4e3aM*N\uff0c\u8fd9\u662f\u56e0\u4e3aMR\u4e00\u76f4\u4f7f\u7528\u7684\u90fd\u662fHashBasedShuffle\u3002\u800cSpark\u4ece1.x\u5f00\u59cb\u5c31\u5f15\u5165\u5e76\u9ed8\u8ba4\u4e3aSortBasedShuffle\u3002</p> <ul> <li>HashBasedShuffle\u7684\u6570\u636e\uff0c\u5168\u90e8\u6309\u7167partitionId\u76f4\u63a5Hash\u5230\u5bf9\u5e94bucket\u5c31\u53ef\u4ee5\uff0cMR\u8fd8\u8981\u6c42\u6bd4\u5982\u6309\u7167kety\u6392\u5e8f\u3002\u4e34\u65f6\u6587\u4ef6\u6570\u91cfM*N\uff0c\u6392\u5e8f\u4e0d\u53ef\u9009\u3002</li> <li>SortedBasedShuffle\uff0c\u53ef\u4ee5\u5148\u5c1d\u8bd5\u4e3aBypassmergeSortShuffleWriter\uff0c\u7c7b\u4f3c\u4e8ehashBasedShuffle\u3002\u6700\u540e\u4e5f\u53ef\u4ee5\u9000\u5316\u4e3aSortBasedShuffleWriter\uff0c\u5b83\u53ef\u4ee5\u6309\u7167partitionId/(partitionId + key)\u8fdb\u884c\u6392\u5e8f\uff0c\u6700\u7ec8\u4e00\u4e2atask\u53ea\u7528\u8f93\u51fa\u4e00\u4e2a\u78c1\u76d8\u6587\u4ef6(xxx.data)\u3002\u5e76\u901a\u8fc7.index\u6807\u8bc6\u6bcf\u4e2aShuffleRead\u5982\u4f55\u4ece\u8be5\u6587\u4ef6\u8bfb\u53d6\u6570\u636e\u3002\u5219\u4e34\u65f6\u6587\u4ef6\u6570\u91cfM\u4e2a\uff0c\u5e76\u4e14\u6392\u5e8f\u7c92\u5ea6\u53ef\u9009\u3002</li> <li>Tungsten &amp; codegen\u4f18\u5316:Spark\u53ef\u4ee5\u505acode generation\u4f18\u5316\uff0c\u5c06\u7b97\u5b50\u94fe\u62cd\u6241\u751f\u6210\u4e00\u4e2afor\u5faa\u73af\u3002\u540c\u65f6DS\u548cDF\u90fd\u5f15\u5165\u5806\u5916\u5185\u5b58\u8fdb\u884c\u7ba1\u7406\uff0c\u52a0\u901f\u6267\u884c\u3002</li> </ul> </li> </ul>"},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/#spark_1","title":"Spark\u8fdb\u7a0b\u7c7b\u522b","text":"<p>Spark\u8fdb\u7a0b\u5206\u4e3a\u5982\u4e0b\u51e0\u79cd\uff1a</p> <ol> <li>Master\u8282\u70b9\u5e38\u9a7bMaster\u8fdb\u7a0b</li> <li>Worker\u8282\u70b9\u5e38\u9a7bWorker\u8fdb\u7a0b</li> <li>Executor\u8fdb\u7a0b\uff0c\u6bcf\u4e2aWorker\u8282\u70b9\u53ef\u4ee5\u542f\u52a8\u591a\u4e2aExecutorBackend\u8fdb\u7a0b</li> <li>Driver\u8fdb\u7a0b\u3002\u5b98\u65b9\u89e3\u91ca\u662fthe process running the main() function of the application and create the SparkContext object\u3002\u4f4d\u7f6e\u4e0d\u5b9a\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u53ef\u4ee5\u662fspark-submit\u542f\u52a8\u7684\u8fdb\u7a0b\uff0c\u4e5f\u53ef\u4ee5\u662fspark-shell\u542f\u52a8\u7684\u8fdb\u7a0b\uff0c\u6b64\u65f6\u662fclient\u6a21\u5f0f\u3002\u540c\u65f6\u4e5f\u53ef\u4ee5\u662f\u8fd0\u884c\u5728Yarn\u7684ApplicationMaster\u4e2d\uff0c\u6216\u8005\u662f\u8fd0\u884c\u5728Kubernetes\u7684\u4e00\u4e2a\u4e13\u5c5ePod\u4e2d\u7684\u8fdb\u7a0b\uff0c\u6b64\u65f6\u662fcluster\u6a21\u5f0f\u3002\u751a\u81f3\u4e5f\u53ef\u4ee5\u662fIdea\u4e2d\u4e00\u4e2aJVM\u8fd0\u884cmain()\u51fd\u6570 &amp; \u6267\u884ctask\uff0c\u5219\u6b64\u65f6Driver\u548cExecutor\u90fd\u8fd0\u884c\u5728Idea\u4e00\u4e2aJVM\u8fdb\u7a0b\u4e2d\u3002</li> </ol>"},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/#spark_2","title":"Spark\u5185\u5b58\u6a21\u578b","text":"<p>Spark\u91c7\u7528\u7edf\u4e00\u5185\u5b58\u7ba1\u7406\u6a21\u578b(\u9488\u5bf9\u6240\u6709Executor\u8fdb\u7a0b\uff0c\u4e5f\u5c31\u662fspark.executor.memory\u4ee5\u53caspark.memory.offHeapSize\u8fdb\u884c\u7684\u7ba1\u7406)\u3002</p> <p>Executor JVM\u8fdb\u7a0b\u7ba1\u7406\u5982\u4e0b\uff1a</p> <ol> <li>\u6846\u67b6\u5185\u5b58\u7a7a\u95f4(\u5806\u5916 + \u5806\u5185\uff0c\u5171\u8ba1\u536060%)\uff1a\u6846\u67b6\u6267\u884c\u7a7a\u95f4\uff0c\u7528\u4e8e\u5b58\u50a8Shuffle\u8fc7\u7a0b\u7684\u4e2d\u95f4\u7ed3\u679c\u3002\u800c\u6570\u636e\u7f13\u5b58\u7a7a\u95f4\uff0c\u7528\u4e8e\u5b58\u50a8RDD\u7684\u7f13\u5b58\u6570\u636e/\u5e7f\u64ad\u6570\u636e\uff0ctask\u4e2d\u95f4\u7ed3\u679c\u7b49\u3002\u8fd9\u4e24\u79cd\u9ed8\u8ba4\u4e00\u534a\u4e00\u534a\u3002\u6846\u67b6\u6267\u884c\u7a7a\u95f4\u53ef\u4ee5\u76f4\u63a5\u83b7\u53d6\u6570\u636e\u7f13\u5b58\u7a7a\u95f4\u800c\u4e0d\u540c\u91ca\u653e(\u5176\u5b9e\u662f\u96be\u4ee5\u5b9e\u73b0\u91ca\u653e)\uff0c\u800c\u6570\u636e\u7f13\u5b58\u7a7a\u95f4\u5360\u7528\u6846\u67b6\u6267\u884c\u7a7a\u95f4\uff0c\u5fc5\u987b\u91ca\u653e(\u56e0\u4e3a\u91ca\u653e\u6bd4\u8f83\u7b80\u5355)\u3002</li> <li>\u7528\u6237\u4ee3\u7801\u7a7a\u95f4(\u5806\u5916 + \u5806\u5185,\u5171\u8ba1\u5360)\uff1a\u7528\u4e8e\u5b58\u50a8\u7528\u6237\u4ee3\u7801\u751f\u6210\u7684\u5bf9\u8c61\u3002</li> <li>\u7cfb\u7edf\u4fdd\u7559\u7a7a\u95f4(\u5806\u5185)\uff1a\u7528\u4e8e\u5b58\u50a8Spark\u8fd0\u884c\u65f6\u4ea7\u751f\u7684\u4e34\u65f6\u5bf9\u8c61\u3002</li> </ol>"},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/#_25","title":"\u805a\u5408\u3001\u5f00\u7a97\u3001\u8fde\u63a5\u7684\u5b9e\u73b0","text":"<p>\u4e00\u822c\u6765\u8bf4\u6709\u5982\u4e0b\u7c7b\u522b\uff1a</p> <ol> <li>\u805a\u5408</li> <li>\u5f00\u7a97</li> <li>\u8fde\u63a5</li> </ol> <p>\u8fd9\u4e2a\u4e0a\u9762\u90fd\u8be6\u7ec6\u89e3\u91ca\u4e86\u3002</p>"},{"location":"dataWarehouse/%E5%A4%A7%E6%95%B0%E6%8D%AESQL/#sql_1","title":"SQL\u8c03\u4f18","text":"<p>\u7b2c\u4e00\u6b65\uff0c\u5b9a\u4f4d\u95ee\u9898\uff0c\u662f\u5185\u90e8\u56e0\u7d20\u8fd8\u662f\u5916\u90e8\u9700\u6c42\u95ee\u9898\u3002</p> <p>\u7b2c\u4e8c\u6b65\uff0c\u51b3\u5b9a\u4fee\u6539\u65b9\u5f0f\u3002\u786e\u5b9a\u662f\u4e0d\u4fee\u6539SQL\u8c03\u4f18\u8fd8\u662f\u4fee\u6539SQL\u8c03\u4f18\u3002</p> <p>\u7b2c\u4e09\u6b65</p> <ul> <li>\u5982\u679c\u662f\u4e0d\u4fee\u6539SQL\u8c03\u4f18\uff0c\u5219\u53ef\u4ee5\u4ece\u53c2\u6570\u914d\u7f6e\uff0c\u5b58\u50a8\u7ed3\u6784\u8c03\u6574\u5f00\u59cb\u3002</li> <li>\u5982\u679c\u662f\u4fee\u6539SQL\u8c03\u4f18\uff0c\u5219\u53ef\u4ee5\u8fdb\u884c\u7b49\u4ef7\u8be5\u5199\uff0c\u6216\u8005\u8bf4\u76f4\u63a5\u6839\u636e\u4e1a\u52a1\u7406\u89e3\u6539\u53d8\u903b\u8f91\u3002</li> </ul> <p>\u5bf9\u4e8e\u4e0d\u4fee\u6539SQL\u6765\u8bf4\uff1a</p> <ul> <li>\u914d\u7f6e\u4fee\u6539\uff1a\u6bd4\u5982\u5f00\u542f\u9884\u805a\u5408\uff0c\u52a0\u5165Hint\uff0c\u5c0f\u6587\u4ef6\u5408\u5e76\uff0c\u5206\u533a\u5206\u6876(\u5206\u533a\u662f\u76ee\u5f55\u7ea7\u5212\u5206\uff0c\u628a\u4e00\u4e2a\u65e5\u671f\u4f5c\u4e3a\u4e00\u4e2a\u76ee\u5f55\uff0c\u65b9\u4fbf\u641c\u7d22\u3002\u800c\u5206\u6876\u662f\u6587\u4ef6\u7ea7\u522b\u5212\u5206\uff0c\u6bd4\u5982\u5212\u5206\u4e3a000x.paruet\u7b49\uff0c\u901a\u5e38\u7528\u4e8e\u4f18\u5316JOIN\u7b49)\u3002</li> <li>\u5b58\u50a8\u8c03\u6574\uff1a\u6bd4\u5982\u628a\u6570\u636e\u5b58\u50a8\u6210\u5217\u5f0f\u5b58\u50a8\uff0c\u6bd4\u5982Parquet\u3002\u4fee\u6539\u538b\u7f29\u65b9\u5f0f(\u9700\u8981\u6d4b\u8bd5\uff0c\u8fd8\u9700\u8981\u770b\u662f\u5426\u652f\u6301\u5212\u5206\uff0cLZO\uff0czstd\uff0clz4\u5747\u652f\u6301\u5212\u5206)\u3002</li> </ul>"},{"location":"dataWarehouse/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/","title":"\u5b58\u50a8\u5f15\u64ce","text":"<p>\u5355\u673a\u5b58\u50a8\u5f15\u64ce\u4ece<code>\u8bfb</code>\u548c<code>\u5199</code>\u4e24\u4e2a\u65b9\u9762\u770b\uff0c\u53ef\u4ee5\u5206\u4e3a<code>\u8bfb\u591a\u5199\u5c11</code>\u548c<code>\u5199\u591a\u8bfb\u5c11</code>\u3002\u6bd4\u5982\u4e4b\u524d\u5206\u6790\u7684\u65e5\u5fd7\u7ed3\u6784\u6587\u4ef6\u7cfb\u7edf\uff0c\u5c31\u662f\u9488\u5bf9<code>\u5199\u591a\u8bfb\u5c11</code>\u573a\u666f\u7684\u4e13\u95e8\u4f18\u5316\u7684\u6587\u4ef6\u7cfb\u7edf\uff0c\u5176\u901a\u8fc7\u52a0\u4e2d\u95f4\u5c42\u4ee5\u53ca<code>copy on write</code>\u7684\u65b9\u5f0f\uff0c\u5c06\u6240\u6709\u7684\u5199\u7edf\u4e00\u4e3a\u6309\u6bb5\u7684\u987a\u5e8f\u5199\uff0c\u4ece\u800c\u52a0\u901f\u5199\u5165\u6548\u7387\u3002</p> <p>\u5177\u4f53\u7684\u5b58\u50a8\u5f15\u64ce\u5206\u4e0b\u8ff0\u4e24\u7c7b\uff1a</p> <ul> <li><code>\u8bfb\u591a\u5199\u5c11</code> B &amp; B+\u6811</li> <li><code>\u5199\u591a\u8bfb\u5c11</code> LSM-Tree\uff0cLSM-Array\u7b49</li> </ul> <p>\u6bcf\u79cd\u5f15\u64ce\u53c8\u5728\u6570\u636e\u843d\u76d8\u65f6\u673a\u4e0a\u5206\u4e3a<code>\u540c\u6b65\u843d\u76d8</code>\u548c<code>\u5f02\u6b65\u843d\u76d8</code>\uff0c\u540e\u8005\u901a\u5e38\u901a\u8fc7<code>\u9884\u5199WAL</code>\u5b9e\u73b0\u3002</p>"},{"location":"dataWarehouse/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/#_2","title":"\u6570\u636e\u7ed3\u6784","text":""},{"location":"dataWarehouse/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/#_3","title":"\u57fa\u7840\u7ed3\u6784","text":""},{"location":"dataWarehouse/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/#_4","title":"\u6570\u7ec4\u548c\u94fe\u8868","text":"<p>\u4ece\u5185\u5b58\u7ba1\u7406\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u6570\u7ec4\u548c\u94fe\u8868\u5c31\u662f\u5206\u522b\u4ee3\u8868\u4e86\u6570\u636e\u7ec4\u7ec7\u4e24\u4e2a\u7279\u6027\uff0c\u4e5f\u5c31\u662f\u987a\u5e8f\u7ec4\u7ec7\u548c\u79bb\u6563\u7ec4\u7ec7\u3002</p> <p>\u6700\u7ec8\u7684\u6240\u6709\u9ad8\u7ea7\u7ed3\u6784\u90fd\u4f1a\u5f52\u7ed3\u4e3a\u8fd9\u4e24\u4e2a\u57fa\u672c\u7ed3\u6784\u6765\u5b9e\u73b0\u3002</p> <p>\u8fd9\u4e24\u8005\u7684\u4fa7\u91cd\u70b9\u6709\u6240\u4e0d\u540c\uff0c</p> <ul> <li>\u6570\u7ec4\u7684<code>\u6309\u4e0b\u6807\u8bbf\u95ee\u548c\u5c3e\u90e8\u8ffd\u52a0</code>\u90fd\u662f<code>O(1)</code>\u7684</li> <li>\u94fe\u8868\u7684<code>\u63d2\u5165\uff0c\u5220\u9664\u7684\u6267\u884c</code>\u662f<code>O(1)</code>\uff0c\u4f46\u662f\u8bbf\u95ee\u8fc7\u7a0b\u662f<code>O(n)</code>\u7684\u3002</li> </ul>"},{"location":"dataWarehouse/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/#_5","title":"\u54c8\u5e0c\u7ed3\u6784","text":""},{"location":"dataWarehouse/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/#_6","title":"\u54c8\u5e0c\u8868","text":"<p>\u6563\u5217\u8868 - \u7ef4\u57fa\u767e\u79d1\uff0c\u81ea\u7531\u7684\u767e\u79d1\u5168\u4e66 (wikipedia.org)</p>"},{"location":"dataWarehouse/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/#bitmap","title":"BitMap","text":"<p>\u672c\u8d28</p> <p>\u6309\u7167<code>bit</code>\u6765\u5b58\u50a8\u6d77\u91cf\u65e0\u91cd\u590d\u6570\u636e(<code>\u6bd4\u5982ID</code>)\u7684\u5c0f\u72b6\u6001(\u901a\u5e38\u662f<code>\u4e8c\u503c\u72b6\u6001(true/false)</code>)\u3002</p> <p>\u6bd4\u5982<code>10\u4ebf</code>\u4e2a<code>int</code>\u5224\u65ad\u67d0\u4e2a\u6570\u662f\u5426\u5b58\u5728\u3002\u5219\u5b58\u50a8\u5f00\u9500\u53ef\u4ee5\u51cf\u5c0f\u4e3a<code>1/32</code>\uff0c\u4f7f\u7528<code>bit</code>\u4f4d\u7f6e\u4e0b\u6807\u4ee3\u8868\u5177\u4f53\u6570\u5b57\uff0c\u8be5\u4f4d\u7684\u503c\u4ee3\u8868\u662f\u5426\u5b58\u5728\u3002</p> <p>\u5b9e\u73b0</p> <p>\u901a\u5e38\u7684\u5b9e\u73b0\u662f\u901a\u8fc7<code>Array[Int]</code>\u6765\u5b9e\u73b0\u7684\u3002\u82e5\u73b0\u5728\u8981\u5bfb\u627e\u67d0\u4e2a\u6570\u7684\u72b6\u6001\uff0c\u5176\u5b9e\u4e5f\u5c31\u662f\u5bfb\u627e\u5bf9\u5e94<code>Int\u7684\u67d0\u4e2a\u4f4d\u662f\u5426\u4e3a1</code>\u3002</p> <p>\u53ef\u4ee5\u5c06\u5176\u770b\u505a\u4e8c\u7ef4bit\u77e9\u9635\uff0c\u5219\u5bf9\u5e94\u4f4d\u7f6e\u4e3a<code>arr(x/32)(x % 32)</code>\u3002</p> <p>\u4f46\u662f\u5b9e\u9645\u4e0a\u5bf9\u4e8e\u7b2c\u4e8c\u7ef4\u5ea6\u7684<code>Int</code>\u6765\u8bf4\u4e0d\u80fd\u518d\u76f4\u63a5\u7d22\u5f15\u4e86\uff0c\u53ea\u80fd\u901a\u8fc7<code>arr(x/32) &amp; (1&lt;&lt;(x%32)))</code>\u6765\u5b9e\u73b0\u3002</p> <p>API</p> <p>\u5728Java/Scala\u4e2d\uff0c\u90fd\u63d0\u4f9b\u4e86<code>BitSet</code>\u7c7b\uff0c\u5176\u5c31\u662f\u4e00\u4e2a\u4e13\u7528\u7684\u9488\u5bf9<code>Int</code>\u7c7b\u578b\u7684<code>BitMap</code>\u3002\u53ef\u4ee5\u770b\u5230\u5176\u6784\u9020\u65b9\u6cd5\u751a\u81f3\u90fd\u4e0d\u662f\u6cdb\u578b\u65b9\u6cd5\uff0c\u56e0\u4e3a\u5185\u90e8\u5df2\u7ecf\u89c4\u5b9a\u662f<code>Int</code>\u3002</p> <p>\u5b83\u540c\u65f6\u662f\u4e00\u4e2a<code>SortedSet</code>\u3002</p> Java<pre><code>object BitSetDemo {\n  def main(args: Array[String]): Unit = {\n    import scala.collection.BitSet\n    val set = BitSet(1,2,3,4,5)\n    val set2 = BitSet(1,4,5,7,9)\n    println(set &amp; set2)\n    println(set | set2)\n    println(set &amp;~ set2)\n    println(set ^ set2)\n  }\n}\n</code></pre> <p>\u7ed3\u679c\u5982\u4e0b:</p> Text Only<pre><code>BitSet(1, 4, 5)\nBitSet(1, 2, 3, 4, 5, 7, 9)\nBitSet(2, 3)\nBitSet(2, 3, 7, 9)\n</code></pre>"},{"location":"dataWarehouse/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/#bloomfilter","title":"BloomFilter","text":"<p>\u672c\u8d28</p> <p>\u957f\u5ea6\u4e3a<code>n</code>\u7684bit\u6570\u7ec4 + <code>k</code>\u4e2a<code>Hash\u51fd\u6570</code></p> <p>\u4f7f\u7528</p> <p>\u5e03\u9686\u8fc7\u6ee4\u5668\u53ef\u89c6\u5316 (selfboot.cn)</p> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u521d\u59cb\u7684\u65f6\u5019\u8bbe\u7f6e\\(n = 200,k = 6\\).</p> <p>\u7136\u540e\u6bcf\u6b21\u6dfb\u52a0\u4e00\u4e2a\u5b57\u7b26\u4e32\u7c7b\u578b\u7684<code>key</code>\uff0c\u90fd\u53ef\u4ee5\u901a\u8fc76\u4e2a\u54c8\u5e0c\u51fd\u6570\u8ba1\u7b97\u51fa\u6765\u7684\u503c\uff0c\u586b\u5145\u52306\u4e2a\u4f4d\u4e2d\u3002\u7136\u540e\u67e5\u627e\u7684\u65f6\u5019\u53ea\u9700\u8981\u67e5\u770b\u8fd9\u4e9b\u4f4d\u662f\u5426\u4e3a1\u5373\u53ef\u5927\u6982\u7387\u5224\u65ad\u662f\u5426\u6709\u8be5key\u3002</p> <p>\u5176\u67e5\u8be2\u6027\u80fd\u662f<code>O(k)</code>\u7684\uff0c\u4e0e\u6570\u636e\u91cf\u65e0\u5173\uff0c\u5e76\u4e14\u7a7a\u95f4\u590d\u6742\u5ea6\u5f88\u4f4e\u3002</p> <p>\u5047\u9633\u6027</p> <p>\u5f88\u663e\u7136\uff0cbit\u6570\u7ec4\u4e0d\u53ef\u80fd\u65e0\u9650\u957f\u3002\u800c\u603b\u6709\u53ef\u80fd\u4e0d\u540c<code>key</code>\u5c06\u540c\u4e00\u4e2a\u683c\u5b50\u586b\u6ee1\u3002\u90a3\u4e48\u5728\u68c0\u9a8c\u7684\u65f6\u5019\u672c\u5e94\u8be5\u8be5\u4f4d\u7f6e\u4e3a\u7a7a\u7684\u4e0d\u4e3a\u7a7a\u4e86\uff0c\u5219\u6700\u7ec8\u53ef\u80fd\u6070\u597d\u8ba4\u4e3a\u8be5<code>key</code>\u5728\u5176\u4e2d\u3002</p> <p>\u5f53\u7136\uff0c\u5982\u679c\u4e00\u4e2a\u6570\u5728\u6709\u5047\u9633\u6027\u7684\u6761\u4ef6\u4e0b\u90fd\u88ab\u5224\u65ad\u4e3a\u4e0d\u5b58\u5728\uff0c\u5219\u5fc5\u7136\u4e0d\u5b58\u5728\uff0c\u8fd9\u4e5f\u662f\u6570\u636e\u5e93\u7b49\u5e94\u7528\u4f7f\u7528\u5b83\u7684\u6839\u672c\u539f\u56e0\uff0c\u5c31\u662f\u5b83\u53ef\u4ee5\u63d0\u4f9b\u8fd9\u79cd<code>assert</code>\u3002</p>"},{"location":"dataWarehouse/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/#_7","title":"\u6811\u7ed3\u6784","text":""},{"location":"dataWarehouse/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/#bst","title":"BST","text":"<p>\u6027\u8d28</p> <ol> <li>\u82e5\u4efb\u610f\u8282\u70b9\u7684\u5de6\u5b50\u6811\u4e0d\u7a7a\uff0c\u5219\u5de6\u5b50\u6811\u4e0a\u6240\u6709\u8282\u70b9\u7684\u503c\u5747\u5c0f\u4e8e\u5b83\u7684\u6839\u8282\u70b9\u7684\u503c\uff1b</li> <li>\u82e5\u4efb\u610f\u8282\u70b9\u7684\u53f3\u5b50\u6811\u4e0d\u7a7a\uff0c\u5219\u53f3\u5b50\u6811\u4e0a\u6240\u6709\u8282\u70b9\u7684\u503c\u5747\u5927\u4e8e\u5b83\u7684\u6839\u8282\u70b9\u7684\u503c\uff1b</li> <li>\u4efb\u610f\u8282\u70b9\u7684\u5de6\u3001\u53f3\u5b50\u6811\u4e5f\u5206\u522b\u4e3a\u4e8c\u53c9\u67e5\u627e\u6811\uff1b</li> </ol> <p>\u6027\u80fd</p> <p>\u641c\u7d22\uff0c\u63d2\u5165\uff0c\u5220\u9664\u64cd\u4f5c\u5e73\u5747\u90fd\u4e3a<code>O(log n)</code>\u3002\u56e0\u4e3a\u672c\u8d28\u5c31\u662f\u5728<code>\u4e8c\u5206</code>\u3002</p> <p>\u6700\u574f\u60c5\u51b5\u5c31\u662f\u9000\u5316\u4e3a\u4e00\u6761\u8fb9\u7684\u659c\u4e8c\u53c9\u6811(\u6709\u5e8f\u94fe\u8868)\uff0c\u5404\u79cd\u64cd\u4f5c\u90fd\u52a3\u5316\u4e3a<code>O(n)</code>\u3002</p> <p>\u5982\u679c\u8981\u89e3\u51b3\u6df1\u5ea6\u589e\u52a0\u800c\u5f15\u8d77\u7684\u5e73\u5747\u65f6\u95f4\u590d\u6742\u5ea6\u589e\u52a0\uff0c\u5219\u53ef\u4ee5\u8003\u8651\u4f7f\u7528<code>\u5e73\u8861\u6811</code>\u8fdb\u884c\u6df1\u5ea6\u9650\u5236\uff0c\u6bd4\u5982<code>AVL</code>\u6811\uff0c\u5c31\u662f\u5e26\u5e73\u8861\u9650\u5236\u7684<code>BST</code>\u3002\u4f46\u662f\u8fd8\u8981\u6743\u8861\u7ef4\u62a4\u5e73\u8861\u6240\u5e26\u6765\u7684\u989d\u5916\u5f00\u9500\u3002</p>"},{"location":"dataWarehouse/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/#skiplist","title":"SkipList\u5b9e\u73b0","text":"<p>\u8df3\u8dc3\u5217\u8868 - \u7ef4\u57fa\u767e\u79d1\uff0c\u81ea\u7531\u7684\u767e\u79d1\u5168\u4e66 (wikipedia.org)</p> <p>\u80cc\u666f</p> <p>\u8df3\u8dc3\u5217\u8868\u662f\u5728\u5f88\u591a\u5e94\u7528\u4e2d\u6709\u53ef\u80fd\u66ff\u4ee3\u5e73\u8861\u6811\u800c\u4f5c\u4e3a\u5b9e\u73b0\u65b9\u6cd5\u7684\u4e00\u79cd\u6570\u636e\u7ed3\u6784\u3002\u8df3\u8dc3\u5217\u8868\u7684\u7b97\u6cd5\u6709\u540c\u5e73\u8861\u6811\u4e00\u6837\u7684\u6e10\u8fdb\u7684\u9884\u671f\u65f6\u95f4\u8fb9\u754c\uff0c\u5e76\u4e14\u66f4\u7b80\u5355\u3001\u66f4\u5feb\u901f\u548c\u4f7f\u7528\u66f4\u5c11\u7684\u7a7a\u95f4</p> <p>\u8df3\u8868\u5728\u5f88\u591a\u573a\u666f\u4e0b\u53ef\u4ee5\u53d6\u4ee3\u5e73\u8861\u6811\u4ee5\u53ca\u5f31\u5e73\u8861\u6811(\u7ea2\u9ed1\u6811)\u3002</p> <p>\u5b83\u662f\u9488\u5bf9\u6709\u5e8f\u96c6\u5408\u6240\u505a\u51fa\u7684\u4f18\u5316\uff0c\u6bd4\u5982\u9700\u8981\u5bf9\u6709\u5e8f\u96c6\u5408\u505a\u5927\u91cf\u7684\u8303\u56f4(\u6295\u5f71)\u67e5\u627e\u3002\u548c\u54c8\u5e0c\u8868\u4f7f\u7528\u573a\u666f\u5b8c\u5168\u4e0d\u540c\uff0c\u540e\u8005\u5f80\u5f80\u662f\u65e0\u5e8f\u7684\u5e76\u4e14\u6ce8\u91cd<code>k-v</code>\u5b58\u50a8\u3002</p> <p>\u6027\u80fd</p> <p>\u641c\u7d22\uff0c\u63d2\u5165\uff0c\u5220\u9664\u64cd\u4f5c\u5e73\u5747\u90fd\u662f<code>O(logn)</code>\uff0c\u540c\u6837\u662f\u5728\u4e8c\u5206\u3002</p> <p>\u6700\u5dee\u60c5\u51b5\u5747\u662f\u52a3\u5316\u5230<code>O(n)</code>\uff0c\u8fd9\u662f\u5b83\u7684\u7f3a\u70b9\u4e4b\u4e00\u3002</p> <p>\u539f\u7406</p> <p>\u5b83\u662f\u4e00\u79cd\u6982\u7387\u6027\u6570\u636e\u7ed3\u6784\uff0c\u662f\u6709\u666e\u901a\u7684\u6709\u5e8f\u94fe\u8868\u5411\u4e0a\u6309\u5c42\u6784\u5efa\u800c\u6210\u7684\uff0c\u4e5f\u5c31\u662f\u4e0d\u65ad\u5411\u4e0a\u6dfb\u52a0\u7d22\u5f15\u901a\u9053\uff0c\u8fbe\u5230\u4e8c\u5206\u7684\u76ee\u7684\u3002\u7531\u4e8e\u662f\u4e8c\u5206\uff0c\u6240\u4ee5\u5b83\u7684\u5c42\u4e5f\u4e0d\u4f1a\u5f88\u9ad8\uff0c\u4e5f\u5c31\u662f\u4e2a\u4f4d\u6570\u7684\u5c42\u9ad8\u3002</p> <p>\u7b2c<code>i</code>\u5c42\u7684\u5143\u7d20\u5728<code>i+1\u5c42</code>\u7684\u7684\u51fa\u73b0\u6982\u7387\u4e3a\\(p\\)\uff0c\u6bcf\u4e2a\u5143\u7d20\u7684\u51fa\u73b0\u5c42\u6570\u5e73\u5747\u4e3a\\(1 / (1 - p)\\)\u3002\u800c\u6bcf\u4e2a\u5143\u7d20\u53ef\u4ee5\u5904\u4e8e\u591a\u5c42\uff0c\u5c31\u8bf4\u660e\u5176\u53ef\u4ee5\u6709\u591a\u4e2a\u6307\u9488\u3002</p> <p>API</p> <p>Scala\u53ea\u80fd\u4f7f\u7528<code>java.util.concurrent.ConcurrentSkipListMap/Set</code>\uff0c\u5b83\u4eec\u90fd\u5b9e\u73b0\u4e86<code>NavigableMap/Set</code>\u63a5\u53e3\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u652f\u6301\u8fd4\u56de\u67d0\u4e2a\u503c\u533a\u95f4\u7684\u6295\u5f71\u3002</p> <p>\u624b\u6413\u8df3\u8868</p> <p>1206. \u8bbe\u8ba1\u8df3\u8868 - \u529b\u6263\uff08LeetCode\uff09</p> <p>\u7528<code>Scala</code>\u7684\u5b9e\u73b0\u5982\u4e0b</p> Java<pre><code>class Skiplist() {\n  val maxLevel = 32\n  val factor = 0.25\n  //dummy\u5934\u7ed3\u70b9\n  private var head = new SkiplistNode(-1,maxLevel)\n  //\u5f53\u524d\u7684\u6700\u5927\u5c42\u9ad8\n  private var level = 0\n  private var random = new util.Random()\n  //\u65e0\u8bba\u662f\u67e5\u627e\uff0c\u63d2\u5165\uff0c\u5220\u9664\uff0c\u90fd\u662f\u4ecehead\u7684\u6700\u9ad8\u5c42\u5f00\u59cb\n  def search(target: Int): Boolean = {\n    var cur = this.head\n    for(i &lt;- level-1 to 0 by -1){\n      while(cur.forward(i) != null &amp;&amp; cur.forward(i).value &lt; target){\n        cur = cur.forward(i)\n      }\n    }\n    //\u6700\u7ec8\u4f1a\u505c\u5728\u76ee\u6807node\u7684\u524d\u4e00\u4e2anode\u7684level 0\n    cur = cur.forward(0)\n    if(cur != null &amp;&amp; cur.value == target){\n      return true\n    }\n    return false\n  }\n\n  def add(num: Int): Unit = {\n    //\u6bcf\u5c42\u4e2d\u6bd4\u5f53\u524d\u503c\u5c0f\u7684\u6700\u540e\u4e00\u4e2anode\u7684\u5f15\u7528\u96c6\u5408\n    //\n    val update = Array.fill[SkiplistNode](maxLevel)(this.head)\n    var cur = this.head\n    //\u4ece\u5f53\u524d\u6700\u9ad8\u5c42\u5f00\u59cb\u5411\u4e0b\u6bcf\u5c42\u627e\n    for(i &lt;- level - 1 to 0 by -1){\n      while(cur.forward != null &amp;&amp; cur.forward(i).value &lt; num){\n        cur = cur.forward(i)\n      }\n      update(i) = cur\n    }\n    //\u65b0\u63d2\u5165\u7684\u503c\u7684node\u7684\u5c42\u6570\n    val lv = randomLevel()\n    //\u5982\u679c\u968f\u673a\u51fa\u6765\u7684\u5c42\u6570\u6bd4\u4e4b\u524d\u7684\u90fd\u9ad8\uff0c\u5219\u66f4\u65b0level\n    level = level max lv\n    val newNode = new SkiplistNode(num,lv)\n    //\u4ece\u5e95\u5411\u4e0a\u66f4\u65b0\n    for(i &lt;- 0 until lv){\n      //\u63d2\u5165\u5230\u672c\u5c42cur\u7684\u4e0b\u4e00\u4e2a\u8282\u70b9\n      newNode.forward(i) = update(i).forward(i)\n      update(i).forward(i) = newNode\n    }\n  }\n\n  def erase(num: Int): Boolean = {\n    val update = Array.fill[SkiplistNode](maxLevel)(null)\n    var cur = this.head\n    for(i &lt;- level-1 to 0 by -1){\n      while(cur.forward(i) != null &amp;&amp; cur.forward(i).value &lt; num){\n        cur = cur.forward(i)\n      }\n      update(i) = cur\n    }\n    cur = cur.forward(0) //\u5f53\u524d\u8981\u5220\u9664\u7684\u5757\u7684\u6700\u5e95\u5c42\n    //\u5982\u679c\u6ca1\u6709\u8981\u5220\u9664\u7684\u5757\n    if(cur == null || cur.value != num){\n      return false\n    }\n    //\u4ece\u5e95\u5411\u4e0a\u5220\u9664\n    for(i &lt;- 0 until level;if(update(i).forward(i) == cur)){\n      update(i).forward(i) = cur.forward(i)\n    }\n    ////\u6700\u9ad8\u5c42\u4e3a\u7a7a\u5219\u5220\u9664\n    while(level &gt; 1 &amp;&amp; head.forward(level-1) == null){\n      level -= 1\n    }\n    return true\n\n  }\n  //\u6700\u5e95\u5c42\u6bcf\u4e2a\u8282\u70b9\u51fa\u73b0\u5728\u4e0a\u5c42\u7684\u6700\u5927\u5c42\u6570\n  private def randomLevel():Int = {\n    var lv = 1\n    while(random.nextDouble() &lt; factor &amp;&amp; lv &lt; maxLevel){\n      lv += 1\n    }\n    lv\n  }\n\n}\nclass SkiplistNode(_value:Int,_maxLevel:Int){\n  var value = _value\n  //\u8fd9\u662f\u8de8\u5c42\u7684\u591a\u4e2a\u5f15\u7528\uff0c\u4ee3\u8868\u53ef\u80fd\u5b58\u5728\u7684\u6bcf\u4e2a\u5c42\u7684\u4e0b\u4e00\u4e2a\u6307\u5411\n  var forward:Array[SkiplistNode] = Array.fill[SkiplistNode](_maxLevel)(null)\n}\n</code></pre>"},{"location":"dataWarehouse/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/#btree","title":"BTree\u5b9e\u73b0","text":"<p>B\u6811 - \u7ef4\u57fa\u767e\u79d1\uff0c\u81ea\u7531\u7684\u767e\u79d1\u5168\u4e66 (wikipedia.org)</p> <p>\u5b9a\u4e49</p> <p>\u4e00\u79cd\u81ea\u5e73\u8861\u7684\u6811\uff0c\u80fd\u591f\u4fdd\u8bc1\u6570\u636e\u6709\u5e8f\uff0c\u5e76\u5728\u5bf9\u6570\u65f6\u95f4\u5185\u8fdb\u884c\u64cd\u4f5c\uff0c\u53ef\u4ee5\u89c6\u4f5c\u4e00\u4e2a\u4e00\u822c\u5316\u7684BST\uff0c\u6240\u4ee5\u5b83\u4e00\u822c\u4e5f\u79f0\u4e3a<code>\u591a\u8def\u641c\u7d22\u6811</code>\u3002</p> <p>\u901a\u5e38\u4f7f\u7528\u5728\u9700\u8981\u5927\u6570\u636e\u5757\u7ec4\u7ec7\u7684\u573a\u666f\uff0c\u6bd4\u5982\u6570\u636e\u5e93\uff0c\u6587\u4ef6\u7cfb\u7edf\u3002</p> <p>\u9700\u8981\u6ce8\u610f\uff0c\u5b83\u7684\u5185\u90e8\u8282\u70b9\u662f\u548c\u53f6\u5b50\u8282\u70b9\u4e00\u6837\u5b58\u50a8\u6570\u636e(\u952e\u503c\u5bf9)\u7684\u3002</p> <p>\u6027\u80fd</p> <p>\u641c\u7d22\uff0c\u63d2\u5165\uff0c\u5220\u9664\u5e73\u5747\u90fd\u662f<code>O(logn)</code>\uff0c\u5e76\u4e14\u6700\u5dee\u60c5\u51b5\u540c\u6837\u662f<code>O(logn)</code></p> <p>\u539f\u7406</p> <p>B\u6811Java\u4ee3\u7801\u5b9e\u73b0\u4ee5\u53ca\u6d4b\u8bd5 - kosamino - \u535a\u5ba2\u56ed (cnblogs.com)</p> <p>\u8fd9\u91cc\u8fdb\u884c\u8be5\u4ee3\u7801\u7684\u89e3\u6790</p> <p>\u6574\u4f53\u6982\u89c8\uff0c\u4e00\u4e2a<code>BTree</code>\u7c7b\u67093\u4e2a\u9759\u6001\u5185\u90e8\u7c7b\uff1a</p> <ul> <li><code>Entry</code>\uff1a\u952e\u503c\u5bf9kV\u5728BTree\u4e2d\u7684\u57fa\u672c\u62bd\u8c61\uff0c\u4ee3\u8868\u7740\u4e00\u6761\u6570\u636e\uff0c\u5f53\u7136Scala\u53ef\u4ee5\u76f4\u63a5\u7528Tuple\u3002\u5728BTreeNode\u4e2d\u901a\u8fc7\u6570\u7ec4\u5b58\u50a8\u3002</li> <li><code>BTreeNode</code>\uff1a\u4e00\u4e2aBTree\u7684\u8282\u70b9\uff0c\u53ef\u80fd\u662f\u5185\u90e8\u8282\u70b9\uff0c\u6216\u8005\u53f6\u5b50\u8282\u70b9\u3002</li> <li><code>SearchResult</code>\uff1a\u5728\u4e00\u4e2aBTree\u8282\u70b9\u4e2d\u641c\u7d22\u6570\u636e\u7684\u8fd4\u56de\u7ed3\u679c\uff0c\u662f\u4e00\u4e2a<code>V</code>\u7684\u5305\u88c5\u3002</li> </ul> <p>\u9664\u6b64\u4e4b\u5916\uff0c\u8fd8\u6709\u5176\u4ed6\u76846\u4e2a\u6210\u5458\u53d8\u91cf:</p> <ul> <li><code>DEFAULT_T</code>: \u6811\u9ed8\u8ba4\u7684\u5206\u652f\u56e0\u5b50\uff0c\u4e5f\u5c31\u662f\u6700\u5927\u51fa\u5ea6</li> <li><code>t</code> \u6811\u7684\u5206\u652f\u56e0\u5b50\uff0c\u53ef\u7531\u7528\u6237\u5b9a\u4e49\uff0c\u9ed8\u8ba4\u662f<code>DEFAULT_T</code></li> <li><code>minKeySize</code>\uff1a\u6811\u7684\u8282\u70b9\u7684\u6700\u5c0f\u7684\u6570\u636e\u5bf9(entry)\u6570\u91cf\uff0c\u503c\u4e3a<code>t-1</code></li> <li><code>maxKeySize</code>\uff1a\u6811\u7684\u8282\u70b9\u7684\u6700\u5927\u7684\u6570\u636e\u5bf9(entry)\u6570\u91cf\uff0c\u503c\u4e3a<code>2t-1</code></li> <li><code>root</code>\uff1a\u6839\u8282\u70b9</li> <li><code>kComparetor</code>\uff1a\u952e\u7684\u6bd4\u8f83\u903b\u8f91\uff0c\u5982\u679c\u6ca1\u6709\u5b9a\u4e49\u5219\u4f1a\u5f3a\u8f6c\u7136\u540e\u6bd4\u8f83\u3002</li> </ul> <p>\u6570\u636e\u548c\u8282\u70b9\u7684\u7ec4\u7ec7\u903b\u8f91\u5982\u4e0b\uff1a</p> <ul> <li>\u6570\u636e(\u4e00\u4e2a\u4e2a\u7684KV)\u6709\u5e8f\u5b58\u50a8\u5728\u6bcf\u4e2a\u8282\u70b9\u4e0a\u3002</li> <li>\u5982\u679c\u5f53\u524d\u8282\u70b9\u7684\u6709\u5e8f\u6570\u636e\u4e3a<code>x</code>\u4e2a\uff0c\u5219\u8be5\u8282\u70b9\u53ef\u4ee5\u95f4\u63d2<code>x+1</code>\u4e2a\u5b50\u8282\u70b9\uff0c\u4ece\u800c\u5b9a\u4f4d\u5230\u8be5\u8282\u70b9\u7684\u65f6\u5019\u53ef\u4ee5\u8fdb\u884c<code>BST</code>\u7684\u641c\u7d22\u903b\u8f91\u3002</li> </ul> <p>\u770b\u5b8c\u4e86\u6210\u5458\u53d8\u91cf\uff0c\u5219\u63a5\u4e0b\u6765\u8ddf\u7740\u5355\u6d4b\u770b\u6838\u5fc3\u65b9\u6cd5.\u6240\u6709\u6838\u5fc3\u65b9\u6cd5\u90fd\u4ece<code>root</code>\u5f00\u59cb\u8fdb\u5165\u3002</p> <p>\u9996\u5148\u662f<code>insert</code>\u65b9\u6cd5</p> <p></p> <p>\u53ef\u4ee5\u770b\u5230\u5e38\u89c4\u7684\u8c03\u7528\u6808\u5982\u4e0a\u56fe\u6240\u793a\u3002</p> <p>\u4ece<code>insert(k,v)</code>\u65b9\u6cd5\u8fdb\u5165\uff0c\u5982\u679croot\u6ee1\u4e86\uff0c\u5219\u8fdb\u884c\u5206\u88c2\u53d8\u4e3a\u975e\u7a7a\u3002\u7136\u540e\u7edf\u4e00\u8fdb\u884c<code>insertNotFull</code>\u5bf9\u8282\u70b9\u8fdb\u884c\u63d2\u5165\u3002</p> <p>\u540e\u8005\u662f\u4e00\u4e2a\u6838\u5fc3\u903b\u8f91\uff0c\u6240\u4ee5\u6211\u5c06\u4ee3\u7801\u8d34\u51fa:</p> Java<pre><code>    private boolean insertNotFull(BTreeNode&lt;K, V&gt; node, Entry&lt;K, V&gt; entry) {\n        assert node.size() &lt; maxKeySize;\n\n        if (node.isLeaf()) // \u5982\u679c\u662f\u53f6\u5b50\u8282\u70b9\uff0c\u76f4\u63a5\u63d2\u5165\n            return node.insertEntry(entry);\n        else {\n            /* \u627e\u5230entry\u5728\u7ed9\u5b9a\u8282\u70b9\u5e94\u8be5\u63d2\u5165\u7684\u4f4d\u7f6e\uff0c\u90a3\u4e48entry\u5e94\u8be5\u63d2\u5165\n             * \u8be5\u4f4d\u7f6e\u5bf9\u5e94\u7684\u5b50\u6811\u4e2d\n             */\n            SearchResult&lt;V&gt; result = node.searchKey(entry.getKey());\n            // \u5982\u679c\u5b58\u5728\uff0c\u5219\u76f4\u63a5\u8fd4\u56de\u5931\u8d25\n            if (result.isExist())\n                return false;\n            BTreeNode&lt;K, V&gt; childNode = node.childAt(result.getIndex());\n            if (childNode.size() == 2 * t - 1) // \u5982\u679c\u5b50\u8282\u70b9\u662f\u6ee1\u8282\u70b9\n            {\n                // \u5219\u5148\u5206\u88c2\n                splitNode(node, childNode, result.getIndex());\n                /* \u5982\u679c\u7ed9\u5b9aentry\u7684\u952e\u5927\u4e8e\u5206\u88c2\u4e4b\u540e\u65b0\u751f\u6210\u9879\u7684\u952e\uff0c\u5219\u9700\u8981\u63d2\u5165\u8be5\u65b0\u9879\u7684\u53f3\u8fb9\uff0c\n                 * \u5426\u5219\u5de6\u8fb9\u3002\n                 */\n                if (compare(entry.getKey(), node.entryAt(result.getIndex()).getKey()) &gt; 0)\n                    childNode = node.childAt(result.getIndex() + 1);\n            }\n            return insertNotFull(childNode, entry);\n        }\n    }\n</code></pre> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u8fd9\u662f\u4e00\u4e2a\u9012\u5f52\u8c03\u7528\u7684\u903b\u8f91\u3002<code>base case</code>\u5c31\u662f\u5f53\u524d\u8282\u70b9\u4e3a\u53f6\u5b50\u8282\u70b9\uff0c\u5219\u76f4\u63a5<code>insertEntry</code>\u3002\u5177\u4f53\u903b\u8f91\u539f\u4f5c\u8005\u5728\u8fd9\u91cc\u7684\u6bd4\u8f83\u590d\u6742\uff0c\u5982\u679c\u662f<code>Scala</code>\u5219\u53ef\u4ee5\u76f4\u63a5\u8fdb\u884c<code>ListBuffer.insert</code>\uff0c\u4f46\u662f\u8fd9\u91cc\u7684\u968f\u673a\u63d2\u5165\u662f<code>O(n)</code>\u7684\uff0c\u5e94\u8be5\u53ef\u4ee5\u6709\u66f4\u4f73\u7684\u5b9e\u73b0\u3002</p> <p>\u5e38\u89c4\u903b\u8f91\u5c31\u662f\u6839\u636e<code>key</code>\uff0c\u627e\u5230\u5f53\u524d\u952e\u503c\u5bf9\u5e94\u8be5\u63d2\u5165\u7684\u5b50\u6811\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u662f\u5bf9\u5f53\u524d\u8282\u70b9\u5b58\u50a8\u7684\u6709\u5e8f<code>List&lt;Entry&gt;</code>\u8fdb\u884c\u4e8c\u5206\u903b\u8f91\uff0c\u5219\u53ef\u4ee5\u627e\u5230\u5e94\u8be5\u9012\u5f52\u8fdb\u5165\u7684\u5b50\u8282\u70b9\u4f4d\u7f6e\u3002</p> <p>\u5982\u679c\u5b50\u8282\u70b9\u6ee1\u4e86\uff0c\u5148\u5206\u88c2\u53d8\u4e3a\u4e0d\u6ee1\u7684\uff0c\u7136\u540e\u5c06\u5176\u4f20\u5165\u5b50\u6811\u8fdb\u884c\u63d2\u5165\u7684\u9012\u5f52\u903b\u8f91\u76f4\u5230<code>base case</code>\u3002</p> <p>\u8d70\u5230\u8fd9\u91cc\uff0c\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\u5c31\u7b97\u7236\u8282\u70b9\u7684\u6570\u636e\u6ca1\u6ee1\uff0c\u6570\u636e\u4e5f\u5168\u90e8\u662f\u63d2\u5165\u5230\u53f6\u5b50\u8282\u70b9\u624d\u7ed3\u675f\u7684\u3002\u53ef\u80fd\u4f1a\u6709\u8fd9\u6837\u7684\u7591\u95ee\uff1a\u4e0d\u662f\u6240\u6709\u8282\u70b9\u90fd\u5b58\u6570\u636e\u5417\uff0c\u90a3\u4e0a\u9762\u7684\u8282\u70b9\u7684\u6570\u636e\u662f\u600e\u4e48\u6765\u7684\uff1f</p> <p>\u7b54\u6848\u5c31\u5728\u88ab\u591a\u6b21\u8c03\u7528\u7684\u8282\u70b9\u5206\u88c2<code>splitNode</code>\u7684\u903b\u8f91\u4e0a\u3002</p> <p>\u6211\u4eec\u9996\u5148\u6765\u770b\u8fd9\u4e2a\u51fd\u6570\u6700\u5e38\u89c4\u7684\u8c03\u7528\u573a\u666f\uff0c\u4e5f\u5c31\u662f\u5411\u5b50\u8282\u70b9\u8def\u7531\u63d2\u5165\u7684\u65f6\u5019\u53d1\u73b0\u5b83\u6ee1\u4e86\uff0c\u7531\u4e8e\u53ef\u80fd\u662f\u6700\u7ec8\u7684\u53f6\u5b50\u8282\u70b9\uff0c\u4e5f\u5c31\u662f\u63d2\u5165\u6570\u636e\u7684\u8282\u70b9\uff0c\u6240\u4ee5\u5fc5\u987b\u8981\u505a\u5904\u7406\uff1a</p> Java<pre><code>            SearchResult&lt;V&gt; result = node.searchKey(entry.getKey());\n            // \u5982\u679c\u5b58\u5728\uff0c\u5219\u76f4\u63a5\u8fd4\u56de\u5931\u8d25\n            if (result.isExist())\n                return false;\n            BTreeNode&lt;K, V&gt; childNode = node.childAt(result.getIndex());\n            if (childNode.size() == 2 * t - 1) // \u5982\u679c\u5b50\u8282\u70b9\u662f\u6ee1\u8282\u70b9\n            {\n                // \u5219\u5148\u5206\u88c2\n                splitNode(node, childNode, result.getIndex());\n                /* \u5982\u679c\u7ed9\u5b9aentry\u7684\u952e\u5927\u4e8e\u5206\u88c2\u4e4b\u540e\u65b0\u751f\u6210\u9879\u7684\u952e\uff0c\u5219\u9700\u8981\u63d2\u5165\u8be5\u65b0\u9879\u7684\u53f3\u8fb9\uff0c\n                 * \u5426\u5219\u5de6\u8fb9\u3002\n                 */\n                if (compare(entry.getKey(), node.entryAt(result.getIndex()).getKey()) &gt; 0)\n                    childNode = node.childAt(result.getIndex() + 1);\n            }\n            return insertNotFull(childNode, entry);\n        }\n</code></pre> <p>\u4e0a\u8ff0\u51fd\u6570\u662f<code>insertNotNull</code>\u4e2d\u7684\u4e00\u90e8\u5206\u3002\u53ef\u4ee5\u770b\u5230\u8fd9\u65f6\u5019\uff0c\u662f\u5f53\u524d\u8282\u70b9\u4f5c\u4e3a\u7236\u8282\u70b9\uff0c\u800c\u53f6\u5b50\u8282\u70b9\u4f5c\u4e3a\u5b50\u8282\u70b9\u4f20\u5165\uff0c\u7d22\u5f15\u5c31\u662f\u4ece\u7236\u8282\u70b9\u8def\u7531\u5230\u5b50\u8282\u70b9\u7684\u7d22\u5f15\u503c\u3002</p> <p>\u7136\u540e\u5c31\u662f\u5177\u4f53\u903b\u8f91\uff1a</p> Java<pre><code>private void splitNode(BTreeNode&lt;K, V&gt; parentNode, BTreeNode&lt;K, V&gt; childNode, int index) {\n        assert childNode.size() == maxKeySize;\n\n        BTreeNode&lt;K, V&gt; siblingNode = new BTreeNode&lt;K, V&gt;(kComparator);\n        siblingNode.setLeaf(childNode.isLeaf());\n        // \u5c06\u6ee1\u5b50\u8282\u70b9\u4e2d\u7d22\u5f15\u4e3a[t, 2t - 2]\u7684(t - 1)\u4e2a\u9879\u63d2\u5165\u65b0\u7684\u8282\u70b9\u4e2d\n        for (int i = 0; i &lt; minKeySize; ++i)\n            siblingNode.addEntry(childNode.entryAt(t + i));\n        // \u63d0\u53d6\u6ee1\u5b50\u8282\u70b9\u4e2d\u7684\u4e2d\u95f4\u9879\uff0c\u5176\u7d22\u5f15\u4e3a(t - 1)\n        Entry&lt;K, V&gt; entry = childNode.entryAt(t - 1);\n        // \u5220\u9664\u6ee1\u5b50\u8282\u70b9\u4e2d\u7d22\u5f15\u4e3a[t - 1, 2t - 2]\u7684t\u4e2a\u9879\n        for (int i = maxKeySize - 1; i &gt;= t - 1; --i)\n            childNode.removeEntry(i);\n        if (!childNode.isLeaf()) // \u5982\u679c\u6ee1\u5b50\u8282\u70b9\u4e0d\u662f\u53f6\u8282\u70b9\uff0c\u5219\u8fd8\u9700\u8981\u5904\u7406\u5176\u5b50\u8282\u70b9\n        {\n            // \u5c06\u6ee1\u5b50\u8282\u70b9\u4e2d\u7d22\u5f15\u4e3a[t, 2t - 1]\u7684t\u4e2a\u5b50\u8282\u70b9\u63d2\u5165\u65b0\u7684\u8282\u70b9\u4e2d\n            for (int i = 0; i &lt; minKeySize + 1; ++i)\n                siblingNode.addChild(childNode.childAt(t + i));\n            // \u5220\u9664\u6ee1\u5b50\u8282\u70b9\u4e2d\u7d22\u5f15\u4e3a[t, 2t - 1]\u7684t\u4e2a\u5b50\u8282\u70b9\n            for (int i = maxKeySize; i &gt;= t; --i)\n                childNode.removeChild(i);\n        }\n        // \u5c06entry\u63d2\u5165\u7236\u8282\u70b9\n        parentNode.insertEntry(entry, index);\n        // \u5c06\u65b0\u8282\u70b9\u63d2\u5165\u7236\u8282\u70b9\n        parentNode.insertChild(siblingNode, index + 1);\n    }\n</code></pre> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u5176\u5728\u6ee1\u7684\u5b50\u8282\u70b9\uff0c\u4e5f\u5c31\u662f<code>child</code>\u7684\u65c1\u8fb9\u521b\u5efa\u4e00\u4e2a\u5144\u5f1f\u8282\u70b9<code>siblingNode</code>\u3002</p> <p><code>child</code>\u8282\u70b9\u4e00\u5171\u8303\u56f4\u662f\\([0,2t-2]\\)\uff0c\u5219\u5206\u4e3a\u4e09\u90e8\u5206\uff1a</p> <ul> <li>[0, t-2] ,\u4fdd\u7559\u5230child\u8282\u70b9\u7684\u6570\u636e</li> <li>t-1\uff0c\u4e2d\u4f4d\u6570\u7684\u6570\u636e</li> <li>[t,2t-2]\uff0c\u5206\u5230<code>silbingNode</code>\u7684\u6570\u636e\uff0c\u4e4b\u540e<code>childNode</code>\u5c31\u53ef\u4ee5\u5c06\u8fd9\u90e8\u5206\u5220\u9664</li> </ul> <p>\u7136\u540e\u7684\u8bdd\uff0c<code>child</code>\u8282\u70b9\u4e00\u5171\u53ea\u6709<code>t-1</code>\u4e2a\u6570\u636e\u4e86\uff0c\u5e76\u5c06\u4e2d\u4f4d\u6570\u5411\u4e0a\u4f20\u9012\u5230<code>parent</code>\uff0c\u7136\u540e\u5c06<code>siblingNode</code>\u4f5c\u4e3a<code>child</code>\u7684\u5144\u5f1f\u8282\u70b9\u63d2\u5165<code>parent</code>\uff0c</p> <p>\u5e76\u4e14\u4e0a\u53bb\u7684\u4e2d\u4f4d\u6570\u8282\u70b9\uff0c\u5c31\u53ef\u4ee5\u5b8c\u7f8e\u7684\u5728\u7236\u8282\u70b9\u4e2d\u8d77\u5230\u8def\u7531\u5230<code>child/sibling</code>\u8282\u70b9\u7684\u529f\u80fd\u4e86\u3002</p> <p>\u540c\u65f6\u9700\u8981\u6ce8\u610f\uff0c\u8fd9\u4e2a\u8def\u7531\u4e0a\u53bb\u7684\u8282\u70b9\u53ef\u80fd\u4f1a\u6539\u53d8\u672c\u6765\u4e0b\u4e00\u4e2a\u8981\u63d2\u5165\u7684\u5b50\u6811\uff0c\u56e0\u4e3a\u65b0\u589e\u52a0\u4e86\u4e00\u4e2a\u5144\u5f1f\u8282\u70b9\uff0c\u6240\u4ee5\u9700\u8981\u989d\u5916\u5904\u7406\u4e00\u4e0b\u3002</p> <p>\u81f3\u4e8e\u5220\u9664\u903b\u8f91\uff0c\u662fBTree\u771f\u6b63\u590d\u6742\u7684\u5730\u65b9\uff0c\u56e0\u4e3a\u5b83\u8bbe\u8ba1\u5230\u4e86\u7ef4\u6301\u5e73\u8861\u7684\u5de6\u65cb\u53f3\u65cb\u7b49\u903b\u8f91\u3002\u6682\u65f6\u8df3\u8fc7\u3002</p> <p>\u793a\u4f8b</p> <p></p> <p>\u5047\u8bbe\u4e00\u4e2a\u8282\u70b9\u6700\u591a\u53ea\u80fd\u5b58\u50a82\u4e2a\u6570\u636e\u3002\u5219\u6b64\u65f6\uff0c<code>0002</code>\u5c31\u662f<code>node</code>\uff0c\u800c<code>0003,0004</code>\u5c31\u662f<code>childNode</code>\uff0c\u5e76\u4e14<code>childNode</code>\u662f\u6ee1\u7684\u3002</p> <p>\u6309\u903b\u8f91\uff0c\u5982\u679c\u8981\u63d2\u5165<code>0005</code>\uff0c\u5219<code>childNode</code>\u5c31\u9700\u8981\u5206\u88c2\u4e86\u3002\u5219\u5206\u4e3a<code>child/sibling node</code>\uff0c\u5e76\u5c06\u4e2d\u4f4d\u6570\u5411\u4e0a\u3002\u540c\u6837\uff0c\u5982\u679c<code>root</code>\u6ee1\u4e86\uff0c\u5219\u540c\u6837\u9700\u8981\u5206\u88c2\u903b\u8f91\u3002</p> <p></p> <p>\u8fde\u7eed\u5206\u88c2\u7684\u573a\u666f\u5982\u4e0b\uff1a</p> <p></p> <p>\u5206\u88c2\u4e4b\u540e\uff1a</p> <p></p>"},{"location":"dataWarehouse/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/#_8","title":"\u8bbe\u8ba1\u601d\u8def","text":""},{"location":"dataWarehouse/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/#_9","title":"\u4ece\u5f00\u9500\u770b\u8bbe\u8ba1","text":""},{"location":"dataWarehouse/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/#bb-tree","title":"B&amp;B+ Tree","text":"<p>\u4ee5HDD\u4e3a\u4f8b\u5b50\u3002</p> <p>\u9996\u5148\u662f\u4f20\u7edf\u7684\u4e8c\u5206\u8bbe\u8ba1\uff1a</p> <p>\u5047\u8bbe\u5f53\u524d\u7684\u6570\u636e\u5e93\u5b58\u50a8\u4e86\u6709<code>100\u4e07</code>\u6570\u636e\u7684\u6709\u5e8f\u5217\u8868\uff0c\u6bcf\u6761\u6570\u636e<code>150</code>\u5b57\u8282\uff0c\u5e76\u5047\u8bbe\u6570\u636e\u5168\u5728\u78c1\u76d8\u4e0a\u3002</p> <p>\u6211\u4eec\u90fd\u77e5\u9053\uff0c\u6570\u636e\u5728\u78c1\u76d8\u4e0a\u5e76\u4e0d\u662f\u6309\u7167<code>\u6247\u533a</code>\u7684\u5f62\u5f0f\u5b58\u50a8\uff0c\u800c\u662f\u6309\u7167<code>Block</code>\uff0c\u901a\u5e38\u4e00\u4e2a<code>block = 4KB\u300116KB</code>\u3002\u800c\u5185\u5b58\u9875\u901a\u5e38\u662f\u76f8\u7b49\uff0c\u6216\u8005\u4e0e\u5176\u6709\u500d\u6570\u5173\u7cfb(\u5927\u5c0f\u5173\u7cfb\u4e0d\u4e00\u5b9a)\u3002\u5219\u73b0\u5728\u4e00\u4e2a<code>block</code>\u5b58\u50a8\u4e86<code>100 record</code>\uff0c\u5e76\u4e14\u5047\u8bbe\u5185\u5b58\u9875\u5927\u5c0f\u662f<code>4KB</code>\u3002</p> <p>\u5047\u8bbe\u78c1\u76d8\u7684\u968f\u673aIO\uff0c\u5bfb\u627e\u5230\u4e00\u4e2a<code>Block</code>\u7684\u65f6\u95f4\u662f<code>\u5bfb\u9053\u65f6\u95f4 + \u65cb\u8f6c\u65f6\u95f4 = 10\u6beb\u79d2</code>\u3002</p> <p>\u73b0\u5728\uff0c\u6211\u4eec\u53ef\u4ee5\u5bf9\u8be5\u6709\u5e8f\u5217\u8868\u8fdb\u884c\u4e8c\u5206\u67e5\u627e\uff0c\u5219\u64cd\u4f5c\u6b21\u6570\u662f<code>log2 1000000</code> = 20\u6b21\u3002\u56e0\u4e3a\u5047\u8bbe\u6240\u6709\u6570\u636e\u90fd\u5728\u78c1\u76d8\u4e2d\uff0c\u6240\u4ee5\u7406\u8bba\u4e0a\u8fd920\u6b21\u90fd\u9700\u8981\u8fdb\u884c\u78c1\u76d8IO\u3002</p> <p>\u4f46\u662f\u663e\u7136\u3002\u56e0\u4e3a\u8bfb\u53d6\u7684\u7c92\u5ea6\u90fd\u662f\u9875\uff0c\u6240\u4ee5\u6211\u4eec\u5f53\u4e8c\u5206\u7684\u8303\u56f4\u7f29\u5c0f\u5230100\u5de6\u53f3\u7684\u65f6\u5019\uff0c\u6211\u4eec\u5b8c\u5168\u53ef\u4ee5\u5c06\u6570\u636e\u5c40\u9650\u5728\u5185\u5b58\u4e2d\u8bfb\u53d6\u5230\u7684<code>Block/page</code>\uff0c\u800c\u4e0d\u7528\u518d\u53bb\u8fdb\u884cIO\u3002\u6240\u4ee5\u603b\u5171\u7684\u78c1\u76d8IO\u65f6\u95f4\u662f<code>14\u6b21\u5de6\u53f3</code>\uff0c\u6211\u4eec\u5c06\u6700\u540e\u5728100\u8303\u56f4\u4e0a\u8fdb\u884c\u7684\u5927\u7ea6<code>6-7</code>\u6b21\u64cd\u4f5c\u53ea\u7528\u5185\u5b58\u3002</p> <p>\u539f\u59cb\u603b\u5f00\u9500: 20\u6b21\u4e8c\u5206\uff0c\u5176\u4e2d14\u6b21\u6709\u78c1\u76d8IO\uff0c6\u6b21\u7eaf\u5185\u5b58\u3002</p> <p>\u4f18\u5316\u601d\u8def\u662f\u4ec0\u4e48\u5462\uff1f</p> <p>\u6211\u4eec\u53ef\u4ee5\u5c06\u78c1\u76d8\u4e0a\u5b58\u50a8\u6570\u636e\u7684<code>block</code>\u7684\u7b2c\u4e00\u4e2a<code>block</code>\u7684\u7b2c\u4e00\u7b14<code>record</code>\u5efa\u7acb\u7d22\u5f15\u3002\u800c\u672c\u8eab\u56e0\u4e3a\u6709\u5e8f\u7ed3\u6784\uff0c\u4e00\u4e2a<code>block</code>\u5185\u7684\u6570\u636e\u90fd\u662f\u6709\u5e8f\u7684\u3002</p> <p>\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7<code>block</code>\u7684\u7c92\u5ea6\u8fdb\u884c\u4e8c\u5206\u3002</p> <p>\u5177\u4f53\u6765\u8bf4\uff0c\u6709<code>100 \u4e07</code>\u7684\u6570\u636e\uff0c\u800c\u6bcf\u4e2a<code>block</code>\u6709100\u7b14\u8bb0\u5f55\uff0c\u4e00\u5171\u5c31\u9700\u898110000\u4e2a\u3002\u6240\u4ee5\u6211\u4eec\u7ef4\u62a4\u8fd9\u62bd\u53d6\u51fa\u6765\u7684<code>10000</code>\u4e2a<code>\u7d22\u5f15record</code>\uff0c\u5728\u5176\u4e0a\u8fdb\u884c\u4e8c\u5206\uff0c\u8fd9\u6837\u7684\u603b\u4e8c\u5206\u6b21\u6570\u5c31\u662f<code>14</code>\u6b21\uff0c\u800c\u4e0d\u662f\u4e4b\u524d\u7684<code>20</code>\u6b21\u3002</p> <p>\u800c\u603b\u4e8c\u5206\u6570\u662f<code>14</code>\u6b21\uff0c\u5185\u5b58\u9875\u548c<code>Block</code>\u90fd\u662f<code>4KB</code>\uff0c\u5219\u53ea\u9700\u8981<code>8</code>\u6b21IO\uff0c\u6700\u540e6\u6b21\u64cd\u4f5c\u53ea\u9700\u8981\u5185\u5b58\u3002</p> <p>\u5230\u6b64\u7684\u603b\u5f00\u9500\uff1a14\u6b21\u4e8c\u5206\uff0c\u5176\u4e2d8\u6b21\u6709\u78c1\u76d8IO\uff0c6\u6b21\u7eaf\u5185\u5b58\u3002</p> <p>\u800c10000\u5927\u5c0f\u7684\u8f85\u52a9\u7d22\u5f15(\u7a00\u758f\u7d22\u5f15)\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u5176\u4e0a\u518d\u6b21\u521b\u5efa\u7d22\u5f15\uff0c\u518d\u6b21\u51cf\u5c11\u4e8c\u5206\u6b21\u6570\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u8fd910000\u7b14\u6709\u7d22\u5f15\u529f\u80fd\u7684\u6570\u636e\uff0c\u53ef\u4ee5\u5b58\u50a8\u5230100\u4e2aBlock\u4e2d\uff0c\u5f53\u7136\u6bcf\u4e2aBlock\u4e2d\u7684\u6570\u636e\u662f\u6709\u5e8f\u7684\u3002\u800c\u5bf9\u8fd9100\u4e2aBlock\u7684\u6bcf\u4e2a\u7684\u7b2c\u4e00\u6761\u6570\u636e\uff0c\u62bd\u51fa\u6765\u5c31\u53ef\u4ee5\u505a\u4e00\u4e2a100\u5927\u5c0f\u7684\u7d22\u5f15\uff0c\u5e76\u5c06\u4ed6\u4eec\u7f13\u5b58\u5230\u5185\u5b58\u4e2d\u3002</p> <p>\u5219\u6b64\u65f6\u8981\u67e5\u627e\u4e00\u6761\u8bb0\u5f55\uff0c\u5c31\u662f\u5bf9\u4e8c\u7ea7\u7d22\u5f15(size=100)\u505a6\u6b21\u4e8c\u5206\uff0c\u4f46\u662f\u7eaf\u5185\u5b58\u4e0d\u9700\u8981\u78c1\u76d8IO(\u521d\u6b21\u9700\u8981IO)\u3002\u7136\u540e\u9700\u8981\u5bf9\u627e\u5230\u7684\u5927\u5c0f\u4e3a100\u7684\u7d22\u5f15\u8fdb\u884c\u4e00\u6b21\u78c1\u76d8IO\u8bfb\u53d6\u5230\u5185\u5b58\u4e2d\uff0c\u8fdb\u884c6\u6b21\u4e8c\u5206\uff0c\u5f97\u5230\u6570\u636e\u5757\u7684Block\u4f4d\u7f6e\u3002\u6700\u540e\u5230\u5185\u5b58\uff0c\u8fdb\u884c6\u6b21\u7eaf\u5185\u5b58\u64cd\u4f5c\u5373\u53ef\u3002</p> <p>\u5230\u6b64\u7684\u5f00\u9500\uff1a18\u6b21\u4e8c\u5206 + 3 \u6b21\u78c1\u76d8IO\uff0c\u53ef\u4ee5\u89c6\u4f5c\u4e00\u6b21\u5185\u5b58\u64cd\u4f5c\u66ff\u6362\u4e86\u4e00\u4e2a\u78c1\u76d8\u64cd\u4f5c\uff0c\u5f53\u7136\u6027\u80fd\u66f4\u52a0\u63d0\u5347\u3002</p> <p>\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0cB\u7cfb\u5217\u7684\u6811\u5c31\u662f\u4e3a\u51cf\u5c11\u78c1\u76d8IO\u800c\u751f\u7684\uff0cB\u6811\u5c31\u662f\u5b8c\u5168\u5b9e\u73b0\u4e86\u4e0a\u9762\u7684\u8bbe\u8ba1\uff0c\u4e00\u7ea7\u7d22\u5f15\u5c31\u662f\u6811\u7684\u4e00\u5c42\u3002</p> <p>\u90a3B Tree \u548c B+ Tree\u7684\u533a\u522b\u662f\u4ec0\u4e48\u5462\uff1f</p> <p></p> <p>\u53ef\u4ee5\u770b\u5230\uff0cb+\u6811\u7684\u5f62\u5f0f\u5982\u4e0a\u56fe\u6240\u793a\u3002\u6839\u4e0a\u7684<code>0002</code>\uff0c\u5b9e\u9645\u4e0a\u5e76\u6ca1\u6709\u5b58\u50a8\u771f\u6b63\u7684\u6570\u636e\uff0c\u53ea\u6709<code>K</code>\u800c\u6ca1\u6709\u503c\uff0c\u4e5f\u5c31\u662f\u5bf9\u5e94\u7684<code>V</code>\uff0c\u5b8c\u6574\u7684\u6570\u636e\u4f1a\u5728\u53f6\u5b50\u8282\u70b9\u5b58\u50a8\u4e00\u4efd\u3002</p> <p>\u96be\u9053\u8fd9\u4e0d\u662f\u5197\u4f59\u5b58\u50a8\u4e86\u5417\uff1f</p> <p>\u662f\uff0c\u4f46\u662f\u5176\u5e26\u6765\u7684\u4f18\u52bf\u662f\u5f88\u5927\u7684\u3002</p> <p>\u4e4b\u524d\u7684B\u6811\uff0c\u6bcf\u4e2a<code>block</code>\u53ea\u80fd\u5b58\u50a8<code>100\u6761\u5927\u5c0f\u4e3a150\u5b57\u8282\u7684record</code>\uff0c\u4f46\u662f\u73b0\u5728\u5982\u679c\u53ea\u5b58<code>K</code>\uff0c\u5219\u53ef\u4ee5\u5b58<code>4000\u6761</code>\u3002</p> <p>\u90a3\u4e48\u518d\u6b21\u8ba1\u7b97\uff1a\u4e00\u5171100\u4e07\u6761\u6570\u636e\uff0c\u5e95\u5c42\u5b58\u50a8\u572810000Block\uff0c\u8fd9\u4e2a\u662f\u4e0d\u53d8\u7684\u3002\u4f46\u662f\u6b64\u65f6\u62bd\u53d6\u51fa\u6765\u768410000\u4e2a\u7d22\u5f15\uff0c\u4e0d\u518d\u662f<code>record</code>\uff0c\u800c\u662f\u5355\u7eaf\u7684<code>K</code>\u3002\u5047\u8bbe\u5176\u5b9e<code>Int</code>\uff0c\u5219\u9700\u8981\u7684\u5b58\u50a8\u7a7a\u95f4\u662f<code>4B * 10000 = 40KB</code>\uff0c\u9700\u89813\u4e2aBlock\u5b58\u50a8\u3002\u5219\u6b64\u65f6\u8fd9\u4e09\u4e2aBlock\u53ef\u4ee5\u76f4\u63a5\u7f13\u5b58\u5728\u5185\u5b58\u3002</p> <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u53ea\u9700\u8981\u4e00\u7ea7\u7d22\u5f15\u5c31\u8db3\u591f\u4e86\uff0c\u5e76\u4e14\u8fd9\u4e00\u7ea7\u7d22\u5f15\u7684\u5b58\u50a8\u91cf\u8fdc\u4e0d\u6b62\u4e8e\u6b64\u3002</p> <p>\u4e00\u822c3\u5c42\u7684B+\u6811\u5c31\u53ef\u4ee5\u5b58\u50a8\u5343\u4e07\u7ea7\u522b\u7684\u6570\u636e\uff0c4\u5c42\u7684B+\u6811\u53ef\u4ee5\u5b58\u50a8\u5343\u4ebf\u7ea7\u522b\u7684\u6570\u636e\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u6700\u5927\u7684\u78c1\u76d8IO\u6b21\u6570\u4e5f\u5c313\uff0c4\u6b21\u5c31\u591f\u4e86\u3002</p>"},{"location":"dataWarehouse/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/#_10","title":"\u4ece\u8bf7\u6c42\u5904\u7406\u770b\u8bbe\u8ba1","text":""},{"location":"dataWarehouse/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/#lsm","title":"LSM","text":"<p>The Log-Structured Merge-Tree</p> <p>\u5bf9\u4e8e\u4e00\u4e2a\u5355\u673aKV\u5b58\u50a8\u5f15\u64ce\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u5b83\u66b4\u9732\u7ed9\u7528\u6237\u7684API\u5f52\u7eb3\u4e3a\u4e09\u7c7b</p> <ul> <li>set</li> <li>get</li> <li>delete</li> </ul> <p>\u5b58\u50a8\u4ecb\u8d28</p> <p>\u9996\u5148\u58f0\u660e\uff0cLSM\u9488\u5bf9\u7684\u662f\u6d77\u91cf\u6570\u636e\u7684\u5199\u5165\u95ee\u9898(\u6bd4\u5982\u65e5\u5fd7\u6570\u636e)\u3002\u6240\u4ee5\uff0c\u5fc5\u7136\u8981\u9009\u62e9\u78c1\u76d8\u4f5c\u4e3a\u5b58\u50a8\u4ecb\u8d28\u3002</p> <p>\u5728\u64cd\u4f5c\u7cfb\u7edf\u7684\u90e8\u5206\uff0c\u6211\u4eec\u66fe\u7ecf\u5206\u6790\u8fc7\u65e5\u5fd7\u7ed3\u6784\u6587\u4ef6\u7cfb\u7edf\u7684\u8bbe\u8ba1\uff0c\u5176\u5b9eLSM\u5c31\u662f\u5176\u4e2d\u7684\u4e00\u79cd\u5b9e\u73b0\u65b9\u5f0f\u3002</p> <p>\u5199\u8bf7\u6c42</p> <p>\u9488\u5bf9\u5199\u8bf7\u6c42\uff0c\u7531\u4e8e\u8981\u5c06\u5199\u4f18\u5316\u5230\u6781\u81f4\uff0c\u800c\u78c1\u76d8\u7684\u987a\u5e8f\u5199\u548c\u968f\u673a\u5199\u7684\u6027\u80fd\u4e0d\u662f\u4e00\u4e2a\u91cf\u7ea7\uff0c\u6240\u4ee5\u5fc5\u7136\u8981\u9009\u62e9\u987a\u5e8f\u5199\uff0c\u5e76\u4e14\u662f\u6279\u91cf\u5199\u3002</p> <p>\u6700\u7b80\u5355\u7684\u65b9\u5f0f\uff0c\u5c31\u662f\u901a\u8fc7<code>append-only</code>\u65b9\u5f0f\u6765\u5199\u3002</p> <p>\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e2a\u65e5\u5fd7\u6587\u4ef6\uff0c\u8bb0\u5f55\u6240\u6709\u7528\u6237\u53d1\u8d77\u7684\u8bf7\u6c42(\u6bd4\u5982<code>add k-v</code>,<code>del k-v</code>)\u7b49\u3002\u8fd9\u4e2a\u65e5\u5fd7\u6587\u4ef6\u662f<code>append-only</code>\u7684\u3002</p> <p>\u8bfb\u8bf7\u6c42</p> <p>\u5199\u8bf7\u6c42\u7684\u65b9\u5f0f\u5df2\u7ecf\u901a\u8fc7WAL\u65b9\u5f0f\u8fdb\u884c\u5904\u7406\uff0c\u90a3\u4e48\u8bfb\u8bf7\u6c42\u5462\uff1f\u53ef\u4ee5\u5728\u5185\u5b58\u4e2d\u7ef4\u62a4\u4e00\u4efd\u5168\u5c40\u6570\u636e\u7684\u7d22\u5f15\u4fe1\u606f\uff0c\u67e5\u8be2\u7684\u65f6\u5019\u901a\u8fc7\u8be5\u7d22\u5f15\u8fdb\u884c\u67e5\u8be2\u5373\u53ef\u3002</p> <p>\u5176\u5b9e\u8fd9\u91cc\u4e5f\u662f\u7d22\u5f15\u548c\u6570\u636e\u5171\u5b58</p> <p>\u7a7a\u95f4\u538b\u7f29</p> <p>\u901a\u8fc7\u591a\u4e2a\u6570\u636e\u64cd\u4f5c\uff0c\u53ef\u80fd\u8fd8\u6709\u8fc7\u671f\u7684\u6570\u636e\u4fdd\u5b58\u5728\u78c1\u76d8\u4e2d\uff0c\u53ef\u4ee5\u901a\u8fc7\u538b\u7f29<code>compact</code>\u7684\u65b9\u5f0f\u5bf9\u6570\u636e\u5b58\u50a8\u8fdb\u884c\u538b\u7f29\u3002</p> <p>\u538b\u7f29\u4f18\u5316</p> <p>\u7531\u4e8e\u6570\u636e\u6587\u4ef6\u662f\u4e34\u754c\u8d44\u6e90\uff0c\u6240\u4ee5\u8bfb\u5199\u5e76\u53d1\u5fc5\u7136\u9700\u8981\u63a7\u5236\u3002\u4e3a\u4e86\u51cf\u5c11\u963b\u585e\u95ee\u9898\uff0c\u53ef\u4ee5\u5bf9\u6587\u4ef6\u8fdb\u884c\u5206\u6bb5\uff0c\u6bcf\u6b21\u53ea\u5728\u4e0d\u76f8\u5173\u7684\u6bb5\u4e0a\u8fdb\u884c\u538b\u7f29\u5373\u53ef\u3002</p> <p>\u538b\u7f29\u8017\u65f6\u95ee\u9898\u4f18\u5316\uff1a\u53ef\u4ee5\u5728\u5b58\u50a8\u7684\u65f6\u5019\u5c06\u6570\u636e\u6709\u5e8f\u5b58\u50a8\uff0c\u5219\u8fdb\u884c\u538b\u7f29\u7684\u65f6\u5019\u53ef\u4ee5\u8fdb\u884c\u591a\u8def\u5f52\u5e76\u6392\u5e8f(<code>\u5408\u5e76k\u4e2a\u6709\u5e8f\u94fe\u8868</code>)\u3002</p> <p>\u6570\u636e\u6709\u5e8f</p> <p>\u65e2\u7136\u9700\u8981\u6570\u636e\u6709\u5e8f\u5b58\u50a8\uff0c\u53f3\u8981\u6c42\u53ea\u8ffd\u52a0\uff0c\u90a3\u4e48\u5982\u4f55\u5b9e\u73b0\u5462\uff1f\u5177\u4f53\u65b9\u5f0f\u5c31\u662f\u6309\u6279\u5199\u5165\u7684\u65f6\u5019\uff0c\u5c06\u6570\u636e\u5728\u5185\u5b58\u4e2d\u8fdb\u884c\u6709\u5e8f\u6392\u5e8f\u518d\u5199\u5165\u3002</p> <p>\u6700\u7ec8\u65b9\u6848</p> <p><code>write</code>\u6d41\u7a0b\u5982\u4e0b:</p> <ol> <li>\u9884\u5199WAL\u65e5\u5fd7</li> <li>\u5199MemTable    MemTable\u5728\u8fbe\u5230\u9608\u503c\u4e4b\u540e\uff0c\u8f6c\u6362\u4e3aimmutable,\u5e76\u91cd\u65b0\u5f00\u4e00\u4e2aMemTable\u3002Immutable\u5185\u90e8\u6570\u636e\u6709\u5e8f(<code>\u56e0\u4e3a\u672c\u8eab\u5c31\u662f\u6709\u5e8f\u6570\u636e\u7ed3\u6784\uff0c\u6bd4\u5982B+Tree\u6216\u8005\u8df3\u8868</code>)\uff0c\u5e76\u88ab\u4e00\u4e2a\u5199\u5b88\u62a4\u7ebf\u7a0b\u5b9a\u65f6\u5237\u5165\u78c1\u76d8\uff0c\u53d8\u4e3aSSTable\u3002</li> </ol> <p><code>Read</code>\u6d41\u7a0b\u5982\u4e0b:</p> <p>\u7531\u4e8e\u5199\u5165\u8bbe\u8ba1\uff0c\u6240\u4ee5\u6570\u636e\u7684\u65b0\u65e7\u5173\u7cfb: memtable &gt; immutable &gt; SSTable</p> <p>\u6240\u4ee5\u5c31\u9700\u8981\u6309\u7167\u8fd9\u4e2a\u987a\u5e8f\u8fdb\u884c\u8bfb\u53d6\uff0c\u4e00\u4f46\u627e\u5230\uff0c\u5219\u505c\u6b62\u3002\u5e76\u4e14\u53ef\u4ee5\u901a\u8fc7<code>bloomFilter</code>\u7684\u65b9\u5f0f\u5bf9\u6570\u636e\u8fdb\u884c\u8fc7\u6ee4\uff0c\u52a0\u901f\u5bfb\u627e\u3002</p>"},{"location":"dataWarehouse/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/#_11","title":"\u5177\u4f53\u5b9e\u73b0","text":""},{"location":"dataWarehouse/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/#innodb","title":"InnoDB","text":""},{"location":"dataWarehouse/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/#_12","title":"\u884c\u683c\u5f0f","text":"<p>\u5173\u7cfb\u578b\u6570\u636e\u5e93\u90fd\u662f\u884c\u5b58\u7ed3\u6784\u3002\u6240\u4ee5\u5982\u4f55\u8bbe\u8ba1\u884c\u7684\u7ed3\u6784\u6765\u4fdd\u6301\u9ad8\u6548\u7684\u5b58\u50a8\u4e0e\u67e5\u627e\u662f\u5f88\u91cd\u8981\u7684\u3002</p> <p>Compact\u683c\u5f0f</p> <p>\u6bcf\u884c\u6570\u636e\u7684\u5b58\u50a8\uff0c\u5177\u4f53\u5206\u4e3a\u5143\u6570\u636e\u4fe1\u606f + \u771f\u5b9e\u6570\u636e\u3002</p> <p><code>\u5143\u6570\u636e\u4fe1\u606f</code>\uff1a</p> <ul> <li>\u53d8\u957f\u5b57\u6bb5\u7684\u957f\u5ea6\u5217\u8868\uff0c\u8fd9\u91cc\u548c\u5217\u7684\u987a\u5e8f\u662f\u5012\u5e8f\u5b58\u50a8</li> <li>NULL\u503c\u5217\u8868\uff0c\u662f\u4e00\u4e2a<code>BitMap</code>\u3002\u6ce8\u610f<code>Not Null</code>\u9650\u5b9a\u7684\u5217\u4e0d\u4f1a\u88ab\u8ba1\u7b97</li> <li>\u8bb0\u5f55\u5934\u4fe1\u606f,\u56fa\u5b9a\u76845\u4e2a\u5b57\u8282\uff0c\u5b58\u50a8\u672c\u884c\u7684\u5404\u79cd\u4fe1\u606f\u3002</li> </ul> <p><code>\u771f\u5b9e\u6570\u636e\u4fe1\u606f</code>\uff0c\u5c31\u662f\u8fd9\u4e00\u884c\u6570\u636e\u6bcf\u5217\u7684\u503c\uff0c\u4e5f\u5c31\u662f\u8868\u4e2d\u770b\u5230\u7684\u4e00\u884c\u6570\u636e\uff0c\u4f46\u662f\uff0c<code>InnoDB</code>\u4f1a\u540c\u65f6\u5c06\u6dfb\u52a03\u4e2a\u9690\u85cf\u5217:</p> <ul> <li><code>row_id</code>\uff0c\u884cID\uff0c\u6ca1\u6709\u6307\u5b9a\u4e3b\u952e\u7684\u60c5\u51b5\u4e0b\u5b83\u4f1a\u6210\u4e3a\u4e3b\u952e\u3002</li> <li><code>trx_id</code>\uff0c\u4e8b\u52a1ID</li> <li><code>roll_pointer</code>\uff0c\u56de\u6eda\u6307\u9488</li> </ul> <p>\u63a5\u4e0b\u6765\uff0c\u7528\u4e00\u4e2a\u5177\u4f53\u4f8b\u5b50\u6765\u770b</p> varchar(16) char varchar(16) aaa bb c dd Null Null <p>\u5219\u8fd9\u4e2a\u8868\u7684\u7b2c\u4e00\u884c\u6570\u636e\u7684Compact\u683c\u5f0f\u5982\u4e0b\uff1a</p> <p>\u5143\u6570\u636e\u4fe1\u606f</p> <ul> <li>\u53d8\u957f\u5b57\u6bb5\u957f\u5ea6\u5217\u8868\uff1a[01,03],</li> <li>Null\u503c\u5217\u8868\uff1a\u4e00\u4e2abitmap\uff0c[110] -&gt; 6,\u5b9e\u9645\u5b58\u50a8\u7684\u65f6\u5019\u5c31\u662f\u7528\u6574\u65706\u5b58\u50a8</li> <li>\u8bb0\u5f55\u5934\u4fe1\u606f</li> </ul> <p>\u6570\u636e\u4fe1\u606f</p> <p>\u4ece\u5de6\u5230\u53f3\u4f9d\u6b21\u662f\u4e09\u4e2a\u9690\u85cf\u5217\uff0c\u7136\u540e\u662fc1\uff0cc2 ....</p> <p>\u9700\u8981\u6ce8\u610f\uff0c\u7531\u4e8e\u53ef\u53d8\u5217\u7684\u5b58\u5728\uff0c\u5982\u679c\u4e00\u884c\u6570\u636e\u7684\u67d0\u4e2a\u5217\u6570\u636e\u592a\u5927\uff0c\u8d85\u8fc7\u4e86<code>Innodb</code>\u7684\u4e00\u4e2a\u9875\uff0c\u4e5f\u5c31\u662f<code>16KB</code>\uff0c\u5219\u4f1a\u5728\u8be5\u5217\u7684\u4f4d\u7f6e\u8bb0\u5f55\u4e00\u90e8\u5206\u6570\u636e\uff0c\u4ee5\u53ca\u6307\u5411\u5176\u4ed6\u5b58\u50a8\u8be5\u5217\u6570\u636e\u7684\u9875\u7684\u6307\u9488\u3002Text\u7c7b\u578b\uff0cvarchar\u7c7b\u578b\u90fd\u53ef\u80fd\u6210\u4e3a\u6ea2\u51fa\u5217\u3002</p> <p>Dynamic\u884c\u683c\u5f0f</p> <p>\u5176\u662f\u9ed8\u8ba4\u7684\u884c\u683c\u5f0f\uff0c\u5176\u548cCompact\u683c\u5f0f\u7684\u533a\u522b\u5c31\u662f\u5176\u4f1a\u5c06\u6ea2\u51fa\u5217\u5168\u90e8\u5b58\u50a8\u5230\u53e6\u4e00\u9875\u4e0a\uff0c\u672c\u884c\u4f4d\u7f6e\u53ea\u4fdd\u7559\u4e00\u4e2a\u6307\u9488\u5373\u53ef\u3002</p>"},{"location":"dataWarehouse/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/#_13","title":"\u6570\u636e\u9875","text":"<p>userRcords</p> <p>\u9996\u5148\uff0c\u6bcf\u6b21\u7528\u6237\u63d2\u5165\u4e00\u6761\u6570\u636e\uff0c\u90fd\u662f\u5411\u9875\u7533\u8bf7\u7a7a\u95f2\u7a7a\u95f4\uff0c\u7136\u540e\u5b58\u50a8\u5230<code>user records</code>\u90e8\u5206\u3002</p> <p>\u591a\u884c\u6570\u636e\u6309\u7167<code>Dynamic</code>\u683c\u5f0f\u6309\u4e3b\u952e\u987a\u5e8f\u7d27\u5bc6\u5b58\u50a8\u5728\u540c\u4e00\u4e2a\u9875\u4e2d\uff0c\u4e00\u4e2a\u9875\u7684\u5934\u90e8\u548c\u5c3e\u90e8\u5206\u522b\u662f\u4e24\u4e2a\u865a\u62df\u7684\u6570\u636e\uff0c\u4ee3\u8868\u672c\u9875\u7684\u6700\u5c0f\u548c\u6700\u5927<code>record</code>.</p> <p>\u4e4b\u524d\u6211\u4eec\u8bf4\u7684\u8bb0\u5f55\u5934\u4fe1\u606f\u4e4b\u4e2d\uff0c\u6709\u4e00\u4e2a\u5b57\u6bb5\u5c31\u662f<code>next_record</code>\uff0c\u5176\u5c06\u591a\u884c\u6570\u636e\u7684\u771f\u5b9e\u6570\u636e\u90e8\u5206(\u975e\u5143\u6570\u636e\u4fe1\u606f)\u4e32\u8054\u8d77\u6765\uff0c\u4e00\u884c\u7684next_record\u5b58\u50a8\u7684\u5c31\u662f\u4e0b\u4e00\u884c\u771f\u5b9e\u6570\u636e\u5f00\u5934\u5730\u5740\u7684\u6307\u9488\u3002</p> <p>\u9875\u76ee\u5f55</p> <p>\u5c31\u662f\u5728\u8fd9\u4e00\u4e2a<code>16KB</code>\u5927\u5c0f\u7684\u9875\u4e2d\uff0c\u518d\u5212\u5206\u4e3a\u7ec4\uff0c\u7531\u4e8e\u662f\u6309\u7167\u987a\u5e8f\u7ec4\u7ec7\u7684\uff0c\u6240\u4ee5\u5c06\u6bcf\u7ec4\u7684\u6700\u503c\u63d0\u53d6\u51fa\u6765\uff0c\u5c31\u53ef\u4ee5\u6784\u5efa\u7d22\u5f15\uff0c\u4ece\u800c\u8fdb\u884c\u591a\u8def\u641c\u7d22\u3002</p>"},{"location":"dataWarehouse/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/#_14","title":"\u7d22\u5f15","text":"<p><code>InnoDB</code>\u4e2d\u7ed9\u7d22\u5f15\u8fdb\u884c\u4e86\u5206\u7c7b\uff0c\u5177\u4f53\u6709\u4ee5\u4e0b\u51e0\u79cd</p> <p>\u805a\u7c07\u7d22\u5f15</p> <p>\u6b63\u5e38\u60c5\u51b5\u4e0b,<code>InnnoDB</code>\u4e2d\u6240\u6709\u7684\u6570\u636e\u90fd\u662f\u901a\u8fc7\u4e3b\u952e\u503c\u6709\u5e8f\u5b58\u50a8\u5728B+\u6811\u7684\u5f62\u5f0f\u7ec4\u7ec7\u8d77\u6765\uff0c\u8fd9\u79cd\u6700\u5e38\u89c4\u7684\u65b9\u5f0f\u5176\u5b9e\u4e5f\u662f\u4e00\u79cd\u7d22\u5f15\uff0c\u88ab\u79f0\u4e3a<code>\u805a\u7c07\u7d22\u5f15</code>\u3002</p> <p>\u7d22\u5f15\u5373\u6570\u636e\uff0c\u6570\u636e\u5373\u7d22\u5f15\uff0c\u8bf4\u7684\u5c31\u662f\u5b83\u3002</p> <p>\u4e8c\u7ea7\u7d22\u5f15</p> <p>\u7531\u4e8e\u4e3b\u5b58\u50a8\u6811\u662f\u901a\u8fc7\u4e3b\u952e\u503c\u7684\u6709\u5e8f\u5b58\u50a8\u5efa\u7acb\u8d77\u6765\u7684\u7d22\u5f15\uff0c\u90a3\u4e48\u5982\u679c\u5411\u901a\u8fc7\u522b\u7684\u5217\u4f5c\u4e3a\u641c\u7d22\u6761\u4ef6\u7684\u65f6\u5019\uff0c\u5c31\u65e0\u6cd5\u8fdb\u884c\u4e8c\u5206\u4e86\u3002</p> <p>\u5982\u679c\u6211\u4eec\u7684\u6761\u4ef6\u5217\u662fC,\u90a3\u4e48\u5c06<code>(C,ID)</code>\u4f5c\u4e3a\u6570\u636e\u6709\u5e8f\u7ec4\u7ec7\u8d77\u6765\u6784\u5efa\u4e00\u9897b+\u6811\u5373\u53ef\u3002\u6700\u540e\u67e5\u627e\u7684\u662f\u4e3b\u952eID\uff0c\u518d\u5230\u4e3b\u5b58\u50a8\u6811\u8fdb\u884c\u4e00\u6b21\u56de\u8868\u67e5\u8be2\u5373\u53ef\u3002</p> <p>\u8fd9\u6837\u65e2\u4e0d\u7528\u5168\u91cf\u590d\u5236\u4e00\u4efd\uff0c\u4e5f\u53ef\u4ee5\u4eab\u53d7\u5230\u7d22\u5f15\u7684\u52a0\u901f\u3002</p> <p>\u8054\u5408\u7d22\u5f15</p> <p>\u5c31\u662f\u73b0\u5728\u4e0d\u901a\u8fc7\u4e3b\u952e\uff0c\u800c\u662f\u901a\u8fc7<code>\u5176\u4ed6\u591a\u4e2a\u5217</code>\u4f5c\u4e3a\u6761\u4ef6\u8fdb\u884c\u67e5\u8be2\u3002\u5219\u6b64\u65f6\u5c31\u662f\u5c06<code>(k1-k2-k3,ID)</code>\u4f5c\u4e3a\u6570\u636e\u7ec4\u7ec7\u8d77\u6765\u6784\u5efab+\u6811\uff0c\u6700\u540e\u56de\u8868\u67e5\u8be2\u3002</p>"},{"location":"dataWarehouse/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/#_15","title":"\u8868\u7a7a\u95f4","text":"<p><code>InnoDB</code>\u5b58\u50a8\u5f15\u64ce\uff0c\u662f\u901a\u8fc7<code>\u9875</code>\u7684\u65b9\u5f0f\u6765\u4fe1\u606f\u6570\u636e\u7ec4\u7ec7\u7684\uff0c\u5176\u4e2d<code>B+</code>\u6811\u7684\u4e00\u4e2a\u8282\u70b9\u5c31\u7528\u4e00\u4e2a\u9875\u6765\u5b58\u50a8\u3002</p> <p>\u9875\u7684\u79cd\u7c7b</p> <ul> <li>\u6700\u65b0\u7a7a\u9875</li> <li>\u6570\u636e\u9875</li> <li>\u6ea2\u51fa\u9875</li> <li>\u8868\u7a7a\u95f4\u4fe1\u606f\u3001\u4e8b\u52a1\u4fe1\u606f</li> <li><code>Change Buffer</code>\u76f8\u5173</li> </ul> <p>\u9875\u7684\u901a\u7528\u90e8\u5206</p> <p>\u5c31\u662f<code>File Header\u548c File tailer</code>\u3002\u5176\u4ed6\u7684\u90fd\u662f\u4e0d\u540c\u7684\u3002</p> <p>\u533a</p> <p>\u662f\u66f4\u7c97\u7c92\u5ea6\u7684\u7a7a\u95f4\u7ed3\u6784\u3002\u56e0\u4e3a\u6784\u5efa\u7684\u805a\u7c07\u7d22\u5f15\u6216\u8005\u4e8c\u7ea7\u7d22\u5f15\uff0c\u4e00\u4e2a\u9875\u5b58\u50a8\u4e0d\u4e0b\u7684\u65f6\u5019\uff0c\u5c31\u5fc5\u987b\u8981\u8de8\u9875\u3002\u800c\u5982\u679c\u7d22\u5f15\u653e\u5230\u4e00\u4e2a\u7edf\u7ba1\u7406\u7684\u5927\u7247\u533a\u57df\u4e2d\uff0c\u5c31\u4f1a\u51cf\u5c11\u5927\u91cf\u7684\u968f\u673aIO\u3002\u6240\u4ee5\u5c31\u6709\u4e86\u533a\u7684\u6982\u5ff5\u3002</p> <p>\u5728<code>InnoDB</code>\u4e2d\uff0c\u6bcf64\u4e2a\u9875\u5c31\u662f\u4e00\u4e2a\u533a\u3002</p>"},{"location":"dataWarehouse/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/#lsm_1","title":"LSM","text":""},{"location":"dataWarehouse/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/#_16","title":"\u53cc\u7ec4\u4ef6\u7ed3\u6784","text":"<p>\u53cc\u7ec4\u4ef6\u7ed3\u6784\u7684LSM\u5b58\u50a8\u5f15\u64ce\uff0c\u5305\u542b\u4e00\u4e2a\u5185\u5b58\u4e2d\u7684\u6811\u7ed3\u6784\u548c\u4e00\u4e2a\u78c1\u76d8\u4e2d\u7684\u6811\u7ed3\u6784(B+\u6811/\u8df3\u8868\u90fd\u53ef\u4ee5)\u3002\u6570\u636e\u9996\u5148\u5728\u5185\u5b58\uff0c\u968f\u540e\u88ab\u5b9a\u65f6\u8f6c\u5230\u78c1\u76d8\u4e2d\u53bb\u3002</p> <p>\u7531\u4e8e\u78c1\u76d8\u4e2d\uff0c\u53ea\u7ef4\u62a4\u4e86\u4e00\u4e2a\u78c1\u76d8\u6587\u4ef6(\u6811\u7ed3\u6784)\uff0c\u5219\u5176\u9700\u8981\u4e0d\u65ad\u548c\u5185\u5b58\u6570\u636e\u8fdb\u884c\u5408\u5e76\uff0c\u6548\u7387\u8f83\u4f4e\u3002</p>"},{"location":"dataWarehouse/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/#_17","title":"\u591a\u7ec4\u4ef6\u7ed3\u6784","text":"<p>\u5185\u5b58\u7ec4\u4ef6\u4ecd\u7136\u53ea\u6709\u4e00\u4e2a\uff0c\u4f46\u662f\u78c1\u76d8\u7ec4\u4ef6\u6709\u591a\u4e2a\uff0c\u5e76\u8fdb\u884c\u5f02\u6b65\u6eda\u52a8\u5408\u5e76\u3002</p>"},{"location":"dataWarehouse/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/#_18","title":"\u5b9e\u9645\u7ed3\u6784","text":"<p>\u81f3\u5c11\u4e00\u4e2a\u5185\u5b58\u7ec4\u4ef6 + \u591a\u4e2a\u78c1\u76d8\u7ec4\u4ef6\u6784\u6210\u3002</p> <p>\u5185\u5b58\u7ec4\u4ef6\u5f02\u6b65\u5199\u5165\u78c1\u76d8\uff0c\u6210\u4e3a\u4e00\u4e2a\u78c1\u76d8\u7ec4\u4ef6\uff0c\u79f0\u4e3a<code>Minor Compact</code>\u3002\u78c1\u76d8\u7ec4\u4ef6\u548c\u78c1\u76d8\u7ec4\u4ef6\u4e5f\u4f1a\u6309\u9700\u5408\u5e76\uff0c\u7ef4\u62a4\u78c1\u76d8\u7ec4\u4ef6\u7684\u6570\u91cf\u7a33\u5b9a\uff0c\u79f0\u4e3a<code>Major Compact</code>\u3002</p> <p>MemTable</p> <p>\u4e00\u4e2a\u5185\u5b58\u4e2d\u7684\u6709\u5e8f\u6570\u636e\u7684\u96c6\u5408\uff0c\u901a\u8fc7\u6709\u5e8f\u6570\u636e\u7ed3\u6784\uff0c\u6bd4\u5982<code>B+</code>Tree\u6216\u8005\u8df3\u8868\u5b9e\u73b0(<code>LevelDB</code>\u662f\u8df3\u8868\uff0c\u56e0\u4e3a\u7b80\u5355\u5e76\u4e14\u6027\u80fdOK)\u3002</p> <p>\u540c\u4e00\u65f6\u523b\u53ea\u6709\u4e00\u4e2aMemTable\u5904\u7406\u5199\u64cd\u4f5c\uff0c\u5f53\u5176\u5185\u5b58\u5360\u7528\u5927\u5c0f\u8fbe\u5230/\u5b9a\u671f\uff0c\u901a\u8fc7\u4e00\u4e2a\u5199\u7ebf\u7a0b\u5c06\u5176\u5f02\u6b65\u5237\u76d8\u3002\u5173\u95ed\u5e76\u5f00\u542f\u65b0\u7684<code>MemTable</code>\u7684\u8fc7\u7a0b\u662f\u539f\u5b50\u7684(\u901a\u8fc7\u4e92\u65a5\u9501\u4fdd\u8bc1)\u3002</p> Java<pre><code>  public void flushMemTable()\n    {\n        mutex.lock();\n        try {\n            // force compaction\n            makeRoomForWrite(true);\n\n            // todo bg_error code\n            while (immutableMemTable != null) {\n                backgroundCondition.awaitUninterruptibly();\n            }\n\n        }\n        finally {\n            mutex.unlock();\n        }\n    }\n</code></pre> <p>SSTable</p> <p>\u6765\u81ea\u4e8e\u5185\u5b58\u4e2d\u7684\u5f02\u6b65\u5237\u76d8\uff0c\u6216\u8005\u901a\u8fc7SSTable\u4e4b\u95f4\u7684\u5408\u5e76\u5f97\u5230\uff0c\u6bcf\u4e2aSSTable\u5185\u90e8\u6570\u636e\u59cb\u7ec8\u6709\u5e8f\u3002</p>"},{"location":"dataWarehouse/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/#_19","title":"\u4e8b\u52a1\u4e13\u9879","text":"<p>\u53c2\u8003\u300a\u6570\u636e\u5e93\u7cfb\u7edf\u5185\u5e55\u300b</p>"},{"location":"dataWarehouse/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/#_20","title":"\u6838\u5fc3\u6982\u5ff5","text":"<p>\u4e8b\u52a1\u662f\u6307\u4e00\u4e2a\u6570\u636e\u5e93\u4e2d\u4e0d\u53ef\u5206\u5272\u7684\u903b\u8f91\u5355\u5143\uff0c\u5141\u8bb8\u5c06\u591a\u4e2a\u64cd\u4f5c(\u8bfb\u53d6or\u5199\u5165)\u8868\u793a\u4e3a\u4e00\u4e2a\u6b65\u9aa4\u3002</p> <p>ACID</p> <ul> <li>\u539f\u5b50\u6027\uff0c\u4e8b\u52a1\u662f\u4e0d\u53ef\u5206\u5272\u7684\u3002\u4e5f\u5c31\u662f\u4e8b\u52a1\u4e0d\u53ef\u4ee5\u88ab\u90e8\u5206\u5e94\u7528\uff0c\u6bcf\u4e2a\u4e8b\u52a1\u8981\u4e48\u6210\u529f\u63d0\u4ea4(\u4f7f\u5185\u5b58\u5199\u64cd\u4f5c\u4ea7\u751f\u7684\u6240\u6709\u66f4\u6539\u53d8\u5f97\u53ef\u89c1)\uff0c\u8981\u4e48\u4e2d\u6b62(\u56de\u6eda\u6240\u6709\u5c1a\u4e0d\u53ef\u89c1\u7684\u4e8b\u52a1\u526f\u4f5c\u7528)\u3002\u63d0\u4ea4\u662f\u4e8b\u52a1\u7684\u6700\u540e\u4e00\u4e2a\u64cd\u4f5c\uff0c\u4e2d\u6b62\u540e\u53ef\u4ee5\u91cd\u8bd5</li> <li>\u4e00\u81f4\u6027\uff0c\u4e8b\u52a1\u53ea\u80fd\u5c06\u6570\u636e\u5e93\u4ece\u4e00\u4e2a\u6709\u6548\u72b6\u6001\u5e26\u5230\u53e6\u4e00\u4e2a\u6709\u6548\u72b6\u6001\uff0c\u5e76\u4fdd\u6301\u6240\u6709\u7684\u6570\u636e\u5e93\u4e0d\u53d8\u91cf</li> <li>\u9694\u79bb\u6027\uff0c\u591a\u4e2a\u5e76\u53d1\u6267\u884c\u7684\u4e8b\u52a1\u5e94\u8be5\u80fd\u591f\u4e92\u4e0d\u5e72\u6270\u5730\u8fd0\u884c\uff0c\u6bcf\u4e2a\u4e8b\u52a1\u90fd\u50cf\u6ca1\u6709\u5176\u4ed6\u4e8b\u52a1\u5728\u540c\u65f6\u6267\u884c\u4e00\u6837\u3002\u51fa\u4e8e\u6027\u80fd\u539f\u56e0\uff0c\u8bb8\u591a\u6570\u636e\u5e93\u4f7f\u7528\u7684\u9694\u79bb\u7ea7\u522b\u8981\u5f31\u4e8e\u8fd9\u91cc\u7ed9\u51fa\u7684\u9694\u79bb\u6027\u5b9a\u4e49</li> <li>\u6301\u4e45\u6027\uff0c\u4e00\u65e6\u4e8b\u52a1\u88ab\u63d0\u4ea4\uff0c\u6240\u6709\u6570\u636e\u5e93\u72b6\u6001\u7684\u4fee\u6539\u90fd\u5fc5\u987b\u88ab\u6301\u4e45\u5316\u5230\u78c1\u76d8\u4e0a\uff0c\u5373\u4f7f\u4e4b\u540e\u53d1\u751f\u65ad\u7535\u3001\u7cfb\u7edf\u6545\u969c\u6216\u5d29\u6e83\u4e5f\u4e0d\u53d7\u5f71\u54cd</li> </ul> <p>\u5176\u4ed6\u7ec4\u4ef6</p> <ul> <li>\u9501\u7ba1\u7406\u5668\uff0c\u9501\u7ba1\u7406\u5668\u53ef\u4fdd\u62a4\u5bf9\u8d44\u6e90\u7684\u8bbf\u95ee\uff0c\u5e76\u9632\u6b62\u90a3\u4e9b\u53ef\u80fd\u7834\u574f\u6570\u636e\u5b8c\u6574\u6027\u7684\u5e76\u53d1\u8bbf\u95ee\u3002\u6bcf\u5f53\u8bf7\u6c42\u52a0\u9501\u65f6\uff0c\u9501\u7ba1\u7406\u5668\u4f1a\u68c0\u67e5\u8fd9\u4e2a\u9501\u662f\u5426\u5df2\u88ab\u5176\u4ed6\u4e8b\u52a1\u4ee5\u5171\u4eab\u6216\u6392\u4ed6\u6a21\u5f0f\u6301\u6709\uff0c\u5982\u679c\u8bf7\u6c42\u7684\u8bbf\u95ee\u7ea7\u522b\u6ca1\u6709\u51b2\u7a81\u5219\u5141\u8bb8\u672c\u6b21\u8bbf\u95ee\u3002\u7531\u4e8e\u6392\u4ed6\u9501\u5728\u4efb\u610f\u65f6\u523b\u6700\u591a\u53ea\u80fd\u88ab\u4e00\u4e2a\u4e8b\u52a1\u6301\u6709\uff0c\u6240\u4ee5\u5176\u4ed6\u8bf7\u6c42\u52a0\u9501\u7684\u4e8b\u52a1\u5fc5\u987b\u7b49\u5f85\u9501\u88ab\u91ca\u653e\uff0c\u6216\u8005\u4e2d\u6b62\u4e8b\u52a1\u5e76\u7a0d\u540e\u91cd\u8bd5\u3002\u4e00\u65e6\u9501\u88ab\u91ca\u653e\u6216\u4e8b\u52a1\u7ec8\u6b62\uff0c\u9501\u7ba1\u7406\u5668\u5c31\u4f1a\u901a\u77e5\u5176\u4e2d\u4e00\u4e2a\u6302\u8d77\u7684\u4e8b\u52a1\uff0c\u8ba9\u5b83\u83b7\u5f97\u9501\u5e76\u7ee7\u7eed\u6267\u884c</li> <li>\u9875\u7f13\u5b58(\u8fd9\u91cc\u7ed5\u8fc7\u5185\u6838\u9875\u7f13\u5b58\uff0c\u662f\u7528\u6237\u6001\u5185\u5b58\u4e2d\u7684\u7684\u7b49\u4ef7\u5b9e\u73b0)\uff0c\u5145\u5f53\u4e86\u6301\u4e45\u6027\u5b58\u50a8\uff08\u78c1\u76d8\uff09\u548c\u5b58\u50a8\u5f15\u64ce\u5176\u4f59\u90e8\u5206\u4e4b\u95f4\u7684\u4e2d\u4ecb</li> <li>\u65e5\u5fd7\u7ba1\u7406\u5668\uff0c\u8bb0\u5f55\u4e86\u5df2\u5e94\u7528\u5728\u7f13\u5b58\u9875\u4e0a\u7684\u64cd\u4f5c\uff08\u65e5\u5fd7\u6761\u76ee\uff09\uff0c\u8fd9\u4e9b\u64cd\u4f5c\u5c1a\u672a\u4e0e\u6301\u4e45\u6027\u5b58\u50a8\u540c\u6b65\uff0c\u800c\u65e5\u5fd7\u53ef\u4ee5\u786e\u4fdd\u8fd9\u4e9b\u64cd\u4f5c\u4e0d\u4f1a\u5728\u5d29\u6e83\u65f6\u4e22\u5931</li> </ul>"},{"location":"dataWarehouse/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/#_21","title":"\u9875\u7f13\u5b58","text":"<p>\u9875\u7f13\u5b58\u901a\u5e38\u6307\u4e24\u79cd\uff0c\u4e00\u79cd\u662fOS\u6982\u5ff5\u4e2d\u5185\u6838\u9875\u7f13\u5b58\uff0c\u4e00\u79cd\u662f\u6570\u636e\u5e93\u4e2d\u7684\u9875\u7f13\u5b58(buffer pool)\u3002</p> <p>\u533a\u522b\u5c31\u662fDB\u901a\u5e38\u4f1a\u4f7f\u7528O_DIRECT\u6807\u5fd7\u6253\u5f00\u6587\u4ef6\uff0c\u5b83\u5141\u8bb8I/O\u7cfb\u7edf\u8c03\u7528\u7ed5\u8fc7\u5185\u6838\u9875\u7f13\u5b58\u76f4\u63a5\u8bbf\u95ee\u78c1\u76d8\uff0c\u76f4\u63a5\u662f\u7528\u6237\u6001\u5185\u5b58\u548c\u78c1\u76d8\u4ea4\u4e92\u3002</p> <p>\u4e3a\u4ec0\u4e48\u8981\u4f7f\u7528\u8fd9\u6837\u7684\u65b9\u5f0f\u5462\uff0c\u660e\u660e\u6709\u73b0\u6210\u7684page cache\uff1f\u5c31\u662f\u56e0\u4e3a\u867d\u7136\u53ef\u4ee5\u901a\u8fc7fadvise\u8fd9\u4e2a\u7cfb\u7edf\u8c03\u7528\u4ece\u67d0\u79cd\u7a0b\u5ea6\u4e0a\u63a7\u5236\u5185\u6838\u5982\u4f55\u5c06\u9875\u6362\u51fa\u9875\u7f13\u5b58\uff0c\u4f46\u8fd9\u4ec5\u4ec5\u662f\u8ba9\u5185\u6838\u8003\u8651\u6211\u4eec\u7684\u610f\u89c1\uff0c\u5e76\u4e0d\u4fdd\u8bc1\u5b83\u4e00\u5b9a\u4f1a\u53d1\u751f\u3002\u6240\u4ee5\u4e3a\u4e86\u8fdb\u4e00\u6b65\u8fdb\u884c\u7ec6\u7c92\u5ea6\u63a7\u5236\uff0c\u5c31\u4f1a\u653e\u5f03\u6389kernel page cache\uff0c\u5c06\u5176\u5728\u7528\u6237\u6001\u5185\u5b58\u7b49\u4ef7\u5b9e\u73b0\u3002\u5b83\u548c\u5185\u6838\u9875\u7f13\u5b58\u4e00\u6837\uff0c\u90fd\u662f\u5bf9\u78c1\u76d8\u8bbf\u95ee\u7684\u62bd\u8c61\uff0c\u540c\u65f6\u5c06\u903b\u8f91\u5199\u548c\u7269\u7406\u5199\u64cd\u4f5c\u5206\u79bb\u3002</p>"},{"location":"dataWarehouse/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/#_22","title":"\u9875\u7f13\u5b58\u7684\u8bed\u4e49","text":"<p>\u5b83\u662f\u5185\u6838\u9875\u7f13\u5b58\u7684\u7528\u6237\u6001\u7b49\u4ef7\u5b9e\u73b0</p> <p>\u5f53\u5b58\u50a8\u5f15\u64ce\u8bbf\u95ee\uff08\u6216\u8bf7\u6c42\uff09\u9875\u65f6\uff0c\u6211\u4eec\u9996\u5148\u68c0\u67e5\u5176\u5185\u5bb9\u662f\u5426\u5df2\u88ab\u7f13\u5b58\u3002\u5982\u679c\u8be5\u9875\u5728\u7f13\u5b58\u4e2d\uff0c\u5219\u76f4\u63a5\u8fd4\u56de\u7f13\u5b58\u7684\u9875\u3002\u5982\u679c\u8be5\u9875\u672a\u88ab\u7f13\u5b58\uff0c\u5219\u9875\u7f13\u5b58\u4f1a\u5c06\u5176\u903b\u8f91\u5730\u5740\u6216\u9875\u53f7\u8f6c\u6362\u4e3a\u7269\u7406\u5730\u5740\uff0c\u5e76\u5c06\u5b83\u7684\u5185\u5bb9\u52a0\u8f7d\u5230\u5185\u5b58\uff0c\u7136\u540e\u8fd4\u56de\u5df2\u7f13\u5b58\u7684\u7248\u672c\u7ed9\u5b58\u50a8\u5f15\u64ce\u3002\u4e00\u65e6\u8fd4\u56de\uff0c\u8fd9\u4e2a\u5b58\u6709\u7f13\u5b58\u9875\u5185\u5bb9\u7684\u7f13\u51b2\u533a\u5c31\u79f0\u4e3a\u88ab\u5f15\u7528\u7684(referenced)\uff0c\u5b58\u50a8\u5f15\u64ce\u5fc5\u987b\u5728\u7528\u5b8c\u4e4b\u540e\u5c06\u5176\u5f52\u8fd8\u7ed9\u9875\u7f13\u5b58\u6216\u89e3\u9664\u5f15\u7528\u3002\u82e5\u60f3\u8ba9\u9875\u7f13\u5b58\u4e0d\u8981\u6362\u51fa\u67d0\u4e9b\u9875\uff0c\u5219\u53ef\u4ee5\u5c06\u5b83\u4eec\u56fa\u5b9a(pin)\u3002\u5982\u679c\u67d0\u4e2a\u9875\u88ab\u4fee\u6539\u4e86,\u5219\u53d8\u4e3adirty,\u5fc5\u987b\u5237\u5199\u5230\u78c1\u76d8\u624d\u80fd\u4fdd\u8bc1\u6301\u4e45\u6027\u3002</p>"},{"location":"dataWarehouse/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/#_23","title":"\u7f13\u5b58\u56de\u6536","text":"<p>\u901a\u5e38\u4f1a\u5355\u72ec\u5f00\u4e00\u4e2a\u5237\u5199\u540e\u53f0\u8fdb\u7a0b/\u7ebf\u7a0b\uff0c\u5faa\u73af\u68c0\u67e5\u53ef\u80fd\u88ab\u6362\u51fa\u7684\u810f\u9875\uff0c\u66f4\u65b0\u5176\u78c1\u76d8\u4e0a\u7684\u7248\u672c\u3002</p> <p>\u4e3a\u4e86\u786e\u4fdd\u6240\u6709\u66f4\u6539\u90fd\u88ab\u6301\u4e45\u5316\uff0c\u68c0\u67e5\u70b9\u8fdb\u7a0b\u4f1a\u534f\u8c03\u5237\u5199\u8fdb\u7a0b\u3002\u68c0\u67e5\u70b9\u8fdb\u7a0b\u63a7\u5236\u9884\u5199\u65e5\u5fd7(WAL)\u548c\u9875\u7f13\u5b58\uff0c\u5e76\u786e\u4fdd\u4e24\u8005\u534f\u540c\u5de5\u4f5c\u3002\u53ea\u6709\u5f53\u7f13\u5b58\u9875\u5b8c\u6210\u5237\u5199\u4e4b\u540e\uff0c\u76f8\u5173\u64cd\u4f5c\u7684\u65e5\u5fd7\u8bb0\u5f55\u624d\u80fd\u4eceWAL\u4e2d\u4e22\u5f03\u3002\u5728\u4e0a\u8ff0\u8fc7\u7a0b\u5b8c\u6210\u540e\u624d\u80fd\u5c06\u810f\u9875\u6362\u51fa\u7f13\u5b58\u3002</p>"},{"location":"dataWarehouse/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/#_24","title":"\u9501\u5b9a\u9875","text":"<p>\u4ee5B\u6811\u4e3a\u4f8b\u5b50\uff0c\u968f\u7740\u8282\u70b9\u5c42\u6b21\u7684\u964d\u4f4e\uff0c\u6bcf\u5c42\u7684\u8282\u70b9\u6570\u91cf\u5448\u6307\u6570\u7ea7\u589e\u52a0\uff0c\u5e76\u4e14\u8f83\u9ad8\u5c42\u6b21\u7684\u8282\u70b9\u4ec5\u5360\u6574\u68f5\u6811\u7684\u4e00\u5c0f\u90e8\u5206\uff0c\u56e0\u6b64\u8fd9\u90e8\u5206\u8282\u70b9\u53ef\u4ee5\u6c38\u4e45\u9a7b\u7559\u5728\u5185\u5b58\u4e2d\uff0c\u800c\u5176\u4ed6\u90e8\u5206\u5219\u53ef\u4ee5\u6309\u9700\u6362\u5165\u3002</p>"},{"location":"dataWarehouse/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/#_25","title":"\u9875\u7f6e\u6362","text":"<p>FIFO,LRU,LFU</p>"},{"location":"dataWarehouse/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/#_26","title":"\u6062\u590d","text":""},{"location":"dataWarehouse/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/#wal","title":"WAL","text":"<p>\u6838\u5fc3\u5c31\u662fWAL\uff0c\u4e5f\u5c31\u662fWrite-Ahead Log\uff0c\u9884\u5199\u65e5\u5fd7\u3002\u901a\u5e38\u662fappend only\u3002</p> <p>\u529f\u80fd\uff1a</p> <ul> <li>\u5728\u5141\u8bb8\u9875\u7f13\u5b58\u5c06\u9875\u4e0a\u7684\u4fee\u6539\u7f13\u5b58\u8d77\u6765\u7684\u540c\u65f6\uff0c\u4fdd\u8bc1\u6570\u636e\u5e93\u7cfb\u7edf\u4ecd\u7136\u5177\u6709\u6301\u4e45\u6027\u8bed\u4e49\u3002\u5728\u90a3\u4e9b\u53d7\u64cd\u4f5c\u5f71\u54cd\u7684\u7f13\u5b58\u9875\u88ab\u540c\u6b65\u5230\u78c1\u76d8\u4e0a\u4e4b\u524d\uff0c\u5c06\u6240\u6709\u64cd\u4f5c\u6301\u4e45\u5316\u5230\u78c1\u76d8\u4e0a\u3002\u6bcf\u4e2a\u4fee\u6539\u6570\u636e\u5e93\u72b6\u6001\u7684\u64cd\u4f5c\u5fc5\u987b\u5148\u5199\u65e5\u5fd7\u5230\u78c1\u76d8\u4e0a\uff0c\u7136\u540e\u624d\u80fd\u4fee\u6539\u76f8\u5173\u9875\u7684\u5185\u5bb9(WAL\u5237\u5199\uff0c\u65e9\u4e8e\u5185\u5b58\u9875\u64cd\u4f5c)</li> <li>\u5f53\u53d1\u751f\u5d29\u6e83\u65f6\uff0c\u4f7f\u7cfb\u7edf\u53ef\u4ee5\u4ece\u64cd\u4f5c\u65e5\u5fd7\u4e2d\u91cd\u5efa\u5185\u5b58\u4e2d\u4e22\u5931\u7684\u66f4\u6539</li> </ul> <p>\u7ec4\u6210\uff1aWAL\u7531\u65e5\u5fd7\u8bb0\u5f55\u7ec4\u6210\uff0c\u6bcf\u6761\u8bb0\u5f55\u90fd\u6709\u4e00\u4e2a\u552f\u4e00\u7684\u3001\u5355\u8c03\u9012\u589e\u7684\u65e5\u5fd7\u5e8f\u5217\u53f7(LSN)\u3002\u901a\u5e38\uff0cLSN\u7531\u4e00\u4e2a\u5185\u90e8\u7684\u8ba1\u6570\u5668\u6216\u65f6\u95f4\u6233\u8868\u793a\u3002\u5404\u65e5\u5fd7\u8bb0\u5f55\u5fc5\u987b\u4ee5LSN\u7684\u987a\u5e8f\u5237\u5199\u5230\u78c1\u76d8\u4e0a\u3002\u9664\u4e86\u5355\u72ec\u7684\u64cd\u4f5c\u8bb0\u5f55\u5916\uff0cWAL\u8fd8\u4f1a\u4fdd\u5b58\u4e8b\u52a1\u5b8c\u6210\u7684\u8bb0\u5f55\u3002\u53ea\u6709\u5f53\u4e8b\u52a1\u63d0\u4ea4\u8bb0\u5f55\u5b8c\u6210\u5237\u76d8\u4e4b\u540e\uff0c\u624d\u80fd\u5c06\u8be5\u4e8b\u52a1\u89c6\u4e3a\u5df2\u63d0\u4ea4\u3002</p>"},{"location":"dataWarehouse/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/#_27","title":"\u64cd\u4f5c\u65e5\u5fd7\u548c\u6570\u636e\u65e5\u5fd7","text":"<p>\u72b6\u6001\u53d8\u6362\uff1a\u4e00\u4e2astate\uff0c\u901a\u5e38\u6709before-image\u548cafter-image\u4e24\u90e8\u5206\u7ec4\u6210\u3002\u5bf9before-image\u8fdb\u884credo\uff0c\u5f97\u5230after-image\u3002\u5bf9after-image\u8fdb\u884cundo\uff0c\u5f97\u5230before-image\u3002</p> <p>\u65e5\u5fd7\u7c7b\u578b\uff1a\u903b\u8f91\u65e5\u5fd7(\u4fdd\u5b58\u5f53\u524d\u72b6\u6001\u4e0a\u6267\u884c\u7684\u64cd\u4f5c)\uff0c\u4ee5\u53ca\u7269\u7406\u65e5\u5fd7(\u4fdd\u5b58\u5bf9\u5b8c\u6574\u9875\u72b6\u6001\u6216\u5b57\u8282\u7ea7\u7684\u66f4\u6539)\u3002</p> <p>\u901a\u5e38\u6570\u636e\u5e93\uff0c\u90fd\u662f\u4f7f\u7528\u903b\u8f91\u65e5\u5fd7\u8fdb\u884cundo(\u8bed\u4e49\u7ea7\u522b\uff0c\u66f4\u597d\u9006\u5411\uff0c\u63d0\u5347\u5e76\u53d1)\u3002\u4f7f\u7528\u7269\u7406\u65e5\u5fd7\u8fdb\u884credo(\u76f4\u63a5Byte\u7ea7\u522b\u4fee\u6539\u5bf9\u5e94\u9875\u4f4d\u7f6e\u503c\uff0c\u7f29\u77ed\u6062\u590d\u65f6\u95f4)\u3002\u64a4\u9500\u64cd\u4f5c\u4f1a\u56de\u6eda\u90a3\u4e9b\u5df2\u63d0\u4ea4\u4e8b\u52a1\u5f3a\u5236\u5237\u76d8\u7684\u9875\u4e0a\u7684\u66f4\u65b0\uff0c\u800c\u91cd\u505a\u64cd\u4f5c\u4f1a\u5c06\u5df2\u63d0\u4ea4\u4e8b\u52a1\u6267\u884c\u7684\u66f4\u6539\u5e94\u7528\u5230\u78c1\u76d8\u4e0a\u3002</p>"},{"location":"dataWarehouse/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/#steal-or-force","title":"steal or force","text":"<p>steal/no steal\uff0c\u4ee5\u53caforce/no force\u662f\u9875\u7f13\u5b58\u90e8\u5206\u7684\u7b56\u7565\uff0c\u4f46\u662f\u4f1a\u5f71\u54cd\u8fdb\u884c\u6062\u590d\u7684\u65b9\u6cd5\u3002</p> <p>\u5728\u4e8b\u52a1\u63d0\u4ea4\u4e4b\u524d\u5141\u8bb8\u5237\u5199\u4e8b\u52a1\u4fee\u6539\u8fc7\u7684\u9875\uff0c\u8fd9\u88ab\u79f0\u4e3asteal\u7b56\u7565\u3002\u800cno-steal\u7b56\u7565\u4e0d\u5141\u8bb8\u5c06\u672a\u63d0\u4ea4\u7684\u4e8b\u52a1\u5185\u5bb9\u5237\u5199\u5230\u78c1\u76d8\u3002\u4e4b\u6240\u4ee5\u79f0\u4e3asteal\u7b56\u7565\uff0c\u662f\u56e0\u4e3a\u5b83\u5c06\u810f\u9875\u5077\u7a83(steal)\u51fa\u6765\uff0c\u5c06\u5176\u4e2d\u7684\u5185\u5bb9\u5237\u5199\u5230\u78c1\u76d8\u4e0a\uff0c\u5e76\u4ece\u78c1\u76d8\u52a0\u8f7d\u53e6\u4e00\u4e2a\u9875\u5230\u8be5\u4f4d\u7f6e\u3002</p> <p>force\u7b56\u7565\u8981\u6c42\u5728\u4e8b\u52a1\u63d0\u4ea4\u524d\u5c06\u4e8b\u52a1\u4fee\u6539\u7684\u6240\u6709\u9875\u5237\u5199\u5230\u78c1\u76d8\u4e0a\u3002\u800c\u5728no-force\u7b56\u7565\u4e2d\uff0c\u5373\u4f7f\u4e8b\u52a1\u4fee\u6539\u7684\u67d0\u4e9b\u9875\u5c1a\u672a\u5237\u5199\u5230\u78c1\u76d8\u4e0a\uff0c\u8be5\u4e8b\u52a1\u4e5f\u53ef\u4ee5\u63d0\u4ea4\u3002\u8fd9\u91ccforce\u7684\u542b\u4e49\u662f\u5f3a\u5236(force)\u810f\u9875\u5728\u4e8b\u52a1\u63d0\u4ea4\u524d\u5fc5\u987b\u5c06\u5176\u5237\u5199\u5230\u78c1\u76d8\u4e0a\u3002</p> <ul> <li>\u4f7f\u7528no-steal\u7b56\u7565\uff0c\u5219\u53ea\u9700\u8981redo\u5c31\u53ef\u4ee5\u5b9e\u73b0\u6062\u590d\u3002\u56e0\u4e3a\u65e7\u526f\u672c\u5305\u542b\u5728\u78c1\u76d8\u7684\u9875\u4e0a\uff0c\u800c\u4fee\u6539\u88ab\u5b58\u50a8\u5728WAL\u65e5\u5fd7\u4e2d(\u76f4\u63a5\u5c06WAL\u4e2d\u72b6\u6001\u4fee\u6539\u901a\u8fc7Byte\u7ea7\u522b\u64cd\u4f5c\u5e94\u7528\u5230\u78c1\u76d8\u6570\u636e\u9875\u4e2d)\u3002</li> <li>\u4f7f\u7528force\u7b56\u7565\uff0c\u5219\u5d29\u6e83\u6062\u590d\u65e0\u987b\u4efb\u4f55\u5176\u4ed6\u5de5\u4f5c\u5373\u53ef\u91cd\u5efa\u5df2\u63d0\u4ea4\u4e8b\u52a1\u7684\u7ed3\u679c\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u4e8b\u52a1\u4fee\u6539\u7684\u9875\u90fd\u5df2\u88ab\u5237\u5199\u5230\u78c1\u76d8\u3002\u5219\u78c1\u76d8\u53ea\u8981\u4e0d\u88ab\u7834\u574f\uff0c\u5c31\u53ef\u4ee5\u4fdd\u8bc1\u76f4\u63a5\u6062\u590d\u3002</li> </ul> <p>\u66f4\u4e00\u822c\u5730\u8bf4\uff0c\u76f4\u5230\u4e8b\u52a1\u63d0\u4ea4\u524d\uff0c\u6211\u4eec\u9700\u8981\u4fdd\u5b58\u6709\u8db3\u591f\u7684\u4fe1\u606f\u6765\u64a4\u9500\u5b83\u7684\u7ed3\u679c\u3002\u5982\u679c\u4e8b\u52a1\u4e2d\u6d89\u53ca\u7684\u9875\u90fd\u5df2\u7ecf\u5237\u5199\u5230\u78c1\u76d8\uff0c\u90a3\u4e48\u6211\u4eec\u9700\u8981\u5728\u65e5\u5fd7\u4e2d\u4fdd\u7559\u64a4\u9500\u4fe1\u606f\uff0c\u4ee5\u5728\u4e8b\u52a1\u63d0\u4ea4\u4e4b\u524d\u786e\u4fdd\u5b83\u80fd\u88ab\u56de\u6eda\uff1b\u5426\u5219\uff0c\u6211\u4eec\u5fc5\u987b\u4fdd\u7559\u91cd\u505a\u65e5\u5fd7\u3002\u5728\u8fd9\u4e24\u79cd\u60c5\u51b5\u4e0b\uff0c\u53ea\u6709\u5f53\u64a4\u9500\u6216\u91cd\u505a\u8bb0\u5f55\u88ab\u5199\u5165\u65e5\u5fd7\u6587\u4ef6\u540e\uff0c\u4e8b\u52a1\u624d\u80fd\u63d0\u4ea4\u3002</p>"},{"location":"dataWarehouse/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/#aries","title":"ARIES","text":"<p>\u662f\u4e00\u79cd\u9488\u5bf9\u9875\u7f13\u5b58\u4f7f\u7528steal &amp; no-force\u6062\u590d\u7b97\u6cd5\u3002</p> <p>\u6062\u590d\u8fc7\u7a0b\u5206\u4e3a\u4e09\u4e2a\u9636\u6bb5</p> <ul> <li>\u5206\u6790\u9636\u6bb5\uff0c\u8bc6\u522b\u51fa\u9875\u7f13\u5b58\u4e2d\u7684\u810f\u9875\uff0c\u4ee5\u53ca\u5d29\u6e83\u65f6\u6b63\u5728\u8fdb\u884c\u7684\u4e8b\u52a1</li> <li>redo\u9636\u6bb5\uff0c\u7269\u7406\u91cd\u505a\uff0c\u4e5f\u5c31\u662f\u5728\u9875\u7ea7\u522b\uff0c\u91cd\u653e\u5386\u53f2\u8bb0\u5f55\u5230\u5d29\u6e83\u70b9\uff0c\u5c06\u6570\u636e\u5e93\u6062\u590d\u5230\u539f\u6765\u72b6\u6001\u3002\u6838\u5fc3\u662f\u5904\u7406\u672a\u5b8c\u6210\u7684\u4e8b\u52a1\uff0c\u4ee5\u53ca\u5b8c\u6210\u4f46\u662f\u6ca1\u6709\u5c06\u810f\u9875\u5237\u51fa\u7684\u4e8b\u52a1\u3002</li> <li>undo\u9636\u6bb5\uff0c\u903b\u8f91\u64a4\u9500\uff0c\u4e5f\u5c31\u662f\u5728\u8bb0\u5f55\u7ea7\u522b\uff0c\u4f1a\u56de\u6eda\u6240\u6709\u6ca1\u6709\u5b8c\u6210\u7684\u4e8b\u52a1\uff0c\u5c06\u6570\u636e\u5e93\u8fd8\u539f\u5230\u6700\u540e\u7684\u72b6\u6001\u3002\u540c\u65f6\u5c06undo\u7684\u65e5\u5fd7\u4e5f\u8bb0\u5f55\u4e0b\u6765\u3002</li> </ul>"},{"location":"dataWarehouse/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/#_28","title":"\u5e76\u53d1\u63a7\u5236","text":"<p>\u6570\u636e\u5e93\u901a\u5e38\u4f7f\u7528\u4e8b\u52a1\u7ba1\u7406\u5668\u548c\u9501\u7ba1\u7406\u5668\u6765\u534f\u540c\u5904\u7406\u5e76\u53d1\u63a7\u5236\u3002</p> <p>\u901a\u5e38\u5e76\u53d1\u63a7\u5236\u6709\u5982\u4e0b\u51e0\u79cd\u7c7b\u578b</p> <ul> <li>\u4e50\u89c2\u5e76\u53d1\u63a7\u5236(OCC)\uff1a\u9996\u5148\u5141\u8bb8\u591a\u4e2a\u4e8b\u52a1\u5e76\u53d1\u5728\u540c\u4e00\u4e2a\u4e0a\u4e0b\u6587\u5e76\u53d1\u6267\u884c\u8bfb\u53d6\u548c\u5199\u5165\u64cd\u4f5c\uff0c\u6700\u540e\u786e\u5b9a\u6267\u884c\u7ed3\u679c\u80fd\u5426\u88ab\u4e32\u884c\u5316\u3002\u4e5f\u5c31\u662f\u4e8b\u52a1\u4e0d\u4f1a\u5f7c\u6b64\u963b\u585e\uff0c\u800c\u662f\u4fdd\u7559\u5176\u64cd\u4f5c\u5386\u53f2\uff0c\u5e76\u5728\u63d0\u4ea4\u524d\u68c0\u67e5\u662f\u5426\u5b58\u5728\u51b2\u7a81\u7684\u53ef\u80fd\u6027\u3002\u5982\u679c\u5b58\u5728\uff0c\u5219\u4f1a\u4e2d\u6b62\u5176\u4e2d\u67d0\u4e2a\u51b2\u7a81\u7684\u4e8b\u52a1\u3002</li> <li>\u591a\u7248\u672c\u5e76\u53d1\u63a7\u5236(MVCC)\uff1a\u5141\u8bb8\u4e00\u6761\u8bb0\u5f55\u5b58\u5728\u591a\u4e2a\u65f6\u95f4\u6233\u7248\u672c\u3002\u4e5f\u5c31\u662f\u4e8b\u52a1\u8bfb\u53d6\u7684\u662f\u6570\u636e\u5e93\u67d0\u4e2a\u65f6\u523b\u7684\u5feb\u7167\u89c6\u56fe\u3002\u5177\u4f53\u5b9e\u73b0\u53ef\u4ee5\u901a\u8fc7\u9a8c\u8bc1\u6280\u672f(\u5373\u591a\u7ed3\u679c\u5bf9\u6bd4)\uff0c\u6216\u8005\u65e0\u9501\u6280\u672f(\u65f6\u95f4\u6233\u6392\u5e8f)\uff0c\u6216\u8005\u6709\u9501\u6280\u672f(\u4e8c\u9636\u6bb5\u9501)\u3002</li> <li>\u60b2\u89c2\u5e76\u53d1\u63a7\u5236(PCC)\uff1a\u4e5f\u5c31\u662f\u4fdd\u5b88\u5e76\u53d1\u63a7\u5236\uff0c\u53ef\u4ee5\u4f7f\u7528\u9501\u4e5f\u53ef\u4ee5\u4e0d\u7528\u3002\u57fa\u4e8e\u9501\u4f1a\u5c06\u67d0\u4e2a\u8bb0\u5f55\u9501\u5b9a\uff0c\u800c\u4e0d\u52a0\u9501\u7684\u65b9\u5f0f\u662f\u901a\u8fc7\u5728\u4e8b\u52a1\u8c03\u5ea6\u4e2d\u7ef4\u62a4\u8bfb\u53d6 &amp; \u5199\u5165\u7684\u64cd\u4f5c\u5217\u8868\u4ee5\u9650\u5236\u4e8b\u52a1\u8fd0\u884c\u3002\u60b2\u89c2\u7684\u8c03\u5ea6\u53ef\u80fd\u5bfc\u81f4\u6b7b\u9501\u3002</li> </ul> <p>\u8c03\u5ea6(schedule)\u662f\u6307\u6570\u636e\u5e93\u89c6\u89d2\u4e0a\u6267\u884c\u4e00\u7ec4\u4e8b\u52a1\u6240\u9700\u7684\u64cd\u4f5c\u5217\u8868\uff08\u5373\u4ec5\u5305\u542b\u4e0e\u6570\u636e\u5e93\u72b6\u6001\u4ea4\u4e92\u7684\u64cd\u4f5c\uff0c\u4f8b\u5982\u8bfb\u3001\u5199\u3001\u63d0\u4ea4\u548c\u4e2d\u6b62)\u3002\u5e76\u53d1\u63a7\u5236\u5c31\u662f\u5728\u4e32\u884c\u57fa\u7840\u4e0a\u4fee\u6539\uff0c\u4f7f\u5f97\u67d0\u4e9b\u4e8b\u52a1\u7684\u987a\u5e8f\u6539\u53d8\u6216\u8005\u540c\u65f6\u6267\u884c\uff0c\u53ea\u8981\u80fd\u591f\u6ee1\u8db3ACID\uff0c\u540c\u65f6\u4fdd\u8bc1\u7ed3\u679c\u6b63\u786e\u5373\u53ef\u3002</p>"},{"location":"dataWarehouse/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/#_29","title":"\u53ef\u4e32\u884c\u5316","text":"<p>\u5373\u5b8c\u5168\u4e32\u884c\u6267\u884c\u4e8b\u52a1\u5217\u8868\uff0c\u6b63\u786e\u6027\u53ef\u4ee5\u4fdd\u8bc1\u4f46\u662f\u6548\u7387\u6781\u5927\u964d\u4f4e\u3002</p>"},{"location":"dataWarehouse/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/#_30","title":"\u4e8b\u52a1\u9694\u79bb","text":"<p>\u4e8b\u52a1\u578b\u6570\u636e\u5e93\u7cfb\u7edf\u6709\u7740\u4e0d\u540c\u7684\u9694\u79bb\u7ea7\u522b\u3002\u9694\u79bb\u7ea7\u522b\u6307\u5b9a\u4e86\u4e8b\u52a1\u7684\u5404\u90e8\u5206\u5982\u4f55\u4ee5\u53ca\u4f55\u65f6\u53ef\u4ee5\u88ab\u5176\u4ed6\u4e8b\u52a1\u770b\u5230\uff0c\u4ee5\u53ca\u53ef\u80fd\u51fa\u73b0\u7684\u5f02\u5e38\u3002\u800c\u5b9e\u73b0\u9694\u79bb\u9700\u8981\u4ed8\u51fa\u4e00\u5b9a\u4ee3\u4ef7\uff0c\u4e5f\u5c31\u662f\u989d\u5916\u7684\u534f\u8c03\u4ee5\u53ca\u540c\u6b65\u673a\u5236\u3002</p> <p>SQL\u6807\u51c6\u4e2d\u7684\u8bfb\u5199\u5f02\u5e38\u7c7b\u578b</p> <p>\u8bfb\u5f02\u5e38</p> <ul> <li>\u810f\u8bfb\uff0c \u6307\u7684\u662f\u4e00\u4e2a\u4e8b\u52a1\u80fd\u8bfb\u53d6\u5230\u5176\u4ed6\u4e8b\u52a1\u6ca1\u6709\u63d0\u4ea4\u7684\u66f4\u6539\uff0c\u5e76\u4e14\u53ef\u80fd\u662f\u4e00\u4e2a\u4ece\u672a\u63d0\u4ea4\u8fc7\u7684\u503c\u3002</li> <li>\u4e0d\u53ef\u91cd\u590d\u8bfb\uff0c\u662f\u6307\u540c\u4e00\u4e2a\u4e8b\u52a1\u4e24\u6b21\u67e5\u8be2\u540c\u4e00\u884c\u5374\u5f97\u5230\u4e0d\u540c\u7684\u7ed3\u679c\u3002</li> <li>\u5e7b\u8bb0\u5f55\uff0c\u662f\u6307\u4e8b\u52a1\u6267\u884c\u4e24\u6b21\u8303\u56f4\u67e5\u8be2\uff0c\u5f97\u5230\u4e0d\u540c\u7684\u7ed3\u679c\u96c6\u5408\u7684\u7ed3\u679c\u3002</li> </ul> <p>\u5199\u5f02\u5e38</p> <ul> <li>\u4e22\u5931\u66f4\u65b0\uff0c \u662f\u6307\u591a\u4e2a\u4e8b\u52a1\u8fdb\u884c\u66f4\u65b0\u7684\u65f6\u5019\uff0c\u7531\u4e8e\u4e0d\u662f\u539f\u5b50\u6027\uff0c\u6240\u4ee5\u672a\u63d0\u4ea4\u7684\u7ed3\u679c\u53ef\u80fd\u88ab\u5176\u4ed6\u4e8b\u52a1\u8986\u76d6\u7684\u60c5\u51b5\u3002</li> <li>\u810f\u5199\uff0c\u6307\u7684\u662f\u67d0\u4e2a\u4e8b\u52a1\u62ff\u5230\u4e00\u4e2a\u4ece\u672a\u63d0\u4ea4\u8fc7\u7684\u503c\uff0c\u5bf9\u5176\u4fee\u6539\u5e76\u4fdd\u5b58\u3002</li> <li>\u5199\u504f\u659c\uff0c\u662f\u6307\u5355\u4e2a\u4e8b\u52a1\u90fd\u9075\u5faa\u8981\u6c42\u7684\u7ea6\u675f\uff0c\u4f46\u662f\u7ec4\u5408\u5374\u8fdd\u53cd\u4e86\u7ea6\u675f\u3002(\u6bd4\u5982\u975e\u8d1f\u60c5\u51b5)</li> </ul>"},{"location":"dataWarehouse/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/#_31","title":"\u9694\u79bb\u7ea7\u522b","text":"<p>\u4ece\u4e0a\u5230\u4e0b\u4f9d\u6b21\u589e\u5f3a\uff1a</p> <ul> <li>\u8bfb\u672a\u63d0\u4ea4\uff0c\u4e5f\u5c31\u662f\u4f1a\u6709\u810f\u8bfb\uff0c\u4e0d\u53ef\u91cd\u590d\u8bfb\uff0c\u5e7b\u8bfb</li> <li>\u8bfb\u5df2\u63d0\u4ea4\uff0c\u4e5f\u5c31\u662f\u4f1a\u6709\u4e0d\u53ef\u91cd\u590d\u8bfb\uff0c\u5e7b\u8bfb</li> <li>\u53ef\u91cd\u590d\u8bfb(\u901a\u5e38\u901a\u8fc7\u5feb\u7167\u9694\u79bb\u673a\u5236\u5b9e\u73b0)\uff0c\u4e5f\u5c31\u662f\u4f1a\u6709\u5e7b\u8bfb\u3002</li> <li>\u53ef\u4e32\u884c\u5316</li> </ul>"},{"location":"dataWarehouse/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/#_32","title":"\u4e50\u89c2\u5e76\u53d1\u63a7\u5236","text":"<p>\u4e50\u89c2\u5e76\u53d1\u7a7a\u503c\u603b\u662f\u5047\u8bbe\u4e8b\u52a1\u51b2\u7a81\u5f88\u5c11\u53d1\u751f</p> <p>\u5206\u4e3a\u4ee5\u4e0b\u9636\u6bb5</p> <ul> <li>\u8bfb\u9636\u6bb5\uff0c\u4e8b\u52a1\u5728\u79c1\u6709\u4e0a\u4e0b\u6587\u4e2d\u6267\u884c\uff0c\u5b8c\u6210\u4e4b\u540e\u5c31\u786e\u5b9a\u4e86\u4e8b\u52a1\u7684\u8bfb\u96c6\u5408\uff0c\u4ee5\u53ca\u5199\u96c6\u5408\u3002</li> <li>\u9a8c\u8bc1\u9636\u6bb5\uff0c\u4e5f\u5c31\u662f\u9488\u5bf9\u591a\u4e2a\u4e8b\u52a1\u7684\u8bfb\u96c6\u5408\uff0c\u5199\u96c6\u5408\u6765\u9a8c\u8bc1\u7ed3\u679c\u662f\u5426\u51b2\u7a81\u3002</li> <li>\u5199\u9636\u6bb5\uff0c\u5c06\u7ed3\u679c\u4ece\u79c1\u6709\u4e0a\u4e0b\u6587\uff0c\u63d0\u4ea4\u5230\u6570\u636e\u5e93\u72b6\u6001\u3002</li> </ul> <p>\u5e38\u89c1\u7684\u9a8c\u8bc1\u65b9\u5f0f\u662f\u540e\u5411\u5f0f\u9a8c\u8bc1\uff0c\u4e5f\u5c31\u662f\u68c0\u67e5\u548c\u5df2\u63d0\u4ea4\u4e8b\u52a1\u7684\u51b2\u7a81\u3002\u5728\u6781\u77ed\u7684\u9a8c\u8bc1\u9636\u6bb5\uff0c\u4e0d\u5141\u8bb8\u4efb\u4f55\u4e8b\u52a1\u63d0\u4ea4\uff0c\u8fd9\u662f\u4efb\u4f55\u6570\u636e\u5e93\u90fd\u8981\u9075\u5b88\u7684\u6761\u4ef6\u3002\u5982\u679c\u6ee1\u8db3\uff1a</p> <ul> <li>t1\u5728t2\u7684\u8bfb\u9636\u6bb5\u5f00\u59cb\u4e4b\u524d\u63d0\u4ea4\uff0c\u5219t2\u53ef\u4ee5\u63d0\u4ea4\u3002</li> <li>t1\u6ca1\u6709\u5199\u5165\u4efb\u4f55t2\u770b\u5230\u7684\u503c\uff0c\u5219t2\u53ef\u4ee5\u63d0\u4ea4\u3002</li> <li>t1\u548ct2\u64cd\u4f5c\u72ec\u7acb\u7684\u6570\u636e\u96c6\u5408\uff0c\u5219\u4e24\u8005\u5747\u63d0\u4ea4\u3002</li> </ul>"},{"location":"dataWarehouse/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/#_33","title":"\u591a\u7248\u672c\u5e76\u53d1\u63a7\u5236","text":"<p>\u4f7f\u7528MVCC\uff0c\u5219\u8bfb\u5199\u64cd\u4f5c\u5728\u5b58\u50a8\u5c42\u9762\u4e0a\u53ea\u9700\u8981\u6700\u5c0f\u9650\u5ea6\u7684\u534f\u8c03\uff0c\u56e0\u4e3a\u8bfb\u64cd\u4f5c\u53ef\u4ee5\u7ee7\u7eed\u8bbf\u95ee\u65e7\u7684\u503c\uff0c\u76f4\u5230\u65b0\u7684\u503c\u88ab\u63d0\u4ea4\u3002</p> <p>MVCC\u533a\u5206\u5df2\u63d0\u4ea4\u548c\u672a\u63d0\u4ea4\u7684\u7248\u672c\uff0c\u5bf9\u5e94\u4e8e\u5df2\u63d0\u4ea4\u548c\u672a\u63d0\u4ea4\u4e8b\u52a1\u7684\u503c\u7684\u7248\u672c\u3002\u6700\u540e\u63d0\u4ea4\u7684\u503c\u7684\u7248\u672c\u4e5f\u5c31\u662f\u503c\u7684\u5f53\u524d\u7248\u672c\u3002\u4e00\u822c\u5728MVCC\u4e2d\uff0c\u4e8b\u52a1\u7ba1\u7406\u5668\u7684\u76ee\u6807\u662f\u786e\u4fdd\u4efb\u4e00\u65f6\u523b\u6700\u591a\u53ea\u6709\u4e00\u4e2a\u672a\u63d0\u4ea4\u7684\u503c\u7248\u672c\u3002</p> <p>\u901a\u5e38\u901a\u8fc7MVCC\u6765\u5b9e\u73b0\u5feb\u7167\u9694\u79bb\u673a\u5236\uff0c\u4e5f\u5c31\u662f\u53ef\u91cd\u590d\u8bfb - \u8bfb\u5199\u4e0d\u76f8\u4e92\u963b\u585e\uff0c\u540c\u65f6\u4e00\u4e2a\u4e8b\u52a1\u770b\u5230\u7684\u662f\u4e00\u81f4\u6027\u5feb\u7167\u3002</p>"},{"location":"dataWarehouse/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/#_34","title":"\u60b2\u89c2\u5e76\u53d1\u63a7\u5236","text":"<p>\u60b2\u89c2\u5e76\u53d1\u63a7\u5236\u65b9\u6848\u6bd4\u4e50\u89c2\u65b9\u6848\u66f4\u4fdd\u5b88,\u901a\u5e38\u901a\u8fc7\u52a0\u9501\u6765\u5b9e\u73b0\u3002\u8fd9\u79cd\u65b9\u6848\u5728\u4e8b\u52a1\u8fd0\u884c\u65f6\u786e\u5b9a\u5176\u95f4\u7684\u51b2\u7a81\u5e76\u963b\u585e\u6216\u4e2d\u6b62\u6267\u884c\u3002</p> <p>\u5e38\u89c1\u65b9\u6cd5\u4e4b\u4e00\uff0c\u5c31\u662f\u8bb0\u5f55\u6bcf\u4e2arecord\u7684max_read_timestamp\u548cmax_write_timestamp\u3002\u5982\u679c\u8bfb\u64cd\u4f5c\u7684\u65f6\u95f4\u6233\u5c0f\u4e8emax_write_timestamp\uff0c\u5219\u4e8b\u52a1\u4e2d\u6b62\u3002\u800c\u5982\u679c\u5199\u64cd\u4f5c\u7684\u65f6\u95f4\u6233\u5c0f\u4e8emax_read_timestamp,\u7406\u8bba\u4e0a\u4e0d\u5141\u8bb8\uff0c\u4f46\u662f\u5b9e\u8df5\u4e2d\u540e\u8005\u662f\u5141\u8bb8\u7684\u3002\u6bcf\u6b21\u8bfb\u5199\u5b8c\u6210\uff0c\u65f6\u95f4\u6233\u4f1a\u88ab\u66f4\u65b0\u3002</p> <p>\u60b2\u89c2\u5e76\u53d1\u63a7\u5236\uff0c\u4f7f\u7528\u7684\u662f\u4e24\u9636\u6bb5\u9501(2PL)\u3002\u8fd9\u79cd\u9501\u7ba1\u7406\u6709\u4e24\u4e2a\u9636\u6bb5\uff1a\u9996\u5148\u662f\u589e\u957f\u9636\u6bb5\uff0c\u4e5f\u5c31\u662f\u5c06\u83b7\u53d6\u4e8b\u52a1\u6240\u9700\u7684\u6240\u6709\u9501\uff0c\u5e76\u4e14\u4e0d\u91ca\u653e\u4efb\u4f55\u9501\u3002\u5176\u6b21\u662f\u6536\u7f29\u9636\u6bb5\uff0c\u6b64\u9636\u6bb5\u91ca\u653e\u589e\u957f\u9636\u6bb5\u83b7\u5f97\u7684\u6240\u6709\u9501\u3002</p> <p>\u6b64\u5904\u4e8b\u52a1\u4e00\u65e6\u91ca\u653e\u4e86\u4e00\u4e2a\u9501\uff0c\u5c31\u4e0d\u80fd\u518d\u83b7\u5f97\u4efb\u4f55\u9501\u3002</p> <p>lock &amp; latch</p> <p>\u4e8b\u52a1\u5904\u7406\u4e2d\uff0c\u8d1f\u8d23\u903b\u8f91\u5b8c\u6574\u6027\u7684\u662flock\uff0c\u800c\u8d1f\u8d23\u7269\u7406\u5b8c\u6574\u6027\u7684\u662flatch\u3002\u540e\u8005\u662f\u4ee3\u7801\u5b9e\u73b0\u4e2d\u7684\u9501\uff0c\u6bd4\u5982\u53ef\u91cd\u5165\u9501\u7b49\u3002</p> <p>\u9501\u7528\u4e8e\u9694\u79bb\u548c\u8c03\u5ea6\u91cd\u53e0\u7684\u4e8b\u52a1\u3001\u7ba1\u7406\u6570\u636e\u5e93\u5185\u5bb9\uff08\u800c\u975e\u5185\u90e8\u5b58\u50a8\u7ed3\u6784\uff09\uff0c\u5e76\u4e14\u9501\u662f\u5728\u952e\u4e0a\u83b7\u53d6\u7684\u3002\u9501\u53ef\u4ee5\u4fdd\u62a4\u67d0\u4e2a\u7279\u5b9a\u7684\u952e\uff08\u65e0\u8bba\u8be5\u952e\u5b58\u4e0d\u5b58\u5728\uff09\u6216\u4e00\u4e2a\u8303\u56f4\u5185\u7684\u952e\u3002\u9501\u901a\u5e38\u5728\u6811\u5b9e\u73b0\u4e4b\u5916\u8fdb\u884c\u5b58\u50a8\u548c\u7ba1\u7406\uff0c\u5b83\u8868\u793a\u4e00\u4e2a\u8f83\u9ad8\u5c42\u7ea7\u7684\u6982\u5ff5\uff0c\u7531\u6570\u636e\u5e93\u7684\u9501\u7ba1\u7406\u5668\u7ba1\u7406\u3002</p> <p>\u8fd9\u91cc\u5c31\u53ef\u4ee5\u77e5\u9053\uff0c\u6570\u636e\u5e93\u4e2d\u5e38\u8bf4\u7684\u9501\u5176\u5b9e\u5e76\u4e0d\u662f\u4ee3\u7801\u5b9e\u73b0\u4e2d\u7684\u9501\uff0c\u540e\u8005\u901a\u5e38\u4ee5latch\u51fa\u73b0\u3002\u6240\u8c13\u7684\u65e0\u9501\u5e76\u53d1\u63a7\u5236\u6280\u672f\uff0c\u4e5f\u53ea\u662f\u903b\u8f91\u5c42\u9762\uff0c\u4ee3\u7801\u5b9e\u73b0\u5c42\u9762\u4e5f\u5fc5\u7136\u4f1a\u6709latch\u3002</p> <p>latch\u662f\u5728\u9875\u7ea7\u522b\u4e0a\u83b7\u53d6\u7684\u3002\u5728\u8bbf\u95ee\u4efb\u4f55\u9875\u4e4b\u524d\uff0c\u5fc5\u987b\u8981\u5148\u52a0latch\uff0c\u4ee5\u786e\u4fdd\u5e76\u53d1\u5b89\u5168\u3002\u7531\u4e8e\u53f6\u8282\u70b9\u4e0a\u7684\u4fee\u6539\u53ef\u80fd\u4f1a\u4f20\u64ad\u5230B\u6811\u7684\u66f4\u9ad8\u5c42\uff0c\u6240\u4ee5\u53ef\u80fd\u8981\u5728\u591a\u4e2a\u5c42\u4e0a\u83b7\u5f97\u95e9\u9501\u3002</p> <p>\u901a\u5e38\uff0c\u6570\u636e\u5e93\u5e76\u53d1\u64cd\u4f5c\u6709\u5982\u4e0b\u4e09\u7c7b\uff1a</p> <ul> <li>\u5e76\u53d1\u8bfb</li> <li>\u5e76\u53d1\u66f4\u65b0</li> <li>\u5199\u65f6\u8bfb</li> </ul> <p>\u9488\u5bf9\u7b2c\u4e00\u79cd\u60c5\u51b5\uff0c\u51fa\u73b0\u4e86\u8bfb\u5199\u9501\u3002\u5176\u652f\u6301\u5728\u5e76\u53d1\u8bfb\u7684\u65f6\u5019\u6ca1\u6709\u6392\u4ed6\u6027\uff0c\u4e5f\u5c31\u662f\u53ef\u4ee5\u5171\u4eab\u9501\u8d44\u6e90\u6240\u6709\u6743\u3002\u5176\u4ed6\u7ec4\u5408\u90fd\u9700\u8981\u83b7\u5f97\u6392\u4ed6\u6027\u6240\u6709\u6743\u3002</p> <p>latch coupling</p> <p>latch\u8026\u5408\uff0c\u6307\u7684\u662f\u5b83\u5141\u8bb8\u6301\u6709\u95e9\u9501\u7684\u65f6\u95f4\u66f4\u77ed\uff0c\u5e76\u5728\u5f53\u524d\u64cd\u4f5c(\u4ee3\u7801\u5c42\u9762)\u660e\u663e\u4e0d\u518d\u9700\u8981\u5b83\u4eec\u65f6\u7acb\u5373\u91ca\u653e\u3002</p> <ul> <li>\u8bfb\u53d6\u65f6\uff0c\u4e00\u65e6\u627e\u5230\u5b50\u8282\u70b9\u5e76\u83b7\u5f97\u5b83\u7684\u95e9\u9501\uff0c\u5c31\u53ef\u4ee5\u91ca\u653e\u7236\u8282\u70b9\u7684\u95e9\u9501\u3002</li> <li>\u63d2\u5165\u65f6\uff0c\u5982\u679c\u5b50\u8282\u70b9\u8fd8\u6ca1\u6ee1\uff0c\u5219\u53ef\u4ee5\u91ca\u653e\u7236\u95e9\u9501\u3002</li> <li>\u5220\u9664\u65f6\uff0c\u5982\u679c\u5b50\u8282\u70b9\u5305\u542b\u8db3\u591f\u591a\u7684\u5143\u7d20\uff0c\u6216\u8005\u8be5\u64cd\u4f5c\u4e0d\u4f1a\u5bfc\u81f4\u8282\u70b9\u5408\u5e76\uff0c\u5219\u53ef\u4ee5\u91ca\u653e\u7236\u8282\u70b9\u4e0a\u7684\u95e9\u9501\u3002</li> </ul>"},{"location":"dataWarehouse/%E6%95%B0%E4%BB%93/","title":"\u6570\u4ed3\u7406\u8bba\u603b\u7ed3","text":""},{"location":"dataWarehouse/%E6%95%B0%E4%BB%93/#_2","title":"\u7ec4\u4ef6\u548c\u67b6\u6784","text":""},{"location":"dataWarehouse/%E6%95%B0%E4%BB%93/#_3","title":"\u67b6\u6784","text":""},{"location":"dataWarehouse/%E6%95%B0%E4%BB%93/#lambda","title":"lambda\u67b6\u6784","text":"<p>\u987e\u540d\u601d\u4e49\uff0c\u5f62\u4f3clambda\uff0c\u4e5f\u5c31\u662f\u79bb\u7ebf\u548c\u5b9e\u65f6\u4e24\u6761\u7ebf\u5e76\u884c\u3002</p> <p>\u6574\u4f53\u5206\u4e3a\u6279\u5904\u7406\uff0c\u6d41\u5904\u7406\u4e24\u4e2a\u5206\u652f\u3002\u5176\u4e2d\u6d41\u5904\u7406\u5c42\u8d1f\u8d23\u5feb\u901f\u8ba1\u7b97\uff0c\u83b7\u5f97\u60f3\u8981\u7684\u7ed3\u679c\uff0c\u800c\u6279\u5904\u7406\u5c42\u8d1f\u8d23\u5927\u6279\u91cf\u7cbe\u786e\u5904\u7406\u6240\u6709\u6570\u636e\uff0c\u5e76\u4e14\u6700\u7ec8\u53ef\u4ee5\u5c06\u6d41\u5904\u7406\u5c42\u7684\u975e\u7cbe\u786e\u5904\u7406\u6570\u636e\u66ff\u6362\u6389\u3002</p> <p>\u4e24\u8005\u7684\u8ba1\u7b97\u7ed3\u679c\u6700\u7ec8\u90fd\u8f93\u51fa\u5230\u670d\u52a1\u5c42\uff0c\u670d\u52a1\u5c42\u901a\u8fc7\u8fd4\u56de\u9884\u5148\u8ba1\u7b97\u7684\u6570\u636e\u89c6\u56fe\uff0c\u6765\u76f8\u5e94app\u7684\u67e5\u8be2\u3002</p>"},{"location":"dataWarehouse/%E6%95%B0%E4%BB%93/#kappa","title":"kappa\u67b6\u6784","text":"<p>\u4e5f\u5c31\u662f\u7eaf\u6d41\u5f0f\u5904\u7406\uff0c\u53bb\u6389\u4e86\u6279\u5904\u7406\u5c42\uff0c\u5ef6\u8fdf\u66f4\u4f4e\u3002</p> <p>\u4f46\u662f\u4e0e\u6b64\u540c\u65f6\u5e26\u6765\u4e24\u4e2a\u95ee\u9898</p> <ul> <li>\u6574\u4e2a\u7cfb\u7edf\u9700\u8981\u4fdd\u6301\u7aef\u5230\u7aef\u7684<code>exactly-once</code>\u3002</li> <li>\u7cfb\u7edf\u5904\u7406\u5386\u53f2\u6570\u636e\u7684\u538b\u529b\u8d8a\u6765\u8d8a\u5927</li> </ul>"},{"location":"dataWarehouse/%E6%95%B0%E4%BB%93/#_4","title":"\u6d41\u6279\u4e00\u4f53","text":"<p>\u4e5f\u5c31\u662f\u5c06\u6d41\u6570\u636e\u548c\u6279\u6570\u636e\u653e\u5728\u540c\u4e00\u4e2a\u6846\u67b6\u4e2d\uff0c\u8fdb\u884c\u4e00\u4f53\u5316\u5904\u7406\u3002</p> <ul> <li>Spark</li> <li>\u6279\u5904\u7406\uff1aSparkSQL</li> <li>\u6d41\u5904\u7406\uff1aStructStreaming</li> <li>Flink\uff1a\u53ef\u540c\u65f6\u6d41\u6279\u5904\u7406\uff0c\u901a\u8fc7\u6539\u53d8\u8ba1\u7b97\u56fe\u7684\u89e6\u53d1\u65f6\u673a\u6765\u63a7\u5236\u3002</li> <li>Doris\uff1a\u4e5f\u53ef\u4ee5\u505a\u6d41\u6279\u4e00\u4f53\uff0c\u8fd9\u4e2a\u5728\u5b98\u7f51\u548c\u4e00\u672c\u4e66\u4e0a\u90fd\u770b\u5230\u8fc7\u3002</li> </ul>"},{"location":"dataWarehouse/%E6%95%B0%E4%BB%93/#_5","title":"\u6570\u4ed3\u5efa\u8bbe","text":""},{"location":"dataWarehouse/%E6%95%B0%E4%BB%93/#_6","title":"\u6570\u636e\u5e93\u7c7b\u522b","text":""},{"location":"dataWarehouse/%E6%95%B0%E4%BB%93/#oltp","title":"OLTP","text":"<p>\u5373<code>online-transcation-processing</code>\uff0c\u662f\u9762\u5411\u5f53\u524d\u6570\u636e\u7684\uff0c\u4ee5\u4e8b\u52a1\u4e3a\u6838\u5fc3\u7684\u5206\u6790\u5904\u7406\u7cfb\u7edf\u3002\u6700\u5178\u578b\u7684\u5c31\u6bd4\u5982<code>MySQL</code>\u7b49\u5173\u7cfb\u578b\u6570\u636e\u5e93\u3002\u901a\u8fc7\u524d\u7aef\u89e6\u53d1\u540e\u7aef\u76f8\u5e94\uff0c\u4ece\u800c\u9a71\u52a8\u6570\u636e\u5e93\u7684\u72b6\u6001\u6539\u53d8\u3002</p>"},{"location":"dataWarehouse/%E6%95%B0%E4%BB%93/#olap","title":"OLAP","text":"<p><code>online-analysis-processing</code>\uff0c\u662f\u9762\u5411\u5f53\u524d\u6570\u636e\uff0c\u4ee5\u53ca\u6d77\u91cf\u5386\u53f2\u6570\u636e\u7684\uff0c\u4ee5\u4e3b\u9898\u4e3a\u6838\u5fc3\u7684\u5206\u6790\u5904\u7406\u7cfb\u7edf\u3002\u6574\u4e2a\u6570\u636e\u4ed3\u5e93\u7cfb\u7edf\u5c31\u662f\u4e00\u4e2aOLAP\u3002\u5f53\u7136\uff0c\u6211\u611f\u89c9\u4e00\u822c\u8bf4OLAP\u7684\u8bdd\u7279\u6307\u7684\u662f<code>Doris</code>\u8fd9\u7c7b\u7684OLAP\u5f15\u64ce\u3002</p>"},{"location":"dataWarehouse/%E6%95%B0%E4%BB%93/#_7","title":"\u5206\u5c42","text":""},{"location":"dataWarehouse/%E6%95%B0%E4%BB%93/#_8","title":"\u539f\u56e0","text":"<ul> <li>\u51cf\u5c11\u91cd\u590d\u5f00\u53d1\u3002\u53ef\u4ee5\u5c06\u5e38\u7528\u7684\u8868\u6c89\u6dc0\u4e0b\u6765\uff0c\u51cf\u5c11\u4e0d\u5fc5\u8981\u7684\u5f00\u53d1\uff0c\u4ece\u800c\u51cf\u5c11\u8d44\u6e90\u6d88\u8017\u3002</li> <li>\u6570\u636e\u8840\u7f18\u8ffd\u8e2a\u3002\u8ffd\u8e2a\u6bcf\u4e2a\u8868\u7684\u4e0a\u4e0b\u6e38\u60c5\u51b5\uff0c\u8868<code>owner</code>\u662f\u8c01\uff0c\u65b9\u4fbf\u8fd0\u7ef4\u7ba1\u7406\u3002</li> <li>\u89e3\u8026\u3002\u800c\u4e0d\u662f\u70df\u56f1\u5f0f\u5f00\u53d1-\u76f4\u63a5\u4ece<code>ods</code>\u7a7f\u900f\u3002\u65b9\u4fbf\u6574\u4f53\u6570\u636e\u7684\u4fee\u6539\u548c\u6574\u7406\u3002</li> <li>\u89c6\u89d2\u4e0d\u540c\u3002\u4e0d\u540c\u7684\u4eba\u5173\u6ce8\u4e0d\u540c\u7c92\u5ea6\u7684\u6570\u636e\uff0c\u6240\u4ee5\u5fc5\u7136\u9700\u8981\u5206\u5c42\uff0c\u8fd9\u662f\u5fc5\u8981\u6027\u3002\u4e0d\u53ef\u80fd\u7ed9\u6bcf\u4e2a\u804c\u4f4d\u7684\u4eba\u540c\u6837\u4e00\u4e2a\u7c92\u5ea6\u7684\u6570\u636e\u62a5\u544a\u3002</li> </ul>"},{"location":"dataWarehouse/%E6%95%B0%E4%BB%93/#_9","title":"\u5185\u5bb9","text":"<p>\u4e3b\u8981\u5206\u4e3a\u4e09\u5927\u5c42\uff0c\u4e5f\u5c31\u662f<code>ODS,CDM,ADS</code>\u3002</p> <ul> <li>ODS   \u4e5f\u79f0\u4e3a\u64cd\u4f5c\u6570\u636e\u5c42\u3001\u6570\u636e\u8d34\u6e90\u5c42\u3002\u9700\u8981\u5c06\u4e0d\u540c\u6570\u636e\u6e90\u7684\u6570\u636e\u540c\u6b65\u5230\u4e00\u8d77\uff0c\u8fdb\u884c\u7b80\u5355\u7684\u7edf\u4e00\u6574\u7406\u5373\u53ef(\u6bd4\u5982\u4e24\u4e2a\u6570\u636e\u6e90\u7684\u540c\u4e00\u4e2a\u542b\u4e49\u7684\u5b57\u6bb5\u4f7f\u7528\u4e0d\u540c\u7c7b\u578b\u8fdb\u884c\u5b58\u50a8)\u3002</li> <li>CDM   \u516c\u5171\u7ef4\u5ea6\u6a21\u578b\u5c42\u3002\u7528\u4e8e\u5b58\u653e\u660e\u7ec6\u4e8b\u5b9e\u6570\u636e\uff0c\u7ef4\u5ea6\u8868\u6570\u636e\uff0c\u4ee5\u53ca\u516c\u5171\u6307\u6807\u6c47\u603b\u6570\u636e\u3002\u5176\u4e2d\u660e\u7ec6\u6570\u636e\u8868\uff0c\u7ef4\u5ea6\u8868\u901a\u8fc7ODS\u5c42\u6570\u636e\u52a0\u5de5\u800c\u6765\uff0c\u516c\u5171\u6307\u6807\u6c47\u603b\u6570\u636e\u901a\u8fc7\u660e\u7ec6\u6570\u636e\u8868\uff0c\u7ef4\u5ea6\u8868\u52a0\u5de5\u800c\u6765\u3002</li> <li>DWD\u5c42\uff1a\u660e\u7ec6\u6570\u636e\u5c42\uff0c\u540c\u65f6\u53ef\u4ee5\u91c7\u7528\u7ef4\u5ea6\u9000\u5316\u624b\u6bb5(\u7a7a\u95f4\u6362\u65f6\u95f4)\uff0c\u63d0\u9ad8\u660e\u7ec6\u6570\u636e\u8868\u7684\u6613\u7528\u6027\u3002</li> <li>DWS\u5c42\uff1a\u52a0\u5f3a\u6307\u6807\u7684\u7ef4\u5ea6\u9000\u5316\uff0c\u91c7\u7528\u66f4\u591a\u7684\u5bbd\u8868\u5316\u624b\u6bb5\u6765\u6784\u5efa\uff0c\u63d0\u9ad8\u516c\u5171\u6307\u6807\u7684\u590d\u7528\u6027\uff0c\u51cf\u5c11\u91cd\u590d\u52a0\u5de5\u3002\u4e00\u822c\u662f\u6309\u7167<code>\u5468\u671f\u3001\u7ef4\u5ea6</code>\u6765\u805a\u5408\u6210\u6307\u6807\u8f83\u591a\u7684\u5bbd\u8868\u3002\u9700\u8981\u5728\u672c\u5c42\u5b8c\u6210\u6307\u6807\u53e3\u5f84\u7edf\u4e00(\u6bd4\u5982xxx_1d,xxx_7d,xxx_td)\u8868\u3002</li> <li>ADS</li> <li>\u6309\u7167<code>\u5e94\u7528\u57df</code>\u5212\u5206\uff0c\u5b58\u653e\u6570\u636e\u4ea7\u54c1\u7684\u7279\u5316\u7edf\u8ba1\u6307\u6807\uff0c\u5176\u901a\u8fc7CDM\u5c42\u6570\u636e\u4ee5\u53caODS\u5c42\u6570\u636e\u52a0\u5de5\u800c\u6765\u3002</li> <li>\u5f53\u7136\uff0c\u5982\u679c\u591a\u4e2a\u5e94\u7528\u4f7f\u7528\u540c\u4e00\u4e2a\u7279\u5316\u6307\u6807\uff0c\u53ef\u4ee5\u5c06\u5176\u6c89\u6dc0\u5230CDM\u5c42\u65b9\u4fbf\u590d\u7528\u3002</li> </ul>"},{"location":"dataWarehouse/%E6%95%B0%E4%BB%93/#_10","title":"\u5efa\u6a21\u65b9\u6cd5\u8bba","text":""},{"location":"dataWarehouse/%E6%95%B0%E4%BB%93/#er","title":"ER\u6a21\u578b","text":"<p>\u4e5f\u5c31\u662f\u5b9e\u4f53-\u5173\u7cfb\u6a21\u578b\u3002\u5177\u4f53\u7684\u8bdd\u53ef\u4ee5\u4ece1NF\u5f00\u59cb\u52303NF\u3002</p> <ul> <li>\u6bcf\u4e2a\u5c5e\u6027\u90fd\u4e0d\u53ef\u518d\u5206</li> <li>\u975e\u4e3b\u5b57\u6bb5\u5b8c\u5168\u4f9d\u8d56\u4e8e\u4e3b\u952e(\u590d\u5408\u4e3b\u952e\u7684\u6574\u4f53)\uff0c\u4e0d\u80fd\u5355\u72ec\u4f9d\u8d56\u4e8e\u5176\u4e2d\u7684\u4e00\u90e8\u5206</li> <li>\u975e\u4e3b\u5b57\u6bb5\u4e0d\u80fd\u4f9d\u8d56\u4e8e\u5176\u4ed6\u975e\u4e3b\u5b57\u6bb5</li> </ul> <p>\u8fd9\u91cc\u4e00\u822c\u8bf4\u7684\u662f<code>OLTP</code>\u4e2d\u7684ER\u6a21\u578b\uff0c\u5176\u662f\u9762\u5411\u67d0\u4e2a\u5177\u4f53\u4e1a\u52a1\u6d41\u7a0b\u7684\u5b9e\u4f53\u5bf9\u8c61\u5173\u7cfb\u7684\u62bd\u8c61\u3002\u800c\u5176\u5b9e<code>OLAP</code>\u4e2d\u4e5f\u6709ER\u6a21\u578b\uff0c\u4f46\u662f\u597d\u50cf\u90fd\u4e0d\u7528\u8fd9\u4e2a\u3002</p>"},{"location":"dataWarehouse/%E6%95%B0%E4%BB%93/#_11","title":"\u7ef4\u5ea6\u6a21\u578b","text":"<p><code>kimball</code>\u63d0\u51fa\uff0c\u901a\u5e38\u6709\u4e24\u79cd\u5b9e\u73b0-\u661f\u578b\u6a21\u578b\u548c\u96ea\u82b1\u6a21\u578b\u3002</p> <ul> <li>\u661f\u578b\u6a21\u578b</li> <li>\u5bf9\u6570\u636e\u505a\u4e86\u5197\u4f59</li> <li>\u6548\u7387\u8f83\u9ad8</li> <li>\u96ea\u82b1\u6a21\u578b</li> <li>\u5bf9\u6570\u636e\u62c6\u5230\u6ca1\u6709\u5197\u4f59</li> <li>\u6548\u7387\u4f4e\u4e0b</li> </ul> <p>\u5efa\u6a21\u6d41\u7a0b\u5982\u4e0b</p> <ol> <li>\u9009\u62e9\u9700\u8981\u8fdb\u884c\u5206\u6790\u51b3\u7b56\u7684\u4e1a\u52a1\u8fc7\u7a0b\u3002\u8fd9\u4e2a\u4e1a\u52a1\u8fc7\u7a0b\u53ef\u4ee5\u662f\u5355\u4e2a\u4e1a\u52a1\u4e8b\u4ef6\uff0c\u6bd4\u5982\u652f\u4ed8\uff0c\u9000\u6b3e\u3002\u4e5f\u53ef\u4ee5\u662f\u591a\u4e2a\u4e8b\u4ef6\u7ec4\u6210\u7684\u4e1a\u52a1\u6d41\u7a0b\uff0c\u6216\u8005\u67d0\u4e2a\u4e8b\u4ef6\u7684\u72b6\u6001\u3002</li> <li>\u9009\u62e9\u7c92\u5ea6\u3002\u901a\u5e38\uff0c\u9009\u62e9\u591a\u4e2a\u7ef4\u5ea6\u7ec4\u5408\u8d77\u6765\u4e0a\u5377\uff0c\u7ec4\u6210\u81ea\u5df1\u60f3\u8981\u7684\u7c92\u5ea6\u3002</li> <li>\u8bc6\u522b\u7ef4\u8868\u3002\u901a\u8fc7\u9700\u8981\u7684\u7c92\u5ea6\u7ec4\u7ec7\u5fc5\u987b\u7684\u7ef4\u5ea6\u4fe1\u606f\u3002</li> <li>\u9009\u62e9\u4e8b\u5b9e(\u5177\u4f53\u6570\u5b57)\u5217\uff0c\u6765\u786e\u5b9a\u5206\u6790\u9700\u8981\u8861\u91cf\u7684\u6307\u6807\u3002</li> </ol>"},{"location":"dataWarehouse/%E6%95%B0%E4%BB%93/#_12","title":"\u5efa\u6a21\u6d41\u7a0b","text":""},{"location":"dataWarehouse/%E6%95%B0%E4%BB%93/#_13","title":"\u540d\u8bcd\u672f\u8bed","text":"<p>\u6570\u636e\u57df</p> <p>\u9762\u5411\u4e1a\u52a1\u5206\u6790\uff0c\u5c06\u4e1a\u52a1\u8fc7\u7a0b\u6216\u8005\u7ef4\u5ea6\u8fdb\u884c\u62bd\u8c61\u7684\u96c6\u5408\u3002</p> <p>\u4e1a\u52a1\u8fc7\u7a0b</p> <p>\u6307\u7684\u662f\u4f01\u4e1a\u7684\u4e1a\u52a1\u6d3b\u52a8\u65f6\u95f4\uff0c\u6bd4\u5982\u4e0b\u5355\uff0c\u652f\u4ed8\uff0c\u9000\u6b3e\u3002\u662f\u4e00\u4e2a\u4e0d\u53ef\u62c6\u5206\u7684\u884c\u4e3a\u4e8b\u4ef6\u3002</p> <p>\u5ea6\u91cf</p> <p>\u4e5f\u6210\u4e3a\u539f\u5b50\u6307\u6807\u3002\u662f\u67d0\u4e00\u4e2a\u4e1a\u52a1\u4e8b\u4ef6\u884c\u4e3a\u7684\u5ea6\u91cf\uff0c\u6bd4\u5982\u4e0b\u5355\u4e86<code>xxx\u5143</code>\uff0c\u4e5f\u5373\u652f\u4ed8\u91d1\u989d\u7b49\u3002</p> <p>\u7ef4\u5ea6</p> <p>\u7ef4\u5ea6\u662f\u5ea6\u91cf(\u539f\u5b50\u6307\u6807)\u7684\u73af\u5883\uff0c\u5176\u5c5e\u4e8e\u4e00\u4e2a\u6570\u636e\u57df\u3002\u901a\u5e38\u6709\u5730\u7406\u7ef4\u5ea6\uff0c\u6216\u8005\u65f6\u95f4\u7ef4\u5ea6\u3002</p> <p>\u6d3e\u751f\u6307\u6807</p> <p>\u901a\u5e38\u6307\u7684\u662f\u4e00\u4e2a\u539f\u5b50\u6307\u6807 + \u591a\u4e2a\u4fee\u9970\u8bcd + \u65f6\u95f4\u5468\u671f\u3002\u6bd4\u5982\u6700\u8fd1\u4e00\u5929\u7684\u67d0\u7528\u6237\u7684\u6d88\u8d39\u603b\u989d\u3002</p>"},{"location":"dataWarehouse/%E6%95%B0%E4%BB%93/#_14","title":"\u6784\u5efa\u6d41\u7a0b","text":"<ol> <li>\u9700\u6c42\u8c03\u7814\u3002\u9762\u5411\u4e0d\u540c\u4e3b\u9898\u7684\u6570\u636e\u9700\u6c42\uff0c\u662f\u9a71\u52a8\u6570\u636e\u4ed3\u5e93\u5efa\u8bbe\u7684\u6839\u672c\u3002\u901a\u5e38\u901a\u8fc7\u548c\u4e1a\u52a1\u7ed3\u5408\u6700\u8fd1\u7684\u6570\u5206\u6765\u6536\u96c6\u3002</li> <li>\u6570\u636e\u57df\u5212\u5206\u3002\u6570\u636e\u57df\u662f\u9762\u5411\u4e1a\u52a1\u5206\u6790\uff0c\u5c06\u4e1a\u52a1\u8fc7\u7a0b\u548c\u7ef4\u5ea6\u8fdb\u884c\u62bd\u8c61\u7684\u96c6\u5408\u3002\u6bd4\u5982\u53ef\u4ee5\u6784\u5efa\u51fa<code>\u5546\u54c1\u57df\uff0c\u65e5\u5fd7\u57df\uff0c\u4ea4\u6613\u57df</code>\u7b49\u3002\u4ee5\u4ea4\u6613\u57df\u4e3a\u4f8b\u5b50\uff0c\u5176\u4e2d\u7531\u5305\u542b<code>\u52a0\u8d2d\uff0c\u4e0b\u5355\uff0c\u652f\u4ed8\uff0c\u9000\u6b3e\uff0c\u6536\u83b7</code>\u7b49\u4e1a\u52a1\u8fc7\u7a0b\u3002</li> <li>\u6784\u5efa\u603b\u7ebf\u77e9\u9635\u3002\u505a\u4e24\u4ef6\u4e8b\u60c5\uff0c\u5206\u522b\u662f\u660e\u786e\u6bcf\u4e2a\u6570\u636e\u57df\u7684\u4e1a\u52a1\u8fc7\u7a0b\u96c6\u5408\uff0c\u4ee5\u53ca\u6bcf\u4e2a\u4e1a\u52a1\u8fc7\u7a0b\u6240\u5173\u8054\u7684\u7ef4\u5ea6\u3002\u6240\u4ee5\u8fd9\u4e2a\u77e9\u9635\u7684\u7eb5\u8f74\u662f\u6570\u636e\u57df\u4e0b\u7684\u4e1a\u52a1\u6d41\u7a0b\uff0c\u6a2a\u8f74\u662f\u6240\u6709\u6570\u636e\u57df\u7684\u5168\u5c40\u4e00\u81f4\u6027\u7ef4\u5ea6\u3002</li> <li>\u89c4\u8303\u5b9a\u4e49\uff0c\u660e\u786e\u6bcf\u4e2a\u6307\u6807\u7684\u53e3\u5f84(\u5177\u4f53\u8ba1\u7b97\u903b\u8f91)\u3002</li> <li>\u6a21\u578b\u8bbe\u8ba1\u3002</li> </ol>"},{"location":"dataWarehouse/%E6%95%B0%E4%BB%93/#_15","title":"\u7ef4\u5ea6\u8bbe\u8ba1","text":"<p>\u7ef4\u5ea6\u662f\u7ef4\u5ea6\u5efa\u6a21\u7684\u6838\u5fc3</p> <p>\u6765\u6e90</p> <p>\u6765\u6e90\u4e8e\u548c\u4e1a\u52a1\u65b9\u7684\u4ea4\u8c08\uff0c\u901a\u5e38\u51fa\u73b0\u5728<code>group by / order by</code>\u8bed\u53e5\u4e4b\u540e\u3002</p> <p>\u7ef4\u8868\u8bbe\u8ba1</p> <p>\u9996\u5148\uff0c\u4eceODS\u4e2d\u62bd\u53d6\u4e00\u4e2a\u6765\u6e90\u4e8e\u540e\u53f0\u6570\u636e\u5e93\u7684\u6838\u5fc3\u7ef4\u5ea6\u8868\uff0c\u4e5f\u79f0\u4e3a\u4e3b\u7ef4\u8868\u3002</p> <p>\u5982\u679c\u662f\u6570\u4ed3\u4e2d\u7684\u5546\u54c1\u7ef4\u5ea6\uff0c\u5219\u53ef\u4ee5\u76f4\u63a5\u53d6\u4e1a\u52a1\u6570\u636e\u5e93\u7684\u5546\u54c1\u7ef4\u5ea6\u4f5c\u4e3a\u4e3b\u7ef4\u8868\u3002</p> <p>\u7136\u540e\uff0c\u786e\u5b9a\u76f8\u5173\u7ef4\u8868\u3002\u4e5f\u5c31\u662f\u901a\u8fc7\u5206\u6790\uff0c\u5f97\u51fa\u8be5\u7ef4\u5ea6\u8868\u53ef\u80fd\u548c\u54ea\u4e9b\u8868\u6709\u5173\u7cfb\uff0c\u6bd4\u5982\u5546\u54c1\u8868\u53ef\u80fd\u548c\u5546\u5bb6\uff0c\u7528\u6237\u7b49\u7ef4\u5ea6\u6709\u5173\u7cfb\uff0c\u53ef\u4ee5\u5c06\u5b83\u4eec\u76f4\u63a5\u901a\u8fc7\u5916\u952eJOIN\u8fc7\u6765\u3002</p> <p>\u901a\u5e38\u8fd9\u4e2a\u8fc7\u7a0b\uff0c\u5c31\u662f\u7ef4\u5ea6\u8868\u7684\u53cd\u89c4\u8303\u5316\uff0c\u4e5f\u5c31\u662f\u5c06\u4e3b\u7ef4\u8868\uff0c\u76f8\u5173\u7ef4\u8868\u6709\u7528\u4fe1\u606f\u5408\u5e76\u8d77\u6765\u6210\u4e3a\u4e00\u5f20\u8868\u3002</p> <p>\u6700\u540e\uff0c\u5c06\u8fd9\u4e2a\u5927\u7ef4\u5ea6\u8868\u8fdb\u884c\u7b5b\u9009\u548c\u5217\u88c1\u526a\uff0c\u53d6\u81ea\u5df1\u5173\u5fc3\u7684\u6700\u5c0f\u96c6\u5373\u53ef\u3002</p> <p>\u4e0b\u94bb</p> <p>\u901a\u8fc7\u67d0\u4e2a\u7ef4\u5ea6\uff0c\u53ef\u4ee5\u5bf9\u4e8b\u5b9e\u8868\u8fdb\u884c\u4e0b\u94bb\u7edf\u8ba1\u3002\u4e5f\u5c31\u662f\u4ece\u6700\u9ad8\u7c7b\u76ee -&gt; \u4e00\u7ea7\u7c7b\u76ee -&gt; \u4e8c\u7ea7\u7c7b\u76ee\u7b49\uff0c\u7ec6\u5316\u7c92\u5ea6\u3002</p> <p>\u7ef4\u5ea6\u53d8\u5316</p> <p>\u6570\u636e\u4ed3\u5e93\u662f\u8981\u505a\u5386\u53f2\u7edf\u8ba1\u7684\u3002\u4f46\u662f\u7ef4\u5ea6\u53ef\u80fd\u968f\u7740\u65f6\u95f4\u7684\u6d41\u901d\uff0c\u53d1\u751f\u53d8\u5316\u3002\u6bd4\u5982\u5546\u54c1\u7ef4\u5ea6\u4e2d\uff0c\u67d0\u4e2a\u5546\u54c1\u4e4b\u524d\u662fA\u7c7b\u76ee\uff0c\u4f46\u662f\u73b0\u5728\u88ab\u5212\u5206\u5230\u4e86B\u7c7b\u76ee\u4e2d\u3002\u90a3\u4e48\u5982\u4f55\u5728\u4e00\u4e2a\u6c47\u805a\u4e86\u6240\u6709\u5386\u53f2\u6570\u636e\u7684\u6570\u4ed3\u4e2d\u5904\u7406\u8fd9\u4e2a\u7ef4\u5ea6\u53d8\u5316\u5462\uff1f</p> <p>\u6709\u4e09\u79cd\u65b9\u5f0f\uff1a</p> <ul> <li>\u91cd\u5199\u7ef4\u5ea6\u503c\uff1a\u4e5f\u5c31\u662f\u76f4\u63a5\u5c06\u7ef4\u5ea6\u8868\u7684\u5bf9\u5e94\u4f4d\u7f6e\u4fee\u6539\u4e3a\u6700\u65b0\u503c\u5373\u53ef\uff0c\u4e4b\u540e\u65e0\u8bba\u65b0\u65e7\u4e8b\u5b9e\u6570\u636e\uff0c\u6240\u6709\u7684\u5173\u8054\u7ef4\u5ea6\u53d6\u7684\u90fd\u662f\u6700\u65b0\u7ef4\u5ea6\u3002</li> <li>\u63d2\u5165\u65b0\u7684\u7ef4\u5ea6\u884c\uff1a\u65b0\u52a0\u4e00\u4e2a\u7ef4\u5ea6\u884c\uff0c\u5e76\u589e\u52a0\u4e24\u4e2a\u65f6\u95f4\u6233\u5b57\u6bb5\uff0c\u8ba9\u65b0\u65e7\u5386\u53f2\u6570\u636e\u7684\u7ef4\u5ea6\u6709\u6548\u5206\u5f00\u3002</li> <li>\u6dfb\u52a0\u65b0\u7684\u7ef4\u5ea6\u5217\uff1a\u65b0\u52a0\u4e00\u4e2a\u7ef4\u5ea6\u5217\uff0cJOIN\u7684\u65f6\u5019\u53ef\u4ee5\u6839\u636e\u6761\u4ef6\u5224\u65ad\u8981\u65b0\u7684\u8fd8\u662f\u65e7\u7684\uff0c\u4ece\u800c\u53ef\u4ee5\u5728\u4e0d\u540c\u7ef4\u5ea6\u4e0a\u5377\u3002</li> </ul> <p>\u6781\u9650\u5b58\u50a8(\u62c9\u94fe\u5b58\u50a8)</p> <p>\u4f7f\u7528\u7684\u5c31\u662f\u7b2c\u4e8c\u79cd\u65b9\u5f0f\uff0c\u4e5f\u5c31\u662f\u63d2\u5165\u65b0\u7684\u7ef4\u5ea6\u884c\u7684\u65b9\u5f0f\u3002</p> <p>\u4e5f\u5c31\u662f\u5546\u54c1\u7ef4\u5ea6\u53d8\u66f4\u7684\u65f6\u5019\uff0c\u5e76\u4e0d\u76f4\u63a5\u539f\u5730\u66f4\u65b0\uff0c\u800c\u662f\u62c6\u5206\u4e3a\u4e24\u6bb5\u3002\u6bd4\u5982:</p> <ul> <li>t1-t2\uff0c\u7c7b\u578b1</li> <li>t2-now\uff0c\u7c7b\u578b2</li> </ul> <p>\u5176\u5b9e\u601d\u8def\u7c7b\u4f3c\u4e8e<code>\u6d41\u8868\u7406\u8bba\u4e2d\u7684\u601d\u60f3</code>\uff0c\u8bb0\u5f55\u53d8\u5316\u800c\u4e0d\u662f\u76f4\u63a5\u6c47\u603b\u5f97\u51fa\u7ed3\u679c\u3002\u5176\u5b9e<code>WAL</code>\u4e5f\u662f\u7c7b\u4f3c\u601d\u60f3\u3002</p> <p>\u5982\u4f55\u5bf9\u7528\u6237\u65e0\u611f\u77e5\u5462\uff1f</p> <p>\u963f\u91cc\u662f\u76f4\u63a5\u5728\u8bed\u6cd5\u6811\u90e8\u5206\u6539\u7684\uff0c\u4e5f\u5c31\u662f\u5bf9\u8bed\u6cd5\u6811\u904d\u5386\u7684\u65f6\u5019\u751f\u6210AST\u6811\u7684\u65f6\u5019\uff0c\u5185\u90e8\u7b97\u5b50\u7684\u6761\u4ef6\u4f1a\u505a\u81ea\u52a8\u7684\u4fee\u6539\uff0c\u505a\u5230\u5bf9\u7528\u6237\u900f\u660e\u3002</p>"},{"location":"dataWarehouse/%E6%95%B0%E4%BB%93/#_16","title":"\u4e8b\u5b9e\u8868\u8bbe\u8ba1","text":"<p>\u6574\u4f53\u6d41\u7a0b</p> <ol> <li>\u8bc6\u522b\u4e1a\u52a1\u8fc7\u7a0b</li> <li>\u9009\u62e9\u4e8b\u5b9e\u8868\u7c7b\u578b</li> <li>\u58f0\u660e\u7c92\u5ea6\u548c\u7ef4\u5ea6</li> <li>\u786e\u5b9a\u5ea6\u91cf\u503c</li> <li>\u7ef4\u5ea6\u9000\u5316</li> </ol> <p>\u7c7b\u578b</p> <p>\u4e8b\u5b9e\u8868\u5206\u4e3a\u4e09\u79cd\u7c7b\u578b\uff0c\u5206\u522b\u662f\u4e8b\u52a1\u578b\u4e8b\u5b9e\u8868\uff0c\u7d2f\u79ef\u5feb\u7167\u4e8b\u5b9e\u8868\uff0c\u5468\u671f\u5feb\u7167\u4e8b\u5b9e\u8868\u3002</p> <p>\u4e8b\u52a1\u4e8b\u5b9e\u8868-DWD\u5c42</p> <p>\u4e00\u822c\u4e00\u884c\u4ee3\u8868\u4e00\u79cd\u4e1a\u52a1\u8fc7\u7a0b\u7684\u4e8b\u52a1\u3002</p> <ul> <li>\u5355\u4e8b\u52a1\u4e8b\u5b9e\u8868\uff0c\u4e00\u4e2a\u8868\u5bf9\u5e94\u4e00\u79cd\u4e1a\u52a1\u8fc7\u7a0b\u7684\u4e8b\u52a1\u3002\u6bd4\u5982\u4e0b\u5355/\u7b7e\u6536\u3002</li> <li>\u591a\u4e8b\u52a1\u4e8b\u5b9e\u8868(\u5176\u5b9e\u548c\u4e0b\u9762\u7684\u7d2f\u79ef\u5feb\u7167\u4e8b\u5b9e\u8868\u7c7b\u4f3c)\uff0c\u4e00\u4e2a\u8868\u5bf9\u5e94\u591a\u4e2a\u4e1a\u52a1\u8fc7\u7a0b\u7684\u4e8b\u52a1\u7ec4\u5408\uff0c\u6bd4\u5982\u4ece\u4e0b\u5355\u5230\u7b7e\u6536\u3002</li> </ul> <p>\u9002\u7528\u4e8e\u957f\u751f\u547d\u5468\u671f\u7684\u5b9e\u4f53\uff0c\u6bd4\u5982\u7528\u6237\u3002</p> <p>\u7d2f\u79ef\u5feb\u7167\u4e8b\u5b9e\u8868-DWD\u5c42</p> <p>\u4e00\u884c\u4ee3\u8868\u4e00\u4e2a\u5b9e\u4f53\u6240\u8bbe\u8ba1\u5230\u7684\u591a\u4e2a\u4e1a\u52a1\u8fc7\u7a0b\u7684\u7ec4\u5408(\u53cd\u5e94\u5b8c\u6574\u7684\u751f\u547d\u5468\u671f)\u3002\u6700\u91cd\u8981\u7684\u662f\u8bb0\u5f55\u6bcf\u4e2a\u6d41\u7a0b\u7684\u65f6\u95f4\u3002</p> <p>\u6bd4\u5982\u5b50\u8ba2\u5355\u4ece\u4e0b\u5355-\u652f\u4ed8-\u53d1\u8d27-\u6536\u83b7\u7684\u5b8c\u6574\u8fc7\u7a0b\u7684\u65f6\u95f4\u7ec4\u5408\u3002</p> <p>\u5176\u9002\u7528\u4e8e\u77ed\u5468\u671f\u7684\u5b9e\u4f53\uff0c\u6bd4\u5982\u4ea4\u6613\u8ba2\u5355\u7b49\u3002</p> <p>\u5468\u671f\u5feb\u7167\u4e8b\u5b9e\u8868-DWS\u5c42</p> <p>\u4e5f\u5c31\u662f\u6700\u957f<code>td\u8868\uff0c3d\u8868</code>\u7b49\u7ecf\u8fc7\u6c47\u603b\u7684\u6570\u636e\uff0c\u901a\u8fc7\u5b9a\u671f\u6c47\u603b\uff0c\u6765\u538b\u7f29\u4e3a\u5468\u671f\u7684\uff0c\u4e0d\u540c\u7c92\u5ea6\u7684\u5feb\u7167\u6570\u636e\u3002</p> <p>\u4e8b\u5b9e\u8868\u4e5f\u6709\u62c9\u94fe\u5b58\u50a8\uff0c\u5177\u4f53\u548c\u7ef4\u5ea6\u8868\u7684\u62c9\u94fe\u5b58\u50a8\u4e00\u6837\u3002</p>"},{"location":"dataWarehouse/%E6%95%B0%E4%BB%93/#_17","title":"\u5176\u4ed6","text":""},{"location":"dataWarehouse/%E6%95%B0%E4%BB%93/#_18","title":"\u6570\u636e\u57df\u548c\u4e3b\u9898\u57df","text":"<p>\u6570\u636e\u57df\u662f\u6570\u4ed3\u4ece\u4e0a\u6e38\u6570\u636e\u6e90\u62ff\u5230\u6570\u636e\u4e4b\u540e\uff0c\u5bf9\u6570\u636e\u7684\u62bd\u8c61\u7ec4\u7ec7\u3002</p> <p>\u800c\u4e3b\u9898\u57df\u662f\u4ece\u4e0b\u6e38\u6570\u636e\u5e94\u7528\u5c42\u63a5\u5230\u9700\u6c42\u4e4b\u540e\uff0c\u5bf9\u6570\u4ed3\u81ea\u5df1\u6240\u63d0\u4f9b\u7684\u6570\u636e\u670d\u52a1\u9886\u57df\u7684\u5212\u5206\u3002</p> <p>\u7b80\u5355\u8bf4\uff0c\u4e00\u4e2a\u662f\u4ece\u4e0b\u5f00\u59cb\uff0c\u4e00\u4e2a\u662f\u4ece\u4e0a\u5f00\u59cb\u3002</p>"},{"location":"frameworkAnalysis/","title":"\u603b\u7ed3\u5206\u6790\u5408\u96c6","text":"<p>\u4e3b\u8981\u5206\u6790\u5927\u6570\u636e\u6846\u67b6\uff0c\u4ee5\u53ca\u4e00\u4e9b\u6709\u8da3\u7684\u6846\u67b6\u3002</p>"},{"location":"frameworkAnalysis/#_2","title":"\u5df2\u89e3\u6790\u5185\u5bb9","text":"<ul> <li>asyncTool: \u89e3\u51b3\u4efb\u610f\u7684\u591a\u7ebf\u7a0b\u5e76\u884c\u3001\u4e32\u884c\u3001\u963b\u585e\u3001\u4f9d\u8d56\u3001\u56de\u8c03\u7684\u5e76\u884c\u6846\u67b6\uff0c\u53ef\u4ee5\u4efb\u610f\u7ec4\u5408\u5404\u7ebf\u7a0b\u7684\u6267\u884c\u987a\u5e8f\uff0c\u5e26\u5168\u94fe\u8def\u6267\u884c\u7ed3\u679c\u56de\u8c03\u3002\u591a\u7ebf\u7a0b\u7f16\u6392\u4e00\u7ad9\u5f0f\u89e3\u51b3\u65b9\u6848\u3002\u6765\u81ea\u4e8e\u4eac\u4e1c\u4e3bApp\u540e\u53f0\u3002 (gitee.com)</li> <li>JVM\u5e76\u53d1\u7f16\u7a0b\u8be6\u89e3</li> <li>IO\u7cfb\u7edf\u8be6\u89e3</li> </ul>"},{"location":"frameworkAnalysis/#todolist","title":"todoList","text":""},{"location":"frameworkAnalysis/asyncToolLearn/","title":"asyncTool\u6846\u67b6\u68b3\u7406","text":"<p>\u539f\u9879\u76ee\u5730\u5740\uff1aasyncTool: \u89e3\u51b3\u4efb\u610f\u7684\u591a\u7ebf\u7a0b\u5e76\u884c\u3001\u4e32\u884c\u3001\u963b\u585e\u3001\u4f9d\u8d56\u3001\u56de\u8c03\u7684\u5e76\u884c\u6846\u67b6\uff0c\u53ef\u4ee5\u4efb\u610f\u7ec4\u5408\u5404\u7ebf\u7a0b\u7684\u6267\u884c\u987a\u5e8f\uff0c\u5e26\u5168\u94fe\u8def\u6267\u884c\u7ed3\u679c\u56de\u8c03\u3002\u591a\u7ebf\u7a0b\u7f16\u6392\u4e00\u7ad9\u5f0f\u89e3\u51b3\u65b9\u6848\u3002\u6765\u81ea\u4e8e\u4eac\u4e1c\u4e3bApp\u540e\u53f0\u3002 (gitee.com)</p>"},{"location":"frameworkAnalysis/asyncToolLearn/#_1","title":"\u68b3\u7406\u4f9d\u636e","text":"<ul> <li>\u6846\u67b6\u4f5c\u8005\u4e13\u680f</li> <li>QuickStart</li> <li>GITEE \u63d0\u4ea4\u8bb0\u5f55</li> <li>\u5355\u5143\u6d4b\u8bd5</li> </ul>"},{"location":"frameworkAnalysis/asyncToolLearn/#_2","title":"\u7ed3\u6784\u5206\u6790","text":""},{"location":"frameworkAnalysis/asyncToolLearn/#_3","title":"\u57fa\u672c\u7ed3\u6784","text":""},{"location":"frameworkAnalysis/asyncToolLearn/#worker","title":"worker","text":"<p>\u4e00\u4e2aworker\uff0c\u662f\u5bf9\u4e00\u6bb5\u8017\u65f6\u903b\u8f91\u7684\u5c01\u88c5\uff0c\u662f\u4e00\u4e2a\u6700\u5c0f\u6267\u884c\u5355\u5143\u3002\u5176\u4e2d\u7684\u6cdb\u578b<code>T,V</code>\u5206\u522b\u4ee3\u8868\u5165\u53c2\u548c\u8fd4\u56de\u503c\u7c7b\u578b\u3002</p> Java<pre><code>@FunctionalInterface\npublic interface IWorker&lt;T, V&gt; {\n    /**\n     * \u5728\u8fd9\u91cc\u505a\u8017\u65f6\u64cd\u4f5c\uff0c\u5982rpc\u8bf7\u6c42\u3001IO\u7b49\n     *\n     * @param object      object\n     * @param allWrappers \u4efb\u52a1\u5305\u88c5\n     */\n    V action(T object, Map&lt;String, WorkerWrapper&gt; allWrappers);\n\n    /**\n     * \u8d85\u65f6\u3001\u5f02\u5e38\u65f6\uff0c\u8fd4\u56de\u7684\u9ed8\u8ba4\u503c\n     *\n     * @return \u9ed8\u8ba4\u503c\n     */\n    default V defaultValue() {\n        return null;\n    }\n}\n</code></pre> <p>\u540c\u65f6\uff0c\u5b83\u8fd8\u6709\u4e00\u4e2a\u5b50\u63a5\u53e3\uff0c\u662f\u6dfb\u52a0\u9650\u65f6\u903b\u8f91\u7684worker\u3002</p> Java<pre><code>public interface ITimeoutWorker&lt;T, V&gt; extends IWorker&lt;T, V&gt; {\n    /**\n     * \u6bcf\u4e2aworker\u90fd\u53ef\u4ee5\u8bbe\u7f6e\u8d85\u65f6\u65f6\u95f4\n     * @return \u6beb\u79d2\u8d85\u65f6\u65f6\u95f4\n     */\n    long timeOut();\n\n    /**\n     * \u662f\u5426\u5f00\u542f\u5355\u4e2a\u6267\u884c\u5355\u5143\u7684\u8d85\u65f6\u529f\u80fd\uff08\u6709\u65f6\u662f\u4e00\u4e2agroup\u8bbe\u7f6e\u4e2a\u8d85\u65f6\uff0c\u800c\u4e0d\u5177\u5907\u5173\u5fc3\u5355\u4e2aworker\u7684\u8d85\u65f6\uff09\n     * &lt;p&gt;\u6ce8\u610f\uff0c\u5982\u679c\u5f00\u542f\u4e86\u5355\u4e2a\u6267\u884c\u5355\u5143\u7684\u8d85\u65f6\u68c0\u6d4b\uff0c\u5c06\u4f7f\u7ebf\u7a0b\u6c60\u6570\u91cf\u591a\u51fa\u4e00\u500d&lt;/p&gt;\n     * @return \u662f\u5426\u5f00\u542f\n     */\n    boolean enableTimeOut();\n}\n</code></pre>"},{"location":"frameworkAnalysis/asyncToolLearn/#callback","title":"callback","text":"<p>\u56de\u8c03\u63a5\u53e3</p> Java<pre><code>/**\n * \u6bcf\u4e2a\u6267\u884c\u5355\u5143\u6267\u884c\u5b8c\u6bd5\u540e\uff0c\u4f1a\u56de\u8c03\u8be5\u63a5\u53e3&lt;/p&gt;\n * \u9700\u8981\u76d1\u542c\u6267\u884c\u7ed3\u679c\u7684\uff0c\u5b9e\u73b0\u8be5\u63a5\u53e3\u5373\u53ef\n *\n * @author wuweifeng wrote on 2019-11-19.\n */\n@FunctionalInterface\npublic interface ICallback&lt;T, V&gt; {\n\n    /**\n     * \u4efb\u52a1\u5f00\u59cb\u7684\u76d1\u542c\n     */\n    default void begin() {\n\n    }\n\n    /**\n     * \u8017\u65f6\u64cd\u4f5c\u6267\u884c\u5b8c\u6bd5\u540e\uff0c\u5c31\u7ed9value\u6ce8\u5165\u503c\n     * \u53c2\u6570\u5206\u522b\u662f:\u662f\u5426\u6267\u884c\u6210\u529f\uff0c\u539f\u59cb\u5165\u53c2\uff0c\u6267\u884c\u7ed3\u679c\n     */\n    void result(boolean success, T param, WorkResult&lt;V&gt; workResult);\n}\n</code></pre>"},{"location":"frameworkAnalysis/asyncToolLearn/#wrapper","title":"wrapper","text":"<p>\u5bf9\u6bcf\u4e2a<code>worker</code>\u4ee5\u53ca\u5728\u5176\u4e0a\u5b89\u88c5\u7684<code>callback</code>\u8fdb\u884c\u5305\u88c5\uff0c\u4e5f\u5c31\u662f\u5bf9\u4e8e\u67d0\u4e2a\u4efb\u52a1\u6765\u8bf4\uff0c\u5176<code>wrapper = worker + callback</code></p> <p>\u7136\u540e\u5c06\u4efb\u52a1\u6d41\u7684<code>wrapper</code>\u7ec4\u5408\u5230\u4e00\u8d77\uff0c\u5f62\u6210\u4efb\u52a1\u6267\u884c\u4f9d\u8d56\u56fe\u3002\u8fd9\u91cc\u548c\u4f20\u7edf\u7684DAG\u6709\u6240\u4e0d\u540c(\u6bd4\u5982Spark\u4e2d\u7684)\uff0c\u5b83\u53ef\u4ee5\u6307\u5b9a\u67d0\u4e2a\u70b9\u7684\u4f9d\u8d56\u9879\u5230\u5e95\u7528\u4e0d\u7528\u5168\u90e8\u5b8c\u6210\u3002\u901a\u8fc7<code>must</code>\u53d8\u91cf\u63a7\u5236\u3002</p> <p>\u5bf9\u4e8e\u5355\u4e2a<code>wrapper</code>\uff0c\u5176\u6709\u5165\u8fb9\u96c6\u5408\u4ee5\u53ca\u51fa\u8fb9\u96c6\u5408\uff0c\u5206\u522b\u7528<code>dependWrappers</code>\u548c<code>nextWrappers</code>\u63a7\u5236\u3002\u5176\u4e2d\u7531\u4e8e\u4e0a\u6e38\u4f9d\u8d56\u53ef\u4ee5\u4e0d\u5fc5\u5168\u90e8\u6267\u884c\uff0c\u5219\u9700\u8981\u5bf9\u4e0a\u6e38\u7684\u6bcf\u4e2a<code>wrapper</code>\u518d\u6b21\u5305\u88c5\uff0c\u53ea\u591a\u4e86\u4e00\u4e2a\u5b57\u6bb5<code>must</code>.</p> <p>\u5219\u6700\u7ec8<code>dependWrappers</code>\u662f\u4e00\u4e2a<code>List&lt;DependWrapper&gt;</code>\u7c7b\u578b\u7684\u53d8\u91cf</p>"},{"location":"frameworkAnalysis/asyncToolLearn/#_4","title":"\u7ec4\u5408","text":"<p>\u5982\u679c\u4f7f\u7528\u6700\u539f\u59cb\u7684<code>Future</code>,\u90a3\u4e48\u7ed3\u679c\u7684\u83b7\u53d6\u903b\u8f91\u8fd8\u662f\u9700\u8981\u4f7f\u7528<code>get</code>\u8fdb\u884c\u963b\u585e\u4e3b\u7ebf\u7a0b\uff0c\u800c<code>get</code>\u7684\u65f6\u673a\u5f88\u96be\u628a\u63e1\u3002</p> <p>\u5728JDK5\u4e2d\u6ca1\u6709\u5f02\u6b65\u56de\u8c03\uff0c\u60f3\u8981\u540e\u7eed\u64cd\u4f5c\u7ed3\u679c\u5c31\u53ea\u80fd\u4e3b\u7ebf\u7a0b\u540c\u6b65\u963b\u585e\u3002\u4f46\u662fNetty\uff0c\u4ee5\u53caJDK8\u7684Future\u90fd\u5df2\u7ecf\u5b9e\u73b0\u4e86\u5f02\u6b65\u56de\u8c03\u7684\u529f\u80fd\uff0c\u53ef\u4ee5\u5728\u5f02\u6b65\u7ebf\u7a0b\u4e2d\u6267\u884c\u6240\u5b89\u88c5\u7684\u56de\u8c03\uff0c\u800c\u4e0d\u662f\u4e3b\u7ebf\u7a0b\u3002 \u5982\u679c\u4e3b\u7ebf\u7a0b\u60f3\u62ff\u5230\u7ed3\u679c\u518d\u6267\u884c\uff0c\u5fc5\u7136\u662f\u9700\u8981\u963b\u585e\u7684\u3002\u4f46\u662f\u963b\u585e\u7684\u65f6\u673a\u5982\u679c\u8fc7\u65e9\u6216\u8005\u8fc7\u665a\uff0c\u5c31\u4f7f\u5f97\u5f02\u6b65\u6267\u884c\u6548\u679c\u51cf\u5f31\u751a\u81f3\u6709bug\u4e86\u3002\u6240\u4ee5\u5982\u679c\u56de\u8c03\u903b\u8f91\u548c\u4f4d\u7f6e\u65e0\u5173\u7684\u8bdd\uff0c\u653e\u5230\u5f02\u6b65\u7ebf\u7a0b\u6267\u884c\u6548\u679c\u66f4\u597d\u3002</p> <p>\u5982\u679c\u8981\u81ea\u5df1\u5b9e\u73b0\u4e00\u4e2a\u5f02\u6b65\u4efb\u52a1\uff0c\u6a21\u62dfJDK8\u548cNetty\u7684Future\uff0c\u4e5f\u5c31\u662f\u53ef\u4ee5\u5b89\u88c5\u56de\u8c03\u51fd\u6570\uff0c\u90a3\u4e48\u57fa\u672c\u7684\u6a21\u5f0f\u5c31\u662f<code>wrapper=worker+callback</code></p> Java<pre><code>public class BootStrap {\n    public static void main(String[] args) {\n        BootStrap bootStrap = new BootStrap();\n        Worker worker = bootStrap.newWorker();\n        Wrapper wrapper = new Wrapper();\n        wrapper.setWorker(worker);\n        wrapper.setParam(\"hello\");\n\n        bootStrap\n                .doWork(wrapper)\n                // \u6dfb\u52a0\u56de\u8c03\u4efb\u52a1\uff0c\u5f02\u6b65\u7ebf\u7a0b\u6267\u884c\u5b8c\u6bd5\u4f1a\u5728\u5176\u7ebf\u7a0b\u8c03\u7528\n                .addListener(new Listener() {\n                    @Override\n                    public void result(Object result) {\n                        System.out.println(Thread.currentThread().getName());\n                        System.out.println(result);\n                    }\n                });\n        System.out.println(Thread.currentThread().getName());\n    }\n    //\u5f00\u542f\u4e00\u4e2a\u7ebf\u7a0b\u6267\u884c\u5f02\u6b65\u4efb\u52a1\uff0c\u7136\u540e\u76f4\u63a5\u8fd4\u56de\n    private Wrapper doWork(Wrapper wrapper){\n        new Thread(() -&gt; {\n            Worker worker = wrapper.getWorker();\n            // \u6267\u884c\u4efb\u52a1\u5e76\u5f97\u5230\u7ed3\u679c\n            String action = worker.action(wrapper.getParam());\n            // \u4f7f\u7528\u76d1\u542c\u5668\u5904\u7406\u7ed3\u679c\n            wrapper.getListener().result(action);\n        }).start();\n        return wrapper;\n    }\n    private Worker newWorker(){\n        return new Worker() {\n            @Override\n            public String action(Object object) {\n                try {\n                    Thread.sleep(1000);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n                return object + \"world\";\n            }\n        };\n    }\n\n}\n</code></pre> <p>\u8f93\u51fa\u7ed3\u679c\u4e3a\uff1a\u5e76\u6ca1\u6709\u963b\u585e\u4e3b\u7ebf\u7a0b\uff0c\u5e76\u4e14\u56de\u8c03\u88ab\u6267\u884c\u3002</p> <p><code>main</code></p> <p><code>Thread-0</code></p> <p><code>helloworld</code></p> <p>\u5982\u679c\u4f7f\u7528JDK8\u7684Future\uff0c\u5219\u53ef\u4ee5\u5982\u4e0b\u5b9e\u73b0\u540c\u7b49\u6548\u679c:</p> Java<pre><code>public class FutureTest {\n    public static void main(String[] args) {\n        CompletableFuture&lt;Void&gt; future = CompletableFuture.supplyAsync(() -&gt; {\n            try {\n                Thread.sleep(1000);\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n            return \"hello\";\n        }).thenAcceptAsync(res -&gt; {\n            System.out.println(Thread.currentThread().getName());\n            System.out.println(res + \" world\");\n        });\n        System.out.println(Thread.currentThread().getName());\n        future.join();\n    }\n}\n</code></pre>"},{"location":"frameworkAnalysis/asyncToolLearn/#_5","title":"\u4f7f\u7528\u6d41\u7a0b","text":""},{"location":"frameworkAnalysis/asyncToolLearn/#wrapper_1","title":"Wrapper\u521b\u5efa","text":"<p>\u4ee3\u7801\u6a21\u5f0f\u5982\u4e0b\uff1a</p> Java<pre><code>        WorkerWrapper&lt;String, String&gt; workerWrapper1 =  new WorkerWrapper.Builder&lt;String, String&gt;()\n                .worker(w1)\n                .callback(w1)\n                .param(\"1\")\n                .next(workerWrapper2)\n                .build();\n</code></pre> <p>\u5176\u4e2dbuild\u65b9\u6cd5\u903b\u8f91\u5982\u4e0b\u6240\u793a\uff1a</p> Java<pre><code>        public WorkerWrapper&lt;W, C&gt; build() {\n            WorkerWrapper&lt;W, C&gt; wrapper = new WorkerWrapper&lt;&gt;(id, worker, param, callback);\n            wrapper.setNeedCheckNextWrapperResult(needCheckNextWrapperResult);\n            //\u521b\u5efa\u4e2d\u901a\u8fc7\u8c03\u7528next\u7b49\u65b9\u6cd5\uff0c\u5c06\u9700\u8981\u4f9d\u8d56\u7684wrapper\u4f20\u5165\uff0c\u901a\u8fc7nextWrappers\u7b49\u53d8\u91cf\u7ef4\u62a4\u3002\n            // \u5728\u8fd9\u91cc\u5c31\u53ef\u4ee5\u4f9d\u636e\u8fd9\u4e9b\u53d8\u91cf\uff0c\u5bf9\u4f9d\u8d56\u5173\u7cfb\u8fdb\u884c\u6dfb\u52a0\u3002\n            if (dependWrappers != null) {\n                for (DependWrapper workerWrapper : dependWrappers) {\n                    workerWrapper.getDependWrapper().addNext(wrapper);\n                    wrapper.addDepend(workerWrapper);\n                }\n            }\n            if (nextWrappers != null) {\n                for (WorkerWrapper&lt;?, ?&gt; workerWrapper : nextWrappers) {\n                    boolean must = false;\n                    //selfIsMustSet\uff1a\u5b58\u50a8\u5f3a\u4f9d\u8d56\u4e8e\u81ea\u5df1\u7684wrapper\u96c6\u5408\n                    if (selfIsMustSet != null &amp;&amp; selfIsMustSet.contains(workerWrapper)) {\n                        must = true;\n                    }\n                    workerWrapper.addDepend(wrapper, must); //\u6dfb\u52a0\u4f9d\u8d56,\u5e76\u8bf4\u660e\u5f53\u524d\u9879\u662f\u8be5\u9879\u7684\u5f3a\u4f9d\u8d56\n                    wrapper.addNext(workerWrapper);\n                }\n            }\n\n            return wrapper;\n        }\n</code></pre>"},{"location":"frameworkAnalysis/asyncToolLearn/#_6","title":"\u6267\u884c\u6d41\u7a0b","text":"<p>\u5f02\u6b65\u4efb\u52a1\u901a\u8fc7Async\u7684\u9759\u6001\u65b9\u6cd5,\u4ee5\u4e0b\u9762\u7684\u540c\u6b65\u963b\u585e\u7248\u672c\u4e3a\u4f8b\u3002</p> <p>\u7ebf\u7a0b\u6c60\u53ef\u4ee5\u662f\u7528\u6237\u81ea\u5df1\u521b\u5efa\u7684\uff0c\u6216\u8005\u9ed8\u8ba4\u7684COMMON_POOL\u3002</p> Java<pre><code>    /**\n     * \u5982\u679c\u60f3\u81ea\u5b9a\u4e49\u7ebf\u7a0b\u6c60\uff0c\u8bf7\u4f20pool\u3002\u4e0d\u81ea\u5b9a\u4e49\u7684\u8bdd\uff0c\u5c31\u8d70\u9ed8\u8ba4\u7684COMMON_POOL\n     */\n    public static boolean beginWork(long timeout, ExecutorService executorService, WorkerWrapper... workerWrapper) throws ExecutionException, InterruptedException {\n        if(workerWrapper == null || workerWrapper.length == 0) {\n            return false;\n        }\n        //\u8fd9\u91cc\u662flist,\u56e0\u4e3a\u53ef\u80fd\u4f9d\u8d56\u5173\u7cfb\u5982\u4e0b\uff1a\n        //A ----&gt;\n        //       ----&gt;C\n        //B ----&gt;\n        List&lt;WorkerWrapper&gt; workerWrappers =  Arrays.stream(workerWrapper).collect(Collectors.toList());\n        return beginWork(timeout, executorService, workerWrappers);\n    }\n</code></pre> <p>\u63a5\u4e0b\u6765\u5f00\u59cb\u521b\u5efa\u5f02\u6b65\u4efb\u52a1\u6267\u884c\u5e76\u540c\u6b65\u963b\u585e\uff1a</p> Java<pre><code>    public static boolean beginWork(long timeout, ExecutorService executorService, List&lt;WorkerWrapper&gt; workerWrappers) throws ExecutionException, InterruptedException {\n        if(workerWrappers == null || workerWrappers.size() == 0) {\n            return false;\n        }\n        //\u4fdd\u5b58\u7ebf\u7a0b\u6c60\u53d8\u91cf\uff0c\u53ef\u80fd\u662f\u81ea\u5b9a\u4e49\u7684\u7ebf\u7a0b\u6c60\uff0c\u4e5f\u53ef\u80fd\u662f\u9ed8\u8ba4\u7684COMMON_POOL\n        Async.executorService = executorService;\n        //\u5b9a\u4e49\u4e00\u4e2amap\uff0c\u5b58\u653e\u6240\u6709\u7684wrapper\uff0ckey\u4e3awrapper\u7684\u552f\u4e00id\uff0cvalue\u662f\u8be5wrapper\uff0c\u53ef\u4ee5\u4ecevalue\u4e2d\u83b7\u53d6wrapper\u7684result\n        Map&lt;String, WorkerWrapper&gt; forParamUseWrappers = new ConcurrentHashMap&lt;&gt;();\n        //\u5bf9\u7b2c1\u5c42\u7684workerWrapper\u8fdb\u884c\u904d\u5386\uff0c\u542f\u52a8\u5f02\u6b65\u4efb\u52a1\uff0c\u751f\u6210CompletableFuture\u6570\u7ec4\n        CompletableFuture[] futures = new CompletableFuture[workerWrappers.size()];\n        for (int i = 0; i &lt; workerWrappers.size(); i++) {\n            WorkerWrapper wrapper = workerWrappers.get(i);\n            futures[i] = CompletableFuture.runAsync(() -&gt; wrapper.work(executorService, timeout, forParamUseWrappers), executorService);\n        }\n        try {\n            //\u7b49\u5f85\u6240\u6709\u4efb\u52a1\u5b8c\u6210\uff0c\u8fd9\u91cc\u8c03\u7528get\u540c\u6b65\u963b\u585e\n            CompletableFuture\n                    .allOf(futures)\n                    .get(timeout, TimeUnit.MILLISECONDS);\n            return true;\n        } catch (TimeoutException e) {\n            Set&lt;WorkerWrapper&gt; set = new HashSet&lt;&gt;();\n            totalWorkers(workerWrappers, set);\n            for (WorkerWrapper wrapper : set) {\n                wrapper.stopNow();\n            }\n            return false;\n        }\n    }\n</code></pre> <p>\u5176\u4e2d\u7684\u6838\u5fc3\u5728\u4e8e<code>wrapper.work</code>\u65b9\u6cd5\u4e2d</p> <p>\u5728\u8be5\u65b9\u6cd5\u4e2d\uff0c\u9996\u5148\u8fdb\u884c\u526a\u679d\u5224\u65ad\uff0c\u82e5\u4e0d\u9700\u8981\u6267\u884c\uff0c\u5219\u76f4\u63a5\u7ed3\u675f\u5f53\u524d\u4efb\u52a1\uff0c\u5f00\u59cb\u4e0b\u4e00\u4e2a\u4efb\u52a1\u3002</p> <p>\u5f53\u786e\u5b9a\u8981\u6267\u884c\u7684\u65f6\u5019\uff0c\u5206\u4e24\u79cd\u60c5\u51b5\u3002\u9996\u5148\u662f\u53ea\u6709\u4e00\u4e2a\u4f9d\u8d56\u7684\u60c5\u51b5\u3002\u5982\u679c\u8be5\u4f9d\u8d56\u5df2\u7ecf\u5b8c\u6bd5\uff0c\u5219\u76f4\u63a5<code>fire</code>\uff0c\u5373\u521b\u5efa\u5f02\u6b65\u4efb\u52a1\u5e76\u6267\u884c\uff0c\u4e3b\u7ebf\u7a0b\u540c\u6b65\u963b\u585e\u7b49\u5f85\u7ed3\u679c\u3002\u8fd9\u91cc\u8981\u963b\u585e\u7684\u539f\u56e0\u5f53\u7136\u662f\u56e0\u4e3a\u540c\u4e00\u6761\u8def\u5f84\u4e0a\u7684\u6bcf\u4e2a\u4efb\u52a1\u662f\u4e32\u884c\u5173\u7cfb\uff0c\u9700\u8981\u540c\u6b65\u7b49\u5f85\u3002\u7136\u540e\u6267\u884c<code>beginNext</code>\u65b9\u6cd5\uff0c\u8be5\u65b9\u6cd5\u7684\u6838\u5fc3\u903b\u8f91\u4e0e<code>Async.beginWork</code>\u65b9\u6cd5\u5168\u5b8c\u4e00\u81f4\uff0c\u5f53\u7136\u8fd9\u91cc\u7684\u5165\u53c2\u4e2d<code>fromWrapper</code>\u5c31\u662f\u5f53\u524d\u7684<code>wrapper</code>\u800c\u4e0d\u662f<code>null</code>\u4e86\u3002</p> <p>\u800c\u5f53\u6709\u591a\u4e2a\u4f9d\u8d56\u7684\u65f6\u5019\uff0c\u5206\u4e3a\u4e09\u79cd\u60c5\u51b5\uff1a</p> Text Only<pre><code>     *  1.\u5982\u679c\u6240\u6709\u4f9d\u8d56\u5bf9\u4e8e\u5f53\u524d\u4efb\u52a1\u90fd\u4e0d\u662f\u5fc5\u987b\u7684\uff0c\u5219\u76f4\u63a5\u6267\u884c\u5f53\u524d\u4efb\u52a1\n     *  2.\u5982\u679c\u4f9d\u8d56\u4e2d\u6709\u5fc5\u987b\u7684\uff0c\u4f46\u662f\u5f53\u524d\u4efb\u52a1\u662f\u975e\u5fc5\u987b\u7684\u90a3\u4e2a\u4f9d\u8d56\u6240\u89e6\u53d1\u7684\uff0c\u5219\u4e0d\u6267\u884c\uff0c\u5e76\u76f4\u63a5\u8fd4\u56de\n     *  3.\u5982\u679c\u4f9d\u8d56\u4e2d\u6709\u5fc5\u987b\u7684\uff0c\u5e76\u4e14\u5f53\u524d\u4efb\u52a1\u662f\u5fc5\u987b\u7684\u4f9d\u8d56\u6240\u89e6\u53d1\u7684\uff0c\u5219\u9700\u8981\u5224\u65ad\u662f\u5426\u6240\u6709\u7684\u5fc5\u987b\u4f9d\u8d56\u90fd\u6267\u884c\u5b8c\u6bd5\u4e86\u3002\u5982\u679c\u6267\u884c\u5b8c\u6bd5\u4e86\uff0c\u5219\u6267\u884c\u5f53\u524d\u4efb\u52a1\uff0c\u5426\u5219\u4e0d\u6267\u884c\n</code></pre> <p>\u5219\u5206\u522b\u5904\u7406\u5373\u53ef\u3002</p>"},{"location":"frameworkAnalysis/io/","title":"Java/Scala I/O","text":""},{"location":"frameworkAnalysis/io/#_1","title":"\u57fa\u7840","text":""},{"location":"frameworkAnalysis/io/#_2","title":"\u4f20\u8f93\u65b9\u5f0f\u5206\u7c7b","text":"<p>\u4ece\u4f20\u8f93\u65b9\u5f0f\u6765\u770b\uff0c\u5206\u4e3a\u5b57\u8282\u6d41\u548c\u5b57\u7b26\u6d41\u3002</p>"},{"location":"frameworkAnalysis/io/#_3","title":"\u5b57\u8282\u6d41","text":"<p>\u547d\u540d\u683c\u5f0f\uff1a<code>xxxStream</code></p> <p>InputStream</p> <p>This abstract class is the superclass of all classes representing an input stream of bytes. Applications that need to define a subclass of InputStream must always provide a method that returns the next byte of input.</p> <p></p> <p>OutputStream</p> <p>This abstract class is the superclass of all classes representing an output stream of bytes. An output stream accepts output bytes and sends them to some sink. Applications that need to define a subclass of OutputStream must always provide at least a method that writes one byte of output.</p> <p></p>"},{"location":"frameworkAnalysis/io/#_4","title":"\u5b57\u7b26\u6d41","text":"<p>Reader</p> <p>Abstract class for reading character streams. The only methods that a subclass must implement are read(char[], int, int) and close(). Most subclasses, however, will override some of the methods defined here in order to provide higher efficiency, additional functionality, or both.</p> <p></p> <p>Writer</p> <p>Abstract class for writing to character streams. The only methods that a subclass must implement are write(char[], int, int), flush(), and close(). Most subclasses, however, will override some of the methods defined here in order to provide higher efficiency, additional functionality, or both.</p> <p></p>"},{"location":"frameworkAnalysis/io/#_5","title":"\u76f8\u4e92\u8f6c\u6362","text":"<p>\u8fd9\u91cc\u7684\u6d41\u90fd\u662f\u5b57\u7b26\u6d41\uff0c\u4f46\u662f\u90fd\u4ee5\u5b57\u8282\u6d41\u4f5c\u4e3a\u6784\u9020\u53c2\u6570\u8fdb\u884c\u5305\u88c5\u3002</p> <p>\u4e5f\u5c31\u662f\u4e00\u4e2a\u4ece\u6587\u4ef6\u8bfb\u6570\u636e\uff0c\u53ef\u4ee5\u5728\u8bfb\u53d6\u7684\u65f6\u5019\u8fdb\u884c<code>decode</code>\uff0c\u5728\u8f93\u51fa\u7684\u65f6\u5019\u8fdb\u884c<code>encode</code></p> <p>InputStreamReader</p> <p>An InputStreamReader is a bridge from byte streams to character streams: It reads bytes and decodes them into characters using a specified charset. The charset that it uses may be specified by name or may be given explicitly, or the platform's default charset may be accepted. Each invocation of one of an InputStreamReader's read() methods may cause one or more bytes to be read from the underlying byte-input stream. To enable the efficient conversion of bytes to characters, more bytes may be read ahead from the underlying stream than are necessary to satisfy the current read operation. For top efficiency, consider wrapping an InputStreamReader within a BufferedReader. For example: BufferedReader in = new BufferedReader(new InputStreamReader(System. in));</p> <p></p> <p><code>InputStreamReader</code>\u7528\u6765\u5bf9\u5b57\u8282\u6d41\u8fdb\u884c\u5305\u88c5\uff0c\u6240\u4ee5\u9700\u8981\u5176\u4f5c\u4e3a\u6784\u9020\u53c2\u6570\u4f20\u5165\u3002</p> <p>\u53ef\u4ee5\u770b\u5230JDK\u7ed9\u7528\u6237\u989d\u5916\u5c01\u88c5\u597d\u4e86\u4e00\u4e2a<code>FileReader</code>\uff0c\u7528\u4e8e\u65b9\u4fbf\u6587\u4ef6\u8bfb\u53d6\uff0c\u5176\u4f7f\u7528<code>FileInputStream</code>\u4f5c\u4e3a\u6784\u9020\u53c2\u6570\u3002</p> <p>Reads text from character files using a default buffer size. Decoding from bytes to characters uses either a specified charset or the platform's default charset. The FileReader is meant for reading streams of characters. For reading streams of raw bytes, consider using a FileInputStream.</p> <p>OutputStreamWriter</p> <p>An OutputStreamWriter is a bridge from character streams to byte streams: Characters written to it are encoded into bytes using a specified charset. The charset that it uses may be specified by name or may be given explicitly, or the platform's default charset may be accepted. Each invocation of a write() method causes the encoding converter to be invoked on the given character(s). The resulting bytes are accumulated in a buffer before being written to the underlying output stream. Note that the characters passed to the write() methods are not buffered. For top efficiency, consider wrapping an OutputStreamWriter within a BufferedWriter so as to avoid frequent converter invocations. For example: Writer out = new BufferedWriter(new OutputStreamWriter(System. out));</p> <p>\u540c\u6837\u5c01\u88c5\u4e86\u4e00\u4e2a<code>FileWriter</code></p>"},{"location":"frameworkAnalysis/io/#_6","title":"\u8bbe\u8ba1\u601d\u8def","text":""},{"location":"frameworkAnalysis/io/#_7","title":"\u88c5\u9970\u8005\u6a21\u5f0f","text":"<p>\u88c5\u9970\u5668\u6a21\u5f0f | \u83dc\u9e1f\u6559\u7a0b (runoob.com)</p> <p>\u8be6\u7ec6\u8bb2\u89e3\u88c5\u9970\u8005\u6a21\u5f0f\u548c\u7ee7\u627f\u4e4b\u95f4\u7684\u5173\u7cfb\u548c\u4f18\u52a3(\u8bb2\u9053\u7406\u8fd9\u4e8b\u513f\uff0c\u4e0d\u6015\u8fc7 \u5c31\u6015\u4e0d\u591f)_\u88c5\u9970\u8005\u6a21\u5f0f\u548c\u7ee7\u627f\u533a\u522b-CSDN\u535a\u5ba2</p> <p><code>JDK IO</code>\u6574\u4f53\u91c7\u7528\u88c5\u9970\u8005\u6a21\u578b\u8fdb\u884c\u8bbe\u8ba1\u3002</p> <p>\u7b80\u5355\u6765\u8bb2\uff0c\u5982\u679c\u8981\u8bbe\u8ba1\u4e00\u4e2a<code>MyReader</code>\uff0c\u53ea\u7528\u7ee7\u627f\uff0c\u53ef\u80fd\u4f1a\u8bbe\u8ba1\u6210\u5982\u4e0b\uff1a</p> <ul> <li>MyReader</li> <li>MyFileReader</li> <li>MyMusicReader</li> <li>MyxxxReader</li> </ul> <p>\u5f53\u60f3\u8981\u628a\u6240\u6709\u6d41\u589e\u52a0<code>Buffer</code>\u529f\u80fd\u7684\u65f6\u5019\uff0c\u5c31\u9700\u8981\u66f4\u6df1\u4e00\u7ea7\u7684\u7ee7\u627f\u3002</p> <p>\u8981\u89e3\u51b3\u5c42\u7ea7\u592a\u6df1\u7684\u95ee\u9898\uff0c\u53ef\u4ee5\u5728\u7528\u6237\u7ebf\u7a0b\u4e0e\u5177\u4f53\u7c7b\u7684\u4f7f\u7528\u4e4b\u95f4\uff0c\u52a0\u4e00\u5c42\u8fdb\u884c\u89e3\u8026\u3002</p> <p>\u5177\u4f53\u800c\u8a00\uff0c\u5c06\u4fee\u9970\u529f\u80fd\u7684\u7c7b\u5355\u72ec\u62bd\u79bb\u51fa\u6765\uff0c\u5e76\u7ee7\u627f/\u5b9e\u73b0<code>MyReader</code>\u3002</p> <p>\u7136\u540e\u5728\u8be5\u7c7b\u4e2d\u62ff\u5230\u88ab\u4fee\u9970\u8005\u4f5c\u4e3a\u5b57\u6bb5\uff0c\u8fd9\u91cc\u4f7f\u7528\u591a\u6001\u53ef\u4ee5\u5c06\u7c7b\u578b\u58f0\u660e\u4e3a\u7236\u63a5\u53e3\u5373\u53ef\u3002</p> Java<pre><code>class MyBufferedReader implements MyReader{\n    private MyReader toenhance;\n    MyBufferedReafer(MyReader r){\n      this.toenhance = r\n    }\n    public xxx\n}\n</code></pre> <p>\u4ee5\u540e\u7528\u6237\u7ebf\u7a0b\u76f4\u63a5\u8c03\u7528\u7684\u90fd\u662f\u8be5\u589e\u5f3a\u7c7b\u7684\u65b9\u6cd5,\u7136\u540e\u7531\u8be5\u7c7b\u7edf\u4e00\u589e\u5f3a\uff0c\u9664\u4e86\u589e\u5f3a\u903b\u8f91\u4e4b\u5916\uff0c\u5176\u4ed6\u90e8\u5206\u90fd\u4e0e\u88ab\u589e\u5f3a\u7684\u7c7b\u8026\u5408\u3002</p>"},{"location":"frameworkAnalysis/io/#bufferedreader","title":"BufferedReader","text":"<p>\u5177\u4f53\u6765\u770b<code>BufferedReader</code></p> <p>\u5b57\u6bb5</p> Java<pre><code>    private Reader in;\n\n    private char cb[];\n    private int nChars, nextChar;\n</code></pre> <p>\u5176\u4ed6\u5b57\u6bb5\u5747\u4e3a\u5b9e\u73b0\u589e\u5f3a\u529f\u80fd\u6240\u9700\u8981\u7684\u5b57\u6bb5\u3002</p> <p>\u6784\u9020\u65b9\u6cd5</p> Text Only<pre><code>    /**\n     * Creates a buffering character-input stream that uses an input buffer of\n     * the specified size.\n     *\n     * @param  in   A Reader\n     * @param  sz   Input-buffer size\n     *\n     * @exception  IllegalArgumentException  If {@code sz &lt;= 0}\n     */\n    public BufferedReader(Reader in, int sz) {\n        super(in);\n        if (sz &lt;= 0)\n            throw new IllegalArgumentException(\"Buffer size &lt;= 0\");\n        this.in = in;\n        cb = new char[sz];\n        nextChar = nChars = 0;\n    }\n</code></pre> <p>read</p> Java<pre><code>    /**\n     * Reads a single character.\n     *\n     * @return The character read, as an integer in the range\n     *         0 to 65535 ({@code 0x00-0xffff}), or -1 if the\n     *         end of the stream has been reached\n     * @exception  IOException  If an I/O error occurs\n     */\n    public int read() throws IOException {\n        synchronized (lock) {\n            ensureOpen();\n            for (;;) {\n                if (nextChar &gt;= nChars) {\n                    fill();\n                    if (nextChar &gt;= nChars)\n                        return -1;\n                }\n                if (skipLF) {\n                    skipLF = false;\n                    if (cb[nextChar] == '\\n') {\n                        nextChar++;\n                        continue;\n                    }\n                }\n                return cb[nextChar++];\n            }\n        }\n    }\n</code></pre> <p>\u8fd9\u91cc\u8bfb\u53d6\u5355\u4e2a\u5b57\u7b26\uff0c\u91cc\u9762\u8c03\u7528\u7684\u662f<code>fill</code>\u65b9\u6cd5\u6765\u8bfb\u53d6\u5355\u4e2a\u5b57\u7b26\u5230\u7f13\u51b2\u533a\uff0c\u5176\u6838\u5fc3\u903b\u8f91\u5982\u4e0b\uff1a</p> Java<pre><code>        int n;\n        do {\n            n = in.read(cb, dst, cb.length - dst);\n        } while (n == 0);\n        if (n &gt; 0) {\n            nChars = dst + n;\n            nextChar = dst;\n        }\n</code></pre> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u6700\u7ec8\u5176\u5b9e\u8fd8\u662f\u8c03\u7528\u7684\u88ab\u4fee\u9970\u7c7b\u7684\u65b9\u6cd5\uff0c\u4f46\u662f\u5b9e\u73b0\u4e86\u589e\u5f3a\u529f\u80fd\u4e0e\u57fa\u7840\u529f\u80fd\u89e3\u8026\uff0c\u7531\u7ee7\u627f\u53d8\u4e3a\u7ec4\u5408\uff0c\u7075\u6d3b\u66f4\u5f3a\u7684\u597d\u5904\u3002</p>"},{"location":"frameworkAnalysis/io/#files","title":"Files\u5de5\u5177\u7c7b","text":"<p><code>\u4eceJDK7</code>\u5f00\u59cb\uff0c\u63d0\u4f9b\u7684\u6587\u4ef6/\u76ee\u5f55\u64cd\u4f5c\u5de5\u5177\u7c7b\uff0c\u5c01\u88c5\u4e86\u5f88\u591a\u5e38\u7528\u7684\u903b\u8f91\u3002</p>"},{"location":"frameworkAnalysis/io/#path","title":"Path","text":"<p>An object that may be used to locate a file in a file system. It will typically represent a system dependent file path. A Path represents a path that is hierarchical and composed of a sequence of directory and file name elements separated by a special separator or delimiter. A root component, that identifies a file system hierarchy, may also be present. The name element that is farthest from the root of the directory hierarchy is the name of a file or directory. The other name elements are directory names. A Path can represent a root, a root and a sequence of names, or simply one or more name elements. A Path is considered to be an empty path if it consists solely of one name element that is empty. Accessing a file using an empty path is equivalent to accessing the default directory of the file system. Path defines the getFileName, getParent, getRoot, and subpath methods to access the path components or a subsequence of its name elements.</p> <p>\u8bf4\u660e\u4e86\u5176\u5c31\u662f\u7528\u4e8e\u5728\u6587\u4ef6\u7cfb\u7edf\u4e2d\u5b9a\u4f4d\u6587\u4ef6\u7684\u7c7b\u3002</p> <p>\u6587\u6863\u4e2d\u8fd8\u7ed9\u4e86\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\uff1a</p> Java<pre><code>//Paths may be used with the Files class to operate on files, directories, and other types of files. For example, suppose we want a java. io. BufferedReader to read text from a file \"access. log\". The file is located in a directory \"logs\" relative to the current working directory and is UTF-8 encoded.\n      Path path = FileSystems. getDefault().getPath(\"logs\", \"access. log\");\n      BufferedReader reader = Files. newBufferedReader(path, StandardCharsets. UTF_8);\n</code></pre> <p>\u521b\u5efapath</p> <p>\u4f7f\u7528<code>Path.of</code>\u65b9\u6cd5\u8fdb\u884c\u521b\u5efa\uff0c\u53c2\u6570\u53ef\u4ee5\u662f\u6587\u4ef6\u8def\u5f84/URL\u3002\u8fd9\u91cc\u8981\u6ce8\u610f<code>idea</code>\u8fd0\u884c\u65f6\u914d\u7f6e\u7684\u9ed8\u8ba4\u5de5\u4f5c\u8def\u5f84\u3002</p> Java<pre><code>    public void demo1() {\n        Path path = Path.of(\"src/main/java/org/lxbigdata/io/hello.txt\");\n        try(BufferedReader reader = Files.newBufferedReader(path)){\n            String s = null;\n            while((s  = reader.readLine()) != null){\n                System.out.println(s);\n            }\n            reader.close();\n        }catch (IOException e){\n            e.printStackTrace();\n        }\n    }\n</code></pre>"},{"location":"frameworkAnalysis/io/#files_1","title":"Files","text":"<p>\u521b\u5efa\u6587\u4ef6/\u76ee\u5f55</p> <ul> <li>create[Temp]File</li> <li>create[Temp]Directory</li> </ul> <p>\u589e\u5220\u6539\u67e5</p> <ul> <li>\u589e</li> <li>createFile</li> <li>...</li> <li>\u5220</li> <li>delete</li> <li>deteleIfexists</li> <li>\u6539</li> <li>newInput/OutputStream</li> <li>newBufferedReader/Writer</li> <li>move/copy</li> <li>\u67e5</li> <li>exists</li> <li>....</li> </ul>"},{"location":"frameworkAnalysis/io/#io","title":"I/O \u6a21\u578b","text":""},{"location":"frameworkAnalysis/io/#unix-like-io","title":"Unix-like IO","text":""},{"location":"frameworkAnalysis/io/#_8","title":"\u524d\u7f6e\u77e5\u8bc6","text":"<p>\u6587\u4ef6\u63cf\u8ff0\u7b26 &amp; \u6253\u5f00\u6587\u4ef6\u8868 &amp; inode\u8868</p> <p>\u5173\u4e8e\u6587\u4ef6\u63cf\u8ff0\u7b26\uff0c\u6587\u4ef6\u53e5\u67c4\uff0c\u4ee5\u53cainode:</p> <p>\u5f7b\u5e95\u641e\u61c2\u6587\u4ef6\u63cf\u8ff0\u7b26/\u6587\u4ef6\u53e5\u67c4/\u6587\u4ef6\u6307\u9488\u7684\u533a\u522b\u4e0e\u8054\u7cfb-CSDN\u535a\u5ba2</p> <p>\u7406\u89e3Linux\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26FD\u4e0eInode - \u77e5\u4e4e (zhihu.com)</p> <p>inode - \u7ef4\u57fa\u767e\u79d1\uff0c\u81ea\u7531\u7684\u767e\u79d1\u5168\u4e66 (wikipedia.org)</p> <p>\u90fd\u77e5\u9053<code>OS</code>\u4e2d\u4e00\u4e2a\u8fdb\u7a0b\u7ef4\u62a4\u4e00\u4e2a<code>PCB</code>\uff0c\u5176\u7528\u4e8e\u63a7\u5236\u8fdb\u7a0b\uff0c\u5e76\u7ef4\u62a4\u8fdb\u7a0b\u7684\u4e0a\u4e0b\u6587\u4fe1\u606f\u3002\u5176\u4e2d\u5c31\u5305\u62ec\u4e86\u4e00\u4e2a<code>file descriptor table</code>\u3002\u8fd9\u662f\u4e00\u4e2a<code>Array[filedescriptor]</code>\u3002\u800c\u4e00\u4e2a\u6587\u4ef6\u63cf\u8ff0\u7b26<code>fd</code>\uff0c\u5c31\u662f\u7528\u6765\u83b7\u53d6\u5bf9\u5e94\u7684<code>filedescriptor</code>\u7684\uff0c\u4e5f\u5c31\u662f<code>filedescriptor curfd = arr(fd)</code>\u3002\u5176\u6709\u4e00\u4e2a\u5b57\u6bb5\u6307\u5411\u4e86<code>file\u7ed3\u6784</code>\uff0c\u4e5f\u5c31\u662f<code>file curfile = curfd.file</code></p> <p><code>OS</code>\u4e2d\u7ef4\u62a4\u4e86\u4e00\u4e2a\u5168\u5c40<code>open file table</code>\uff0c\u8fd9\u662f\u4e00\u4e2a<code>Array[file]</code>,\u7ef4\u62a4\u4e86\u6240\u6709\u88ab\u6253\u5f00\u6587\u4ef6\u7684\u4fe1\u606f\uff0c\u6bd4\u5982<code>offset,mode</code>\u7b49\uff0c\u4ee5\u53ca\u6700\u91cd\u8981\u7684<code>inode \u6307\u9488</code>\u3002\u8fd9\u91cc\u7684index\uff0c\u5c31\u79f0\u4e3a\u6587\u4ef6\u63cf\u8ff0/\u6587\u4ef6\u53e5\u67c4\u3002\u4e5f\u5c31\u662f<code>file curfile = arr(handle)</code>\u3002</p> <p>window\u4e0b\u901a\u5e38\u5c06\u4e00\u7ec4\u6307\u9488/\u5f15\u7528\u5bf9\u5e94\u7684\u6570\u636e\u7684\u4e0b\u6807\u79f0\u4e3a<code>\u53e5\u67c4</code>\u3002</p> <p>\u7136\u540e\u5c31\u662f<code>inode table</code>\u3002</p> <p><code>inode</code>\u662f<code>unix</code>\u6587\u4ef6\u7cfb\u7edf\u4e2d\u7684\u6570\u636e\u7ed3\u6784\uff0c\u7528\u4e8e\u63cf\u8ff0\u6587\u4ef6\u7cfb\u7edf\u5bf9\u8c61\uff0c\u5305\u62ec<code>\u6587\u4ef6\uff0c\u76ee\u5f55\uff0csocket\u7b49</code>\uff0c\u5176\u4e2d\u6709\u6587\u4ef6\u521b\u5efa\u8005\uff0c\u6a21\u5f0f\u7b49\u4fe1\u606f\uff0c\u5e76\u5b58\u50a8\u7740<code>block</code>\u6307\u9488\u3002\u4e00\u4e2a\u6587\u4ef6\u5982\u679c\u8981\u5b58\u50a8\uff0c\u5219\u9700\u8981\u5b58\u50a8\u5143\u6570\u636e\u4fe1\u606f\uff0c\u4ee5\u53ca\u5176\u672c\u8eab\u6570\u636e\u4fe1\u606f\u4e24\u90e8\u5206\u5185\u5bb9\u3002\u800c<code>unix</code>\u6587\u4ef6\u7cfb\u7edf\uff0c\u4e00\u822c\u521d\u59cb\u5316\u7684\u65f6\u5019\u5c31\u628a\u5b58\u50a8\u533a\u57df\u5206\u4e3a\u4e24\u90e8\u5206\uff0c\u5206\u522b\u7528\u4e8e\u5b58\u50a8\u8fd9\u4e24\u90e8\u5206\u4fe1\u606f\u3002</p> <p>\u6587\u4ef6\u7cfb\u7edf\u5bf9\u8c61\u624d\u662f\u4e00\u4e2a\u6587\u4ef6\u7cfb\u7edf\u4e2d\u7684\u6807\u51c6\u63cf\u8ff0\uff0c\u800c\u6587\u4ef6/\u76ee\u5f55\u90fd\u53ea\u662f\u522b\u540d\u3002</p> <ul> <li>\u5143\u6570\u636e\u90e8\u5206\u5c31\u662f<code>inode</code>\u7ec4\u6210\u7684\u8868\uff0c\u4e00\u4e2a<code>inode</code>\u4e00\u822c\u5360\u636e<code>256/128</code>\u5b57\u8282\u3002</li> <li>\u6570\u636e\u90e8\u5206\u4ee5<code>block</code>\u5f62\u5f0f\u5b58\u50a8\uff0c\u4e00\u4e2a<code>block</code>\u4e3a4KB\u3002</li> </ul> <p>\u5728\u64cd\u4f5c\u7cfb\u7edf\u5185\u5b58\u4e2d\uff0c\u5bf9\u5e94\u7740<code>inode cache</code>\u4ee5\u53ca<code>page cache</code>\u3002</p> <p>\u7f51\u5361\u5230\u7528\u6237\u8fdb\u7a0b</p> <p>\u5185\u529f\u4fee\u70bc-\u7f51\u7edc\u6570\u636e\u5305\u7684\u53d1\u9001\u3001\u4f20\u8f93\u3001\u63a5\u53d7\u8fc7\u7a0b - \u6c89\u8ff7\u4e8e\u5b66\u4e60\uff0c\u65e0\u6cd5\u81ea\u62d4^_^ (hlog.cc)</p> <p>ring buffer\uff1a\u73af\u5f62\u7f13\u51b2\u533a\uff0c\u8fd9\u91cc\u7684\u5b9e\u73b0\u5185\u90e8\u6709\u4e24\u4e2a\u73af\u5f62\u6570\u7ec4\uff0c\u4e00\u4e2a\u662f\u5185\u6838\u9a71\u52a8\u4f7f\u7528\uff0c\u4e00\u4e2a\u662f\u7f51\u5361\u786c\u4ef6\u4f7f\u7528\u3002\u4e24\u8005\u53ef\u4ee5\u901a\u8fc7<code>share</code>\u540c\u4e00\u5757\u5185\u6838\u5185\u5b58\u6765\u5b9e\u73b0\u6d88\u8d39\u8005-\u751f\u4ea7\u8005\u6a21\u5f0f\uff0c\u6bd4\u5982<code>skb_buffer</code>\u3002</p> <p>DMA\uff1a\u6570\u636e\u4f20\u8f93\u6280\u672f\uff0c\u5c06\u6570\u636e\u4e0d\u901a\u8fc7CPU\uff0c\u800c\u662f\u901a\u8fc7\u603b\u7ebf\uff0c\u6765\u76f4\u63a5\u4ece\u5916\u8bbe\u7f13\u51b2\u533a\u590d\u5236\u5230\u5185\u6838\u5185\u5b58\uff0c\u6216\u8005\u53e6\u4e00\u4e2a\u5916\u8bbe\u7f13\u51b2\u533a\u3002</p> <ul> <li>\u6570\u636e\u4ee5\u9ad8\u4f4e\u7535\u5e73\u5f62\u5f0f\u6765\u5230\u7f51\u5361\uff0c\u88ab\u7f51\u5361\u786c\u4ef6\u8f6c\u6362\u4e3a\u6570\u636e\u5e76\u5237\u5230<code>FIFO</code>\u7f13\u51b2\u533a\uff0c\u7136\u540e\u7f51\u5361\u7533\u8bf7<code>skb_buffer</code>\u7684\u5f15\u7528\uff0c\u7136\u540e\u6570\u636e\u5c31\u53ef\u4ee5\u901a\u8fc7<code>DMA</code>\u65b9\u5f0f\uff0c\u4ece<code>fifo-buffer</code>\u5230<code>skb_buffer</code>\u3002</li> <li>\u786c\u4e2d\u65ad\uff1a\u7531\u4e8e\u662f<code>DMA</code>\u5199\u5165\uff0c\u5185\u6838\u65e0\u6cd5\u76d1\u63a7\uff0c\u6240\u4ee5\u9700\u8981\u53d1\u8d77\u4e2d\u65ad\uff0c\u8fd9\u91cc\u7f51\u5361\u4f1a\u89e6\u53d1\u786c\u4e2d\u65ad\uff0c\u7136\u540e\u5904\u7406\u7a0b\u5e8f\u6765\u8c03\u7528<code>Driver</code>\u6765\u5904\u7406</li> <li>\u8f6f\u4e2d\u65ad\uff1a<code>Driver</code>\u5904\u7406\u5b8c\u6bd5\uff0c\u89e6\u53d1\u8f6f\u4e2d\u65ad\uff0c\u7531\u5185\u6838\u4e2d\u7684\u4e13\u95e8\u8fdb\u7a0b\u5904\u7406\uff0c\u8fd9\u91cc\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\u4f1a\u8c03\u7528<code>\u7f51\u5361Driver\u6240\u5bf9\u5e94\u7684\u5904\u7406\u51fd\u6570</code>\u3002</li> <li>\u9a71\u52a8\u5904\u7406\uff1a\u7531\u7f51\u5361\u9a71\u52a8\u5bf9\u6570\u636e\u8fdb\u884c\u683c\u5f0f\u5904\u7406\u3002\u5904\u7406\u5b8c\u6bd5\u4f20\u9012\u7ed9<code>\u534f\u8bae\u6808</code></li> <li>\u534f\u8bae\u6808\u5230<code>socket</code>\uff1a\u534f\u8bae\u6808\u7ecf\u8fc7\u5904\u7406\uff0c\u5e76\u4e14\u53ef\u4ee5\u62ff\u5230\u6570\u636e\u7684<code>\u7aef\u53e3\uff0cIP</code>\u4fe1\u606f\uff0c\u5c06\u6570\u636e\u53d1\u9001\u5230<code>scoket buffer</code>,\u7136\u540e\u7ed9<code>socket</code>\u4fe1\u53f7\u8bf4\u660e\u6709\u6570\u636e\u6765\u4e86\u3002\u4e00\u4e2a<code>socket</code>\u6709\u4e24\u4e2a<code>buffer</code>\uff0c\u5206\u522b\u7528\u4e8e\u53d1\u9001\u6570\u636e\u548c\u63a5\u6536\u6570\u636e\u3002</li> <li>\u5e94\u7528\u8fdb\u7a0b\u54cd\u5e94</li> <li>\u963b\u585e\u5f0f\uff0c\u5219<code>receivefrom</code>\u51fd\u6570\u963b\u585e\u76f4\u5230\u6570\u636e\u8fc7\u6765\uff0c\u7136\u540e\u5c06\u6570\u636e\u5b58\u50a8\u5230\u7528\u6237\u8fdb\u7a0b\u5185\u5b58\u3002</li> <li>\u975e\u963b\u585e\u5f0f\uff1a\u4f7f\u7528<code>poll/select</code>\u76d1\u542c<code>socket</code>,\u6709\u6570\u636e\u8fc7\u6765\uff0c\u5c31\u8bfb\u53d6\u6570\u636e</li> </ul>"},{"location":"frameworkAnalysis/io/#io_1","title":"\u963b\u585e\u5f0fIO","text":"<p>\u5c31\u662f\u7ebf\u7a0b\u8c03\u7528\u51fd\u6570<code>receivefrom</code>\u4e4b\u540e\uff0c\u5982\u679c<code>socket buffer</code>\u65e0\u6570\u636e\uff0c\u5219\u963b\u585e\uff0c\u671f\u95f4\u8fdb\u7a0b<code>OS</code>\u6302\u8d77\u7136\u540e\u52a0\u5165\u961f\u5217\u8fdb\u884c\u8c03\u5ea6\u3002</p> <p>\u76f4\u5230<code>socket buffer</code>\u6709\u6570\u636e\uff0c\u5219\u64cd\u4f5c\u7cfb\u7edf\u53ef\u4ee5\u91cd\u65b0\u6267\u884c\u8be5\u8fdb\u7a0b\uff0c\u8be5\u51fd\u6570\u5c06\u6570\u636e\u4ece<code>socket buffer</code> \u590d\u5236\u5230 <code>\u7528\u6237\u8fdb\u7a0b\u7684buf</code>\u3002</p> <p><code>receivefrom</code>\u51fd\u6570\u539f\u578b\uff1a</p> C<pre><code>ssize_t recvfrom(int sockfd, void *buf, size_t len, int flags,\n                 struct sockaddr *src_addr, socklen_t *addrlen);\n</code></pre> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u5176\u62ff\u5230<code>socket\u6587\u4ef6\u63cf\u8ff0\u7b26</code>\uff0c\u4ee5\u53ca<code>buf\u6307\u9488</code>\uff0c\u5e76\u5c06\u6570\u636e\u4ece<code>socket buffer</code>\u590d\u5236\u5230<code>\u8fdb\u7a0bbuf</code>\u3002</p>"},{"location":"frameworkAnalysis/io/#io_2","title":"\u975e\u963b\u585e\u5f0fIO","text":"<p>\u7528\u6237\u6267\u884c<code>recvfrom</code>\u4e4b\u540e\uff0c\u5982\u679c<code>socket buffer</code>\u6ca1\u6709\u6570\u636e\uff0c\u8fdb\u7a0b\u4e0d\u88ab\u963b\u585e\uff0c\u800c\u662f\u4e00\u76f4\u8f6e\u8be2\uff0c\u6bd4\u5982\u5728\u4e00\u4e2a<code>while</code>\u5faa\u73af\u4e2d\u95f4\u63a5\u6027\u8c03\u7528\u8be5\u51fd\u6570\u3002</p> <p>\u5982\u679c<code>socket buffer</code>\u6709\u6570\u636e\uff0c\u5219\u7acb\u523b\u53ef\u4ee5\u8fd4\u56de\u3002</p> <p>\u4e0e\u963b\u585e\u5f0fIO\u533a\u522b</p> <p>\u804a\u804a\u8ba1\u7b97\u673a\u91cc\u9762\u7684\u201c\u4e2d\u65ad\u201d\u548c\u201c\u8f6e\u8be2\u201d - \u77e5\u4e4e (zhihu.com)</p> <p>\u533a\u522b\u5c31\u662f\u4fe1\u606f\u7684\u63a7\u5236\u65b9\u4e0d\u540c\u3002\u5f53\u7136\u975e\u963b\u585e\u5f0fIO\u53ef\u4ee5\u5c3d\u529b\u7ec6\u5316\u7c92\u5ea6(\u6bd4\u5982<code>Thread.sleep</code>\u7684\u95f4\u9694\u51cf\u5c0f)\u7684\u8fdb\u884c\u63a7\u5236\uff0c\u4f46\u662f\u7531\u4e8e\u5176\u65e0\u6cd5\u63a7\u5236\u4fe1\u606f\uff0c\u5219\u53ea\u80fd\u540c\u65f6\u5c06\u538b\u529b\u7ed9\u5230\u7528\u6237\u8fdb\u7a0b\u3002\u963b\u585e\u65f6\u5019\u63a7\u5236\u6743\u91cd\u65b0\u4ea4\u7ed9\u4e86<code>OS</code>\uff0c\u5219\u65e0\u6cd5\u7cbe\u786e\u6ee1\u8db3\u8981\u6c42\u3002</p>"},{"location":"frameworkAnalysis/io/#io_3","title":"I/O\u590d\u7528","text":"<p>\u5c06\u611f\u5174\u8da3\u7684\u591a\u4e2a<code>socket\u6587\u4ef6\u63cf\u8ff0\u7b26</code>\u7ef4\u62a4\u8d77\u6765\uff0c\u7136\u540e\u8c03\u7528<code>select</code>\u5c06\u7a0b\u5e8f\u963b\u585e\u5e76\u6302\u8d77\u3002</p> <p>\u5982\u679c\u6709\u4e00\u4e2a<code>socket</code>\u53d1\u751f\u4e86\u53d8\u5316\uff0c\u5219<code>select</code>\u4f1a\u7acb\u5373\u8fd4\u56de\u3002\u6b64\u65f6\u53ef\u4ee5\u518d\u4f7f\u7528<code>recvfrom</code>\u5c06\u6570\u636e\u4ece<code>socket buffer</code>\u590d\u5236\u5230<code>\u8fdb\u7a0b\u5185\u5b58\u533a\u57df</code>\u3002</p> <p>\u5176\u4f7f\u5f97\u5355\u4e2a\u8fdb\u7a0b\u6709\u4e86\u5904\u7406\u591a\u4e2a<code>event</code>\u7684\u80fd\u529b\uff0c\u800c\u4e0d\u662f\u4e00\u4e2a\u7ebf\u7a0b\u4e00\u4e2a<code>socket</code>\u8fde\u63a5\u3002</p>"},{"location":"frameworkAnalysis/io/#io_4","title":"\u4fe1\u53f7\u9a71\u52a8I/O","text":"<p>\u5e94\u7528\u8fdb\u7a0b\u53d1\u9001<code>sigaction</code>\u8c03\u7528\uff0c\u6b64\u65f6\u4e3b\u7ebf\u7a0b\u4e0d\u4f1a\u88ab\u963b\u585e\u3002\u5982\u679c\u6709<code>socket buffer</code>\u65e0\u6570\u636e\uff0c\u5219\u76f4\u63a5<code>return</code>\u3002\u5982\u679c\u6709\u6570\u636e\uff0c\u5219\u8fd4\u56de\u4fe1\u53f7\uff0c\u901a\u77e5\u7528\u6237\u8fdb\u7a0b\u53ef\u4ee5\u5f00\u59cb\u8bfb\u6570\u636e\u3002\u6b64\u65f6\u7528\u6237\u7ebf\u7a0b\u53ef\u4ee5\u6267\u884c<code>recvfrom</code>\u3002</p> <p>\u76f8\u6bd4\u4e8e\u975e\u963b\u585e\u5f0fIO\uff0cCPU\u6d6a\u8d39\u8f83\u5c11\u3002</p>"},{"location":"frameworkAnalysis/io/#io_5","title":"\u5f02\u6b65I/O","text":"<p>\u6267\u884c\u5f02\u6b65io\uff0c\u8c03\u7528\u7acb\u5373\u8fd4\u56de\uff0c\u5185\u6838\u5b8c\u6210\u6240\u6709\u4e8b\u60c5\uff0c\u5411\u8fdb\u7a0b\u53d1\u9001\u4fe1\u53f7\uff0c\u901a\u77e5\u7528\u6237\u8fdb\u7a0bIO\u4efb\u52a1\u5df2\u7ecf\u5b8c\u6bd5</p>"},{"location":"frameworkAnalysis/io/#reactor","title":"Reactor\u6a21\u578b","text":"<p>\u5982\u4f55\u6df1\u523b\u7406\u89e3Reactor\u548cProactor\uff1f - \u77e5\u4e4e (zhihu.com)</p> <p>Reactor\u6a21\u578b\u662f\u6574\u4e2a<code>NIO</code>\u7684\u5b9e\u73b0\u57fa\u7840\u3002\u4e5f\u79f0\u4e3a<code>Dispatcher</code>\u6a21\u578b\u3002\u5bf9\u4e8e<code>Spark</code>\u719f\u6089\u7684\u4eba\u80af\u5b9a\u77e5\u9053,<code>Spark rpc</code>\u7684\u6838\u5fc3\u5c31\u662f<code>Dispatcher</code>\u3002</p> <p>\u8fd9\u91cc\u7684<code>NIO</code>\u91c7\u7528<code>\u591areactor\u591a\u7ebf\u7a0b</code>\u7684\u6a21\u5f0f\u3002</p> <p><code>Client</code>\u53d1\u9001\u8bf7\u6c42\u4e4b\u540e\uff0c\u88ab\u4e3b\u7ebf\u7a0b\u7684<code>main Reactor \u901a\u8fc7selector</code>\u6536\u5230\u5e76\u8fdb\u884c<code>Dispatch</code>\uff0c\u53d1\u9001\u5230\u4e3b\u7ebf\u7a0b\u7684<code>Acceptor</code>\uff0c\u83b7\u53d6\u8fde\u63a5(<code>accept</code>)\u3002</p> <p>\u83b7\u53d6\u8fde\u63a5\u4e4b\u540e\uff0c\u4e3b\u7ebf\u7a0b\u5c06\u5176\u5206\u53d1\u5230\u5b50\u7ebf\u7a0b\u7684<code>sub Reactor</code>\u4e2d\u3002\u5728\u5b50\u7ebf\u7a0b\u4e2d\uff0c\u540c\u6837\u662f\u8fde\u63a5\u88ab\u52a0\u5165\u5230<code>selelctor</code>\u4e2d\uff0c\u518d\u6b21\u7b49\u5f85\u88ab\u9009\u4e2d\u3002</p> <p>\u5b50\u7ebf\u7a0b\u4e2d\u7684<code>selelctor</code>\u8fd4\u56de\u4e4b\u540e\uff0c\u5219\u53ef\u4ee5\u901a\u8fc7<code>Handler</code>\u8fdb\u884c\u4e1a\u52a1\u903b\u8f91\u5904\u7406\u3002</p> <p>\u8fd9\u91cc\u4e3b\u7ebf\u7a0b\u548c\u5b50\u7ebf\u7a0b\u5206\u5de5\u660e\u786e\uff1a</p> <ul> <li>\u4e3b\u7ebf\u7a0b\u53ea\u7528\u4e8e\u521b\u5efa\u8fde\u63a5</li> <li>\u5b50\u7ebf\u7a0b\u53ea\u7528\u4e8e\u5904\u7406\u4e1a\u52a1\u903b\u8f91\uff0c\u5e76\u4e14\u53ef\u4ee5\u5c06\u7ed3\u679c\u53d1\u9001\u7ed9\u5ba2\u6237\u7aef</li> </ul> <p><code>Netty</code>\u4e2d\u4ea6\u6709<code>BOSS GROUP</code>\u4ee5\u53ca<code>Worker GROUP</code></p>"},{"location":"frameworkAnalysis/io/#nio","title":"NIO","text":"<p>\u4ece<code>JDK4</code>\u5f15\u5165\uff0c\u9ad8\u901f\u5e76\u4e14\u9762\u5411\u5757\u3002</p>"},{"location":"frameworkAnalysis/io/#_9","title":"\u57fa\u7840\u6982\u5ff5","text":"<p>\u4f20\u7edf\u7684<code>InputStream/OutputStream</code>\u662f\u57fa\u4e8e<code>\u5355\u4e2aByte</code>\u7684\uff0c\u4f46\u662f\u8fd9\u91cc\u7684NIO\u57fa\u4e8e\u7684\u662f<code>Block</code>\uff0c\u4e5f\u5c31\u662f<code>Byte[]</code>\u3002</p>"},{"location":"frameworkAnalysis/io/#_10","title":"\u6838\u5fc3\u7ec4\u4ef6","text":"<p>Channel</p> <p>A channel represents an open connection to an entity such as a hardware device, a file, a network socket, or a program component that is capable of performing one or more distinct I/ O operations, for example reading or writing. A channel is either open or closed. A channel is open upon creation, and once closed it remains closed. Once a channel is closed, any attempt to invoke an I/ O operation upon it will cause a ClosedChannelException to be thrown. Whether or not a channel is open may be tested by invoking its isOpen method. Channels are, in general, intended to be safe for multithreaded access as described in the specifications of the interfaces and classes that extend and implement this interface.</p> <p>\u7b80\u5355\u6765\u8bf4\uff0c\u5c31\u662f\u9762\u5411<code>\u6587\u4ef6/socket/\u5176\u5b83\u7528\u4e8eIO\u7684\u7ec4\u4ef6</code>\u7684\u4e00\u79cd\u8fde\u63a5\u3002</p> <p>\u5176\u72b6\u6001\u5177\u6709\u4e8c\u503c\u6027\uff1a<code>open &amp; close</code>\uff0c\u800c\u4e0d\u662f\u548c<code>SQL &amp; \u5206\u5e03\u5f0f\u7cfb\u7edf</code>\u90a3\u79cd\u7684\u4e09\u503c\u8bed\u4e49\u3002</p> Java<pre><code>public interface Channel extends Closeable {\n\n    /**\n     * Tells whether or not this channel is open.\n     *\n     * @return {@code true} if, and only if, this channel is open\n     */\n    public boolean isOpen();\n\n    /**\n     * Closes this channel.\n     *\n     * &lt;p&gt; After a channel is closed, any further attempt to invoke I/O\n     * operations upon it will cause a {@link ClosedChannelException} to be\n     * thrown.\n     *\n     * &lt;p&gt; If this channel is already closed then invoking this method has no\n     * effect.\n     *\n     * &lt;p&gt; This method may be invoked at any time.  If some other thread has\n     * already invoked it, however, then another invocation will block until\n     * the first invocation is complete, after which it will return without\n     * effect. &lt;/p&gt;\n     *\n     * @throws  IOException  If an I/O error occurs\n     */\n    public void close() throws IOException;\n\n}\n</code></pre> <p>Buffer</p> <p>A container for data of a specific primitive type.</p> <p>\u662f\u4e00\u79cd\u7ebf\u6027\u7684\uff0c\u9762\u76f8\u7279\u5b9a\u6570\u636e\u7c7b\u578b(Int,Char\u7b49)\u7684\u5bb9\u5668\u3002</p> <p>\u901a\u8fc7\u4e09\u4e2a\u6838\u5fc3\u53d8\u91cf\u64cd\u4f5c\uff1a</p> <p>A buffer's capacity is the number of elements it contains. The capacity of a buffer is never negative and never changes. A buffer's limit is the index of the first element that should not be read or written. A buffer's limit is never negative and is never greater than its capacity. A buffer's position is the index of the next element to be read or written. A buffer's position is never negative and is never greater than its limit.</p> <p><code>channel</code>\u8fc7\u6765\u7684\u6570\u636e\u4ee5\u53ca\u53d1\u9001\u7ed9\u5176\u7684\u6570\u636e\u5fc5\u987b\u5230<code>buffer</code>\u4e2d\uff0c\u4e5f\u5c31\u662f\u5176\u5e38\u4f5c\u4e3a\u53c2\u6570\u4f20\u5165<code>read/write</code>\u65b9\u6cd5\u4e2d\u3002</p> <p>\u5176\u4e2d\u7684<code>position</code>\u5373\u662f\u4e0b\u4e00\u4e2a\u8981\u8bfb\u53d6\u7684\u4f4d\u7f6e\uff0c\u4e5f\u662f\u5f53\u524d\u5df2\u7ecf\u8bfb\u53d6\u7684\u5b57\u8282\u6570:</p> <p><code>x - 1  - 0 + 1 = x</code></p> <p>\u4ee5<code>ByteBuffer</code>\u4e3a\u4f8b\uff0c\u5e38\u89c1\u65b9\u6cd5\u5982\u4e0b\uff1a</p> <ul> <li>\u521d\u59cb\u5316\uff1a<code>ByteBuffer.allocate(16)</code></li> <li><code>\u4ecechannel\u8bfb\u6570\u636e\u5230buffer</code>\uff1a<code>int readbytes = channel.read(buf) / buf.put([i])</code></li> <li><code>\u4ecebuffer\u5199\u6570\u636e\u5230channel</code>\uff1a<code>int writebytes = channel.write(buf) / buf.get()</code></li> <li>mark &amp; reset\uff1a\u5728\u67d0\u4e2apos\u505a\u6807\u8bb0\uff0c\u7136\u540ereset\u5c31\u53ef\u4ee5\u56de\u5230\u8fd9\u91cc</li> </ul> <p>\u5982\u4e0b\uff1a</p> Java<pre><code>    public void NIOSocketDemo() throws IOException {\n        ByteBuffer buffer = StandardCharsets.UTF_8.encode(\"hello\");\n        var flag = true;\n        while(buffer.hasRemaining()){\n            var cur = (char)buffer.get();\n            System.out.println(cur);\n            if(cur == 'e'){\n                buffer.mark();\n                System.out.println(\"mark\");\n            }\n            if(cur == 'o' &amp;&amp; flag){\n                buffer.reset();\n                System.out.println(\"reset\");\n                flag = false;\n            }\n        }\n        System.out.println(\"end\");\n    }\n</code></pre> <p>\u5219\u8fd9\u6bb5\u7a0b\u5e8f\u7684<code>llo</code>\u88ab\u91cd\u65b0\u53c8\u8f93\u51fa\u4e86\u4e00\u904d\u3002</p> <p>Selector</p> <p>\u8fd9\u91cc\u5c31\u662fIO\u591a\u8def\u590d\u7528\u6a21\u578b\u4e0a\u7684select\u3002\u8fd9\u91ccJDK\u5df2\u7ecf\u5c06\u4e0e<code>socket/file</code>\u7684\u8fde\u63a5\u62bd\u8c61\u4e3a<code>Channel</code>\uff0c\u5219<code>Selcetor</code>\u53ea\u9700\u8981\u76d1\u542c\u591a\u4e2a<code>Channel</code>\u65e2\u53ef\u4ee5\u8fbe\u5230\u591a\u8def\u590d\u7528\u3002</p> <p>\u5982\u679c\u662f<code>SocketChannel</code>\uff0c\u53ef\u4ee5\u914d\u7f6e\u4e3a\u975e\u963b\u585e\u3002\u8fd9\u65f6\u5019<code>Selector</code>\u53ef\u4ee5\u540c\u65f6\u76d1\u542c\u4e00\u6279<code>Channel</code>\uff0c\u800c\u4e0d\u662f\u5728\u4e00\u4e2a\u4e0a\u9762\u963b\u585e\u3002</p> <p><code>Selector</code>\u53ef\u4ee5\u540c\u65f6\u76d1\u542c<code>ServerSocketChannel\u4ee5\u53caSocketChannel</code>\uff0c\u800c\u5982\u679c\u6765\u7684\u662f<code>OP_ACCEPT</code>\uff0c\u5219\u5fc5\u7136\u662f<code>SSChannel</code>\u7684\u8bf7\u6c42\uff0c\u56e0\u4e3a\u53ea\u6709\u5b83\u7528\u4e8e\u5904\u7406\u8fde\u63a5\u3002\u5176<code>bind</code>\u65b9\u6cd5\u89e3\u91ca\u5982\u4e0b:</p> <p>Binds the channel's socket to a local address and configures the socket to listen for connections.</p> <p>\u800c<code>accpet</code>\u65b9\u6cd5\u5c31\u662f\u5efa\u7acb\u8fde\u63a5\u3002</p>"},{"location":"frameworkAnalysis/io/#_11","title":"\u4f8b\u5b50","text":"<p>Java NIO - \u57fa\u7840\u8be6\u89e3 | Java \u5168\u6808\u77e5\u8bc6\u4f53\u7cfb (pdai.tech)</p> Java<pre><code>public class NIOServerDemo {\n    public static void main(String[] args) throws IOException {\n        Selector selector = Selector.open();\n        ServerSocketChannel ssChannel = ServerSocketChannel.open();\n        ssChannel.configureBlocking(false);\n        ssChannel.register(selector, SelectionKey.OP_ACCEPT);\n        ssChannel.bind(new InetSocketAddress(\"127.0.0.1\", 9999));\n\n        while(true){\n            selector.select(); // \u963b\u585e\u65b9\u6cd5\uff0c\u76f4\u5230\u6709Channel(\u6216\u8005Channels)\u88ab\u9009\u4e2d(\u53d1\u751fevent)\n            Set&lt;SelectionKey&gt; keys = selector.selectedKeys(); //\u67e5\u770b\u8fd9\u4e9bChannel\u672c\u6b21\u4e8b\u4ef6\u7684key\uff0ckey =&gt; \u67d0\u4e2achannel\u53d1\u751f\u4e86\u67d0\u79cdevent\n            Iterator&lt;SelectionKey&gt; iterator = keys.iterator();\n            while(iterator.hasNext()){\n                SelectionKey key = iterator.next();\n                if(key.isAcceptable()){ //\u53ea\u6709ssChannel\u53ef\u4ee5\u5efa\u7acb\u8fde\u63a5\n                    //\u5904\u7406\u65b0\u63a5\u5165\u7684\u8bf7\u6c42\u6d88\u606f\n                    var channel1 = (ServerSocketChannel)key.channel();\n                    SocketChannel sChannel = channel1.accept();\n                    sChannel.configureBlocking(false);\n                    //\u5efa\u7acb\u65b0\u8fde\u63a5\uff0c\u4ece\u5ba2\u6237\u7aef\u8bfb\u53d6\u6d88\u606f\n                    sChannel.register(selector, SelectionKey.OP_READ); //\u8868\u660eselect\u5bf9\u8fd9\u4e2achannel,\u53ea\u505a\u8bfb\u64cd\u4f5c\n                }else if(key.isReadable()){\n                    //sChannel\u53ef\u8bfb\uff0c\u5219\u4ece\u4e2d\u8bfb\u53d6\u6570\u636e\u5230server\u7aef\u7684buffer\n                    var channel1 = (SocketChannel)key.channel();\n                    var remoteAddress = (InetSocketAddress)channel1.getRemoteAddress();\n                    int port = remoteAddress.getPort();\n                    System.out.println(\"port:\" + port);\n                    System.out.println(readDataFromChannel(channel1));\n                    channel1.close();\n                }\n                iterator.remove(); //\u5fc5\u987b\u5220\u9664\uff0c\u5426\u5219\u4f1a\u91cd\u590d\u5904\u7406\u5f15\u53d1\u7a7a\u6307\u9488\n            }\n        }\n    }\n\n    private static String readDataFromChannel(SocketChannel sChannel) throws IOException {\n        ByteBuffer buffer = ByteBuffer.allocate(1024);\n        var data = new StringBuffer();\n\n        while(true){\n            buffer.clear(); //\u5207\u6362\u81f3\u5199\u6a21\u5f0f\n            int n = sChannel.read(buffer);\n            if(n == -1) break; //\u8bfb\u53d6\u5b8c\u6bd5\n            buffer.flip(); //\u5207\u6362\u81f3\u8bfb\u6a21\u5f0f\n            while(buffer.hasRemaining()){\n                data.append((char)buffer.get());\n            }\n            buffer.clear(); //\u5207\u6362\u81f3\u5199\u6a21\u5f0f\n        }\n        return data.toString();\n    }\n}\n</code></pre> <p>\u5219\u6b64\u65f6\u5c06\u6570\u636e\u4ece<code>client</code>\u5199\u5165<code>socket</code>\u5373\u53ef\u5728<code>server</code>\u5f97\u5230\u54cd\u5e94\u3002</p>"},{"location":"frameworkAnalysis/leveldb_learn/","title":"LevelDB\u6e90\u7801\u5b66\u4e60","text":"<p>\u5355\u673aKV\u5b58\u50a8\u7684\u5165\u95e8\u7ecf\u5178\uff0cLSM-Tree Based</p>"},{"location":"frameworkAnalysis/leveldb_learn/#_1","title":"\u6587\u7ae0","text":"<p>\u77e5\u4e4e\u4e0a\u7684\u6587\u7ae0\u5df2\u7ecf\u5341\u5206\u4e30\u5bcc,\u4e0b\u9762\u7684\u7cfb\u5217\u5df2\u7ecf\u975e\u5e38\u5b8c\u5907: LevelDB\u6e90\u7801\u89e3\u8bfb</p>"},{"location":"frameworkAnalysis/leveldb_learn/#src","title":"src","text":"<p>\u8fd9\u91cc\u9009\u62e9Java \u7248\u672c\u7684leveldb</p> <p>\u8ddf\u7740\u5355\u5143\u6d4b\u8bd5\u6253\u65ad\u70b9\u8d70\u8bfb\u5c31\u53ef\u4ee5\u4e86\uff0c\u5165\u624b\u6700\u5feb\u7684\u65b9\u5f0f\u5c31\u662f\u8ddf\u7740\u5355\u6d4bdebug(\u5f53\u5355\u6d4b\u5b8c\u5907\u7684\u60c5\u51b5\u4e0b)</p>"},{"location":"frameworkAnalysis/leveldb_learn/#_2","title":"\u4ee3\u7801\u7ec4\u7ec7","text":"<ol> <li>leveldb-api\uff1a\u7528\u4e8e\u5b9a\u4e49leveldb\u7684\u516c\u5171=\u63a5\u53e3\u548c\u62bd\u8c61\u7c7b\u3002</li> <li>leveldb\uff0c\u5305\u542bleveldb-java\u7684\u5b8c\u6574\u5b9e\u73b0\uff0c\u5305\u62ec\u6570\u636e\u5e93\u7684\u8bfb\u5199\uff0c\u538b\u7f29\uff0c\u5feb\u7167\u3002</li> <li>leveldb-benchmark\uff0c\u8fdb\u884c\u6027\u80fd\u57fa\u51c6\u6d4b\u8bd5\u3002</li> </ol>"},{"location":"frameworkAnalysis/leveldb_learn/#leveldb-api","title":"leveldb-api","text":""},{"location":"frameworkAnalysis/leveldb_learn/#_3","title":"\u6838\u5fc3\u63a5\u53e3","text":""},{"location":"frameworkAnalysis/leveldb_learn/#db","title":"DB","text":"<p>\u4f7f\u7528Map.Entry\u4f5c\u4e3a\u5143\u7ec4\u8868\u793a\u952e\u503c\u5bf9\uff0c\u4f7f\u7528\u5b57\u8282\u6570\u7ec4\u4f5c\u4e3aKey &amp; Value\u3002 1. \u652f\u6301\u67e5\u8be2\uff1aget 2. \u652f\u6301\u5355\u6570\u636e\u6a21\u578b\u7684 put,delete,write,  \u65e0\u8fd4\u56de\u503c 3. \u652f\u6301\u591a\u6570\u636e\u6a21\u578b\u7684 put,delete,write\uff0c\u8fd4\u56de\u503c\u4e3a\u7ecf\u8fc7\u8be5\u64cd\u4f5c\u4e4b\u540e\u7684snapshot 4. \u652f\u6301\u76f4\u63a5\u8fd4\u56deDB\u7684\u5feb\u7167 5. \u652f\u6301\u8fd4\u56de\u589e\u5f3a\u8fed\u4ee3\u5668(DBIterator)\uff0c\u7528\u4e8e\u904d\u5386\u6570\u636e\u3002 Java<pre><code>public interface DB\n        extends Iterable&lt;Map.Entry&lt;byte[], byte[]&gt;&gt;, Closeable\n{\n    byte[] get(byte[] key)\n            throws DBException;\n\n    byte[] get(byte[] key, ReadOptions options)\n            throws DBException;\n\n    @Override\n    DBIterator iterator();\n\n    DBIterator iterator(ReadOptions options);\n\n    void put(byte[] key, byte[] value)\n            throws DBException;\n\n    void delete(byte[] key)\n            throws DBException;\n\n    void write(WriteBatch updates)\n            throws DBException;\n\n    WriteBatch createWriteBatch();\n\n    /**\n     * @return null if options.isSnapshot()==false otherwise returns a snapshot\n     * of the DB after this operation.\n     */\n    Snapshot put(byte[] key, byte[] value, WriteOptions options)\n            throws DBException;\n\n    /**\n     * @return null if options.isSnapshot()==false otherwise returns a snapshot\n     * of the DB after this operation.\n     */\n    Snapshot delete(byte[] key, WriteOptions options)\n            throws DBException;\n\n    /**\n     * @return null if options.isSnapshot()==false otherwise returns a snapshot\n     * of the DB after this operation.\n     */\n    Snapshot write(WriteBatch updates, WriteOptions options)\n            throws DBException;\n\n    Snapshot getSnapshot();\n}\n</code></pre></p>"},{"location":"frameworkAnalysis/leveldb_learn/#dbiterator","title":"DBIterator","text":"<p>\u5b9e\u73b0\u4e86Iterator\uff0c\u5e76\u989d\u5916\u589e\u52a0\u4e86\u529f\u80fd 1. seek: \u5c06\u8fed\u4ee3\u4f4d\u7f6e\u5b9a\u4f4d\u5230\u5927\u4e8e\u7b49\u4e8e\u67d0\u4e2akey\u7684\u4f4d\u7f6e 2. seekToFirst\uff1a\u5c06\u8fed\u4ee3\u4f4d\u7f6e\u5b9a\u4f4d\u5230\u5f00\u5934 3. peekNext\uff1a\u5f97\u5230\u4e0b\u4e2a\u6570\u636e\uff0c\u4f46\u662f\u4e0d\u79fb\u52a8\u8fed\u4ee3\u4f4d\u7f6e</p> Java<pre><code>public interface DBIterator\n        extends Iterator&lt;Map.Entry&lt;byte[], byte[]&gt;&gt;, Closeable\n{\n    /**\n     * Repositions the iterator so the key of the next BlockElement\n     * returned greater than or equal to the specified targetKey.\n     */\n    void seek(byte[] key);\n\n    /**\n     * Repositions the iterator so is is at the beginning of the Database.\n     */\n    void seekToFirst();\n\n    /**\n     * Returns the next element in the iteration, without advancing the iteration.\n     */\n    Map.Entry&lt;byte[], byte[]&gt; peekNext();\n\n}\n</code></pre>"},{"location":"frameworkAnalysis/leveldb_learn/#dbfactory","title":"DBFactory","text":"<p>\u5de5\u5382\u6a21\u5f0f\u63a5\u53e3\uff0c\u7528\u4e8e\u521b\u5efa\u548c\u7ba1\u7406DB\u5b9e\u4f8b Java<pre><code>public interface DBFactory\n{\n    //\u57fa\u4e8epath &amp; options\uff0c\u521b\u5efaDB\u5b9e\u4f8b\n    DB open(File path, Options options)\n            throws IOException;\n    //\u57fa\u4e8epath &amp; options\uff0c\u9500\u6bc1DB\u5b9e\u4f8b\n    void destroy(File path, Options options)\n            throws IOException;\n}\n</code></pre></p>"},{"location":"frameworkAnalysis/leveldb_learn/#_4","title":"\u914d\u7f6e\u7c7b","text":""},{"location":"frameworkAnalysis/leveldb_learn/#options","title":"Options","text":"<p>\u6570\u636e\u5e93\u914d\u7f6e\u7c7b 1. \u662f\u5426\u81ea\u52a8\u521b\u5efa\u6570\u636e\u5e93\u6587\u4ef6 2. \u5199\u7f13\u51b2\u533a(writeBuffer)\u5927\u5c0f\uff0c\u7f13\u5b58(cache)\u5927\u5c0f 3. \u538b\u7f29\u7c7b\u578b\uff0c\u9ed8\u8ba4Snappy\u3002\u53ea\u6709Snappy\u548cNone\u4e24\u79cd\u3002 4. \u5176\u4ed6</p>"},{"location":"frameworkAnalysis/leveldb_learn/#readoptions","title":"ReadOptions","text":"<ol> <li>\u662f\u5426\u586b\u5145\u7f13\u5b58cache\uff0c\u9ed8\u8ba4\u662ftrue</li> <li>\u662f\u5426\u9a8c\u8bc1\u8bfb\u53d6\u6570\u636e\u7684checksum</li> <li>\u662f\u5426\u6307\u5b9a\u5e76\u8fd4\u56de\u5feb\u7167 \u4f7f\u7528\u65b9\u5f0f\uff0c\u652f\u6301\u6d41\u5f0f\u548c\u5e38\u89c4\u4e24\u79cd\u521b\u5efa\u65b9\u5f0f\u3002 Java<pre><code>Options options = new Options();\noptions.compressionType(CompressionType.NONE);\n\n//\u6216\u8005\nOptions options = new Options().compressionType(CompressionType.NONE);\n</code></pre></li> </ol>"},{"location":"frameworkAnalysis/leveldb_learn/#writeoptions","title":"WriteOptions","text":"<ol> <li>\u63a7\u5236sync/async\u843d\u76d8</li> <li>\u662f\u5426\u8fd4\u56de\u5feb\u7167 \u548cReadOptions\u4f7f\u7528\u65b9\u5f0f\u5b8c\u5168\u4e00\u81f4\u3002</li> </ol>"},{"location":"frameworkAnalysis/leveldb_learn/#_5","title":"\u5176\u4ed6","text":""},{"location":"frameworkAnalysis/leveldb_learn/#snapshot","title":"SnapShot","text":"<p>\u4f5c\u4e3a\u6570\u636e\u5e93\u5728\u67d0\u4e2a\u65f6\u95f4\u70b9\u7684\u5feb\u7167\u89c6\u56fe\uff0c\u9700\u8981\u624b\u52a8\u91ca\u653e\u8d44\u6e90\u3002 public interface Snapshot         extends Closeable { }</p>"},{"location":"frameworkAnalysis/leveldb_learn/#dbcompartor","title":"DBCompartor","text":"<p>\u4f5c\u7528\uff1a\u7528\u4e8e\u81ea\u5b9a\u4e49\u952e\u6392\u5e8f\u7b56\u7565\u3002 DBException \u7ee7\u627f\u81eaRuntimeException\uff0c\u4fbf\u4e8e\u4e0a\u5c42\u8c03\u7528\u8005\u6355\u83b7\u5904\u7406\u3002</p>"},{"location":"frameworkAnalysis/leveldb_learn/#leveldb_1","title":"leveldb","text":""},{"location":"frameworkAnalysis/leveldb_learn/#_6","title":"\u529f\u80fd\u6d4b\u8bd5","text":""},{"location":"frameworkAnalysis/leveldb_learn/#apitest","title":"ApiTest","text":"<p>\u529f\u80fd\uff1a\u7528\u4e8e\u9a8c\u8bc1\u6574\u4f53\u529f\u80fd\u7684\u4ea4\u4e92\u662f\u5426\u6ee1\u8db3\u3002\u901a\u8fc7\u5178\u578b\u7684\u5199\u5165 -&gt; \u5220\u9664 -&gt;\u5199\u5165\u5faa\u73af\uff0c\u9a8c\u8bc1\u662f\u5426\u5728\u591a\u6b21compaction\u4e4b\u540e\u4f9d\u65e7\u6ee1\u8db3\u8981\u6c42\u3002 \u6838\u5fc3\u903b\u8f91\u89e3\u8bfb\uff1a 1. \u521b\u5efa\u672c\u6b21DB\u5b58\u50a8path\uff1a\"/home/xxx/leveldb-099901/testCompaction\" 2. \u901a\u8fc7path &amp; option\uff0c\u521b\u5efaDB 3. \u5faa\u73af\u6d4b\u8bd5\uff0c   1. \u5199\u5165\uff1a\u5c06100\u4e07\u4e2akey-value\uff0c\u8f6c\u6362\u4e3abytes\uff0c\u5199\u5165\u3002   2. \u5173\u95edDB connection\uff0c\u8c03\u7528\u7684\u662fDBImpl\u7684close\u65b9\u6cd5\uff0cDB\u6570\u636e\u4e0d\u4f1a\u5220\u9664   3. \u65b0\u5efaDB connection\uff0c\u57fa\u4e8e\u540c\u6837\u7684\u8def\u5f84\uff0c\u8fd9\u91cc\u4f1a\u91cd\u65b0\u521b\u5efa:new DbImpl(options, path)\u3002   4. \u5220\u9664\uff1a\u5c06100\u4e07\u4e2akey-value\u5220\u9664   5. \u5173\u95edDB connection</p>"},{"location":"frameworkAnalysis/leveldb_learn/#_7","title":"\u6838\u5fc3\u5b9e\u73b0\u7c7b","text":""},{"location":"frameworkAnalysis/leveldb_learn/#dbimpl","title":"DbImpl","text":"<p>\u5199\u64cd\u4f5c. \u5199\u64cd\u4f5c\u5b8c\u5168\u4e32\u884c\u5316\uff0c\u5c5e\u4e8e\u5355\u7ebf\u7a0b\u5199 1. \u8f93\u5165\u53c2\u6570    1. updates\uff1a\u4e00\u4e2a\u5199\u64cd\u4f5c\u6279\u6b21\uff0c\u5305\u542b\u591a\u4e2aput/delete    2. options\uff1aWriteOptions\uff0c\u4e0a\u9762\u6211\u4eec\u5206\u6790\u8fc7\uff0c\u662f\u63a7\u5236\u662f\u5426sync\u843d\u76d8\uff0c\u4ee5\u53ca\u662f\u5426\u8fd4\u56de\u5feb\u7167 2. \u6838\u5fc3\u903b\u8f91    1. \u901a\u8fc7\u53d8\u91cf\u68c0\u67e5\u540e\u53f0\u7ebf\u7a0b\u662f\u5426\u5f02\u5e38    2. \u52a0\u4e0a\u72ec\u5360\u9501    3.  \u5982\u679c\u5199\u8bf7\u6c42 &gt; 0        1.  \u68c0\u67e5memtable\u662f\u5426\u9700\u8981\u66f4\u65b0\uff0c\u8fd9\u91cc\u4e0b\u9762\u8be6\u7ec6\u89e3\u6790        2.  \u5f97\u5230\u5f53\u524dupdates\u7684\u8d77\u6b62\u5e8f\u5217\u53f7        3.   \u66f4\u65b0\u5168\u5c40\u7248\u672c\u7ec8\u6b62\u5e8f\u5217\u53f7        4.   \u5c06updates\u64cd\u4f5c\u5e8f\u5217\u5316\u4e3aSlice\u5f62\u5f0f\u7684WAL\u65e5\u5fd7\uff0c\u540c\u6b65/\u5f02\u6b65\u6301\u4e45\u5316\u5230\u78c1\u76d8        5.   \u5c06updates\u7684\u6bcf\u4e2a\u64cd\u4f5c\u6267\u884c\uff0c\u66f4\u65b0memtable.     4.   \u5982\u679c\u5199\u8bf7\u6c42 == 0. \u5f97\u5230\u5f53\u524d\u7a7a\u64cd\u4f5c\u5e8f\u5217\u7684\u8d77\u6b62\u5e8f\u5217\u53f7     5.   \u6839\u636e\u64cd\u4f5c\u5e8f\u5217\u7684\u8d77\u6b62\u5e8f\u5217\u53f7\uff0c\u8fd4\u56de\u5e94\u7528\u5b8c\u5f53\u524d\u64cd\u4f5c\u7684\u5feb\u7167(\u5305Version &amp; lastseqEnd)     6.   \u91ca\u653e\u72ec\u5360\u9501</p> Java<pre><code>public Snapshot writeInternal(WriteBatchImpl updates, WriteOptions options)\n        throws DBException\n{\n    //\u6574\u4e2aDBImpl\u7ef4\u62a4\u4e00\u4e2ae\u53d8\u91cf\uff0c\u4ee3\u8868\u540e\u53f0compation\u7ebf\u7a0b\u662f\u5426\u5f02\u5e38\n    checkBackgroundException();\n    //\u72ec\u5360\u9501\uff0c\u8fd9\u91cc\u7528ReentrantLock\n    mutex.lock();\n    try {\n        long sequenceEnd;\n        //\u5982\u679c\u6709\u5199\u8bf7\u6c42\n        if (updates.size() != 0) {\n            //\u4fdd\u8bc1\u5199\u8bf7\u6c42\u5728\u5185\u5b58\u4e2d\u7684\u5199\u5165\u7a7a\u95f4\u5927\u5c0f\uff0c\u53ef\u80fd\u89e6\u53d1memo table\u5207\u6362\uff0c\u5c06\u65e7memo table\u53d8immutable\n            makeRoomForWrite(false);\n\n            // Get sequence numbers for this change set\n            //leveldb\u4f7f\u7528\u5168\u5c40\u9012\u589e\u7684\u5e8f\u5217\u53f7\u6765\u4fdd\u6301\u64cd\u4f5c\u987a\u5e8f\u548c\u5feb\u7167\u4e00\u81f4\u6027\n            long sequenceBegin = versions.getLastSequence() + 1;\n            //\u8fd9\u4e00\u6279\u5199\u5165\u4f7f\u7528\u8fde\u7eed\u7684\u5e8f\u5217\u53f7\n            sequenceEnd = sequenceBegin + updates.size() - 1;\n            //\u66f4\u65b0\u5168\u5c40versions\u7684\u6700\u65b0\u6700\u540e\u4e00\u4e2a\u5e8f\u5217\u53f7\n            versions.setLastSequence(sequenceEnd);\n\n            // Log write\u3002\u6b64\u5904\u5c06\u6574\u4e2aWriteBatch\u5e8f\u5217\u5316\u4e3a\u4e00\u6761WAL\u65e5\u5fd7(\u5b57\u8282\u6570\u7ec4)\uff0c\u7528\u4e8e\u6062\u590d\n            //Slice\u662f\u5c01\u88c5\u597d\u7684byte array\n            Slice record = writeWriteBatch(updates, sequenceBegin);\n            try {\n                //DBImpl\u7ef4\u62a4\u4e00\u4e2alogger writer\uff0c\u7528\u4e8e\u5199WAL\u65e5\u5fd7\u3002\u5982\u679csync\u4e3atrue\uff0c\u5219\u5f3a\u5236\u5237\u76d8\n                //\u8bb0\u4f4fWAL\u65e5\u5fd7\u5199\u7684\u5c31\u662fkey-value\u5e8f\u5217\u5316\u7684\u503c\uff0c\u4ee5\u53ca\u5bf9\u5e94\u7684\u64cd\u4f5c\u4fe1\u606f\u3002\n                log.addRecord(record, options.sync());\n            }\n            catch (IOException e) {\n                throw Throwables.propagate(e);\n            }\n\n            // Update memtable\u3002\u904d\u5386\u6240\u6709\u5199\u64cd\u4f5c(seqBegin-seqEnd)\uff0c\u5c06\u8bb0\u5f55\u52a0\u5165\u5230memTable\u4e2d\n            updates.forEach(new InsertIntoHandler(memTable, sequenceBegin));\n        }\n        else {\n            //\u5982\u679c\u5b9e\u9645\u6ca1\u6709\u6570\u636e\u5199\u5165\uff0c\u5219\u5f53\u524d\u5199\u7ec4\u5408\u7684seq_end\u5c31\u662fversions.last\n            sequenceEnd = versions.getLastSequence();\n        }\n\n        if (options.snapshot()) {\n            //\u8981\u8fd4\u56de\u5f53\u524d\u5199\u64cd\u4f5c\u4e4b\u540e\u7684\u5feb\u7167\u72b6\u6001\n            //\u8fd9\u91cc\u5c01\u88c5\u7684\u662f\u4e24\u4e2a\u4fe1\u606f:\u5f53\u524dVersion\uff0c\u4ee5\u53ca\u662f\u4ece0\u5230\u54ea\u4e2a\u4f4d\u7f6e\u7684\u72b6\u6001\u53e0\u52a0:sequenceEnd\uff0c\u5c4f\u853d\u6389\u4e4b\u540e\u7684\u4fee\u6539\n            return new SnapshotImpl(versions.getCurrent(), sequenceEnd);\n        }\n        else {\n            return null;\n        }\u00b7\n    }\n    finally {\n        //\u91ca\u653e\u72ec\u5360\u9501\n        mutex.unlock();\n    }\n}\n</code></pre> <p>\u5176\u4e2d\u7684makeRoomForWrite\u5982\u4e0b\uff1a Java<pre><code>    private void makeRoomForWrite(boolean force)\n    {\n        //\u68c0\u67e5\u5f53\u524d\u7ebf\u7a0b\u662f\u5426\u6301\u6709\u72ec\u5360\u9501\u6765\u64cd\u4f5cmemotable\n        checkState(mutex.isHeldByCurrentThread());\n\n        boolean allowDelay = !force;\n\n        while (true) {\n            //case1\uff1a\u5982\u679c\u9700\u8981\u538b\u7f29\uff0c\u5e76\u4e14\u5141\u8bb8\u5ef6\u8fdf\uff0c\u5219\u91ca\u653e\u9501\u5e76sleep1s\uff0c\u8ba9\u51facpu\u4f7f\u5f97memtable\u88ab\u5feb\u901f\u538b\u7f29\n            if (allowDelay &amp;&amp; versions.numberOfFilesInLevel(0) &gt; L0_SLOWDOWN_WRITES_TRIGGER) {\n                try {\n                    mutex.unlock();\n                    Thread.sleep(1);\n                }\n                catch (InterruptedException e) {\n                    Thread.currentThread().interrupt();\n                    throw new RuntimeException(e);\n                }\n                finally {\n                    mutex.lock();\n                }\n\n                // Do not delay a single write more than once\n                allowDelay = false;\n            }\n            //case2\uff1a\u5f53\u524d\u7684memtable\u90fd\u6ca1\u6ee1\n            else if (!force &amp;&amp; memTable.approximateMemoryUsage() &lt;= options.writeBufferSize()) {\n                // There is room in current memtable\n                break;\n            }\n            //case3:immutable memtable\u8fd8\u6ca1\u6709\u538b\u7f29\u91ca\u653e\n            else if (immutableMemTable != null) {\n                // We have filled up the current memtable, but the previous\n                // one is still being compacted, so we wait.\n                backgroundCondition.awaitUninterruptibly();\n            }\n            //case4:\u8feb\u5207\u9700\u8981\u538b\u7f29\uff0c\u5219\u5f53\u524d\u7ebf\u7a0b\u5904\u4e8e\u963b\u585e\u5728\u6761\u4ef6\u961f\u5217\u4e2d\uff0c\u7b49\u5f85\u5176\u4ed6\u7ebf\u7a0b\u5c06\u5176\u5524\u9192\u3002\n            else if (versions.numberOfFilesInLevel(0) &gt;= L0_STOP_WRITES_TRIGGER) {\n                // There are too many level-0 files.\n//                Log(options_.info_log, \"waiting...\\n\");\n                backgroundCondition.awaitUninterruptibly();\n            }\n            else {\n            //case5:\u521b\u5efa\u4e00\u4e2a\u65b0\u7684memtable\uff0c\u5c06\u65e7\u7684\u8fdb\u884c\u538b\u7f29\n                // Attempt to switch to a new memtable and trigger compaction of old\n                checkState(versions.getPrevLogNumber() == 0);\n\n                // close the existing log\n                try {\n                    log.close();\n                }\n                catch (IOException e) {\n                    throw new RuntimeException(\"Unable to close log file \" + log.getFile(), e);\n                }\n\n                // open a new log\n                long logNumber = versions.getNextFileNumber();\n                try {\n                    this.log = Logs.createLogWriter(new File(databaseDir, Filename.logFileName(logNumber)), logNumber);\n                }\n                catch (IOException e) {\n                    throw new RuntimeException(\"Unable to open new log file \" +\n                            new File(databaseDir, Filename.logFileName(logNumber)).getAbsoluteFile(), e);\n                }\n\n                // create a new mem table\n                immutableMemTable = memTable;\n                memTable = new MemTable(internalKeyComparator);\n\n                // Do not force another compaction there is space available\n                force = false;\n\n                maybeScheduleCompaction();\n            }\n        }\n    }\n</code></pre></p> <p>\u8bfb\u64cd\u4f5c\u3002 \u8bfb\u64cd\u4f5c\u5728SST Table\u641c\u7d22\u7684\u65f6\u5019\u53ef\u4ee5\u5e76\u53d1\uff0c\u800c\u5728memtable\u4e2d\u662f\u4e32\u884c\u5316\u3002\u6240\u4ee5\u5b83\u53ef\u4ee5\u652f\u6301\u591a\u7ebf\u7a0b\u5e76\u53d1\u8bfb\u53d6\u3002 ReadOptions\u529f\u80fd\u5982\u4e0b\uff1a 1. \u662f\u5426\u586b\u5145\u7f13\u5b58cache\uff0c\u9ed8\u8ba4\u662ftrue 2. \u662f\u5426\u9a8c\u8bc1\u8bfb\u53d6\u6570\u636e\u7684checksum 3. \u662f\u5426\u6307\u5b9a\u5e76\u8fd4\u56de\u5feb\u7167\u5b9e\u73b0 \u8bfb\u53d6\u7684byte[] key\u5bf9\u5e94\u7684value,\u6bd4\u5982key\u662f[98,97,114]</p> Java<pre><code>public byte[] get(byte[] key, ReadOptions options)\n        throws DBException\n{\n    //\u68c0\u67e5\u540e\u53f0\u7ebf\u7a0b\u5f02\u5e38\n    checkBackgroundException();\n\n    LookupKey lookupKey;\n    //\u52a0\u4e0a\u72ec\u5360\u9501\uff0c\u64cd\u4f5cmemtable,\u4ee5\u53caimmutable table\n    mutex.lock();\n    try {\n        //\u6839\u636eoptions\u8fd4\u56de\u6307\u5b9a\u5feb\u7167\uff0c\u6216\u8005\u521b\u5efa\u6700\u65b0\u5feb\u7167\n        SnapshotImpl snapshot = getSnapshot(options);\n        //\u57fa\u4e8e\u539f\u59cbkey\uff0c\u4ee5\u53ca\u5f53\u524d\u7684lastSeq number\uff0c\u521b\u5efa\u7528\u4e8e\u67e5\u627e\u7684key\n        lookupKey = new LookupKey(Slices.wrappedBuffer(key), snapshot.getLastSequence());\n\n        // First look in the memtable, then in the immutable memtable (if any).\n\n        //\u4e00\u4e2aDbImpl\u5206\u522b\u7ef4\u62a4\u4e00\u4e2amemtable\uff0c\u4ee5\u53ca\u4e00\u4e2aimmutable table\n        //\u9996\u5148\u5728memo table\u4e2d\u67e5\u770b\u662f\u5426\u6709\u5bf9\u5e94key\u5bf9\u5e94\u7684value\n        LookupResult lookupResult = memTable.get(lookupKey);\n        if (lookupResult != null) {\n            Slice value = lookupResult.getValue();\n            if (value == null) {\n                return null;\n            }\n            return value.getBytes();\n        }\n        //\u7136\u540e\u5728immutable table\u4e2d\u67e5\u770b\u662f\u5426\u6709\n        if (immutableMemTable != null) {\n            lookupResult = immutableMemTable.get(lookupKey);\n            if (lookupResult != null) {\n                Slice value = lookupResult.getValue();\n                if (value == null) {\n                    return null;\n                }\n                return value.getBytes();\n            }\n        }\n    }\n    finally {\n        //\u91ca\u653e\u72ec\u5360\u9501\uff0c\u5141\u8bb8\u5176\u4ed6\u64cd\u4f5c\u8bbf\u95eetable\n        mutex.unlock();\n    }\n\n    //\u5728SST\u6587\u4ef6(\u78c1\u76d8\u4e2d\u67e5\u627e)\uff0c\u4e5f\u5c31\u662f\u8c03\u7528versions.get(lookupkey)\n    //\u8fd9\u91cc\u4f1a\u5408\u5e76\u8fed\u4ee3\u5668\u6570\u636e\uff0c\u5c06\u6570\u636e\u622a\u6b62\u5230lastVersionEnd\u7684\u6700\u65b0\u7248\u672c\u5408\u5e76\u51fa\u6765\n    // Not in memTables; try live files in level order\n    LookupResult lookupResult = versions.get(lookupKey);\n\n    // schedule compaction if necessary\n    //\u5728\u8fd9\u91cc\u89e6\u53d1SST\u6587\u4ef6\u538b\u7f29\uff0c\u5c06\u538b\u7f29\u4efb\u52a1\u63d0\u4ea4\u5230DbImpl\u7ef4\u62a4\u7684\u7ebf\u7a0b\u6c60\u4e2d\u6267\u884c\n    //\u4e3a\u4ec0\u4e48\u8981\u5728\u8bfb\u53d6\u7684\u65f6\u5019\u89e6\u53d1\u538b\u7f29\uff0c\u800c\u4e0d\u662f\u5199\u5165\u7684\u65f6\u5019\uff1f\n    //1. \u907f\u514d\u963b\u585e\u5199\u5165\n    //2. \u51cf\u5c11\u540e\u7eed\u67e5\u8be2\u5f00\u9500\n    mutex.lock();\n    try {\n        if (versions.needsCompaction()) {\n            maybeScheduleCompaction();\n        }\n    }\n    finally {\n        mutex.unlock();\n    }\n\n    //\u8fd4\u56de\u7ed3\u679c\n    if (lookupResult != null) {\n        Slice value = lookupResult.getValue();\n        if (value != null) {\n            return value.getBytes();\n        }\n    }\n    return null;\n}\n</code></pre> <p>\u4e0a\u9762\u53ea\u6709\u8bfb\u5199\u64cd\u4f5c\u7684\u5206\u6790\uff0c\u4e0b\u9762\u6211\u4eec\u6765\u770b\u5176\u4ed6\u90e8\u5206\u3002</p>"},{"location":"frameworkAnalysis/leveldb_learn/#snapshotimpl","title":"SnapShotImpl","text":"<p>SnapsShotImpl\u662f\u5feb\u7167\u5b9e\u73b0\u7c7b\uff0c\u7528\u4e8e\u8fd4\u56de\u6307\u5b9a\u5feb\u7167\u3002\u672c\u8d28\u4e0a\u5b83\u662fVersion &amp; SequenceNumber\u7684\u5c01\u88c5\u3002</p>"},{"location":"frameworkAnalysis/leveldb_learn/#version-versionset","title":"Version &amp; VersionSet","text":"<p>\u7ba1\u7406\u5e76\u7ef4\u62a4\u6240\u6709\u6d3b\u8dc3\u7684Version\u5b9e\u4f8b\uff0c\u540c\u65f6\u8d1f\u8d23apply VersionEdit\u4ee5\u4ea7\u751f\u65b0\u7684Version\u5b9e\u4f8b\u3002</p> <p>\u4e00\u4e2aVersion\u4ee3\u8868\u4e00\u4e2a\u5177\u4f53\u7684SSTable\u6587\u4ef6\u96c6\u5408\u7684\u72b6\u6001(\u5305\u62ecLevel0\u4ee5\u53ca\u5176\u4ed6\u5c42\u7ea7)\u3002\u5f53\u5f15\u7528\u8ba1\u6570=0\u7684\u65f6\u5019\uff0c\u4f1a\u88ab\u4eceVersionSet\u4e2d\u5220\u9664\u6389\u3002</p>"},{"location":"frameworkAnalysis/leveldb_learn/#versionedit-manifest-file","title":"VersionEdit &amp; Manifest file","text":"<p>\u662f\u4e00\u79cd\u4e2d\u95f4\u6570\u636e\u7ed3\u6784\uff0c\u7528\u4e8e\u8868\u793a1\u6b21\u5bf9Version\u7684\u66f4\u6539(\u4e5f\u5c31\u662f\u5bf9SSTable\u6587\u4ef6\u7684\u4fee\u6539)\u3002\u800cManifest file\u5219\u662f\u4e00\u4e2alog\u6587\u4ef6\uff0c\u6bcf\u4e00\u4e2alog record\u5c31\u662f\u4e00\u4e2aVersionEdit\u5e8f\u5217\u5316\u4e3aSlice\u4e4b\u540e\u7684\u7ed3\u679c\u3002</p> <p>\u90a3\u4e48\u975e\u5e38\u663e\u7136\uff0cVersion\u662fVersionSet\u53e0\u52a0\u4e4b\u540e\u7684\u6570\u636e\u5e93\u72b6\u6001\uff0c\u5305\u542b\u5f53\u524d\u7684SSTable\u6587\u4ef6\u72b6\u6001\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5176\u5b9e\u901a\u8fc7Manifest file,\u5c31\u53ef\u4ee5\u77e5\u9053\u5219\u5408\u683c\u90a3\u4e2aLevelDB\u7684\u72b6\u6001\u3002</p>"},{"location":"frameworkAnalysis/leveldb_learn/#compaction","title":"Compaction","text":"<p>\u8fd9\u4e2a\u4e0d\u662f\u4e00\u4e2a\u7c7b\uff0c\u800c\u662f\u4e00\u4e2a\u6838\u5fc3\u8fc7\u7a0b\u3002\u5728\u5199\u64cd\u4f5c\u5f00\u59cb\u7684\u65f6\u5019\u4f1a\u901a\u8fc7makeRoomForWrite()\uff0c\u6709\u53ef\u80fd\u89e6\u53d1Compaction\u3002\u800c\u8bfb\u64cd\u4f5c\u4e5f\u4f1a\u5728\u8bfb\u53d6\u5b8c\u6bd5\u4e4b\u540e\u624b\u52a8\u89e6\u53d1Compaction\u3002</p> <p>Compaction\u4f1a\u5e26\u6765\u4e25\u91cd\u7684\u5199\u653e\u5927\u95ee\u9898\uff0c\u4e5f\u5c31\u662f\u5199\u5165\u4e00\u4e2arecord\u7684\u65f6\u673aIO\u5199\u5165(\u6240\u6709\u56e0\u6b64\u4ea7\u751f\u7684\u5199\u64cd\u4f5c)\u6d41\u91cf\u4f1a\u662f\u7406\u8bba\u7684\u6570\u500d\u3002\u8fd9\u662f\u7531\u4e8eWriteInternal\u7684\u65f6\u5019\uff0c\u9996\u5148\u4f1a\u5199WAL(\u5305\u542b\u5b8c\u6574\u7684record\u4ee5\u53caop)\uff0c\u7136\u540e\u4eceimmutable memTable\u5230Level-0\u843d\u76d8\uff0c\u518d\u5230level-0\u4e0elevel-1\u7684\u5408\u5e76\uff0c\u518d\u5230level-n\u4e0elevel-n+1\u7684\u5408\u5e76(\u5199\u5165\u91cf\u4e0a\u5347\u4e00\u4e2a\u6570\u91cf\u7ea7)\u3002\u603b\u5171\u4f1a\u4ea7\u751f\u5927\u4e00\u4e2a\u6570\u91cf\u7ea7\u4ee5\u4e0a\u7684IO\u5199\u5165\u6d41\u91cf\u3002</p> <p>\u8be6\u7ec6\u6765\u770b\uff0c\u5047\u8bbe\u4e00\u6b21\u5199\u5165n\u4e2arecord\uff1a</p> <ul> <li>WAL\uff0c\u4f1a\u662f1.x n</li> <li>immutable memTable\u843d\u76d8\u4e3alevel-0\uff0c\u4f1a\u662fn</li> <li>level0\u548clevel1\u7684compact\uff0c\u8fd9\u91cc\u662f\u8bfb\u53d6level-0\u7684\u6240\u6709record\uff0c\u548clevel-1\u7684\u5bf9\u5e94\u8303\u56f4\u7684Record\u8fdb\u884c\u5f52\u5e76\u6392\u5e8f\u3002\u5047\u8bbe\u539f\u59cb\u5199\u5165\u4e00\u4e2amemTable\u662f2MB,\u4f46\u662f\u73b0\u5728\u9700\u8981\u5c06level-0(4 * 2)\u548clevel-1\u7684\u6587\u4ef6(1 * 10)\u5408\u5e76\u518d\u5199\u5165\uff0c\u5219\u4e3a18MB,\u7ecf\u8fc7\u538b\u7f29\u8fc7\u6ee4\uff0c\u5b9e\u9645\u4e3a2.x\u500d\u3002</li> <li>level-n\u5230level-n+1\u7684compact\uff0c\u8fd9\u91cc\u6570\u636e\u500d\u6570\u5173\u7cfb\u662f10x\u500d\uff0c\u5219\u5199\u5165\u500d\u6570\u5dee\u4e5f\u662f10\u500d\u3002</li> </ul> <p>\u4e00\u822c\u5199\u653e\u5927\u53ef\u8fbe10-100\u500d\u3002</p>"},{"location":"frontend/","title":"\u524d\u7aef\u5f00\u53d1","text":"<p>\u6280\u672f\u6808</p> <ul> <li>Vue</li> <li>Ts</li> </ul>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/","title":"Vue","text":""},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#0","title":"0. \u6587\u6863\u6765\u6e90","text":"<p>\u5c1a\u7845\u8c37b\u7ad9\u8bfe\u7a0b\u7cbe\u7b80\u800c\u6765\uff0c\u7528\u4e8e\u4e2a\u4eba\u5b66\u4e60\u4f7f\u7528\u3002</p>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#1-vue","title":"1. \u4ecb\u7ecdVue","text":"<p><code>vue</code>\u662f\u4e00\u4e2a\u524d\u7aef\u6846\u67b6\uff0c\u6700\u65b0\u7684<code>vue3</code>\u57fa\u4e8e<code>typescript</code></p>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#2-vue3","title":"2. \u521b\u5efaVue3\u5de5\u7a0b","text":""},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#21-vite","title":"2.1. \u3010\u57fa\u4e8e vite \u521b\u5efa\u3011(\u63a8\u8350)","text":"<p><code>vite</code> \u662f\u65b0\u4e00\u4ee3\u524d\u7aef\u6784\u5efa\u5de5\u5177\uff0c\u5b98\u7f51\u5730\u5740\uff1ahttps://vitejs.cn\uff0c<code>vite</code>\u7684\u4f18\u52bf\u5982\u4e0b\uff1a</p> <ul> <li>\u8f7b\u91cf\u5feb\u901f\u7684\u70ed\u91cd\u8f7d\uff08<code>HMR</code>\uff09\uff0c\u80fd\u5b9e\u73b0\u6781\u901f\u7684\u670d\u52a1\u542f\u52a8\u3002</li> <li>\u5bf9 <code>TypeScript</code>\u3001<code>JSX</code>\u3001<code>CSS</code> \u7b49\u652f\u6301\u5f00\u7bb1\u5373\u7528\u3002</li> <li> <p>\u771f\u6b63\u7684\u6309\u9700\u7f16\u8bd1\uff0c\u4e0d\u518d\u7b49\u5f85\u6574\u4e2a\u5e94\u7528\u7f16\u8bd1\u5b8c\u6210\u3002</p> </li> <li> <p>\u5177\u4f53\u64cd\u4f5c\u5982\u4e0b\uff08\u70b9\u51fb\u67e5\u770b\u5b98\u65b9\u6587\u6863\uff09</p> </li> </ul> PowerShell<pre><code>## 1.\u521b\u5efa\u547d\u4ee4\nnpm create vue@latest\n\n## 2.\u5177\u4f53\u914d\u7f6e\n## \u914d\u7f6e\u9879\u76ee\u540d\u79f0\n\u221a Project name: vue3_test\n## \u662f\u5426\u6dfb\u52a0TypeScript\u652f\u6301\n\u221a Add TypeScript?  Yes\n## \u662f\u5426\u6dfb\u52a0JSX\u652f\u6301\n\u221a Add JSX Support?  No\n## \u662f\u5426\u6dfb\u52a0\u8def\u7531\u73af\u5883\n\u221a Add Vue Router for Single Page Application development?  No\n## \u662f\u5426\u6dfb\u52a0pinia\u73af\u5883\n\u221a Add Pinia for state management?  No\n## \u662f\u5426\u6dfb\u52a0\u5355\u5143\u6d4b\u8bd5\n\u221a Add Vitest for Unit Testing?  No\n## \u662f\u5426\u6dfb\u52a0\u7aef\u5230\u7aef\u6d4b\u8bd5\u65b9\u6848\n\u221a Add an End-to-End Testing Solution? \u00bb No\n## \u662f\u5426\u6dfb\u52a0ESLint\u8bed\u6cd5\u68c0\u67e5\n\u221a Add ESLint for code quality?  Yes\n## \u662f\u5426\u6dfb\u52a0Prettiert\u4ee3\u7801\u683c\u5f0f\u5316\n\u221a Add Prettier for code formatting?  No\n</code></pre> <p>\u81ea\u5df1\u52a8\u624b\u7f16\u5199\u4e00\u4e2aApp\u7ec4\u4ef6</p> Vue<pre><code>&lt;template&gt;\n  &lt;div class=\"app\"&gt;\n    &lt;h1&gt;\u4f60\u597d\u554a\uff01&lt;/h1&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=\"ts\"&gt;\n  export default {\n    name:'App' //\u7ec4\u4ef6\u540d\n  }\n&lt;/script&gt;\n\n&lt;style&gt;\n  .app {\n    background-color: #ddd;\n    box-shadow: 0 0 10px;\n    border-radius: 10px;\n    padding: 20px;\n  }\n&lt;/style&gt;\n</code></pre> <p>\u603b\u7ed3\uff1a</p> <ul> <li><code>Vite</code> \u9879\u76ee\u4e2d\uff0c<code>index.html</code> \u662f\u9879\u76ee\u7684\u5165\u53e3\u6587\u4ef6\uff0c\u5728\u9879\u76ee\u6700\u5916\u5c42\u3002</li> <li>\u52a0\u8f7d<code>index.html</code>\u540e\uff0c<code>Vite</code> \u89e3\u6790 <code>&lt;script type=\"module\" src=\"xxx\"&gt;</code> \u6307\u5411\u7684<code>JavaScript</code>\u3002</li> <li><code>Vue3</code>\u4e2d\u662f\u901a\u8fc7 <code>createApp</code> \u51fd\u6570\u521b\u5efa\u4e00\u4e2a\u5e94\u7528\u5b9e\u4f8b\u3002</li> </ul>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#3-vue3","title":"3. Vue3\u6838\u5fc3\u8bed\u6cd5","text":""},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#31-optionsapi-compositionapi","title":"3.1.  \u3010OptionsAPI \u4e0e CompositionAPI\u3011","text":"<ul> <li><code>Vue2</code>\u7684<code>API</code>\u8bbe\u8ba1\u662f<code>Options</code>\uff08\u914d\u7f6e\uff09\u98ce\u683c\u7684\u3002</li> <li><code>Vue3</code>\u7684<code>API</code>\u8bbe\u8ba1\u662f<code>Composition</code>\uff08\u7ec4\u5408\uff09\u98ce\u683c\u7684\u3002</li> </ul>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#options-api","title":"Options API \u7684\u5f0a\u7aef","text":"<p><code>Options</code>\u7c7b\u578b\u7684 <code>API</code>\uff0c\u6570\u636e\u3001\u65b9\u6cd5\u3001\u8ba1\u7b97\u5c5e\u6027\u7b49\uff0c\u662f\u5206\u6563\u5728\uff1a<code>data</code>\u3001<code>methods</code>\u3001<code>computed</code>\u4e2d\u7684\uff0c\u82e5\u60f3\u65b0\u589e\u6216\u8005\u4fee\u6539\u4e00\u4e2a\u9700\u6c42\uff0c\u5c31\u9700\u8981\u5206\u522b\u4fee\u6539\uff1a<code>data</code>\u3001<code>methods</code>\u3001<code>computed</code>\uff0c\u4e0d\u4fbf\u4e8e\u7ef4\u62a4\u548c\u590d\u7528\u3002</p>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#composition-api","title":"Composition API \u7684\u4f18\u52bf","text":"<p>\u53ef\u4ee5\u7528\u51fd\u6570\u7684\u65b9\u5f0f\uff0c\u66f4\u52a0\u4f18\u96c5\u7684\u7ec4\u7ec7\u4ee3\u7801\uff0c\u8ba9\u76f8\u5173\u529f\u80fd\u7684\u4ee3\u7801\u66f4\u52a0\u6709\u5e8f\u7684\u7ec4\u7ec7\u5728\u4e00\u8d77\u3002</p> <p>\u5177\u4f53\u7406\u89e3\u5c31\u662f\u53ef\u4ee5\u628a\u4e3b\u8981\u7684\u529f\u80fd\u5b9e\u73b0\u5168\u90e8\u62c6\u5206\u5230\u5176\u4ed6\u6587\u4ef6\u4e2d\u53bb\uff0c\u6700\u540e\u5728<code>setup</code>\u4e2d\u7ec4\u5408\u5373\u53ef\u3002\u8fd9\u6b63\u662f\u7ec4\u5408\u5f0fAPI\u6700\u5927\u7684\u4f18\u52bf\u3002</p>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#32-setup","title":"3.2. \u3010\u62c9\u5f00\u5e8f\u5e55\u7684 setup\u3011","text":""},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#setup","title":"setup \u6982\u8ff0","text":"<p><code>setup</code>\u662f<code>Vue3</code>\u4e2d\u4e00\u4e2a\u65b0\u7684\u914d\u7f6e\u9879\uff0c\u503c\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u5b83\u662f <code>Composition API</code> \u201c\u8868\u6f14\u7684\u821e\u53f0\u201d\uff0c\u7ec4\u4ef6\u4e2d\u6240\u7528\u5230\u7684\uff1a\u6570\u636e\u3001\u65b9\u6cd5\u3001\u8ba1\u7b97\u5c5e\u6027\u3001\u76d1\u89c6......\u7b49\u7b49\uff0c\u5747\u914d\u7f6e\u5728<code>setup</code>\u4e2d\u3002</p> <p>\u7279\u70b9\u5982\u4e0b\uff1a</p> <ul> <li><code>setup</code>\u51fd\u6570\u8fd4\u56de\u7684\u5bf9\u8c61\u4e2d\u7684\u5185\u5bb9\uff0c\u53ef\u76f4\u63a5\u5728\u6a21\u677f\u4e2d\u4f7f\u7528\u3002</li> <li><code>setup</code>\u4e2d\u8bbf\u95ee<code>this</code>\u662f<code>undefined</code>\u3002</li> <li><code>setup</code>\u51fd\u6570\u4f1a\u5728<code>beforeCreate</code>\u4e4b\u524d\u8c03\u7528\uff0c\u5b83\u662f\u201c\u9886\u5148\u201d\u6240\u6709\u94a9\u5b50\u6267\u884c\u7684\u3002</li> </ul> Vue<pre><code>&lt;template&gt;\n  &lt;div class=\"person\"&gt;\n    &lt;h2&gt;\u59d3\u540d\uff1a{{name}}&lt;/h2&gt;\n    &lt;h2&gt;\u5e74\u9f84\uff1a{{age}}&lt;/h2&gt;\n    &lt;button @click=\"changeName\"&gt;\u4fee\u6539\u540d\u5b57&lt;/button&gt;\n    &lt;button @click=\"changeAge\"&gt;\u5e74\u9f84+1&lt;/button&gt;\n    &lt;button @click=\"showTel\"&gt;\u70b9\u6211\u67e5\u770b\u8054\u7cfb\u65b9\u5f0f&lt;/button&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=\"ts\"&gt;\n  export default {\n    name:'Person',\n    setup(){\n      // \u6570\u636e\uff0c\u539f\u6765\u5199\u5728data\u4e2d\uff08\u6ce8\u610f\uff1a\u6b64\u65f6\u7684name\u3001age\u3001tel\u6570\u636e\u90fd\u4e0d\u662f\u54cd\u5e94\u5f0f\u6570\u636e\uff09\n      let name = '\u5f20\u4e09'\n      let age = 18\n      let tel = '13888888888'\n\n      // \u65b9\u6cd5\uff0c\u539f\u6765\u5199\u5728methods\u4e2d\n      function changeName(){\n        name = 'zhang-san' //\u6ce8\u610f\uff1a\u6b64\u65f6\u8fd9\u4e48\u4fee\u6539name\u9875\u9762\u662f\u4e0d\u53d8\u5316\u7684\n        console.log(name)\n      }\n      function changeAge(){\n        age += 1 //\u6ce8\u610f\uff1a\u6b64\u65f6\u8fd9\u4e48\u4fee\u6539age\u9875\u9762\u662f\u4e0d\u53d8\u5316\u7684\n        console.log(age)\n      }\n      function showTel(){\n        alert(tel)\n      }\n\n      // \u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5bf9\u8c61\u4e2d\u7684\u5185\u5bb9\uff0c\u6a21\u677f\u4e2d\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\n      return {name,age,tel,changeName,changeAge,showTel}\n    }\n  }\n&lt;/script&gt;\n</code></pre>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#setup_1","title":"setup \u7684\u8fd4\u56de\u503c","text":"<ul> <li>\u82e5\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\uff1a\u5219\u5bf9\u8c61\u4e2d\u7684\uff1a\u5c5e\u6027\u3001\u65b9\u6cd5\u7b49\uff0c\u5728\u6a21\u677f\u4e2d\u5747\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\uff08\u91cd\u70b9\u5173\u6ce8\uff09\u3002</li> <li>\u82e5\u8fd4\u56de\u4e00\u4e2a\u51fd\u6570\uff1a\u5219\u53ef\u4ee5\u81ea\u5b9a\u4e49\u6e32\u67d3\u5185\u5bb9\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a</li> </ul> JSX<pre><code>setup(){\n  return ()=&gt; '\u4f60\u597d\u554a\uff01'\n}\n</code></pre>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#setup-options-api","title":"setup \u4e0e Options API \u7684\u5173\u7cfb","text":"<ul> <li><code>Vue2</code> \u7684\u914d\u7f6e\uff08<code>data</code>\u3001<code>methos</code>......\uff09\u4e2d\u53ef\u4ee5\u8bbf\u95ee\u5230 <code>setup</code>\u4e2d\u7684\u5c5e\u6027\u3001\u65b9\u6cd5\u3002</li> <li>\u4f46\u5728<code>setup</code>\u4e2d\u4e0d\u80fd\u8bbf\u95ee\u5230<code>Vue2</code>\u7684\u914d\u7f6e\uff08<code>data</code>\u3001<code>methos</code>......\uff09\u3002</li> <li>\u5982\u679c\u4e0e<code>Vue2</code>\u51b2\u7a81\uff0c\u5219<code>setup</code>\u4f18\u5148\u3002</li> </ul>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#setup_2","title":"setup \u8bed\u6cd5\u7cd6","text":"<p><code>setup</code>\u51fd\u6570\u6709\u4e00\u4e2a\u8bed\u6cd5\u7cd6\uff0c\u8fd9\u4e2a\u8bed\u6cd5\u7cd6\uff0c\u53ef\u4ee5\u8ba9\u6211\u4eec\u628a<code>setup</code>\u72ec\u7acb\u51fa\u53bb\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a</p> Vue<pre><code>&lt;template&gt;\n  &lt;div class=\"person\"&gt;\n    &lt;h2&gt;\u59d3\u540d\uff1a{{name}}&lt;/h2&gt;\n    &lt;h2&gt;\u5e74\u9f84\uff1a{{age}}&lt;/h2&gt;\n    &lt;button @click=\"changName\"&gt;\u4fee\u6539\u540d\u5b57&lt;/button&gt;\n    &lt;button @click=\"changAge\"&gt;\u5e74\u9f84+1&lt;/button&gt;\n    &lt;button @click=\"showTel\"&gt;\u70b9\u6211\u67e5\u770b\u8054\u7cfb\u65b9\u5f0f&lt;/button&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=\"ts\"&gt;\n  export default {\n    name:'Person',\n  }\n&lt;/script&gt;\n\n&lt;!-- \u4e0b\u9762\u7684\u5199\u6cd5\u662fsetup\u8bed\u6cd5\u7cd6 --&gt;\n&lt;script setup lang=\"ts\"&gt;\n  console.log(this) //undefined\n\n  // \u6570\u636e\uff08\u6ce8\u610f\uff1a\u6b64\u65f6\u7684name\u3001age\u3001tel\u90fd\u4e0d\u662f\u54cd\u5e94\u5f0f\u6570\u636e\uff09\n  let name = '\u5f20\u4e09'\n  let age = 18\n  let tel = '13888888888'\n\n  // \u65b9\u6cd5\n  function changName(){\n    name = '\u674e\u56db'//\u6ce8\u610f\uff1a\u6b64\u65f6\u8fd9\u4e48\u4fee\u6539name\u9875\u9762\u662f\u4e0d\u53d8\u5316\u7684\n  }\n  function changAge(){\n    console.log(age)\n    age += 1 //\u6ce8\u610f\uff1a\u6b64\u65f6\u8fd9\u4e48\u4fee\u6539age\u9875\u9762\u662f\u4e0d\u53d8\u5316\u7684\n  }\n  function showTel(){\n    alert(tel)\n  }\n&lt;/script&gt;\n</code></pre> <p>\u6269\u5c55\uff1a\u4e0a\u8ff0\u4ee3\u7801\uff0c\u8fd8\u9700\u8981\u7f16\u5199\u4e00\u4e2a\u4e0d\u5199<code>setup</code>\u7684<code>script</code>\u6807\u7b7e\uff0c\u53bb\u6307\u5b9a\u7ec4\u4ef6\u540d\u5b57\uff0c\u6bd4\u8f83\u9ebb\u70e6\uff0c\u6211\u4eec\u53ef\u4ee5\u501f\u52a9<code>vite</code>\u4e2d\u7684\u63d2\u4ef6\u7b80\u5316</p> <ol> <li>\u7b2c\u4e00\u6b65\uff1a<code>npm i vite-plugin-vue-setup-extend -D</code></li> <li>\u7b2c\u4e8c\u6b65\uff1a<code>vite.config.ts</code></li> </ol> JSX<pre><code>import { defineConfig } from 'vite'\nimport VueSetupExtend from 'vite-plugin-vue-setup-extend'\n\nexport default defineConfig({\n  plugins: [ VueSetupExtend() ]\n})\n</code></pre> <ol> <li>\u7b2c\u4e09\u6b65\uff1a<code>&lt;script setup lang=\"ts\" name=\"Person\"&gt;</code></li> </ol>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#33-ref","title":"3.3. \u3010ref \u521b\u5efa\uff1a\u57fa\u672c\u7c7b\u578b\u7684\u54cd\u5e94\u5f0f\u6570\u636e\u3011","text":"<ul> <li>\u4f5c\u7528\uff1a\u5b9a\u4e49\u54cd\u5e94\u5f0f\u53d8\u91cf\uff0c\u5728vue2\u4e2d\uff0c\u53ea\u8981\u662fdata\u4e2d\u5305\u62ec\u7684\u90fd\u662f\u54cd\u5e94\u5f0f\u6570\u636e\uff0c\u5728vue3\u4e2d\uff0c\u54cd\u5e94\u5f0f\u6570\u636e\u6709\u7279\u5b9a\u8bed\u6cd5\u3002</li> <li>\u4ec0\u4e48\u662f\u54cd\u5e94\u5f0f\u6570\u636e\uff1a</li> <li>\u54cd\u5e94\u5f0f\u6570\u636e\u662f\u6307\u5f53\u6570\u636e\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u80fd\u591f\u81ea\u52a8\u89e6\u53d1\u76f8\u5173\u89c6\u56fe\u6216\u529f\u80fd\u66f4\u65b0\u7684\u6570\u636e\u7ed3\u6784\u6216\u673a\u5236\u3002\u4ee5\u4e0b\u662f\u54cd\u5e94\u5f0f\u6570\u636e\u7684\u51e0\u4e2a\u5173\u952e\u70b9\uff1a     \u81ea\u52a8\u66f4\u65b0\uff1a\u5f53\u6570\u636e\u6e90\u53d1\u751f\u6539\u53d8\u65f6\uff0c\u4f9d\u8d56\u4e8e\u8be5\u6570\u636e\u7684\u6240\u6709\u7ec4\u4ef6\u6216\u89c6\u56fe\u4f1a\u81ea\u52a8\u66f4\u65b0\uff0c\u65e0\u9700\u624b\u52a8\u5237\u65b0\u3002     \u53cc\u5411\u7ed1\u5b9a\uff1a\u5728\u67d0\u4e9b\u6846\u67b6\u4e2d\uff0c\u5982Vue.js\uff0c\u54cd\u5e94\u5f0f\u6570\u636e\u652f\u6301\u53cc\u5411\u7ed1\u5b9a\uff0c\u5373\u89c6\u56fe\u7684\u53d8\u5316\u4e5f\u4f1a\u81ea\u52a8\u53cd\u6620\u5230\u6570\u636e\u6a21\u578b\u4e2d\u3002     \u6027\u80fd\u4f18\u5316\uff1a\u901a\u8fc7\u4f9d\u8d56\u8ffd\u8e2a\u548c\u53d8\u66f4\u68c0\u6d4b\uff0c\u53ea\u66f4\u65b0\u53d7\u5f71\u54cd\u7684\u90e8\u5206\uff0c\u800c\u4e0d\u662f\u6574\u4e2a\u9875\u9762\u6216\u5e94\u7528\uff0c\u4ece\u800c\u63d0\u9ad8\u6027\u80fd\u3002     \u5e38\u89c1\u5b9e\u73b0\uff1a\u5728\u524d\u7aef\u5f00\u53d1\u4e2d\uff0c\u5e38\u89c1\u7684\u54cd\u5e94\u5f0f\u6570\u636e\u5b9e\u73b0\u5305\u62ec Vue.js\u3001Angular \u548c React\uff08\u914d\u5408\u72b6\u6001\u7ba1\u7406\u5e93\u5982 Redux\uff09\u7b49\u6846\u67b6\u3002</li> <li>\u8bed\u6cd5\uff1a<code>let xxx = ref(\u521d\u59cb\u503c)</code>\u3002</li> <li>\u8fd4\u56de\u503c\uff1a\u4e00\u4e2a<code>RefImpl</code>\u7684\u5b9e\u4f8b\u5bf9\u8c61\uff0c\u7b80\u79f0<code>ref\u5bf9\u8c61</code>\u6216<code>ref</code>\uff0c<code>ref</code>\u5bf9\u8c61\u7684<code>value</code>\u5c5e\u6027\u662f\u54cd\u5e94\u5f0f\u7684\u3002</li> <li>\u6ce8\u610f\u70b9\uff1a</li> <li><code>JS</code>\u4e2d\u64cd\u4f5c\u6570\u636e\u9700\u8981\uff1a<code>xxx.value</code>\uff0c\u4f46\u6a21\u677f\u4e2d\u4e0d\u9700\u8981<code>.value</code>\uff0c\u76f4\u63a5\u4f7f\u7528\u5373\u53ef\u3002</li> <li>\u5bf9\u4e8e<code>let name = ref('\u5f20\u4e09')</code>\u6765\u8bf4\uff0c<code>name</code>\u4e0d\u662f\u54cd\u5e94\u5f0f\u7684\uff0c<code>name.value</code>\u662f\u54cd\u5e94\u5f0f\u7684\u3002</li> </ul> Vue<pre><code>&lt;template&gt;\n  &lt;div class=\"person\"&gt;\n    &lt;h2&gt;\u59d3\u540d\uff1a{{name}}&lt;/h2&gt;\n    &lt;h2&gt;\u5e74\u9f84\uff1a{{age}}&lt;/h2&gt;\n    &lt;button @click=\"changeName\"&gt;\u4fee\u6539\u540d\u5b57&lt;/button&gt;\n    &lt;button @click=\"changeAge\"&gt;\u5e74\u9f84+1&lt;/button&gt;\n    &lt;button @click=\"showTel\"&gt;\u70b9\u6211\u67e5\u770b\u8054\u7cfb\u65b9\u5f0f&lt;/button&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script setup lang=\"ts\" name=\"Person\"&gt;\n  import {ref} from 'vue'\n  // name\u548cage\u662f\u4e00\u4e2aRefImpl\u7684\u5b9e\u4f8b\u5bf9\u8c61\uff0c\u7b80\u79f0ref\u5bf9\u8c61\uff0c\u5b83\u4eec\u7684value\u5c5e\u6027\u662f\u54cd\u5e94\u5f0f\u7684\u3002\n  let name = ref('\u5f20\u4e09')\n  let age = ref(18)\n  // tel\u5c31\u662f\u4e00\u4e2a\u666e\u901a\u7684\u5b57\u7b26\u4e32\uff0c\u4e0d\u662f\u54cd\u5e94\u5f0f\u7684\n  let tel = '13888888888'\n\n  function changeName(){\n    // JS\u4e2d\u64cd\u4f5cref\u5bf9\u8c61\u65f6\u5019\u9700\u8981.value\n    name.value = '\u674e\u56db'\n    console.log(name.value)\n\n    // \u6ce8\u610f\uff1aname\u4e0d\u662f\u54cd\u5e94\u5f0f\u7684\uff0cname.value\u662f\u54cd\u5e94\u5f0f\u7684\uff0c\u6240\u4ee5\u5982\u4e0b\u4ee3\u7801\u5e76\u4e0d\u4f1a\u5f15\u8d77\u9875\u9762\u7684\u66f4\u65b0\u3002\n    // name = ref('zhang-san')\n  }\n  function changeAge(){\n    // JS\u4e2d\u64cd\u4f5cref\u5bf9\u8c61\u65f6\u5019\u9700\u8981.value\n    age.value += 1 \n    console.log(age.value)\n  }\n  function showTel(){\n    alert(tel)\n  }\n&lt;/script&gt;\n</code></pre>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#34-reactive","title":"3.4. \u3010reactive \u521b\u5efa\uff1a\u5bf9\u8c61\u7c7b\u578b\u7684\u54cd\u5e94\u5f0f\u6570\u636e\u3011","text":"<ul> <li>\u4f5c\u7528\uff1a\u5b9a\u4e49\u4e00\u4e2a\u54cd\u5e94\u5f0f\u5bf9\u8c61\uff08\u57fa\u672c\u7c7b\u578b\u4e0d\u8981\u7528\u5b83\uff0c\u8981\u7528<code>ref</code>\uff0c\u5426\u5219\u62a5\u9519\uff09</li> <li>\u8bed\u6cd5\uff1a<code>let \u54cd\u5e94\u5f0f\u5bf9\u8c61= reactive(\u6e90\u5bf9\u8c61)</code>\u3002</li> <li>\u8fd4\u56de\u503c\uff1a\u4e00\u4e2a<code>Proxy</code>\u7684\u5b9e\u4f8b\u5bf9\u8c61\uff0c\u7b80\u79f0\uff1a\u54cd\u5e94\u5f0f\u5bf9\u8c61\u3002</li> <li>\u6ce8\u610f\u70b9\uff1a<code>reactive</code>\u5b9a\u4e49\u7684\u54cd\u5e94\u5f0f\u6570\u636e\u662f\u201c\u6df1\u5c42\u6b21\u201d\u7684\u3002</li> </ul> Vue<pre><code>&lt;template&gt;\n  &lt;div class=\"person\"&gt;\n    &lt;h2&gt;\u6c7d\u8f66\u4fe1\u606f\uff1a\u4e00\u53f0{{ car.brand }}\u6c7d\u8f66\uff0c\u4ef7\u503c{{ car.price }}\u4e07&lt;/h2&gt;\n    &lt;h2&gt;\u6e38\u620f\u5217\u8868\uff1a&lt;/h2&gt;\n    &lt;ul&gt;\n      &lt;li v-for=\"g in games\" :key=\"g.id\"&gt;{{ g.name }}&lt;/li&gt;\n    &lt;/ul&gt;\n    &lt;h2&gt;\u6d4b\u8bd5\uff1a{{obj.a.b.c.d}}&lt;/h2&gt;\n    &lt;button @click=\"changeCarPrice\"&gt;\u4fee\u6539\u6c7d\u8f66\u4ef7\u683c&lt;/button&gt;\n    &lt;button @click=\"changeFirstGame\"&gt;\u4fee\u6539\u7b2c\u4e00\u6e38\u620f&lt;/button&gt;\n    &lt;button @click=\"test\"&gt;\u6d4b\u8bd5&lt;/button&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=\"ts\" setup name=\"Person\"&gt;\nimport { reactive } from 'vue'\n\n// \u6570\u636e\nlet car = reactive({ brand: '\u5954\u9a70', price: 100 })\nlet games = reactive([\n  { id: 'ahsgdyfa01', name: '\u82f1\u96c4\u8054\u76df' },\n  { id: 'ahsgdyfa02', name: '\u738b\u8005\u8363\u8000' },\n  { id: 'ahsgdyfa03', name: '\u539f\u795e' }\n])\nlet obj = reactive({\n  a:{\n    b:{\n      c:{\n        d:666\n      }\n    }\n  }\n})\n\nfunction changeCarPrice() {\n  car.price += 10\n}\nfunction changeFirstGame() {\n  games[0].name = '\u6d41\u661f\u8774\u8776\u5251'\n}\nfunction test(){\n  obj.a.b.c.d = 999\n}\n&lt;/script&gt;\n</code></pre>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#35-ref","title":"3.5. \u3010ref \u521b\u5efa\uff1a\u5bf9\u8c61\u7c7b\u578b\u7684\u54cd\u5e94\u5f0f\u6570\u636e\u3011","text":"<ul> <li>\u5176\u5b9e<code>ref</code>\u63a5\u6536\u7684\u6570\u636e\u53ef\u4ee5\u662f\uff1a\u57fa\u672c\u7c7b\u578b\u3001\u5bf9\u8c61\u7c7b\u578b\u3002</li> <li>\u82e5<code>ref</code>\u63a5\u6536\u7684\u662f\u5bf9\u8c61\u7c7b\u578b\uff0c\u5185\u90e8\u5176\u5b9e\u4e5f\u662f\u8c03\u7528\u4e86<code>reactive</code>\u51fd\u6570\u3002</li> </ul> Vue<pre><code>&lt;template&gt;\n  &lt;div class=\"person\"&gt;\n    &lt;h2&gt;\u6c7d\u8f66\u4fe1\u606f\uff1a\u4e00\u53f0{{ car.brand }}\u6c7d\u8f66\uff0c\u4ef7\u503c{{ car.price }}\u4e07&lt;/h2&gt;\n    &lt;h2&gt;\u6e38\u620f\u5217\u8868\uff1a&lt;/h2&gt;\n    &lt;ul&gt;\n      &lt;li v-for=\"g in games\" :key=\"g.id\"&gt;{{ g.name }}&lt;/li&gt;\n    &lt;/ul&gt;\n    &lt;h2&gt;\u6d4b\u8bd5\uff1a{{obj.a.b.c.d}}&lt;/h2&gt;\n    &lt;button @click=\"changeCarPrice\"&gt;\u4fee\u6539\u6c7d\u8f66\u4ef7\u683c&lt;/button&gt;\n    &lt;button @click=\"changeFirstGame\"&gt;\u4fee\u6539\u7b2c\u4e00\u6e38\u620f&lt;/button&gt;\n    &lt;button @click=\"test\"&gt;\u6d4b\u8bd5&lt;/button&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=\"ts\" setup name=\"Person\"&gt;\nimport { ref } from 'vue'\n\n// \u6570\u636e\nlet car = ref({ brand: '\u5954\u9a70', price: 100 })\nlet games = ref([\n  { id: 'ahsgdyfa01', name: '\u82f1\u96c4\u8054\u76df' },\n  { id: 'ahsgdyfa02', name: '\u738b\u8005\u8363\u8000' },\n  { id: 'ahsgdyfa03', name: '\u539f\u795e' }\n])\nlet obj = ref({\n  a:{\n    b:{\n      c:{\n        d:666\n      }\n    }\n  }\n})\n\nconsole.log(car)\n\nfunction changeCarPrice() {\n  car.value.price += 10\n}\nfunction changeFirstGame() {\n  games.value[0].name = '\u6d41\u661f\u8774\u8776\u5251'\n}\nfunction test(){\n  obj.value.a.b.c.d = 999\n}\n&lt;/script&gt;\n</code></pre>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#36-ref-reactive","title":"3.6. \u3010ref \u5bf9\u6bd4 reactive\u3011","text":"<p>\u5b8f\u89c2\u89d2\u5ea6\u770b\uff1a</p> <ol> <li><code>ref</code>\u7528\u6765\u5b9a\u4e49\uff1a\u57fa\u672c\u7c7b\u578b\u6570\u636e\u3001\u5bf9\u8c61\u7c7b\u578b\u6570\u636e\uff1b</li> <li><code>reactive</code>\u7528\u6765\u5b9a\u4e49\uff1a\u5bf9\u8c61\u7c7b\u578b\u6570\u636e\u3002</li> </ol> <ul> <li>\u533a\u522b\uff1a</li> </ul> <ol> <li> <p><code>ref</code>\u521b\u5efa\u7684\u53d8\u91cf\u5fc5\u987b\u4f7f\u7528<code>.value</code>\uff08\u53ef\u4ee5\u4f7f\u7528<code>volar</code>\u63d2\u4ef6\u81ea\u52a8\u6dfb\u52a0<code>.value</code>\uff09\u3002</p> </li> <li> <p><code>reactive</code>\u91cd\u65b0\u5206\u914d\u4e00\u4e2a\u65b0\u5bf9\u8c61\uff0c\u4f1a\u5931\u53bb\u54cd\u5e94\u5f0f\uff08\u53ef\u4ee5\u4f7f\u7528<code>Object.assign</code>\u53bb\u6574\u4f53\u66ff\u6362\uff09\u3002\u6bd4\u5982\u8bf4\u5f53\u540e\u7aef\u8fd4\u56de\u5bf9\u8c61\u5b57\u6bb5\u8fc7\u957f\uff0c\u4e3a\u4e86\u65b9\u4fbf\u9700\u8981\u76f4\u63a5\u91cd\u65b0\u5206\u914d\u5bf9\u8c61\u7684\u65f6\u5019\uff0c\u5219\u9700\u8981\u4f7f\u7528\u4f7f\u7528Object.assign\u8fdb\u884c\u6d45\u62f7\u8d1d\u6765\u8fbe\u6210\u6548\u679c\u3002</p> </li> <li>reactive\u4e2d\u5305\u7740\u7684ref\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\uff0c\u4e0d\u7528\u62c6\u5305.</li> </ol> <ul> <li>\u4f7f\u7528\u539f\u5219\uff1a</li> </ul> <ol> <li>\u82e5\u9700\u8981\u4e00\u4e2a\u57fa\u672c\u7c7b\u578b\u7684\u54cd\u5e94\u5f0f\u6570\u636e\uff0c\u5fc5\u987b\u4f7f\u7528<code>ref</code>\u3002</li> <li>\u82e5\u9700\u8981\u4e00\u4e2a\u54cd\u5e94\u5f0f\u5bf9\u8c61\uff0c\u5c42\u7ea7\u4e0d\u6df1\uff0c<code>ref</code>\u3001<code>reactive</code>\u90fd\u53ef\u4ee5\u3002</li> <li>\u82e5\u9700\u8981\u4e00\u4e2a\u54cd\u5e94\u5f0f\u5bf9\u8c61\uff0c\u4e14\u5c42\u7ea7\u8f83\u6df1\uff0c\u63a8\u8350\u4f7f\u7528<code>reactive</code>\u3002</li> </ol>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#37-torefs-toref","title":"3.7. \u3010toRefs \u4e0e toRef\u3011","text":"<ul> <li>\u4f5c\u7528\uff1a\u5c06\u4e00\u4e2a\u54cd\u5e94\u5f0f\u5bf9\u8c61\u4e2d\u7684\u6bcf\u4e00\u4e2a\u5c5e\u6027\uff0c\u8f6c\u6362\u4e3a<code>ref</code>\u5bf9\u8c61\u3002</li> <li>\u5907\u6ce8\uff1a<code>toRefs</code>\u4e0e<code>toRef</code>\u529f\u80fd\u4e00\u81f4\uff0c\u4f46<code>toRefs</code>\u53ef\u4ee5\u6279\u91cf\u8f6c\u6362\u3002</li> <li>\u8bed\u6cd5\u5982\u4e0b\uff1a</li> </ul> Vue<pre><code>&lt;template&gt;\n  &lt;div class=\"person\"&gt;\n    &lt;h2&gt;\u59d3\u540d\uff1a{{person.name}}&lt;/h2&gt;\n    &lt;h2&gt;\u5e74\u9f84\uff1a{{person.age}}&lt;/h2&gt;\n    &lt;h2&gt;\u6027\u522b\uff1a{{person.gender}}&lt;/h2&gt;\n    &lt;button @click=\"changeName\"&gt;\u4fee\u6539\u540d\u5b57&lt;/button&gt;\n    &lt;button @click=\"changeAge\"&gt;\u4fee\u6539\u5e74\u9f84&lt;/button&gt;\n    &lt;button @click=\"changeGender\"&gt;\u4fee\u6539\u6027\u522b&lt;/button&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=\"ts\" setup name=\"Person\"&gt;\n  import {ref,reactive,toRefs,toRef} from 'vue'\n\n  // \u6570\u636e\n  let person = reactive({name:'\u5f20\u4e09', age:18, gender:'\u7537'})\n\n  // \u901a\u8fc7toRefs\u5c06person\u5bf9\u8c61\u4e2d\u7684n\u4e2a\u5c5e\u6027\u6279\u91cf\u53d6\u51fa\uff0c\u4e14\u4f9d\u7136\u4fdd\u6301\u54cd\u5e94\u5f0f\u7684\u80fd\u529b\n  let {name,gender} =  toRefs(person)\n\n  // \u901a\u8fc7toRef\u5c06person\u5bf9\u8c61\u4e2d\u7684gender\u5c5e\u6027\u53d6\u51fa\uff0c\u4e14\u4f9d\u7136\u4fdd\u6301\u54cd\u5e94\u5f0f\u7684\u80fd\u529b\n  let age = toRef(person,'age')\n\n  // \u65b9\u6cd5\n  function changeName(){\n    name.value += '~'\n  }\n  function changeAge(){\n    age.value += 1\n  }\n  function changeGender(){\n    gender.value = '\u5973'\n  }\n&lt;/script&gt;\n</code></pre>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#38-computed","title":"3.8. \u3010computed\u3011","text":"<p>\u4f5c\u7528\uff1a\u6839\u636e\u5df2\u6709\u6570\u636e\u8ba1\u7b97\u51fa\u65b0\u6570\u636e\uff08\u548c<code>Vue2</code>\u4e2d\u7684<code>computed</code>\u4f5c\u7528\u4e00\u81f4\uff09\u3002</p> Vue<pre><code>&lt;template&gt;\n  &lt;div class=\"person\"&gt;\n    \u59d3\uff1a&lt;input type=\"text\" v-model=\"firstName\"&gt; &lt;br&gt;\n    \u540d\uff1a&lt;input type=\"text\" v-model=\"lastName\"&gt; &lt;br&gt;\n    \u5168\u540d\uff1a&lt;span&gt;{{fullName}}&lt;/span&gt; &lt;br&gt;\n    &lt;button @click=\"changeFullName\"&gt;\u5168\u540d\u6539\u4e3a\uff1ali-si&lt;/button&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script setup lang=\"ts\" name=\"App\"&gt;\n  import {ref,computed} from 'vue'\n\n  let firstName = ref('zhang')\n  let lastName = ref('san')\n\n  // \u8ba1\u7b97\u5c5e\u6027\u2014\u2014\u53ea\u8bfb\u53d6\uff0c\u4e0d\u4fee\u6539\n  /* let fullName = computed(()=&gt;{\n    return firstName.value + '-' + lastName.value\n  }) */\n\n\n  // \u8ba1\u7b97\u5c5e\u6027\u2014\u2014\u65e2\u8bfb\u53d6\u53c8\u4fee\u6539\n  let fullName = computed({\n    // \u8bfb\u53d6\n    get(){\n      return firstName.value + '-' + lastName.value\n    },\n    // \u4fee\u6539\n    set(val){\n      console.log('\u6709\u4eba\u4fee\u6539\u4e86fullName',val)\n      firstName.value = val.split('-')[0]\n      lastName.value = val.split('-')[1]\n    }\n  })\n\n  function changeFullName(){\n    fullName.value = 'li-si'\n  } \n&lt;/script&gt;\n</code></pre>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#39watch","title":"3.9.\u3010watch\u3011","text":"<ul> <li>\u4f5c\u7528\uff1a\u76d1\u89c6\u6570\u636e\u7684\u53d8\u5316\uff08\u548c<code>Vue2</code>\u4e2d\u7684<code>watch</code>\u4f5c\u7528\u4e00\u81f4\uff0c\u4f46\u662f\u5199\u6cd5\u4e0d\u4e00\u6837\uff09</li> <li>\u7279\u70b9\uff1a<code>Vue3</code>\u4e2d\u7684<code>watch</code>\u53ea\u80fd\u76d1\u89c6\u4ee5\u4e0b\u56db\u79cd\u6570\u636e\uff1a</li> </ul> <ol> <li><code>ref</code>\u5b9a\u4e49\u7684\u6570\u636e\u3002</li> <li><code>reactive</code>\u5b9a\u4e49\u7684\u6570\u636e\u3002</li> <li>\u51fd\u6570\u8fd4\u56de\u4e00\u4e2a\u503c\uff08\u76d1\u89c6\u4e00\u4e2a<code>getter</code>\u51fd\u6570\uff09\u3002</li> <li>\u4e00\u4e2a\u5305\u542b\u4e0a\u8ff0\u5185\u5bb9\u7684\u6570\u7ec4\u3002</li> </ol> <p>\u6211\u4eec\u5728<code>Vue3</code>\u4e2d\u4f7f\u7528<code>watch</code>\u7684\u65f6\u5019\uff0c\u901a\u5e38\u4f1a\u9047\u5230\u4ee5\u4e0b\u51e0\u79cd\u60c5\u51b5\uff1a</p>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#_1","title":"* \u60c5\u51b5\u4e00","text":"<p>\u76d1\u89c6<code>ref</code>\u5b9a\u4e49\u7684\u3010\u57fa\u672c\u7c7b\u578b\u3011\u6570\u636e\uff1a\u76f4\u63a5\u5199\u6570\u636e\u540d\u5373\u53ef\uff0c\u76d1\u89c6\u7684\u662f\u5176<code>value</code>\u503c\u7684\u6539\u53d8\u3002</p> <p>\u6570\u636e\u7c7b\u578b\u53ef\u80fd\u662f\u57fa\u672c\u7c7b\u578b\uff0c\u4e5f\u53ef\u4ee5\u662f\u5f15\u7528\u7c7b\u578b</p> Vue<pre><code>&lt;template&gt;\n  &lt;div class=\"person\"&gt;\n    &lt;h1&gt;\u60c5\u51b5\u4e00\uff1a\u76d1\u89c6\u3010ref\u3011\u5b9a\u4e49\u7684\u3010\u57fa\u672c\u7c7b\u578b\u3011\u6570\u636e&lt;/h1&gt;\n    &lt;h2&gt;\u5f53\u524d\u6c42\u548c\u4e3a\uff1a{{sum}}&lt;/h2&gt;\n    &lt;button @click=\"changeSum\"&gt;\u70b9\u6211sum+1&lt;/button&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=\"ts\" setup name=\"Person\"&gt;\n  import {ref,watch} from 'vue'\n  // \u6570\u636e\n  let sum = ref(0)\n  // \u65b9\u6cd5\n  function changeSum(){\n    sum.value += 1\n  }\n  // \u76d1\u89c6\uff0c\u60c5\u51b5\u4e00\uff1a\u76d1\u89c6\u3010ref\u3011\u5b9a\u4e49\u7684\u3010\u57fa\u672c\u7c7b\u578b\u3011\u6570\u636e\n  const stopWatch = watch(sum,(newValue,oldValue)=&gt;{\n    console.log('sum\u53d8\u5316\u4e86',newValue,oldValue)\n    if(newValue &gt;= 10){\n      stopWatch()\n    }\n  })\n&lt;/script&gt;\n</code></pre>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#_2","title":"* \u60c5\u51b5\u4e8c","text":"<p>\u76d1\u89c6<code>ref</code>\u5b9a\u4e49\u7684\u3010\u5bf9\u8c61\u7c7b\u578b\u3011\u6570\u636e\uff1a\u76f4\u63a5\u5199\u6570\u636e\u540d\uff0c\u76d1\u89c6\u7684\u662f\u5bf9\u8c61\u7684\u3010\u5730\u5740\u503c\u3011\uff0c\u82e5\u60f3\u76d1\u89c6\u5bf9\u8c61\u5185\u90e8\u7684\u6570\u636e\uff0c\u8981\u624b\u52a8\u5f00\u542f\u6df1\u5ea6\u76d1\u89c6\u3002</p> <p>\u6ce8\u610f\uff1a</p> <ul> <li>\u82e5\u4fee\u6539\u7684\u662f<code>ref</code>\u5b9a\u4e49\u7684\u5bf9\u8c61\u4e2d\u7684\u5c5e\u6027\uff0c<code>newValue</code> \u548c <code>oldValue</code> \u90fd\u662f\u65b0\u503c\uff0c\u56e0\u4e3a\u5b83\u4eec\u662f\u540c\u4e00\u4e2a\u5bf9\u8c61\u3002</li> <li>\u82e5\u4fee\u6539\u6574\u4e2a<code>ref</code>\u5b9a\u4e49\u7684\u5bf9\u8c61\uff0c<code>newValue</code> \u662f\u65b0\u503c\uff0c <code>oldValue</code> \u662f\u65e7\u503c\uff0c\u56e0\u4e3a\u4e0d\u662f\u540c\u4e00\u4e2a\u5bf9\u8c61\u4e86\u3002</li> </ul> Vue<pre><code>&lt;template&gt;\n  &lt;div class=\"person\"&gt;\n    &lt;h1&gt;\u60c5\u51b5\u4e8c\uff1a\u76d1\u89c6\u3010ref\u3011\u5b9a\u4e49\u7684\u3010\u5bf9\u8c61\u7c7b\u578b\u3011\u6570\u636e&lt;/h1&gt;\n    &lt;h2&gt;\u59d3\u540d\uff1a{{ person.name }}&lt;/h2&gt;\n    &lt;h2&gt;\u5e74\u9f84\uff1a{{ person.age }}&lt;/h2&gt;\n    &lt;button @click=\"changeName\"&gt;\u4fee\u6539\u540d\u5b57&lt;/button&gt;\n    &lt;button @click=\"changeAge\"&gt;\u4fee\u6539\u5e74\u9f84&lt;/button&gt;\n    &lt;button @click=\"changePerson\"&gt;\u4fee\u6539\u6574\u4e2a\u4eba&lt;/button&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=\"ts\" setup name=\"Person\"&gt;\n  import {ref,watch} from 'vue'\n  // \u6570\u636e\n  let person = ref({\n    name:'\u5f20\u4e09',\n    age:18\n  })\n  // \u65b9\u6cd5\n  function changeName(){\n    person.value.name += '~'\n  }\n  function changeAge(){\n    person.value.age += 1\n  }\n  function changePerson(){\n    person.value = {name:'\u674e\u56db',age:90}\n  }\n  /* \n    \u76d1\u89c6\uff0c\u60c5\u51b5\u4e00\uff1a\u76d1\u89c6\u3010ref\u3011\u5b9a\u4e49\u7684\u3010\u5bf9\u8c61\u7c7b\u578b\u3011\u6570\u636e\uff0c\u76d1\u89c6\u7684\u662f\u5bf9\u8c61\u7684\u5730\u5740\u503c\uff0c\u82e5\u60f3\u76d1\u89c6\u5bf9\u8c61\u5185\u90e8\u5c5e\u6027\u7684\u53d8\u5316\uff0c\u9700\u8981\u624b\u52a8\u5f00\u542f\u6df1\u5ea6\u76d1\u89c6\n    watch\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\uff1a\u88ab\u76d1\u89c6\u7684\u6570\u636e\n    watch\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\uff1a\u76d1\u89c6\u7684\u56de\u8c03\n    watch\u7684\u7b2c\u4e09\u4e2a\u53c2\u6570\u662f\uff1a\u914d\u7f6e\u5bf9\u8c61\uff08deep\u3001immediate\u7b49\u7b49.....\uff09 \n  */\n  watch(person,(newValue,oldValue)=&gt;{\n    console.log('person\u53d8\u5316\u4e86',newValue,oldValue)\n  },{deep:true})\n\n&lt;/script&gt;\n</code></pre>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#_3","title":"*  \u60c5\u51b5\u4e09","text":"<p>\u76d1\u89c6<code>reactive</code>\u5b9a\u4e49\u7684\u3010\u5bf9\u8c61\u7c7b\u578b\u3011\u6570\u636e\uff0c\u4e14\u9ed8\u8ba4\u5f00\u542f\u4e86\u6df1\u5ea6\u76d1\u89c6\u3002</p> Vue<pre><code>&lt;template&gt;\n  &lt;div class=\"person\"&gt;\n    &lt;h1&gt;\u60c5\u51b5\u4e09\uff1a\u76d1\u89c6\u3010reactive\u3011\u5b9a\u4e49\u7684\u3010\u5bf9\u8c61\u7c7b\u578b\u3011\u6570\u636e&lt;/h1&gt;\n    &lt;h2&gt;\u59d3\u540d\uff1a{{ person.name }}&lt;/h2&gt;\n    &lt;h2&gt;\u5e74\u9f84\uff1a{{ person.age }}&lt;/h2&gt;\n    &lt;button @click=\"changeName\"&gt;\u4fee\u6539\u540d\u5b57&lt;/button&gt;\n    &lt;button @click=\"changeAge\"&gt;\u4fee\u6539\u5e74\u9f84&lt;/button&gt;\n    &lt;button @click=\"changePerson\"&gt;\u4fee\u6539\u6574\u4e2a\u4eba&lt;/button&gt;\n    &lt;hr&gt;\n    &lt;h2&gt;\u6d4b\u8bd5\uff1a{{obj.a.b.c}}&lt;/h2&gt;\n    &lt;button @click=\"test\"&gt;\u4fee\u6539obj.a.b.c&lt;/button&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=\"ts\" setup name=\"Person\"&gt;\n  import {reactive,watch} from 'vue'\n  // \u6570\u636e\n  let person = reactive({\n    name:'\u5f20\u4e09',\n    age:18\n  })\n  let obj = reactive({\n    a:{\n      b:{\n        c:666\n      }\n    }\n  })\n  // \u65b9\u6cd5\n  function changeName(){\n    person.name += '~'\n  }\n  function changeAge(){\n    person.age += 1\n  }\n  function changePerson(){\n    Object.assign(person,{name:'\u674e\u56db',age:80})\n  }\n  function test(){\n    obj.a.b.c = 888\n  }\n\n  // \u76d1\u89c6\uff0c\u60c5\u51b5\u4e09\uff1a\u76d1\u89c6\u3010reactive\u3011\u5b9a\u4e49\u7684\u3010\u5bf9\u8c61\u7c7b\u578b\u3011\u6570\u636e\uff0c\u4e14\u9ed8\u8ba4\u662f\u5f00\u542f\u6df1\u5ea6\u76d1\u89c6\u7684\n  watch(person,(newValue,oldValue)=&gt;{\n    console.log('person\u53d8\u5316\u4e86',newValue,oldValue)\n  })\n  watch(obj,(newValue,oldValue)=&gt;{\n    console.log('Obj\u53d8\u5316\u4e86',newValue,oldValue)\n  })\n&lt;/script&gt;\n</code></pre>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#_4","title":"* \u60c5\u51b5\u56db","text":"<p>\u76d1\u89c6<code>ref</code>\u6216<code>reactive</code>\u5b9a\u4e49\u7684\u3010\u5bf9\u8c61\u7c7b\u578b\u3011\u6570\u636e\u4e2d\u7684\u67d0\u4e2a\u5c5e\u6027\uff0c\u6ce8\u610f\u70b9\u5982\u4e0b\uff1a</p> <ol> <li>\u82e5\u8be5\u5c5e\u6027\u503c\u4e0d\u662f\u3010\u5bf9\u8c61\u7c7b\u578b\u3011\uff0c\u9700\u8981\u5199\u6210\u51fd\u6570\u5f62\u5f0f\u3002</li> <li>\u82e5\u8be5\u5c5e\u6027\u503c\u662f\u4f9d\u7136\u662f\u3010\u5bf9\u8c61\u7c7b\u578b\u3011\uff0c\u53ef\u76f4\u63a5\u7f16\uff0c\u4e5f\u53ef\u5199\u6210\u51fd\u6570\uff0c\u5efa\u8bae\u5199\u6210\u51fd\u6570\u3002</li> </ol> <p>\u7ed3\u8bba\uff1a\u76d1\u89c6\u7684\u8981\u662f\u5bf9\u8c61\u91cc\u7684\u5c5e\u6027\uff0c\u90a3\u4e48\u6700\u597d\u5199\u51fd\u6570\u5f0f\uff0c\u6ce8\u610f\u70b9\uff1a\u82e5\u662f\u5bf9\u8c61\u76d1\u89c6\u7684\u662f\u5730\u5740\u503c\uff0c\u9700\u8981\u5173\u6ce8\u5bf9\u8c61\u5185\u90e8\uff0c\u9700\u8981\u624b\u52a8\u5f00\u542f\u6df1\u5ea6\u76d1\u89c6\u3002</p> Vue<pre><code>&lt;template&gt;\n  &lt;div class=\"person\"&gt;\n    &lt;h1&gt;\u60c5\u51b5\u56db\uff1a\u76d1\u89c6\u3010ref\u3011\u6216\u3010reactive\u3011\u5b9a\u4e49\u7684\u3010\u5bf9\u8c61\u7c7b\u578b\u3011\u6570\u636e\u4e2d\u7684\u67d0\u4e2a\u5c5e\u6027&lt;/h1&gt;\n    &lt;h2&gt;\u59d3\u540d\uff1a{{ person.name }}&lt;/h2&gt;\n    &lt;h2&gt;\u5e74\u9f84\uff1a{{ person.age }}&lt;/h2&gt;\n    &lt;h2&gt;\u6c7d\u8f66\uff1a{{ person.car.c1 }}\u3001{{ person.car.c2 }}&lt;/h2&gt;\n    &lt;button @click=\"changeName\"&gt;\u4fee\u6539\u540d\u5b57&lt;/button&gt;\n    &lt;button @click=\"changeAge\"&gt;\u4fee\u6539\u5e74\u9f84&lt;/button&gt;\n    &lt;button @click=\"changeC1\"&gt;\u4fee\u6539\u7b2c\u4e00\u53f0\u8f66&lt;/button&gt;\n    &lt;button @click=\"changeC2\"&gt;\u4fee\u6539\u7b2c\u4e8c\u53f0\u8f66&lt;/button&gt;\n    &lt;button @click=\"changeCar\"&gt;\u4fee\u6539\u6574\u4e2a\u8f66&lt;/button&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=\"ts\" setup name=\"Person\"&gt;\n  import {reactive,watch} from 'vue'\n\n  // \u6570\u636e\n  let person = reactive({\n    name:'\u5f20\u4e09',\n    age:18,\n    car:{\n      c1:'\u5954\u9a70',\n      c2:'\u5b9d\u9a6c'\n    }\n  })\n  // \u65b9\u6cd5\n  function changeName(){\n    person.name += '~'\n  }\n  function changeAge(){\n    person.age += 1\n  }\n  function changeC1(){\n    person.car.c1 = '\u5965\u8fea'\n  }\n  function changeC2(){\n    person.car.c2 = '\u5927\u4f17'\n  }\n  function changeCar(){\n    person.car = {c1:'\u96c5\u8fea',c2:'\u7231\u739b'}\n  }\n\n  // \u76d1\u89c6\uff0c\u60c5\u51b5\u56db\uff1a\u76d1\u89c6\u54cd\u5e94\u5f0f\u5bf9\u8c61\u4e2d\u7684\u67d0\u4e2a\u5c5e\u6027\uff0c\u4e14\u8be5\u5c5e\u6027\u662f\u57fa\u672c\u7c7b\u578b\u7684\uff0c\u8981\u5199\u6210\u51fd\u6570\u5f0f\n  /* watch(()=&gt; person.name,(newValue,oldValue)=&gt;{\n    console.log('person.name\u53d8\u5316\u4e86',newValue,oldValue)\n  }) */\n\n  // \u76d1\u89c6\uff0c\u60c5\u51b5\u56db\uff1a\u76d1\u89c6\u54cd\u5e94\u5f0f\u5bf9\u8c61\u4e2d\u7684\u67d0\u4e2a\u5c5e\u6027\uff0c\u4e14\u8be5\u5c5e\u6027\u662f\u5bf9\u8c61\u7c7b\u578b\u7684\uff0c\u53ef\u4ee5\u76f4\u63a5\u5199\uff0c\u4e5f\u80fd\u5199\u51fd\u6570\uff0c\u66f4\u63a8\u8350\u5199\u51fd\u6570\n  watch(()=&gt;person.car,(newValue,oldValue)=&gt;{\n    console.log('person.car\u53d8\u5316\u4e86',newValue,oldValue)\n  },{deep:true})\n&lt;/script&gt;\n</code></pre>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#_5","title":"* \u60c5\u51b5\u4e94","text":"<p>\u76d1\u89c6\u4e0a\u8ff0\u7684\u591a\u4e2a\u6570\u636e</p> Vue<pre><code>&lt;template&gt;\n  &lt;div class=\"person\"&gt;\n    &lt;h1&gt;\u60c5\u51b5\u4e94\uff1a\u76d1\u89c6\u4e0a\u8ff0\u7684\u591a\u4e2a\u6570\u636e&lt;/h1&gt;\n    &lt;h2&gt;\u59d3\u540d\uff1a{{ person.name }}&lt;/h2&gt;\n    &lt;h2&gt;\u5e74\u9f84\uff1a{{ person.age }}&lt;/h2&gt;\n    &lt;h2&gt;\u6c7d\u8f66\uff1a{{ person.car.c1 }}\u3001{{ person.car.c2 }}&lt;/h2&gt;\n    &lt;button @click=\"changeName\"&gt;\u4fee\u6539\u540d\u5b57&lt;/button&gt;\n    &lt;button @click=\"changeAge\"&gt;\u4fee\u6539\u5e74\u9f84&lt;/button&gt;\n    &lt;button @click=\"changeC1\"&gt;\u4fee\u6539\u7b2c\u4e00\u53f0\u8f66&lt;/button&gt;\n    &lt;button @click=\"changeC2\"&gt;\u4fee\u6539\u7b2c\u4e8c\u53f0\u8f66&lt;/button&gt;\n    &lt;button @click=\"changeCar\"&gt;\u4fee\u6539\u6574\u4e2a\u8f66&lt;/button&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=\"ts\" setup name=\"Person\"&gt;\n  import {reactive,watch} from 'vue'\n\n  // \u6570\u636e\n  let person = reactive({\n    name:'\u5f20\u4e09',\n    age:18,\n    car:{\n      c1:'\u5954\u9a70',\n      c2:'\u5b9d\u9a6c'\n    }\n  })\n  // \u65b9\u6cd5\n  function changeName(){\n    person.name += '~'\n  }\n  function changeAge(){\n    person.age += 1\n  }\n  function changeC1(){\n    person.car.c1 = '\u5965\u8fea'\n  }\n  function changeC2(){\n    person.car.c2 = '\u5927\u4f17'\n  }\n  function changeCar(){\n    person.car = {c1:'\u96c5\u8fea',c2:'\u7231\u739b'}\n  }\n\n  // \u76d1\u89c6\uff0c\u60c5\u51b5\u4e94\uff1a\u76d1\u89c6\u4e0a\u8ff0\u7684\u591a\u4e2a\u6570\u636e\n  watch([()=&gt;person.name,person.car],(newValue,oldValue)=&gt;{\n    console.log('person.car\u53d8\u5316\u4e86',newValue,oldValue)\n  },{deep:true})\n\n&lt;/script&gt;\n</code></pre>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#310-watcheffect","title":"3.10. \u3010watchEffect\u3011","text":"<ul> <li>\u5b98\u7f51\uff1a\u7acb\u5373\u8fd0\u884c\u4e00\u4e2a\u51fd\u6570\uff0c\u540c\u65f6\u54cd\u5e94\u5f0f\u5730\u8ffd\u8e2a\u5176\u4f9d\u8d56\uff0c\u5e76\u5728\u4f9d\u8d56\u66f4\u6539\u65f6\u91cd\u65b0\u6267\u884c\u8be5\u51fd\u6570\u3002</li> <li><code>watch</code>\u5bf9\u6bd4<code>watchEffect</code></li> </ul> <ol> <li>\u90fd\u80fd\u76d1\u542c\u54cd\u5e94\u5f0f\u6570\u636e\u7684\u53d8\u5316\uff0c\u4e0d\u540c\u7684\u662f\u76d1\u542c\u6570\u636e\u53d8\u5316\u7684\u65b9\u5f0f\u4e0d\u540c</li> <li><code>watch</code>\uff1a\u8981\u660e\u786e\u6307\u51fa\u76d1\u89c6\u7684\u6570\u636e</li> <li> <p><code>watchEffect</code>\uff1a\u4e0d\u7528\u660e\u786e\u6307\u51fa\u76d1\u89c6\u7684\u6570\u636e\uff08\u51fd\u6570\u4e2d\u7528\u5230\u54ea\u4e9b\u5c5e\u6027\uff0c\u90a3\u5c31\u76d1\u89c6\u54ea\u4e9b\u5c5e\u6027\uff09\u3002</p> </li> <li> <p>\u793a\u4f8b\u4ee3\u7801\uff1a</p> </li> </ol> Vue<pre><code>&lt;template&gt;\n  &lt;div class=\"person\"&gt;\n    &lt;h1&gt;\u9700\u6c42\uff1a\u6c34\u6e29\u8fbe\u523050\u2103\uff0c\u6216\u6c34\u4f4d\u8fbe\u523020cm\uff0c\u5219\u8054\u7cfb\u670d\u52a1\u5668&lt;/h1&gt;\n    &lt;h2 id=\"demo\"&gt;\u6c34\u6e29\uff1a{{temp}}&lt;/h2&gt;\n    &lt;h2&gt;\u6c34\u4f4d\uff1a{{height}}&lt;/h2&gt;\n    &lt;button @click=\"changePrice\"&gt;\u6c34\u6e29+1&lt;/button&gt;\n    &lt;button @click=\"changeSum\"&gt;\u6c34\u4f4d+10&lt;/button&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=\"ts\" setup name=\"Person\"&gt;\n  import {ref,watch,watchEffect} from 'vue'\n  // \u6570\u636e\n  let temp = ref(0)\n  let height = ref(0)\n\n  // \u65b9\u6cd5\n  function changePrice(){\n    temp.value += 10\n  }\n  function changeSum(){\n    height.value += 1\n  }\n\n  // \u7528watch\u5b9e\u73b0\uff0c\u9700\u8981\u660e\u786e\u7684\u6307\u51fa\u8981\u76d1\u89c6\uff1atemp\u3001height\n  watch([temp,height],(value)=&gt;{\n    // \u4ecevalue\u4e2d\u83b7\u53d6\u6700\u65b0\u7684temp\u503c\u3001height\u503c\n    const [newTemp,newHeight] = value\n    // \u5ba4\u6e29\u8fbe\u523050\u2103\uff0c\u6216\u6c34\u4f4d\u8fbe\u523020cm\uff0c\u7acb\u523b\u8054\u7cfb\u670d\u52a1\u5668\n    if(newTemp &gt;= 50 || newHeight &gt;= 20){\n      console.log('\u8054\u7cfb\u670d\u52a1\u5668')\n    }\n  })\n\n  // \u7528watchEffect\u5b9e\u73b0\uff0c\u4e0d\u7528\n  const stopWtach = watchEffect(()=&gt;{\n    // \u5ba4\u6e29\u8fbe\u523050\u2103\uff0c\u6216\u6c34\u4f4d\u8fbe\u523020cm\uff0c\u7acb\u523b\u8054\u7cfb\u670d\u52a1\u5668\n    if(temp.value &gt;= 50 || height.value &gt;= 20){\n      console.log(document.getElementById('demo')?.innerText)\n      console.log('\u8054\u7cfb\u670d\u52a1\u5668')\n    }\n    // \u6c34\u6e29\u8fbe\u5230100\uff0c\u6216\u6c34\u4f4d\u8fbe\u523050\uff0c\u53d6\u6d88\u76d1\u89c6\n    if(temp.value === 100 || height.value === 50){\n      console.log('\u6e05\u7406\u4e86')\n      stopWtach()\n    }\n  })\n&lt;/script&gt;\n</code></pre>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#311-ref","title":"3.11. \u3010\u6807\u7b7e\u7684 ref \u5c5e\u6027\u3011","text":"<p>\u4f5c\u7528\uff1a\u7528\u4e8e\u6ce8\u518c\u6a21\u677f\u5f15\u7528\u3002</p> <ul> <li>\u7528\u5728\u666e\u901a<code>DOM</code>\u6807\u7b7e\u4e0a\uff0c\u83b7\u53d6\u7684\u662f<code>DOM</code>\u8282\u70b9\u3002</li> <li>\u7528\u5728\u7ec4\u4ef6\u6807\u7b7e\u4e0a\uff0c\u83b7\u53d6\u7684\u662f\u7ec4\u4ef6\u5b9e\u4f8b\u5bf9\u8c61\u3002</li> </ul> <p>\u7528\u5728\u666e\u901a<code>DOM</code>\u6807\u7b7e\u4e0a\uff1a</p> Vue<pre><code>&lt;template&gt;\n  &lt;div class=\"person\"&gt;\n    &lt;h1 ref=\"title1\"&gt;\u5c1a\u7845\u8c37&lt;/h1&gt;\n    &lt;h2 ref=\"title2\"&gt;\u524d\u7aef&lt;/h2&gt;\n    &lt;h3 ref=\"title3\"&gt;Vue&lt;/h3&gt;\n    &lt;input type=\"text\" ref=\"inpt\"&gt; &lt;br&gt;&lt;br&gt;\n    &lt;button @click=\"showLog\"&gt;\u70b9\u6211\u6253\u5370\u5185\u5bb9&lt;/button&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=\"ts\" setup name=\"Person\"&gt;\n  import {ref} from 'vue'\n\n  let title1 = ref()\n  let title2 = ref()\n  let title3 = ref()\n\n  function showLog(){\n    // \u901a\u8fc7id\u83b7\u53d6\u5143\u7d20\n    const t1 = document.getElementById('title1')\n    // \u6253\u5370\u5185\u5bb9\n    console.log((t1 as HTMLElement).innerText)\n    console.log((&lt;HTMLElement&gt;t1).innerText)\n    console.log(t1?.innerText)\n\n        /************************************/\n\n    // \u901a\u8fc7ref\u83b7\u53d6\u5143\u7d20\n    console.log(title1.value)\n    console.log(title2.value)\n    console.log(title3.value)\n  }\n&lt;/script&gt;\n</code></pre> <p>\u7528\u5728\u7ec4\u4ef6\u6807\u7b7e\u4e0a\uff1a</p> Vue<pre><code>&lt;!-- \u7236\u7ec4\u4ef6App.vue --&gt;\n&lt;template&gt;\n  &lt;Person ref=\"ren\"/&gt;\n  &lt;button @click=\"test\"&gt;\u6d4b\u8bd5&lt;/button&gt;\n&lt;/template&gt;\n\n&lt;script lang=\"ts\" setup name=\"App\"&gt;\n  import Person from './components/Person.vue'\n  import {ref} from 'vue'\n\n  let ren = ref()\n\n  function test(){\n    console.log(ren.value.name)\n    console.log(ren.value.age)\n  }\n&lt;/script&gt;\n\n\n&lt;!-- \u5b50\u7ec4\u4ef6Person.vue\u4e2d\u8981\u4f7f\u7528defineExpose\u66b4\u9732\u5185\u5bb9 --&gt;\n&lt;script lang=\"ts\" setup name=\"Person\"&gt;\n  import {ref,defineExpose} from 'vue'\n    // \u6570\u636e\n  let name = ref('\u5f20\u4e09')\n  let age = ref(18)\n  /****************************/\n  /****************************/\n  // \u4f7f\u7528defineExpose\u5c06\u7ec4\u4ef6\u4e2d\u7684\u6570\u636e\u4ea4\u7ed9\u5916\u90e8\n  defineExpose({name,age})\n&lt;/script&gt;\n</code></pre>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#312-props","title":"3.12. \u3010props\u3011","text":"JavaScript<pre><code>// \u5b9a\u4e49\u4e00\u4e2a\u63a5\u53e3\uff0c\u9650\u5236\u6bcf\u4e2aPerson\u5bf9\u8c61\u7684\u683c\u5f0f\nexport interface PersonInter {\n id:string,\n name:string,\n    age:number\n   }\n   \n// \u5b9a\u4e49\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7c7b\u578bPersons\nexport type Persons = Array&lt;PersonInter&gt;\n</code></pre> <p><code>App.vue</code>\u4e2d\u4ee3\u7801\uff1a</p> Vue<pre><code>&lt;template&gt;\n  &lt;Person :list=\"persons\"/&gt;\n&lt;/template&gt;\n  \n&lt;script lang=\"ts\" setup name=\"App\"&gt;\n  import Person from './components/Person.vue'\n  import {reactive} from 'vue'\n    import {type Persons} from './types'\n  \n    let persons = reactive&lt;Persons&gt;([\n     {id:'e98219e12',name:'\u5f20\u4e09',age:18},\n      {id:'e98219e13',name:'\u674e\u56db',age:19},\n       {id:'e98219e14',name:'\u738b\u4e94',age:20}\n     ])\n   &lt;/script&gt;\n  \n</code></pre> <p><code>Person.vue</code>\u4e2d\u4ee3\u7801\uff1a</p> Vue<pre><code>&lt;template&gt;\n&lt;div class=\"person\"&gt;\n &lt;ul&gt;\n     &lt;li v-for=\"item in list\" :key=\"item.id\"&gt;\n        {{item.name}}--{{item.age}}\n      &lt;/li&gt;\n    &lt;/ul&gt;\n   &lt;/div&gt;\n   &lt;/template&gt;\n  \n&lt;script lang=\"ts\" setup name=\"Person\"&gt;\nimport {defineProps} from 'vue'\nimport {type PersonInter} from '@/types'\n  \n  // \u7b2c\u4e00\u79cd\u5199\u6cd5\uff1a\u4ec5\u63a5\u6536\n// const props = defineProps(['list'])\n  \n  // \u7b2c\u4e8c\u79cd\u5199\u6cd5\uff1a\u63a5\u6536+\u9650\u5236\u7c7b\u578b\n// defineProps&lt;{list:Persons}&gt;()\n  \n  // \u7b2c\u4e09\u79cd\u5199\u6cd5\uff1a\u63a5\u6536+\u9650\u5236\u7c7b\u578b+\u6307\u5b9a\u9ed8\u8ba4\u503c+\u9650\u5236\u5fc5\u8981\u6027\nlet props = withDefaults(defineProps&lt;{list?:Persons}&gt;(),{\n     list:()=&gt;[{id:'asdasg01',name:'\u5c0f\u732a\u4f69\u5947',age:18}]\n  })\n   console.log(props)\n  &lt;/script&gt;\n</code></pre>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#313","title":"3.13. \u3010\u751f\u547d\u5468\u671f\u3011","text":"<ul> <li>\u6982\u5ff5\uff1a<code>Vue</code>\u7ec4\u4ef6\u5b9e\u4f8b\u5728\u521b\u5efa\u65f6\u8981\u7ecf\u5386\u4e00\u7cfb\u5217\u7684\u521d\u59cb\u5316\u6b65\u9aa4\uff0c\u5728\u6b64\u8fc7\u7a0b\u4e2d<code>Vue</code>\u4f1a\u5728\u5408\u9002\u7684\u65f6\u673a\uff0c\u8c03\u7528\u7279\u5b9a\u7684\u51fd\u6570\uff0c\u4ece\u800c\u8ba9\u5f00\u53d1\u8005\u6709\u673a\u4f1a\u5728\u7279\u5b9a\u9636\u6bb5\u8fd0\u884c\u81ea\u5df1\u7684\u4ee3\u7801\uff0c\u8fd9\u4e9b\u7279\u5b9a\u7684\u51fd\u6570\u7edf\u79f0\u4e3a\uff1a\u751f\u547d\u5468\u671f\u94a9\u5b50</li> <li>\u89c4\u5f8b\uff1a</li> </ul> <p>\u751f\u547d\u5468\u671f\u6574\u4f53\u5206\u4e3a\u56db\u4e2a\u9636\u6bb5\uff0c\u5206\u522b\u662f\uff1a\u521b\u5efa\u3001\u6302\u8f7d\u3001\u66f4\u65b0\u3001\u9500\u6bc1\uff0c\u6bcf\u4e2a\u9636\u6bb5\u90fd\u6709\u4e24\u4e2a\u94a9\u5b50\uff0c\u4e00\u524d\u4e00\u540e\u3002</p> <ul> <li><code>Vue2</code>\u7684\u751f\u547d\u5468\u671f</li> </ul> <p>\u521b\u5efa\u9636\u6bb5\uff1a<code>beforeCreate</code>\u3001<code>created</code></p> <p>\u6302\u8f7d\u9636\u6bb5\uff1a<code>beforeMount</code>\u3001<code>mounted</code></p> <p>\u66f4\u65b0\u9636\u6bb5\uff1a<code>beforeUpdate</code>\u3001<code>updated</code></p> <p>\u9500\u6bc1\u9636\u6bb5\uff1a<code>beforeDestroy</code>\u3001<code>destroyed</code></p> <ul> <li><code>Vue3</code>\u7684\u751f\u547d\u5468\u671f</li> </ul> <p>\u521b\u5efa\u9636\u6bb5\uff1a<code>setup</code></p> <p>\u6302\u8f7d\u9636\u6bb5\uff1a<code>onBeforeMount</code>\u3001<code>onMounted</code></p> <p>\u66f4\u65b0\u9636\u6bb5\uff1a<code>onBeforeUpdate</code>\u3001<code>onUpdated</code></p> <p>\u5378\u8f7d\u9636\u6bb5\uff1a<code>onBeforeUnmount</code>\u3001<code>onUnmounted</code></p> <ul> <li>\u5e38\u7528\u7684\u94a9\u5b50\uff1a<code>onMounted</code>(\u6302\u8f7d\u5b8c\u6bd5)\u3001<code>onUpdated</code>(\u66f4\u65b0\u5b8c\u6bd5)\u3001<code>onBeforeUnmount</code>(\u5378\u8f7d\u4e4b\u524d)</li> <li>\u793a\u4f8b\u4ee3\u7801\uff1a</li> </ul> Vue<pre><code>&lt;template&gt;\n  &lt;div class=\"person\"&gt;\n    &lt;h2&gt;\u5f53\u524d\u6c42\u548c\u4e3a\uff1a{{ sum }}&lt;/h2&gt;\n    &lt;button @click=\"changeSum\"&gt;\u70b9\u6211sum+1&lt;/button&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;!-- vue3\u5199\u6cd5 --&gt;\n&lt;script lang=\"ts\" setup name=\"Person\"&gt;\n  import { \n    ref, \n    onBeforeMount, \n    onMounted, \n    onBeforeUpdate, \n    onUpdated, \n    onBeforeUnmount, \n    onUnmounted \n  } from 'vue'\n\n  // \u6570\u636e\n  let sum = ref(0)\n  // \u65b9\u6cd5\n  function changeSum() {\n    sum.value += 1\n  }\n  console.log('setup')\n  // \u751f\u547d\u5468\u671f\u94a9\u5b50\n  onBeforeMount(()=&gt;{\n    console.log('\u6302\u8f7d\u4e4b\u524d')\n  })\n  onMounted(()=&gt;{\n    console.log('\u6302\u8f7d\u5b8c\u6bd5')\n  })\n  onBeforeUpdate(()=&gt;{\n    console.log('\u66f4\u65b0\u4e4b\u524d')\n  })\n  onUpdated(()=&gt;{\n    console.log('\u66f4\u65b0\u5b8c\u6bd5')\n  })\n  onBeforeUnmount(()=&gt;{\n    console.log('\u5378\u8f7d\u4e4b\u524d')\n  })\n  onUnmounted(()=&gt;{\n    console.log('\u5378\u8f7d\u5b8c\u6bd5')\n  })\n&lt;/script&gt;\n</code></pre>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#314-hook","title":"3.14. \u3010\u81ea\u5b9a\u4e49hook\u3011","text":"<ul> <li>\u4ec0\u4e48\u662f<code>hook</code>\uff1f\u2014\u2014 \u672c\u8d28\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u628a<code>setup</code>\u51fd\u6570\u4e2d\u4f7f\u7528\u7684<code>Composition API</code>\u8fdb\u884c\u4e86\u5c01\u88c5\uff0c\u7c7b\u4f3c\u4e8e<code>vue2.x</code>\u4e2d\u7684<code>mixin</code>\u3002</li> <li> </li> </ul> <p>\u793a\u4f8b\u4ee3\u7801\uff1a</p> <ul> <li><code>useSum.ts</code>\u4e2d\u5185\u5bb9\u5982\u4e0b\uff1a</li> </ul> <p>JavaScript<pre><code>import {ref,onMounted} from 'vue'\n\nexport default function(){\n  let sum = ref(0)\n\n  const increment = ()=&gt;{\n    sum.value += 1\n  }\n  const decrement = ()=&gt;{\n    sum.value -= 1\n  }\n  onMounted(()=&gt;{\n    increment()\n  })\n\n  //\u5411\u5916\u90e8\u66b4\u9732\u6570\u636e\n  return {sum,increment,decrement}\n}\n</code></pre> - <code>useDog.ts</code>\u4e2d\u5185\u5bb9\u5982\u4e0b\uff1a</p> <p>JavaScript<pre><code>import {reactive,onMounted} from 'vue'\nimport axios,{AxiosError} from 'axios'\n\nexport default function(){\n  let dogList = reactive&lt;string[]&gt;([])\n\n  // \u65b9\u6cd5\n  async function getDog(){\n    try {\n      // \u53d1\u8bf7\u6c42\n      let {data} = await axios.get('https://dog.ceo/api/breed/pembroke/images/random')\n      // \u7ef4\u62a4\u6570\u636e\n      dogList.push(data.message)\n    } catch (error) {\n      // \u5904\u7406\u9519\u8bef\n      const err = &lt;AxiosError&gt;error\n      console.log(err.message)\n    }\n  }\n\n  // \u6302\u8f7d\u94a9\u5b50\n  onMounted(()=&gt;{\n    getDog()\n  })\n\n  //\u5411\u5916\u90e8\u66b4\u9732\u6570\u636e\n  return {dogList,getDog}\n}\n</code></pre> - \u7ec4\u4ef6\u4e2d\u5177\u4f53\u4f7f\u7528\uff1a</p> Vue<pre><code>&lt;template&gt;\n  &lt;h2&gt;\u5f53\u524d\u6c42\u548c\u4e3a\uff1a{{sum}}&lt;/h2&gt;\n  &lt;button @click=\"increment\"&gt;\u70b9\u6211+1&lt;/button&gt;\n  &lt;button @click=\"decrement\"&gt;\u70b9\u6211-1&lt;/button&gt;\n  &lt;hr&gt;\n  &lt;img v-for=\"(u,index) in dogList.urlList\" :key=\"index\" :src=\"(u as string)\"&gt; \n  &lt;span v-show=\"dogList.isLoading\"&gt;\u52a0\u8f7d\u4e2d......&lt;/span&gt;&lt;br&gt;\n  &lt;button @click=\"getDog\"&gt;\u518d\u6765\u4e00\u53ea\u72d7&lt;/button&gt;\n&lt;/template&gt;\n\n&lt;script lang=\"ts\"&gt;\n  import {defineComponent} from 'vue'\n\n  export default defineComponent({\n    name:'App',\n  })\n&lt;/script&gt;\n\n&lt;script setup lang=\"ts\"&gt;\n  import useSum from './hooks/useSum'\n  import useDog from './hooks/useDog'\n\n  let {sum,increment,decrement} = useSum()\n  let {dogList,getDog} = useDog()\n&lt;/script&gt;\n</code></pre>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#hook-setupxxxjsxxxtsusexxx","title":"\u81ea\u5b9a\u4e49<code>hook</code>\u7684\u4f18\u52bf\uff1a\u590d\u7528\u4ee3\u7801, \u8ba9<code>setup</code>\u4e2d\u7684\u903b\u8f91\u66f4\u6e05\u695a\u6613\u61c2\u3002\u5c31\u662f\u7528\u4e8e\u6a21\u5757\u5316\uff0c\u901a\u5e38\u662f\u4e00\u4e2axxx.js\u6216\u8005xxx.ts.\u4e00\u822c\u547d\u540d\u89c4\u8303\u662fusexxx\u3002","text":""},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#4","title":"4. \u8def\u7531","text":""},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#41","title":"4.1. \u3010\u5bf9\u8def\u7531\u7684\u7406\u89e3\u3011","text":"<p>\u6b64\u5904\u7684\u8def\u7531\u5c31\u662f\u4e00\u7ec4key-value\u7684\u5bf9\u5e94\u5173\u7cfb\u3002\u7531\u4e00\u4e2akey\u53ef\u4ee5\u8def\u7531\u5230\u4e00\u4e2avalue</p> <p>\u70b9\u51fb\u5bf9\u5e94\u4f4d\u7f6e\uff0c\u5219\u6d4f\u89c8\u5668\u4e0a\u65b9http\u8bf7\u6c42\u8def\u5f84\u6539\u53d8\uff0c\u5219route\u83b7\u53d6\u5230\u8bbf\u95ee\u8def\u5f84\u53d8\u5316\u3002\u5982\u679c\u5f53\u524d\u5728/class\u7ec4\u4ef6\uff0c\u7d27\u63a5\u7740\u70b9\u51fb/subject\u7ec4\u4ef6\u4f4d\u7f6e\uff0c\u5219\u8def\u7531\u5668\u5c06/class\u5bf9\u5e94\u7684\u7ec4\u4ef6\u5378\u8f7d\uff0c\u5c06/subject\u5bf9\u5e94\u7684\u7ec4\u4ef6\u6302\u8f7d\u3002</p> <p>\u5177\u4f53\u5f00\u53d1\u8fc7\u7a0b\uff1a</p> <ol> <li>\u5bfc\u822a\u533a(key)\uff0c\u5c55\u793a\u533a(value)</li> <li>\u8bf7\u6765\u8def\u7531\u5668</li> <li>\u6307\u5b9a\u5177\u4f53\u7684\u8def\u7531\u89c4\u5219</li> <li>\u5f62\u6210\u4e00\u4e2a\u4e00\u4e2a\u7684xxx.vue\uff08\u6bd4\u5982Subject.vue\uff09</li> </ol>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#42","title":"4.2. \u3010\u57fa\u672c\u5207\u6362\u6548\u679c\u3011","text":"<ul> <li><code>Vue3</code>\u4e2d\u8981\u4f7f\u7528<code>vue-router</code>\u7684\u6700\u65b0\u7248\u672c\uff0c\u76ee\u524d\u662f<code>4</code>\u7248\u672c\u3002</li> <li>\u8def\u7531\u914d\u7f6e\u6587\u4ef6\u4ee3\u7801\u5982\u4e0b\uff1a</li> </ul> JavaScript<pre><code>import {createRouter,createWebHistory} from 'vue-router'\nimport Home from '@/pages/Home.vue'\nimport News from '@/pages/News.vue'\nimport About from '@/pages/About.vue'\n\nconst router = createRouter({\n  history:createWebHistory(),\n  routes:[\n      {\n          path:'/home',\n          component:Home\n      },\n      {\n          path:'/about',\n          component:About\n      }\n  ]\n})\nexport default router\n</code></pre> <ul> <li><code>main.ts</code>\u4ee3\u7801\u5982\u4e0b\uff1a</li> </ul> JavaScript<pre><code>import router from './router/index'\napp.use(router)\n\napp.mount('#app')\n</code></pre> <ul> <li><code>App.vue</code>\u4ee3\u7801\u5982\u4e0b</li> </ul> Vue<pre><code>&lt;template&gt;\n  &lt;div class=\"app\"&gt;\n    &lt;h2 class=\"title\"&gt;Vue\u8def\u7531\u6d4b\u8bd5&lt;/h2&gt;\n    &lt;!-- \u5bfc\u822a\u533a --&gt;\n    &lt;div class=\"navigate\"&gt;\n      &lt;RouterLink to=\"/home\" active-class=\"active\"&gt;\u9996\u9875&lt;/RouterLink&gt;\n      &lt;RouterLink to=\"/news\" active-class=\"active\"&gt;\u65b0\u95fb&lt;/RouterLink&gt;\n      &lt;RouterLink to=\"/about\" active-class=\"active\"&gt;\u5173\u4e8e&lt;/RouterLink&gt;\n    &lt;/div&gt;\n    &lt;!-- \u5c55\u793a\u533a --&gt;\n    &lt;div class=\"main-content\"&gt;\n      &lt;RouterView&gt;&lt;/RouterView&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=\"ts\" setup name=\"App\"&gt;\n  import {RouterLink,RouterView} from 'vue-router'  \n&lt;/script&gt;\n</code></pre>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#43","title":"4.3. \u3010\u4e24\u4e2a\u6ce8\u610f\u70b9\u3011","text":"<ol> <li>\u8def\u7531\u7ec4\u4ef6\u901a\u5e38\u5b58\u653e\u5728<code>pages</code> \u6216 <code>views</code>\u6587\u4ef6\u5939\uff0c\u4e00\u822c\u7ec4\u4ef6\u901a\u5e38\u5b58\u653e\u5728<code>components</code>\u6587\u4ef6\u5939\u3002</li> <li>\u4e00\u822c\u7ec4\u4ef6\uff0c\u5f15\u5165\u7684\u65f6\u5019\u662f\u5f15\u5165\u7684</li> <li>\u8def\u7531\u7ec4\u4ef6\uff0c\u901a\u8fc7\u8def\u7531\u8def\u5f84\u914d\u7f6e</li> <li>\u901a\u8fc7\u70b9\u51fb\u5bfc\u822a\uff0c\u89c6\u89c9\u6548\u679c\u4e0a\u201c\u6d88\u5931\u201d \u4e86\u7684\u8def\u7531\u7ec4\u4ef6\uff0c\u9ed8\u8ba4\u662f\u88ab\u5378\u8f7d\u6389\u7684\uff0c\u9700\u8981\u7684\u65f6\u5019\u518d\u53bb\u6302\u8f7d\u3002</li> </ol>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#44","title":"4.4.\u3010\u8def\u7531\u5668\u5de5\u4f5c\u6a21\u5f0f\u3011","text":"<ol> <li><code>history</code>\u6a21\u5f0f</li> </ol> <p>\u4f18\u70b9\uff1a<code>URL</code>\u66f4\u52a0\u7f8e\u89c2\uff0c\u4e0d\u5e26\u6709<code>#</code>\uff0c\u66f4\u63a5\u8fd1\u4f20\u7edf\u7684\u7f51\u7ad9<code>URL</code>\u3002</p> <p>\u7f3a\u70b9\uff1a\u540e\u671f\u9879\u76ee\u4e0a\u7ebf\uff0c\u9700\u8981\u670d\u52a1\u7aef\u914d\u5408\u5904\u7406\u8def\u5f84\u95ee\u9898\uff0c\u5426\u5219\u5237\u65b0\u4f1a\u6709<code>404</code>\u9519\u8bef\u3002</p> JavaScript<pre><code>const router = createRouter({\n   history:createWebHistory(), //history\u6a21\u5f0f\n   /******/\n})\n</code></pre> <ol> <li><code>hash</code>\u6a21\u5f0f</li> </ol> <p>\u4f18\u70b9\uff1a\u517c\u5bb9\u6027\u66f4\u597d\uff0c\u56e0\u4e3a\u4e0d\u9700\u8981\u670d\u52a1\u5668\u7aef\u5904\u7406\u8def\u5f84\u3002</p> <p>\u7f3a\u70b9\uff1a<code>URL</code>\u5e26\u6709<code>#</code>\u4e0d\u592a\u7f8e\u89c2\uff0c\u4e14\u5728<code>SEO</code>\u4f18\u5316\u65b9\u9762\u76f8\u5bf9\u8f83\u5dee\u3002</p> <p>JavaScript<pre><code>const router = createRouter({\n   history:createWebHashHistory(), //hash\u6a21\u5f0f\n   /******/\n})\n</code></pre> </p>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#45-to","title":"4.5. \u3010to\u7684\u4e24\u79cd\u5199\u6cd5\u3011","text":"Vue<pre><code>&lt;!-- \u7b2c\u4e00\u79cd\uff1ato\u7684\u5b57\u7b26\u4e32\u5199\u6cd5 --&gt;\n&lt;router-link active-class=\"active\" to=\"/home\"&gt;\u4e3b\u9875&lt;/router-link&gt;\n\n&lt;!-- \u7b2c\u4e8c\u79cd\uff1ato\u7684\u5bf9\u8c61\u5199\u6cd5 --&gt;\n&lt;router-link active-class=\"active\" :to=\"{path:'/home'}\"&gt;Home&lt;/router-link&gt;\n</code></pre>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#46","title":"4.6. \u3010\u547d\u540d\u8def\u7531\u3011","text":"<p>\u4f5c\u7528\uff1a\u53ef\u4ee5\u7b80\u5316\u8def\u7531\u8df3\u8f6c\u53ca\u4f20\u53c2\uff08\u540e\u9762\u5c31\u8bb2\uff09\u3002</p> <p>\u7ed9\u8def\u7531\u89c4\u5219\u547d\u540d\uff1a</p> JavaScript<pre><code>routes:[\n  {\n    name:'zhuye',\n    path:'/home',\n    component:Home\n  },\n  {\n    name:'xinwen',\n    path:'/news',\n    component:News,\n  },\n  {\n    name:'guanyu',\n    path:'/about',\n    component:About\n  }\n]\n</code></pre> <p>\u8df3\u8f6c\u8def\u7531\uff1a</p> Vue<pre><code>&lt;!--\u7b80\u5316\u524d\uff1a\u9700\u8981\u5199\u5b8c\u6574\u7684\u8def\u5f84\uff08to\u7684\u5b57\u7b26\u4e32\u5199\u6cd5\uff09 --&gt;\n&lt;router-link to=\"/news/detail\"&gt;\u8df3\u8f6c&lt;/router-link&gt;\n\n&lt;!--\u7b80\u5316\u540e\uff1a\u76f4\u63a5\u901a\u8fc7\u540d\u5b57\u8df3\u8f6c\uff08to\u7684\u5bf9\u8c61\u5199\u6cd5\u914d\u5408name\u5c5e\u6027\uff09 --&gt;\n&lt;router-link :to=\"{name:'guanyu'}\"&gt;\u8df3\u8f6c&lt;/router-link&gt;\n</code></pre>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#47","title":"4.7. \u3010\u5d4c\u5957\u8def\u7531\u3011","text":"<ol> <li>\u7f16\u5199<code>News</code>\u7684\u5b50\u8def\u7531\uff1a<code>Detail.vue</code></li> <li>\u914d\u7f6e\u8def\u7531\u89c4\u5219\uff0c\u4f7f\u7528<code>children</code>\u914d\u7f6e\u9879\uff1a</li> </ol> <p>TypeScript<pre><code>const router = createRouter({\n  history:createWebHistory(),\n routes:[\n     {\n         name:'zhuye',\n         path:'/home',\n         component:Home\n     },\n     {\n         name:'xinwen',\n         path:'/news',\n         component:News,\n         children:[\n             {\n                 name:'xiang',\n                 path:'detail',\n                 component:Detail\n             }\n         ]\n     },\n     {\n         name:'guanyu',\n         path:'/about',\n         component:About\n     }\n ]\n})\nexport default router\n</code></pre> 3. \u8df3\u8f6c\u8def\u7531\uff08\u8bb0\u5f97\u8981\u52a0\u5b8c\u6574\u8def\u5f84\uff09\uff1a</p> <p>Vue<pre><code>&lt;router-link to=\"/news/detail\"&gt;xxxx&lt;/router-link&gt;\n&lt;!-- \u6216 --&gt;\n&lt;router-link :to=\"{path:'/news/detail'}\"&gt;xxxx&lt;/router-link&gt;\n</code></pre> 4. \u8bb0\u5f97\u53bb<code>Home</code>\u7ec4\u4ef6\u4e2d\u9884\u7559\u4e00\u4e2a<code>&lt;router-view&gt;</code></p> Vue<pre><code>&lt;template&gt;\n  &lt;div class=\"news\"&gt;\n    &lt;nav class=\"news-list\"&gt;\n      &lt;RouterLink v-for=\"news in newsList\" :key=\"news.id\" :to=\"{path:'/news/detail'}\"&gt;\n        {{news.name}}\n      &lt;/RouterLink&gt;\n    &lt;/nav&gt;\n    &lt;div class=\"news-detail\"&gt;\n      &lt;RouterView/&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n</code></pre>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#48","title":"4.8. \u3010\u8def\u7531\u4f20\u53c2\u3011","text":""},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#query","title":"query\u53c2\u6570","text":"<ol> <li>\u4f20\u9012\u53c2\u6570</li> </ol> <p>Vue<pre><code>&lt;!-- \u8df3\u8f6c\u5e76\u643a\u5e26query\u53c2\u6570\uff08to\u7684\u5b57\u7b26\u4e32\u5199\u6cd5\uff09 --&gt;\n&lt;router-link to=\"/news/detail?a=1&amp;b=2&amp;content=\u6b22\u8fce\u4f60\"&gt;\n \u8df3\u8f6c\n&lt;/router-link&gt;\n\n&lt;!-- \u8df3\u8f6c\u5e76\u643a\u5e26query\u53c2\u6570\uff08to\u7684\u5bf9\u8c61\u5199\u6cd5\uff09 --&gt;\n&lt;RouterLink \n  :to=\"{\n    //name:'xiang', //\u7528name\u4e5f\u53ef\u4ee5\u8df3\u8f6c\n    path:'/news/detail',\n    query:{\n      id:news.id,\n      title:news.title,\n      content:news.content\n    }\n  }\"\n&gt;\n  {{news.title}}\n&lt;/RouterLink&gt;\n</code></pre> 2. \u63a5\u6536\u53c2\u6570\uff1a</p> JavaScript<pre><code>import {useRoute} from 'vue-router'\nconst route = useRoute()\n// \u6253\u5370query\u53c2\u6570\nconsole.log(route.query)\n</code></pre>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#params","title":"params\u53c2\u6570","text":"<ol> <li>\u4f20\u9012\u53c2\u6570</li> </ol> <p>Vue<pre><code>&lt;!-- \u8df3\u8f6c\u5e76\u643a\u5e26params\u53c2\u6570\uff08to\u7684\u5b57\u7b26\u4e32\u5199\u6cd5\uff09 --&gt;\n&lt;RouterLink :to=\"`/news/detail/001/\u65b0\u95fb001/\u5185\u5bb9001`\"&gt;{{news.title}}&lt;/RouterLink&gt;\n\n&lt;!-- \u8df3\u8f6c\u5e76\u643a\u5e26params\u53c2\u6570\uff08to\u7684\u5bf9\u8c61\u5199\u6cd5\uff09 --&gt;\n&lt;RouterLink \n  :to=\"{\n    name:'xiang', //\u7528name\u8df3\u8f6c\n    params:{\n      id:news.id,\n      title:news.title,\n      content:news.title\n    }\n  }\"\n&gt;\n  {{news.title}}\n&lt;/RouterLink&gt;\n</code></pre> 2. \u63a5\u6536\u53c2\u6570\uff1a</p> JavaScript<pre><code>import {useRoute} from 'vue-router'\nconst route = useRoute()\n// \u6253\u5370params\u53c2\u6570\nconsole.log(route.params)\n</code></pre> <p>\u5907\u6ce81\uff1a\u4f20\u9012<code>params</code>\u53c2\u6570\u65f6\uff0c\u82e5\u4f7f\u7528<code>to</code>\u7684\u5bf9\u8c61\u5199\u6cd5\uff0c\u5fc5\u987b\u4f7f\u7528<code>name</code>\u914d\u7f6e\u9879\uff0c\u4e0d\u80fd\u7528<code>path</code>\u3002</p> <p>\u5907\u6ce82\uff1a\u4f20\u9012<code>params</code>\u53c2\u6570\u65f6\uff0c\u9700\u8981\u63d0\u524d\u5728\u89c4\u5219\u4e2d\u5360\u4f4d\u3002</p>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#49-props","title":"4.9. \u3010\u8def\u7531\u89c4\u5219\u7684props\u914d\u7f6e\u3011","text":"<p>\u4f5c\u7528\uff1a\u8ba9\u8def\u7531\u7ec4\u4ef6\u66f4\u65b9\u4fbf\u7684\u6536\u5230\u53c2\u6570\uff08\u53ef\u4ee5\u5c06\u8def\u7531\u53c2\u6570\u4f5c\u4e3a<code>props</code>\u4f20\u7ed9\u7ec4\u4ef6\uff09</p> JavaScript<pre><code>{\n    name:'xiang',\n    path:'detail/:id/:title/:content',\n    component:Detail,\n\n  // props\u7684\u5bf9\u8c61\u5199\u6cd5\uff0c\u4f5c\u7528\uff1a\u628a\u5bf9\u8c61\u4e2d\u7684\u6bcf\u4e00\u7ec4key-value\u4f5c\u4e3aprops\u4f20\u7ed9Detail\u7ec4\u4ef6\uff0c\u8fd9\u4e2a\u7528\u7684\u5f88\u5c11\n  // props:{a:1,b:2,c:3}, \n\n  // props\u7684\u5e03\u5c14\u503c\u5199\u6cd5\uff0c\u4f5c\u7528\uff1a\u628a\u6536\u5230\u4e86\u6bcf\u4e00\u7ec4params\u53c2\u6570\uff0c\u4f5c\u4e3aprops\u4f20\u7ed9Detail\u7ec4\u4ef6\n  // props:true\n\n  // props\u7684\u51fd\u6570\u5199\u6cd5\uff0c\u4f5c\u7528\uff1a\u628a\u8fd4\u56de\u7684\u5bf9\u8c61\u4e2d\u6bcf\u4e00\u7ec4key-value\u4f5c\u4e3aprops\u4f20\u7ed9Detail\u7ec4\u4ef6\n  props(route){\n    return route.query\n  }\n}\n</code></pre>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#410-replace","title":"4.10. \u3010 replace\u5c5e\u6027\u3011","text":"<ol> <li>\u4f5c\u7528\uff1a\u63a7\u5236\u8def\u7531\u8df3\u8f6c\u65f6\u64cd\u4f5c\u6d4f\u89c8\u5668\u5386\u53f2\u8bb0\u5f55\u7684\u6a21\u5f0f\u3002</li> <li> <p>\u6d4f\u89c8\u5668\u7684\u5386\u53f2\u8bb0\u5f55\u6709\u4e24\u79cd\u5199\u5165\u65b9\u5f0f\uff1a\u5206\u522b\u4e3a<code>push</code>\u548c<code>replace</code>\uff1a</p> </li> <li> <p><code>push</code>\u662f\u8ffd\u52a0\u5386\u53f2\u8bb0\u5f55\uff08\u9ed8\u8ba4\u503c\uff09\uff0c\u6bcf\u6b21\u90fd\u662f\u5165\u6808\u3002\u4e5f\u5c31\u662f\u53ef\u4ee5\u7528&lt;- -&gt;\u6765\u8df3\u8f6c\u3002</p> </li> <li><code>replace</code>\u662f\u66ff\u6362\u5f53\u524d\u8bb0\u5f55\uff0c\u6bcf\u6b21\u90fd\u662f\u4e4b\u524d\u7684\u51fa\u6808\uff0c\u540e\u4e00\u4e2a\u8fdb\u6808\u3002</li> <li>\u5f00\u542f<code>replace</code>\u6a21\u5f0f\uff1a</li> </ol> Vue<pre><code>&lt;RouterLink replace .......&gt;News&lt;/RouterLink&gt;\n</code></pre>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#411","title":"4.11. \u3010\u7f16\u7a0b\u5f0f\u5bfc\u822a\u3011\u4f7f\u7528\u9891\u7387\u5f88\u9ad8","text":"<p>routeLink\u6700\u7ec8\u5728\u6d4f\u89c8\u5668\u4e0a\u90fd\u4f1a\u8f6c\u6362\u4e3aa\u6807\u7b7e\u3002</p> <p>\u5982\u679c\u9700\u8981\u8131\u79bbrouteLink\u5b9e\u73b0\u8def\u7531\u8df3\u8f6c\uff0c\u5219\u9700\u8981\u7f16\u7a0b\u65b9\u5f0f\u5bfc\u822a\u3002</p> Text Only<pre><code>router.push\u7684\u53c2\u6570\u548cto\u4f4d\u7f6e\u7684\u53c2\u6570\u5199\u6cd5\u5b8c\u5168\u4e00\u6837\n</code></pre> <p>\u8def\u7531\u7ec4\u4ef6\u7684\u4e24\u4e2a\u91cd\u8981\u7684\u5c5e\u6027\uff1a<code>$route</code>\u548c<code>$router</code>\u53d8\u6210\u4e86\u4e24\u4e2a<code>hooks</code></p> JavaScript<pre><code>import {useRoute,useRouter} from 'vue-router'\n\nconst route = useRoute()\nconst router = useRouter()\n\nconsole.log(route.query)\nconsole.log(route.parmas)\nconsole.log(router.push)\nconsole.log(router.replace)\n</code></pre>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#412","title":"4.12. \u3010\u91cd\u5b9a\u5411\u3011","text":"<ol> <li>\u4f5c\u7528\uff1a\u5c06\u7279\u5b9a\u7684\u8def\u5f84\uff0c\u91cd\u65b0\u5b9a\u5411\u5230\u5df2\u6709\u8def\u7531\u3002</li> <li>\u5177\u4f53\u7f16\u7801\uff1a</li> </ol> JavaScript<pre><code>{\n    path:'/',\n    redirect:'/about'\n}\n</code></pre>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#5-pinia","title":"5. pinia","text":"<p>\u529f\u80fd:\u96c6\u4e2d\u5f0f\u72b6\u6001(\u6570\u636e)\u7ba1\u7406\uff0c\u6bd4\u5982redux,vuex,pinia\u3002\u4e0e\u5176\u5bf9\u5e94\u7684\u662f\u5206\u5e03\u5f0f\u5b58\u50a8\u3002</p> <p>\u4e3b\u8981\u7528\u4e8e\u591a\u4e2a\u7ec4\u4ef6\u4e4b\u95f4\u8981\u5171\u4eab\u6570\u636e\u3002\u800c\u7ec4\u4ef6\u81ea\u8eab\u7684\u6570\u636e\u4e0d\u5e94\u8be5\u4ea4\u7ed9\u96c6\u4e2d\u5f0f\u72b6\u6001\u7ba1\u7406\u3002</p>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#51-pinia","title":"5.1\u3010\u642d\u5efa pinia \u73af\u5883\u3011","text":"<p>\u7b2c\u4e00\u6b65\uff1a<code>npm install pinia</code></p> <p>\u7b2c\u4e8c\u6b65\uff1a\u64cd\u4f5c<code>src/main.ts</code></p> TypeScript<pre><code>import { createApp } from 'vue'\nimport App from './App.vue'\n\n/* \u5f15\u5165createPinia\uff0c\u7528\u4e8e\u521b\u5efapinia */\nimport { createPinia } from 'pinia'\n\n/* \u521b\u5efapinia */\nconst pinia = createPinia()\nconst app = createApp(App)\n\n/* \u4f7f\u7528\u63d2\u4ef6 */{}\napp.use(pinia)\napp.mount('#app')\n</code></pre> <p>\u6b64\u65f6\u5f00\u53d1\u8005\u5de5\u5177\u4e2d\u5df2\u7ecf\u6709\u4e86<code>pinia</code>\u9009\u9879</p>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#52","title":"5.2\u3010\u5b58\u50a8+\u8bfb\u53d6\u6570\u636e\u3011","text":"<ol> <li><code>Store</code>\u662f\u4e00\u4e2a\u4fdd\u5b58\uff1a\u72b6\u6001\u3001\u4e1a\u52a1\u903b\u8f91 \u7684\u5b9e\u4f53\uff0c\u6bcf\u4e2a\u7ec4\u4ef6\u90fd\u53ef\u4ee5\u8bfb\u53d6\u3001\u5199\u5165\u5b83\u3002</li> <li>\u5b83\u6709\u4e09\u4e2a\u6982\u5ff5\uff1a<code>state</code>\u3001<code>getter</code>\u3001<code>action</code>\uff0c\u76f8\u5f53\u4e8e\u7ec4\u4ef6\u4e2d\u7684\uff1a <code>data</code>\u3001 <code>computed</code> \u548c <code>methods</code>\u3002</li> <li>\u5177\u4f53\u7f16\u7801\uff1a<code>src/store/count.ts</code></li> </ol> <p>TypeScript<pre><code>// \u5f15\u5165defineStore\u7528\u4e8e\u521b\u5efastore\nimport {defineStore} from 'pinia'\n\n// \u5b9a\u4e49\u5e76\u66b4\u9732\u4e00\u4e2astore\nexport const useCountStore = defineStore('count',{\n  // \u52a8\u4f5c\n  actions:{},\n  // \u72b6\u6001\n  state(){\n    return {\n      sum:6\n    }\n  },\n  // \u8ba1\u7b97\n  getters:{}\n})\n</code></pre> 4. \u5177\u4f53\u7f16\u7801\uff1a<code>src/store/talk.ts</code></p> <p>JavaScript<pre><code>// \u5f15\u5165defineStore\u7528\u4e8e\u521b\u5efastore\nimport {defineStore} from 'pinia'\n\n// \u5b9a\u4e49\u5e76\u66b4\u9732\u4e00\u4e2astore\nexport const useTalkStore = defineStore('talk',{\n  // \u52a8\u4f5c\n  actions:{},\n  // \u72b6\u6001\n  state(){\n    return {\n      talkList:[\n        {id:'yuysada01',content:'\u4f60\u4eca\u5929\u6709\u70b9\u602a\uff0c\u54ea\u91cc\u602a\uff1f\u602a\u597d\u770b\u7684\uff01'},\n             {id:'yuysada02',content:'\u8349\u8393\u3001\u84dd\u8393\u3001\u8513\u8d8a\u8393\uff0c\u4f60\u60f3\u6211\u4e86\u6ca1\uff1f'},\n        {id:'yuysada03',content:'\u5fc3\u91cc\u7ed9\u4f60\u7559\u4e86\u4e00\u5757\u5730\uff0c\u6211\u7684\u6b7b\u5fc3\u584c\u5730'}\n      ]\n    }\n  },\n  // \u8ba1\u7b97\n  getters:{}\n})\n</code></pre> 5. \u7ec4\u4ef6\u4e2d\u4f7f\u7528<code>state</code>\u4e2d\u7684\u6570\u636e</p> Vue<pre><code>&lt;template&gt;\n  &lt;h2&gt;\u5f53\u524d\u6c42\u548c\u4e3a\uff1a{{ sumStore.sum }}&lt;/h2&gt;\n&lt;/template&gt;\n\n&lt;script setup lang=\"ts\" name=\"Count\"&gt;\n  // \u5f15\u5165\u5bf9\u5e94\u7684useXxxxxStore\n  import {useSumStore} from '@/store/sum'\n\n  // \u8c03\u7528useXxxxxStore\u5f97\u5230\u5bf9\u5e94\u7684store\n  const sumStore = useSumStore()\n&lt;/script&gt;\n</code></pre> Vue<pre><code>&lt;template&gt;\n &lt;ul&gt;\n    &lt;li v-for=\"talk in talkStore.talkList\" :key=\"talk.id\"&gt;\n      {{ talk.content }}\n    &lt;/li&gt;\n  &lt;/ul&gt;\n&lt;/template&gt;\n\n&lt;script setup lang=\"ts\" name=\"Count\"&gt;\n  import axios from 'axios'\n  import {useTalkStore} from '@/store/talk'\n\n  const talkStore = useTalkStore()\n&lt;/script&gt;\n</code></pre>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#54","title":"5.4.\u3010\u4fee\u6539\u6570\u636e\u3011(\u4e09\u79cd\u65b9\u5f0f)","text":"<ol> <li>\u7b2c\u4e00\u79cd\u4fee\u6539\u65b9\u5f0f\uff0c\u76f4\u63a5\u4fee\u6539</li> </ol> <p>TypeScript<pre><code>countStore.sum = 666\n</code></pre> 2. \u7b2c\u4e8c\u79cd\u4fee\u6539\u65b9\u5f0f\uff1a\u6279\u91cf\u4fee\u6539</p> <p>TypeScript<pre><code>countStore.$patch({\n  sum:999,\n  school:'hhh'\n})\n</code></pre> 3. \u7b2c\u4e09\u79cd\u4fee\u6539\u65b9\u5f0f\uff1a\u501f\u52a9<code>action</code>\u4fee\u6539\uff08<code>action</code>\u4e2d\u53ef\u4ee5\u7f16\u5199\u4e00\u4e9b\u4e1a\u52a1\u903b\u8f91\uff09</p> <p>JavaScript<pre><code>import { defineStore } from 'pinia'\n\nexport const useCountStore = defineStore('count', {\n  /*************/\n  actions: {\n    //\u52a0\n    increment(value:number) {\n      if (this.sum &lt; 10) {\n        //\u64cd\u4f5ccountStore\u4e2d\u7684sum\n        this.sum += value\n      }\n    },\n    //\u51cf\n    decrement(value:number){\n      if(this.sum &gt; 1){\n        this.sum -= value\n      }\n    }\n  },\n  /*************/\n})\n</code></pre> 4. \u7ec4\u4ef6\u4e2d\u8c03\u7528<code>action</code>\u5373\u53ef</p> JavaScript<pre><code>// \u4f7f\u7528countStore\nconst countStore = useCountStore()\n\n// \u8c03\u7528\u5bf9\u5e94action\ncountStore.incrementOdd(n.value)\n</code></pre>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#55storetorefs","title":"5.5.\u3010storeToRefs\u3011","text":"<ul> <li>\u501f\u52a9<code>storeToRefs</code>\u5c06<code>store</code>\u4e2d\u7684\u6570\u636e\u8f6c\u4e3a<code>ref</code>\u5bf9\u8c61\uff0c\u65b9\u4fbf\u5728\u6a21\u677f\u4e2d\u4f7f\u7528\u3002</li> <li>\u6ce8\u610f\uff1a<code>pinia</code>\u63d0\u4f9b\u7684<code>storeToRefs</code>\u53ea\u4f1a\u5c06\u6570\u636e\u505a\u8f6c\u6362\uff0c\u800c<code>Vue</code>\u7684<code>toRefs</code>\u4f1a\u8f6c\u6362<code>store</code>\u4e2d\u6570\u636e\u3002</li> </ul> Vue<pre><code>&lt;template&gt;\n    &lt;div class=\"count\"&gt;\n        &lt;h2&gt;\u5f53\u524d\u6c42\u548c\u4e3a\uff1a{{sum}}&lt;/h2&gt;\n    &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script setup lang=\"ts\" name=\"Count\"&gt;\n  import { useCountStore } from '@/store/count'\n  /* \u5f15\u5165storeToRefs */\n  import { storeToRefs } from 'pinia'\n\n    /* \u5f97\u5230countStore */\n  const countStore = useCountStore()\n  /* \u4f7f\u7528storeToRefs\u8f6c\u6362countStore\uff0c\u968f\u540e\u89e3\u6784 */\n  const {sum} = storeToRefs(countStore)\n&lt;/script&gt;\n</code></pre>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#56getters","title":"5.6.\u3010getters\u3011","text":"<ol> <li>\u6982\u5ff5\uff1a\u5f53<code>state</code>\u4e2d\u7684\u6570\u636e\uff0c\u9700\u8981\u7ecf\u8fc7\u5904\u7406\u540e\u518d\u4f7f\u7528\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528<code>getters</code>\u914d\u7f6e\u3002</li> <li>\u8ffd\u52a0<code>getters</code>\u914d\u7f6e\u3002</li> </ol> <p>JavaScript<pre><code>// \u5f15\u5165defineStore\u7528\u4e8e\u521b\u5efastore\nimport {defineStore} from 'pinia'\n\n// \u5b9a\u4e49\u5e76\u66b4\u9732\u4e00\u4e2astore\nexport const useCountStore = defineStore('count',{\n  // \u52a8\u4f5c\n  actions:{\n    /************/\n  },\n  // \u72b6\u6001\n  state(){\n    return {\n      sum:1,\n      school:'hhh'\n    }\n  },\n  // \u8ba1\u7b97\n  getters:{\n    bigSum:(state):number =&gt; state.sum *10,\n    upperSchool():string{\n      return this. school.toUpperCase()\n    }\n  }\n})\n</code></pre> 3. \u7ec4\u4ef6\u4e2d\u8bfb\u53d6\u6570\u636e\uff1a</p> JavaScript<pre><code>const {increment,decrement} = countStore\nlet {sum,school,bigSum,upperSchool} = storeToRefs(countStore)\n</code></pre>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#57subscribe","title":"5.7.\u3010$subscribe\u3011","text":"<p>\u901a\u8fc7 store \u7684 <code>$subscribe()</code> \u65b9\u6cd5\u4fa6\u542c <code>state</code> \u53ca\u5176\u53d8\u5316</p> TypeScript<pre><code>talkStore.$subscribe((mutate,state)=&gt;{\n  console.log('LoveTalk',mutate,state)\n  localStorage.setItem('talk',JSON.stringify(talkList.value))\n})\n</code></pre>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#58-store","title":"5.8. \u3010store\u7ec4\u5408\u5f0f\u5199\u6cd5\u3011","text":"TypeScript<pre><code>import {defineStore} from 'pinia'\nimport axios from 'axios'\nimport {nanoid} from 'nanoid'\nimport {reactive} from 'vue'\n\nexport const useTalkStore = defineStore('talk',()=&gt;{\n  // talkList\u5c31\u662fstate\n  const talkList = reactive(\n    JSON.parse(localStorage.getItem('talkList') as string) || []\n  )\n\n  // getATalk\u51fd\u6570\u76f8\u5f53\u4e8eaction\n  async function getATalk(){\n    // \u53d1\u8bf7\u6c42\uff0c\u4e0b\u9762\u8fd9\u884c\u7684\u5199\u6cd5\u662f\uff1a\u8fde\u7eed\u89e3\u6784\u8d4b\u503c+\u91cd\u547d\u540d\n    let {data:{content:title}} = await axios.get('https://api.uomg.com/api/rand.qinghua?format=json')\n    // \u628a\u8bf7\u6c42\u56de\u6765\u7684\u5b57\u7b26\u4e32\uff0c\u5305\u88c5\u6210\u4e00\u4e2a\u5bf9\u8c61\n    let obj = {id:nanoid(),title}\n    // \u653e\u5230\u6570\u7ec4\u4e2d\n    talkList.unshift(obj)\n  }\n  return {talkList,getATalk}\n})\n</code></pre>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#6","title":"6. \u7ec4\u4ef6\u901a\u4fe1","text":"<p><code>Vue3</code>\u7ec4\u4ef6\u901a\u4fe1\u548c<code>Vue2</code>\u7684\u533a\u522b\uff1a</p> <ul> <li> <p>\u79fb\u51fa\u4e8b\u4ef6\u603b\u7ebf\uff0c\u4f7f\u7528<code>mitt</code>\u4ee3\u66ff\u3002</p> </li> <li> <p><code>vuex</code>\u6362\u6210\u4e86<code>pinia</code>\u3002</p> </li> <li>\u628a<code>.sync</code>\u4f18\u5316\u5230\u4e86<code>v-model</code>\u91cc\u9762\u4e86\u3002</li> <li>\u628a<code>$listeners</code>\u6240\u6709\u7684\u4e1c\u897f\uff0c\u5408\u5e76\u5230<code>$attrs</code>\u4e2d\u4e86\u3002</li> <li><code>$children</code>\u88ab\u780d\u6389\u4e86\u3002</li> </ul> <p>\u5e38\u89c1\u642d\u914d\u5f62\u5f0f\uff1a</p>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#61-props","title":"6.1. \u3010props\u3011","text":"<p>\u6982\u8ff0\uff1a<code>props</code>\u662f\u4f7f\u7528\u9891\u7387\u6700\u9ad8\u7684\u4e00\u79cd\u901a\u4fe1\u65b9\u5f0f\uff0c\u5e38\u7528\u4e0e \uff1a\u7236 \u2194 \u5b50\u3002</p> <ul> <li>\u82e5 \u7236\u4f20\u5b50\uff1a\u5c5e\u6027\u503c\u662f\u975e\u51fd\u6570\u3002</li> <li>\u82e5 \u5b50\u4f20\u7236\uff1a\u5c5e\u6027\u503c\u662f\u51fd\u6570\u3002</li> </ul> <p>\u7236\u7ec4\u4ef6\uff1a</p> Vue<pre><code>&lt;template&gt;\n  &lt;div class=\"father\"&gt;\n    &lt;h3&gt;\u7236\u7ec4\u4ef6\uff0c&lt;/h3&gt;\n        &lt;h4&gt;\u6211\u7684\u8f66\uff1a{{ car }}&lt;/h4&gt;\n        &lt;h4&gt;\u513f\u5b50\u7ed9\u7684\u73a9\u5177\uff1a{{ toy }}&lt;/h4&gt;\n        &lt;Child :car=\"car\" :getToy=\"getToy\"/&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script setup lang=\"ts\" name=\"Father\"&gt;\n    import Child from './Child.vue'\n    import { ref } from \"vue\";\n    // \u6570\u636e\n    const car = ref('\u5954\u9a70')\n    const toy = ref()\n    // \u65b9\u6cd5\n    function getToy(value:string){\n        toy.value = value\n    }\n&lt;/script&gt;\n</code></pre> <p>\u5b50\u7ec4\u4ef6</p> Vue<pre><code>&lt;template&gt;\n  &lt;div class=\"child\"&gt;\n    &lt;h3&gt;\u5b50\u7ec4\u4ef6&lt;/h3&gt;\n        &lt;h4&gt;\u6211\u7684\u73a9\u5177\uff1a{{ toy }}&lt;/h4&gt;\n        &lt;h4&gt;\u7236\u7ed9\u6211\u7684\u8f66\uff1a{{ car }}&lt;/h4&gt;\n        &lt;button @click=\"getToy(toy)\"&gt;\u73a9\u5177\u7ed9\u7236\u4eb2&lt;/button&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script setup lang=\"ts\" name=\"Child\"&gt;\n    import { ref } from \"vue\";\n    const toy = ref('\u5965\u7279\u66fc')\n\n    defineProps(['car','getToy'])\n&lt;/script&gt;\n</code></pre>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#62v-model","title":"6.2.\u3010v-model\u3011","text":"<ol> <li>\u6982\u8ff0\uff1a\u5b9e\u73b0 \u7236\u2194\u5b50 \u4e4b\u95f4\u76f8\u4e92\u901a\u4fe1\u3002</li> <li>\u524d\u5e8f\u77e5\u8bc6 \u2014\u2014 <code>v-model</code>\u7684\u672c\u8d28</li> </ol> <p>Vue<pre><code>&lt;!-- \u4f7f\u7528v-model\u6307\u4ee4 --&gt;\n&lt;input type=\"text\" v-model=\"userName\"&gt;\n\n&lt;!-- v-model\u7684\u672c\u8d28\u662f\u4e0b\u9762\u8fd9\u884c\u4ee3\u7801 --&gt;\n&lt;input \n  type=\"text\" \n  :value=\"userName\" \n  @input=\"userName =(&lt;HTMLInputElement&gt;$event.target).value\"\n&gt;\n</code></pre> 3. \u7ec4\u4ef6\u6807\u7b7e\u4e0a\u7684<code>v-model</code>\u7684\u672c\u8d28\uff1a<code>:moldeValue</code> \uff0b <code>update:modelValue</code>\u4e8b\u4ef6\u3002</p>"},{"location":"frontend/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#63-pinia","title":"6.3 pinia","text":""},{"location":"frontend/typescript/","title":"TS\u5b66\u4e60","text":"<p>\u4eceScala\u548cJava\u8fc1\u79fb\u8fc7\u6765\uff0c\u4f7f\u7528\u8d77\u6765\u6bd4\u8f83\u65b9\u4fbf\u3002</p> <p>\u7c7b\u578b\u7684\u9650\u5236\u786e\u5b9e\u5728\u9879\u76ee\u4e2d\u53d1\u6325\u4e86\u4f5c\u7528\uff0c\u800c\u4e0d\u662f\u5168\u90e8\u7528any\u3002</p> <p>\u8f83\u597d\u7684\u53c2\u8003\u8d44\u6599\u5982\u4e0b\uff1a</p> <p>\u300aTypeScript\u7f16\u7a0b\u8be6\u89e3\u300b - \u4e25\u5bcc\u5764\u7684\u77e5\u8bc6\u5e93\u4e13\u680f(yanfukun.com)</p>"}]}